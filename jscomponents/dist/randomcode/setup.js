"use strict";
!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){"use strict";function t(n){var o=n.container,a=n.random_codes_data_url,d=this;e(this,t),this.element_container=o,this.random_codes_data=null,fetch(a).then((function(e){return e.json()})).then((function(e){d.random_codes_data=e,d.pick_and_show_random_code()}))}var o,a,d;return o=t,(a=[{key:"pick_and_show_random_code",value:function(){if(null==this.random_codes_data)throw new Error("RandomCodeShower.pick_and_show_random_code() called before data was loaded");var e=Object.keys(this.random_codes_data.codes),n=e[parseInt(e.length*Math.random(),0)],t=this.random_codes_data.codes[n];this._show_code(n,t)}},{key:"_show_code",value:function(e,n){var t=this,o=n.description_html,a=function(e,n){if("code"===e)return"/c/".concat(n);if("domain"===e)return"/domain/".concat(n);if("kingdom"===e)return"/kingdom/".concat(n);if("user"===e)return"/team#u-".concat(n);if("codelist"===e)return"all"===n?"/all":"/list/".concat(n);throw new Error("Unknown object type ‘".concat(e,"’"))}("code",e);this.element_container.innerHTML="";var d=document.createElement("h1");d.innerHTML="Your Random Code Pick: ".concat(n.name_html);var r=document.createElement("a");r.setAttribute("href",a),r.classList.add("random-code-quick-link"),r.classList.add("random-code-quick-link-go"),r.innerText="go →";var c=document.createElement("a");c.classList.add("random-code-quick-link"),c.classList.add("random-code-quick-link-refresh"),c.textContent="refresh",c.href="javascript:void(0);",c.addEventListener("click",(function(){return t.pick_and_show_random_code()}));var i=document.createElement("p");i.classList.add("random-code-content"),i.innerHTML=o,this.element_container.appendChild(d),this.element_container.appendChild(r),this.element_container.appendChild(c),this.element_container.appendChild(i),void 0!==(null===window||void 0===window?void 0:window.MathJax)&&window.MathJax.typesetPromise([this.element_container])}}])&&n(o.prototype,a),d&&n(o,d),t}();window.addEventListener("load",(function(){var e=document.getElementById("random-code-box");e&&(e._ecz_random_code_shower=new t({container:e,random_codes_data_url:"/dat/randomcodedata.json"}),console.log("RandomCodeShower attached to element = ",e))}))}();
//# sourceMappingURL=setup.js.map
