"use strict";
!function(){function e(e,r,n,t){Object.defineProperty(e,r,{get:n,set:t,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},i=n.parcelRequire7e58;function o(e,r,n,t,a,i,o){try{var s=e[i](o),_=s.value}catch(e){return void n(e)}s.done?r(_):Promise.resolve(_).then(t,a)}function s(e){return function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function s(e){o(i,t,a,s,_,"next",e)}function _(e){o(i,t,a,s,_,"throw",e)}s(void 0)}))}}function l(e){if(Array.isArray(e))return e}null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,r){a[e]=r},n.parcelRequire7e58=i),i.register("cizm5",(function(e,r){var n=i("fOdIC");e.exports=function(e){var r=function(e,r){var n=a(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n},t=function(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")};function a(e){var n,t,i,o=null;function s(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(s.enabled){var i=s,o=Number(new Date),_=o-(n||o);i.diff=_,i.prev=n,i.curr=o,n=o,r[0]=a.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var l=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";l++;var t=a.formatters[n];if("function"==typeof t){var o=r[l];e=t.call(i,o),r.splice(l,1),l--}return e})),a.formatArgs.call(i,r);var c=i.log||a.log;c.apply(i,r)}}return s.namespace=e,s.useColors=a.useColors(),s.color=a.selectColor(e),s.extend=r,s.destroy=a.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==o?o:(t!==a.namespaces&&(t=a.namespaces,i=a.enabled(e)),i)},set:function(e){o=e}}),"function"==typeof a.init&&a.init(s),s}return a.debug=a,a.default=a,a.coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){var e=(0,n.default)(a.names.map(t)).concat((0,n.default)(a.skips.map(t).map((function(e){return"-"+e})))).join(",");return a.enable(""),e},a.enable=function(e){var r;a.save(e),a.namespaces=e,a.names=[],a.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),t=n.length;for(r=0;r<t;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.slice(1)+"$")):a.names.push(new RegExp("^"+e+"$")))},a.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=a.skips.length;r<n;r++)if(a.skips[r].test(e))return!1;for(r=0,n=a.names.length;r<n;r++)if(a.names[r].test(e))return!0;return!1},a.humanize=i("90Gbe"),a.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){a[r]=e[r]})),a.names=[],a.skips=[],a.formatters={},a.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return a.colors[Math.abs(r)%a.colors.length]},a.enable(a.load()),a}})),i.register("fOdIC",(function(r,n){e(r.exports,"default",(function(){return _}));var t=i("7CaDy"),a=i("8TZNp"),o=i("48THx"),s=i("8X9XF");function _(e){return(0,t.default)(e)||(0,a.default)(e)||(0,s.default)(e)||(0,o.default)()}})),i.register("7CaDy",(function(r,n){e(r.exports,"default",(function(){return a}));var t=i("1GA5j");function a(e){if(Array.isArray(e))return(0,t.default)(e)}})),i.register("1GA5j",(function(r,n){function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}e(r.exports,"default",(function(){return t}))})),i.register("8TZNp",(function(r,n){function t(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e(r.exports,"default",(function(){return t}))})),i.register("48THx",(function(r,n){function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e(r.exports,"default",(function(){return t}))})),i.register("8X9XF",(function(r,n){e(r.exports,"default",(function(){return a}));var t=i("1GA5j");function a(e,r){if(e){if("string"==typeof e)return(0,t.default)(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,t.default)(e,r):void 0}}})),i.register("90Gbe",(function(e,r){var n=i("3Ie7j"),t=1e3,a=6e4,o=36e5,s=864e5,_=6048e5,l=315576e5;function c(e,r,n,t){var a=r>=1.5*n;return Math.round(e/n)+" "+t+(a?"s":"")}e.exports=function(e,r){r=r||{};var i,u,f=void 0===e?"undefined":(0,n.default)(e);if("string"===f&&e.length>0)return function(e){if((e=String(e)).length>100)return;var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return;var n=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"weeks":case"week":case"w":return n*_;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===f&&isFinite(e))return r.long?(i=e,(u=Math.abs(i))>=s?c(i,u,s,"day"):u>=o?c(i,u,o,"hour"):u>=a?c(i,u,a,"minute"):u>=t?c(i,u,t,"second"):i+" ms"):function(e){var r=Math.abs(e);return r>=s?Math.round(e/s)+"d":r>=o?Math.round(e/o)+"h":r>=a?Math.round(e/a)+"m":r>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}})),i.register("3Ie7j",(function(r,n){function t(e){return e&&e.constructor===Symbol?"symbol":typeof e}e(r.exports,"default",(function(){return t}))}));var c=i("8TZNp");function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f=i("8X9XF");function d(e,r){return l(e)||(0,c.default)(e,r)||(0,f.default)(e,r)||u()}function p(e,r){var n,t,a,i,o=function(e){return function(r){return s([e,r])}},s=function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(_=0)),_;)try{if(n=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return _.label++,{value:o[1],done:!1};case 5:_.label++,t=o[1],o=[0];continue;case 7:o=_.ops.pop(),_.trys.pop();continue;default:if(!(a=_.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){_=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){_.label=o[1];break}if(6===o[0]&&_.label<a[1]){_.label=a[1],a=o;break}if(a&&_.label<a[2]){_.label=a[2],_.ops.push(o);break}a[2]&&_.ops.pop(),_.trys.pop();continue}o=r.call(e,_)}catch(e){o=[6,e],t=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}},_={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}Object.create;function g(e){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&e[r],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var h,v,m={},w={},k=w={};function y(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}function x(e){if(h===setTimeout)return setTimeout(e,0);if((h===y||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(r){try{return h.call(null,e,0)}catch(r){return h.call(this,e,0)}}}!function(){try{h="function"==typeof setTimeout?setTimeout:y}catch(e){h=y}try{v="function"==typeof clearTimeout?clearTimeout:b}catch(e){v=b}}();var O,P,E=[],S=!1,C=-1;function L(){S&&O&&(S=!1,O.length?E=O.concat(E):C=-1,E.length&&j())}function j(){if(!S){var e=x(L);S=!0;for(var r=E.length;r;){for(O=E,E=[];++C<r;)O&&O[C].run();C=-1,r=E.length}O=null,S=!1,function(e){if(v===clearTimeout)return clearTimeout(e);if((v===b||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(e);try{v(e)}catch(r){try{return v.call(null,e)}catch(r){return v.call(this,e)}}}(e)}}function N(e,r){this.fun=e,this.array=r}function A(){}function I(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function M(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function T(e,r,n){return r&&M(e.prototype,r),n&&M(e,n),e}k.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];E.push(new N(e,r)),1!==E.length||S||x(j)},N.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=A,k.addListener=A,k.once=A,k.off=A,k.removeListener=A,k.removeAllListeners=A,k.emit=A,k.prependListener=A,k.prependOnceListener=A,k.listeners=function(e){return[]},k.binding=function(e){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(e){throw new Error("process.chdir is not supported")},k.umask=function(){return 0},m.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+m.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,t=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(t=n))})),e.splice(t,0,r)},m.save=function(e){try{e?m.storage.setItem("debug",e):m.storage.removeItem("debug")}catch(e){}},m.load=function(){var e;try{e=m.storage.getItem("debug")}catch(e){}!e&&void 0!==w&&"env"in w&&(e=void 0);return e},m.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},m.storage=function(){try{return localStorage}catch(e){}}(),m.destroy=(P=!1,function(){P||(P=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),m.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],m.log=console.debug||console.log||function(){},(m=i("cizm5")(m)).formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};var D,R=i("fOdIC");D=_;var q;q=cytoscape;var z;function F(e,r){return F=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},F(e,r)}function G(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&F(e,r)}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function W(e){return U(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}z=cytoscapeFcose;var H=i("3Ie7j");function $(e,r){return!r||"object"!==(0,H.default)(r)&&"function"!=typeof r?V(e):r}function Y(e){var r=B();return function(){var n,t=W(e);if(r){var a=W(this).constructor;n=Reflect.construct(t,arguments,a)}else n=t.apply(this,arguments);return $(this,n)}}function X(e,r){if(void 0===e)throw new Error("get_field_schema(): schema is undefined!");var n=r.split("."),t=n.pop(),a=!0,i=!1,o=void 0;try{for(var s,_=n[Symbol.iterator]();!(a=(s=_.next()).done);a=!0){var l=s.value;if("[]"==l&&"array"==e.type&&(e=e.items||{}),"object"!=e.type)throw new Error("get_field_schema(): cannot access ‘".concat(l,"’ of non-object ")+"type ‘".concat(e,"’"));e=(e.properties||{})[l]||{}}}catch(e){i=!0,o=e}finally{try{a||null==_.return||_.return()}finally{if(i)throw o}}return(e.properties||{})[t]}function J(e,r){var n,t,a,i,o,s,_,l,c,u,f;return p(this,(function(d){switch(d.label){case 0:if(void 0===e)throw new Error("iterfield(): obj is undefined!");n=r.split("."),t=0,d.label=1;case 1:if(!(t<n.length))return[3,14];if("[]"!=(a=n[t]))return[3,12];i=!0,o=!1,s=void 0,d.label=2;case 2:d.trys.push([2,9,10,11]),_=(e||[])[Symbol.iterator](),d.label=3;case 3:return(i=(l=_.next()).done)?[3,8]:(c=l.value,(u=n.slice(t+1).join("."))?[5,g(J(c,u))]:[3,5]);case 4:return d.sent(),[3,7];case 5:return[4,c];case 6:d.sent(),d.label=7;case 7:return i=!0,[3,3];case 8:return[3,11];case 9:return f=d.sent(),o=!0,s=f,[3,11];case 10:try{i||null==_.return||_.return()}finally{if(o)throw s}return[7];case 11:return[2];case 12:e=(e||{})[a],d.label=13;case 13:return++t,[3,1];case 14:return[4,e];case 15:return d.sent(),[2]}}))}function Z(e,r){if(void 0===e)throw new Error("getfield(): obj is undefined!");var n=r.split("."),t=n.pop(),a=!0,i=!1,o=void 0;try{for(var s,_=n[Symbol.iterator]();!(a=(s=_.next()).done);a=!0){e=e[s.value]||{}}}catch(e){i=!0,o=e}finally{try{a||null==_.return||_.return()}finally{if(i)throw o}}return e[t]}function K(e,r,n){if(void 0===e)throw new Error("setfield(): obj is undefined!");var t=r.split("."),a=t.pop(),i=!0,o=!1,s=void 0;try{for(var _,l=t[Symbol.iterator]();!(i=(_=l.next()).done);i=!0){var c=_.value;e.hasOwnProperty(c)||(e[c]={}),e=e[c]}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}e.hasOwnProperty(a)?e[a]=n(e[a]):e[a]=n()}function Q(e,r,n){K(e,r,(function(e){return(e||[]).concat(n)}))}var ee,re=function(){"use strict";function e(){I(this,e),this.zoodb=null}return T(e,[{key:"install_zoo",value:function(e){this.zoodb=e}},{key:"initialize_zoo",value:function(){}},{key:"process_zoo",value:function(){throw new Error("Please reimplement me")}},{key:"prepare_zoo_update_objects",value:function(e){}},{key:"process_zoo_update_objects",value:function(e){this.process_zoo()}},{key:"process_data_dump",value:function(e,r){return e}}]),e}(),ne=r(m)("zoodb.dbprocessor.relations"),te=function(){"use strict";function e(r,n,t){I(this,e),this.object_type=r,this.relation_spec=n,this.object_field=n.object_field,this.to_object_type=n.to_object_type,this.relation_add_object_field=n.relation_add_object_field,this.relation_primary_key_field=n.relation_primary_key_field;var a=this.relation_spec.backreference;if(a?(this.use_backreference=!0,this.backref_relation_primary_key_field=a.relation_primary_key_field||this.object_type+"_id",this.backref_relation_object_field=a.relation_object_field||this.object_type,this.backref_field=a.field):this.use_backreference=!1,this.zoodb=t,!this.zoodb.objects.hasOwnProperty(this.to_object_type))throw new Error("Invalid _zoo_relation definition in ‘".concat(this.object_type,"’: ")+"There is no such object type ‘".concat(this.to_object_type,"’"));"array"==X(this.zoodb.schema(this.object_type),this.object_field).type?(this.source_has_multiple_relations=!0,this.fully_specified_relation_add_object_field=this.object_field+".[]."+this.relation_add_object_field):(this.source_has_multiple_relations=!1,this.fully_specified_relation_add_object_field=this.object_field+"."+this.relation_add_object_field)}return T(e,[{key:"get_computed_fields",value:function(){var e={};return e[this.object_type]=[{fieldname:this.fully_specified_relation_add_object_field,msg:"You are only expected to set ‘".concat(this.relation_primary_key_field,"’.")}],this.use_backreference&&(e[this.to_object_type]=(e[this.to_object_type]||[]).concat([{fieldname:this.backref_field,msg:"This field will be determined automatically."}])),e}},{key:"get_object_relation_objects",value:function(e){return this.source_has_multiple_relations?Z(e,this.object_field)||[]:[Z(e,this.object_field)]}},{key:"process_object_relation",value:function(e,r){var n=this;this.get_object_relation_objects(e).forEach((function(t){n._process_single_relation(e,t,r)}))}},{key:"_process_single_relation",value:function(e,r,n){var t=this,a=this.zoodb,i=n.process_object_types,o=r[this.relation_primary_key_field];if(!a.objects[this.to_object_type].hasOwnProperty(o))throw new Error("In ".concat(this.object_type," object ‘").concat(e._zoodb.id,"’ ")+"(‘".concat(e._zoodb.source_file_path,"’): Invalid reference in ")+" ‘".concat(this.object_field,"’ ")+"to ".concat(this.to_object_type," object with nonexistent ID ‘").concat(o,"’"));var s=a.objects[this.to_object_type][o],_=Object.fromEntries(Object.entries(r).filter((function(e){var r=d(e,2),n=r[0];r[1];return n!=t.relation_primary_key_field})));if(this.relation_add_object_field&&(r[this.relation_add_object_field]=s),this.use_backreference&&(void 0===i||i.includes(this.to_object_type))){var l=Object.assign({},_);if(l[this.backref_relation_primary_key_field]=e._zoodb.id,l[this.backref_relation_object_field]=e,!this.backref_field)throw new Error("Invalid field: in backreference: in relation object "+"in ".concat(this.object_type));Q(s,this.backref_field,[l])}}}]),e}(),ae=function(e){"use strict";G(n,e);var r=Y(n);function n(e){var t;return I(this,n),(t=r.call(this)).config=null!=e?e:{},t.relations=null,t}return T(n,[{key:"initialize_zoo",value:function(){var e,r=this;null!==(e=(ee=this.config).object_types)&&void 0!==e||(ee.object_types=this.zoodb.object_types),this.relations=Object.fromEntries(this.config.object_types.map((function(e){var n=(r.zoodb.schema(e)._zoo_relations||[]).map((function(n){return new te(e,n,r.zoodb)}));return[e,n]}))),this.check_all_clean_fields()}},{key:"process_zoo",value:function(){var e=this.zoodb;this.clear_all_relation_fields();var r=this.config.object_types;if(this.relations){var n={process_object_types:this.config.object_types},t=!0,a=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var _=o.value;if(ne("Processing relations for ".concat(_," object relations")),!this.relations[_])return;var l=e.objects[_],c=!0,u=!1,f=void 0,d=!0,p=!1,g=void 0;try{for(var h,v=Object.values(l)[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;try{for(var w,k=this.relations[_][Symbol.iterator]();!(c=(w=k.next()).done);c=!0){w.value.process_object_relation(m,n)}}catch(e){u=!0,f=e}finally{try{c||null==k.return||k.return()}finally{if(u)throw f}}}}catch(e){p=!0,g=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw g}}}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}}}},{key:"prepare_zoo_update_objects",value:function(e){this.clear_all_relation_fields()}},{key:"clear_all_relation_fields",value:function(){this.check_all_clean_fields({action:function(e){e.object_type;var r=e.object,n=e.computed_relation_fieldinfo;e.value;K(r,n.fieldname,(function(){}))}})}},{key:"check_all_clean_fields",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).action;null==e&&(e=function(e){var r=e.object_type,n=(e.object,e.computed_relation_fieldinfo),t=e.value;throw new Error("".concat(r," object's ‘").concat(n.fieldname,"’ ")+"field should not be specified manually (got ".concat(JSON.stringify(t),"). ")+n.msg)});var r={},n=!0,t=!1,a=void 0,i=!0,o=!1,s=void 0;try{for(var _,l=Object.entries(this.relations)[Symbol.iterator]();!(i=(_=l.next()).done);i=!0){var c=d(_.value,2),u=(c[0],c[1]);try{for(var f,p=u[Symbol.iterator]();!(n=(f=p.next()).done);n=!0){var g=f.value,h=g.get_computed_fields(),v=!0,m=!1,w=void 0;try{for(var k,y=Object.entries(h)[Symbol.iterator]();!(v=(k=y.next()).done);v=!0){var b=d(k.value,2),x=b[0],O=b[1];r[x]=(r[x]||[]).concat(O)}}catch(e){m=!0,w=e}finally{try{v||null==y.return||y.return()}finally{if(m)throw w}}}}catch(e){t=!0,a=e}finally{try{n||null==p.return||p.return()}finally{if(t)throw a}}}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}var P=!0,E=!1,S=void 0;try{for(var C,L=Object.entries(r)[Symbol.iterator]();!(P=(C=L.next()).done);P=!0){var j=d(C.value,2),N=j[0],A=j[1],I=!0,M=!1,T=void 0,D=!0,R=!1,q=void 0;try{for(var z,F=Object.values(this.zoodb.objects[N])[Symbol.iterator]();!(D=(z=F.next()).done);D=!0){var G=z.value;try{for(var B,U=A[Symbol.iterator]();!(I=(B=U.next()).done);I=!0){var W=B.value,V=W.fieldname,H=!0,$=!1,Y=void 0;try{for(var X,Z=J(G,V)[Symbol.iterator]();!(H=(X=Z.next()).done);H=!0){var K=X.value;void 0!==K&&e({object_type:N,object:G,computed_relation_fieldinfo:W,value:K})}}catch(e){$=!0,Y=e}finally{try{H||null==Z.return||Z.return()}finally{if($)throw Y}}}}catch(e){M=!0,T=e}finally{try{I||null==U.return||U.return()}finally{if(M)throw T}}}}catch(e){R=!0,q=e}finally{try{D||null==F.return||F.return()}finally{if(R)throw q}}}}catch(e){E=!0,S=e}finally{try{P||null==L.return||L.return()}finally{if(E)throw S}}}},{key:"prepare_data_dump",value:function(e,r){if(r.relations_keep_object_property_pointers)return e;throw new Error("Operation not supported!")}}]),n}(re);function ie(e,r){return e?e+"."+r:r}function oe(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[]";return e?e+"."+r:r}function se(e,r,n,t){var a,i,o,s,_,l,c,u,f,d,h,v,m,w,k,y,b,x,O,P,E,S,C,L,j,N,A,I,M,T,D,R,q,z,F,G;return p(this,(function(p){switch(p.label){case 0:if(null!=n||(n={}),i=null!==(a=n.propfieldname)&&void 0!==a?a:ie,s=null!==(o=n.arrayitemfieldname)&&void 0!==o?o:oe,l=null===(_=n.only_schema_properties)||void 0===_||_,void 0===e)return[2];if(!1===r)throw new Error("Invalid object ‘".concat(null!=e?e:"").concat(t?"."+t:"","’ with ")+"schema ‘false’");if("object"!=typeof r)throw new Error("Expected schema of object type, got ‘".concat(JSON.stringify(r),"’"));if(void 0!==t&&null!=n.visit_predicate&&!n.visit_predicate({fieldname:t,fieldschema:r,fieldvalue:e}))return[2];if("object"!=r.type)return[3,18];u=null!==(c=r.properties)&&void 0!==c?c:{},f=l?Object.keys(u):Object.keys(e),d=!0,h=!1,v=void 0,p.label=1;case 1:p.trys.push([1,15,16,17]),m=f[Symbol.iterator](),p.label=2;case 2:if(d=(w=m.next()).done)return[3,14];if(k=w.value,x=null!==(b=null!==(y=(null!=u?u:{})[k])&&void 0!==y?y:r.additionalProperties)&&void 0!==b?b:{},O=e[k],P=se(O,x,n,i(t,k)),E=!0,S=!1,C=void 0,!n.provide_parent)return[3,11];p.label=3;case 3:p.trys.push([3,8,9,10]),L=P[Symbol.iterator](),p.label=4;case 4:return(E=(j=L.next()).done)?[3,7]:(N=j.value,[4,Object.assign({parent:e,parent_index:k},N)]);case 5:p.sent(),p.label=6;case 6:return E=!0,[3,4];case 7:return[3,10];case 8:return G=p.sent(),S=!0,C=G,[3,10];case 9:try{E||null==L.return||L.return()}finally{if(S)throw C}return[7];case 10:return[3,13];case 11:return[5,g(P)];case 12:p.sent(),p.label=13;case 13:return d=!0,[3,2];case 14:return[3,17];case 15:return G=p.sent(),h=!0,v=G,[3,17];case 16:try{d||null==m.return||m.return()}finally{if(h)throw v}return[7];case 17:return[3,34];case 18:if("array"!=r.type)return[3,32];A=0,p.label=19;case 19:if(!(A<e.length))return[3,31];if(M=se(e[A],null!==(I=r.items)&&void 0!==I?I:{},n,s(t,A)),T=!0,D=!1,R=void 0,!n.provide_parent)return[3,28];p.label=20;case 20:p.trys.push([20,25,26,27]),q=M[Symbol.iterator](),p.label=21;case 21:return(T=(z=q.next()).done)?[3,24]:(F=z.value,[4,Object.assign({parent:e,parent_index:A},F)]);case 22:p.sent(),p.label=23;case 23:return T=!0,[3,21];case 24:return[3,27];case 25:return G=p.sent(),D=!0,R=G,[3,27];case 26:try{T||null==q.return||q.return()}finally{if(D)throw R}return[7];case 27:return[3,30];case 28:return[5,g(M)];case 29:p.sent(),p.label=30;case 30:return++A,[3,19];case 31:return[3,34];case 32:return[4,{fieldname:t,fieldvalue:e,fieldschema:r}];case 33:p.sent(),p.label=34;case 34:return[2]}}))}function _e(e,r,n){var t,a,i,o,s,_,l,c,u,f,h,v,m;return p(this,(function(p){switch(p.label){case 0:if(null!=r||(r={}),a=null!==(t=r.propfieldname)&&void 0!==t?t:ie,o=null!==(i=r.arrayitemfieldname)&&void 0!==i?i:oe,"object"!=typeof e)throw new Error("Expected schema of object type, got ‘".concat(JSON.stringify(e),"’"));if(void 0!==n&&null!=r.visit_predicate&&!r.visit_predicate({fieldname:n,fieldschema:e}))return[2];if(_=!0,l=!1,c=void 0,"object"!=e.type)return[3,9];p.label=1;case 1:p.trys.push([1,6,7,8]),u=Object.entries(e.properties)[Symbol.iterator](),p.label=2;case 2:return(_=(f=u.next()).done)?[3,5]:(h=d(f.value,2),v=h[0],[5,g(_e(h[1],r,a(n,v)))]);case 3:p.sent(),p.label=4;case 4:return _=!0,[3,2];case 5:return[3,8];case 6:return m=p.sent(),l=!0,c=m,[3,8];case 7:try{_||null==u.return||u.return()}finally{if(l)throw c}return[7];case 8:return[3,13];case 9:return"array"!=e.type?[3,11]:[5,g(_e(null!==(s=e.items)&&void 0!==s?s:{},r,o(n)))];case 10:return p.sent(),[3,13];case 11:return[4,{fieldname:n,fieldschema:e}];case 12:p.sent(),p.label=13;case 13:return[2]}}))}R=i("fOdIC"),H=i("3Ie7j");var le="org.transcrypt.__runtime__",ce={};function ue(e,r,n){var t=e;if(""!=r){for(var a=r.split("."),i=a.length,o=0;o<a.length;o++){if(!t.hasOwnProperty(a[o])){i=o;break}t=t[a[o]]}for(o=i;o<a.length;o++)t[a[o]]={},t=t[a[o]]}var s=!0,_=!1,l=void 0;try{for(var c,u=function(){var e=c.value;Object.defineProperty(t,e,{get:function(){return n[e]},enumerable:!0,configurable:!0})},f=Object.getOwnPropertyNames(n)[Symbol.iterator]();!(s=(c=f.next()).done);s=!0)u()}catch(e){_=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(_)throw l}}}function fe(e,r,n){return e&&(e.hasOwnProperty("__class__")||"string"==typeof e||e instanceof String)?(n&&Object.defineProperty(e,n,{value:function(){var n=[].slice.apply(arguments);return r.apply(null,[e].concat(n))},writable:!0,enumerable:!0,configurable:!0}),function(){var n=[].slice.apply(arguments);return r.apply(null,[e.__proxy__?e.__proxy__:e].concat(n))}):r}function de(e,r,n){return e.hasOwnProperty("__class__")?function(){var n=[].slice.apply(arguments);return r.apply(null,[e.__class__].concat(n))}:function(){var n=[].slice.apply(arguments);return r.apply(null,[e].concat(n))}}ce.interpreter_name="python",ce.transpiler_name="transcrypt",ce.executor_name=ce.transpiler_name,ce.transpiler_version="3.9.0";var pe={__name__:"type",__bases__:[],__new__:function(e,r,n,t){for(var a=function(){var e=[].slice.apply(arguments);return a.__new__(e)},i=n.length-1;i>=0;i--){var o=n[i];for(var s in o){null!=(g=Object.getOwnPropertyDescriptor(o,s))&&Object.defineProperty(a,s,g)}var _=!0,l=!1,c=void 0;try{for(var u,f=Object.getOwnPropertySymbols(o)[Symbol.iterator]();!(_=(u=f.next()).done);_=!0){var d=u.value,p=Object.getOwnPropertyDescriptor(o,d);Object.defineProperty(a,d,p)}}catch(e){l=!0,c=e}finally{try{_||null==f.return||f.return()}finally{if(l)throw c}}}for(var s in a.__metaclass__=e,a.__name__=r.startsWith("py_")?r.slice(3):r,a.__bases__=n,t){var g=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(a,s,g)}var h=!0,v=!1,m=void 0;try{for(var w,k=Object.getOwnPropertySymbols(t)[Symbol.iterator]();!(h=(w=k.next()).done);h=!0){var y=w.value,b=Object.getOwnPropertyDescriptor(t,y);Object.defineProperty(a,y,b)}}catch(e){v=!0,m=e}finally{try{h||null==k.return||k.return()}finally{if(v)throw m}}return a}};pe.__metaclass__=pe;var ge={__init__:function(e){},__metaclass__:pe,__name__:"object",__bases__:[],__new__:function(e){var r=Object.create(this,{__class__:{value:this,enumerable:!0}});return("__getattr__"in this||"__setattr__"in this)&&(r.__proxy__=new Proxy(r,{get:function(e,r){var n=e[r];return null==n?e.__getattr__(r):n},set:function(e,r,n){try{e.__setattr__(r,n)}catch(t){e[r]=n}return!0}}),r=r.__proxy__),this.__init__.apply(null,[r].concat(e)),r}};function he(e,r,n,t){return void 0===t&&(t=r[0].__metaclass__),t.__new__(t,e,r,n)}function ve(){var e=[].slice.apply(arguments);return"object"==typeof e[0]&&"__call__"in e[0]?e[0].__call__.apply(e[1],e.slice(2)):e[0].apply(e[1],e.slice(2))}ce.executor_name=ce.transpiler_name;function me(e){return e.__kwargtrans__=null,e.constructor=Object,e}function we(e,r){var n=!0,t=!1,a=void 0;try{for(var i,o=e.__bases__[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(r in s)return s[r]}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}throw new Ur("Superclass method not found")}function ke(e,r){return r||(r=function(){}),{get:function(){return e(this)},set:function(e){r(this,e)},enumerable:!0}}function ye(e,r,n){e.hasOwnProperty(r)||Object.defineProperty(e,r,n)}function be(e,r){if(!e)throw Yr(r,new Error)}function xe(e,r){var n={};for(var t in e)n[t]=e[t];for(var t in r)n[t]=r[t];return n}function Oe(e){var r=[];for(var n in e)r.push(n.startsWith("py_")?n.slice(3):n);return r.sort(),r}function Pe(e,r,n){e[r]=n}function Ee(e,r){return r in e?e[r]:e["py_"+r]}function Se(e,r){try{return r in e||"py_"+r in e}catch(e){return!1}}function Ce(e,r){return null!=r&&(r.__contains__ instanceof Function?r.__contains__(e):r.indexOf?r.indexOf(e)>-1:r.hasOwnProperty(e))}function Le(e){return e.startswith("__")&&e.endswith("__")||"constructor"==e||e.startswith("py_")}function je(e){if(null==e)return 0;if(e.__len__ instanceof Function)return e.__len__();if(void 0!==e.length)return e.length;var r=0;for(var n in e)Le(n)||r++;return r}function Ne(e){return null!=e&&(["boolean","number"].indexOf(void 0===e?"undefined":(0,H.default)(e))>=0?e:e.__bool__ instanceof Function?!!e.__bool__()&&e:e.__len__ instanceof Function?0!==e.__len__()&&e:(e instanceof Function||0!==je(e))&&e)}function Ae(e){if("inf"==e)return 1/0;if("-inf"==e)return-1/0;if("nan"==e)return NaN;if(isNaN(parseFloat(e))){if(!1===e)return 0;if(!0===e)return 1;throw Hr("could not convert string to float: '"+ir(e)+"'",new Error)}return+e}function Ie(e){return 0|Ae(e)}function Me(e){return!!Ne(e)}function Te(e){var r=void 0===e?"undefined":(0,H.default)(e);if("object"!=r)return"boolean"==r?Me:"string"==r?ir:"number"==r?e%1==0?Ie:Ae:null;try{return"__class__"in e?e.__class__:ge}catch(e){return r}}function De(e,r){if(r instanceof Array){var n=!0,t=!1,a=void 0;try{for(var i,o=r[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){if(De(e,i.value))return!0}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}return!1}try{var s=e;if(s==r)return!0;for(var _=[].slice.call(s.__bases__);_.length;){if((s=_.shift())==r)return!0;s.__bases__.length&&(_=[].slice.call(s.__bases__).concat(_))}return!1}catch(n){return e==r||r==ge}}function Re(e,r){try{return De("__class__"in e?e.__class__:Te(e),r)}catch(n){return De(Te(e),r)}}function qe(e){return!(!e||"object"!=typeof e||!("__call__"in e))||"function"==typeof e}function ze(e){try{return e.__repr__()}catch(i){try{return e.__str__()}catch(i){try{if(null==e)return"None";if(e.constructor==Object){var r="{",n=!1;for(var t in e)if(!Le(t)){if(t.isnumeric())var a=t;else a="'"+t+"'";n?r+=", ":n=!0,r+=a+": "+ze(e[t])}return r+="}"}return"boolean"==typeof e?e.toString().capitalize():e.toString()}catch(r){return"<object of type: "+(void 0===e?"undefined":(0,H.default)(e))+">"}}}}function Fe(e){return String.fromCharCode(e)}function Ge(e){return e.charCodeAt(0)}function Be(e){var r,n;return 1==arguments.length?(r=Math).max.apply(r,(0,R.default)(e)):(n=Math).max.apply(n,arguments)}Ae.__name__="float",Ae.__bases__=[ge],Ie.__name__="int",Ie.__bases__=[ge],Number.prototype.__format__=function(e){var r=function(e,r,n,t){null==n&&(n=" "),null==t&&(t=">");var a="",i="";e.startswith(["+","-"])&&(i=e[0],e=e.substr(1)),s&&e.startswith(["0b","0o","0x"])&&(a=e.slice(0,2),e=e.substr(2));var o=r-(e.length+i.length+a.length);switch(t){case"=":return i+a+br(n,o)+e;case">":return br(n,o)+i+a+e;case"<":return i+a+e+br(n,o);case"^":var _=(o%2+2)%2;return br(n,o=Math.floor(o/2))+i+a+e+br(n,o+_);default:throw Hr("Invalid align type: '"+t+"'",new Error)}},n=function(e){if(-1==e.indexOf("e+")&&("g"==f||"G"==f)){for(var r=e.py_split("."),n=r[0],t=r[1];"0"==t[t.length-1];)t=t.slice(0,-1);e=""!=t?".".join([n,t]):n}return s&&-1==e.indexOf(".")&&(e+="."),e};if(null==e||0==e.strip().length)return this.toString();var t=!1,a=!1,i=0,o=!1,s=!1,_="-",l=">",c=" ",u=void 0,f=void 0,d=this.valueOf(),p=d<0;d=Math.abs(d),e.endswith(["b","c","d","e","E","f","F","g","G","n","o","x","X","%"])?(f=e[e.length-1],e=e.slice(0,-1),"n"==f&&(f=Number.isInteger(d)?"d":"f")):(f=Number.isInteger(d)?"d":"g",a=!0);var g=e.split(".");if(e=g[0],null!=(u=g[1])&&(u=parseInt(u)),e.length>0&&","==e[e.length-1]&&(t=!0,e=e.slice(0,-1)),e.length>0){for(var h="";e&&e[e.length-1].isnumeric();)h=e[e.length-1]+h,e=e.slice(0,-1);h.length>0&&("0"==h[0]?(i=parseInt(h.substr(1)),o=!0):i=parseInt(h)),e.length>0&&"#"==e[e.length-1]&&(s=!0,e=e.slice(0,-1)),e.length>0&&e.endswith(["+","-"," "])&&(_=e[e.length-1],e=e.slice(0,-1)),e.length>0&&e.endswith(["<",">","=","^"])&&(l=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(c=e[0])}if(isNaN(d))d="nan";else if(d==1/0)d="inf";else switch(f){case"b":d=Math.floor(d).toString(2),s&&(d="0b"+d);break;case"c":d=String.fromCharCode(Math.floor(d));break;case"d":d=Math.floor(d).toString(),t&&(d=d.replace(/\B(?=(\d{3})+(?!\d))/g,","));break;case"o":d=Math.floor(d).toString(8),s&&(d="0o"+d);break;case"x":case"X":d=Math.floor(d).toString(16),s&&(d="0x"+d);break;case"e":case"E":null==u&&(u=6);var v=(k=d.toExponential(u).split("e+"))[0],m=k[1];d=n(d=v.toString()+"e+"+r(m.toString(),2,"0"));break;case"f":case"F":case"%":null==u&&(u=6),"%"==f&&(d*=100),d=n(d=d.toFixed(u)),"%"==f&&(d+="%");break;case"g":case"G":null==u&&(u=a?1:6),0==u&&(u=1);var w=!1;if(a)(g=d.toString().split("."))[0].length+g[1].length>=u&&(w=!0);var k;v=(k=d.toExponential(u-1).split("e+"))[0];d=n(d=(w|=!(-4<=(m=k[1])&&m<u))?v.toString()+"e+"+r(m.toString(),2,"0"):d.toFixed(u-1-m));break;default:throw Hr("Invalid format type: '"+f+"'",new Error)}return f===f.toUpperCase()&&(d=d.toUpperCase()),"c"!=f&&("-"==_?p&&(d="-"+d):d=p?"-"+d:_+d),o&&(c="0",l="="),i>0&&(d=r(d,i,c,l)),d},Me.__name__="bool",Me.__bases__=[Ie];Math.abs;function Ue(e,r){if(null==e)return"None";switch(r=r||"",void 0===e?"undefined":(0,H.default)(e)){case"number":case"string":return e.__format__(r);case"boolean":return r?(e?1:0).__format__(r):ir(e);case"object":return"__format__"in e?e.__format__(r):ir(e).__format__(r);default:return ir(e).__format__(r)}}function We(){try{return{value:this.__next__(),done:!1}}catch(e){return{value:void 0,done:!0}}}function Ve(){var e=this.next();if(e.done)throw Vr(new Error);return e.value}function He(e){if("string"==typeof e||"__iter__"in e)(r=e.__iter__()).next=We;else if("selector"in e){(r=nr(e).__iter__()).next=We}else if("next"in e){"__next__"in(r=e)||(r.__next__=Ve)}else{if(!(Symbol.iterator in e))throw Wr(new Error);var r;(r=e[Symbol.iterator]()).__next__=Ve}return r[Symbol.iterator]=function(){return r},r}function $e(e){try{var r=e.__next__()}catch(n){if((r=e.next()).done)throw Vr(new Error);return r.value}if(null==r)throw Vr(new Error);return r}function Ye(e){this.iterable=e,this.index=0}function Xe(e){this.iterable=e,this.index=0}function Je(e){return(e=e.slice()).reverse(),e}function Ze(){for(var e=[].slice.call(arguments),r=0;r<e.length;r++)"string"==typeof e[r]?e[r]=e[r].split(""):Array.isArray(e[r])||(e[r]=Array.from(e[r]));var n=0==e.length?[]:e.reduce((function(e,r){return e.length<r.length?e:r}));return n.map((function(r,n){return e.map((function(e){return e[n]}))}))}function Ke(e){var r=!0,n=!1,t=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){if(Me(a.value))return!0}}catch(e){n=!0,t=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw t}}return!1}function Qe(e){var r=!0,n=!1,t=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){if(!Me(a.value))return!1}}catch(e){n=!0,t=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw t}}return!0}function er(e){return Ze(function(e,r,n){if(null==r&&(r=e,e=0),null==n&&(n=1),n>0&&e>=r||n<0&&e<=r)return[];for(var t=[],a=e;n>0?a<r:a>r;a+=n)t.push(a);return t}(je(e)),e)}function rr(e){if(null==e||"object"==typeof e)return e;var r={};for(var n in obj)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}function nr(e){return e?Array.from(e):[]}function tr(e){var r=e?[].slice.apply(e):[];return r.__class__=tr,r}function ar(e){var r=[];if(e)for(var n=0;n<e.length;n++)r.add(e[n]);return r.__class__=ar,r}Ye.prototype.__next__=function(){if(this.index<this.iterable.length)return this.iterable[this.index++];throw Vr(new Error)},Xe.prototype.next=function(){return this.index<this.iterable.py_keys.length?{value:this.index++,done:!1}:{value:void 0,done:!0}},Array.prototype.__class__=nr,nr.__name__="list",nr.__bases__=[ge],Array.prototype.__iter__=function(){return new Ye(this)},Array.prototype.__getslice__=function(e,r,n){if(e<0&&(e=this.length+e),null==r?r=this.length:r<0?r=this.length+r:r>this.length&&(r=this.length),1==n)return Array.prototype.slice.call(this,e,r);for(var t=nr([]),a=e;a<r;a+=n)t.push(this[a]);return t},Array.prototype.__setslice__=function(e,r,n,t){if(e<0&&(e=this.length+e),null==r?r=this.length:r<0&&(r=this.length+r),null==n)Array.prototype.splice.apply(this,[e,r-e].concat(t));else for(var a=0,i=e;i<r;i+=n)this[i]=t[a++]},Array.prototype.__repr__=function(){if(this.__class__==ar&&!this.length)return"set()";for(var e=this.__class__&&this.__class__!=nr?this.__class__==tr?"(":"{":"[",r=0;r<this.length;r++)r&&(e+=", "),e+=ze(this[r]);return this.__class__==tr&&1==this.length&&(e+=","),e+=this.__class__&&this.__class__!=nr?this.__class__==tr?")":"}":"]"},Array.prototype.__str__=Array.prototype.__repr__,Array.prototype.append=function(e){this.push(e)},Array.prototype.py_clear=function(){this.length=0},Array.prototype.extend=function(e){this.push.apply(this,e)},Array.prototype.insert=function(e,r){this.splice(e,0,r)},Array.prototype.remove=function(e){var r=this.indexOf(e);if(-1==r)throw Hr("list.remove(x): x not in list",new Error);this.splice(r,1)},Array.prototype.index=function(e){return this.indexOf(e)},Array.prototype.py_pop=function(e){return null==e?this.pop():this.splice(e,1)[0]},Array.prototype.py_sort=function(){en.apply(null,[this].concat([].slice.apply(arguments)))},Array.prototype.__add__=function(e){return nr(this.concat(e))},Array.prototype.__mul__=function(e){for(var r=this,n=1;n<e;n++)r=r.concat(this);return r},Array.prototype.__rmul__=Array.prototype.__mul__,tr.__name__="tuple",tr.__bases__=[ge],ar.__name__="set",ar.__bases__=[ge],Array.prototype.__bindexOf__=function(e){e+="";for(var r=0,n=this.length-1;r<=n;){var t=(r+n)/2|0,a=this[t]+"";if(a<e)r=t+1;else{if(!(a>e))return t;n=t-1}}return-1},Array.prototype.add=function(e){-1==this.indexOf(e)&&this.push(e)},Array.prototype.discard=function(e){var r=this.indexOf(e);-1!=r&&this.splice(r,1)},Array.prototype.isdisjoint=function(e){this.sort();for(var r=0;r<e.length;r++)if(-1!=this.__bindexOf__(e[r]))return!1;return!0},Array.prototype.issuperset=function(e){this.sort();for(var r=0;r<e.length;r++)if(-1==this.__bindexOf__(e[r]))return!1;return!0},Array.prototype.issubset=function(e){return ar(e.slice()).issuperset(this)},Array.prototype.union=function(e){for(var r=ar(this.slice().sort()),n=0;n<e.length;n++)-1==r.__bindexOf__(e[n])&&r.push(e[n]);return r},Array.prototype.intersection=function(e){this.sort();for(var r=ar(),n=0;n<e.length;n++)-1!=this.__bindexOf__(e[n])&&r.push(e[n]);return r},Array.prototype.difference=function(e){for(var r=ar(e.slice().sort()),n=ar(),t=0;t<this.length;t++)-1==r.__bindexOf__(this[t])&&n.push(this[t]);return n},Array.prototype.symmetric_difference=function(e){return this.union(e).difference(this.intersection(e))},Array.prototype.py_update=function(){var e=[].concat.apply(this.slice(),arguments).sort();this.py_clear();for(var r=0;r<e.length;r++)e[r]!=e[r-1]&&this.push(e[r])},Array.prototype.__eq__=function(e){if(this.length!=e.length)return!1;this.__class__==ar&&(this.sort(),e.sort());for(var r=0;r<this.length;r++)if(this[r]!=e[r])return!1;return!0},Array.prototype.__ne__=function(e){return!this.__eq__(e)},Array.prototype.__le__=function(e){if(this.__class__==ar)return this.issubset(e);for(var r=0;r<this.length;r++){if(this[r]>e[r])return!1;if(this[r]<e[r])return!0}return!0},Array.prototype.__ge__=function(e){if(this.__class__==ar)return this.issuperset(e);for(var r=0;r<this.length;r++){if(this[r]<e[r])return!1;if(this[r]>e[r])return!0}return!0},Array.prototype.__lt__=function(e){return this.__class__==ar?this.issubset(e)&&!this.issuperset(e):!this.__ge__(e)},Array.prototype.__gt__=function(e){return this.__class__==ar?this.issuperset(e)&&!this.issubset(e):!this.__le__(e)};function ir(e){if("number"==typeof e)return e.toString();try{return e.__str__()}catch(r){try{return ze(e)}catch(r){return String(e)}}}function or(e){return this.hasOwnProperty(e)}function sr(){var e=[];for(var r in this)Le(r)||e.push(r);return e}function _r(){var e=[];for(var r in this)Le(r)||e.push([r,this[r]]);return e}function lr(e){delete this[e]}function cr(){for(var e in this)delete this[e]}function ur(e,r){var n=this[e];return null==n&&(n=this["py_"+e]),null==n?null==r?null:r:n}function fr(e,r){var n=this[e];if(null!=n)return n;var t=null==r?null:r;return this[e]=t,t}function dr(e,r){var n=this[e];if(null!=n)return delete this[e],n;if(void 0===r)throw $r(e,new Error);return r}function pr(){var e=Object.keys(this)[0];if(null==e)throw $r("popitem(): dictionary is empty",new Error);var r=tr([e,this[e]]);return delete this[e],r}function gr(e){for(var r in e)this[r]=e[r]}function hr(){var e=[];for(var r in this)Le(r)||e.push(this[r]);return e}function vr(e){return this[e]}function mr(e,r){this[e]=r}function wr(e){var r={};if(!e||e instanceof Array){if(e)for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof Array)||2!=t.length)throw Hr("dict update sequence element #"+n+" has length "+t.length+"; 2 is required",new Error);var a=t[0],i=t[1];!(e instanceof Array)&&e instanceof Object&&(Re(e,wr)||(i=wr(i))),r[a]=i}}else if(Re(e,wr)){var o=e.py_keys();for(n=0;n<o.length;n++){r[a=o[n]]=e[a]}}else{if(!(e instanceof Object))throw Hr("Invalid type of object for dict creation",new Error);r=e}return ye(r,"__class__",{value:wr,enumerable:!1,writable:!0}),ye(r,"__contains__",{value:or,enumerable:!1}),ye(r,"py_keys",{value:sr,enumerable:!1}),ye(r,"__iter__",{value:function(){new Ye(this.py_keys())},enumerable:!1}),ye(r,Symbol.iterator,{value:function(){new Xe(this.py_keys())},enumerable:!1}),ye(r,"py_items",{value:_r,enumerable:!1}),ye(r,"py_del",{value:lr,enumerable:!1}),ye(r,"py_clear",{value:cr,enumerable:!1}),ye(r,"py_get",{value:ur,enumerable:!1}),ye(r,"py_setdefault",{value:fr,enumerable:!1}),ye(r,"py_pop",{value:dr,enumerable:!1}),ye(r,"py_popitem",{value:pr,enumerable:!1}),ye(r,"py_update",{value:gr,enumerable:!1}),ye(r,"py_values",{value:hr,enumerable:!1}),ye(r,"__getitem__",{value:vr,enumerable:!1}),ye(r,"__setitem__",{value:mr,enumerable:!1}),r}function kr(e,r){return"object"==typeof e&&"__mod__"in e?e.__mod__(r):"object"==typeof r&&"__rmod__"in r?r.__rmod__(e):(e%r+r)%r}Uint8Array.prototype.__add__=function(e){var r=new Uint8Array(this.length+e.length);return r.set(this),r.set(e,this.length),r},Uint8Array.prototype.__mul__=function(e){for(var r=new Uint8Array(e*this.length),n=0;n<e;n++)r.set(this,n*this.length);return r},Uint8Array.prototype.__rmul__=Uint8Array.prototype.__mul__,String.prototype.__class__=ir,ir.__name__="str",ir.__bases__=[ge],String.prototype.__iter__=function(){new Ye(this)},String.prototype.__repr__=function(){return(-1==this.indexOf("'")?"'"+this+"'":'"'+this+'"').py_replace("\t","\\t").py_replace("\n","\\n")},String.prototype.__str__=function(){return this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endswith=function(e){if(!(e instanceof Array))return""==e||this.slice(-e.length)==e;for(var r=0;r<e.length;r++)if(this.slice(-e[r].length)==e[r])return!0;return!1},String.prototype.find=function(e,r){return this.indexOf(e,r)},String.prototype.__getslice__=function(e,r,n){e<0&&(e=this.length+e),null==r?r=this.length:r<0&&(r=this.length+r);var t="";if(1==n)t=this.substring(e,r);else for(var a=e;a<r;a+=n)t=t.concat(this.charAt(a));return t},String.prototype.__format__=function(e){if(null==e||0==e.strip().length)return this.valueOf();var r=0,n="<",t=" ",a=this.valueOf();if("s"==e[e.length-1]&&(e=e.slice(0,-1)),e.length>0){for(var i="";e&&e[e.length-1].isnumeric();)i=e[e.length-1]+i,e=e.slice(0,-1);i.length>0&&(r=parseInt(i)),e.length>0&&e.endswith(["<",">","^"])&&(n=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(t=e[0])}return r>0&&(a=function(e,r,n,t){var a=r-e.length;switch(t){case">":return br(n,a)+e;case"<":return e+br(n,a);case"^":var i=(a%2+2)%2;return br(n,a=Math.floor(a/2))+e+br(n,a+i);default:return e}}(a,r,t,n)),a},ye(String.prototype,"format",{get:function(){return fe(this,(function(e){var r=tr([].slice.apply(arguments).slice(1)),n=0;return e.replace(/\{([^\{]*)\}/g,(function(e,t){var a=t.split(":");t=a[0];var i=a[1];a=t.split("!"),t=a[0];var o=a[1],s=void 0;if(""==t&&(t=n++),t==+t&&void 0!==r[t])s=r[t];else{var _=void 0,l=(""+t).indexOf(".");if(-1!=l?(_=t.substring(l+1),t=t.substring(0,l)):-1!=(l=(""+t).indexOf("["))&&(_=t.substring(l+1).slice(0,-1),t=t.substring(0,l)),t==+t&&_&&void 0!==r[t])s=r[t][_];else for(var c=0;c<r.length;c++)if("object"==typeof r[c]&&null!=r[c]&&void 0!==r[c][t]){s=_?r[c][t][_]:r[c][t];break}}if(void 0===s)return e;if("r"==o)s=ze(s);else if("s"==o)s=ir(s);else if("a"==o)throw Hr("Conversion to ascii not yet supported: '"+e+"'",new Error);return Ue(s,i)}))}))},enumerable:!0}),String.prototype.isalnum=function(){return/^[0-9a-zA-Z]{1,}$/.test(this)},String.prototype.isalpha=function(){return/^[a-zA-Z]{1,}$/.test(this)},String.prototype.isdecimal=function(){return/^[0-9]{1,}$/.test(this)},String.prototype.isdigit=function(){return this.isdecimal()},String.prototype.islower=function(){return/^[a-z]{1,}$/.test(this)},String.prototype.isupper=function(){return/^[A-Z]{1,}$/.test(this)},String.prototype.isspace=function(){return/^[\s]{1,}$/.test(this)},String.prototype.isnumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},String.prototype.join=function(e){return(e=Array.from(e)).join(this)},String.prototype.lower=function(){return this.toLowerCase()},String.prototype.py_replace=function(e,r,n){return this.split(e,n).join(r)},String.prototype.lstrip=function(){return this.replace(/^\s*/g,"")},String.prototype.rfind=function(e,r){return this.lastIndexOf(e,r)},String.prototype.rsplit=function(e,r){if(null==e||null==e){e=/\s+/;var n=this.strip()}else n=this;if(null==r||-1==r)return n.split(e);var t=n.split(e);if(r<t.length){var a=t.length-r;return[t.slice(0,a).join(e)].concat(t.slice(a))}return t},String.prototype.rstrip=function(){return this.replace(/\s*$/g,"")},String.prototype.py_split=function(e,r){if(null==e||null==e){e=/\s+/;var n=this.strip()}else n=this;if(null==r||-1==r)return n.split(e);var t=n.split(e);return r<t.length?t.slice(0,r).concat([t.slice(r).join(e)]):t},String.prototype.startswith=function(e){if(!(e instanceof Array))return 0==this.indexOf(e);for(var r=0;r<e.length;r++)if(0==this.indexOf(e[r]))return!0;return!1},String.prototype.strip=function(){return this.trim()},String.prototype.upper=function(){return this.toUpperCase()},String.prototype.__mul__=function(e){for(var r="",n=0;n<e;n++)r+=this;return r},String.prototype.__rmul__=String.prototype.__mul__,wr.__name__="dict",wr.__bases__=[ge],ye(Function.prototype,"__setdoc__",{value:function(e){return this.__doc__=e,this},enumerable:!1});function yr(e){return"object"==typeof e&&"__neg__"in e?e.__neg__():-e}function br(e,r){return"object"==typeof e&&"__mul__"in e?e.__mul__(r):"object"==typeof r&&"__rmul__"in r?r.__rmul__(e):"string"==typeof e?e.__mul__(r):"string"==typeof r?r.__rmul__(e):e*r}function xr(e,r){return"object"==typeof e&&"__floordiv__"in e?e.__floordiv__(r):"object"==typeof r&&"__rfloordiv__"in r?r.__rfloordiv__(e):"object"==typeof e&&"__div__"in e?e.__div__(r):"object"==typeof r&&"__rdiv__"in r?r.__rdiv__(e):Math.floor(e/r)}function Or(e,r){return"object"==typeof e&&"__add__"in e?e.__add__(r):"object"==typeof r&&"__radd__"in r?r.__radd__(e):e+r}function Pr(e,r){return"object"==typeof e&&"__sub__"in e?e.__sub__(r):"object"==typeof r&&"__rsub__"in r?r.__rsub__(e):e-r}function Er(e,r){return"object"==typeof e&&"__lshift__"in e?e.__lshift__(r):"object"==typeof r&&"__rlshift__"in r?r.__rlshift__(e):e<<r}function Sr(e,r){return"object"==typeof e&&"__and__"in e?e.__and__(r):"object"==typeof r&&"__rand__"in r?r.__rand__(e):e&r}function Cr(e,r){return"object"==typeof e&&"__eq__"in e?e.__eq__(r):e==r}function Lr(e,r){return"object"==typeof e&&"__ne__"in e?e.__ne__(r):e!=r}function jr(e,r){return"object"==typeof e&&"__lt__"in e?e.__lt__(r):e<r}function Nr(e,r){return"object"==typeof e&&"__le__"in e?e.__le__(r):e<=r}function Ar(e,r){return"object"==typeof e&&"__gt__"in e?e.__gt__(r):e>r}function Ir(e,r){return"object"==typeof e&&"__ge__"in e?e.__ge__(r):e>=r}function Mr(e,r){return"object"==typeof e&&"__imul__"in e?e.__imul__(r):"object"==typeof e&&"__mul__"in e?e.__mul__(r):"object"==typeof r&&"__rmul__"in r?r.__rmul__(e):"string"==typeof e?e.__mul__(r):"string"==typeof r?r.__rmul__(e):e*r}function Tr(e,r){return"object"==typeof e&&"__iadd__"in e?e.__iadd__(r):"object"==typeof e&&"__add__"in e?e.__add__(r):"object"==typeof r&&"__radd__"in r?r.__radd__(e):e+r}function Dr(e,r){return"object"==typeof e&&"__isub__"in e?e.__isub__(r):"object"==typeof e&&"__sub__"in e?e.__sub__(r):"object"==typeof r&&"__rsub__"in r?r.__rsub__(e):e-r}function Rr(e,r){return"object"==typeof e&&"__ior__"in e?e.__ior__(r):"object"==typeof e&&"__or__"in e?e.__or__(r):"object"==typeof r&&"__ror__"in r?r.__ror__(e):e|r}function qr(e,r){return"object"==typeof e&&"__getitem__"in e?e.__getitem__(r):("string"==typeof e||e instanceof Array)&&r<0?e[e.length+r]:e[r]}function zr(e,r,n){"object"==typeof e&&"__setitem__"in e?e.__setitem__(r,n):("string"==typeof e||e instanceof Array)&&r<0?e[e.length+r]=n:e[r]=n}function Fr(e,r,n,t){return"object"==typeof e&&"__getitem__"in e?e.__getitem__([r,n,t]):e.__getslice__(r,n,t)}function Gr(e,r,n,t,a){"object"==typeof e&&"__setitem__"in e?e.__setitem__([r,n,t],a):e.__setslice__(r,n,t,a)}var Br=he("BaseException",[ge],{__module__:le}),Ur=he("Exception",[Br],{__module__:le,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();e.__args__=i,Lr(r.error,null)?e.stack=r.error.stack:Error?e.stack=new ve(Error,null).stack:e.stack="No stack trace available"}))},get __repr__(){return fe(this,(function(e){return Ar(ve(je,null,e.__args__),1)?ve((r="{}{}").format,r,e.__class__.__name__,ve(ze,null,ve(tr,null,e.__args__))):ve(je,null,e.__args__)?function(){var r="{}({})";return ve(r.format,r,e.__class__.__name__,ve(ze,null,qr(e.__args__,0)))}():function(){var r="{}()";return ve(r.format,r,e.__class__.__name__)}();var r}))},get __str__(){return fe(this,(function(e){return Ar(ve(je,null,e.__args__),1)?ve(ir,null,ve(tr,null,e.__args__)):ve(je,null,e.__args__)?ve(ir,null,qr(e.__args__,0)):""}))}}),Wr=he("IterableError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r){var n;ve((n=Ur).__init__,n,e,"Can't iterate over non-iterable",me({error:r}))}))}}),Vr=he("StopIteration",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r){var n;ve((n=Ur).__init__,n,e,"Iterator exhausted",me({error:r}))}))}}),Hr=he("ValueError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),$r=he("KeyError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),Yr=he("AssertionError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;r?ve((t=Ur).__init__,t,e,r,me({error:n})):function(){var r=Ur;ve(r.__init__,r,e,me({error:n}))}()}))}}),Xr=he("NotImplementedError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),Jr=he("IndexError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),Zr=he("AttributeError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),Kr=he("py_TypeError",[Ur],{__module__:le,get __init__(){return fe(this,(function(e,r,n){var t;ve((t=Ur).__init__,t,e,r,me({error:n}))}))}}),Qr=he("Warning",[Ur],{__module__:le}),en=(he("UserWarning",[Qr],{__module__:le}),he("DeprecationWarning",[Qr],{__module__:le}),he("RuntimeWarning",[Qr],{__module__:le}),function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"iterable":e=a[i];break;case"key":r=a[i];break;case"reverse":n=a[i]}}}var o;r?ve((o=e).sort,o,(function(e,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"a":e=a[i];break;case"b":n=a[i]}}}return Ar(ve(r,null,e),ve(r,null,n))?1:yr(1)})):function(){var r=e;ve(r.sort,r)}(),n&&function(){var r=e;ve(r.reverse,r)}()}),rn=function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"iterable":e=a[i];break;case"key":r=a[i];break;case"reverse":n=a[i]}}}if(Cr(Te(e),wr))var o=ve(rr,null,ve((s=e).py_keys,s));else o=ve(rr,null,e);var s;return ve(en,null,o,r,n),o},nn=function(e,r){return function(){for(var n=[],t=r,a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,ve(e,null,i))}return n}()},tn=he("__Terminal__",[ge],{__module__:le,get __init__(){return fe(this,(function(e){e.buffer="";try{e.element=ve((r=document).getElementById,r,"__terminal__")}catch(r){e.element=null}var r;e.element&&(e.element.style.overflowX="auto",e.element.style.boxSizing="border-box",e.element.style.padding="5px",e.element.innerHTML="_")}))},get print(){return fe(this,(function(e){var r,n,t=" ",a="\n";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"sep":t=o[s];break;case"end":a=o[s]}}var _=tr([].slice.apply(arguments).slice(1,i+1))}else _=tr();e.buffer=Fr(ve((n="{}{}{}").format,n,e.buffer,ve((r=t).join,r,function(){for(var e=[],r=_,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,ve(ir,null,t))}return e}()),a),yr(4096),null,1),e.element?(e.element.innerHTML=function(){var r=function(){var r=e.buffer;return ve(r.py_replace,r,"\n","<br>")}();return ve(r.py_replace,r," ","&nbsp")}(),e.element.scrollTop=e.element.scrollHeight):function(){var e=console;ve(e.log,e,function(){var e=t;return ve(e.join,e,function(){for(var e=[],r=_,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,ve(ir,null,t))}return e}())}())}()}))},get input(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"question":r=t[a]}}}var i;ve((i=e).print,i,ve("{}".format,"{}",r),me({end:""}));var o=function(){var r,n=window;return ve(n.prompt,n,ve("\n".join,"\n",Fr(ve((r=e.buffer).py_split,r,"\n"),yr(8),null,1)))}();return function(){var r=e;ve(r.print,r,o)}(),o}))}}),an=ve(tn,null);an.print,an.input;String.prototype.startswith=function(e,r){var n=void 0===r?0:r;if(!(e instanceof Array))return this.substring(n,n+e.length)===e;for(var t=0;t<e.length;t++)if(this.substring(n,n+e[t].length)===e[t])return!0;return!1},String.prototype.count=function(e){for(var r=0,n=0;r<this.length;++r)e==this[r]&&++n;return n},String.prototype.rjust=function(e,r){return this.length>=e?this:r.repeat(e-this.length)+this},String.prototype.rstrip=function(e){if(void 0===e)return this.replace(/\s*$/g,"");for(var r=this;r.length&&-1!==e.indexOf(r.slice(-1));)r=r.slice(0,-1);return r},dr=function(e,r){var n=this[e];if(void 0!==n)return delete this[e],n;if(void 0===r)throw $r(e,new Error);return r},Cr=function(e,r){return"object"==typeof e&&null!=e&&"__eq__"in e?e.__eq__(r):"object"==typeof r&&null!=r&&"__eq__"in r?r.__eq__(e):e==r};var on,sn=me;H=i("3Ie7j");function _n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function ln(e,r){for(var n,t="",a=0,i=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(i===s-1||1===o);else if(i!==s-1&&2===o){if(t.length<2||2!==a||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){var _=t.lastIndexOf("/");if(_!==t.length-1){-1===_?(t="",a=0):a=(t=t.slice(0,_)).length-1-t.lastIndexOf("/"),i=s,o=0;continue}}else if(2===t.length||1===t.length){t="",a=0,i=s,o=0;continue}r&&(t.length>0?t+="/..":t="..",a=2)}else t.length>0?t+="/"+e.slice(i+1,s):t=e.slice(i+1,s),a=s-i-1;i=s,o=0}else 46===n&&-1!==o?++o:o=-1}return t}var cn={resolve:function(){for(var e,r="",n=!1,t=arguments.length-1;t>=-1&&!n;t--){var a;t>=0?a=arguments[t]:(void 0===e&&(e=w.cwd()),a=e),_n(a),0!==a.length&&(r=a+"/"+r,n=47===a.charCodeAt(0))}return r=ln(r,!n),n?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(_n(e),0===e.length)return".";var r=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=ln(e,!r)).length||r||(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return _n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];_n(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":cn.normalize(e)},relative:function(e,r){if(_n(e),_n(r),e===r)return"";if((e=cn.resolve(e))===(r=cn.resolve(r)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var t=e.length,a=t-n,i=1;i<r.length&&47===r.charCodeAt(i);++i);for(var o=r.length-i,s=a<o?a:o,_=-1,l=0;l<=s;++l){if(l===s){if(o>s){if(47===r.charCodeAt(i+l))return r.slice(i+l+1);if(0===l)return r.slice(i+l)}else a>s&&(47===e.charCodeAt(n+l)?_=l:0===l&&(_=0));break}var c=e.charCodeAt(n+l);if(c!==r.charCodeAt(i+l))break;47===c&&(_=l)}var u="";for(l=n+_+1;l<=t;++l)l!==t&&47!==e.charCodeAt(l)||(0===u.length?u+="..":u+="/..");return u.length>0?u+r.slice(i+_):(i+=_,47===r.charCodeAt(i)&&++i,r.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(_n(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,t=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!a){t=i;break}}else a=!1;return-1===t?n?"/":".":n&&1===t?"//":e.slice(0,t)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');_n(e);var n,t=0,a=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,s=-1;for(n=e.length-1;n>=0;--n){var _=e.charCodeAt(n);if(47===_){if(!i){t=n+1;break}}else-1===s&&(i=!1,s=n+1),o>=0&&(_===r.charCodeAt(o)?-1==--o&&(a=n):(o=-1,a=s))}return t===a?a=s:-1===a&&(a=e.length),e.slice(t,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){t=n+1;break}}else-1===a&&(i=!1,a=n+1);return-1===a?"":e.slice(t,a)},extname:function(e){_n(e);for(var r=-1,n=0,t=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===t&&(a=!1,t=o+1),46===s?-1===r?r=o:1!==i&&(i=1):-1!==r&&(i=-1);else if(!a){n=o+1;break}}return-1===r||-1===t||0===i||1===i&&r===t-1&&r===n+1?"":e.slice(r,t)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+(void 0===e?"undefined":(0,H.default)(e)));return function(e,r){var n=r.dir||r.root,t=r.base||(r.name||"")+(r.ext||"");return n?n===r.root?n+t:n+e+t:t}("/",e)},parse:function(e){_n(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,t=e.charCodeAt(0),a=47===t;a?(r.root="/",n=1):n=0;for(var i=-1,o=0,s=-1,_=!0,l=e.length-1,c=0;l>=n;--l)if(47!==(t=e.charCodeAt(l)))-1===s&&(_=!1,s=l+1),46===t?-1===i?i=l:1!==c&&(c=1):-1!==i&&(c=-1);else if(!_){o=l+1;break}return-1===i||-1===s||0===c||1===c&&i===s-1&&i===o+1?-1!==s&&(r.base=r.name=0===o&&a?e.slice(1,s):e.slice(o,s)):(0===o&&a?(r.name=e.slice(1,i),r.base=e.slice(1,s)):(r.name=e.slice(o,i),r.base=e.slice(o,s)),r.ext=e.slice(i,s)),o>0?r.dir=e.slice(0,o-1):a&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};cn.posix=cn,on=cn;var un=function(){"use strict";function e(r,n,t){I(this,e),this.object_type=r,this.object_id=n,this.source_path=t}return T(e,[{key:"get_source_directory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(on).join(e,r(on).dirname(this.source_path))}},{key:"toString",value:function(){return"".concat(this.object_type," ‘").concat(this.object_id,"’ in ‘").concat(this.source_path,"’")}}]),e}(),fn={};e(fn,"LatexWalkerNodesParseError",(function(){return jn})),e(fn,"LatexWalkerEndOfStream",(function(){return Nn})),e(fn,"ParsingState",(function(){return Ba})),e(fn,"LatexWalkerParsingStateEventHandler",(function(){return mt})),e(fn,"LatexNodesCollector",(function(){return $a})),e(fn,"ParsingStateDeltaWalkerEvent",(function(){return dt})),e(fn,"ParsedArgumentsInfo",(function(){return st})),e(fn,"LatexTokenListTokenReader",(function(){return St})),e(fn,"logger",(function(){return kn})),e(fn,"LatexContextDbBase",(function(){return _t})),e(fn,"_unicode_from_str",(function(){return bn})),e(fn,"LatexWalkerParseErrorFormatter",(function(){return Sn})),e(fn,"to_str",(function(){return xn})),e(fn,"LatexTokenReader",(function(){return Na})),e(fn,"SingleParsedArgumentInfo",(function(){return ot})),e(fn,"format_pos",(function(){return Cn})),e(fn,"LatexWalkerError",(function(){return Pn})),e(fn,"LatexToken",(function(){return xt})),e(fn,"ParsedArguments",(function(){return Rn})),e(fn,"ParsingStateDeltaReplaceParsingState",(function(){return ft})),e(fn,"get_updated_parsing_state_from_delta",(function(){return ht})),e(fn,"CallableSpecBase",(function(){return yt})),e(fn,"__all__",(function(){return On})),e(fn,"LatexTokenReaderBase",(function(){return Et})),e(fn,"_basestring",(function(){return yn})),e(fn,"LatexWalkerTokenParseError",(function(){return Ln})),e(fn,"LatexWalkerParseError",(function(){return En})),e(fn,"ParsingStateDeltaLeaveMathMode",(function(){return gt})),e(fn,"LatexWalkerBase",(function(){return kt})),e(fn,"ParsingStateDeltaEnterMathMode",(function(){return pt})),e(fn,"LatexArgumentSpec",(function(){return Dn})),e(fn,"ParsingStateDelta",(function(){return ut}));var dn={};e(dn,"getLogger",(function(){return hn})),e(dn,"basicConfig",(function(){return vn}));R=i("fOdIC");r(m).formatters.r=function(e){return ze(e)};var pn=function(){"use strict";function e(n){var t=this;I(this,e),this.scope=n,this._debug_fn=r(m)(this.scope),this._debug_fn_star=r(m)(this.scope+"*"),this.error=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=n[n.length-1];i&&null===i.__kwargtrans__&&t._process_kwargs(i),t._debug_fn_star.apply(t,["[[logging.ERROR]] !! "+e].concat((0,R.default)(n)))},this.critical=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=n[n.length-1];i&&null===i.__kwargtrans__&&t._process_kwargs(i),t._debug_fn_star.apply(t,["[[logging.CRITICAL]] !! "+e].concat((0,R.default)(n)))},this.warning=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=n[n.length-1];i&&null===i.__kwargtrans__&&t._process_kwargs(i),t._debug_fn_star.apply(t,["[[logging.WARNING]] !! "+e].concat((0,R.default)(n)))},this.info=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=n[n.length-1];i&&null===i.__kwargtrans__&&t._process_kwargs(i),t._debug_fn_star.apply(t,[e].concat((0,R.default)(n)))},this.debug=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=n[n.length-1];i&&null===i.__kwargtrans__&&t._process_kwargs(i),t._debug_fn.apply(t,["logging.debug ~~ "+e].concat((0,R.default)(n)))}}return T(e,[{key:"_process_kwargs",value:function(e){e.exc_info&&console.trace()}}]),e}();var gn={};function hn(e){var r=gn[e];return null==r&&(r=new pn(e),gn[e]=r),r}function vn(){}var mn={};ue(mn,"",dn);var wn="pylatexenc.latexnodes._exctypes",kn=ve(mn.getLogger,mn,wn),yn=ir,bn=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return e},xn=ir,On=["LatexWalkerError","LatexWalkerParseError","LatexWalkerParseErrorFormatter","LatexWalkerNodesParseError","LatexWalkerTokenParseError","LatexWalkerEndOfStream"],Pn=he("LatexWalkerError",[Ur],{__module__:wn}),En=he("LatexWalkerParseError",[Pn],{__module__:wn,get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;var s,_=wr();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var c=arguments[l--];for(var u in c)switch(u){case"self":e=c[u];break;case"msg":r=c[u];break;case"s":n=c[u];break;case"pos":t=c[u];break;case"lineno":a=c[u];break;case"colno":i=c[u];break;case"error_type_info":o=c[u];break;default:_[u]=c[u]}delete _.__kwargtrans__}}if(e.input_source=ve((s=_).py_pop,s,"input_source",null),e.msg=r,e.s=n,e.pos=t,e.lineno=a,e.colno=i,e.error_type_info=o,e.open_contexts=function(){var e=_;return ve(e.py_pop,e,"open_contexts",[])}(),Ne(_)){var f=ve(Hr,null,Or("Unexpected keyword argument(s) to LatexWalkerParseError(): ",ve(ze,null,_)));throw f.__cause__=null,f}ve(ve(we,null,En,"__init__"),null,e,function(){var r=ve(Sn,null,e);return ve(r.to_display_string,r)}())}))},get __str__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return a=ve(Sn,null,e),ve(a.to_display_string,a);var a}))}}),Sn=he("LatexWalkerParseErrorFormatter",[ge],{__module__:wn,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exc":r=t[a]}}}ve(ve(we,null,Sn,"__init__"),null,e),e.exc=r}))},get format_open_blocks(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a=e.exc;if(Ne(!Ne(a.open_contexts)))return null;for(var i,o="",s=ve(Je,null,a.open_contexts),_=0;_<je(s);_++){var l=qr(s,_),c=l,u=c[0],f=c[1],d=c[2],p=c[3];o=ve(Tr,null,o,(i=void 0,ve((i="{empty:4}{loc:<18}  {what}\n").format,i,me({empty:"",loc:ve(Cn,null,f,d,p),what:u}))))}return o}))},get format_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(Cn,null,e.exc.pos,e.exc.lineno,e.exc.colno)}))},get format_full_traceback(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.exc,o="";if(Ne(i.input_source))o=ve(Tr,null,o,ve((a="  in {}").format,a,i.input_source));var s;o=ve(Tr,null,o,ve(" {}".format," {}",ve((s=e).format_pos,s)));if(Ne(i.open_contexts))o=ve(Tr,null,o,"\nOpen LaTeX blocks:\n"),o=ve(Tr,null,o,function(){var r=e;return ve(r.format_open_blocks,r)}());return o}))},get to_display_string(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.exc,o=ve(xn,null,i.msg);return o=ve(Tr,null,o,ve((a=e).format_full_traceback,a))}))}}),Cn=function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pos":e=a[i];break;case"lineno":r=a[i];break;case"colno":n=a[i]}}}return Ne(null!==r)?Ne(null!==n)?ve((o="@ (line {}, col {})").format,o,r,n):function(){var e="@ line {}";return ve(e.format,e,r)}():Ne(null!==e)?function(){var r="@ char pos {}";return ve(r.format,r,e)}():"@ <unknown>";var o},Ln=he("LatexWalkerTokenParseError",[En],{__module__:wn,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"recovery_token_placeholder":r=i[o];break;case"recovery_token_at_pos":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Ln,"__init__"),null,e,me(t)),e.recovery_token_placeholder=r,e.recovery_token_at_pos=n}))}}),jn=he("LatexWalkerNodesParseError",[En],{__module__:wn,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"recovery_nodes":r=s[_];break;case"recovery_parsing_state_delta":n=s[_];break;case"recovery_at_token":t=s[_];break;case"recovery_past_token":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}ve(ve(we,null,jn,"__init__"),null,e,me(i)),e.recovery_nodes=r,e.recovery_parsing_state_delta=n,e.recovery_at_token=t,e.recovery_past_token=a}))}}),Nn=he("LatexWalkerEndOfStream",[Pn],{__module__:wn,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"final_space":r=t[a]}}}ve(ve(we,null,Nn,"__init__"),null,e),e.final_space=r}))}}),An={};function In(e,r){for(var n in r){(i=r[n]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}if(Object.getOwnPropertySymbols)for(var t=Object.getOwnPropertySymbols(r),a=0;a<t.length;a++){var i,o=t[a];(i=r[o]).configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o,i)}return e}function Mn(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}e(An,"_unicode_from_str",(function(){return zn})),e(An,"LatexNode",(function(){return Fn})),e(An,"LatexCharsNode",(function(){return Gn})),e(An,"LatexGroupNode",(function(){return Bn})),e(An,"LatexCommentNode",(function(){return Un})),e(An,"LatexMacroNode",(function(){return Wn})),e(An,"LatexEnvironmentNode",(function(){return Vn})),e(An,"LatexSpecialsNode",(function(){return $n})),e(An,"LatexMathNode",(function(){return Yn})),e(An,"LatexNodeList",(function(){return Jn})),e(An,"_update_posposend_from_nodelist",(function(){return Kn})),e(An,"_get_content_as_chars",(function(){return Zn})),e(An,"LatexNodesVisitor",(function(){return Qn})),e(An,"latex_node_types",(function(){return et})),e(An,"__all__",(function(){return rt})),e(An,"LatexWalkerParseError",(function(){return En})),e(An,"ParsedArguments",(function(){return Rn}));var Tn="pylatexenc.latexnodes._parsedargs",Dn=he("LatexArgumentSpec",[ge],{__module__:Tn,get __init__(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"parser":r=i[o];break;case"argname":n=i[o];break;case"parsing_state_delta":t=i[o]}}}e.parser=r,e.argname=n,e.parsing_state_delta=t}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{cls}(argname={argname!r}, parser={parser!r}, parsing_state_delta={parsing_state_delta!r})").format,a,me({cls:e.__class__.__name__,argname:e.argname,parser:e.parser,parsing_state_delta:e.parsing_state_delta}));var a}))},get to_json_object(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a=ve(wr,null,me({parser:e.parser,argname:e.argname,parsing_state_delta:e.parsing_state_delta}));return a}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(Cr(e.parser,r.parser))&&Ne(Cr(e.argname,r.argname))&&Cr(e.parsing_state_delta,r.parsing_state_delta)}))}}),Rn=he("ParsedArguments",[ge],{__module__:Tn,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"argnlist":r=i[o];break;case"arguments_spec_list":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_=ve((s=t).py_pop,s,"argspec",null);if(ve(ve(we,null,Rn,"__init__"),null,e,me(t)),Ne(Ne(null===n)&&null!==_))n=_;e.argnlist=Ne(r)?r:[],e.arguments_spec_list=Ne(n)?n:[]}))},_fields:tr(["arguments_spec_list","argnlist"]),get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}if(Ne(null!==e.argnlist))for(var i=e.argnlist,o=0;o<je(i);o++){var s=qr(i,o);Ne(null!==s)&&(_=void 0,ve((_=s).accept_node_visitor,_,r))}var _;!function(){var n=r;ve(n.visit_parsed_arguments,n,e)}()}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(Cr(e.arguments_spec_list,r.arguments_spec_list))&&Cr(e.argnlist,r.argnlist)}))},get to_json_object(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({arguments_spec_list:e.arguments_spec_list,argnlist:e.argnlist}))}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}(arguments_spec_list={!r}, argnlist={!r})").format,a,e.__class__.__name__,e.arguments_spec_list,e.argnlist);var a}))}}),qn="pylatexenc.latexnodes.nodes",zn=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return e},Fn=he("LatexNode",[ge],{__module__:qn,get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;var s=wr();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"self":e=l[c];break;case"_fields":r=l[c];break;case"_redundant_fields":n=l[c];break;case"parsing_state":t=l[c];break;case"pos":a=l[c];break;case"pos_end":i=l[c];break;case"latex_walker":o=l[c];break;default:s[c]=l[c]}delete s.__kwargtrans__}}var u,f=ve((u=s).py_pop,u,"len",null);ve(ve(we,null,Fn,"__init__"),null,e,me(s)),e.parsing_state=t,e.latex_walker=o,e.pos=a,e.pos_end=i,Ne(Ne(null===i)&&null!==f)&&(e.pos_end=Or(e.pos,f)),e._fields=ve(tr,null,Or(["pos","pos_end","parsing_state","latex_walker"],ve(nr,null,r))),Ne(null!==n)?e._redundant_fields=ve(tr,null,Or(Or(ve(nr,null,e._fields),["len"]),ve(nr,null,n))):e._redundant_fields=ve(tr,null,Or(ve(nr,null,e._fields),["len"]))}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Fn}))},get isNodeType(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"t":r=t[a]}}}return ve(Re,null,e,r)}))},get _get_len(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(Ne(null===e.pos)||null===e.pos_end)?null:Pr(e.pos_end,e.pos)}))},get latex_verbatim(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(null===e.latex_walker)){var a=ve(Kr,null,"Can't use latex_verbatim() on node because we don't have any latex_walker set");throw a.__cause__=null,a}return Fr(e.latex_walker.s,e.pos,e.pos_end,1)}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(null!==r)&&Ne(ve((i=e).nodeType,i)===function(){var e=r;return ve(e.nodeType,e)}())&&Ne(r.parsing_state===e.parsing_state)&&Ne(r.latex_walker===e.latex_walker)&&Ne(Ne(Ne(null===r.pos)&&null===e.pos)||Cr(r.pos,e.pos))&&Ne(Ne(Ne(null===r.pos_end)&&null===e.pos_end)||Cr(r.pos_end,e.pos_end))&&ve(Qe,null,function(){for(var n=[],t=e._fields,a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,Ne(Ne(null===ve(Ee,null,e,i))&&null===ve(Ee,null,r,i))||Cr(ve(Ee,null,e,i),ve(Ee,null,r,i)))}return He(n)}());var i}))},get __ne__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return NotImplemented}))},__hash__:null,get __unicode__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(zn,null,ve((a=e).__str__,a));var a}))},get __str__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a=e).__repr__,a);var a}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or(Or((a=e,ve(a.nodeType,a)).__name__,"("),ve(", ".join,", ",function(){for(var r,n=[],t=e._fields,a=0;a<je(t);a++){var i=qr(t,a);r=void 0,ve(n.append,n,ve((r="{}={!r}").format,r,i,ve(Ee,null,e,i)))}return n}())),")");var a}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;ve((i=r).visit_unknown_node,i,e)}))},get to_json_object_with_latexwalker(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"latexwalker":r=t[a]}}}for(var i,o,s=wr({nodetype:e.__class__.__name__}),_=e._fields,l=0;l<je(_);l++){var c=qr(_,l);Ne(Cr(c,"spec"))?zr(s,c,ve(ze,null,e.spec)):Ne(Cr(c,"latex_walker"))||zr(s,c,ve(Ee,null,e,c))}return ve((o=s).py_update,o,ve((i=r).pos_to_lineno_colno,i,e.pos,me({as_dict:!0}))),s}))},get format_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(null!==e.latex_walker)?ve((a=e.latex_walker).format_pos,a,e.pos):function(){var r="[@ pos {}]";return ve(r.format,r,ve(ze,null,e.pos))}();var a}))}});Object.defineProperty(Fn,"len",ke.call(Fn,Fn._get_len));var Gn=he("LatexCharsNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,Gn,"__init__"),null,e,me(xe({_fields:tr(["chars"])},n))),e.chars=r}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Gn}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;ve((i=r).visit_chars_node,i,e)}))}}),Bn=he("LatexGroupNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve((o=n).py_pop,o,"delimiters",tr(["{","}"]));ve(ve(we,null,Bn,"__init__"),null,e,me(xe({_fields:tr(["nodelist","delimiters"])},n))),e.nodelist=r,e.delimiters=s}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Bn}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}if(Ne(null!==e.nodelist))for(var i=e.nodelist,o=0;o<je(i);o++){var s=qr(i,o);Ne(null!==s)&&(_=void 0,ve((_=s).accept_node_visitor,_,r))}var _;!function(){var n=r;ve(n.visit_group_node,n,e)}()}))}}),Un=he("LatexCommentNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"comment":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve((o=n).py_pop,o,"comment_post_space","");ve(ve(we,null,Un,"__init__"),null,e,me(xe({_fields:tr(["comment","comment_post_space"])},n))),e.comment=r,e.comment_post_space=s}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Un}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;ve((i=r).visit_comment_node,i,e)}))}}),Wn=he("LatexMacroNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve((o=n).py_pop,o,"nodeargd",ve(Rn,null)),_=function(){var e=n;return ve(e.py_pop,e,"macro_post_space","")}(),l=function(){var e=n;return ve(e.py_pop,e,"spec",null)}();ve(ve(we,null,Wn,"__init__"),null,e,me(xe({_fields:tr(["macroname","spec","nodeargd","macro_post_space"]),_redundant_fields:tr(["nodeoptarg","nodeargs"])},n))),e.macroname=r,e.spec=l,e.nodeargd=s,e.macro_post_space=_}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Wn}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;Ne(null!==e.nodeargd)&&ve((i=e.nodeargd).accept_node_visitor,i,r),function(){var n=r;ve(n.visit_macro_node,n,e)}()}))}}),Vn=he("LatexEnvironmentNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":r=i[o];break;case"nodelist":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_=ve((s=t).py_pop,s,"nodeargd",ve(Rn,null)),l=function(){var e=t;return ve(e.py_pop,e,"spec",null)}();ve(ve(we,null,Vn,"__init__"),null,e,me(xe({_fields:tr(["environmentname","spec","nodelist","nodeargd"]),_redundant_fields:tr(["envname","optargs","args"])},t))),e.environmentname=r,e.spec=l,e.nodelist=n,e.nodeargd=_}))},get _get_envname(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.environmentname}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Vn}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;if(Ne(null!==e.nodeargd)&&ve((i=e.nodeargd).accept_node_visitor,i,r),Ne(null!==e.nodelist))for(var o=e.nodelist,s=0;s<je(o);s++){var _=qr(o,s);Ne(null!==_)&&function(){var e=_;ve(e.accept_node_visitor,e,r)}()}!function(){var n=r;ve(n.visit_environment_node,n,e)}()}))}});Object.defineProperty(Vn,"envname",ke.call(Vn,Vn._get_envname));var Hn,$n=he("LatexSpecialsNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve((o=n).py_pop,o,"spec",null),_=function(){var e=n;return ve(e.py_pop,e,"nodeargd",null)}();ve(ve(we,null,$n,"__init__"),null,e,me(xe({_fields:tr(["specials_chars","spec","nodeargd"])},n))),e.specials_chars=r,e.spec=s,e.nodeargd=_}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return $n}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}var i;Ne(null!==e.nodeargd)&&ve((i=e.nodeargd).accept_node_visitor,i,r),function(){var n=r;ve(n.visit_specials_node,n,e)}()}))}}),Yn=he("LatexMathNode",[Fn],{__module__:qn,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"displaytype":r=i[o];break;case"nodelist":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_=ve((s=t).py_pop,s,"delimiters",tr([null,null]));ve(ve(we,null,Yn,"__init__"),null,e,me(xe({_fields:tr(["displaytype","nodelist","delimiters"])},t))),e.displaytype=r,e.nodelist=n,e.delimiters=_}))},get nodeType(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Yn}))},get accept_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}if(Ne(null!==e.nodelist))for(var i=e.nodelist,o=0;o<je(i);o++){var s=qr(i,o);Ne(null!==s)&&(_=void 0,ve((_=s).accept_node_visitor,_,r))}var _;!function(){var n=r;ve(n.visit_math_node,n,e)}()}))}}),Xn={},Jn=he("LatexNodeList",[ge],(Hn={__module__:qn,get __init__(){return fe(this,(function(e,r){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodelist":r=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}if(Ne(ve(Re,null,r,Jn))){var s=r;return e.nodelist=s.nodelist,e.parsing_state=s.parsing_state,e.latex_walker=s.latex_walker,e.pos=s.pos,void(e.pos_end=s.pos_end)}if(e.nodelist=r,Ne(null===e.nodelist)&&ve((n=logger).warning,n,"You're creating a LatexNodeList with nodelist=None. That's likely to cause crashes!"),e.parsing_state=function(){var e=t;return ve(e.py_pop,e,"parsing_state",null)}(),e.latex_walker=function(){var e=t;return ve(e.py_pop,e,"latex_walker",null)}(),e.pos=function(){var e=t;return ve(e.py_pop,e,"pos",null)}(),e.pos_end=function(){var e=t;return ve(e.py_pop,e,"pos_end",null)}(),Ne(ve(je,null,t))){var _=ve(Hr,null,Or("Unexpected keyword arguments to LatexNodeList: ",ve(ze,null,t)));throw _.__cause__=null,_}var l=ve(Kn,null,e.pos,e.pos_end,e.nodelist);e.pos=l[0],e.pos_end=l[1]}))},_fields:tr(["nodelist","parsing_state","latex_walker","pos","pos_end"]),get _get_len(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(Ne(null===e.pos)||null===e.pos_end)?null:Pr(e.pos_end,e.pos)}))},get __iter__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(null===e.nodelist)?ve(He,null,[]):ve(He,null,e.nodelist)}))}},Mn(Hn,Symbol.iterator,(function(){return this.__iter__()})),Xn.__getitem__=Xn.__getitem__||{},Xn.__getitem__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"index":r=t[a]}}}try{if(Ne(Cr(ve(je,null,r),3))){var i=r,o=i[0],s=i[1],_=i[2];return Fr(e.nodelist,o,s,_)}}catch(e){}if(Ne(Ne(ve(Re,null,r,Ie))&&jr(r,0)))r=Or(ve(je,null,e.nodelist),r);return qr(e.nodelist,r)}))},Xn.__len__=Xn.__len__||{},Xn.__len__.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(je,null,e.nodelist)}))},Xn.latex_verbatim=Xn.latex_verbatim||{},Xn.latex_verbatim.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve("".join,"",function(){for(var r,n=[],t=e.nodelist,a=0;a<je(t);a++){var i=qr(t,a);Ne(null!==i)&&(r=void 0,ve(n.append,n,ve((r=i).latex_verbatim,r)))}return n}())}))},Xn.accept_node_visitor=Xn.accept_node_visitor||{},Xn.accept_node_visitor.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"visitor":r=t[a]}}}if(Ne(null!==e.nodelist))for(var i=e.nodelist,o=0;o<je(i);o++){var s=qr(i,o);Ne(null!==s)&&(_=void 0,ve((_=s).accept_node_visitor,_,r))}var _;!function(){var n=r;ve(n.visit_node_list,n,e)}()}))},Xn.filter=Xn.filter||{},Xn.filter.get=function(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"node_predicate_fn":r=o[s];break;case"skip_none":n=o[s];break;case"skip_comments":t=o[s];break;case"skip_whitespace_char_nodes":a=o[s]}}}if(Ne(null!==e.latex_walker))var _=e.latex_walker.make_nodelist;else _=function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("nl"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}return ve(Jn,null,e,me(r))};var l=function(e){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)if("n"===s)e=o[s]}}return!Ne(Ne(n)&&null===e)&&(!Ne(Ne(t)&&(_=e,ve(_.isNodeType,_,Un)))&&(!Ne(Ne(a)&&Ne(function(){var r=e;return ve(r.isNodeType,r,Gn)}())&&Cr(ve(je,null,function(){var r=e.chars;return ve(r.strip,r)}()),0))&&(!Ne(null!==r)||ve(r,null,e))));var _},c=function(){for(var r=[],n=e.nodelist,t=0;t<je(n);t++){var a=qr(n,t);Ne(ve(l,null,a))&&ve(r.append,r,a)}return r}();return ve(_,null,c,me({parsing_state:e.parsing_state,pos:Ne(ve(je,null,c))?null:e.pos_end,pos_end:Ne(ve(je,null,c))?null:e.pos_end}))}))},Xn.split_at_node=Xn.split_at_node||{},Xn.split_at_node.get=function(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"node_predicate_fn":r=o[s];break;case"skip_none":n=o[s];break;case"keep_separators":t=o[s];break;case"max_split":a=o[s]}}}var _=[[]];if(Ne(Ne(null!==a)&&Cr(a,0)))var l=!0;else l=!1;for(var c,u=e.nodelist,f=0;f<je(u);f++){var d=qr(u,f);if(!Ne(Ne(n)&&null===d))if(Ne(Ne(!Ne(l))&&ve(r,null,d))){if(Ne(t)?(c=void 0,ve((c=_).append,c,[d])):function(){var e=_;ve(e.append,e,[])}(),Ne(Ne(null!==a)&&Ir(ve(je,null,_),a)))l=!0}else!function(){var e=qr(_,Pr(ve(je,null,_),1));ve(e.append,e,d)}()}if(Ne(null!==e.latex_walker))var p=e.latex_walker.make_nodelist;else p=function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("nl"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}return ve(Jn,null,e,me(r))};return function(){for(var r=[],n=_,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,ve(p,null,a,me({parsing_state:e.parsing_state})))}return r}()}))},Xn.split_at_chars=Xn.split_at_chars||{},Xn.split_at_chars.get=function(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"sep_chars":r=o[s];break;case"max_split":n=o[s];break;case"keep_empty":t=o[s];break;case"skip_none":a=o[s]}}}var _=[],l=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"m":e=t[a];break;case"offset":r=t[a]}}}if(Ne(null===e))return tr([yr(1),null]);if(Ne(Ne(ve(Se,null,e,"start"))&&ve(Se,null,e,"end")))return tr([Or(r,(i=e,ve(i.start,i))),Or(r,function(){var r=e;return ve(r.end,r)}())]);var i;if(Ne(Ne(!Ne(e))||!Ne(ve(je,null,e))))return tr([yr(1),null]);var o=e,s=o[0],_=o[1];if(Ne(null===s))s=yr(1);else s=Or(r,s);return tr([s,_=Or(r,_)])},c=function(e,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"chars":e=i[o];break;case"pos":t=i[o]}}}if(Ne(Ne(null!==n)&&Ir(ve(je,null,_),n)))return tr([yr(1),ve(je,null,e)]);if(Ne(ve(Se,null,r,"search"))){var s=ve((c=r).search,c,Fr(e,t,null,1));return ve(l,null,s,t)}var c;if(Ne(ve(qe,null,r))){s=ve(r,null,e,t);return ve(l,null,s)}var u=function(){var n=e;return ve(n.find,n,r,t)}();return Ne(Ne(null===u)||Cr(u,yr(1)))?tr([yr(1),null]):tr([u,Or(u,ve(je,null,r))])},u=e.latex_walker;if(Ne(null!==u))var f=u.make_node,d=u.make_nodelist;else f=function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("cls"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}return ve(e,null,me(r))},d=function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("nl"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}return ve(Jn,null,e,me(r))};for(var p,g=function(r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"chars":r=o[s];break;case"n":n=o[s];break;case"rel_pos":t=o[s];break;case"rel_pos_end":a=o[s]}}}return ve(f,null,Gn,me({parsing_state:e.parsing_state,pos:Or(n.pos,t),pos_end:Or(n.pos,a),chars:r}))},h=function(r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"nodes":r=a[i];break;case"pos_end":n=a[i]}}}var o,s=ve(d,null,r,me({parsing_state:e.parsing_state,pos:Ne(ve(je,null,r))?null:n,pos_end:n}));ve((o=_).append,o,s)},v=[],m=e.nodelist,w=0;w<je(m);w++){var k=qr(m,w);if(Ne(null===k))Ne(!Ne(a))&&(p=void 0,ve((p=v).append,p,k));else if(Ne(function(){var e=k;return ve(e.isNodeType,e,Gn)}()))for(var y=0;Ne(!0);){var b=y,x=ve(c,null,k.chars,b),O=x[0];y=x[1];if(!Ne(Lr(O,yr(1)))){if(Ne(Cr(b,0))){!function(){var e=v;ve(e.append,e,k)}();break}Ne(ve(je,null,P=Fr(k.chars,b,null,1)))&&function(){var e=v;ve(e.append,e,ve(g,null,P,k,b,ve(je,null,k.chars)))}();break}var P=Fr(k.chars,b,O,1);if(Ne(Cr(b,0))){Ne(ve(je,null,P))&&function(){var e=v;ve(e.append,e,ve(g,null,P,k,b,O))}(),Ne(Ne(ve(je,null,v))||t)&&ve(h,null,v,me({pos_end:Or(k.pos,O)}));v=[]}else{var E=[];if(Ne(ve(je,null,P)))E=[ve(g,null,P,k,b,O)];Ne(Ne(ve(je,null,E))||t)&&ve(h,null,E,me({pos_end:Or(k.pos,O)}))}}else!function(){var e=v;ve(e.append,e,k)}()}return Ne(Ne(v)||t)&&ve(h,null,v,me({pos_end:e.pos_end})),_}))},Xn.get_content_as_chars=Xn.get_content_as_chars||{},Xn.get_content_as_chars.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(Zn,null,e.nodelist)}))},Xn.__eq__=Xn.__eq__||{},Xn.__eq__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(ve(Re,null,r,nr))?Cr(e.nodelist,r):Ne(Cr(e.nodelist,r.nodelist))&&Ne(Ne(Ne(null===e.pos)&&null===r.pos)||Cr(e.pos,r.pos))&&(Ne(Ne(null===e.pos_end)&&null===r.pos_end)||Cr(e.pos_end,r.pos_end))}))},Xn.to_json_object=Xn.to_json_object||{},Xn.to_json_object.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.nodelist}))},Xn.__repr__=Xn.__repr__||{},Xn.__repr__.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="LatexNodeList({nodelist!r}, pos={pos!r}, pos_end={pos_end!r})").format,a,me({nodelist:e.nodelist,pos:e.pos,pos_end:e.pos_end}));var a}))},In(Hn,Xn),Hn));Object.defineProperty(Jn,"len",ke.call(Jn,Jn._get_len));var Zn=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("nodelist"===t)e=n[t]}}if(Ne(null===e))return"";for(var a,i=[],o=e,s=0;s<je(o);s++){var _=qr(o,s);if(!Ne(null===_)&&!Ne((a=void 0,a=_,ve(a.isNodeType,a,Un))))if(Ne(function(){var e=_;return ve(e.isNodeType,e,Bn)}()))!function(){var e=i;ve(e.append,e,ve(Zn,null,_.nodelist))}();else{if(!Ne(function(){var e=_;return ve(e.isNodeType,e,Gn)}())){var l=ve(En,null,function(){var e="Expected simple characters only, got ‘{}’";return ve(e.format,e,_.__class__.__name__)}(),me({pos:_.pos}));throw l.__cause__=null,l}!function(){var e=i;ve(e.append,e,_.chars)}()}}return ve("".join,"",i)},Kn=function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pos":e=a[i];break;case"pos_end":r=a[i];break;case"nodelist":n=a[i]}}}if(Ne(null===e)){for(var o=!1,s=n,_=0;_<je(s);_++){if(Ne(null!==(l=qr(s,_)))){e=l.pos;o=!0;break}}if(!o)e=null}if(Ne(null===r)){for(o=!1,s=ve(Je,null,n),_=0;_<je(s);_++){var l;if(Ne(null!==(l=qr(s,_)))){r=l.pos_end;o=!0;break}}if(!o)r=null}return tr([e,r])},Qn=he("LatexNodesVisitor",[ge],{__module__:qn,get visit(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}}))},get visit_chars_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_group_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_comment_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_macro_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_environment_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_specials_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_math_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_node_list(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"nodes":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_parsed_arguments(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsed_args":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get visit_unknown_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=e).visit,i,r)}))},get start(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i;ve((i=r).accept_node_visitor,i,e)}))}}),et=[Fn,Gn,Bn,Un,Wn,Vn,$n,Yn],rt=Or(function(){for(var e=[],r=et,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,t.__name__)}return e}(),["LatexNodeList","LatexNodesVisitor"]),nt={};ue(nt,"",dn);var tt="pylatexenc.latexnodes._parsedargsinfo",at=ir,it=ve(nt.getLogger,nt,tt),ot=he("SingleParsedArgumentInfo",[ge],{__module__:tt,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"argument_node_object":r=t[a]}}}ve(ve(we,null,ot,"__init__"),null,e),e.argument_node_object=r}))},get was_provided(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return null!==e.argument_node_object}))},get get_content_nodelist(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.argument_node_object;if(Ne(null===i))e.nodelist=ve(Jn,null,[null]);else{if(Ne(ve(Re,null,i,Jn)))return i;if(Ne(ve((a=i).isNodeType,a,Bn)))return i.nodelist}return ve(Jn,null,[i])}))},get get_content_as_chars(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=ve((a=e).get_content_nodelist,a);return function(){var e=i;return ve(e.get_content_as_chars,e)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}(argument_node_object={!r})").format,a,e.__class__.__name__,e.argument_node_object);var a}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(Ne(null===e.argument_node_object)&&null===r.argument_node_object)||Cr(e.argument_node_object,r.argument_node_object)}))}}),st=he("ParsedArgumentsInfo",[ge],{__module__:tt,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsed_arguments":r=a[i];break;case"node":n=a[i]}}}var o;ve(ve(we,null,st,"__init__"),null,e),e.parsed_arguments=r,e.node=n,Ne(null!==e.node)?(e.node_pos=e.node.pos,Ne(Ne(null===e.parsed_arguments)&&ve(Se,null,e.node,"nodeargd"))?e.parsed_arguments=e.node.nodeargd:e.parsed_arguments=null):e.node_pos=null,Ne(Ne(null===e.parsed_arguments)&&null===e.node)&&ve((o=it).warning,o,"You created ParsedArgumentsInfo with both node=None and parsed_arguments=None, might be a bug in your code?")}))},get get_argument_info(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"arg":r=t[a]}}}var i;if(Ne(null===e.parsed_arguments))throw(o=ve(En,null,"Cannot get argument information, there were no arguments specified",me({pos:e.node_pos}))).__cause__=null,o;if(Ne(ve(Re,null,p=r,at))){for(var o,s=p,_=!1,l=ve(er,null,e.parsed_arguments.arguments_spec_list),c=0;c<je(l);c++){var u=qr(l,c),f=u[0],d=u[1];if(Ne(Cr(d.argname,s))){var p=f;_=!0;break}}if(!_)throw(o=ve(En,null,ve((i="Cannot find argument named ‘{}’").format,i,s),me({pos:e.node_pos}))).__cause__=null,o}return ve(ot,null,qr(e.parsed_arguments.argnlist,p))}))},get get_all_arguments_info(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"args":r=o[s];break;case"allow_additional_arguments":n=o[s];break;case"skip_nonexistent_arguments":t=o[s];break;case"return_argnames_only":a=o[s]}}}if(Ne(null===e.parsed_arguments)){if(Ne(t))return wr({});var _="Missing arguments";if(Ne(null!==e.node))_=ve((l="Missing arguments to {!r}").format,l,e.node);throw(y=ve(En,null,_,e.node_pos)).__cause__=null,y}for(var l,c=wr({}),u=ve(ar,null),f=ve(ar,null),d=ve(er,null,e.parsed_arguments.arguments_spec_list),p=0;p<je(d);p++){var g=qr(d,p),h=g[0],v=g[1],m=qr(e.parsed_arguments.argnlist,h),w=!1,k=null;if(Ne(null!==r)){if(Ne(Ce(v.argname,r))){w=!0,k=v.argname;!function(){var e=u;ve(e.add,e,v.argname)}()}else if(Ne(Ce(h,r))){w=!0,k=h;!function(){var e=f;ve(e.add,e,h)}()}}else w=!0;if(Ne(!Ne(w))){if(Ne(!Ne(n))){var y=ve(En,null,function(){var e="Got unexpected argument ‘{}’";return ve(e.format,e,v.argname)}(),me({pos:Ne(null!==m)?m.pos:null}));throw y.__cause__=null,y}}else{var b=ve(ot,null,m);Ne(Ne(!Ne(a))&&null!==k)?zr(c,k,b):Ne(v.argname)?zr(c,v.argname,b):zr(c,h,b)}}if(Ne(Ne(!Ne(t))&&null!==r))for(d=r,p=0;p<je(d);p++){var x=qr(d,p);if(Ne(Ne(!Ce(x,u))&&!Ce(x,f))){y=ve(Hr,null,function(){var e="Missing argument {}";return ve(e.format,e,Ne(ve(Re,null,x,at))?Or(Or("‘",x),"’"):ve(ir,null,x))}());throw y.__cause__=null,y}}return c}))}}),_t=he("LatexContextDbBase",[ge],{__module__:"pylatexenc.latexnodes._latexcontextdbbase",get get_macro_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}return null}))},get get_environment_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"environmentname":r=t[a]}}}return null}))},get get_specials_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"specials_chars":r=t[a]}}}return null}))},get test_for_specials(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":r=i[o];break;case"pos":n=i[o];break;case"parsing_state":t=i[o]}}}return null}))}}),lt={};ue(lt,"",dn);var ct="pylatexenc.latexnodes._parsingstatedelta",ut=(ve(lt.getLogger,lt,ct),he("ParsingStateDelta",[ge],{__module__:ct,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"set_attributes":r=i[o];break;case"_fields":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,ut,"__init__"),null,e,me(t)),e.set_attributes=Ne(r)?ve(wr,null,r):null,e._fields=Ne(null!==n)?n:tr(["set_attributes"])}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or(Or(e.__class__.__name__,"("),ve(", ".join,", ",function(){for(var r,n=[],t=e._fields,a=0;a<je(t);a++){var i=qr(t,a);r=void 0,ve(n.append,n,ve((r="{}={!r}").format,r,i,ve(Ee,null,e,i,"<??>")))}return n}())),")")}))},get get_updated_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"latex_walker":n=a[i]}}}return Ne(e.set_attributes)?ve((o=r).sub_context,o,me(e.set_attributes)):r;var o}))}})),ft=he("ParsingStateDeltaReplaceParsingState",[ut],{__module__:ct,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"set_parsing_state":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,ft,"__init__"),null,e,me(xe({_fields:tr(["set_parsing_state"])},n))),e.set_parsing_state=r}))},get get_updated_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"latex_walker":n=a[i]}}}return Ne(null!==e.set_parsing_state)?e.set_parsing_state:r}))}}),dt=he("ParsingStateDeltaWalkerEvent",[ut],{__module__:ct,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"walker_event_name":r=a[i];break;case"walker_event_kwargs":n=a[i]}}}ve(ve(we,null,dt,"__init__"),null,e,me({_fields:tr(["walker_event_name","walker_event_kwargs"])})),e.walker_event_name=r,e.walker_event_kwargs=n}))},get get_updated_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"latex_walker":n=a[i]}}}var o,s=ve((o=n).parsing_state_event_handler,o),_=ve(Ee,null,s,e.walker_event_name),l=ve(_,null,me(e.walker_event_kwargs));return ve(ht,null,r,l,n)}))}}),pt=he("ParsingStateDeltaEnterMathMode",[dt],{__module__:ct,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"math_mode_delimiter":r=a[i];break;case"trigger_token":n=a[i]}}}ve(ve(we,null,pt,"__init__"),null,e,me({walker_event_name:"enter_math_mode",walker_event_kwargs:ve(wr,null,me({math_mode_delimiter:r,trigger_token:n}))}))}))}}),gt=he("ParsingStateDeltaLeaveMathMode",[dt],{__module__:ct,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"trigger_token":r=t[a]}}}ve(ve(we,null,gt,"__init__"),null,e,me({walker_event_name:"leave_math_mode",walker_event_kwargs:ve(wr,null,me({trigger_token:r}))}))}))}}),ht=function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"parsing_state":e=a[i];break;case"parsing_state_delta":r=a[i];break;case"latex_walker":n=a[i]}}}return Ne(null===r)?e:ve((o=r).get_updated_parsing_state,o,e,n);var o},vt="pylatexenc.latexnodes._walkerbase",mt=he("LatexWalkerParsingStateEventHandler",[ge],{__module__:vt,get enter_math_mode(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"math_mode_delimiter":r=a[i];break;case"trigger_token":n=a[i]}}}return ve(ut,null,me({set_attributes:ve(wr,null,me({in_math_mode:!0,math_mode_delimiter:r}))}))}))},get leave_math_mode(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"trigger_token":r=t[a]}}}return ve(ut,null,me({set_attributes:ve(wr,null,me({in_math_mode:!1,math_mode_delimiter:null}))}))}))}}),wt=ve(mt,null),kt=he("LatexWalkerBase",[ge],{__module__:vt,get parsing_state_event_handler(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return wt}))},get parse_content(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"parser":r=s[_];break;case"token_reader":n=s[_];break;case"parsing_state":t=s[_];break;case"open_context":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}var l=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement parse_content()");throw l.__cause__=null,l}))},get make_node(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node_class":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_node()");throw o.__cause__=null,o}))},get make_nodelist(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodelist()");throw o.__cause__=null,o}))},get make_nodes_collector(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodes_collector()");throw s.__cause__=null,s}))},get make_latex_group_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"delimiters":r=t[a]}}}var i=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_group_parser()");throw i.__cause__=null,i}))},get make_latex_math_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"math_mode_delimiters":r=t[a]}}}var i=ve(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_math_parser()");throw i.__cause__=null,i}))},get check_tolerant_parsing_ignore_error(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exc":r=t[a]}}}return r}))},get format_node_pos(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Or("character position ",ve(ze,null,r.pos))}))}}),yt=he("CallableSpecBase",[ge],{__module__:"pylatexenc.latexnodes._callablespecbase",get get_node_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}var i=ve(RuntimeError,null,"Subclasses must reimplement get_node_parser()");throw i.__cause__=null,i}))}}),bt=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return e},xt=he("LatexToken",[ge],{__module__:"pylatexenc.latexnodes._token",get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i="";if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o="";var s=wr();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"self":e=l[c];break;case"tok":r=l[c];break;case"arg":n=l[c];break;case"pos":t=l[c];break;case"pos_end":a=l[c];break;case"pre_space":i=l[c];break;case"post_space":o=l[c];break;default:s[c]=l[c]}delete s.__kwargtrans__}}var u,f=ve((u=s).py_pop,u,"len",null);if(e.tok=r,e.arg=n,e.pos=t,e.pos_end=a,e.pre_space=i,e.post_space=o,Ne(Ne(null===a)&&Ne(null!==f)&&null!==t)&&(e.pos_end=Or(t,f)),Ne(s)){var d=ve(Hr,null,Or("Unexpected arguments to LatexToken(): ",ve(ze,null,s)));throw d.__cause__=null,d}e._fields=["tok","arg","pos","pos_end","pre_space"],Ne(Ce(e.tok,tr(["macro","comment"])))&&function(){var r=e._fields;ve(r.append,r,"post_space")}(),ve(ve(we,null,xt,"__init__"),null,e)}))},get _get_len(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(Ne(null===e.pos)||null===e.pos_end)?null:Pr(e.pos_end,e.pos)}))},get __unicode__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(bt,null,ve((a=e).__str__,a));var a}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or("LatexToken(",ve(", ".join,", ",function(){for(var r,n=[],t=e._fields,a=0;a<je(t);a++){var i=qr(t,a);r=void 0,ve(n.append,n,ve((r="{}={!r}").format,r,i,ve(Ee,null,e,i)))}return n}())),")")}))},get __str__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a=e).__repr__,a);var a}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return ve(Qe,null,function(){for(var n=[],t=e._fields,a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,Ne(Ne(null===ve(Ee,null,e,i))&&null===ve(Ee,null,r,i))||Cr(ve(Ee,null,e,i),ve(Ee,null,r,i)))}return He(n)}())}))},__hash__:null});Object.defineProperty(xt,"len",ke.call(xt,xt._get_len));var Ot={};ue(Ot,"",dn);var Pt="pylatexenc.latexnodes._tokenreaderbase",Et=(ve(Ot.getLogger,Ot,Pt),he("LatexTokenReaderBase",[ge],{__module__:Pt,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}ve(ve(we,null,Et,"__init__"),null,e,me(r))}))},get make_token(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}return ve(xt,null,me(r))}))},get move_to_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"rewind_pre_space":n=a[i]}}}var o=ve(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement rewind_to_token()");throw o.__cause__=null,o}))},get move_past_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"fastforward_post_space":n=a[i]}}}var o=ve(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement move_past_token()");throw o.__cause__=null,o}))},get peek_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i=ve(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement peek_token()");throw i.__cause__=null,i}))},get peek_token_or_none(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}try{return ve((i=e).peek_token,i,me({parsing_state:r}))}catch(e){if(Re(e,Nn))return null;throw e}var i}))},get next_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i,o=ve((i=e).peek_token,i,me({parsing_state:r}));return function(){var r=e;ve(r.move_past_token,r,o)}(),o}))},get cur_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a=ve(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement cur_pos()");throw a.__cause__=null,a}))},get peek_space_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i=ve(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get skip_space_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i=ve(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get peek_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"num_chars":r=a[i];break;case"parsing_state":n=a[i]}}}var o=ve(RuntimeError,null,"This token reader does not support character-level access");throw o.__cause__=null,o}))},get next_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"num_chars":r=a[i];break;case"parsing_state":n=a[i]}}}var o=ve(RuntimeError,null,"This token reader does not support character-level access");throw o.__cause__=null,o}))},get move_to_pos_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pos":r=t[a]}}}var i=ve(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))}})),St=he("LatexTokenListTokenReader",[Et],{__module__:Pt,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token_list":r=t[a]}}}ve(ve(we,null,St,"__init__"),null,e),e.token_list=r,e._idx=0}))},get peek_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}if(Ne(Ir(e._idx,ve(je,null,e.token_list)))){var i=ve(Nn,null);throw i.__cause__=null,i}return qr(e.token_list,e._idx)}))},get next_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i,o=ve((i=e).peek_token,i,r);return e._idx=ve(Tr,null,e._idx,1),o}))},get _find_tok_idx(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"methname":n=a[i]}}}try{var o=ve($e,null,function(){for(var n=[],t=ve(er,null,e.token_list),a=0;a<je(t);a++){var i=qr(t,a),o=i[0];Ne(i[1]===r)&&ve(n.append,n,o)}return He(n)}())}catch(e){if(Re(e,Vr)){var s=ve(Jr,null,ve((_="{}({!r}): no such token in list").format,_,n,r));throw s.__cause__=null,s}throw e}var _;return o}))},get move_to_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"rewind_pre_space":n=a[i]}}}var o;e._idx=ve((o=e)._find_tok_idx,o,r,"move_to_token")}))},get move_past_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"fastforward_post_space":n=a[i]}}}var o;e._idx=Or(ve((o=e)._find_tok_idx,o,r,"move_past_token"),1)}))},get cur_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return(a=e,ve(a.peek_token,a,null)).pos;var a}))},get final_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return qr(e.token_list,Pr(ve(je,null,e.token_list),1)).pos_end}))}}),Ct={};e(Ct,"T",(function(){return Bt})),e(Ct,"TEMPLATE",(function(){return Ut})),e(Ct,"I",(function(){return Wt})),e(Ct,"IGNORECASE",(function(){return Vt})),e(Ct,"L",(function(){return Ht})),e(Ct,"LOCALE",(function(){return $t})),e(Ct,"M",(function(){return Yt})),e(Ct,"MULTILINE",(function(){return Xt})),e(Ct,"S",(function(){return Jt})),e(Ct,"DOTALL",(function(){return Zt})),e(Ct,"U",(function(){return Kt})),e(Ct,"UNICODE",(function(){return Qt})),e(Ct,"X",(function(){return ea})),e(Ct,"VERBOSE",(function(){return ra})),e(Ct,"DEBUG",(function(){return na})),e(Ct,"A",(function(){return ta})),e(Ct,"ASCII",(function(){return aa})),e(Ct,"Y",(function(){return ia})),e(Ct,"STICKY",(function(){return oa})),e(Ct,"G",(function(){return sa})),e(Ct,"GLOBAL",(function(){return _a})),e(Ct,"J",(function(){return la})),e(Ct,"JSSTRICT",(function(){return ca})),e(Ct,"error",(function(){return ua})),e(Ct,"ReIndexError",(function(){return fa})),e(Ct,"Match",(function(){return da})),e(Ct,"compile",(function(){return ha})),e(Ct,"escape",(function(){return Pa})),e(Ct,"Regex",(function(){return pa})),e(Ct,"PyRegExp",(function(){return ga})),e(Ct,"search",(function(){return va})),e(Ct,"match",(function(){return ma})),e(Ct,"fullmatch",(function(){return wa})),e(Ct,"py_split",(function(){return ka})),e(Ct,"findall",(function(){return ya})),e(Ct,"finditer",(function(){return ba})),e(Ct,"sub",(function(){return xa})),e(Ct,"subn",(function(){return Oa})),e(Ct,"purge",(function(){return Ea})),e(Ct,"translate",(function(){return Ft}));var Lt={};ue(Lt,"",Ct);var jt="re.translate",Nt="aiLmsux",At=he("Group",[ge],{__module__:jt,get __init__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"start":r=i[o];break;case"end":n=i[o];break;case"klass":t=i[o]}}}e.start=r,e.end=n,e.klass=t}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(ir,null,tr([e.start,e.end,e.klass]))}))}}),It=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("tokens"===t)e=n[t]}}for(var a,i=[],o=0,s=e,_=0;_<je(s);_++){var l=qr(s,_);if(Ne((a=void 0,ve((a=l.py_name).startswith,a,"("))))!function(){var e=i;ve(e.append,e,ve(At,null,o,null,l.py_name))}();else if(Ne(Cr(l.py_name,")")))for(var c=ve(Je,null,i),u=0;u<je(c);u++){var f=qr(c,u);Ne(null===f.end)&&(f.end=o)}o=ve(Tr,null,o,1)}return i},Mt=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("tokens"===t)e=n[t]}}ve(It,null,e);for(var a=0,i=e,o=0;o<je(i);o++){var s=qr(i,o);if(Ne(Cr(s.py_name,"(")))a=ve(Tr,null,a,1)}return a},Tt=function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"groupInfo":e=a[i];break;case"namedGroups":r=a[i];break;case"groupRef":n=a[i]}}}try{var o=ve(Ie,null,n)}catch(e){o=qr(r,n)}for(var s=0,_=e,l=0;l<je(_);l++){var c=qr(_,l);if(Ne(Cr(c.klass,"(")))if(Ne(Cr(s=ve(Tr,null,s,1),o)))return c}},Dt=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"tokens":e=t[a];break;case"namedGroups":r=t[a]}}}for(var i,o=[],s=ve(It,null,e),_=s,l=0;l<je(_);l++){var c=qr(_,l);if(Ne(Cr(c.klass,"(?<"))){var u=Fr(e,0,null,1),f=Fr(e,0,null,1),d=c.start,p=c.end,g=qr(e,Or(d,1)).py_name,h=ve(Tt,null,s,r,g),v=qr(e,Or(h.end,1));if(Ne(Ne(Ce(v.py_name,["?","*"]))||(i=void 0,ve((i=v.py_name).startswith,i,"{0,")))){Ne(Cr(v.py_name,"?"))?zr(u,Or(h.end,1),null):Ne(Cr(v.py_name,"*"))?zr(u,Or(h.end,1),ve(Rt,null,"+")):Ne(function(){var e=v.py_name;return ve(e.startswith,e,"{0,")}())&&Gr(qr(u,Or(h.end,1)).py_name,0,3,null,"{1,"),zr(f,Or(h.end,1),null);for(var m=!1,w=d;w<p;w++)if(Ne(Cr(qr(e,w).py_name,"|"))){m=!0;!function(){var e=f;ve(e.py_pop,e,p)}(),Gr(u,w,Or(p,1),null,[]),Gr(f,d,Or(w,1),null,[]);break}Ne(!Ne(m))&&(Gr(f,d,Or(p,1),null,[]),function(){var e=u;ve(e.py_pop,e,p)}()),Gr(u,d,Or(d,3),null,[]),Gr(f,h.start,Or(h.end,1),null,[ve(Rt,null,"("),ve(Rt,null,")")]),function(){var e=u;ve(e.remove,e,null)}(),function(){var e=f;ve(e.remove,e,null)}(),function(){var e=o;ve(e.append,e,u)}(),function(){var e=o;ve(e.append,e,f)}()}else{for(w=d;w<p;w++)if(Ne(Cr(qr(u,w).py_name,"|"))){u=Fr(e,0,w,1);!function(){var r=u;ve(r.extend,r,Fr(e,Or(p,1),null,1))}();break}Gr(u,d,Or(d,3),null,[]),function(){var e=o;ve(e.append,e,u)}()}break}}if(Ne(!Ne(o)))return[e];var k=[];for(_=o,l=0;l<je(_);l++){var y=qr(_,l);!function(){var e=k;ve(e.extend,e,ve(Dt,null,y,r))}()}return k},Rt=he("Token",[ge],{__module__:jt,get __init__(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"py_name":r=i[o];break;case"paras":n=i[o];break;case"pure":t=i[o]}}}if(Ne(null===n))n=[];e.py_name=r,e.paras=n,e.pure=t,e.isModeGroup=!1}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.py_name}))},get resolve(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a="",i=e.paras,o=0;o<je(i);o++){var s=qr(i,o);a=ve(Tr,null,a,ve(ir,null,s))}return Or(e.py_name,a)}))}}),qt=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"stack":e=t[a];break;case"queue":r=t[a]}}}var i,o=!Ne(ve(Me,null,r));if(Ne(!Ne(o))){ve((i=e).append,i,ve(Rt,null,qr(r,0),[],!0));r=Fr(r,1,null,1)}return tr([e,r,o])},zt=function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"stack":e=i[o];break;case"queue":r=i[o];break;case"namedGroups":n=i[o];break;case"flags":t=i[o]}}}var s=!1,_=Pr(ve(je,null,e),1);if(Ne(jr(ve(je,null,e),2))){e=(v=ve(qt,null,e,r))[0],r=v[1],s=v[2];return tr([e,r,t,s])}var l,c,u=Ne(Ar(ve(je,null,e),0))?qr(e,_):ve(Rt,null,""),f=Ne(Ar(ve(je,null,e),1))?qr(e,Pr(_,1)):ve(Rt,null,"");if(Ne(false)){for(var d=e,p=0;p<je(d);p++){var g=qr(d,p);l=void 0,c=void 0,ve((c=console).log,c,ve((l=g).resolve,l),"\t",me({end:""}))}!function(){var e=console;ve(e.log,e,"")}()}if(Ne(Cr(f.py_name,"\\")))Ne(Cr(u.py_name,"A"))?Gr(e,yr(2),null,null,[ve(Rt,null,"^")]):Ne(Cr(u.py_name,"a"))?Gr(e,yr(2),null,null,[ve(Rt,null,"\\07")]):Ne(Cr(u.py_name,"Z"))?Gr(e,yr(2),null,null,[ve(Rt,null,"$")]):Gr(e,yr(2),null,null,[ve(Rt,null,Or("\\",u.py_name))]);else if(Ne(Ne(Cr(u.py_name,"$"))&&u.pure))!function(){var r=e;ve(r.py_pop,r)}(),function(){var r=e;ve(r.extend,r,[ve(Rt,null,"(?="),ve(Rt,null,"\\n"),ve(Rt,null,"?"),ve(Rt,null,"$"),ve(Rt,null,")")])}();else if(Ne(Cr(f.py_name,"{"))){Ne(Ne(Cr(u.py_name,","))&&Cr(ve(je,null,f.paras),0))?(function(){var e=f.paras;ve(e.append,e,"0")}(),function(){var e=f.paras;ve(e.append,e,",")}()):Ne(Cr(u.py_name,"}"))?(!function(){var e=f.paras;ve(e.append,e,"}")}(),f.py_name=function(){var e=f;return ve(e.resolve,e)}(),f.paras=[]):function(){var e=f.paras;ve(e.append,e,u.py_name)}();e=Fr(e,0,yr(1),1)}else if(Ne(Ne(Cr(f.py_name,"["))&&Cr(u.py_name,"^")))Gr(e,yr(2),null,null,[ve(Rt,null,"[^")]);else if(Ne(Ne(Cr(f.py_name,"("))&&Cr(u.py_name,"?")))Gr(e,yr(2),null,null,[ve(Rt,null,"(?")]);else if(Ne(Ne(Ce(f.py_name,["*","+","?"]))&&Cr(u.py_name,"?")))Gr(e,yr(2),null,null,[ve(Rt,null,Or(f.py_name,"?"))]);else if(Ne(Ne(f.isModeGroup)&&Cr(u.py_name,")")))e=Fr(e,0,yr(2),1);else if(Ne(Cr(f.py_name,"(?")))if(Ne(Ce(u.py_name,Nt))){if(Ne(Cr(u.py_name,"i")))t=ve(Rr,null,t,Lt.IGNORECASE);else if(Ne(Cr(u.py_name,"L")))t=ve(Rr,null,t,Lt.LOCALE);else if(Ne(Cr(u.py_name,"m")))t=ve(Rr,null,t,Lt.MULTILINE);else if(Ne(Cr(u.py_name,"s")))t=ve(Rr,null,t,Lt.DOTALL);else if(Ne(Cr(u.py_name,"u")))t=ve(Rr,null,t,Lt.UNICODE);else if(Ne(Cr(u.py_name,"x")))t=ve(Rr,null,t,Lt.VERBOSE);else if(Ne(Cr(u.py_name,"a")))t=ve(Rr,null,t,Lt.ASCII);!function(){var r=e;ve(r.py_pop,r)}(),f.isModeGroup=!0}else{Ne(Cr(u.py_name,"("))&&(u.py_name="<");var h=ve(Rt,null,Or("(?",u.py_name));Gr(e,yr(2),null,null,[h])}else if(Ne(Cr(f.py_name,"(?<")))Ne(Cr(u.py_name,")"))?(Gr(e,yr(1),null,null,[ve(Rt,null,ve("".join,"",f.paras)),ve(Rt,null,">")]),f.paras=[]):(function(){var e=f.paras;ve(e.append,e,u.py_name)}(),function(){var r=e;ve(r.py_pop,r)}());else if(Ne(Cr(f.py_name,"(?P")))Gr(e,yr(2),null,null,[ve(Rt,null,Or("(?P",u.py_name))]);else if(Ne(Cr(f.py_name,"(?P<")))Ne(Cr(u.py_name,">"))?(zr(n,ve("".join,"",f.paras),Or(ve(Mt,null,e),1)),Gr(e,yr(2),null,null,[ve(Rt,null,"(")])):(function(){var e=f.paras;ve(e.append,e,u.py_name)}(),function(){var r=e;ve(r.py_pop,r)}());else if(Ne(Cr(f.py_name,"(?P=")))Ne(Cr(u.py_name,")"))?Gr(e,yr(2),null,null,[ve(Rt,null,Or("\\",ve(ir,null,qr(n,qr(f.paras,0)))))]):Ne(!Ne(f.paras))?(function(){var e=f.paras;ve(e.append,e,u.py_name)}(),function(){var r=e;ve(r.py_pop,r)}()):(zr(f.paras,0,ve(Tr,null,qr(f.paras,0),u.py_name)),function(){var r=e;ve(r.py_pop,r)}());else if(Ne(Cr(f.py_name,"(?#")))if(Ne(Cr(u.py_name,")")))e=Fr(e,0,yr(2),1);else e=Fr(e,0,yr(1),1);else{var v;e=(v=ve(qt,null,e,r))[0],r=v[1],s=v[2]}return tr([e,r,t,s])},Ft=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("rgx"===t)e=n[t]}}for(var a=[],i=ve(nr,null,e),o=0,s=ve(wr,null),_=0;Ne(!0);){if(Ne(Ar(_=ve(Tr,null,_,1),1e3))){var l=ve(Ur,null,"Too many iterations in converting regex from Python to JavaScript");throw l.__cause__=null,l}var c=ve(zt,null,a,i,s,o),u=(a=c[0],i=c[1],o=c[2],c[3]);if(Ne(u))break}for(var f,d=ve(Dt,null,a,s),p=ve(je,null,d),g=[],h=0;h<ve(je,null,d);h++)f=void 0,ve((f=g).extend,f,qr(d,h)),Ne(jr(h,Pr(ve(je,null,d),1)))&&function(){var e=g;ve(e.append,e,ve(Rt,null,"|"))}();ve(It,null,a=g);for(var v=[],m=a,w=0;w<je(m);w++){var k=qr(m,w),y=function(){var e=k;return ve(e.resolve,e)}();if(Ne(Ne(Sr(o,Lt.DOTALL))&&Cr(y,".")))y="[\\s\\S]";!function(){var e=v;ve(e.append,e,y)}()}return tr([v,o,s,ve(Mt,null,a),p])},Gt="re",Bt=Er(1,0),Ut=Bt,Wt=Er(1,1),Vt=Wt,Ht=Er(1,2),$t=Ht,Yt=Er(1,3),Xt=Yt,Jt=Er(1,4),Zt=Jt,Kt=Er(1,5),Qt=Kt,ea=Er(1,6),ra=ea,na=Er(1,7),ta=Er(1,8),aa=ta,ia=Er(1,16),oa=ia,sa=Er(1,17),_a=sa,la=Er(1,19),ca=la,ua=he("error",[Ur],{__module__:Gt,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"msg":r=s[_];break;case"error":n=s[_];break;case"pattern":t=s[_];break;case"flags":a=s[_];break;case"pos":i=s[_]}}}var l;ve((l=Ur).__init__,l,e,r,me({error:n})),e.pattern=t,e.flags=a,e.pos=i}))}}),fa=he("ReIndexError",[Jr],{__module__:Gt,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;ve((a=Jr).__init__,a,e,"no such group")}))}}),da=he("Match",[ge],{__module__:Gt,get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"mObj":r=_[l];break;case"string":n=_[l];break;case"pos":t=_[l];break;case"endpos":a=_[l];break;case"rObj":i=_[l];break;case"namedGroups":o=_[l]}}}for(var c,u=ve(er,null,r),f=0;f<je(u);f++){var d=qr(u,f),p=d[0];d[1];zr(r,p,Ne(Cr(qr(r,p),void 0))?null:qr(r,p))}e._obj=r,e._pos=t,e._endpos=a,e._re=i,e._string=n,e._namedGroups=o,e._lastindex=ve((c=e)._lastMatchGroup,c),Ne(null!==e._namedGroups)?e._lastgroup=qr(e._namedGroups,e._lastindex):e._lastgroup=null}))},get _getPos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._pos}))},get _setPos(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getEndPos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._endpos}))},get _setEndPos(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getRe(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._re}))},get _setRe(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getString(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._string}))},get _setString(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getLastGroup(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._lastgroup}))},get _setLastGroup(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getLastIndex(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._lastindex}))},get _setLastIndex(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _lastMatchGroup(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(Ar(ve(je,null,e._obj),1))){for(var a=Pr(ve(je,null,e._obj),1);a>0;a--)if(Ne(null!==qr(e._obj,a)))return a;return null}return null}))},get expand(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"template":r=t[a]}}}var i=ve(Xr,null);throw i.__cause__=null,i}))},get group(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}var a=tr([].slice.apply(arguments).slice(1,r+1))}else a=tr();var i,o=[];if(Ne(Ar(ve(je,null,a),0)))for(var s=a,_=0;_<je(s);_++){var l=qr(s,_);if(Ne(Te(l)===ir)){if(!Ne(null!==e._namedGroups))throw(c=ve(Xr,null,"No NamedGroups Available")).__cause__=null,c;if(Ne(!Ce(l,(i=void 0,i=e._namedGroups,ve(i.py_keys,i)))))throw(c=ve(fa,null)).__cause__=null,c;!function(){var r=o;ve(r.append,r,qr(e._obj,qr(e._namedGroups,l)))}()}else{var c;if(Ne(Ir(l,ve(je,null,e._obj))))throw(c=ve(fa,null)).__cause__=null,c;!function(){var r=o;ve(r.append,r,qr(e._obj,l))}()}}else!function(){var r=o;ve(r.append,r,qr(e._obj,0))}();return Ne(Cr(ve(je,null,o),1))?qr(o,0):ve(tr,null,o)}))},get groups(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"py_default":r=t[a]}}}if(Ne(Ar(ve(je,null,e._obj),1))){var i=Fr(e._obj,1,null,1);return ve(tr,null,function(){for(var e=[],n=i,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,Ne(null!==a)?a:r)}return e}())}return ve(tr,null)}))},get groupdict(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"py_default":r=t[a]}}}if(Ne(null!==e._namedGroups)){for(var i=wr({}),o=ve((f=e._namedGroups).py_items,f),s=0;s<je(o);s++){var _=qr(o,s),l=_[0],c=_[1],u=qr(e._obj,c);zr(i,l,Ne(null!==u)?u:r)}return i}var f,d=ve(Xr,null,"No NamedGroups Available");throw d.__cause__=null,d}))},get start(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"group":r=t[a]}}}var i,o=0;if(Ne(Te(r)===ir)){if(!Ne(null!==e._namedGroups))throw(s=ve(Xr,null,"No NamedGroups Available")).__cause__=null,s;if(Ne(!Ce(r,(i=e._namedGroups,ve(i.py_keys,i)))))throw(s=ve(fa,null)).__cause__=null,s;o=qr(e._namedGroups,r)}else o=r;if(Ne(Ir(o,ve(je,null,e._obj))))throw(s=ve(fa,null)).__cause__=null,s;if(Ne(Cr(o,0)))return e._obj.index;if(Ne(null!==qr(e._obj,o))){var s,_=ve(ha,null,ve(Pa,null,qr(e._obj,o)),e._re.flags),l=function(){var r=_;return ve(r.search,r,qr(e._obj,0))}();if(Ne(l))return Or(e._obj.index,function(){var e=l;return ve(e.start,e)}());throw(s=ve(Ur,null,"Failed to find capture group")).__cause__=null,s}return yr(1)}))},get end(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"group":r=t[a]}}}var i,o=0;if(Ne(Te(r)===ir)){if(!Ne(null!==e._namedGroups))throw(s=ve(Xr,null,"No NamedGroups Available")).__cause__=null,s;if(Ne(!Ce(r,(i=e._namedGroups,ve(i.py_keys,i)))))throw(s=ve(fa,null)).__cause__=null,s;o=qr(e._namedGroups,r)}else o=r;if(Ne(Ir(o,ve(je,null,e._obj))))throw(s=ve(fa,null)).__cause__=null,s;if(Ne(Cr(o,0)))return Or(e._obj.index,ve(je,null,qr(e._obj,0)));if(Ne(null!==qr(e._obj,o))){var s,_=ve(ha,null,ve(Pa,null,qr(e._obj,o)),e._re.flags),l=function(){var r=_;return ve(r.search,r,qr(e._obj,0))}();if(Ne(l))return Or(e._obj.index,function(){var e=l;return ve(e.end,e)}());throw(s=ve(Ur,null,"Failed to find capture group")).__cause__=null,s}return yr(1)}))},get span(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"group":r=t[a]}}}return tr([(i=e,ve(i.start,i,r)),function(){var n=e;return ve(n.end,n,r)}()]);var i}))}});Object.defineProperty(da,"pos",ke.call(da,da._getPos,da._setPos)),Object.defineProperty(da,"endpos",ke.call(da,da._getEndPos,da._setEndPos)),Object.defineProperty(da,"re",ke.call(da,da._getRe,da._setRe)),Object.defineProperty(da,"string",ke.call(da,da._getString,da._setString)),Object.defineProperty(da,"lastgroup",ke.call(da,da._getLastGroup,da._setLastGroup)),Object.defineProperty(da,"lastindex",ke.call(da,da._getLastIndex,da._setLastIndex));var pa=he("Regex",[ge],{__module__:Gt,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"pattern":r=a[i];break;case"flags":n=a[i]}}}if(Ne(!Ne(Ar(Sr(n,aa),0))))n=ve(Rr,null,n,Qt);e._flags=n;var o,s=ve((o=e)._compileWrapper,o,r,n);e._jsFlags=s[0],e._obj=s[1],e._jspattern=r,e._pypattern=r;s=function(){var t=e;return ve(t._compileWrapper,t,Or(r,"|"),n)}(),s[0];var _=s[1];e._groups=Pr(function(){var e=_;return ve(e.exec,e,"")}().length,1),e._groupindex=null}))},get _getPattern(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=ve((a=e._pypattern).py_replace,a,"\\","\\\\");return i}))},get _setPattern(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getFlags(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._flags}))},get _setFlags(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getGroups(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._groups}))},get _setGroups(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _getGroupIndex(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(null===e._groupindex)?wr({}):e._groupindex}))},get _setGroupIndex(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"val":r=t[a]}}}var i=ve(Zr,null,"readonly attribute");throw i.__cause__=null,i}))},get _compileWrapper(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"pattern":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve((o=e)._convertFlags,o,n),_=null,l=null;try{_=new RegExp(r,s)}catch(e){l=e}if(Ne(null!==l)){var c=ve(ua,null,l.message,l,r,n);throw c.__cause__=null,c}return tr([s,_])}))},get _convertFlags(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"flags":r=t[a]}}}var i=[tr([na,""]),tr([Vt,"i"]),tr([Xt,"m"]),tr([oa,"y"]),tr([_a,"g"]),tr([Qt,"u"])],o=ve("".join,"",function(){for(var e=[],n=i,t=0;t<je(n);t++){var a=qr(n,t);Ne(Ar(Sr(qr(a,0),r),0))&&ve(e.append,e,qr(a,1))}return e}());return o}))},get _getTargetStr(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}var s=ve(je,null,r);if(Ne(null!==t)&&Ne(jr(t,s)))s=t;if(Ne(jr(s,0)))s=0;var _=Fr(r,n,s,1);return _}))},get _patternHasCaptures(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ar(e._groups,0)}))},get search(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}if(Ne(null===t))t=ve(je,null,r);var s,_=e._obj,l=ve((s=_).exec,s,r);return Ne(l)?Ne(Ne(jr(l.index,n))||Ar(l.index,t))?null:ve(da,null,l,r,n,t,e,e._groupindex):null}))},get match(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}var s=r;if(Ne(null!==t))s=Fr(s,0,t,1);else t=ve(je,null,r);var _,l=e._obj,c=ve((_=l).exec,_,s);return Ne(c)&&Ne(Cr(c.index,n))?ve(da,null,c,r,n,t,e,e._groupindex):null}))},get fullmatch(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}var s=r,_=ve(je,null,r);if(Ne(null!==t))s=Fr(s,0,t,1),_=t;var l,c=e._obj,u=ve((l=c).exec,l,s);if(Ne(u)){var f=Or(u.index,ve(je,null,qr(u,0)));return Ne(Ne(Cr(u.index,n))&&Cr(f,_))?ve(da,null,u,r,n,_,e,e._groupindex):null}return null}))},get py_split(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":r=a[i];break;case"maxsplit":n=a[i]}}}if(Ne(jr(n,0)))return[r];var o,s=e._obj;if(Ne(Cr(n,0)))return ve((o=r).py_split,o,s);for(var _=ve(Rr,null,_=e._flags,_a),l=function(){var r=e;return ve(r._compileWrapper,r,e._jspattern,_)}(),c=(l[0],s=l[1],[]),u=null,f=0,d=0;d<n;d++){var p=function(){var e=s;return ve(e.exec,e,r)}();if(!Ne(p))break;f=ve(Tr,null,f,1);if(Ne(null!==u)){var g=Or(u.index,ve(je,null,qr(u,0))),h=Fr(r,g,p.index,1);!function(){var e=c;ve(e.append,e,h)}(),Ne(Ar(ve(je,null,p),1))&&function(){var e=c;ve(e.extend,e,Fr(p,1,null,1))}()}else{h=Fr(r,0,p.index,1);!function(){var e=c;ve(e.append,e,h)}(),Ne(Ar(ve(je,null,p),1))&&function(){var e=c;ve(e.extend,e,Fr(p,1,null,1))}()}u=p}if(Ne(null!==u)){var v=Or(u.index,ve(je,null,qr(u,0))),m=Fr(r,v,null,1);!function(){var e=c;ve(e.append,e,m)}()}return c}))},get _findAllMatches(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}for(var s,_=ve((s=e)._getTargetStr,s,r,n,t),l=ve(Rr,null,l=e._flags,_a),c=function(){var r=e;return ve(r._compileWrapper,r,e._jspattern,l)}(),u=(c[0],c[1]),f=[];Ne(!0);){var d=function(){var e=u;return ve(e.exec,e,_)}();if(!Ne(d))break;!function(){var e=f;ve(e.append,e,d)}()}return f}))},get findall(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}var s,_=ve((s=e)._findAllMatches,s,r,n,t),l=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("m"===t)e=n[t]}}return Ne(Ar(ve(je,null,e),2))?ve(tr,null,Fr(e,1,null,1)):Ne(Cr(ve(je,null,e),2))?qr(e,1):qr(e,0)},c=ve(nn,null,l,_);return c}))},get finditer(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"string":r=i[o];break;case"pos":n=i[o];break;case"endpos":t=i[o]}}}var s,_=ve((s=e)._findAllMatches,s,r,n,t),l=ve(nn,null,(function(n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("m"===i)n=a[i]}}return ve(da,null,n,r,0,ve(je,null,r),e,e._groupindex)}),_);return ve(He,null,l)}))},get sub(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"repl":r=i[o];break;case"string":n=i[o];break;case"count":t=i[o]}}}var s,_=ve((s=e).subn,s,r,n,t),l=_[0];_[1];return l}))},get subn(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"repl":r=i[o];break;case"string":n=i[o];break;case"count":t=i[o]}}}for(var s,_=ve(Rr,null,_=e._flags,_a),l=ve((s=e)._compileWrapper,s,e._jspattern,_),c=(l[0],l[1]),u="",f=0,d=yr(1);Ne(!0);){if(Ne(Ar(t,0)))if(Ne(Ir(f,t)))return Ne(jr(d,0))?tr([u,f]):tr([u=ve(Tr,null,u,Fr(n,d,p.index,1)),f]);var p=function(){var e=c;return ve(e.exec,e,n)}();if(!Ne(p))return Ne(jr(d,0))?tr([n,0]):tr([u=ve(Tr,null,u,Fr(n,d,null,1)),f]);if(Ne(jr(d,0)))var u=ve(Tr,null,u,Fr(n,0,p.index,1));else u=ve(Tr,null,u,Fr(n,d,p.index,1));if(Ne(ve(qe,null,r))){var g=ve(r,null,ve(da,null,p,n,0,ve(je,null,n),e,e._groupindex));u=ve(Tr,null,u,g)}else u=ve(Tr,null,u,r);f=ve(Tr,null,f,1),d=Or(p.index,ve(je,null,qr(p,0)))}}))}});Object.defineProperty(pa,"pattern",ke.call(pa,pa._getPattern,pa._setPattern)),Object.defineProperty(pa,"flags",ke.call(pa,pa._getFlags,pa._setFlags)),Object.defineProperty(pa,"groups",ke.call(pa,pa._getGroups,pa._setGroups)),Object.defineProperty(pa,"groupindex",ke.call(pa,pa._getGroupIndex,pa._setGroupIndex));var ga=he("PyRegExp",[pa],{__module__:Gt,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"pyPattern":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(Ft,null,r),_=s[0],l=s[1],c=s[2],u=s[3],f=s[4],d=(n=ve(Rr,null,n,l),ve("".join,"",_));ve((o=pa).__init__,o,e,d,n),e._pypattern=r,e._nsplits=f,e._jsTokens=_,e._capgroups=u,e._groupindex=c}))}}),ha=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"pattern":e=t[a];break;case"flags":r=t[a]}}}if(Ne(Sr(r,ca)))var i=ve(pa,null,e,r);else i=ve(ga,null,e,r);return i},va=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(ha,null,e,n);return ve((o=s).search,o,r)},ma=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(ha,null,e,n);return ve((o=s).match,o,r)},wa=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(ha,null,e,n);return ve((o=s).fullmatch,o,r)},ka=function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"pattern":e=i[o];break;case"string":r=i[o];break;case"maxsplit":n=i[o];break;case"flags":t=i[o]}}}var s,_=ve(ha,null,e,t);return ve((s=_).py_split,s,r,n)},ya=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(ha,null,e,n);return ve((o=s).findall,o,r)},ba=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":r=a[i];break;case"flags":n=a[i]}}}var o,s=ve(ha,null,e,n);return ve((o=s).finditer,o,r)},xa=function(e,r,n,t,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"pattern":e=o[s];break;case"repl":r=o[s];break;case"string":n=o[s];break;case"count":t=o[s];break;case"flags":a=o[s]}}}var _,l=ve(ha,null,e,a);return ve((_=l).sub,_,r,n,t)},Oa=function(e,r,n,t,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"pattern":e=o[s];break;case"repl":r=o[s];break;case"string":n=o[s];break;case"count":t=o[s];break;case"flags":a=o[s]}}}var _,l=ve(ha,null,e,a);return ve((_=l).subn,_,r,n,t)},Pa=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("string"===t)e=n[t]}}var a=null,i=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("m"===t)e=n[t]}}return Ne(Cr(qr(e,0),"\\"))?"\\\\\\\\":Or("\\\\",qr(e,0))},o=/[^A-Za-z:;\d]/g;if(Ne(null!==(a=e.replace(o,i))))return a;var s=ve(Ur,null,"Failed to escape the passed string");throw s.__cause__=null,s},Ea=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}}},Sa={},Ca={};ue(Sa,"",dn),ue(Ca,"",Ct);var La="pylatexenc.latexnodes._tokenreader",ja=ve(Sa.getLogger,Sa,La),Na=he("LatexTokenReader",[Et],{__module__:La,get __init__(){return fe(this,(function(e,r){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":r=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}if(ve(ve(we,null,Na,"__init__"),null,e),e.s=r,e.tolerant_parsing=ve((n=t).py_pop,n,"tolerant_parsing",!1),Ne(t)){var s=ve(Hr,null,function(){var e="Invalid argument(s) to LatexTokenReader: {!r}";return ve(e.format,e,t)}());throw s.__cause__=null,s}e._pos=0}))},get move_to_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"rewind_pre_space":n=a[i]}}}if(Ne(n))var o=Pr(r.pos,ve(je,null,r.pre_space));else o=r.pos;var s;ve((s=e)._advance_to_pos,s,o)}))},get move_past_token(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"tok":r=a[i];break;case"fastforward_post_space":n=a[i]}}}var o,s=r.pos_end;if(Ne(!Ne(n))){var _=ve(Ee,null,r,"post_space",null);if(Ne(_))s=ve(Dr,null,s,ve(je,null,_))}ve((o=e)._advance_to_pos,o,s)}))},get peek_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"num_chars":r=a[i];break;case"parsing_state":n=a[i]}}}if(Ne(Ir(e._pos,ve(je,null,e.s)))){var o=ve(Nn,null);throw o.__cause__=null,o}return Fr(e.s,e._pos,Or(e._pos,r),1)}))},get next_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"num_chars":r=a[i];break;case"parsing_state":n=a[i]}}}var o,s=ve((o=e).peek_chars,o,r,n);return e._pos=ve(Tr,null,e._pos,r),Ne(Ar(e._pos,ve(je,null,e.s)))&&(e._pos=ve(je,null,e.s)),s}))},get cur_pos(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._pos}))},get move_to_pos_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pos":r=t[a]}}}var i;ve((i=e)._advance_to_pos,i,r)}))},get _advance_to_pos(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pos":r=t[a]}}}e._pos=r}))},get skip_space_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i,o=ve((i=e).impl_peek_space_chars,i,e.s,e._pos,r),s=o[0],_=o[1],l=o[2];return function(){var r=e;ve(r._advance_to_pos,r,l)}(),tr([s,_,l])}))},get peek_space_chars(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}return ve((i=e).impl_peek_space_chars,i,e.s,e._pos,r);var i}))},get peek_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}try{return ve((o=e).impl_peek_token,o,r)}catch(r){if(Re(r,Ln)){var i=r;if(Ne(e.tolerant_parsing))return function(){var r=e;ve(r.move_to_pos_chars,r,i.recovery_token_at_pos)}(),i.recovery_token_placeholder;throw r.__cause__=null,r}throw r}var o}))},get impl_peek_token(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state":r=t[a]}}}var i;ve((i=ja).debug,i,"impl_peek_token(): parsing_state = %r, pos=%r",r,e._pos);var o=e.s,s=ve(je,null,o),_=e._pos,l=function(){var n=e;return ve(n.impl_peek_space_chars,n,o,_,r)}(),c=l[0],u=l[1],f=l[2];if(Ne(Ne(r.enable_double_newline_paragraphs)&&Ir(function(){var e=c;return ve(e.count,e,"\n")}(),2))){var d=function(){var e=c;return ve(e.find,e,"\n")}(),p=Or(function(){var e=c;return ve(e.rfind,e,"\n")}(),1),g=(c=Fr(c,0,d,1),Or(u,d)),h=Or(u,p);if(Ne(null!==r.latex_context)){try{var v=function(){var e=r.latex_context;return ve(e.get_specials_spec,e,me({specials_chars:"\n\n"}))}()}catch(e){if(!Re(e,$r))throw e;v=null}if(Ne(Ne(null!==v)&&Cr(v.specials_chars,"\n\n")))return function(){var r=e;return ve(r.make_token,r,me({tok:"specials",arg:v,pos:g,pos_end:h,pre_space:c}))}()}return function(){var r=e;return ve(r.make_token,r,me({tok:"char",arg:"\n\n",pos:g,pos_end:h,pre_space:c}))}()}if(Ne(Ir(_=f,s))){var m=ve(Nn,null,me({final_space:c}));throw m.__cause__=null,m}var w=qr(o,_);if(function(){var e=ja;ve(e.debug,e,"Char at %d: %r",_,w)}(),Ne(Ne(Ce(w,r._math_delims_info_startchars))&&r.enable_math)){var k=function(){var n=e;return ve(n.impl_maybe_read_math_mode_delimiter,n,o,_,r,c)}();if(Ne(null!==k))return k}if(Ne(Cr(w,r.macro_escape_char))){if(Ne(r.enable_environments)){if(Ne(function(){var e=o;return ve(e.startswith,e,"begin",Or(_,1))}()))var y="begin";else if(Ne(function(){var e=o;return ve(e.startswith,e,"end",Or(_,1))}()))y="end";else y=null;if(function(){var e,r=ja;ve(r.debug,r,"beginend=%r; s.startswith('begin',pos+1)=%r; s[pos+1:pos+7]=%r",y,ve((e=o).startswith,e,"begin",Or(_,1)),Fr(o,Or(_,1),Or(_,7),1))}(),Ne(y)){var b=Or(Or(_,1),ve(je,null,y));if(Ne(Ne(Ir(b,ve(je,null,o)))||!Ce(qr(o,b),r.macro_alpha_chars)))return function(){var n=e;return ve(n.impl_read_environment,n,me({s:o,pos:_,parsing_state:r,beginend:y,pre_space:c}))}()}}if(Ne(r.enable_macros))return function(){var n=e;return ve(n.impl_read_macro,n,me({s:o,pos:_,parsing_state:r,pre_space:c}))}()}if(Ne(Ne(r.enable_comments)&&Ne(Cr(w,qr(r.comment_start,0)))&&function(){var e=o;return ve(e.startswith,e,r.comment_start,_)}()))return function(){var n=e;return ve(n.impl_read_comment,n,me({s:o,pos:_,parsing_state:r,pre_space:c}))}();if(Ne(r.enable_groups)){if(Ne(Ce(w,r._latex_group_delimchars_by_open)))return function(){var r=e;return ve(r.make_token,r,me({tok:"brace_open",arg:w,pos:_,pos_end:Or(_,1),pre_space:c}))}();if(Ne(Ce(w,r._latex_group_delimchars_close)))return function(){var r=e;return ve(r.make_token,r,me({tok:"brace_close",arg:w,pos:_,pos_end:Or(_,1),pre_space:c}))}()}if(Ne(Ne(null!==r.latex_context)&&r.enable_specials)){v=function(){var e=r.latex_context;return ve(e.test_for_specials,e,o,_,me({parsing_state:r}))}();if(function(){var e=ja;ve(e.debug,e,"tested for specials at ‘%s’ -> %r",Or(Fr(o,_,Or(_,3),1),"..."),v)}(),Ne(null!==v))return function(){var r=e;return ve(r.make_token,r,me({tok:"specials",arg:v,pos:_,pos_end:Or(_,ve(je,null,v.specials_chars)),pre_space:c}))}()}return function(){var n=e;return ve(n.impl_char_token,n,w,_,Or(_,1),r,c)}()}))},get impl_peek_space_chars(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":r=i[o];break;case"pos":n=i[o];break;case"parsing_state":t=i[o]}}}for(var s,_=n,l="";Ne(!0)&&!Ne(Ir(_,ve(je,null,r)));){var c=qr(r,_);if(Ne(!Ne((s=void 0,s=c,ve(s.isspace,s)))))break;l=ve(Tr,null,l,c),_=ve(Tr,null,_,1)}return tr([l,n,_])}))},get impl_char_token(){return fe(this,(function(e,r,n,t,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"c":r=s[_];break;case"pos":n=s[_];break;case"pos_end":t=s[_];break;case"parsing_state":a=s[_];break;case"pre_space":i=s[_]}}}if(Ne(Ce(r,a.forbidden_characters))){var l=ve(Ln,null,me({s:e.s,pos:n,msg:(c="Character is forbidden here: ‘{}’ ({:#x})",ve(c.format,c,r,ve(Ge,null,r))),error_type_info:wr({what:"token_forbidden_character",forbidden_character:r}),recovery_token_placeholder:function(){var a=e;return ve(a.make_token,a,me({tok:"char",arg:r,pos:n,pos_end:t,pre_space:i}))}(),recovery_token_at_pos:t}));throw l.__cause__=null,l}var c;return function(){var a=e;return ve(a.make_token,a,me({tok:"char",arg:r,pos:n,pos_end:t,pre_space:i}))}()}))},get impl_maybe_read_math_mode_delimiter(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"s":r=o[s];break;case"pos":n=o[s];break;case"parsing_state":t=o[s];break;case"pre_space":a=o[s]}}}if(Ne(t.in_math_mode)){var _=t._math_expecting_close_delim_info;if(Ne(null!==_)){var l=qr(_,"close_delim"),c=qr(_,"tok");if(ve((u=ja).debug,u,"expecting close math mode delimiter: delim %r, tok %r",l,c),Ne(function(){var e=r;return ve(e.startswith,e,l,n)}()))return function(){var e=ja;ve(e.debug,e,"we did encounter that expected delim & tok at pos = %r;we have s[pos:pos+10]=%r",n,Fr(r,n,Or(n,10),1))}(),function(){var r=e;return ve(r.make_token,r,me({tok:c,arg:l,pos:n,pos_end:Or(n,ve(je,null,l)),pre_space:a}))}()}}for(var u,f=t._math_all_delims_by_len,d=0;d<je(f);d++){var p=qr(f,d),g=p[0],h=p[1];if(Ne(function(){var e=r;return ve(e.startswith,e,g,n)}()))return function(){var e=ja;ve(e.debug,e,"Encountered opening math delim %r (tok %r) at pos = %r;we have s[pos:pos+10]=%r",g,h,n,Fr(r,n,Or(n,10),1))}(),function(){var r=e;return ve(r.make_token,r,me({tok:h,arg:g,pos:n,pos_end:Or(n,ve(je,null,g)),pre_space:a}))}()}return null}))},get impl_read_macro(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"s":r=o[s];break;case"pos":n=o[s];break;case"parsing_state":t=o[s];break;case"pre_space":a=o[s]}}}var _,l;if(Ne(Lr(qr(r,n),t.macro_escape_char)))throw(_=ve(Hr,null,"Internal error, expected '\\' in impl_read_macro()")).__cause__=null,_;if(Ne(Ir(Or(n,1),ve(je,null,r))))throw(_=ve(Ln,null,me({s:r,pos:Or(n,1),msg:(l="Expected macro name after ‘{}’ escape character",ve(l.format,l,t.macro_escape_char)),error_type_info:wr({what:"token_end_of_stream_immediately_after_escape_character"}),recovery_token_placeholder:function(){var r=e;return ve(r.make_token,r,me({tok:"char",arg:"",pos:n,pos_end:n,pre_space:a}))}(),recovery_token_at_pos:ve(je,null,r)}))).__cause__=null,_;var c=qr(r,Or(n,1)),u=c,f=Ce(c,t.macro_alpha_chars),d=Or(n,2);if(Ne(f))for(;Ne(Ne(jr(d,ve(je,null,r)))&&Ce(qr(r,d),t.macro_alpha_chars));)u=ve(Tr,null,u,qr(r,d)),d=ve(Tr,null,d,1);var p="";if(Ne(f)){var g=function(){var n=e;return ve(n.impl_peek_space_chars,n,r,d,t)}(),h=(p=g[0],g[1]),v=g[2];if(Ne(Ir(function(){var e=p;return ve(e.count,e,"\n")}(),2))){var m=function(){var e=p;return ve(e.find,e,"\n")}();v=Or(h,m),p=Fr(p,0,m,1)}d=v}return function(){var r=e;return ve(r.make_token,r,me({tok:"macro",arg:u,pos:n,pos_end:d,pre_space:a,post_space:p}))}()}))},rx_environment_name:ve(Ca.compile,Ca,"\\s*\\{(?P<environmentname>[A-Za-z0-9*._ :/!^()\\[\\]-]+)\\}"),get parse_latex_environment_name(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"pos":r=i[o];break;case"beginend":n=i[o];break;case"pos_envname":t=i[o]}}}var s,_=ve((s=e.rx_environment_name).match,s,Fr(e.s,t,null,1));if(Ne(null===_))return tr([null,null]);var l=Or(t,function(){var e=_;return ve(e.end,e)}());return tr([function(){var e=_;return ve(e.group,e,"environmentname")}(),l])}))},get impl_read_environment(){return fe(this,(function(e,r,n,t,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"s":r=s[_];break;case"pos":n=s[_];break;case"parsing_state":t=s[_];break;case"beginend":a=s[_];break;case"pre_space":i=s[_]}}}var l;if(Ne(Lr(Fr(r,n,Or(Or(n,1),ve(je,null,a)),1),Or(t.macro_escape_char,a))))throw(g=ve(Hr,null,ve((l="Internal error, expected ‘{}{}’ in read_environment()").format,l,t.macro_escape_char,a))).__cause__=null,g;var c=Or(Or(n,1),ve(je,null,a)),u=function(){var r=e;return ve(r.parse_latex_environment_name,r,n,a,c)}(),f=u[0],d=u[1];if(function(){var e=ja;ve(e.debug,e,"Getting environment name at %r -> %r, is {align}?=%r",Or(Or("...|",Fr(r,c,Or(c,35),1)),"|..."),d,Cr(Fr(r,c,Or(c,ve(je,null,"{align}")),1),"{align}"))}(),Ne(null===f)){var p=Or(t.macro_escape_char,a),g=ve(Ln,null,me({s:r,msg:function(){var e="Bad ‘\\{}’ call: expected {{environmentname}}";return ve(e.format,e,a)}(),pos:n,error_type_info:wr({what:"token_error_parse_beginend_environment_name",beginend:a,macro_beginend:p}),recovery_token_placeholder:ve(xt,null,me({tok:"char",arg:p,pos:n,pos_end:Or(n,ve(je,null,p)),pre_space:i})),recovery_token_at_pos:Or(n,ve(je,null,p))}));throw g.__cause__=null,g}var h=function(){var r=e;return ve(r.make_token,r,me({tok:Or(a,"_environment"),arg:f,pos:n,pos_end:d,pre_space:i}))}();return function(){var e=ja;ve(e.debug,e,"read environment token %r",h)}(),h}))},get impl_read_comment(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"s":r=o[s];break;case"pos":n=o[s];break;case"parsing_state":t=o[s];break;case"pre_space":a=o[s]}}}if(Ne(!Ne((l=r,ve(l.startswith,l,t.comment_start,n))))){var _=ve(Hr,null,function(){var e="Internal error, expected comment start ‘{}’ in read_comment()";return ve(e.format,e,t.comment_start)}());throw _.__cause__=null,_}var l,c=Or(n,ve(je,null,t.comment_start)),u=function(){var e=r;return ve(e.find,e,"\n",c)}();if(Ne(Cr(u,yr(1))))var f=ve(je,null,r),d=ve(je,null,r),p="";else{var g=function(){var n=e;return ve(n.impl_peek_space_chars,n,r,u,t)}(),h=(p=g[0],g[1]),v=g[2];if(Ne(Ir(function(){var e=p;return ve(e.count,e,"\n")}(),2))){var m=function(){var e=p;return ve(e.find,e,"\n")}();v=Or(h,m),p=Fr(p,0,m,1)}f=u,d=v}return function(){var t=e;return ve(t.make_token,t,me({tok:"comment",arg:Fr(r,c,f,1),pos:n,pos_end:d,pre_space:a,post_space:p}))}()}))}}),Aa=(R=i("fOdIC"),{});e(Aa,"fn_unique_object_id",(function(){return Ta}));var Ia,Ma,Ta=(Ia=0,Ma=new WeakMap,function(e){return Ma.has(e)||Ma.set(e,++Ia),Ma.get(e)}),Da={},Ra={};ue(Ra,"",Aa),ue(Da,"",dn);var qa="pylatexenc.latexnodes._parsingstate",za=ve(Da.getLogger,Da,qa),Fa=Or(ve("".join,"",function(){for(var e=[],r=0;r<26;r++)ve(e.append,e,ve(Fe,null,Or(ve(Ge,null,"a"),r)));return e}()),ve("".join,"",function(){for(var e=[],r=0;r<26;r++)ve(e.append,e,ve(Fe,null,Or(ve(Ge,null,"A"),r)));return e}())),Ga=Ra.fn_unique_object_id,Ba=he("ParsingState",[ge],{__module__:qa,_fields:tr(["s","latex_context","in_math_mode","math_mode_delimiter","latex_group_delimiters","latex_inline_math_delimiters","latex_display_math_delimiters","enable_double_newline_paragraphs","enable_macros","enable_environments","enable_comments","enable_groups","enable_specials","enable_math","macro_alpha_chars","macro_escape_char","comment_start","forbidden_characters"]),get __init__(){return fe(this,(function(e){var r,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("self"===i)e=a[i];else n[i]=a[i];delete n.__kwargtrans__}}ve(ve(we,null,Ba,"__init__"),null,e),e._parent_parsing_state_info=ve((r=n).py_pop,r,"_parent_parsing_state_info",tr([null,wr({})])),function(){var r=e;ve(r.set_fields,r,me(n))}(),function(){var r=e;ve(r.finalize_state,r)}()}))},get set_fields(){return fe(this,(function(e,r,n,t,a,i,o,s,_,l,c,u,f,d,p,g,h,v,m){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=!0;if(void 0===c||null!=c&&c.hasOwnProperty("__kwargtrans__"))c=!0;if(void 0===u||null!=u&&u.hasOwnProperty("__kwargtrans__"))u=!0;if(void 0===f||null!=f&&f.hasOwnProperty("__kwargtrans__"))f=!0;if(void 0===d||null!=d&&d.hasOwnProperty("__kwargtrans__"))d=!0;if(void 0===p||null!=p&&p.hasOwnProperty("__kwargtrans__"))p=!0;if(void 0===g||null!=g&&g.hasOwnProperty("__kwargtrans__"))g=Fa;if(void 0===h||null!=h&&h.hasOwnProperty("__kwargtrans__"))h="\\";if(void 0===v||null!=v&&v.hasOwnProperty("__kwargtrans__"))v="%";if(void 0===m||null!=m&&m.hasOwnProperty("__kwargtrans__"))m="";if(arguments.length){var w=arguments.length-1;if(arguments[w]&&arguments[w].hasOwnProperty("__kwargtrans__")){var k=arguments[w--];for(var y in k)switch(y){case"self":e=k[y];break;case"s":r=k[y];break;case"latex_context":n=k[y];break;case"in_math_mode":t=k[y];break;case"math_mode_delimiter":a=k[y];break;case"latex_group_delimiters":i=k[y];break;case"latex_inline_math_delimiters":o=k[y];break;case"latex_display_math_delimiters":s=k[y];break;case"enable_double_newline_paragraphs":_=k[y];break;case"enable_macros":l=k[y];break;case"enable_environments":c=k[y];break;case"enable_comments":u=k[y];break;case"enable_groups":f=k[y];break;case"enable_specials":d=k[y];break;case"enable_math":p=k[y];break;case"macro_alpha_chars":g=k[y];break;case"macro_escape_char":h=k[y];break;case"comment_start":v=k[y];break;case"forbidden_characters":m=k[y]}}}var b;e.s=r,e.latex_context=n,e.in_math_mode=t,e.math_mode_delimiter=a,Ne(Ne(!Ne(e.in_math_mode))&&e.math_mode_delimiter)&&(ve((b=za).warning,b,"ParsingState: You set math_mode_delimiter=%r but in_math_mode is False",e.math_mode_delimiter),e.math_mode_delimiter=null),e.latex_group_delimiters=Ne(null!==i)?i:[tr(["{","}"])],e.latex_inline_math_delimiters=Ne(null!==o)?o:[tr(["$","$"]),tr(["\\(","\\)"])],e.latex_display_math_delimiters=Ne(null!==s)?s:[tr(["$$","$$"]),tr(["\\[","\\]"])],e.enable_double_newline_paragraphs=_,e.enable_macros=l,e.enable_environments=c,e.enable_comments=u,e.enable_groups=f,e.enable_specials=d,e.enable_math=p,e.macro_alpha_chars=g,e.macro_escape_char=h,e.comment_start=v,e.forbidden_characters=m}))},get _finalize_state_latex_group_delimiters_info(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parent":r=a[i];break;case"kwargs":n=a[i]}}}if(Ne(Ne(null!==r)&&!Ce("latex_group_delimiters",n)))return e._latex_group_delimchars_by_open=r._latex_group_delimchars_by_open,void(e._latex_group_delimchars_close=r._latex_group_delimchars_close);var o=ve.apply(void 0,[Ze,null].concat((0,R.default)(e.latex_group_delimiters))),s=(o[0],o[1]);e._latex_group_delimchars_by_open=ve(wr,null,e.latex_group_delimiters),e._latex_group_delimchars_close=ve(ar,null,s)}))},get _finalize_state_latex_math_delim_info(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parent":r=a[i];break;case"kwargs":n=a[i]}}}if(Ne(Ne(null!==r)&&Ne(!Ce("latex_inline_math_delimiters",n))&&!Ce("latex_display_math_delimiters",n)))return e._math_delims_info_startchars=r._math_delims_info_startchars,e._math_all_delims_by_len=r._math_all_delims_by_len,e._math_delims_info_by_open=r._math_delims_info_by_open,void(e._math_delims_close=r._math_delims_close);e._math_delims_info_startchars=ve("".join,"",function(){for(var r=[],n=Or(e.latex_inline_math_delimiters,e.latex_display_math_delimiters),t=0;t<je(n);t++)for(var a=qr(n,t),i=0;i<je(a);i++){var o=qr(a,i);ve(r.append,r,Fr(o,0,1,1))}return r}()),e._math_all_delims_by_len=ve(rn,null,function(){for(var r=[],n=tr([tr([e.latex_inline_math_delimiters,"mathmode_inline"]),tr([e.latex_display_math_delimiters,"mathmode_display"])]),t=0;t<je(n);t++)for(var a=qr(n,t),i=a[0],o=a[1],s=ve(ar,null,function(){for(var e=[],r=i,n=0;n<je(r);n++)for(var t=qr(r,n),a=0;a<je(t);a++){var o=qr(t,a);ve(e.append,e,o)}return e}()),_=0;_<je(s);_++){var l=qr(s,_);ve(r.append,r,tr([l,o]))}return r}(),me({key:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return ve(je,null,qr(e,0))},reverse:!0})),e._math_delims_info_by_open=ve(wr,null,Or(function(){for(var r=[],n=e.latex_inline_math_delimiters,t=0;t<je(n);t++){var a=qr(n,t),i=a[0],o=a[1];ve(r.append,r,tr([i,ve(wr,null,me({close_delim:o,tok:"mathmode_inline"}))]))}return r}(),function(){for(var r=[],n=e.latex_display_math_delimiters,t=0;t<je(n);t++){var a=qr(n,t),i=a[0],o=a[1];ve(r.append,r,tr([i,ve(wr,null,me({close_delim:o,tok:"mathmode_display"}))]))}return r}())),e._math_delims_close=ve(ar,null,function(){for(var r,n=[],t=ve((r=e._math_delims_info_by_open).py_items,r),a=0;a<je(t);a++){var i=qr(t,a),o=(i[0],i[1]);ve(n.append,n,qr(o,"close_delim"))}return n}())}))},get _finalize_state_inmathmode_info(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parent":r=a[i];break;case"kwargs":n=a[i]}}}Ne(Ne(null!==r)&&Ne(!Ce("in_math_mode",n))&&!Ce("math_mode_delimiter",n))?e._math_expecting_close_delim_info=r._math_expecting_close_delim_info:Ne(!Ne(e.in_math_mode))?e._math_expecting_close_delim_info=null:Ne(Ce(e.math_mode_delimiter,e._math_delims_info_by_open))?e._math_expecting_close_delim_info=qr(e._math_delims_info_by_open,e.math_mode_delimiter):e._math_expecting_close_delim_info=null}))},get finalize_state(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e._parent_parsing_state_info,o=i[0],s=i[1];ve((a=e)._finalize_state_latex_group_delimiters_info,a,o,s),function(){var r=e;ve(r._finalize_state_latex_math_delim_info,r,o,s)}(),function(){var r=e;ve(r._finalize_state_inmathmode_info,r,o,s)}()}))},get sub_context(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}var i,o=ve((i=e).get_fields,i),s=function(){for(var e,n=[],t=ve((e=r).py_items,e),a=0;a<je(t);a++){var i=qr(t,a),s=i[0],_=i[1];Ne(!Ne(ve(Ua,null,_,qr(o,s))))&&ve(n.append,n,[s,_])}return wr(n)}();!function(){var e=o;ve(e.py_update,e,s)}();var _=function(){var r=e;return ve(r.__class__,r,me(xe({_parent_parsing_state_info:tr([e,s])},o)))}();return function(){var n=za;ve(n.debug,n,"%s.sub_context(%r): %r --\x3e %r",e.__class__.__name__,r,e,_)}(),_}))},get get_fields(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,tr([a,ve(Ee,null,e,a)]))}return r}())}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.__class__.__name__,o=ve((a="{}<{:#x}>").format,a,i,ve(Ga,null,e)),s=e._parent_parsing_state_info,_=s[0],l=s[1];return Ne(!Ne(_))?o:Or(Or(Or(o,function(){var e="(<{:#x}> {} ";return ve(e.format,e,ve(Ga,null,_),"→")}()),ve(", ".join,", ",function(){for(var e,r,n=[],t=ve((e=l).py_items,e),a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];Ne(!Ce(o,tr(["s"])))&&(r=void 0,ve(n.append,n,ve((r="{}={!r}").format,r,o,s)))}return n}())),")")}))},get to_json_object(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r,n,t=[],a=(n=ve((r=e).get_fields,r),ve(n.py_items,n)),i=0;i<je(a);i++){var o=qr(a,i),s=o[0],_=o[1];Ne(!Ce(s,tr(["latex_context","s"])))&&ve(t.append,t,[s,_])}return wr(t)}()}))}}),Ua=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"a":e=t[a];break;case"b":r=t[a]}}}return Ne(Ne(null===e)&&null===r)||Cr(e,r)},Wa={};ue(Wa,"",dn);var Va="pylatexenc.latexnodes._nodescollector",Ha=ve(Wa.getLogger,Wa,Va),$a=he("LatexNodesCollector",[ge],{__module__:Va,ReachedEndOfStream:he("ReachedEndOfStream",[Ur],{__module__:Va}),ReachedStoppingCondition:he("ReachedStoppingCondition",[Ur],{__module__:Va,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"stop_data":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,$a.ReachedStoppingCondition,"__init__"),null,e,me(n)),e.stop_data=r}))}}),get __init__(){return fe(this,(function(e,r,n,t,a,i,o,s){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"self":e=l[c];break;case"latex_walker":r=l[c];break;case"token_reader":n=l[c];break;case"parsing_state":t=l[c];break;case"stop_token_condition":a=l[c];break;case"stop_nodelist_condition":i=l[c];break;case"make_child_parsing_state":o=l[c];break;case"include_stop_token_pre_space_chars":s=l[c]}}}ve(ve(we,null,$a,"__init__"),null,e),e.latex_walker=r,e.token_reader=n,e.stop_token_condition=a,e.stop_nodelist_condition=i,e.include_stop_token_pre_space_chars=s,e._stop_token_condition_met=!1,e._stop_token_condition_met_token=null,e._stop_nodelist_condition_met=!1,e._stop_condition_stop_data=null,e._reached_end_of_stream=!1,e.parsing_state=t,e.start_parsing_state=t,e._nodelist=[],e._pending_chars_pos=null,e._pending_chars="",e._finalized=!1,e._make_child_parsing_state_fn=o}))},get get_final_nodelist(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(!Ne(e._finalized))){var a=ve(RuntimeError,null,"Call to get_final_nodelist() before finalize()");throw a.__cause__=null,a}return ve((i=e.latex_walker).make_nodelist,i,me({nodelist:e._nodelist,parsing_state:e.start_parsing_state}));var i}))},get get_parser_parsing_state_delta(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(!Ne(e._finalized))){var a=ve(RuntimeError,null,"Call to get_parser_parsing_state_delta() before finalize()");throw a.__cause__=null,a}return Ne(e.start_parsing_state===e.parsing_state)?null:ve(ft,null,me({set_parsing_state:e.parsing_state}))}))},get pos_start(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}try{var a=ve($e,null,function(){for(var r=[],n=e._nodelist,t=0;t<je(n);t++){var a=qr(n,t);Ne(null!==a)&&ve(r.append,r,a.pos)}return He(r)}())}catch(e){if(!Re(e,Vr))throw e;a=null}return Ne(null!==a)?a:e._pending_chars_pos}))},get pos_end(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}try{var a=ve($e,null,function(){for(var r=[],n=ve(Je,null,e._nodelist),t=0;t<je(n);t++){var a=qr(n,t);Ne(null!==a)&&ve(r.append,r,a)}return He(r)}())}catch(e){if(!Re(e,Vr))throw e;a=null}return Ne(null===a)?null:a.pos_end}))},get stop_token_condition_met(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._stop_token_condition_met}))},get stop_token_condition_met_token(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._stop_token_condition_met_token}))},get stop_nodelist_condition_met(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._stop_nodelist_condition_met}))},get stop_condition_stop_data(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._stop_condition_stop_data}))},get reached_end_of_stream(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._reached_end_of_stream}))},get is_finalized(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._finalized}))},get finalize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(!Ne(e._finalized)){var a,i=ve((a=e).flush_pending_chars,a);if(e._finalized=!0,Ne(null!==i)){!function(){var e=Ha;ve(e.debug,e,"finalize(): raising exc=%r",i)}();var o=i;throw o.__cause__=null,o}}}))},get push_pending_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":r=a[i];break;case"pos":n=a[i]}}}e._pending_chars=ve(Tr,null,e._pending_chars,r),Ne(null===e._pending_chars_pos)&&(e._pending_chars_pos=n)}))},get flush_pending_chars(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(!Ne(e._pending_chars)))return null;var a=tr([e._pending_chars_pos,e._pending_chars]),i=a[0],o=a[1];e._pending_chars="",e._pending_chars_pos=null;var s,_=ve((s=e.latex_walker).make_node,s,Gn,me({parsing_state:e.parsing_state,chars:o,pos:i,pos_end:Or(i,ve(je,null,o))}));return function(){var r=e;return ve(r.push_to_nodelist,r,_)}()}))},get push_to_nodelist(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}if(Ne(e._finalized)){var i=ve(RuntimeError,null,"You already called finalize()");throw i.__cause__=null,i}var o;ve((o=e._nodelist).append,o,r);var s=function(){var r=e;return ve(r._check_nodelist_stop_condition,r)}();return Ne(null!==s)?s:null}))},get update_state_from_parsing_state_delta(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"parsing_state_delta":r=t[a]}}}if(Ne(null!==r)){var i=e.parsing_state;e.parsing_state=ve((o=r).get_updated_parsing_state,o,e.parsing_state,e.latex_walker),function(){var n=Ha;ve(n.debug,n,"Updated parsing state using parsing_state_delta %r: %r →→→ %r",r,i,e.parsing_state)}()}var o}))},get _check_nodelist_stop_condition(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.stop_nodelist_condition;if(Ne(null!==i)){var o=ve(i,null,e._nodelist);if(Ne(o))return e._stop_nodelist_condition_met=!0,ve((a=Ha).debug,a,"nodes collector reached nodelist stop condition; nodelist = %r",e._nodelist),function(){var e=$a;return ve(e.ReachedStoppingCondition,e,me({stop_data:o}))}()}return null}))},get _check_token_stop_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i,o=e.stop_token_condition;if(Ne(null!==o)){var s=ve(o,null,r);if(Ne(s))return e._stop_token_condition_met=!0,e._stop_token_condition_met_token=r,ve((i=Ha).debug,i,"nodes collector reached token stop condition; tok = %r, current node list = %r",r,e._nodelist),function(){var e=$a;return ve(e.ReachedStoppingCondition,e,me({stop_data:s}))}()}return null}))},get process_tokens(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}try{for(;Ne(!0);)i=void 0,ve((i=e).process_one_token,i)}catch(r){if(Re(r,$a.ReachedStoppingCondition)){var a=r;return e._stop_condition_stop_data=a.stop_data,void function(){var e=Ha;ve(e.debug,e,"nodes collector process_tokens() reached stop condition")}()}if(Re(r,$a.ReachedEndOfStream)){a=r;return e._reached_end_of_stream=!0,void function(){var e=Ha;ve(e.debug,e,"nodes collector process_tokens() reached end of stream")}()}if(Re(r,Pn)){a=r;throw function(){var e=Ha;ve(e.debug,e,"process_tokens() - relaying error -- %r",a)}(),r.__cause__=null,r}throw r}finally{!function(){var r=e;ve(r.finalize,r)}()}var i}))},get process_one_token(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(e._finalized)){var a=ve(RuntimeError,null,"You already called finalize()");throw a.__cause__=null,a}var i,o=e.latex_walker,s=e.token_reader;try{var _=ve((i=s).next_token,i,me({parsing_state:e.parsing_state}));!function(){var e=Ha;ve(e.debug,e,"nodes collector read token %r",_)}()}catch(e){if(!Re(e,Nn))throw e;var l=e,c=ve(Ee,null,l,"final_space",null);if(!Ne(c)){var u=function(){var e=$a;return ve(e.ReachedEndOfStream,e)}();u.pos_end=function(){var e=s;return ve(e.cur_pos,e)}(),function(){var e=Ha;ve(e.debug,e,"process_one_token(): reached end of stream, exc=%r",u)}();var f=u;throw f.__cause__=null,f}var d=Or(function(){var e=s;return ve(e.cur_pos,e)}(),ve(je,null,c));_=function(){var e=s;return ve(e.make_token,e,me({tok:"char",arg:"",pre_space:c,pos:d,pos_end:d}))}();!function(){var e=s;ve(e.move_past_token,e,_)}()}var p=function(){var r=e;return ve(r._check_token_stop_condition,r,_)}();if(Ne(null!==p)){if(Ne(e.include_stop_token_pre_space_chars)){!function(){var r=e;ve(r.push_pending_chars,r,me({chars:_.pre_space,pos:Pr(_.pos,ve(je,null,_.pre_space))}))}();var g=!1}else g=!0;!function(){var e=s;ve(e.move_to_token,e,_,me({rewind_pre_space:g}))}(),p.pos_end=_.pos_end,function(){var e=Ha;ve(e.debug,e,"process_one_token(): stop token condition reached, exc=%r",p)}();var h=p;throw h.__cause__=null,h}if(Ne(Cr(_.tok,"char")))!function(){var r=e;ve(r.push_pending_chars,r,me({chars:Or(_.pre_space,_.arg),pos:Pr(_.pos,ve(je,null,_.pre_space))}))}();else{if(Ne(e._pending_chars)){e._pending_chars=ve(Tr,null,e._pending_chars,_.pre_space),_.pre_space="";p=function(){var r=e;return ve(r.flush_pending_chars,r)}();if(Ne(null!==p)){!function(){var e=s;ve(e.move_to_token,e,_,me({rewind_pre_space:!1}))}(),p.pos_end=_.pos,function(){var e=Ha;ve(e.debug,e,"process_one_token(): stop condition reached (a), exc=%r",p)}();var v=p;throw v.__cause__=null,v}}else if(Ne(_.pre_space)){var m=function(){var r=o;return ve(r.make_node,r,Gn,me({parsing_state:e.parsing_state,chars:_.pre_space,pos:Pr(_.pos,ve(je,null,_.pre_space)),pos_end:_.pos}))}();_.pre_space="";p=function(){var r=e;return ve(r.push_to_nodelist,r,m)}();if(Ne(null!==p)){!function(){var e=s;ve(e.move_to_token,e,_,me({rewind_pre_space:!1}))}(),p.pos_end=_.pos,function(){var e=Ha;ve(e.debug,e,"process_one_token(): stop condition reached (b), exc=%r",p)}();var w=p;throw w.__cause__=null,w}}if(Ne(Cr(_.tok,"brace_close"))){var k=ve(jn,null,me({msg:function(){var e="Unexpected mismatching closing delimiter ‘{}’";return ve(e.format,e,_.arg)}(),pos:_.pos,recovery_past_token:_,error_type_info:wr({what:"nodes_unexpected_closing_group_delimiter",delimiter:_.arg})}));throw k.__cause__=null,k}if(Ne(Cr(_.tok,"end_environment"))){var y=ve(jn,null,me({msg:function(){var e="Unexpected closing environment: ‘{}’";return ve(e.format,e,_.arg)}(),pos:_.pos,recovery_past_token:_,error_type_info:wr({what:"nodes_unexpected_end_environment",environmentname:_.arg})}));throw y.__cause__=null,y}if(Ne(Ne(Ce(_.tok,tr(["mathmode_inline","mathmode_display"])))&&!Ce(_.arg,e.parsing_state._math_delims_info_by_open))){var b=ve(jn,null,me({msg:function(){var e="Unexpected closing math mode token ‘{}’";return ve(e.format,e,_.arg)}(),pos:_.pos,recovery_past_token:_,error_type_info:wr({what:"nodes_unexpected_closing_math_delimiter",mathmode_type:_.tok,delimiter:_.arg})}));throw b.__cause__=null,b}if(Ne(Cr(_.tok,"comment")))!function(){var r=e;ve(r.parse_comment_node,r,_)}();else if(Ne(Cr(_.tok,"brace_open")))!function(){var r=e;ve(r.parse_latex_group,r,_)}();else if(Ne(Cr(_.tok,"macro")))!function(){var r=e;ve(r.parse_macro,r,_)}();else if(Ne(Cr(_.tok,"begin_environment")))!function(){var r=e;ve(r.parse_environment,r,_)}();else if(Ne(Cr(_.tok,"specials")))!function(){var r=e;ve(r.parse_specials,r,_)}();else{if(!Ne(Ce(_.tok,tr(["mathmode_inline","mathmode_display"])))){var x=ve(En,null,function(){var e="Unknown token type: {}";return ve(e.format,e,_.tok)}(),me({pos:_.pos}));throw x.__cause__=null,x}!function(){var r=e;ve(r.parse_math,r,_)}()}}}))},get make_child_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"node_class":n=a[i]}}}return Ne(null!==e._make_child_parsing_state_fn)?ve((o=e)._make_child_parsing_state_fn,o,me({parsing_state:r,node_class:n})):e.parsing_state;var o}))},get parse_comment_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i,o=ve((i=e.latex_walker).make_node,i,Un,me({parsing_state:e.parsing_state,comment:r.arg,comment_post_space:r.post_space,pos:r.pos,pos_end:r.pos_end})),s=function(){var r=e;return ve(r.push_to_nodelist,r,o)}();if(Ne(null!==s)){s.pos_end=r.pos_end,function(){var e=Ha;ve(e.debug,e,"parse_comment_node(): stop_exc=%r",s)}();var _=s;throw _.__cause__=null,_}}))},get parse_latex_group(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i;ve((i=Ha).debug,i,"nodes collector is now parsing a latex group, %r",r),function(){var n=e.token_reader;ve(n.move_to_token,n,r,me({rewind_pre_space:!1}))}();var o=function(){var n=e.latex_walker;return ve(n.make_latex_group_parser,n,me({delimiters:r.arg}))}(),s=function(){var r,n=e.latex_walker;return ve(n.parse_content,n,o,me({token_reader:e.token_reader,parsing_state:(r=e,ve(r.make_child_parsing_state,r,e.parsing_state,Bn))}))}(),_=s[0],l=s[1];Ne(null!==l)&&function(){var e=Ha;ve(e.warning,e,"parsing_state_delta is ignored after parsing a LaTeX group: %r",l)}();var c=function(){var r=e;return ve(r.push_to_nodelist,r,_)}();if(Ne(null!==c)){c.pos_end=_.pos_end,function(){var e=Ha;ve(e.debug,e,"parse_latex_group(): stop_exc=%r",c)}();var u=c;throw u.__cause__=null,u}!function(){var e=Ha;ve(e.debug,e,"nodes collector finished parsing group → %r",_)}()}))},get parse_macro(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i,o=r.arg,s=null;if(Ne(null!==e.parsing_state.latex_context))s=ve((i=e.parsing_state.latex_context).get_macro_spec,i,o);if(Ne(null===s)){var _=function(){var n,t=e.latex_walker;return ve(t.check_tolerant_parsing_ignore_error,t,ve(En,null,me({msg:(n="Encountered unknown macro ‘\\{}’",ve(n.format,n,o)),pos:r.pos,error_type_info:wr({what:"nodes_unknown_macro_name",macroname:o})})))}();if(Ne(null!==_)){var l=_;throw l.__cause__=null,l}s=null}var c=Wn,u=function(){var e="macro ‘\\{}’";return ve(e.format,e,o)}();return function(){var n=e;return ve(n.parse_invocable_token_type,n,r,s,c,u)}()}))},get parse_environment(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i,o=e.latex_walker,s=r.arg;if(Ne(null===(c=ve((i=e.parsing_state.latex_context).get_environment_spec,i,s)))){var _=function(){var e,n=o;return ve(n.check_tolerant_parsing_ignore_error,n,ve(En,null,me({msg:(e="Encountered unknown environment ‘{}{}{}’",ve(e.format,e,"{",s,"}")),pos:r.pos,error_type_info:wr({what:"nodes_unknown_environment_name",environmentname:s})})))}();if(Ne(null!==_)){var l=_;throw l.__cause__=null,l}var c=null}var u=Vn,f=function(){var e="environment ‘{}{}{}’";return ve(e.format,e,"{",s,"}")}();return function(){var n=e;return ve(n.parse_invocable_token_type,n,r,c,u,f)}()}))},get parse_specials(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i,o=r.arg,s=$n,_=ve((i="specials ‘{}’").format,i,ve(Ee,null,o,"specials_chars","<unkonwn>"));return function(){var n=e;return ve(n.parse_invocable_token_type,n,r,o,s,_)}()}))},get parse_invocable_token_type(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"tok":r=o[s];break;case"spec":n=o[s];break;case"node_class":t=o[s];break;case"what":a=o[s]}}}var _,l=e.latex_walker,c=e.token_reader;if(Ne(null!==n))var u=ve((_=n).get_node_parser,_,r);else u=null;if(Ne(null===u)){var f=function(){var e,n=l;return ve(n.check_tolerant_parsing_ignore_error,n,ve(En,null,me({msg:(e="No parser found for callable token {!r}",ve(e.format,e,r)),pos:r.pos})))}();if(Ne(null!==f))throw function(){var e=Ha;ve(e.debug,e,"parse_invocable_token_type(): no-parser error, exc=%r",f)}(),(h=f).__cause__=null,h;var d=null,p=null}else{var g=function(){var n,i=l;return ve(i.parse_content,i,u,c,ve((n=e).make_child_parsing_state,n,e.parsing_state,t),me({open_context:tr([a,r])}))}();d=g[0],p=g[1]}if(function(){var r=e;ve(r.update_state_from_parsing_state_delta,r,p)}(),Ne(null===d))!function(){var e=Ha;ve(e.warning,e,"Parser %r produced no node (None) for token %r",u,r)}();else{var h;f=function(){var r=e;return ve(r.push_to_nodelist,r,d)}();if(Ne(null!==f))throw f.pos_end=d.pos_end,function(){var e=Ha;ve(e.debug,e,"parse_invocable_token_type(): exc=%r",f)}(),(h=f).__cause__=null,h}}))},get parse_math(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"tok":r=t[a]}}}var i;ve((i=Ha).debug,i,"parse_math, tok=%r",r),function(){var n=e.token_reader;ve(n.move_to_token,n,r,me({rewind_pre_space:!1}))}();var o=function(){var r=e;return ve(r.make_child_parsing_state,r,e.parsing_state,Yn)}();!function(){var e=Ha;ve(e.debug,e,"child_math_parsing_state = %r",o)}();var s=function(){var n=e.latex_walker;return ve(n.make_latex_math_parser,n,me({math_mode_delimiters:r.arg}))}(),_=function(){var r=e.latex_walker;return ve(r.parse_content,r,s,me({token_reader:e.token_reader,parsing_state:o}))}(),l=_[0],c=_[1];if(function(){var r=e;ve(r.update_state_from_parsing_state_delta,r,c)}(),Ne(null===l))!function(){var e=Ha;ve(e.warning,e,"Math parser produced no node (None) for token %r",r)}();else{var u=function(){var r=e;return ve(r.push_to_nodelist,r,l)}();if(Ne(null!==u)){u.pos_end=l.pos_end,function(){var e=Ha;ve(e.debug,e,"parse_math_node(): stop_exc=%r",u)}();var f=u;throw f.__cause__=null,f}}}))}}),Ya={};ue(Ya,"",dn);var Xa="llm.llmrendercontext",Ja=(ve(Ya.getLogger,Ya,Xa),he("LLMRenderContext",[ge],{__module__:Xa,is_standalone_mode:!1,is_first_pass:!0,get __init__(){return fe(this,(function(e,r){var n=null,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"fragment_renderer":r=i[o];break;case"doc":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Ja,"__init__"),null,e,me(t)),e.doc=n,e.fragment_renderer=r,e.pass_name=null,e.is_first_pass=!0,e._logical_state=wr({}),e._nodes_determined_as_delayed=wr({})}))},get supports_feature(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return!1}))},get feature_render_manager(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return null}))},get register_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"fragment_renderer":n=a[i]}}}var o=ve(RuntimeError,null,"This render context does not support delayed rendering");throw o.__cause__=null,o}))},get get_delayed_render_content(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i=ve(RuntimeError,null,"This render context does not support delayed rendering");throw i.__cause__=null,i}))},get get_is_delayed_render(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}if(Ne(Ce(r.node_id,e._nodes_determined_as_delayed)))return qr(e._nodes_determined_as_delayed,r.node_id);if(Ne(ve(qe,null,i=r.llm_specinfo.delayed_render)))var i=ve(is_delayed_render,null,r,render_context);return zr(e._nodes_determined_as_delayed,r.node_id,i),i}))},get set_render_pass(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pass_name":r=t[a]}}}e.pass_name=r,Ne(null===r)?e.is_first_pass=!0:e.is_first_pass=!1}))},get get_logical_state(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"domainname":r=t[a]}}}return Ne(!Ce(r,e._logical_state))&&zr(e._logical_state,r,wr({})),qr(e._logical_state,r)}))},get push_logical_state(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"domainname":r=i[o];break;case"propname":n=i[o];break;case"value":t=i[o]}}}return ve(Za,null,e,r,n,t)}))}})),Za=he("_RenderContextPushLogicalState",[ge],{__module__:Xa,get __init__(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"render_context":r=o[s];break;case"domainname":n=o[s];break;case"propname":t=o[s];break;case"value":a=o[s]}}}ve(ve(we,null,Za,"__init__"),null,e),e.render_context=r,e.domainname=n,e.propname=t,e.value=a}))},get __enter__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=ve((a=e.render_context).get_logical_state,a,e.domainname);Ne(Ce(e.propname,i))?(e.old_value_exists=!0,e.old_value=qr(i,e.propname)):(e.old_value_exists=!1,e.old_value=null),zr(i,e.propname,e.value)}))},get __exit__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"exc_type":r=i[o];break;case"exc_value":n=i[o];break;case"traceback":t=i[o]}}}var s,_=ve((s=e.render_context).get_logical_state,s,e.domainname);Ne(!Ne(e.old_value_exists))?function(){var r=_;ve(r.py_pop,r,e.propname)}():zr(_,e.propname,e.old_value)}))}}),Ka=he("LLMStandaloneModeRenderContext",[Ja],{__module__:Xa,is_standalone_mode:!0,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"fragment_renderer":r=t[a]}}}ve(ve(we,null,Ka,"__init__"),null,e,me({fragment_renderer:r}))}))},get supports_feature(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return!1}))},get feature_render_manager(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}var i=ve(Hr,null,"There are no document features when rendering LLM text in standalone mode (reqested ‘{}’)".format(r));throw i.__cause__=null,i}))},get register_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"fragment_renderer":n=a[i]}}}var o=ve(Hr,null,"Cannot render nodes with delayed content in standalone mode".format());throw o.__cause__=null,o}))},get get_delayed_render_content(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i=ve(Hr,null,"There's no delayed render content in standalone mode".format());throw i.__cause__=null,i}))}}),Qa={};e(Qa,"LatexParserBase",(function(){return ei})),e(Qa,"LatexOptionalCharsMarkerParser",(function(){return Ei})),e(Qa,"LatexDelimitedExpressionParserOpeningDelimiterNotFound",(function(){return pi})),e(Qa,"LatexVerbatimEnvironmentContentsParser",(function(){return ai})),e(Qa,"LatexDelimitedGroupParserInfo",(function(){return vi})),e(Qa,"LatexSingleNodeParser",(function(){return li})),e(Qa,"LatexDelimitedVerbatimParser",(function(){return ti})),e(Qa,"LatexGeneralNodesParser",(function(){return _i})),e(Qa,"LatexDelimitedExpressionParser",(function(){return hi})),e(Qa,"LatexVerbatimBaseParser",(function(){return ni})),e(Qa,"LatexCharsCommaSeparatedListParser",(function(){return Mi})),e(Qa,"LatexCharsGroupParser",(function(){return Ii})),e(Qa,"LatexExpressionParser",(function(){return xi})),e(Qa,"LatexDelimitedGroupParser",(function(){return mi})),e(Qa,"get_standard_argument_parser",(function(){return Ni})),e(Qa,"LatexOptionalSquareBracketsParser",(function(){return Pi})),e(Qa,"LatexDelimitedExpressionParserInfo",(function(){return gi})),e(Qa,"LatexStandardArgumentParser",(function(){return Ai})),e(Qa,"LatexMathParser",(function(){return Gi})),e(Qa,"LatexTackOnInformationFieldMacrosParser",(function(){return Di}));var ei=he("LatexParserBase",[ge],{__module__:"pylatexenc.latexnodes.parsers._base",get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}ve(ve(we,null,ei,"__init__"),null,e)}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _=ve(RuntimeError,null,"LatexParserBase subclasses must reimplement parse()");throw _.__cause__=null,_}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!0}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="<{}>").format,a,e.__class__.__name__);var a}))}}),ri="pylatexenc.latexnodes.parsers._verbatim",ni=he("LatexVerbatimBaseParser",[ei],{__module__:ri,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}ve(ve(we,null,ni,"__init__"),null,e,me(r))}))},VerbatimInfo:he("VerbatimInfo",[ge],{__module__:ri,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}ve(ve(we,null,ni.VerbatimInfo,"__init__"),null,e),e.parsed_delimiters=tr([null,null])}))}}),get new_char_check_stop_condition(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"char":r=o[s];break;case"verbatim_string":n=o[s];break;case"verbatim_info":t=o[s];break;case"parsing_state":a=o[s]}}}return!!Ne(n)}))},get error_end_of_stream(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"pos":r=o[s];break;case"recovery_nodes":n=o[s];break;case"latex_walker":t=o[s];break;case"verbatim_info":a=o[s]}}}var _=ve(jn,null,me({msg:"End of stream reached while reading verbatim content",pos:r,recovery_nodes:n,error_type_info:wr({what:"verbatim_unexpected_end_of_stream",verbatim_delimiters:a.parsed_delimiters})}));throw _.__cause__=null,_}))},get finalize_verbatim_string(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"verbatim_string":r=a[i];break;case"verbatim_info":n=a[i]}}}return n.pos_start=n.content_pos_start,n.pos_end=Or(n.content_pos_start,ve(je,null,r)),r}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=ni).VerbatimInfo,_);return l.original_pos=function(){var e=n;return ve(e.cur_pos,e)}(),function(){var i=e;return ve(i.read_verbatim_content,i,r,n,t,me(xe({verbatim_info:l},a)))}()}))},get read_verbatim_content(){return fe(this,(function(e,r,n,t,a){var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"latex_walker":r=s[_];break;case"token_reader":n=s[_];break;case"parsing_state":t=s[_];break;case"verbatim_info":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}var l,c="",u=!1,f=!1;for(a.content_pos_start=ve((l=n).cur_pos,l);Ne(!Ne(u));){try{var d=function(){var e=n;return ve(e.next_chars,e,1,me({parsing_state:t}))}()}catch(e){if(!Re(e,Nn))throw e;d=null,f=!0}var p=function(){var r=e;return ve(r.new_char_check_stop_condition,r,d,c,a,t)}();if(Ne(p)){u=!0;Ne(Ne(!0!==p)&&Ne(null!==d)&&qr(p,"put_back_char"))&&function(){var e,r=n;ve(r.move_to_pos_chars,r,Pr(ve((e=n).cur_pos,e),1))}()}else{if(Ne(null===d))break;c=ve(Tr,null,c,d)}}c=function(){var r=e;return ve(r.finalize_verbatim_string,r,c,a)}();var g=a.pos_start,h=a.pos_end,v=function(){var e=r;return ve(e.make_node,e,Gn,me({chars:c,pos:g,pos_end:h,parsing_state:t}))}();return Ne(Ne(!Ne(u))&&f)?function(){var n=e;return ve(n.error_end_of_stream,n,me({pos:h,recovery_nodes:v,latex_walker:r,verbatim_info:a}))}():tr([v,null])}))}}),ti=he("LatexDelimitedVerbatimParser",[ni],{__module__:ri,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"delimiters":r=i[o];break;case"auto_delimiters":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,ti,"__init__"),null,e,me(t)),e.delimiters=r,Ne(null!==n)?e.auto_delimiters=ve(wr,null,n):e.auto_delimiters=wr({"{":"}","[":"]","<":">","(":")"}),e.depth_counter=1,e.parsed_delimiters=null}))},get new_char_check_stop_condition(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"char":r=o[s];break;case"verbatim_string":n=o[s];break;case"verbatim_info":t=o[s];break;case"parsing_state":a=o[s]}}}if(Ne(null===r))return!1;if(Ne(Cr(r,qr(t.parsed_delimiters,1)))){if(e.depth_counter=ve(Dr,null,e.depth_counter,1),Ne(Nr(e.depth_counter,0)))return!0}else Ne(Cr(r,qr(t.parsed_delimiters,0)))&&(e.depth_counter=ve(Tr,null,e.depth_counter,1));return!1}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=ni).VerbatimInfo,_);if(function(){var e=n;ve(e.skip_space_chars,e,t)}(),l.original_pos=function(){var e=n;return ve(e.cur_pos,e)}(),Ne(null===e.delimiters)){var c=function(){var e=n;return ve(e.next_chars,e,1,me({parsing_state:t}))}(),u=function(){var r=e.auto_delimiters;return ve(r.py_get,r,c,c)}();l.parsed_delimiters=tr([c,u])}else{l.parsed_delimiters=e.delimiters;var f=function(){var e=n;return ve(e.next_chars,e,1,me({parsing_state:t}))}();if(Ne(Lr(f,qr(l.parsed_delimiters,0)))){var d=ve(En,null,me({msg:function(){var e="Expected opening delimiter ‘{}’ for verbatim content";return ve(e.format,e,qr(l.parsed_delimiters,0))}(),pos:pos,error_type_info:wr({what:"verbatim_expected_opening_delimiter_not_found",expected_delimiters:l.parsed_delimiters})}));throw d.__cause__=null,d}}var p=function(){var i=e;return ve(i.read_verbatim_content,i,r,n,t,me(xe({verbatim_info:l},a)))}(),g=p[0],h=(p[1],function(){var e,n=r;return ve(n.make_node,n,Bn,me({delimiters:l.parsed_delimiters,nodelist:(e=r,ve(e.make_nodelist,e,[g],me({parsing_state:t}))),pos:l.original_pos,pos_end:Or(g.pos_end,ve(je,null,qr(l.parsed_delimiters,1))),parsing_state:t}))}());return tr([h,null])}))}}),ai=he("LatexVerbatimEnvironmentContentsParser",[ni],{__module__:ri,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="verbatim";var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"environment_name":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,ai,"__init__"),null,e,me(n)),e.environment_name=r}))},get new_char_check_stop_condition(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"char":r=o[s];break;case"verbatim_string":n=o[s];break;case"verbatim_info":t=o[s];break;case"parsing_state":a=o[s]}}}return!!Ne((_=n,ve(_.endswith,_,t.end_environment_code)))&&wr({put_back_char:!0});var _}))},get finalize_verbatim_string(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"verbatim_string":r=a[i];break;case"verbatim_info":n=a[i]}}}var o,s=n.end_environment_code;be(ve((o=r).endswith,o,s));r=Fr(r,0,yr(ve(je,null,s)),1);var _=n.original_pos;if(Ne(function(){var e=r;return ve(e.startswith,e,"\n")}()))r=Fr(r,1,null,1),_=ve(Tr,null,_,1);return n.pos_start=_,n.pos_end=Or(_,ve(je,null,r)),r}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=ni).VerbatimInfo,_);l.original_pos=function(){var e=n;return ve(e.cur_pos,e)}(),l.end_environment_code=Or(Or(Or(t.macro_escape_char,"end{"),e.environment_name),"}");var c=function(){var i=e;return ve(i.read_verbatim_content,i,r,n,t,l,me(a))}(),u=c[0],f=(c[1],function(){var e=r;return ve(e.make_nodelist,e,[u],me({parsing_state:t}))}());return tr([f,null])}))}}),ii=(R=i("fOdIC"),{});ue(ii,"",dn);var oi="pylatexenc.latexnodes.parsers._generalnodes",si=ve(ii.getLogger,ii,oi),_i=he("LatexGeneralNodesParser",[ei],{__module__:oi,get __init__(){return fe(this,(function(e,r,n,t,a,i,o,s,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;var l=wr();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"stop_token_condition":r=u[f];break;case"stop_nodelist_condition":n=u[f];break;case"require_stop_condition_met":t=u[f];break;case"stop_condition_message":a=u[f];break;case"make_child_parsing_state":i=u[f];break;case"handle_stop_condition_token":o=u[f];break;case"include_stop_token_pre_space_chars":s=u[f];break;case"handle_stop_data":_=u[f];break;default:l[f]=u[f]}delete l.__kwargtrans__}}ve(ve(we,null,_i,"__init__"),null,e,me(l)),e.stop_token_condition=r,e.stop_nodelist_condition=n,e.require_stop_condition_met=t,e.stop_condition_message=a,e.make_child_parsing_state=i,e.handle_stop_condition_token=o,e.handle_stop_data=_,e.include_stop_token_pre_space_chars=s}))},get make_nodes_collector(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":t=i[o]}}}return ve((s=r).make_nodes_collector,s,me({token_reader:n,parsing_state:t,stop_token_condition:e.stop_token_condition,stop_nodelist_condition:e.stop_nodelist_condition,make_child_parsing_state:e.make_child_parsing_state,include_stop_token_pre_space_chars:e.include_stop_token_pre_space_chars}));var s}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=n).cur_pos,_),c=function(){var a=e;return ve(a.make_nodes_collector,a,r,n,t)}();try{!function(){var e=c;ve(e.process_tokens,e)}()}catch(e){if(Re(e,En)){var u=e;!function(){var e=si;ve(e.debug,e,"Got parse error while reading general nodes: %r",u)}();var f=function(){var e=c;return ve(e.get_final_nodelist,e)}();Ne(null===f.pos)&&(f.pos=l),Ne(null===f.pos_end)&&(f.pos_end=l);var d=ve(jn,null,me({msg:u.msg,pos:u.pos,open_contexts:u.open_contexts,error_type_info:u.error_type_info,recovery_nodes:f,recovery_parsing_state_delta:function(){var e=c;return ve(e.get_parser_parsing_state_delta,e)}()}));throw d.__cause__=null,d}throw e}var p=function(){var e=c;return ve(e.get_final_nodelist,e)}();Ne(null===p.pos)&&(p.pos=l),Ne(null===p.pos_end)&&(p.pos_end=l);var g=function(){var e=c;return ve(e.stop_token_condition_met,e)}(),h=function(){var e=c;return ve(e.stop_nodelist_condition_met,e)}();if(Ne(!Ne(e.require_stop_condition_met)))var v=!0;else{v=!1;if(Ne(null!==e.stop_token_condition)){if(Ne(g))v=!0}else if(Ne(null!==e.stop_nodelist_condition)){if(Ne(h))v=!0}else v=!0}if(function(){var r=si;ve(r.debug,r,"finished parsing general nodes; self.require_stop_condition_met=%r, stop_token_condition=%r, stop_token_condition_met=%r, stop_nodelist_condition=%r, stop_nodelist_condition_met=%r;met_a_required_stop_condition=%r",e.require_stop_condition_met,e.stop_token_condition,g,e.stop_nodelist_condition,h,v)}(),Ne(!Ne(v))){if(Ne(null===(m=e.stop_condition_message)))var m="End of stream encountered while parsing nodes without stop condition being met [reporting starting position]";var w=ve(jn,null,me({msg:m,pos:function(){var e=c;return ve(e.pos_start,e)}(),recovery_nodes:p,recovery_parsing_state_delta:function(){var e=c;return ve(e.get_parser_parsing_state_delta,e)}(),error_type_info:wr({what:"nodes_generalnodes_required_stop_condition_not_met",stop_condition_message:e.stop_condition_message})})),k=w;throw k.__cause__=null,k}if(Ne(Ne(g)&&null!==e.handle_stop_condition_token)){var y=function(){var e=c;return ve(e.stop_token_condition_met_token,e)}();Ne(null!==y)&&function(){var a=e;ve(a.handle_stop_condition_token,a,y,me({latex_walker:r,token_reader:n,parsing_state:t}))}()}var b=function(){var e=c;return ve(e.stop_condition_stop_data,e)}();Ne(Ne(null!==b)&&null!==e.handle_stop_data)&&function(){var a=e;ve(a.handle_stop_data,a,b,me({latex_walker:r,token_reader:n,parsing_state:t}))}();var x=p,O=function(){var e=c;return ve(e.get_parser_parsing_state_delta,e)}();return function(){var e=si;ve(e.debug,e,"parser - we got final nodelist - %r",x)}(),tr([x,O])}))}}),li=he("LatexSingleNodeParser",[_i],{__module__:oi,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"stop_on_comment":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,li,"__init__"),null,e,me(xe({stop_nodelist_condition:e._stop_nodelist_condition,require_stop_condition_met:!1},n))),e.stop_on_comment=r}))},get _stop_nodelist_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"nodelist":r=t[a]}}}var i=r;if(Ne(!Ne(e.stop_on_comment)))i=function(){for(var e,r=[],n=i,t=0;t<je(n);t++){var a=qr(n,t);Ne(!Ne((e=void 0,e=a,ve(e.isNodeType,e,Un))))&&ve(r.append,r,a)}return r}();return!!Ne(Ir(ve(je,null,i),1))}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!1}))}}),ci={};ue(ci,"",dn);var ui="pylatexenc.latexnodes.parsers._delimited",fi=ve(ci.getLogger,ci,ui),di=ir,pi=he("LatexDelimitedExpressionParserOpeningDelimiterNotFound",[Ur],{__module__:ui,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"first_tokens":r=i[o];break;case"msg":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,pi,"__init__"),null,e,me(t)),e.first_tokens=r,e.msg=n}))}}),gi=he("LatexDelimitedExpressionParserInfo",[ge],{__module__:ui,get get_group_parsing_state(){return de(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"cls":e=o[s];break;case"parsing_state":r=o[s];break;case"delimiters":n=o[s];break;case"delimited_expression_parser":t=o[s];break;case"latex_walker":a=o[s]}}}return r}))},get get_acceptable_open_delimiter_list(){return de(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"cls":e=o[s];break;case"delimiters":r=o[s];break;case"group_parsing_state":n=o[s];break;case"delimited_expression_parser":t=o[s];break;case"latex_walker":a=o[s]}}}return[]}))},get parse_initial(){return de(this,(function(e,r,n,t,a,i,o){if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"cls":e=_[l];break;case"delimiters":r=_[l];break;case"allow_pre_space":n=_[l];break;case"latex_walker":t=_[l];break;case"token_reader":a=_[l];break;case"group_parsing_state":i=_[l];break;case"delimited_expression_parser":o=_[l]}}}var c,u=ve((c=a).next_token,c,me({parsing_state:i})),f=!0;if(Ne(Ne(!Ne(n))&&u.pre_space))f=!1;else if(Ne(!Ne(function(){var n=e;return ve(n.is_opening_delimiter,n,me({delimiters:r,first_token:u,group_parsing_state:i,delimited_expression_parser:o,latex_walker:t}))}())))f=!1;if(Ne(!Ne(f))){var d=function(){var n=e;return ve(n.get_acceptable_open_delimiter_list,n,me({delimiters:r,group_parsing_state:i,delimited_expression_parser:o,latex_walker:t}))}();if(Ne(!Ne(d)))var p="??";else p=ve(", ".join,", ",function(){for(var e,r=[],n=d,t=0;t<je(n);t++){var a=qr(n,t);e=void 0,ve(r.append,r,ve((e="‘{}’").format,e,a))}return r}());var g=ve(pi,null,me({msg:function(){var e="Expected an opening LaTeX delimiter ({}), got {}/‘{}’{}";return ve(e.format,e,p,u.tok,u.arg,Ne(u.pre_space)?" with leading whitespace":"")}(),first_tokens:[u]}));throw g.__cause__=null,g}return[u]}))},get is_opening_delimiter(){return de(this,(function(e,r,n,t,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"cls":e=s[_];break;case"delimiters":r=s[_];break;case"first_token":n=s[_];break;case"group_parsing_state":t=s[_];break;case"delimited_expression_parser":a=s[_];break;case"latex_walker":i=s[_]}}}var l=ve(RuntimeError,null,"Subclasses must reimplement is_opening_delimiter()");throw l.__cause__=null,l}))},get check_opening_delimiter(){return de(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"cls":e=i[o];break;case"delimiters":r=i[o];break;case"parsed_opening_delimiter":n=i[o];break;case"latex_walker":t=i[o]}}}if(Ne(null===r))return!0;if(Ne(ve(Re,null,r,di)))var s=r;else s=qr(r,0);return!Ne(Lr(n,s))}))},get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"delimited_expression_parser":r=_[l];break;case"opening_delimiter_tokens":n=_[l];break;case"group_parsing_state":t=_[l];break;case"parsing_state":a=_[l];break;case"delimiters":i=_[l];break;case"latex_walker":o=_[l]}}}ve(ve(we,null,gi,"__init__"),null,e),e.delimited_expression_parser=r,e.opening_delimiter_tokens=n,Ne(n)?e.first_token=qr(n,0):e.first_token=null,e.group_parsing_state=t,e.parsing_state=a,e.delimiters=i,e.latex_walker=o,e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=tr([null,null])}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=ve((a=e).get_parsed_delimiters,a)}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}var i=ve(RuntimeError,null,"Subclasses must reimplement stop_token_condition()");throw i.__cause__=null,i}))},get handle_stop_condition_token(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"token":r=o[s];break;case"latex_walker":n=o[s];break;case"token_reader":t=o[s];break;case"parsing_state":a=o[s]}}}var _;ve((_=t).move_past_token,_,r),function(){var e=fi;ve(e.debug,e,"LatexDelimitedExpressionParser moved token reader past token %r",r)}()}))},get make_child_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"node_class":n=a[i]}}}return Ne(null!==e.child_parsing_state_delta)?(ve((o=fi).debug,o,"Requested child parsing state, applying delta %r",e.child_parsing_state_delta),ve(ht,null,e.group_parsing_state,e.child_parsing_state_delta,e.latex_walker)):(function(){var e=fi;ve(e.debug,e,"Requested child parsing state, keeping default %r",r)}(),r);var o}))},get get_matching_delimiter(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"opening_delimiter":r=t[a]}}}return r}))},get get_parsed_delimiters(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=e.first_token;if(Ne(null===(o=e.delimiters)))var o=i.arg;if(Ne(ve(Re,null,o,di))){var s=o,_=ve((a=e).get_matching_delimiter,a,s);return tr([s,_])}return o}))},get make_content_parser(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":r=a[i];break;case"token_reader":n=a[i]}}}if(Ne(qr(e.parsed_delimiters,1)))var o=ve((s="matching ‘{}’").format,s,qr(e.parsed_delimiters,1));else o="matching closing delimiter";var s;return ve(_i,null,me({make_child_parsing_state:e.make_child_parsing_state,stop_token_condition:e.stop_token_condition,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:function(){var r="Expected {} after ‘{}’";return ve(r.format,r,o,qr(e.parsed_delimiters,0))}()}))}))},get get_open_context_description(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return tr([(a="Delimited expression ‘{}…{}’",ve.apply(void 0,[a.format,a].concat((0,R.default)(e.parsed_delimiters)))),e.first_token]);var a}))},get make_group_node_and_parsing_state_delta(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"nodelist":t=o[s];break;case"parsing_state_delta":a=o[s]}}}var _,l=ve((_=n).cur_pos,_),c=function(){var n=r;return ve(n.make_node,n,Bn,me({nodelist:t,parsing_state:e.group_parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return tr([c,a])}))}}),hi=he("LatexDelimitedExpressionParser",[ei],{__module__:ui,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;var o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"delimiters":r=_[l];break;case"delimited_expression_parser_info_class":n=_[l];break;case"optional":t=_[l];break;case"allow_pre_space":a=_[l];break;case"discard_parsing_state_delta":i=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}ve(ve(we,null,hi,"__init__"),null,e,me(o)),e.delimiters=r,e.optional=t,e.allow_pre_space=a,e.discard_parsing_state_delta=i,e.delimited_expression_parser_info_class=n}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.optional}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=e.delimited_expression_parser_info_class).get_group_parsing_state,_,me({parsing_state:t,delimiters:e.delimiters,delimited_expression_parser:e,latex_walker:r})),c=null;try{c=function(){var t=e.delimited_expression_parser_info_class;return ve(t.parse_initial,t,me({delimiters:e.delimiters,allow_pre_space:e.allow_pre_space,latex_walker:r,token_reader:n,group_parsing_state:l,delimited_expression_parser:e}))}()}catch(t){if(Re(t,pi)){var u=t,f=null;if(Ne(Ne(null!==u.first_tokens)&&ve(je,null,u.first_tokens)))f=qr(u.first_tokens,0);if(Ne(e.optional))return Ne(Ne(null!==u.first_tokens)&&ve(je,null,u.first_tokens))&&function(){var e=n;ve(e.move_to_token,e,f)}(),tr([null,null]);var d=null;if(Ne(null!==f))d=f;var p=ve(jn,null,me({msg:u.msg,pos:d,recovery_nodes:function(){var e=r;return ve(e.make_nodelist,e,[],me({parsing_state:l,pos:f.pos,pos_end:f.pos}))}(),recovery_at_token:f,error_type_info:wr({what:"nodes_delimited_expected_opening_delimiter_not_found",first_tokens:u.first_tokens})}));throw p.__cause__=null,p}throw t}var g=function(){var n=e;return ve(n.delimited_expression_parser_info_class,n,e,me({opening_delimiter_tokens:c,group_parsing_state:l,parsing_state:t,delimiters:e.delimiters,latex_walker:r}))}();!function(){var e=g;ve(e.initialize,e)}();var h=function(){var e=g;return ve(e.make_content_parser,e,r,n)}(),v=function(){var e,t=r;return ve(t.parse_content,t,h,me({token_reader:n,parsing_state:g.contents_parsing_state,open_context:(e=g,ve(e.get_open_context_description,e))}))}(),m=v[0],w=v[1];if(Ne(Ne(e.discard_parsing_state_delta)&&null!==w)){!function(){var e=fi;ve(e.debug,e,"Discarding parsing state changes after delimited expression: %r",w)}();w=null}v=function(){var e=g;return ve(e.make_group_node_and_parsing_state_delta,e,me({latex_walker:r,token_reader:n,nodelist:m,parsing_state_delta:w}))}();var k=v[0];return tr([k,w=v[1]])}))}}),vi=he("LatexDelimitedGroupParserInfo",[gi],{__module__:ui,get get_group_parsing_state(){return de(this,(function(e,r,n,t,a){var i,o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"cls":e=_[l];break;case"parsing_state":r=_[l];break;case"delimiters":n=_[l];break;case"delimited_expression_parser":t=_[l];break;case"latex_walker":a=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}if(Ne(null===n))return r;if(Ne(ve(Re,null,n,di))){if(Ne(!Ce(n,r._latex_group_delimchars_by_open))){var c=ve(Hr,null,ve((i="Delimiter ‘{}’ not a valid latex group delimiter ({!r})").format,i,n,r.latex_group_delimiters));throw c.__cause__=null,c}return r}for(var u=ve(tr,null,n),f=r.latex_group_delimiters,d=0;d<je(f);d++){var p=qr(f,d);if(Ne(Cr(u,p)))return r}return function(){var e=r;return ve(e.sub_context,e,me({latex_group_delimiters:Or(r.latex_group_delimiters,[u])}))}()}))},get get_acceptable_open_delimiter_list(){return de(this,(function(e,r,n,t,a){var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"cls":e=s[_];break;case"delimiters":r=s[_];break;case"group_parsing_state":n=s[_];break;case"delimited_expression_parser":t=s[_];break;case"latex_walker":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}return Ne(null!==r)?Ne(ve(Re,null,r,di))?[r]:[qr(r,0)]:function(){for(var e=[],r=n.latex_group_delimiters,t=0;t<je(r);t++){var a=qr(r,t),i=a[0];a[1];ve(e.append,e,i)}return e}()}))},get is_opening_delimiter(){return de(this,(function(e,r,n,t,a,i){var o,s=wr();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"cls":e=l[c];break;case"delimiters":r=l[c];break;case"first_token":n=l[c];break;case"group_parsing_state":t=l[c];break;case"delimited_expression_parser":a=l[c];break;case"latex_walker":i=l[c];break;default:s[c]=l[c]}delete s.__kwargtrans__}}return!Ne(Lr(n.tok,"brace_open"))&&!Ne(!Ne((o=e,ve(o.check_opening_delimiter,o,me({delimiters:r,parsed_opening_delimiter:n.arg,latex_walker:i})))))}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return!!Ne(Ne(Cr(r.tok,"brace_close"))&&Cr(r.arg,qr(e.parsed_delimiters,1)))&&(ve((i=fi).debug,i,"LatexDelimitedGroupParser encountered the expected closing brace %r",r),!0);var i}))},get get_matching_delimiter(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"opening_delimiter":r=t[a]}}}return qr(e.group_parsing_state._latex_group_delimchars_by_open,r)}))}}),mi=he("LatexDelimitedGroupParser",[hi],{__module__:ui,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=vi;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"delimiters":r=i[o];break;case"delimited_expression_parser_info_class":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,mi,"__init__"),null,e,me(xe({delimiters:r,delimited_expression_parser_info_class:n},t)))}))}}),wi={};ue(wi,"",dn);var ki="pylatexenc.latexnodes.parsers._expression",yi=ve(wi.getLogger,wi,ki),bi=he("_TryAgainWithSkippedCommentNodes",[Ur],{__module__:ki,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"skipped_comment_nodes":r=a[i];break;case"pos":n=a[i]}}}ve(ve(we,null,bi,"__init__"),null,e,"<internal>"),e.skipped_comment_nodes=r,e.pos=n}))}}),xi=he("LatexExpressionParser",[ei],{__module__:ki,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"include_skipped_comments":r=i[o];break;case"single_token_requiring_arg_is_error":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,xi,"__init__"),null,e,me(t)),e.include_skipped_comments=r,e.single_token_requiring_arg_is_error=n}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!1}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}for(var _,l=ve((_=t).sub_context,_,me({enable_environments:!1})),c=[];Ne(!0);){try{var u=function(){var i=e;return ve(i._parse_single_token,i,r,n,l,me(xe({parsing_state:t},a)))}()}catch(e){if(Re(e,bi)){var f=e;c=ve(Tr,null,c,f.skipped_comment_nodes);continue}throw e}if(Ne(!Ne(c=ve(Tr,null,c,u))))var d=function(){var e,t=r;return ve(t.make_nodelist,t,[],me({pos:(e=n,ve(e.cur_pos,e)),pos_end:function(){var e=n;return ve(e.cur_pos,e)}()}))}();else if(Ne(Cr(ve(je,null,c),1)))d=qr(c,0);else{var p=function(){var e=r;return ve(e.make_nodelist,e,c)}();d=function(){var e=r;return ve(e.make_node,e,Bn,me({parsing_state:t,nodelist:p,delimiters:tr(["",""]),pos:p.pos,pos_end:p.pos_end}))}()}return function(){var e=yi;ve(e.debug,e,"thenodelist = %r",d)}(),tr([d,null])}}))},get _parse_single_token(){return fe(this,(function(e,r,n,t,a){var i,o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"latex_walker":r=_[l];break;case"token_reader":n=_[l];break;case"expr_parsing_state":t=_[l];break;case"parsing_state":a=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}try{var c=ve((i=n).next_token,i,me({parsing_state:t}))}catch(e){if(!Re(e,Ln)){if(Re(e,Nn)){f=e,d=function(){var e,t=r;return ve(t.check_tolerant_parsing_ignore_error,t,ve(En,null,"End of input encountered but we expected an expression",me({pos:(e=n,ve(e.cur_pos,e)),error_type_info:wr({what:"expression_required_got_unexpected",unexpected:"end_of_stream"})})))}();if(Ne(null!==d))throw(u=d).__cause__=null,u;return[]}throw e}var u,f=e,d=function(){var e=r;return ve(e.check_tolerant_parsing_ignore_error,e,f)}();if(Ne(null!==d))throw(u=d).__cause__=null,u;c=d.recovery_token_placeholder;!function(){var e=n;ve(e.move_to_pos_chars,e,d.recovery_token_at_pos)}()}if(Ne(Cr(c.tok,"macro"))){var p=c.arg;if(Ne(Ne(e.single_token_requiring_arg_is_error)&&Ce(p,tr(["begin","end"])))){d=function(){var e,n=r;return ve(n.check_tolerant_parsing_ignore_error,n,ve(En,null,ve((e="Expected expression, got \\{}").format,e,p),me({pos:c.pos,error_type_info:wr({what:"expression_required_got_unexpected",unexpected:"beginend",beginend:p})})))}();if(Ne(null!==d)){var g=d;throw g.__cause__=null,g}return[function(){var e=r;return ve(e.make_node,e,Wn,me({parsing_state:a,macroname:p,spec:null,nodeargd:null,macro_post_space:c.post_space,pos:c.pos,pos_end:c.pos_end}))}()]}var h=function(){var e=a.latex_context;return ve(e.get_macro_spec,e,p)}(),v=function(){var n,t=e;return ve(t._check_if_requires_args,t,r,h,c,ve((n="a single macro ‘\\{}’").format,n,p))}();return[function(){var e=r;return ve(e.make_node,e,Wn,me({parsing_state:a,macroname:c.arg,spec:h,nodeargd:v,macro_post_space:c.post_space,pos:c.pos,pos_end:c.pos_end}))}()]}if(Ne(Cr(c.tok,"specials"))){var m=c.arg;v=function(){var n,t=e;return ve(t._check_if_requires_args,t,r,m,c,ve((n="specials ‘{}’").format,n,m.specials_chars))}();return[function(){var e=r;return ve(e.make_node,e,$n,me({parsing_state:a,specials_chars:m.specials_chars,spec:m,nodeargd:v,pos:c.pos,pos_end:c.pos_end}))}()]}if(Ne(Cr(c.tok,"comment"))){if(Ne(e.include_skipped_comments))var w=[function(){var e=r;return ve(e.make_node,e,Un,me({parsing_state:a,comment:c.arg,comment_post_space:c.post_space,pos:c.pos,pos_end:c.pos_end}))}()];else w=[];var k=ve(bi,null,w,c.pos);throw k.__cause__=null,k}if(Ne(Cr(c.tok,"brace_open"))){!function(){var e=n;ve(e.move_to_token,e,c)}();var y=function(){var e=r;return ve(e.parse_content,e,ve(mi,null,me({delimiters:c.arg})),me({token_reader:n,parsing_state:a}))}(),b=y[0],x=y[1];return function(){var e=yi;ve(e.debug,e,"Got groupnode = %r",b)}(),Ne(null!==x)&&function(){var e=yi;ve(e.warning,e,"Ignoring parsing_state_delta after parsing an expression group!")}(),[b]}if(Ne(Cr(c.tok,"brace_close"))){!function(){var e=n;ve(e.move_to_token,e,c)}();d=ve(jn,null,me({msg:function(){var e="Expected LaTeX expression, got closing brace ‘{}’";return ve(e.format,e,c.arg)}(),pos:c.pos,recovery_nodes:function(){var e=r;return ve(e.make_node,e,Gn,me({parsing_state:a,chars:"",pos:c.pos,pos_end:c.pos}))}(),recovery_at_token:c,error_type_info:wr({what:"expression_required_got_unexpected",unexpected:"closing_latex_group",delimiter:c.arg})}));d._error_was_unexpected_closing_brace_in_expression=!0;var O=d;throw O.__cause__=null,O}if(Ne(Cr(c.tok,"char")))return[function(){var e=r;return ve(e.make_node,e,Gn,me({parsing_state:a,chars:c.arg,pos:c.pos,pos_end:c.pos_end}))}()];if(Ne(Ce(c.tok,tr(["mathmode_inline","mathmode_display"])))){if(Ne(function(){var e=c.arg;return ve(e.startswith,e,"\\")}()))var P=function(){var e=r;return ve(e.make_node,e,Wn,me({parsing_state:a,macroname:c.arg,macro_post_space:c.post_space,pos:c.pos,pos_end:c.pos_end}))}();else P=function(){var e=r;return ve(e.make_node,e,Gn,me({parsing_state:a,chars:c.arg,pos:c.pos,pos_end:c.pos_end}))}();var E=ve(jn,null,function(){var e="Unexpected math mode delimiter ‘{}’, was expecting a LaTeX expression";return ve(e.format,e,c.arg)}(),me({pos:c.pos,recovery_nodes:P,recovery_past_token:c,error_type_info:wr({what:"expression_required_got_unexpected",unexpected:"math_mode_delimiter",mathmode_type:c.tok,delimiter:c.arg})}));throw E.__cause__=null,E}var S=ve(En,null,function(){var e="Unknown token type: ‘{}’";return ve(e.format,e,c.tok)}(),me({pos:c.pos}));throw S.__cause__=null,S}))},get _check_if_requires_args(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"spec":n=o[s];break;case"got_token":t=o[s];break;case"what_we_got":a=o[s]}}}if(Ne(e.single_token_requiring_arg_is_error)){var _=(f=ve((u=n).get_node_parser,u,t),ve(f.contents_can_be_empty,f));if(function(){var e=yi;ve(e.debug,e,"Checking if %s/‘%s’ requires an arg: %r",t.tok,t.arg,_)}(),Ne(!Ne(_))){var l=function(){var e=r;return ve(e.check_tolerant_parsing_ignore_error,e,ve(En,null,function(){var e="Expected a LaTeX expression but got {} which expects arguments; did you mean to provide an expression in {{curly braces}} ?";return ve(e.format,e,a)}(),me({pos:t.pos,error_type_info:wr({what:"expression_required_got_unexpected",unexpected:"callable_with_mandatory_arguments",callable_token:t})})))}();if(Ne(null!==l)){var c=l;throw c.__cause__=null,c}return null}}var u,f;return ve(Rn,null)}))}}),Oi="pylatexenc.latexnodes.parsers._optionals",Pi=he("LatexOptionalSquareBracketsParser",[mi],{__module__:Oi,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=tr(["[","]"]);if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"delimiters":r=i[o];break;case"optional":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Pi,"__init__"),null,e,me(xe({delimiters:r,optional:n},t)))}))}}),Ei=he("LatexOptionalCharsMarkerParser",[ei],{__module__:Oi,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;var o,s,_,l=wr();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"chars":r=u[f];break;case"following_arg_parser":n=u[f];break;case"include_chars_node_before_following_arg":t=u[f];break;case"return_none_instead_of_empty":a=u[f];break;case"allow_pre_space":i=u[f];break;default:l[f]=u[f]}delete l.__kwargtrans__}}if(ve(ve(we,null,Ei,"__init__"),null,e,me(l)),e.chars=ve(" ".join," ",(s=ve((o=r).strip,o),ve(s.py_split,s))),e.following_arg_parser=n,e.include_chars_node_before_following_arg=t,e.return_none_instead_of_empty=a,e.allow_pre_space=i,Ne(!Ne(e.chars))){var d=ve(Hr,null,ve((_="Invalid chars={!r}, needs to be non-empty string (after stripping whitespce)").format,_,r));throw d.__cause__=null,d}}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!0}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve((_=n).peek_token,_,me({parsing_state:t})),c=null,u="",f=!1,d=null;try{for(;Ne(!0);){var p=function(){var e=n;return ve(e.next_token,e,me({parsing_state:t}))}();if(Ne(null===d))if(Ne(Ne((d=p).pre_space)&&!Ne(e.allow_pre_space)))return tr([null,null]);if(Ne(Lr(p.tok,"char")))break;if(Ne(Ne(u)&&p.pre_space))var u=ve(Tr,null,u," ");if(Ne(Cr(u=ve(Tr,null,u,p.arg),e.chars))){f=!0,c=p.pos_end;break}if(Ne(!Ne(function(){var r=e.chars;return ve(r.startswith,r,u)}())))break}}finally{Ne(!Ne(f))&&function(){var e=n;ve(e.move_to_token,e,l)}()}if(Ne(!Ne(f))){if(Ne(e.return_none_instead_of_empty))return tr([null,null]);var g=function(){var e=r;return ve(e.make_nodelist,e,[],me({pos:orig_pos_token.pos,pos_end:orig_pos_token.pos,parsing_state:t}))}();return tr([g,null])}var h=[];if(Ne(e.include_chars_node_before_following_arg))h=ve(Tr,null,h,[function(){var n=r;return ve(n.make_node,n,Gn,me({parsing_state:t,chars:e.chars,pos:l.pos,pos_end:c}))}()]);var v=null;if(Ne(null!==e.following_arg_parser)){var m=function(){var a=r;return ve(a.parse_content,a,e.following_arg_parser,me({token_reader:n,parsing_state:t}))}(),w=m[0];v=m[1],h=ve(Tr,null,h,w)}h=function(){var e=r;return ve(e.make_nodelist,e,h,me({parsing_state:t}))}();return tr([h,v])}))}}),Si={};ue(Si,"",dn);var Ci="pylatexenc.latexnodes.parsers._stdarg",Li=ve(Si.getLogger,Si,Ci),ji=wr({}),Ni=function(e){var r,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("arg_spec"===i)e=a[i];else n[i]=a[i];delete n.__kwargtrans__}}if(Ne(!Ne(n)))var o=e;else{var s=wr({arg_spec:e});ve((r=s).py_update,r,n);o=ve(tr,null,ve(nr,null,function(){var e=s;return ve(e.py_items,e)}()))}if(Ne(!Ce(o,ji))){var _=ve(Ai,null,e,me(n));return zr(ji,o,_),_}return qr(ji,o)},Ai=he("LatexStandardArgumentParser",[ei],{__module__:Ci,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="{";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"arg_spec":r=s[_];break;case"include_skipped_comments":n=s[_];break;case"expression_single_token_requiring_arg_is_error":t=s[_];break;case"allow_pre_space":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}ve(ve(we,null,Ai,"__init__"),null,e,me(i)),e.arg_spec=r,e.include_skipped_comments=n,e.expression_single_token_requiring_arg_is_error=t,e.allow_pre_space=a,e._arg_parser=null}))},get get_arg_parser_instance(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"arg_spec":r=t[a]}}}if(Ne(Ce(r,tr(["m","{"]))))return ve(xi,null,me({include_skipped_comments:e.include_skipped_comments,single_token_requiring_arg_is_error:e.expression_single_token_requiring_arg_is_error}));if(Ne(Ce(r,tr(["o","["]))))return ve(mi,null,me({delimiters:tr(["[","]"]),optional:!0,allow_pre_space:e.allow_pre_space}));if(Ne(Ce(r,tr(["s","*"]))))return ve(Ei,null,me({chars:"*",allow_pre_space:e.allow_pre_space}));if(Ne(ve((l=r).startswith,l,"t"))){if(Ne(Lr(ve(je,null,r),2)))throw(c=ve(Hr,null,"arg_spec for an optional char argument should be of the form ‘t<char>’")).__cause__=null,c;var i=qr(r,1);return ve(Ei,null,me({chars:i,allow_pre_space:e.allow_pre_space}))}if(Ne(function(){var e=r;return ve(e.startswith,e,"r")}())){if(Ne(Lr(ve(je,null,r),3)))throw(c=ve(Hr,null,"arg_spec for a required delimited argument should be of the form ‘r<char1><char2>’")).__cause__=null,c;var o=qr(r,1),s=qr(r,2);return ve(mi,null,me({delimiters:tr([o,s]),optional:!1,allow_pre_space:e.allow_pre_space}))}if(Ne(function(){var e=r;return ve(e.startswith,e,"d")}())){if(Ne(Lr(ve(je,null,r),3)))throw(c=ve(Hr,null,"arg_spec for an optional delimited argument should be of the form ‘d<char1><char2>’")).__cause__=null,c;o=qr(r,1),s=qr(r,2);return ve(mi,null,me({delimiters:tr([o,s]),optional:!0,allow_pre_space:e.allow_pre_space}))}if(Ne(function(){var e=r;return ve(e.startswith,e,"v")}())){if(Ne(Cr(ve(je,null,r),1)))var _=null;else{if(!Ne(Cr(ve(je,null,r),3)))throw(c=ve(Hr,null,"arg_spec for a verbatim argument should be either ‘v’ or ‘v<char1><char2>’")).__cause__=null,c;_=tr([qr(r,1),qr(r,2)])}return ve(ti,null,me({delimiter_chars:_}))}var l,c=ve(Hr,null,function(){var e="Unknown argument specification: {!r}";return ve(e.format,e,r)}());throw c.__cause__=null,c}))},get parse(){return fe(this,(function(e,r,n,t){var a,i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"latex_walker":r=s[_];break;case"token_reader":n=s[_];break;case"parsing_state":t=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}Ne(null===e._arg_parser)&&(e._arg_parser=ve((a=e).get_arg_parser_instance,a,e.arg_spec));var l=e._arg_parser,c=function(){var e=r;return ve(e.parse_content,e,l,me(xe({token_reader:n,parsing_state:t},i)))}(),u=c[0],f=c[1];return tr([u,f])}))}}),Ii=he("LatexCharsGroupParser",[mi],{__module__:Ci,get __init__(){return fe(this,(function(e,r,n,t){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=tr(["{","}"]);if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"delimiters":r=o[s];break;case"enable_comments":n=o[s];break;case"enable_groups":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}ve(ve(we,null,Ii,"__init__"),null,e,me(xe({delimiters:r,delimited_expression_parser_info_class:Ii.CharsContentsParserInfo},a))),e.enable_comments=n,e.enable_groups=t}))},CharsContentsParserInfo:he("CharsContentsParserInfo",[vi],{__module__:Ci,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;e.contents_parsing_state=ve((a=e.group_parsing_state).sub_context,a,me({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1})),e.current_parsing_state=e.contents_parsing_state,e.parsed_delimiters=function(){var r=e;return ve(r.get_parsed_delimiters,r)}(),function(){var r=Li;ve(r.debug,r,"Initialized CharsContentsParserInfo; %r",e.__dict__)}()}))},get make_child_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"node_class":n=a[i]}}}return e.parsing_state}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}var i;return ve((i=Li).debug,i,"stop_token_condition: %r",r),!!Ne(Ne(Cr(r.tok,"brace_close"))&&Cr(r.arg,qr(e.parsed_delimiters,1)))||(!!Ne(Ne(Cr(r.tok,"char"))&&Cr(r.arg,qr(e.parsed_delimiters,1)))||null)}))}})}),Mi=he("LatexCharsCommaSeparatedListParser",[mi],{__module__:Ci,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=",";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=tr(["{","}"]);if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;var o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"comma_char":r=_[l];break;case"delimiters":n=_[l];break;case"enable_comments":t=_[l];break;case"enable_groups":a=_[l];break;case"keep_empty_parts":i=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}ve(ve(we,null,Mi,"__init__"),null,e,me(xe({delimiters:n,delimited_expression_parser_info_class:Mi.CommaSepParserInfo},o))),e.comma_char=r,e.enable_comments=t,e.enable_groups=a,e.keep_empty_parts=i}))},CommaSepParserInfo:he("CommaSepParserInfo",[vi],{__module__:Ci,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;e.comma_char=e.delimited_expression_parser.comma_char,e.contents_parsing_state=ve((a=e.group_parsing_state).sub_context,a,me({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1})),e.parsed_delimiters=function(){var r=e;return ve(r.get_parsed_delimiters,r)}(),function(){var r=Li;ve(r.debug,r,"Initialized CommaSepContentsParserInfo; %r",e.__dict__)}()}))},get make_child_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"node_class":n=a[i]}}}return e.parsing_state}))},get make_content_parser(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":r=a[i];break;case"token_reader":n=a[i]}}}return ve(Ti,null,e)}))}})}),Ti=he("_CommaSepContentCustomParser",[ei],{__module__:Ci,get __init__(){return fe(this,(function(e,r){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"contents_parser_info":r=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Ti,"__init__"),null,e,me(t)),e.contents_parser_info=r,e.main_content_parser=ve(_i,null,me({stop_token_condition:e.stop_token_condition,make_child_parsing_state:r.make_child_parsing_state,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:(n="Expected matching ‘{}’ of ‘{}’-separated group initiated by ‘{}’",ve(n.format,n,qr(r.parsed_delimiters,1),e.contents_parser_info.comma_char,qr(r.parsed_delimiters,0)))})),e.current_parsing_state=e.contents_parser_info.contents_parsing_state,e.comma_sep_arg_list=[],e.parsing_state_delta=null,e.parse_more=!0,e.pos_start=null,e.is_very_first_element=!0,e.last_element_pos_start=null,e.last_delimiter_token=null,e.last_element_pos_end=null}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}var i;return ve((i=Li).debug,i,"stop_token_condition: %r",r),!!Ne(Ne(Cr(r.tok,"brace_close"))&&Cr(r.arg,qr(e.contents_parser_info.parsed_delimiters,1)))||!!Ne(Cr(r.tok,"char"))&&(!!Ne(Cr(r.arg,qr(e.contents_parser_info.parsed_delimiters,1)))||!!Ne(Cr(r.arg,e.contents_parser_info.comma_char)))}))},get handle_stop_condition_token(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"token":r=o[s];break;case"latex_walker":n=o[s];break;case"token_reader":t=o[s];break;case"parsing_state":a=o[s]}}}var _;ve((_=t).move_past_token,_,r),Ne(Cr(r.tok,"brace_close"))?(e.last_delimiter_token=null,e.last_element_pos_end=r.pos,e.parse_more=!1):(e.last_delimiter_token=r,e.last_element_pos_end=r.pos_end,e.parse_more=!0)}))},get parse(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":t=i[o]}}}var s,_;for(ve((_=Li).debug,_,"parse_content! token pos is %r",ve((s=n).cur_pos,s)),e.pos_start=function(){var e=n;return ve(e.cur_pos,e)}(),e.parse_more=!0;Ne(e.parse_more);)!function(){var t=e;ve(t._parse_one_commasep_arg,t,r,n)}(),Ne(Ne(e.parse_more)&&null!==e.parsing_state_delta)&&(e.current_parsing_state=function(){var n=e.parsing_state_delta;return ve(n.get_updated_parsing_state,n,e.current_parsing_state,r)}());var l=function(){var n=r;return ve(n.make_nodelist,n,e.comma_sep_arg_list,me({pos:e.pos_start,pos_end:e.last_element_pos_end,parsing_state:t}))}();return tr([l,e.parsing_state_delta])}))},get _parse_one_commasep_arg(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":r=a[i];break;case"token_reader":n=a[i]}}}var o;ve((o=Li).debug,o,"_parse_one_commasep_arg()"),e.last_element_pos_start=function(){var e=n;return ve(e.cur_pos,e)}(),e.last_element_pos_end=null,e.last_delimiter_token=null;var s=function(){var t,a=r;return ve(a.parse_content,a,e.main_content_parser,me({token_reader:n,parsing_state:e.current_parsing_state,open_context:tr([(t="Element {} of list separated by ‘{}’",ve(t.format,t,ve(je,null,e.comma_sep_arg_list),e.contents_parser_info.comma_char)),e.contents_parser_info.first_token])}))}(),_=s[0],l=s[1];if(function(){var e=Li;ve(e.debug,e,"_parse_one_commasep_arg(): nodelist = %r",_)}(),Ne(null===(c=e.last_element_pos_end))){!function(){var e=Li;ve(e.debug,e,"_parse_one_commasep_arg(): STOP CONDITION DID NOT FIRE")}();var c=function(){var e=n;return ve(e.final_pos,e)}();e.parse_more=!1}if(Ne(null===e.last_delimiter_token))var u="";else u=e.last_delimiter_token.arg;var f=function(){var n=r;return ve(n.make_node,n,Bn,me({nodelist:_,parsing_state:e.current_parsing_state,delimiters:tr(["",u]),pos:e.last_element_pos_start,pos_end:c}))}(),d=!0;if(Ne(!Ne(ve(je,null,_))))if(Ne(Ne(e.is_very_first_element)&&null===e.last_delimiter_token))d=!1;else if(Ne(e.keep_empty_parts))d=!0;else d=!1;Ne(d)&&function(){var r=e.comma_sep_arg_list;ve(r.append,r,f)}(),e.parsing_state_delta=l,e.is_very_first_element=!1,function(){var r=Li;ve(r.debug,r,"_parse_one_commasep_arg(), list is now %r",e.comma_sep_arg_list)}()}))}}),Di=he("LatexTackOnInformationFieldMacrosParser",[ei],{__module__:Ci,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macronames":r=i[o];break;case"allow_multiple":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Di,"__init__"),null,e,me(t)),e.macronames=ve(ar,null,r),Ne(!1===n)?e.allow_multiple=ve(ar,null):Ne(!0===n)?e.allow_multiple=e.macronames:e.allow_multiple=ve(ar,null,n),e.expression_parser=ve(xi,null)}))},get contents_can_be_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!0}))},get get_macro_arg_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}return e.expression_parser}))},get parse(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":t=i[o]}}}for(var s,_=[],l=ve(ar,null);Ne(!0);){var c=(s=void 0,ve((s=n).peek_token_or_none,s,t));if(Ne(Ne(null===c)||Ne(Lr(c.tok,"macro"))||!Ce(c.arg,e.macronames))){!function(){var e=Li;ve(e.debug,e,"Finished parsing tack-on macro arguments")}();break}var u=c.arg,f=!1;if(function(){var e=n;ve(e.move_past_token,e,c)}(),Ne(Ne(Ce(u,l))&&!Ne(Ce(u,e.allow_multiple)))){var d=function(){var e="You cannot specify information field macro \\{} multiple times";return ve(e.format,e,u)}(),p=ve(En,null,me({msg:d,pos:c.pos,error_type_info:wr({what:"nodes_stdarg_illegal_multiple_information_field_macro",macroname:u})}));p=function(){var e=r;return ve(e.check_tolerant_parsing_ignore_error,e,p)}();if(Ne(null!==p)){var g=p;throw g.__cause__=null,g}!function(){var e=Li;ve(e.warning,e,"%s; ignoring the additional information field macros",d)}();f=!0}var h=function(){var r=e;return ve(r.get_macro_arg_parser,r,u)}(),v=function(){var e,a=r;return ve(a.parse_content,a,h,me({token_reader:n,parsing_state:t,open_context:tr([(e="Argument of information field macro \\{}",ve(e.format,e,u)),c])}))}(),m=v[0],w=v[1];if(Ne(null!==w)&&function(){var e,r=Li;ve(r.warning,r,ve((e="Parsing state delta is ignored when parsing tack-on information field macro \\{}: {}").format,e,u,w))}(),!Ne(f)){var k=function(){var e,n=r;return ve(n.make_node,n,Bn,me({parsing_state:t,delimiters:tr([Or("\\",u),""]),nodelist:(e=r,ve(e.make_nodelist,e,[m],me({parsing_state:t}))),pos:c.pos,pos_end:m.pos_end}))}();!function(){var e=_;ve(e.append,e,k)}()}}var y=function(){var e=r;return ve(e.make_nodelist,e,_,me({parsing_state:t}))}();return tr([y,null])}))}}),Ri={};ue(Ri,"",dn);var qi="pylatexenc.latexnodes.parsers._math",zi=(ve(Ri.getLogger,Ri,qi),ir),Fi=he("LatexMathParserInfo",[gi],{__module__:qi,get is_opening_delimiter(){return de(this,(function(e,r,n,t,a,i){var o,s=wr();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"cls":e=l[c];break;case"delimiters":r=l[c];break;case"first_token":n=l[c];break;case"group_parsing_state":t=l[c];break;case"delimited_expression_parser":a=l[c];break;case"latex_walker":i=l[c];break;default:s[c]=l[c]}delete s.__kwargtrans__}}return!Ne(!Ce(n.tok,tr(["mathmode_inline","mathmode_display"])))&&!Ne(!Ne((o=e,ve(o.check_opening_delimiter,o,me({delimiters:r,parsed_opening_delimiter:n.arg,latex_walker:i})))))}))},get get_acceptable_open_delimiter_list(){return de(this,(function(e,r,n,t,a){var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"cls":e=s[_];break;case"delimiters":r=s[_];break;case"group_parsing_state":n=s[_];break;case"delimited_expression_parser":t=s[_];break;case"latex_walker":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}return Ne(null!==r)?Ne(ve(Re,null,r,zi))?[r]:[qr(r,0)]:function(){for(var e=[],r=Or(n.latex_inline_math_delimiters,n.latex_display_math_delimiters),t=0;t<je(r);t++){var a=qr(r,t),i=a[0];a[1];ve(e.append,e,i)}return e}()}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;e.math_mode_type=e.first_token.tok,e.math_mode_delimiter=e.first_token.arg,e.math_parsing_state=ve(ht,null,e.parsing_state,ve(pt,null,me({math_mode_delimiter:e.math_mode_delimiter,trigger_token:e.first_token})),e.latex_walker),e.contents_parsing_state=e.math_parsing_state,e.parsed_delimiters=ve((a=e).get_parsed_delimiters,a)}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return!!Ne(Ne(Cr(r.tok,e.math_mode_type))&&Cr(r.arg,qr(e.parsed_delimiters,1)))}))},get get_matching_delimiter(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"opening_delimiter":r=t[a]}}}return qr(e.math_parsing_state._math_expecting_close_delim_info,"close_delim")}))},get make_group_node_and_parsing_state_delta(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"nodelist":t=o[s];break;case"parsing_state_delta":a=o[s]}}}var _,l=ve((_=n).cur_pos,_);if(Ne(Cr(e.math_mode_type,"mathmode_inline")))var c="inline";else if(Ne(Cr(e.math_mode_type,"mathmode_display")))c="display";else c="<unknown>";var u=function(){var n=r;return ve(n.make_node,n,Yn,me({displaytype:c,nodelist:t,parsing_state:e.parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return tr([u,a])}))}}),Gi=he("LatexMathParser",[hi],{__module__:qi,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"math_mode_delimiters":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,Gi,"__init__"),null,e,me(xe({delimiters:r,discard_parsing_state_delta:!1,delimited_expression_parser_info_class:Fi},n)))}))}}),Bi={};ue(Bi,"",dn),ue({},"",Ct);var Ui="llm.llmfragment",Wi=ve(Bi.getLogger,Bi,Ui),Vi=tr(["is_block_level","resource_info","standalone_mode","silent","what","parsing_mode"]),Hi=he("LLMFragment",[ge],{__module__:Ui,get __init__(){return fe(this,(function(e,r,n){var t,a=null,i=null,o=!1,s=!1,_="(unknown)",l=!1,c=null,u=null,f=null;if(arguments.length){var d=arguments.length-1;if(arguments[d]&&arguments[d].hasOwnProperty("__kwargtrans__")){var p=arguments[d--];for(var g in p)switch(g){case"self":e=p[g];break;case"llm_text":r=p[g];break;case"environment":n=p[g];break;case"is_block_level":a=p[g];break;case"resource_info":i=p[g];break;case"standalone_mode":o=p[g];break;case"tolerant_parsing":s=p[g];break;case"what":_=p[g];break;case"silent":l=p[g];break;case"parsing_mode":c=p[g];break;case"input_lineno_colno_offsets":u=p[g];break;case"_llm_text_if_loading_nodes":f=p[g]}}}if(e.llm_text=r,e.environment=n,e.is_block_level=a,e.resource_info=i,e.standalone_mode=o,e.tolerant_parsing=s,e.what=_,e.silent=l,e.parsing_mode=c,Ne(ve(Re,null,r,Jn)))return e.nodes=e.llm_text,e.latex_walker=e.nodes.latex_walker,void(Ne(f)?e.llm_text=f:e.llm_text=(t=e.nodes,ve(t.latex_verbatim,t)));try{var h=function(){var r=Hi;return ve(r.parse,r,e.llm_text,e.environment,me({standalone_mode:e.standalone_mode,tolerant_parsing:e.tolerant_parsing,is_block_level:e.is_block_level,what:e.what,resource_info:e.resource_info,parsing_mode:e.parsing_mode,input_lineno_colno_offsets:u}))}();e.latex_walker=h[0],e.nodes=h[1]}catch(r){if(Re(r,fn.LatexWalkerParseError)){var v=r;if(Ne(!Ne(e.silent))){var m=function(){var r=e.environment;return ve(r.get_parse_error_message,r,v)}();!function(){var r=Wi;ve(r.error,r,"Parse error in latex-like markup ‘{}’: {}\nGiven text was:\n‘{}’\n\n".format(e.what,m,e.llm_text))}()}throw r.__cause__=null,r}if(Re(r,Ur)){v=r;throw Ne(!Ne(e.silent))&&function(){var r=Wi;ve(r.error,r,"Error parsing latex-like markup ‘{}’: {}\nGiven text was:\n‘{}’\n\n".format(e.what,v,e.llm_text))}(),r.__cause__=null,r}throw r}}))},_attribute_fields:Vi,_fields:ve(tr,null,Or(["nodes"],ve(nr,null,Vi))),get _attributes(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}var i,o=function(){for(var r=[],n=e._attribute_fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}();return ve((i=o).py_update,i,r),o}))},get render(){return fe(this,(function(e,r){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"render_context":r=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}return ve((n=r.fragment_renderer).render_fragment,n,e,r,me(t))}))},get render_standalone(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"fragment_renderer":r=t[a]}}}if(Ne(!Ne(e.standalone_mode))){var i=ve(Hr,null,"You can only use render_standalone() on a fragment that was parsed in standalone mode (use `standalone_mode=True` in the LLMFragment constructor)");throw i.__cause__=null,i}var o,s=ve(Ka,null,me({fragment_renderer:r}));return ve((o=e).render,o,s)}))},get parse(){return de(this,(function(e,r,n){var t=!1,a=null,i=null,o=null,s=null,_=null,l=null;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"cls":e=u[f];break;case"llm_text":r=u[f];break;case"environment":n=u[f];break;case"standalone_mode":t=u[f];break;case"tolerant_parsing":a=u[f];break;case"is_block_level":i=u[f];break;case"parsing_mode":o=u[f];break;case"resource_info":s=u[f];break;case"what":_=u[f];break;case"input_lineno_colno_offsets":l=u[f]}}}var d,p=ve((d=n).make_latex_walker,d,r,me({is_block_level:i,parsing_mode:o,resource_info:s,standalone_mode:t,tolerant_parsing:a,what:_,input_lineno_colno_offsets:l})),g=function(){var e=p;return ve(e.parse_content,e,ve(Qa.LatexGeneralNodesParser,Qa))}(),h=g[0];g[1];return tr([p,h])}))},get start_node_visitor(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node_visitor":r=t[a]}}}var i;ve((i=r).start,i,e.nodes)}))},get is_empty(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Cr(ve(je,null,ve((a=e.llm_text).strip,a)),0);var a}))},get __bool__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return!Ne((a=e,ve(a.is_empty,a)));var a}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(Ar(ve(je,null,a=e.llm_text),50)))var a=Or(Fr(a,0,49,1),"…");return"<{} {}>".format(e.__class__.__name__,a)}))},get whitespace_stripped(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i,o=ve((i=e.environment).make_fragment,i,ve((a=e.llm_text).strip,a),me(function(){var r=e;return ve(r._attributes,r,me({what:"{}:whitespace-stripped".format(e.what)}))}()));return o}))},get get_first_paragraph(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=ve((a=e.nodes).split_at_node,a,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)"n"===t&&(e=n[t])}}return Ne(ve((a=e).isNodeType,a,$n))&&Cr(e.specials_chars,"\n\n");var a}),me({max_split:1}));i=function(){for(var e=[],r=i,n=0;n<je(r);n++){var t=qr(r,n);Ne(Ar(ve(je,null,t),0))&&ve(e.append,e,t)}return e}();if(Ne(!Ne(i)))return e;var o=qr(i,0);return function(){var r,n=e.environment;return ve(n.make_fragment,n,me(xe({llm_text:o},ve((r=e)._attributes,r,me({what:"{}:first-paragraph".format(e.what)})))))}()}))},get truncate_to(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=" …";if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"chars":r=i[o];break;case"min_chars":n=i[o];break;case"truncation_marker":t=i[o]}}}var s,_=ve($i,null,me({chars:r,min_chars:n,truncation_marker:t})),l=ve((s=_).truncate_node_list,s,e.nodes);return function(){var n,t=e.environment;return ve(t.make_fragment,t,me(xe({llm_text:l},ve((n=e)._attributes,n,me({what:"{}:tr-{}".format(e.what,r)})))))}()}))}}),$i=he("_NodeListTruncator",[ge],{__module__:Ui,get __init__(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"chars":r=i[o];break;case"min_chars":n=i[o];break;case"truncation_marker":t=i[o]}}}ve(ve(we,null,$i,"__init__"),null,e),e.chars=r,e.min_chars=n,e.truncation_marker=t,e.count=0}))},get truncate_node_list(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"nodes":r=t[a]}}}e.count=0;var i,o=ve((i=e).collect_nodes,i,r);return Ne(null===o)?r:o}))},get collect_nodes(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"nodes":r=t[a]}}}for(var i,o=ve(er,null,r),s=0;s<je(o);s++){var _=qr(o,s),l=_[0],c=_[1],u=(i=void 0,ve((i=e).collect_node,i,c));if(Ne(null!==u)){var f=Fr(r,0,l,1);return Ne(!0!==u)&&function(){var e=f;ve(e.extend,e,[u])}(),function(){var e=r.latex_walker;return ve(e.make_nodelist,e,f,me({parsing_state:r.parsing_state}))}()}}return null}))},get collect_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Ne(ve((i=r).isNodeType,i,Bn))?function(){var n=e;return ve(n.collect_nodes_groupnode,n,r)}():Ne(function(){var e=r;return ve(e.isNodeType,e,Wn)}())?function(){var n=e;return ve(n.collect_nodes_macronode,n,r)}():Ne(function(){var e=r;return ve(e.isNodeType,e,Vn)}())?function(){var n=e;return ve(n.collect_nodes_environmentnode,n,r)}():Ne(function(){var e=r;return ve(e.isNodeType,e,$n)}())?function(){var n=e;return ve(n.collect_nodes_specialsnode,n,r)}():function(){var n=e;return ve(n.collect_nodes_simplenode,n,r)}();var i}))},get collect_nodes_groupnode(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=ve((i=e).collect_nodes,i,r.nodelist);if(Ne(null===o))return null;var s=function(){var e=r.latex_walker;return ve(e.make_node,e,Bn,me({delimiters:r.delimiters,nodelist:o,parsing_state:r.parsing_state,pos:r.pos,pos_end:r.pos_end}))}();return s}))},get collect_node_argument(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Ne(ve(Re,null,r,Jn))?ve((i=e).collect_nodes,i,r):function(){var n=e;return ve(n.collect_node,n,r)}();var i}))},get collect_nodes_macronode(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}if(Ne(ve(Se,null,r.spec,"_llm_main_text_argument"))){var i=r.spec._llm_main_text_argument,o=ve($e,null,function(){for(var e=[],n=ve(er,null,r.spec.arguments_spec_list),t=0;t<je(n);t++){var a=qr(n,t),o=a[0];Ne(Cr(a[1].argname,i))&&ve(e.append,e,o)}return He(e)}()),s=qr(r.nodeargd.argnlist,o),_=ve((u=e).collect_node_argument,u,s);if(Ne(_)){var l=Or(Or(Fr(r.nodeargd.argnlist,0,o,1),[_]),Fr(r.nodeargd.argnlist,Or(o,1),null,1));if(Ne(null!==_)){var c=function(){var e=r.latex_walker;return ve(e.make_node,e,Wn,me({macroname:r.macroname,spec:r.spec,nodeargd:ve(fn.ParsedArguments,fn,me({arguments_spec_list:r.nodeargd.arguments_spec_list,argnlist:l})),macro_post_space:r.macro_post_space,parsing_state:r.parsing_state,pos:r.pos,pos_end:r.pos_end}))}();c=function(){var e=r.spec;return ve(e.finalize_node,e,c)}();return c}}}var u;return null}))},get collect_nodes_environmentnode(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=ve((i=e).collect_nodes,i,r.nodelist);if(Ne(null===o))return null;var s=function(){var e=r.latex_walker;return ve(e.make_node,e,Vn,me({environmentname:r.environmentname,nodeargd:r.nodeargd,nodelist:o,parsing_state:r.parsing_state,pos:r.pos,pos_end:r.pos_end}))}();s=function(){var e=r.spec;return ve(e.finalize_node,e,s)}();return s}))},get collect_nodes_specialsnode(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=ve(je,null,ve((i=r).latex_verbatim,i));return!Ne(jr(o,Pr(e.chars,e.count)))||(e.count=ve(Tr,null,e.count,o),null)}))},get collect_nodes_simplenode(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=ve((i=e).estimate_simple_node_char_count,i,r);if(Ne(jr(o,Pr(e.chars,e.count))))return e.count=ve(Tr,null,e.count,o),null;if(Ne(function(){var e=r;return ve(e.isNodeType,e,Gn)}())){for(var s=r.chars,_=0,l=ve(er,null,s),c=0;c<je(l);c++){var u=qr(l,c),f=u[0],d=u[1];if(Ne(!Ne(function(){var e=d;return ve(e.isalpha,e)}())))_=f;if(Ne(Ar(Or(e.count,f),e.chars))&&Ne(Ne(null===e.min_chars)||Ir(Or(e.count,_),e.min_chars)))break}var p=Or(Fr(s,0,_,1),e.truncation_marker),g=function(){var e=r.latex_walker;return ve(e.make_node,e,Gn,me({chars:p,parsing_state:r.parsing_state,pos:r.pos,pos_end:r.pos_end}))}();return g}return!Ne(jr(e.count,e.min_chars))||r}))},get estimate_simple_node_char_count(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Ne(ve((i=r).isNodeType,i,Gn))?ve(je,null,r.chars):Ne(function(){var e=r;return ve(e.isNodeType,e,Yn)}())?xr(br(ve(je,null,function(){var e=r;return ve(e.latex_verbatim,e)}()),2),3):(Ne(function(){var e=r;return ve(e.isNodeType,e,Un)}()),0);var i}))}}),Yi={};ue(Yi,"",dn);var Xi="llm.llmdocument",Ji=ve(Yi.getLogger,Yi,Xi),Zi=he("LLMDocumentRenderContext",[Ja],{__module__:Xi,get __init__(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"doc":r=o[s];break;case"fragment_renderer":n=o[s];break;case"feature_document_managers":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}ve(ve(we,null,Zi,"__init__"),null,e,me(xe({doc:r,fragment_renderer:n},a))),e.feature_document_managers=t,e.feature_render_managers=function(){for(var r,n=[],t=e.feature_document_managers,a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];r=void 0,ve(n.append,n,Ne(Ne(null!==s)&&null!==s.RenderManager)?tr([o,(r=s,ve(r.RenderManager,r,s,e))]):tr([o,null]))}return n}(),e.feature_render_managers_by_name=ve(wr,null,e.feature_render_managers),e.is_first_pass=!0,e._delayed_render_nodes=wr({}),e._delayed_render_content=wr({})}))},get supports_feature(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return Ce(r,e.feature_render_managers_by_name)}))},get feature_render_manager(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return qr(e.feature_render_managers_by_name,r)}))},get register_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"fragment_renderer":n=a[i]}}}var o=r.node_id;return zr(e._delayed_render_nodes,o,r),o}))},get get_delayed_render_content(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i=r.node_id;return qr(e._delayed_render_content,i)}))}}),Ki=he("LLMDocument",[ge],{__module__:Xi,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"render_callback":r=s[_];break;case"environment":n=s[_];break;case"enable_features":t=s[_];break;case"feature_document_options":a=s[_];break;case"metadata":i=s[_]}}}if(ve(ve(we,null,Ki,"__init__"),null,e),e.environment=n,e.render_callback=r,e.metadata=i,Ne(null===t)?e.features=ve(nr,null,n.features):e.features=function(){for(var e,r=[],a=t,i=0;i<je(a);i++){var o=qr(a,i);e=void 0,ve(r.append,r,ve((e=n).feature,e,o))}return r}(),Ne(null===a))a=wr({});e.feature_document_options=ve(wr,null,a),e.feature_document_managers=function(){for(var r,n=[],t=e.features,a=0;a<je(t);a++){var i=qr(t,a);r=void 0,ve(n.append,n,Ne(null!==i.DocumentManager)?tr([i.feature_name,(r=i,ve(r.DocumentManager,r,i,e))]):tr([i.feature_name,null]))}return n}(),e.feature_document_managers_by_name=ve(wr,null,e.feature_document_managers)}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a,i=e.feature_document_managers,o=0;o<je(i);o++){var s=qr(i,o),_=s[0],l=s[1];if(Ne(null!==l)){var c=(a=void 0,ve((a=e.feature_document_options).py_get,a,_,wr({})));!function(){var e=l;ve(e.initialize,e,me(c))}()}}}))},get supports_feature(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return Ce(r,e.feature_document_managers_by_name)}))},get feature_document_manager(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return qr(e.feature_document_managers_by_name,r)}))},get make_render_context(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"fragment_renderer":r=a[i];break;case"feature_render_options":n=a[i]}}}var o=ve(Zi,null,e,r,e.feature_document_managers);if(Ne(null===n))n=wr({});n=ve(wr,null,n);for(var s,_=o.feature_render_managers,l=0;l<je(_);l++){var c=qr(_,l),u=c[0],f=c[1];if(Ne(null!==f)){var d=(s=void 0,ve((s=n).py_get,s,u,ve(wr,null)));!function(){var e=f;ve(e.initialize,e,me(d))}()}}return o}))},get render(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"fragment_renderer":r=a[i];break;case"feature_render_options":n=a[i]}}}var o,s=ve((o=e).make_render_context,o,r,me({feature_render_options:n})),_=function(){var r=e;return ve(r.render_callback,r,s)}();Ne(null===_)&&function(){var e=Ji;ve(e.warning,e,"The LLM document render callback function returned `None`! Did you forget a ‘return ...’ instruction?")}();for(var l=s.feature_render_managers,c=0;c<je(l);c++){(p=qr(l,c))[0];Ne(null!==(g=p[1]))&&function(){var e=g;ve(e.process,e,_)}()}for(l=function(){var e=s._delayed_render_nodes;return ve(e.py_items,e)}(),c=0;c<je(l);c++){var u=(p=qr(l,c))[0],f=p[1];zr(s._delayed_render_content,u,function(){var e=f.llm_specinfo;return ve(e.render,e,f,s)}())}if(Ne(r.supports_delayed_render_markers)){var d=function(e){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("s"===a)e=t[a]}}return function(){var n=r;return ve(n.replace_delayed_markers_with_final_values,n,e,s._delayed_render_content)}()};if(Ne(ve(Re,null,_,wr)))_=function(){for(var e,r=[],n=ve((e=_).py_items,e),t=0;t<je(n);t++){var a=qr(n,t),i=a[0],o=a[1];ve(r.append,r,[i,ve(d,null,o)])}return wr(r)}();else if(Ne(ve(Re,null,_,nr)))_=function(){for(var e=[],r=_,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,ve(d,null,t))}return e}();else _=ve(d,null,_)}else{!function(){var e=s;ve(e.set_render_pass,e,"second-pass")}();_=function(){var r=e;return ve(r.render_callback,r,s)}()}for(l=s.feature_render_managers,c=0;c<je(l);c++){var p,g;(p=qr(l,c))[0];Ne(null!==(g=p[1]))&&function(){var e=g;ve(e.postprocess,e,_)}()}return tr([_,s])}))}}),Qi=(R=i("fOdIC"),{});e(Qi,"EnvironmentSpec",(function(){return Xo})),e(Qi,"LatexArgumentsParser",(function(){return mo})),e(Qi,"SpecialsSpec",(function(){return Jo})),e(Qi,"LatexSpecialsCallParser",(function(){return oo})),e(Qi,"MacroSpec",(function(){return Yo})),e(Qi,"LatexContextDb",(function(){return Bo})),e(Qi,"ParsingStateDeltaExtendLatexContextDb",(function(){return Uo})),e(Qi,"LatexEnvironmentCallParser",(function(){return io})),e(Qi,"LatexEnvironmentBodyContentsParser",(function(){return uo})),e(Qi,"LatexMacroCallParser",(function(){return ao}));var eo={};ue(eo,"",dn);var ro="pylatexenc.macrospec._macrocallparser",no=ve(eo.getLogger,eo,ro),to=he("_LatexCallableParserBase",[ei],{__module__:ro,get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"token_call":r=_[l];break;case"spec_object":n=_[l];break;case"what":t=_[l];break;case"node_class":a=_[l];break;case"node_extra_kwargs":i=_[l];break;case"parse_body":o=_[l]}}}var c;ve(ve(we,null,to,"__init__"),null,e),ve((c=no).debug,c,"_LatexCallableParserBase, token_call=%r, spec_object=%r (%s)",r,n,t),e.token_call=r,e.spec_object=n,e.what=t,e.node_class=a,e.node_extra_kwargs=i,e.arguments_parser=e.spec_object.arguments_parser,e.parse_body=o,e.make_arguments_parsing_state_delta=e.spec_object.make_arguments_parsing_state_delta,e.make_body_parsing_state_delta=e.spec_object.make_body_parsing_state_delta,e.make_after_parsing_state_delta=e.spec_object.make_after_parsing_state_delta}))},get parse_call_arguments(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=ve(ht,null,t,ve((_=e).make_arguments_parsing_state_delta,_,me({token:e.token_call,latex_walker:r})),r),c=function(){var t=r;return ve(t.parse_content,t,e.arguments_parser,n,l,me(a))}(),u=c[0],f=c[1];return tr([u,f])}))},get make_body_parser_and_parsing_state(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"nodeargd":r=o[s];break;case"arg_parsing_state_delta":n=o[s];break;case"parsing_state":t=o[s];break;case"latex_walker":a=o[s]}}}var _=ve(RuntimeError,null,"No default implementation of make_body_parser_and_parsing_state() in base class");throw _.__cause__=null,_}))},get parse_call_body(){return fe(this,(function(e,r,n,t,a,i){var o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"nodeargd":r=_[l];break;case"arg_parsing_state_delta":n=_[l];break;case"latex_walker":t=_[l];break;case"token_reader":a=_[l];break;case"parsing_state":i=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}var c,u=(d=ve((c=e).make_body_parser_and_parsing_state,c,r,n,i,t))[0],f=d[1],d=function(){var e=t;return ve(e.parse_content,e,u,a,f,me(o))}(),p=d[0],g=d[1];return tr([p,g])}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _,l=e.token_call.pos;if(Ne(null!==e.arguments_parser))var c=(f=ve((_=e).parse_call_arguments,_,r,n,t,me(a)))[0],u=f[1];else c=(f=tr([null,null]))[0],u=f[1];if(function(){var e=no;ve(e.debug,e,"Parsed macro/env/specials arguments; nodeargd=%r, arg_parsing_state_delta=%r",c,u)}(),Ne(e.parse_body))var f=function(){var i=e;return ve(i.parse_call_body,i,c,u,r,n,t,me(a))}(),d=f[0],p=f[1];else{Ne(null!==u)&&function(){var r=no;ve(r.warning,r,"Parsing carry-over information (%r) ignored after arguments to %s!",u,e.what)}();d=null,p=null}Ne(null!==p)&&function(){var e=no;ve(e.warning,e,"Parsing carry-over information (%r) ignored after body!",p)}();var g=function(){var e=n;return ve(e.cur_pos,e)}(),h=ve(wr,null,e.node_extra_kwargs);Ne(e.parse_body)&&zr(h,"nodelist",d);var v=function(){var n=r;return ve(n.make_node,n,e.node_class,me(xe({parsing_state:t,spec:e.spec_object,nodeargd:c,pos:l,pos_end:g},h)))}(),m=(v=function(){var r=e.spec_object;return ve(r.finalize_node,r,v)}(),function(){var n=e;return ve(n.make_after_parsing_state_delta,n,me({parsed_node:v,latex_walker:r}))}());return function(){var e=no;ve(e.debug,e,"Parsed macro/env/specials call - node %r - parsing_state_delta %r",v,m)}(),tr([v,m])}))}}),ao=he("LatexMacroCallParser",[to],{__module__:ro,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_call":r=a[i];break;case"macrospec":n=a[i]}}}var o,s=r.arg,_=r.post_space;ve(ve(we,null,ao,"__init__"),null,e,me({token_call:r,spec_object:n,what:(o="macro call (\\{})",ve(o.format,o,s)),node_class:Wn,node_extra_kwargs:ve(wr,null,me({macroname:s,macro_post_space:_}))})),e.macroname=s,e.macro_post_space=_}))}}),io=he("LatexEnvironmentCallParser",[to],{__module__:ro,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_call":r=a[i];break;case"environmentspec":n=a[i]}}}var o,s=r.arg;ve(ve(we,null,io,"__init__"),null,e,me({token_call:r,spec_object:n,what:(o="environment {}{}{}",ve(o.format,o,"{",s,"}")),parse_body:!0,node_class:Vn,node_extra_kwargs:ve(wr,null,me({environmentname:s}))})),e.environmentname=s}))},get make_body_parser_and_parsing_state(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"nodeargd":r=o[s];break;case"arg_parsing_state_delta":n=o[s];break;case"parsing_state":t=o[s];break;case"latex_walker":a=o[s]}}}var _;Ne(null!==n)&&ve((_=no).warning,_,"Parsing carry-over information (%r) ignored after arguments to %s!",n,e.what);var l=function(){var t=e.spec_object;return ve(t.make_body_parser,t,e.token_call,r,n)}(),c=ve(ht,null,t,function(){var t=e;return ve(t.make_body_parsing_state_delta,t,me({token:e.token_call,nodeargd:r,arg_parsing_state_delta:n,latex_walker:a}))}(),a);return tr([l,c])}))},get _handle_stop_condition_token(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"t":r=o[s];break;case"latex_walker":n=o[s];break;case"token_reader":t=o[s];break;case"parsing_state":a=o[s]}}}var _;ve((_=t).move_past_token,_,r)}))},get _parse_body_token_stop_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"t":r=t[a]}}}return!!Ne(Ne(Cr(r.tok,"end_environment"))&&Cr(r.arg,e.environmentname))}))}}),oo=he("LatexSpecialsCallParser",[to],{__module__:ro,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_call":r=a[i];break;case"specialsspec":n=a[i]}}}var o,s=n.specials_chars;ve(ve(we,null,oo,"__init__"),null,e,me({token_call:r,spec_object:n,what:(o="specials ‘{}’",ve(o.format,o,s)),node_class:$n,node_extra_kwargs:ve(wr,null,me({specials_chars:s}))})),e.specials_chars=s}))}}),so={};ue(so,"",dn);var _o="pylatexenc.macrospec._environmentbodyparser",lo=ve(so.getLogger,so,_o),co=he("LatexEnvironmentBodyContentsParserInfo",[gi],{__module__:_o,get parse_initial(){return de(this,(function(e,r,n,t,a,i,o){if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"cls":e=_[l];break;case"delimiters":r=_[l];break;case"allow_pre_space":n=_[l];break;case"latex_walker":t=_[l];break;case"token_reader":a=_[l];break;case"group_parsing_state":i=_[l];break;case"delimited_expression_parser":o=_[l]}}}return[]}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=ve((a=e.delimited_expression_parser).get_contents_parsing_state_delta,a);e.contents_parsing_state=ve(ht,null,e.group_parsing_state,i,e.latex_walker),e.child_parsing_state_delta=function(){var r=e.delimited_expression_parser;return ve(r.get_child_parsing_state_delta,r)}(),e.parsed_delimiters=tr([function(){var r="\\begin{}{}{}";return ve(r.format,r,"{",e.delimited_expression_parser.environmentname,"}")}(),function(){var r="\\end{}{}{}";return ve(r.format,r,"{",e.delimited_expression_parser.environmentname,"}")}()]),function(){var r=lo;ve(r.debug,r,"initializing environment body contents delimited parser: environmentname=%r,parsing_state=%r, group_parsing_state=%r, contents_parsing_state=%r",e.delimited_expression_parser.environmentname,e.parsing_state,e.group_parsing_state,e.contents_parsing_state)}()}))},get get_open_context_description(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return null}))},get stop_token_condition(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return!!Ne(Ne(Cr(r.tok,"end_environment"))&&Cr(r.arg,e.delimited_expression_parser.environmentname))}))},get make_group_node_and_parsing_state_delta(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"nodelist":t=o[s];break;case"parsing_state_delta":a=o[s]}}}if(Ne(null===t)){ve((_=lo).warning,_,"environment body contents parser: parsed nodelist is None");t=function(){var n=r;return ve(n.make_nodelist,n,me({nodelist:[],parsing_state:e.contents_parsing_state}))}()}var _;return tr([t,a])}))}}),uo=he("LatexEnvironmentBodyContentsParser",[hi],{__module__:_o,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"environmentname":r=s[_];break;case"contents_parsing_state_delta":n=s[_];break;case"child_parsing_state_delta":t=s[_];break;case"discard_parsing_state_delta":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}ve(ve(we,null,uo,"__init__"),null,e,me(xe({delimiters:null,discard_parsing_state_delta:a,delimited_expression_parser_info_class:co},i))),e.environmentname=r,e.contents_parsing_state_delta=n,e.child_parsing_state_delta=t}))},get get_contents_parsing_state_delta(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.contents_parsing_state_delta}))},get get_child_parsing_state_delta(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.child_parsing_state_delta}))}}),fo={};ue(fo,"",dn);var po="pylatexenc.macrospec._argumentsparser",go=ve(fo.getLogger,fo,po),ho=ir,vo=he("LatexNoArgumentsParser",[ei],{__module__:po,get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}var _=ve(Rn,null,me({arguments_spec_list:[],argnlist:[]}));return tr([_,null])}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return e.__class__===r.__class__}))}}),mo=he("LatexArgumentsParser",[ei],{__module__:po,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}if(ve(ve(we,null,mo,"__init__"),null,e,me(n)),Ne(null===r))r=[];e.arguments_spec_list=function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,Ne(!Ne(ve(Re,null,a,Dn)))?ve(Dn,null,a):a)}return e}()}))},get parse(){return fe(this,(function(e,r,n,t){var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"latex_walker":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}for(var _,l=[],c=ve(er,null,e.arguments_spec_list),u=0;u<je(c);u++){var f=(v=qr(c,u))[0],d=v[1];_=void 0,ve((_=go).debug,_,"Parsing argument %d / %s",f,d.parser);var p=function(){var e=n;return ve(e.peek_token_or_none,e,me({parsing_state:t}))}();if(Ne(ve(Re,null,g=d.parser,ho)))var g=ve(Ni,null,g);var h=ve(ht,null,t,d.parsing_state_delta,r);!function(){var e=go;ve(e.debug,e,"Argument %d will use parsing state = %r (delta was %r)",f,h,d.parsing_state_delta)}();var v=function(){var e,t=r;return ve(t.parse_content,t,g,n,h,me({open_context:tr([(e="Argument {}",ve(e.format,e,f)),p])}))}(),m=v[0],w=v[1];Ne(null!==w)&&function(){var e=go;ve(e.warning,e,"Parsing state changes information (%r) ignored in arguments!",w)}(),function(){var e=l;ve(e.append,e,m)}()}var k=ve(Rn,null,me({arguments_spec_list:e.arguments_spec_list,argnlist:l}));return function(){var e=go;ve(e.debug,e,"Parsed arguments = %r",k)}(),tr([k,null])}))},get __eq__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}return Ne(e.__class__===r.__class__)&&Cr(e.arguments_spec_list,r.arguments_spec_list)}))}}),wo=(R=i("fOdIC"),{});e(wo,"bisect_right",(function(){return Lo})),e(wo,"LineNumbersCalculator",(function(){return jo})),e(wo,"PushPropOverride",(function(){return No})),e(wo,"pylatexenc_deprecated_ver",(function(){return Ao})),e(wo,"pylatexenc_deprecated_2",(function(){return Io})),e(wo,"pylatexenc_deprecated_3",(function(){return Mo})),e(wo,"LazyDict",(function(){return To})),e(wo,"ChainMap",(function(){return Oo}));R=i("fOdIC");var ko={};ue(ko,"",dn);var yo,bo="collections",xo=(ve(ko.getLogger,ko,bo),{}),Oo=he("ChainMap",[ge],(yo={__module__:bo,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}var a=tr([].slice.apply(arguments).slice(1,r+1))}else a=tr();e.maps=Ne(ve(nr,null,a))||[wr({})]}))},get __missing__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}}var i=ve($r,null,r);throw i.__cause__=null,i}))},get __getitem__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}}for(var i,o=e.maps,s=0;s<je(o);s++){var _=qr(o,s);if(!Ne(!Ce(r,_)))return qr(_,r)}return ve((i=e).__missing__,i,r)}))},get py_get(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"key":r=a[i];break;case"py_default":n=a[i]}}}return Ne(Ce(r,e))?qr(e,r):n}))},get __len__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(je,null,(a=ve(ar,null),ve.apply(void 0,[a.union,a].concat((0,R.default)(e.maps)))));var a}))},get __iter__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a,i,o=wr({}),s=ve(Je,null,e.maps),_=0;_<je(s);_++){var l=qr(s,_);a=void 0,i=void 0,ve((i=o).py_update,i,ve((a=wr).fromkeys,a,l))}return ve(He,null,o)}))}},Mn(yo,Symbol.iterator,(function(){return this.__iter__()})),xo.__contains__=xo.__contains__||{},xo.__contains__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}}return ve(Ke,null,function(){for(var n=[],t=e.maps,a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,Ce(r,i))}return He(n)}())}))},xo.__bool__=xo.__bool__||{},xo.__bool__.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(Ke,null,e.maps)}))},xo.__repr__=xo.__repr__||{},xo.__repr__.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{!r}({!r})").format,a,e.__class__.__name__,e.maps);var a}))},xo.fromkeys=xo.fromkeys||{},xo.fromkeys.get=function(){return de(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"cls":e=t[a];break;case"iterable":r=t[a]}}var i=tr([].slice.apply(arguments).slice(2,n+1))}else i=tr();return ve(e,null,(o=wr,ve.apply(void 0,[o.fromkeys,o,r].concat((0,R.default)(i)))));var o}))},xo.copy=xo.copy||{},xo.copy.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return i=e,ve.apply(void 0,[i.__class__,i,(a=qr(e.maps,0),ve(a.copy,a))].concat((0,R.default)(Fr(e.maps,1,null,1))));var a,i}))},Mn(yo,"__copy__",rr),xo.new_child=xo.new_child||{},xo.new_child.get=function(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"m":r=t[a]}}}if(Ne(null===r))r=wr({});return i=e,ve.apply(void 0,[i.__class__,i,r].concat((0,R.default)(e.maps)));var i}))},xo._get_parents=xo._get_parents||{},xo._get_parents.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return a=e,ve.apply(void 0,[a.__class__,a].concat((0,R.default)(Fr(e.maps,1,null,1))));var a}))},xo.__setitem__=xo.__setitem__||{},xo.__setitem__.get=function(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"key":r=a[i];break;case"value":n=a[i]}}}zr(qr(e.maps,0),r,n)}))},xo.__delitem__=xo.__delitem__||{},xo.__delitem__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}}try{qr(qr(e.maps,0),r)}catch(e){if(Re(e,$r)){var i=ve($r,null,"Key not found in the first mapping: {}".format(r));throw i.__cause__=null,i}throw e}}))},xo.py_popitem=xo.py_popitem||{},xo.py_popitem.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}try{return ve((i=qr(e.maps,0)).py_popitem,i)}catch(e){if(Re(e,$r)){var a=ve($r,null,"No keys found in the first mapping.");throw a.__cause__=null,a}throw e}var i}))},xo.py_pop=xo.py_pop||{},xo.py_pop.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}var i=tr([].slice.apply(arguments).slice(2,n+1))}else i=tr();try{return s=qr(e.maps,0),ve.apply(void 0,[s.py_pop,s,r].concat((0,R.default)(i)))}catch(e){if(Re(e,$r)){var o=ve($r,null,"Key not found in the first mapping: {}".format(r));throw o.__cause__=null,o}throw e}var s}))},xo.py_clear=xo.py_clear||{},xo.py_clear.get=function(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a;ve((a=qr(e.maps,0)).py_clear,a)}))},xo.__ior__=xo.__ior__||{},xo.__ior__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}var i;return ve((i=qr(e.maps,0)).py_update,i,r),e}))},xo.__or__=xo.__or__||{},xo.__or__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}if(Ne(!Ne(ve(Re,null,r,_collections_abc.Mapping))))return NotImplemented;var i,o=ve((i=e).copy,i);return function(){var e=qr(o.maps,0);ve(e.py_update,e,r)}(),o}))},xo.__ror__=xo.__ror__||{},xo.__ror__.get=function(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"other":r=t[a]}}}if(Ne(!Ne(ve(Re,null,r,_collections_abc.Mapping))))return NotImplemented;for(var i,o=ve(wr,null,r),s=ve(Je,null,e.maps),_=0;_<je(s);_++){var l=qr(s,_);i=void 0,ve((i=o).py_update,i,l)}return function(){var r=e;return ve(r.__class__,r,o)}()}))},In(yo,xo),yo));Object.defineProperty(Oo,"parents",ke.call(Oo,Oo._get_parents));var Po={};e(Po,"bisect_right",(function(){return Eo}));var Eo=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"a":e=t[a];break;case"x":r=t[a]}}}for(var i=0,o=ve(je,null,e),s=null;Ne(!0);){if(Ne(Ar(qr(e,i),r)))return i;if(Ne(Nr(qr(e,Pr(o,1)),r)))return o;if(Ne(Nr(Pr(o,i),2)))return Ne(Ar(qr(e,Or(i,1)),r))?Or(i,1):Or(i,2);if(Ne(Ar(qr(e,s=xr(Or(o,i),2)),r)))o=Or(s,1);else i=s}},So={};ue(So,"",Po);var Co="pylatexenc._util",Lo=So.bisect_right,jo=he("LineNumbersCalculator",[ge],{__module__:Co,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"s":r=o[s];break;case"line_number_offset":n=o[s];break;case"first_line_column_offset":t=o[s];break;case"column_offset":a=o[s]}}}ve(ve(we,null,jo,"__init__"),null,e),e.line_number_offset=n,e.first_line_column_offset=t,e.column_offset=a;var _=function(e){var r,n,t;return p(this,(function(a){switch(a.label){case 0:if(arguments.length&&arguments[r=arguments.length-1]&&arguments[r].hasOwnProperty("__kwargtrans__"))for(var i in n=arguments[r--])if("x"===i)e=n[i];return[4,0];case 1:a.sent(),t=0,a.label=2;case 2:return Ne(jr(t,ve(je,null,e)))?Ne(Cr(t=ve((o=e).find,o,"\n",t),yr(1)))?[2]:[4,t=ve(Tr,null,t,1)]:[3,4];case 3:return a.sent(),[3,2];case 4:return[2]}var o}))};e._pos_new_lines=ve(nr,null,ve(_,null,r))}))},get pos_to_lineno_colno(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"pos":r=a[i];break;case"as_dict":n=a[i]}}}if(Ne(null===r))return Ne(n)?wr({lineno:null,colno:null}):tr([null,null]);be(Ne(Ir(s=Pr(ve(Lo,null,e._pos_new_lines,r),1),0))&&jr(s,ve(je,null,e._pos_new_lines)));var o=Pr(r,qr(e._pos_new_lines,s));if(Ne(Cr(s,0)))o=ve(Tr,null,o,e.first_line_column_offset);else o=ve(Tr,null,o,e.column_offset);var s=ve(Tr,null,s,e.line_number_offset);return Ne(n)?wr({lineno:s,colno:o}):tr([s,o])}))}}),No=he("PushPropOverride",[ge],{__module__:Co,get __init__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"obj":r=i[o];break;case"propname":n=i[o];break;case"new_value":t=i[o]}}}ve(ve(we,null,No,"__init__"),null,e),e.obj=r,e.propname=n,e.new_value=t}))},get __enter__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(null!==e.new_value)&&(e.initval=ve(Ee,null,e.obj,e.propname),ve(Pe,null,e.obj,e.propname,e.new_value)),e}))},get __exit__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"py_metatype":r=i[o];break;case"value":n=i[o];break;case"traceback":t=i[o]}}}Ne(null!==e.new_value)&&ve(Pe,null,e.obj,e.propname,e.initval)}))}}),Ao=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}tr([].slice.apply(arguments).slice(0,e+1))}else tr();return null},Io=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}tr([].slice.apply(arguments).slice(0,e+1))}else tr();return null},Mo=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}tr([].slice.apply(arguments).slice(0,e+1))}else tr();return null},To=null,Do={},Ro={};ue(Ro,"",Aa),ue(Do,"",dn);var qo="pylatexenc.macrospec._latexcontextdb",zo=ve(Do.getLogger,Do,qo),Fo="__lctxdb_cat_",Go=Ro.fn_unique_object_id,Bo=he("LatexContextDb",[ge],{__module__:qo,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}ve(ve(we,null,Bo,"__init__"),null,e,me(r)),e.category_list=[],e.d=wr({}),e.frozen=!1,e.lookup_chain_maps=wr({macros:ve(wo.ChainMap,wo,wr({})),environments:ve(wo.ChainMap,wo,wr({})),specials:ve(wo.ChainMap,wo,wr({}))}),e.unknown_macro_spec=null,e.unknown_environment_spec=null,e.unknown_specials_spec=null,e._autogen_category_counter=0}))},get freeze(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.frozen=!0}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="<LatexContextDb {:#x}{}>").format,a,ve(Go,null,e),Ne(e.frozen)?"":" unfrozen");var a}))},get add_context_category(){return fe(this,(function(e,r,n,t,a,i,o,s){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=[];if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=[];if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"self":e=l[c];break;case"category":r=l[c];break;case"macros":n=l[c];break;case"environments":t=l[c];break;case"specials":a=l[c];break;case"prepend":i=l[c];break;case"insert_before":o=l[c];break;case"insert_after":s=l[c]}}}var u;if(Ne(e.frozen))throw(f=ve(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.")).__cause__=null,f;if(Ne(Ne(null!==r)&&ve((u=r).startswith,u,Fo))){var f=ve(Hr,null,function(){var e="Category name {} is unfortunately reserved for internal use";return ve(e.format,e,r)}());throw f.__cause__=null,f}if(Ne(null===r)){var d=function(){var r=e;return ve(r._get_new_autogen_category,r)}(),p=d[0];r=d[1];e._autogen_category_counter=Or(p,1)}if(Ne(Ce(r,e.category_list))){var f=ve(Hr,null,function(){var e="Category {} is already registered in the context database";return ve(e.format,e,r)}());throw f.__cause__=null,f}if(Ne(Ar(ve(je,null,function(){for(var e=[],r=tr([i,o,s]),n=0;n<je(r);n++){var t=qr(r,n);Ne(t)&&ve(e.append,e,t)}return e}()),1)))throw(f=ve(Kr,null,"add_context_category(): You may only specify one of prepend=True, insert_before=... or insert_after=...")).__cause__=null,f;var g=wr({macros:ve(wr,null,function(){for(var e=[],r=n,t=0;t<je(r);t++){var a=qr(r,t);ve(e.append,e,tr([a.macroname,a]))}return e}()),environments:ve(wr,null,function(){for(var e=[],r=t,n=0;n<je(r);n++){var a=qr(r,n);ve(e.append,e,tr([a.environmentname,a]))}return e}()),specials:ve(wr,null,function(){for(var e=[],r=a,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,tr([t.specials_chars,t]))}return e}())});if(function(){var e=zo;ve(e.debug,e,"Adding category context in db: %r",g)}(),Ne(i))var h=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"listobj":e=t[a];break;case"item":r=t[a]}}}return function(){var n=e;return ve(n.insert,n,0,r)}()};else if(Ne(o)){if(Ne(Ce(o,e.category_list)))var v=function(){var r=e.category_list;return ve(r.index,r,o)}();else v=0;h=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"listobj":e=t[a];break;case"item":r=t[a]}}}return function(){var n=e;return ve(n.insert,n,v,r)}()}}else if(Ne(s)){if(Ne(Ce(s,e.category_list)))v=Or(function(){var r=e.category_list;return ve(r.index,r,s)}(),1);else v=ve(je,null,e.category_list);h=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"listobj":e=t[a];break;case"item":r=t[a]}}}return function(){var n=e;return ve(n.insert,n,v,r)}()}}else h=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"listobj":e=t[a];break;case"item":r=t[a]}}}return function(){var n=e;return ve(n.append,n,r)}()};ve(h,null,e.category_list,r);for(var m=tr(["macros","environments","specials"]),w=0;w<je(m);w++){var k=qr(m,w);ve(h,null,qr(e.lookup_chain_maps,k).maps,qr(g,k))}zr(e.d,r,g)}))},get set_unknown_macro_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macrospec":r=t[a]}}}if(Ne(e.frozen)){var i=ve(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw i.__cause__=null,i}e.unknown_macro_spec=r}))},get set_unknown_environment_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"environmentspec":r=t[a]}}}if(Ne(e.frozen)){var i=ve(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw i.__cause__=null,i}e.unknown_environment_spec=r}))},get set_unknown_specials_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"specialsspec":r=t[a]}}}if(Ne(e.frozen)){var i=ve(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw i.__cause__=null,i}e.unknown_specials_spec=r}))},get categories(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(nr,null,e.category_list)}))},get get_macro_spec(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":r=a[i];break;case"raise_if_not_found":n=a[i]}}}try{return qr(qr(e.lookup_chain_maps,"macros"),r)}catch(r){if(Re(r,$r)){if(Ne(n))throw r.__cause__=null,r;return e.unknown_macro_spec}throw r}}))},get get_environment_spec(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":r=a[i];break;case"raise_if_not_found":n=a[i]}}}try{return qr(qr(e.lookup_chain_maps,"environments"),r)}catch(r){if(Re(r,$r)){if(Ne(n))throw r.__cause__=null,r;return e.unknown_environment_spec}throw r}}))},get get_specials_spec(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":r=a[i];break;case"raise_if_not_found":n=a[i]}}}try{return qr(qr(e.lookup_chain_maps,"specials"),r)}catch(r){if(Re(r,$r)){if(Ne(n))throw r.__cause__=null,r;return e.unknown_specials_spec}throw r}}))},get test_for_specials(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":r=i[o];break;case"pos":n=i[o];break;case"parsing_state":t=i[o]}}}var s,_=0,l=null;ve((s=zo).debug,s,"test_for_specials() category_list=%r",e.category_list);for(var c=e.category_list,u=0;u<je(c);u++)for(var f=qr(c,u),d=function(){var r=qr(qr(e.d,f),"specials");return ve(r.py_keys,r)}(),p=0;p<je(d);p++){var g=qr(d,p);if(function(){var e=zo;ve(e.debug,e,"test_for_specials() ‘%s...’ testing %r",Fr(r,n,Or(n,4),1),g)}(),Ne(Ne(Ar(ve(je,null,g),_))&&function(){var e=r;return ve(e.startswith,e,g,n)}()))l=qr(qr(qr(e.d,f),"specials"),g),_=ve(je,null,g)}return l}))},get iter_macro_specs(){return fe(this,(function(e,r){var n,t,a,i,o,s,_,l;return p(this,(function(c){switch(c.label){case 0:if((void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))&&(r=null),arguments.length&&arguments[n=arguments.length-1]&&arguments[n].hasOwnProperty("__kwargtrans__"))for(var u in t=arguments[n--])switch(u){case"self":e=t[u];break;case"categories":r=t[u]}Ne(null===r)&&(r=e.category_list),a=r,i=0,c.label=1;case 1:if(!(i<je(a)))return[3,6];if(Ne(!Ce(o=qr(a,i),e.category_list)))throw(s=ve(Hr,null,ve((f="Invalid latex macro spec db category: {!r} (Expected one of {!r})").format,f,o,e.category_list))).__cause__=null,s;_=function(){var r=qr(qr(e.d,o),"macros");return ve(r.py_values,r)}(),l=0,c.label=2;case 2:return l<je(_)?[4,qr(_,l)]:[3,5];case 3:c.sent(),c.label=4;case 4:return l++,[3,2];case 5:return i++,[3,1];case 6:return[2]}var f}))}))},get iter_environment_specs(){return fe(this,(function(e,r){var n,t,a,i,o,s,_,l;return p(this,(function(c){switch(c.label){case 0:if((void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))&&(r=null),arguments.length&&arguments[n=arguments.length-1]&&arguments[n].hasOwnProperty("__kwargtrans__"))for(var u in t=arguments[n--])switch(u){case"self":e=t[u];break;case"categories":r=t[u]}Ne(null===r)&&(r=e.category_list),a=r,i=0,c.label=1;case 1:if(!(i<je(a)))return[3,6];if(Ne(!Ce(o=qr(a,i),e.category_list)))throw(s=ve(Hr,null,ve((f="Invalid latex environment spec db category: {!r} (Expected one of {!r})").format,f,o,e.category_list))).__cause__=null,s;_=function(){var r=qr(qr(e.d,o),"environments");return ve(r.py_values,r)}(),l=0,c.label=2;case 2:return l<je(_)?[4,qr(_,l)]:[3,5];case 3:c.sent(),c.label=4;case 4:return l++,[3,2];case 5:return i++,[3,1];case 6:return[2]}var f}))}))},get iter_specials_specs(){return fe(this,(function(e,r){var n,t,a,i,o,s,_,l;return p(this,(function(c){switch(c.label){case 0:if((void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))&&(r=null),arguments.length&&arguments[n=arguments.length-1]&&arguments[n].hasOwnProperty("__kwargtrans__"))for(var u in t=arguments[n--])switch(u){case"self":e=t[u];break;case"categories":r=t[u]}Ne(null===r)&&(r=e.category_list),a=r,i=0,c.label=1;case 1:if(!(i<je(a)))return[3,6];if(Ne(!Ce(o=qr(a,i),e.category_list)))throw(s=ve(Hr,null,ve((f="Invalid latex environment spec db category: {!r} (Expected one of {!r})").format,f,o,e.category_list))).__cause__=null,s;_=function(){var r=qr(qr(e.d,o),"specials");return ve(r.py_values,r)}(),l=0,c.label=2;case 2:return l<je(_)?[4,qr(_,l)]:[3,5];case 3:c.sent(),c.label=4;case 4:return l++,[3,2];case 5:return i++,[3,1];case 6:return[2]}var f}))}))},get filter_context(){return fe(this,(function(e){var r,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("self"===i)e=a[i];else n[i]=a[i];delete n.__kwargtrans__}var o=tr([].slice.apply(arguments).slice(1,t+1))}else o=tr();return ve(wo.pylatexenc_deprecated_3,wo,"`LatexContextDb.filter_context()` was renamed to `filtered_context()`."),r=e,ve.apply(void 0,[r.filtered_context,r].concat((0,R.default)(o),[me(n)]))}))},get filtered_context(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=[];if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"keep_categories":r=o[s];break;case"exclude_categories":n=o[s];break;case"keep_which":t=o[s];break;case"create_class":a=o[s]}}}if(Ne(null===a))a=e.__class__;var _=ve(a,null);_.unknown_macro_spec=e.unknown_macro_spec,_.unknown_environment_spec=e.unknown_environment_spec,_.unknown_specials_spec=e.unknown_specials_spec;for(var l,c,u=Ne(!Ne(t))||Ce("macros",t),f=Ne(!Ne(t))||Ce("environments",t),d=Ne(!Ne(t))||Ce("specials",t),p=e.category_list,g=0;g<je(p);g++){var h=qr(p,g);Ne(Ne(r)&&!Ce(h,r))||(Ne(Ne(n)&&Ce(h,n))||(l=void 0,c=void 0,ve((c=_).add_context_category,c,h,me({macros:Ne(u)?(l=qr(qr(e.d,h),"macros"),ve(l.py_values,l)):[],environments:Ne(f)?function(){var r=qr(qr(e.d,h),"environments");return ve(r.py_values,r)}():[],specials:Ne(d)?function(){var r=qr(qr(e.d,h),"specials");return ve(r.py_values,r)}():[]}))))}return _}))},get _get_new_autogen_category(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(;Ne(!0);){var a=Or(Fo,ve(ir,null,e._autogen_category_counter));if(Ne(!Ce(a,e.category_list)))break;e._autogen_category_counter=ve(Tr,null,e._autogen_category_counter,1)}return tr([e._autogen_category_counter,a])}))},get extended_with(){return fe(this,(function(e,r,n,t,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o,s=wr();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var l=arguments[_--];for(var c in l)switch(c){case"self":e=l[c];break;case"category":r=l[c];break;case"macros":n=l[c];break;case"environments":t=l[c];break;case"specials":a=l[c];break;case"create_class":i=l[c];break;default:s[c]=l[c]}delete s.__kwargtrans__}}if(Ne(Ce(r,e.category_list)))throw(o=Hr).__cause__=null,o;if(Ne(!Ne(e.frozen)))throw(o=ve(RuntimeError,null,"You can only call extended_with() on frozen objects, because extended objects keep references to the original objects' data")).__cause__=null,o;if(Ne(null===i))i=e.__class__;var u,f=ve(i,null);if(f.unknown_macro_spec=ve((u=s).py_pop,u,"unknown_macro_spec",e.unknown_macro_spec),f.unknown_environment_spec=function(){var r=s;return ve(r.py_pop,r,"unknown_environment_spec",e.unknown_environment_spec)}(),f.unknown_specials_spec=function(){var r=s;return ve(r.py_pop,r,"unknown_specials_spec",e.unknown_specials_spec)}(),Ne(null===n))n=[];if(Ne(null===t))t=[];if(Ne(null===a))a=[];var d=wr({macros:ve(wr,null,function(){for(var e=[],r=n,t=0;t<je(r);t++){var a=qr(r,t);ve(e.append,e,tr([a.macroname,a]))}return e}()),environments:ve(wr,null,function(){for(var e=[],r=t,n=0;n<je(r);n++){var a=qr(r,n);ve(e.append,e,tr([a.environmentname,a]))}return e}()),specials:ve(wr,null,function(){for(var e=[],r=a,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,tr([t.specials_chars,t]))}return e}())});if(f.category_list=e.category_list,Ne(Ne(null===r)&&Ne(Ar(ve(je,null,e.category_list),0))&&function(){var r=qr(e.category_list,0);return ve(r.startswith,r,Fo)}())){var p,g=qr(e.category_list,0),h=qr(p=ve(wr,null,e.d),g);h=ve(wr,null,me({macros:ve(wr,null,qr(h,"macros")),environments:ve(wr,null,qr(h,"environments")),specials:ve(wr,null,qr(h,"specials"))}));return function(){var e=qr(h,"macros");ve(e.py_update,e,qr(d,"macros"))}(),function(){var e=qr(h,"environments");ve(e.py_update,e,qr(d,"environments"))}(),function(){var e=qr(h,"specials");ve(e.py_update,e,qr(d,"specials"))}(),zr(p,g,h),f.d=p,f.lookup_chain_maps=wr({macros:function(){var r=wo;return ve.apply(void 0,[r.ChainMap,r,qr(h,"macros")].concat((0,R.default)(Fr(qr(e.lookup_chain_maps,"macros").maps,1,null,1))))}(),environments:function(){var r=wo;return ve.apply(void 0,[r.ChainMap,r,qr(h,"environments")].concat((0,R.default)(Fr(qr(e.lookup_chain_maps,"environments").maps,1,null,1))))}(),specials:function(){var r=wo;return ve.apply(void 0,[r.ChainMap,r,qr(h,"specials")].concat((0,R.default)(Fr(qr(e.lookup_chain_maps,"specials").maps,1,null,1))))}()}),f._autogen_category_counter=e._autogen_category_counter,f.frozen=!0,function(){var r=zo;ve(r.debug,r,"Latex Context DB %r ---\x3e extended with %r [extend auto-cat %s] ---\x3e %r",e,function(){for(var e,r,n=[],t=ve((e=d).py_items,e),a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];r=void 0,ve(n.append,n,[o,ve(nr,null,(r=s,ve(r.py_keys,r)))])}return wr(n)}(),g,f)}(),f}if(Ne(null===r)){var v=function(){var r=e;return ve(r._get_new_autogen_category,r)}(),m=v[0];r=v[1];f._autogen_category_counter=Or(m,1)}else f._autogen_category_counter=e._autogen_category_counter;return zr(p=ve(wr,null,e.d),r,d),f.category_list=Or([r],e.category_list),f.d=p,f.lookup_chain_maps=wr({macros:function(){var r=qr(e.lookup_chain_maps,"macros");return ve(r.new_child,r,qr(d,"macros"))}(),environments:function(){var r=qr(e.lookup_chain_maps,"environments");return ve(r.new_child,r,qr(d,"environments"))}(),specials:function(){var r=qr(e.lookup_chain_maps,"specials");return ve(r.new_child,r,qr(d,"specials"))}()}),f.frozen=!0,function(){var n=zo;ve(n.debug,n,"Latex Context DB %r ---\x3e extended with %r [new cat %s] ---\x3e %r",e,function(){for(var e,r,n=[],t=ve((e=d).py_items,e),a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];r=void 0,ve(n.append,n,[o,ve(nr,null,(r=s,ve(r.py_keys,r)))])}return wr(n)}(),r,f)}(),f}))}}),Uo=he("ParsingStateDeltaExtendLatexContextDb",[ut],{__module__:qo,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"extend_latex_context":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,Uo,"__init__"),null,e,me(xe({_fields:tr(["extend_latex_context","set_attributes"])},n))),e.extend_latex_context=r}))},get get_updated_parsing_state(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":r=a[i];break;case"latex_walker":n=a[i]}}}if(Ne(e.extend_latex_context)){if(Ne(e.set_attributes))var o=e.set_attributes;else o=wr({});var s=ve((_=r.latex_context).extended_with,_,me(xe({category:null},e.extend_latex_context)));return function(){var e=r;return ve(e.sub_context,e,me(xe({latex_context:s},o)))}()}return Ne(e.set_attributes)?function(){var n=r;return ve(n.sub_context,n,me(e.set_attributes))}():r;var _}))}}),Wo={};ue(Wo,"",dn);var Vo="pylatexenc.macrospec._specclasses",Ho=(ve(Wo.getLogger,Wo,Vo),function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}tr([].slice.apply(arguments).slice(0,e+1))}else tr();return null}),$o=he("_SpecBase",[yt],{__module__:Vo,get __init__(){return fe(this,(function(e,r,n,t,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"arguments_spec_list":r=_[l];break;case"make_arguments_parsing_state_delta":n=_[l];break;case"make_body_parsing_state_delta":t=_[l];break;case"make_after_parsing_state_delta":a=_[l];break;case"finalize_node":i=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}e.arguments_spec_list=r,e._fn_make_arguments_parsing_state_delta=n,e._fn_make_body_parsing_state_delta=t,e._fn_make_after_parsing_state_delta=a,e._fn_finalize_node=i;var c=ve(Ho,null,"SpecBase_init_from_args_parser",e,r,o);ve(ve(we,null,$o,"__init__"),null,e,me(o)),Ne(!Ne(c))&&(Ne(e.arguments_spec_list)?e.arguments_parser=ve(mo,null,r):e.arguments_parser=ve(vo,null))}))},get finalize_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Ne(null!==e._fn_finalize_node)?ve((i=e)._fn_finalize_node,i,r):r;var i}))},get make_arguments_parsing_state_delta(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":r=a[i];break;case"latex_walker":n=a[i]}}}return Ne(null!==e._fn_make_arguments_parsing_state_delta)?ve((o=e)._fn_make_arguments_parsing_state_delta,o,me({token:r,latex_walker:n})):null;var o}))},get make_body_parsing_state_delta(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"token":r=o[s];break;case"nodeargd":n=o[s];break;case"arg_parsing_state_delta":t=o[s];break;case"latex_walker":a=o[s]}}}return Ne(null!==e._fn_make_body_parsing_state_delta)?ve((_=e)._fn_make_body_parsing_state_delta,_,me({token:r,nodeargd:n,arg_parsing_state_delta:t,latex_walker:a})):e.body_parsing_state_delta;var _}))},get make_after_parsing_state_delta(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsed_node":r=a[i];break;case"latex_walker":n=a[i]}}}return Ne(null!==e._fn_make_after_parsing_state_delta)?ve((o=e)._fn_make_after_parsing_state_delta,o,me({parsed_node:r,latex_walker:n})):null;var o}))},get needs_arguments(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a,i=e.arguments_spec_list,o=0;o<je(i);o++){var s=qr(i,o);if(Ne((a=void 0,ve((a=s.spec).is_required,a))))return!0}return!1}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or(Or(e.__class__.__name__,"("),ve(", ".join,", ",function(){for(var r,n,t=[],a=ve((r=e.__dict__).py_items,r),i=0;i<je(a);i++){var o=qr(a,i),s=o[0],_=o[1];Ne(!Ne(function(){var e=s;return ve(e.startswith,e,"_")}()))&&(n=void 0,ve(t.append,t,ve((n="{}={!r}").format,n,s,_)))}return t}())),")")}))}}),Yo=he("MacroSpec",[$o],{__module__:Vo,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":r=i[o];break;case"arguments_spec_list":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Yo,"__init__"),null,e,me(xe({arguments_spec_list:n},t))),e.macroname=r}))},get get_node_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return ve(ao,null,r,e)}))}}),Xo=he("EnvironmentSpec",[$o],{__module__:Vo,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":r=i[o];break;case"arguments_spec_list":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_=ve((s=t).py_pop,s,"make_body_parser",null),l=function(){var e=t;return ve(e.py_pop,e,"body_parsing_state_delta",null)}();ve(ve(we,null,Xo,"__init__"),null,e,me(xe({arguments_spec_list:n},t))),e.environmentname=r,e.body_parsing_state_delta=l,e._fn_make_body_parser=_}))},get get_node_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return ve(io,null,r,e)}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}return Ne(null!==e._fn_make_body_parser)?ve((s=e)._fn_make_body_parser,s,r,n,t):ve(uo,null,me({environmentname:r.arg}));var s}))}}),Jo=he("SpecialsSpec",[$o],{__module__:Vo,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"specials_chars":r=i[o];break;case"arguments_spec_list":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Jo,"__init__"),null,e,me(xe({arguments_spec_list:n},t))),e.specials_chars=r}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="SpecialsSpec(specials_chars={!r}, arguments_spec_list={!r})").format,a,e.specials_chars,e.arguments_spec_list);var a}))},get get_node_parser(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token":r=t[a]}}}return ve(oo,null,r,e)}))}}),Zo={},Ko={};ue(Ko,"",Aa),ue(Zo,"",dn),ue({},"",Ct);var Qo="pylatexenc.latexwalker._walker",es=Bo,rs=ve(Zo.getLogger,Zo,Qo),ns=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}var t=tr([].slice.apply(arguments).slice(0,e+1))}else t=tr();return ve(tr,null,t)},ts=Ko.fn_unique_object_id,as=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}tr([].slice.apply(arguments).slice(0,e+1))}else tr();return null},is=he("LatexWalker",[fn.LatexWalkerBase],{__module__:Qo,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":r=i[o];break;case"latex_context":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_=ve((s=t).py_pop,s,"default_parsing_state",null);if(e.s=r,e.line_number_offset=function(){var e=t;return ve(e.py_pop,e,"line_number_offset",null)}(),e.first_line_column_offset=function(){var e=t;return ve(e.py_pop,e,"first_line_column_offset",null)}(),e.column_offset=function(){var e=t;return ve(e.py_pop,e,"column_offset",null)}(),Ne(null===e.line_number_offset)&&(e.line_number_offset=1),Ne(null===e.first_line_column_offset)&&(e.first_line_column_offset=0),Ne(null===e.column_offset)&&(e.column_offset=0),e._line_no_calc=null,e.debug_nodes=!1,Ne(null!==_)){if(e.default_parsing_state=_,Ne(null!==n))throw(l=ve(Hr,null,"You cannot specify both the default_parsing_state= and the latex_context= arguments")).__cause__=null,l}else{if(Ne(null===n)){if(Ne(null===(n=ve(as,null,"LatexWalker_init_from_macro_dict",e,t))))n=ve(es,null)}else if(Ne(Ce("macro_dict",t))){var l;throw(l=ve(Kr,null,"Cannot specify both `latex_context=` and `macro_dict=` arguments")).__cause__=null,l}Ne(null!==n)?(!function(){var e=n;ve(e.freeze,e)}(),e.default_parsing_state=ve(Ba,null,me({s:e.s,latex_context:n}))):e.default_parsing_state=null}e.tolerant_parsing=function(){var e=t;return ve(e.py_pop,e,"tolerant_parsing",!0)}(),e.strict_braces=function(){var e=t;return ve(e.py_pop,e,"strict_braces",!1)}(),Ne(Ce("keep_inline_math",t))&&(ve(wo.pylatexenc_deprecated_2,wo,"The keep_inline_math=... option in LatexWalker() has no effect in pylatexenc 2.  Please consider using the more versatile option math_mode=... in LatexNodes2Text() instead."),qr(t,"keep_inline_math")),Ne(t)&&function(){var e,r=rs;ve(r.warning,r,"LatexWalker(): Unknown flag(s) encountered: %r",ve((e=t).py_keys,e))}(),ve(ve(we,null,is,"__init__"),null,e)}))},make_latex_group_parser:mi,make_latex_math_parser:Gi,get make_parsing_state(){return fe(this,(function(e){var r,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("self"===i)e=a[i];else n[i]=a[i];delete n.__kwargtrans__}}return ve((r=e.default_parsing_state).sub_context,r,me(n))}))},get parse_flags(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return wr({tolerant_parsing:e.tolerant_parsing,strict_braces:e.strict_braces,keep_inline_math:null})}))},get _report_ignore_parse_error(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exc":r=t[a]}}}var i;ve((i=rs).info,i,"Ignoring parse error (tolerant parsing mode): %s",r)}))},get check_tolerant_parsing_ignore_error(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exc":r=t[a]}}}return Ne(Ne(!Ne(e.tolerant_parsing))||!Ne(ve(Re,null,r,Pn)))?r:(ve((i=e)._report_ignore_parse_error,i,r),null);var i}))},_ParsingContext:he("_ParsingContext",[ge],{__module__:Qo,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":r=a[i];break;case"open_context":n=a[i]}}}ve(ve(we,null,is._ParsingContext,"__init__"),null,e),e.latex_walker=r,e.open_context=n,e.recovery_from_exception=null}))},get __enter__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e}))},get __exit__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"exc_type":r=i[o];break;case"exc_value":n=i[o];break;case"exc_traceback":t=i[o]}}}if(Ne(Ne(null!==n)&&ve(Re,null,n,En))){var s=n;if(Ne(e.open_context)){var _=(u=e.open_context)[0],l=u[1];Ne(null!==_)&&(Ne(null!==l)?ve((d=s.open_contexts).append,d,ve.apply(void 0,[ns,null,_,l.pos].concat((0,R.default)(ve((f=e.latex_walker).pos_to_lineno_colno,f,l.pos))))):function(){var e=s.open_contexts;ve(e.append,e,ve(ns,null,_,null,yr(1),yr(1)))}())}if(Ne(Ne(ve(Se,null,s,"pos"))&&Ne(null===s.lineno)&&null===s.colno)){var c=ve(Ee,null,s,"pos",null),u=function(){var r=e.latex_walker;return ve(r.pos_to_lineno_colno,r,c)}();s.lineno=u[0],s.colno=u[1]}s=function(){var r=e.latex_walker;return ve(r.check_tolerant_parsing_ignore_error,r,s)}();return Ne(null===s)?(e.recovery_from_exception=s,!0):null}var f,d}))},get perform_recovery_nodes_and_parsing_state_delta(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"token_reader":r=t[a]}}}if(Ne(null===e.recovery_from_exception)){var i=ve(RuntimeError,null,"No exception had happened to try to recover nodes from");throw i.__cause__=null,i}var o,s=null,_=null,l=null;if(Ne(ve(Se,null,e.recovery_from_exception,"recovery_nodes")))s=e.recovery_from_exception.recovery_nodes;if(Ne(ve(Se,null,e.recovery_from_exception,"recovery_parsing_state_delta")))_=e.recovery_from_exception.recovery_parsing_state_delta;if(Ne(ve(Se,null,e.recovery_from_exception,"recovery_at_token")))l=e.recovery_from_exception.recovery_at_token;if(Ne(null!==l))ve((o=r).move_to_token,o,l);else{var c=null;if(Ne(ve(Se,null,e.recovery_from_exception,"recovery_past_token")))c=e.recovery_from_exception.recovery_past_token;Ne(null!==c)&&function(){var e=r;ve(e.move_past_token,e,c)}()}return tr([s,_])}))}}),get new_parsing_open_context(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"open_context_name":r=a[i];break;case"open_context_token":n=a[i]}}}return ve((o=is)._ParsingContext,o,e,tr([r,n]));var o}))},get make_token_reader(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pos":r=t[a]}}}var i,o=ve(fn.LatexTokenReader,fn,e.s,me({tolerant_parsing:e.tolerant_parsing}));return Ne(null!==r)&&ve((i=o).move_to_pos_chars,i,r),o}))},get parse_content(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"parser":r=o[s];break;case"token_reader":n=o[s];break;case"parsing_state":t=o[s];break;case"open_context":a=o[s]}}}var _,l=null,c=null;if(Ne(null===n))l=ve((_=e).make_token_reader,_);else l=n;if(Ne(null===t))c=function(){var r=e;return ve(r.make_parsing_state,r)}();else c=t;var u=null,f=null,d=(v=tr([null,null]))[0],p=v[1];if(Ne(a))d=(v=a)[0],p=v[1];var g=function(){var e=l;return ve(e.cur_pos,e)}();!function(){var e=rs;ve(e.debug,e,":: Parsing content (%s @ %r) - %r [%r]::",d,g,r,c)}();var h=function(){var r=e;return ve(r.new_parsing_open_context,r,d,p)}();try{h.__enter__();try{var v=function(){var n=r;return ve(n.parse,n,me({latex_walker:e,token_reader:l,parsing_state:c}))}();u=v[0],f=v[1]}catch(e){if(!Re(e,Nn))throw e;!function(){var e=rs;ve(e.warning,e,"End of stream encountered when parsing content with %s (%s)",r.__class__.__name__,d)}();u=(v=tr([null,null]))[0],f=v[1]}h.__exit__()}catch(e){if(!h.__exit__(e.name,e,e.stack))throw e}if(Ne(null!==h.recovery_from_exception))v=function(){var e=h;return ve(e.perform_recovery_nodes_info,e,l)}(),u=v[0],f=v[1];return function(){var e=rs;ve(e.debug,e,":: PARSED content (%s @ %r) - %r - result %r %r DONE ::",d,g,r,u,f)}(),tr([u,f])}))},get make_nodes_collector(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}return ve(fn.LatexNodesCollector,fn,e,r,n,me(t))}))},get make_node(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node_class":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=tr([(o=n,ve(o.py_pop,o,"pos")),function(){var e=n;return ve(e.py_pop,e,"pos_end",null)}(),function(){var e=n;return ve(e.py_pop,e,"parsing_state")}()]),_=s[0],l=s[1],c=s[2];if(Ne(Ne(null===l)&&Ne(null!==_)&&Ce("len",n))){ve(wo.pylatexenc_deprecated_3,wo,"make_node(..., len=..., ...); use ‘pos_end=’ instead of ‘len=’");var u=qr(n,"len");l=Or(_,u)}var f=ve(r,null,me(xe({pos:_,pos_end:l,parsing_state:c,latex_walker:e},n)));return Ne(e.debug_nodes)&&function(){var e=rs;ve(e.debug,e,"New node: %r",f)}(),f}))},get make_nodelist(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve((o=n).py_pop,o,"parsing_state");return ve(Jn,null,me(xe({nodelist:r,parsing_state:s,latex_walker:e},n)))}))},get format_pos(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"pos":r=t[a]}}}if(Ne(null===r))return"(location unknown)";var i,o=ve((i=e).pos_to_lineno_colno,i,r),s=o[0],_=o[1];return ve(Cn,null,r,s,_)}))},get pos_to_lineno_colno(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"pos":r=a[i];break;case"as_dict":n=a[i]}}}return Ne(null===e._line_no_calc)&&(e._line_no_calc=ve(wo.LineNumbersCalculator,wo,e.s,me({line_number_offset:e.line_number_offset,first_line_column_offset:e.first_line_column_offset,column_offset:e.column_offset}))),ve((o=e._line_no_calc).pos_to_lineno_colno,o,r,me({as_dict:n}));var o}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="<LatexWalker {}>").format,a,ve(ts,null,e));var a}))}}),os={};ue(os,"",dn);ve(os.getLogger,os,"pylatexenc.latexwalker");var ss={},_s={},ls={};ue(ls,"",Aa),ue(ss,"",dn),ue(_s,"",Ct);var cs="llm.llmenvironment",us=ve(ss.getLogger,ss,cs),fs=ls.fn_unique_object_id,ds=he("LLMParsingState",[fn.ParsingState],{__module__:cs,_fields:ve(tr,null,Or(ve(nr,null,fn.ParsingState._fields),["is_block_level"])),get set_fields(){return fe(this,(function(e){var r=null,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"is_block_level":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,ds,"set_fields"),null,e,me(n)),e.is_block_level=r}))}}),ps=he("LLMParsingStateDeltaSetBlockLevel",[fn.ParsingStateDelta],{__module__:cs,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"is_block_level":r=t[a]}}}ve(ve(we,null,ps,"__init__"),null,e,me({set_attributes:ve(wr,null,me({is_block_level:r}))}))}))}}),gs=function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"parser":e=a[i];break;case"argname":r=a[i];break;case"is_block_level":n=a[i]}}}var o=null;if(Ne(null!==n))o=ve(ps,null,me({is_block_level:n}));return ve(fn.LatexArgumentSpec,fn,me({parser:e,argname:r,parsing_state_delta:o}))},hs=he("BlocksBuilder",[ge],{__module__:cs,rx_space:ve(_s.compile,_s,"[ \\t\\n\\r]+"),rx_only_space:ve(_s.compile,_s,"^[ \\t\\n\\r]+$"),get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"latexnodelist":r=t[a]}}}ve(ve(we,null,hs,"__init__"),null,e),e.latexnodelist=r,e.pending_paragraph_nodes=[],e.blocks=[]}))},get flush_paragraph(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(!Ne(!Ne(e.pending_paragraph_nodes))){var a,i=e.pending_paragraph_nodes;i=ve((a=e).finalize_paragraph,a,i);!function(){var r=e.blocks;ve(r.append,r,ve(An.LatexNodeList,An,i,me({parsing_state:e.latexnodelist.parsing_state,latex_walker:e.latexnodelist.latex_walker})))}(),e.pending_paragraph_nodes=[]}}))},get simplify_whitespace_chars(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"chars":r=i[o];break;case"is_head":n=i[o];break;case"is_tail":t=i[o]}}}var s,_=ve((s=e.rx_space).sub,s," ",r);if(Ne(n))_=function(){var e=_;return ve(e.lstrip,e)}();if(Ne(t))_=function(){var e=_;return ve(e.rstrip,e)}();return _}))},get finalize_paragraph(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"paragraph_nodes":r=t[a]}}}if(Ne(!Ne(r)))return r;for(var i,o=!0,s=null,_=null,l=[],c=ve(er,null,r),u=0;u<je(c);u++){(p=qr(c,u))[0];var f=p[1];if(Ne(Ne(Cr(ve(je,null,l),0))&&Ne(null!==_)&&ve(Ee,null,_,"llm_is_block_heading",!1)))o=!0;if(Ne((i=void 0,ve((i=f).isNodeType,i,An.LatexCharsNode)))){var d=wr({is_head:o,is_tail:!1});!function(){var e=l;ve(e.append,e,tr([f,d]))}();o=!1,s=d}else if(Ne(!Ne(function(){var e=f;return ve(e.isNodeType,e,An.LatexCommentNode)}()))){if(Ne(null===_))_=f;o=!1,s=null}}Ne(null!==s)&&zr(s,"is_tail",!0);for(c=l,u=0;u<je(c);u++){var p,g=(p=qr(c,u))[0];d=p[1];g.llm_chars_value=function(){var r=e;return ve(r.simplify_whitespace_chars,r,g.chars,me({is_head:qr(d,"is_head"),is_tail:qr(d,"is_tail")}))}()}return r}))},get build_blocks(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a=e.latexnodelist;be(Cr(ve(je,null,e.blocks),0));for(var i,o=a,s=0;s<je(o);s++){var _=qr(o,s),l=ve(Ee,null,_,"llm_is_block_level",null),c=ve(Ee,null,_,"llm_is_block_heading",!1);if(Ne(l)){if(i=void 0,ve((i=e).flush_paragraph,i),Ne(ve(Ee,null,_,"llm_is_paragraph_break_marker",!1)))continue;if(Ne(c)){!function(){var r=e.pending_paragraph_nodes;ve(r.append,r,_)}();continue}!function(){var r=e.blocks;ve(r.append,r,_)}()}else{var u=!0;if(Ne(!Ne(e.pending_paragraph_nodes)))u=!1;if(Ne(Cr(ve(je,null,e.pending_paragraph_nodes),1))&&Ne(ve(Ee,null,qr(e.pending_paragraph_nodes,0),"llm_is_block_heading",!1)))u=!1;Ne(Ne(!Ne(u))&&Ne(function(){var e=_;return ve(e.isNodeType,e,An.LatexCharsNode)}())&&function(){var r=e.rx_only_space;return ve(r.match,r,_.chars)}())||function(){var r=e.pending_paragraph_nodes;ve(r.append,r,_)}()}}return function(){var r=e;ve(r.flush_paragraph,r)}(),e.blocks}))}}),vs=he("NodeListFinalizer",[ge],{__module__:cs,get finalize_nodelist(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"latexnodelist":r=t[a]}}}var i;if(Ne(null===(o=r.parsing_state.is_block_level)))var o=ve((i=e).infer_is_block_level_nodelist,i,r);if(r.llm_is_block_level=o,Ne(!Ne(o))){for(var s=r,_=0;_<je(s);_++){var l=qr(s,_);if(Ne(ve(Ee,null,l,"llm_is_block_level",null))){var c=ve(En,null,me({msg:"Content is not allowed in inline text (not block level): ‘{}’".format(function(){var e=l;return ve(e.latex_verbatim,e)}()),pos:l.pos}));throw c.__cause__=null,c}Ne(function(){var e=l;return ve(e.isNodeType,e,An.LatexCharsNode)}())&&(l.llm_chars_value=function(){var r=e;return ve(r.simplify_whitespace_chars_inline,r,l.chars)}())}return r}if(Ne(o)){var u=function(){var n=e;return ve(n.make_blocks_builder,n,r)}(),f=function(){var e=u;return ve(e.build_blocks,e)}();r.llm_blocks=f}return r}))},get infer_is_block_level_nodelist(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"latexnodelist":r=t[a]}}}for(var i=r,o=0;o<je(i);o++){var s=qr(i,o),_=ve(Ee,null,s,"llm_is_block_level",null);if(Ne(_))return!0}return!1}))},get simplify_whitespace_chars_inline(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"chars":r=t[a]}}}return ve((i=e.rx_inline_space).sub,i," ",r);var i}))},make_blocks_builder:hs,rx_inline_space:hs.rx_space}),ms=he("LLMLatexWalker",[is],{__module__:cs,get __init__(){return fe(this,(function(e){var r=null,n=!1,t=null,a=null,i=null,o=wr();if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"llm_text":var c=_[l];break;case"default_parsing_state":var u=_[l];break;case"llm_environment":var f=_[l];break;case"parsing_state_event_handler":r=_[l];break;case"standalone_mode":n=_[l];break;case"resource_info":t=_[l];break;case"parsing_mode":a=_[l];break;case"what":i=_[l];break;default:o[l]=_[l]}delete o.__kwargtrans__}}ve(ve(we,null,ms,"__init__"),null,e,me(xe({s:c,default_parsing_state:u},o))),e.llm_environment=f,e.standalone_mode=n,e.resource_info=t,e.what=i,e.parsing_mode=a,e._parsing_state_event_handler=r}))},get parsing_state_event_handler(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(e._parsing_state_event_handler)?e._parsing_state_event_handler:ve(ve(we,null,ms,"parsing_state_event_handler"),null,e)}))},get make_nodelist(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodelist":r=i[o];break;case"parsing_state":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s,_,l=ve(ve(we,null,ms,"make_nodelist"),null,e,me(xe({nodelist:r,parsing_state:n},t)));return l=(_=ve((s=e.llm_environment).node_list_finalizer,s),ve(_.finalize_nodelist,_,l))}))},get make_node(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node_class":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=ve(ve(we,null,ms,"make_node"),null,e,r,me(n));return o.node_id=ve(fs,null,o),o}))},get filter_whitespace_comments_nodes(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"nodelist":r=t[a]}}}return ve((i=r).filter,i,me({node_predicate_fn:e._filter_whitespace_comments_nodes_predicate,skip_none:!0,skip_comments:!0,skip_whitespace_char_nodes:!0}));var i}))},get _filter_whitespace_comments_nodes_predicate(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return!Ne(ve(Ee,null,r,"llm_is_paragraph_break_marker",!1))}))}}),ws=he("LLMEnvironment",[ge],{__module__:cs,get __init__(){return fe(this,(function(e,r,n,t){var a=!1,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"features":r=s[_];break;case"parsing_state":n=s[_];break;case"latex_context":t=s[_];break;case"tolerant_parsing":a=s[_];break;case"parsing_mode_deltas":i=s[_]}}}ve(ve(we,null,ws,"__init__"),null,e),e.latex_context=t,e.parsing_state=n,e.parsing_mode_deltas=Ne(i)?ve(wr,null,i):wr({}),e.features=ve(nr,null,r),e.features_by_name=wr({});for(var l,c=e.features,u=0;u<je(c);u++){var f=qr(c,u);if(Ne(Ce(f.feature_name,e.features_by_name)))throw(h=ve(Hr,null,"Duplicate feature detected: feature {} has same name/role as the as already-included feature {}".format(f,qr(e.features_by_name,f.feature_name)))).__cause__=null,h;zr(e.features_by_name,f.feature_name,f)}if(e.tolerant_parsing=a,e._node_list_finalizer=ve(vs,null),Ne(null===e.parsing_state.latex_context)){for(c=e.features,u=0;u<je(c);u++){var d=qr(c,u),p=(l=void 0,ve((l=d).add_latex_context_definitions,l));if(Ne(p)){var g=ve(wr,null,p);!function(){var e=g;ve(e.py_update,e,me({prepend:!0}))}(),function(){var r=e.latex_context;ve(r.add_context_category,r,"feature--{}".format(d.feature_name),me(g))}()}}!function(){var r=e.latex_context;ve(r.freeze,r)}(),e.parsing_state.latex_context=e.latex_context}else if(Ne(null!==e.latex_context)){var h;throw(h=ve(RuntimeError,null,"The specified `parsing_state` instance already has a latex_context set")).__cause__=null,h}}))},get feature(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"feature_name":r=t[a]}}}return qr(e.features_by_name,r)}))},parsing_state_event_handler:null,get make_latex_walker(){return fe(this,(function(e,r){var n=null,t=null,a=null,i=null,o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"llm_text":r=_[l];break;case"standalone_mode":var c=_[l];break;case"is_block_level":var u=_[l];break;case"parsing_mode":n=_[l];break;case"resource_info":t=_[l];break;case"tolerant_parsing":a=_[l];break;case"what":i=_[l];break;case"input_lineno_colno_offsets":o=_[l]}}}var f,d=ve((f=e).make_parsing_state,f,me({is_block_level:u,parsing_mode:n}));if(Ne(null===a))a=e.tolerant_parsing;if(Ne(null===o))o=wr({});var p=ve(ms,null,me({llm_text:r,default_parsing_state:d,tolerant_parsing:a,llm_environment:e,standalone_mode:c,resource_info:t,what:i,parsing_state_event_handler:e.parsing_state_event_handler,line_number_offset:function(){var e=o;return ve(e.py_get,e,"line_number_offset",null)}(),first_line_column_offset:function(){var e=o;return ve(e.py_get,e,"first_line_column_offset",null)}(),column_offset:function(){var e=o;return ve(e.py_get,e,"column_offset",null)}()}));return p}))},get make_parsing_state(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"is_block_level":r=a[i];break;case"parsing_mode":n=a[i]}}}var o,s=e.parsing_state;if(Ne(null!==n)){try{var _=qr(e.parsing_mode_deltas,n)}catch(e){if(Re(e,$r)){var l=ve(Hr,null,"Invalid parsing_mode ‘{}’".format(n));throw l.__cause__=null,l}throw e}if(Ne(null!==_))s=ve((o=_).get_updated_parsing_state,o,s,me({latex_walker:null}))}var c=wr({});return Ne(null!==r)&&zr(c,"is_block_level",r),function(){var e=s;return ve(e.sub_context,e,me(c))}()}))},get make_fragment(){return fe(this,(function(e,r){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"llm_text":r=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}try{var s=ve(Hi,null,r,me(xe({environment:e},t)));return s}catch(e){throw Ne(!Ne((n=t,ve(n.py_get,n,"silent",!1))))&&function(){var e,n,a=us;ve(a.error,a,ve((n="Error compiling fragment for {}\nContent was:\n‘{}’\n").format,n,ve((e=t).py_get,e,"what","(unknown)"),r),me({exc_info:!0}))}(),e.__cause__=null,e}}))},get node_list_finalizer(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._node_list_finalizer}))},get make_document(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"render_callback":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o,s=ve(Ki,null,r,me(xe({environment:e},n)));return ve((o=s).initialize,o),s}))},get get_parse_error_message(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exception_object":r=t[a]}}}return i=ve(Sn,null,r),ve(i.to_display_string,i);var i}))}}),ks={};e(ks,"logger",(function(){return e_})),e(ks,"ReferenceableInfo",(function(){return r_})),e(ks,"get_safe_target_id",(function(){return o_})),e(ks,"RefInstance",(function(){return n_})),e(ks,"_rx_unsafe_char",(function(){return a_})),e(ks,"_rx_match_safechar",(function(){return i_})),e(ks,"FeatureRefsRenderManager",(function(){return s_})),e(ks,"FeatureRefs",(function(){return __})),e(ks,"RefMacro",(function(){return c_})),e(ks,"_ref_arg_specs",(function(){return l_})),e(ks,"latexnodes_parsers",(function(){return Qa})),e(ks,"LLMFragment",(function(){return Hi})),e(ks,"LLMArgumentSpec",(function(){return gs})),e(ks,"Feature",(function(){return bs})),e(ks,"LLMMacroSpecBase",(function(){return Ls})),e(ks,"LatexWalkerParseError",(function(){return En})),e(ks,"ParsedArgumentsInfo",(function(){return st}));var ys="llm.feature._base",bs=he("Feature",[ge],{__module__:ys,feature_name:null,DocumentManager:he("DocumentManager",[ge],{__module__:ys,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"feature":r=i[o];break;case"doc":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,bs.DocumentManager,"__init__"),null,e,me(t)),e.feature=r,e.feature_name=e.feature.feature_name,e.doc=n,e.RenderManager=e.feature.RenderManager}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}}))},get get_node_id(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return ve((i=e.feature).get_node_id,i,r);var i}))}}),RenderManager:he("RenderManager",[ge],{__module__:ys,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"feature_document_manager":r=i[o];break;case"render_context":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,bs.RenderManager,"__init__"),null,e,me(t)),e.feature_document_manager=r,e.feature=e.feature_document_manager.feature,e.feature_name=e.feature.feature_name,e.render_context=n}))},get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}}))},get process(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"first_pass_value":r=t[a]}}}}))},get postprocess(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"final_value":r=t[a]}}}}))},get get_node_id(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return ve((i=e.feature).get_node_id,i,r);var i}))}}),get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return wr({})}))},get get_node_id(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}return Ne(ve(Re,null,r,tr))?r:r.node_id}))}}),xs={};e(xs,"logger",(function(){return Es})),e(xs,"LLMSpecInfo",(function(){return Ss})),e(xs,"_dobaseconstructors2argslast",(function(){return Cs})),e(xs,"LLMMacroSpecBase",(function(){return Ls})),e(xs,"LLMEnvironmentSpecBase",(function(){return js})),e(xs,"LLMSpecialsSpecBase",(function(){return Ns})),e(xs,"LLMSpecInfoConstantValue",(function(){return As})),e(xs,"ConstantValueMacro",(function(){return Is})),e(xs,"ConstantValueSpecials",(function(){return Ms})),e(xs,"text_arg",(function(){return Ts})),e(xs,"label_arg",(function(){return Ds})),e(xs,"helper_collect_labels",(function(){return Rs})),e(xs,"TextFormatMacro",(function(){return qs})),e(xs,"LLMSpecInfoParagraphBreak",(function(){return zs})),e(xs,"ParagraphBreakSpecials",(function(){return Fs})),e(xs,"ParagraphBreakMacro",(function(){return Gs})),e(xs,"LLMSpecInfoError",(function(){return Bs})),e(xs,"LLMMacroSpecError",(function(){return Us})),e(xs,"LLMEnvironmentSpecError",(function(){return Ws})),e(xs,"LLMSpecialsSpecError",(function(){return Vs})),e(xs,"_href_arg_specs",(function(){return Hs})),e(xs,"HrefHyperlinkMacro",(function(){return $s})),e(xs,"VerbatimSpecInfo",(function(){return Ys})),e(xs,"VerbatimMacro",(function(){return Xs})),e(xs,"VerbatimEnvironment",(function(){return Js})),e(xs,"LLMParsingStateDeltaSetBlockLevel",(function(){return ps})),e(xs,"latexnodes_parsers",(function(){return Qa})),e(xs,"LLMArgumentSpec",(function(){return gs})),e(xs,"macrospec",(function(){return Qi})),e(xs,"latexnodes_nodes",(function(){return An})),e(xs,"LatexWalkerParseError",(function(){return En})),e(xs,"ParsedArgumentsInfo",(function(){return st}));R=i("fOdIC");var Os={};ue(Os,"",dn);var Ps="llm.llmspecinfo",Es=ve(Os.getLogger,Os,Ps),Ss=he("LLMSpecInfo",[ge],{__module__:Ps,delayed_render:!1,is_block_level:!1,is_block_heading:!1,is_paragraph_break_marker:!1,allowed_in_standalone_mode:!1,get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}}))},get prepare_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o=ve(RuntimeError,null,"Reimplement me!");throw o.__cause__=null,o}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o=ve(RuntimeError,null,"Element ‘{}’ cannot be placed here, render() not reimplemented.".format(r));throw o.__cause__=null,o}))},get finalize_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=r.latex_walker.standalone_mode;if(Ne(Ne(o)&&!Ne(e.allowed_in_standalone_mode))){var s=ve(En,null,"‘{}’ is not allowed here (standalone mode).".format(ve((i=r).latex_verbatim,i)));throw s.__cause__=null,s}r.llm_specinfo=e;try{!function(){var n=e;ve(n.postprocess_parsed_node,n,r)}()}catch(e){var _;if(Re(e,En))throw Ne(Ne(!Ne(ve(Se,null,l=e,"pos")))||null===l.pos)&&(l.pos=r.pos),(_=l).__cause__=null,_;if(Re(e,Hr))throw(_=ve(En,null,ve(ir,null,l=e),me({pos:r.pos}))).__cause__=null,_;if(Re(e,Ur)){var l=e;throw function(){var e=Es;ve(e.error,e,"Internal Parse Error! {}".format(l),me({exc_info:!0}))}(),function(){var e,n=Es;ve(n.error,n,"Happened @{},  node: ‘{}’".format(ve(ze,null,ve((e=r.latex_walker).pos_to_lineno_colno,e,r.pos)),function(){var e=r;return ve(e.latex_verbatim,e)}()))}(),e.__cause__=null,e}throw e}return r.llm_is_block_level=e.is_block_level,r.llm_is_block_heading=e.is_block_heading,r.llm_is_paragraph_break_marker=e.is_paragraph_break_marker,r}))}}),Cs=function(e,r,n,t,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"Me":e=o[s];break;case"self":r=o[s];break;case"args":n=o[s];break;case"kwargs":t=o[s];break;case"kwargs_to_first_constructor":a=o[s]}}}var _,l=wr({}),c=ve(wr,null,t);if(Ne(a))for(var u=a,f=0;f<je(u);f++){var d=qr(u,f);Ne(Ce(d,c))&&zr(l,d,(_=void 0,ve((_=c).py_pop,_,d)))}!function(){var n=qr(e.__bases__,0);ve(n.__init__,n,r,me(l))}(),function(){var t=qr(e.__bases__,1);ve.apply(void 0,[t.__init__,t,r].concat((0,R.default)(n),[me(c)]))}()},Ls=he("LLMMacroSpecBase",[Ss,Yo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Ls,e,i,r)}))}}),js=he("LLMEnvironmentSpecBase",[Ss,Xo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,js,e,i,r)}))}}),Ns=he("LLMSpecialsSpecBase",[Ss,Jo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Ns,e,i,r)}))}}),As=he("LLMSpecInfoConstantValue",[Ss],{__module__:Ps,allowed_in_standalone_mode:!0,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":var i=t[a];break;default:r[a]=t[a]}delete r.__kwargtrans__}var o=tr([].slice.apply(arguments).slice(1,n+1))}else o=tr();ve.apply(void 0,[ve(we,null,As,"__init__"),null,e].concat((0,R.default)(o),[me(r)])),e.value=i}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((o=n.fragment_renderer).render_value,o,e.value);var o}))}}),Is=he("ConstantValueMacro",[As,Yo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Is,e,i,r,tr(["value"]))}))}}),Ms=he("ConstantValueSpecials",[As,Jo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Ms,e,i,r,tr(["value"]))}))}}),Ts=ve(gs,null,me({parser:"{",argname:"text"})),Ds=ve(gs,null,me({parser:ve(Qa.LatexTackOnInformationFieldMacrosParser,Qa,["label"],me({allow_multiple:!0})),argname:"label"})),Rs=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"node_arg_label":e=t[a];break;case"allowed_prefixes":r=t[a]}}}if(Ne(!Ne((i=e,ve(i.was_provided,i)))))return null;for(var i,o=[],s=function(){var r=e;return ve(r.get_content_nodelist,r)}(),_=s,l=0;l<je(_);l++){var c=qr(_,l);if(!Ne(Cr(qr(c.delimiters,0),"\\label")))throw(u=ve(En,null,"Bad information field macro {}".format(qr(c.delimiters,0)),me({pos:c.pos}))).__cause__=null,u;var u,f=function(){var e=c.nodelist;return ve(e.get_content_as_chars,e)}();if(Ne(Ce(":",f)))var d=function(){var e=f;return ve(e.py_split,e,":",1)}(),p=d[0],g=d[1];else p=(d=tr([null,f]))[0],g=d[1];if(Ne(!Ce(p,r)))throw(u=ve(En,null,"Heading label ‘{}’ has incorrect prefix ‘{}:’; expected one of {}".format(f,p,r),me({pos:c.pos}))).__cause__=null,u;!function(){var e=o;ve(e.append,e,tr([p,g]))}()}return o},qs=he("TextFormatMacro",[Ls],{__module__:Ps,allowed_in_standalone_mode:!0,_llm_main_text_argument:"text",get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a];break;case"text_formats":var i=t[a]}}}ve(ve(we,null,qs,"__init__"),null,e,me({macroname:r,arguments_spec_list:[Ts]})),e.text_formats=i}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=(o=ve(st,null,me({node:r})),ve(o.get_all_arguments_info,o,tr(["text"])));return function(){var r,t=n.fragment_renderer;return ve(t.render_text_format,t,e.text_formats,ve((r=qr(s,"text")).get_content_nodelist,r),n)}()}))}}),zs=he("LLMSpecInfoParagraphBreak",[Ss],{__module__:Ps,is_block_level:!0,is_paragraph_break_marker:!0,allowed_in_standalone_mode:!0,get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o=ve(En,null,"Paragraph break is not allowed here",me({pos:r.pos}));throw o.__cause__=null,o}))}}),Fs=he("ParagraphBreakSpecials",[zs,Jo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Fs,e,i,r)}))}}),Gs=he("ParagraphBreakMacro",[zs,Yo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Gs,e,i,r)}))}}),Bs=he("LLMSpecInfoError",[Ss],{__module__:Ps,allowed_in_standalone_mode:!0,get __init__(){return fe(this,(function(e){var r=null,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"error_msg":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}var o=tr([].slice.apply(arguments).slice(1,t+1))}else o=tr();ve.apply(void 0,[ve(we,null,Bs,"__init__"),null,e].concat((0,R.default)(o),[me(n)])),e.error_msg=r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}if(Ne(e.error_msg))var o=e.error_msg;else o="The node ‘{}’ cannot be placed here.".format((_=ve((s=r).latex_verbatim,s),ve(_.strip,_)));var s,_;!function(){var e=Es;ve(e.error,e,"Misplaced node: {}".format(ve(ze,null,r)))}();var l=ve(En,null,o,me({pos:r.pos}));throw l.__cause__=null,l}))}}),Us=he("LLMMacroSpecError",[Bs,Yo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Us,e,i,r)}))}}),Ws=he("LLMEnvironmentSpecError",[Bs,Xo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Ws,e,i,r)}))}}),Vs=he("LLMSpecialsSpecError",[Bs,Jo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Vs,e,i,r)}))}}),Hs=wr({target_href:ve(gs,null,me({parser:ve(Qa.LatexDelimitedVerbatimParser,Qa,tr(["{","}"])),argname:"target_href"})),display_text:ve(gs,null,me({parser:"{",argname:"display_text"}))}),$s=he("HrefHyperlinkMacro",[Ls],{__module__:Ps,allowed_in_standalone_mode:!0,get __init__(){return fe(this,(function(e,r){var n,t=tr(["target_href","display_text"]),a="href";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"macroname":r=o[s];break;case"command_arguments":t=o[s];break;case"ref_type":a=o[s]}}}ve(ve(we,null,$s,"__init__"),null,e,me({macroname:r,arguments_spec_list:(n=e,ve(n._get_arguments_spec_list,n,t))})),e.command_arguments=function(){for(var e,r=[],n=t,a=0;a<je(n);a++){var i=qr(n,a);e=void 0,ve(r.append,r,ve((e=i).strip,e,"[]"))}return r}(),e.ref_type=a,Ne(Ce("display_text",t))&&(e._llm_main_text_argument="display_text")}))},get _get_arguments_spec_list(){return de(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"cls":e=t[a];break;case"command_arguments":r=t[a]}}}return function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,qr(Hs,a))}return e}()}))},get pretty_url(){return de(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"cls":e=t[a];break;case"target_href":r=t[a]}}}for(var i,o=ve(ir,null,r),s=tr(["http://","https://"]),_=0;_<je(s);_++){var l=qr(s,_);if(Ne((i=void 0,ve((i=o).startswith,i,l)))){o=Fr(o,ve(je,null,l),null,1);break}}o=function(){var e=o;return ve(e.rstrip,e,"/#?")}();return o}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,e.command_arguments)),s=null,_=null;if(Ne(Ce("target_href",o)))s=function(){var e=qr(o,"target_href");return ve(e.get_content_as_chars,e)}();if(Ne(Ce("display_text",o)))_=function(){var e=qr(o,"display_text");return ve(e.get_content_nodelist,e)}();r.llm_href_info=wr({target_href:s,display_text_nodelist:_})}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s,_,l=qr(r.llm_href_info,"target_href");if(Ne(null===(c=qr(r.llm_href_info,"display_text_nodelist"))))var c=ve((_=r.latex_walker).make_nodelist,_,[(s=r.latex_walker,ve(s.make_node,s,Gn,me({parsing_state:r.parsing_state,chars:(o=e,ve(o.pretty_url,o,l)),pos:r.pos,pos_end:r.pos})))],me({parsing_state:r.parsing_state}));return function(){var r=n.fragment_renderer;return ve(r.render_link,r,e.ref_type,l,c,n)}()}))}}),Ys=he("VerbatimSpecInfo",[Ss],{__module__:Ps,allowed_in_standalone_mode:!0,get __init__(){return fe(this,(function(e){var r=null,n=!1,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"annotations":r=i[o];break;case"include_environment_begin_end":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}var s=tr([].slice.apply(arguments).slice(1,a+1))}else s=tr();ve.apply(void 0,[ve(we,null,Ys,"__init__"),null,e].concat((0,R.default)(s),[me(t)])),e.annotations=r,e.include_environment_begin_end=n}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}be(Cr(r.tok,"begin_environment"));var s=r.arg;return ve(Qa.LatexVerbatimEnvironmentContentsParser,Qa,me({environment_name:s}))}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=null;if(Ne(ve((o=r).isNodeType,o,Vn))){s=r.environmentname;if(Ne(e.include_environment_begin_end))var _=function(){var e=r;return ve(e.latex_verbatim,e)}();else _=function(){var e=r.nodelist;return ve(e.latex_verbatim,e)}()}else _=function(){var e=r;return ve(e.latex_verbatim,e)}();var l=Ne(e.annotations)||[];return Ne(null!==s)&&function(){var e=l;ve(e.append,e,s)}(),function(){var e=n.fragment_renderer;return ve(e.render_verbatim,e,_,me({annotations:l}))}()}))}}),Xs=he("VerbatimMacro",[Ys,Yo],{__module__:Ps,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":r=i[o];break;case"verbatim_delimiters":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}var s=ve(wr,null,me(xe({macroname:r,arguments_spec_list:[ve(Qa.LatexDelimitedVerbatimParser,Qa,me({delimiters:n}))]},t)));ve(Cs,null,Xs,e,[],s)}))}}),Js=he("VerbatimEnvironment",[Ys,Xo],{__module__:Ps,get __init__(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}var i=tr([].slice.apply(arguments).slice(1,n+1))}else i=tr();ve(Cs,null,Js,e,i,r)}))}}),Zs={},Ks={};ue(Zs,"",dn),ue(Ks,"",Ct);var Qs="llm.feature.refs",e_=ve(Zs.getLogger,Zs,Qs),r_=he("ReferenceableInfo",[ge],{__module__:Qs,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"formatted_ref_llm_text":r=a[i];break;case"labels":n=a[i]}}}ve(ve(we,null,r_,"__init__"),null,e),e.formatted_ref_llm_text=r,e.labels=n,e._fields=tr(["formatted_ref_llm_text","labels"])}))},get get_target_id(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}if(Ne(!Ne(e.labels)))return null;var a=qr(e.labels,0),i=a[0],o=a[1];return ve(o_,null,i,o)}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or("{}(".format(e.__class__.__name__),ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return He(r)}())),")")}))}}),n_=he("RefInstance",[ge],{__module__:Qs,get __init__(){return fe(this,(function(e,r,n,t,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"ref_type":r=o[s];break;case"ref_label":n=o[s];break;case"formatted_ref_llm_text":t=o[s];break;case"target_href":a=o[s]}}}ve(ve(we,null,n_,"__init__"),null,e),e.ref_type=r,e.ref_label=n,e.formatted_ref_llm_text=t,e.target_href=a,e._fields=tr(["ref_type","ref_label","formatted_ref_llm_text","target_href"])}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or("{}(".format(e.__class__.__name__),ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return He(r)}())),")")}))}}),t_=function(e){return(+e).toString(16)},a_=ve(Ks.compile,Ks,"[^a-zA-Z0-9-]"),i_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("m"===t)e=n[t]}}return"_{}X".format(ve(t_,null,ve(Ge,null,ve((a=e).group,a))));var a},o_=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"ref_type":e=t[a];break;case"ref_label":r=t[a]}}}var i,o=ve((i=a_).sub,i,i_,e),s=function(){var e=a_;return ve(e.sub,e,i_,r)}();return"{}-{}".format(o,s)},s_=he("FeatureRefsRenderManager",[bs.RenderManager],{__module__:Qs,get initialize(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"add_external_ref_resolvers":r=t[a]}}}var i;e.ref_labels=wr({}),e.registered_references=wr({}),e.external_ref_resolvers=[],Ne(r)&&ve((i=e.external_ref_resolvers).extend,i,r),function(){var r=e.external_ref_resolvers;ve(r.extend,r,e.feature.external_ref_resolvers)}()}))},get register_reference_referenceable(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)switch(t){case"self":e=n[t];break;case"node":var a=n[t];break;case"referenceable_info":var i=n[t]}}}if(!Ne(!Ne(i.labels)))for(var o,s=Or("#",ve((o=i).get_target_id,o)),_=i.labels,l=0;l<je(_);l++){var c=qr(_,l),u=c[0],f=c[1];!function(){var r=e;ve(r.register_reference,r,u,f,me({formatted_ref_llm_text:i.formatted_ref_llm_text,node:a,target_href:s}))}()}}))},get register_reference(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"ref_type":r=a[i];break;case"ref_label":n=a[i];break;case"node":var o=a[i];break;case"formatted_ref_llm_text":var s=a[i];break;case"target_href":var _=a[i]}}}var l,c=ve((l=e).get_node_id,l,o),u=tr([c,r,n]);if(Ne(Ce(u,e.registered_references)))return e.registered_references;if(Ne(Ce(tr([r,n]),e.ref_labels))){var f=ve(Hr,null,"Duplicate reference label ‘{}:{}’ in the same document!".format(r,n));throw f.__cause__=null,f}var d=ve(n_,null,me({ref_type:r,ref_label:n,formatted_ref_llm_text:s,target_href:_}));return zr(e.registered_references,u,d),e.ref_labels.__setitem__([r,n],d),d}))},get get_ref(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"ref_type":r=i[o];break;case"ref_label":n=i[o];break;case"resource_info":t=i[o]}}}if(Ne(Ce(tr([r,n]),e.ref_labels)))return e.ref_labels.__getitem__([r,n]);for(var s,_=e.external_ref_resolvers,l=0;l<je(_);l++){var c=qr(_,l),u=(s=void 0,ve((s=c).get_ref,s,r,n,t,e.render_context));if(Ne(null!==u))return u}var f=ve(Hr,null,"Ref target ‘{}:{}’ found neither within database nor with any set external resolvers".format(r,n));throw f.__cause__=null,f}))},get render_ref(){return fe(this,(function(e,r,n,t,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"ref_type":r=s[_];break;case"ref_label":n=s[_];break;case"display_content_llm":t=s[_];break;case"resource_info":a=s[_];break;case"render_context":i=s[_]}}}var l,c=i.fragment_renderer;try{var u=ve((l=e).get_ref,l,r,n,a)}catch(e){if(Re(e,Ur)){var f=e,d=ve(Hr,null,"Unable to resolve reference to ‘{}:{}’: {} [in {}]".format(r,n,f,ve(ze,null,a)));throw d.__cause__=null,d}throw e}if(Ne(null===t))t=u.formatted_ref_llm_text;if(Ne(!Ne(ve(Re,null,t,Hi))))t=function(){var e=i.doc.environment;return ve(e.make_fragment,e,t,me({standalone_mode:!0}))}();var p=t.nodes;return function(){var e=c;return ve(e.render_link,e,"ref",u.target_href,p,me({render_context:i,annotations:["ref-{}".format(r)]}))}()}))}}),__=he("FeatureRefs",[bs],{__module__:Qs,feature_name:"refs",RenderManager:s_,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"external_ref_resolvers":r=t[a]}}}ve(ve(we,null,__,"__init__"),null,e),Ne(null!==r)?e.external_ref_resolvers=ve(nr,null,r):e.external_ref_resolvers=[]}))},get set_external_ref_resolvers(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"external_ref_resolvers":r=t[a]}}}var i;Ne(Ne(null!==e.external_ref_resolvers)&&ve(je,null,e.external_ref_resolvers))&&ve((i=e_).warning,i,"FeatureRefs.set_external_ref_resolvers(): There were already external refs resolvers set.  They will be replaced."),e.external_ref_resolvers=r}))},get add_external_ref_resolver(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"external_ref_resolver":r=t[a]}}}var i;ve((i=e.external_ref_resolvers).append,i,r)}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({macros:[ve(c_,null,me({macroname:"ref",command_arguments:tr(["ref_label"])})),ve(c_,null,me({macroname:"hyperref",command_arguments:tr(["[]ref_label","display_text"])}))]}))}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return"{}(external_ref_resolvers={})".format(e.__class__.__name__,ve(ze,null,e.external_ref_resolvers))}))}}),l_=wr({ref_label:ve(gs,null,ve(Qa.LatexCharsGroupParser,Qa),me({argname:"ref_label"})),"[]ref_label":ve(gs,null,ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["[","]"])})),me({argname:"ref_label"})),display_text:ve(gs,null,"{",me({argname:"display_text"}))}),c_=he("RefMacro",[Ls],{__module__:Qs,delayed_render:!0,get __init__(){return fe(this,(function(e,r){var n,t="ref",a=tr(["ref_label","display_text"]);if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"macroname":r=o[s];break;case"ref_type":t=o[s];break;case"command_arguments":a=o[s]}}}ve(ve(we,null,c_,"__init__"),null,e,me({macroname:r,arguments_spec_list:(n=e,ve(n._get_arguments_spec_list,n,a))})),e.ref_type=t,e.command_arguments=function(){for(var e,r=[],n=a,t=0;t<je(n);t++){var i=qr(n,t);e=void 0,ve(r.append,r,ve((e=i).py_replace,e,"[]",""))}return r}()}))},get _get_arguments_spec_list(){return de(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"cls":e=t[a];break;case"command_arguments":r=t[a]}}}return function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,qr(l_,a))}return e}()}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,e.command_arguments)),s=null,_=function(){var e=qr(o,"ref_label");return ve(e.get_content_as_chars,e)}();if(Ne(Ce(":",_))){var l=function(){var e=_;return ve(e.py_split,e,":",1)}();s=l[0],_=l[1]}if(Ne(Ce("display_text",o)))var c=function(){var e=qr(o,"display_text");return ve(e.get_content_nodelist,e)}();else c=null;r.llmarg_ref=tr([s,_]),r.llm_ref_info=wr({ref_type_and_target:tr([s,_]),display_content_nodelist:c})}))},get prepare_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=qr(r.llm_ref_info,"ref_type_and_target"),_=s[0],l=s[1],c=qr(r.llm_ref_info,"display_content_nodelist"),u=ve((o=n).feature_render_manager,o,"refs"),f=r.latex_walker.resource_info;try{return function(){var e=u;return ve(e.render_ref,e,_,l,c,f,n)}()}catch(e){if(Re(e,Ur)){var d=e;!function(){var e,n=e_;ve(n.error,n,"Failed to resolve reference to ‘{}:{}’: {} in ‘{}’ @ {}".format(_,l,d,ve((e=r).latex_verbatim,e),function(){var e=r;return ve(e.format_pos,e)}()))}();var p=ve(En,null,"Unable to resolve reference to ‘{}:{}’: {}".format(_,l,d),me({pos:r.pos}));throw p.__cause__=null,p}throw e}}))}}),u_={},f_={};ue(u_,"",dn),ue(f_,"",Ct);var d_="llm.feature.defterm",p_=(ve(u_.getLogger,u_,d_),function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return ve(f_.sub,f_,"\\s+"," ",ve((a=e).strip,a));var a}),g_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("node_term_arg_nodelist"===t)e=n[t]}}return ve(p_,null,ve((a=e).latex_verbatim,a));var a},h_=he("DefineTermEnvironment",[js],{__module__:d_,is_block_level:!0,allowed_in_standalone_mode:!1,allowed_ref_label_prefixes:tr(["topic"]),defterm_ref_type:"defterm",get __init__(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=": ";var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"environmentname":r=o[s];break;case"render_with_term":n=o[s];break;case"render_with_term_suffix":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}if(ve(ve(we,null,h_,"__init__"),null,e,me(xe({environmentname:r,arguments_spec_list:[ve(gs,null,"{",me({argname:"term"})),xs.label_arg]},a))),e.render_with_term=n,e.render_with_term_suffix=t,Ne(e.render_with_term)){var _=ve(qs,null,"",me({text_formats:["defterm-term"]}));_.is_block_heading=!0,e.render_term_text_format_spec=_}e.body_parsing_state_delta=ve(ps,null,me({is_block_level:e.is_block_level}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["term","label"]))),s=ve(g_,null,function(){var e=qr(o,"term");return ve(e.get_content_nodelist,e)}());return r.llmarg_term_llm_ref_label_verbatim=s,r.llmarg_labels=ve(xs.helper_collect_labels,xs,qr(o,"label"),e.allowed_ref_label_prefixes),r.llm_referenceable_infos=[ve(ks.ReferenceableInfo,ks,me({formatted_ref_llm_text:r.llmarg_term_llm_ref_label_verbatim,labels:Or([tr([e.defterm_ref_type,r.llmarg_term_llm_ref_label_verbatim])],ve(nr,null,r.llmarg_labels))}))],r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=r.llmarg_term_llm_ref_label_verbatim;if(Ne(ve((o=n).supports_feature,o,"refs")))for(var _=function(){var e=n;return ve(e.feature_render_manager,e,"refs")}(),l=r.llm_referenceable_infos,c=0;c<je(l);c++){var u=qr(l,c);!function(){var e=_;ve(e.register_reference_referenceable,e,me({node:r,referenceable_info:u}))}()}var f=r.nodelist;if(Ne(e.render_with_term)){var d=n.doc.environment,p=function(){var r=d;return ve(r.make_fragment,r,Or(s,e.render_with_term_suffix),me({standalone_mode:!0}))}(),g=function(){var n=p.latex_walker;return ve(n.make_node,n,Wn,me({macroname:"",spec:e.render_term_text_format_spec,macro_post_space:"",parsing_state:p.nodes.parsing_state,nodeargd:ve(Rn,null,me({arguments_spec_list:e.render_term_text_format_spec.arguments_spec_list,argnlist:[p.nodes]})),pos:r.pos,pos_end:r.pos_end}))}();!function(){var r=e.render_term_text_format_spec;ve(r.finalize_node,r,g)}();f=function(){var e=p.latex_walker;return ve(e.make_nodelist,e,Or([g],ve(nr,null,f)),me({parsing_state:r.nodelist.parsing_state}))}()}return function(){var e,t=n.fragment_renderer;return ve(t.render_semantic_block,t,me({content:(e=n.fragment_renderer,ve(e.render_nodelist,e,f,me({render_context:n,is_block_level:!0}))),role:"defterm",target_id:function(){var e=qr(r.llm_referenceable_infos,0);return ve(e.get_target_id,e)}()}))}()}))}}),v_=he("RefTermMacro",[Ls],{__module__:d_,allowed_in_standalone_mode:!1,defterm_ref_type:"defterm",get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,v_,"__init__"),null,e,me(xe({macroname:r,arguments_spec_list:[ve(gs,null,"[",me({argname:"ref_term"})),ve(gs,null,"{",me({argname:"term"}))]},n)))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["ref_term","term"])));Ne(function(){var e=qr(o,"ref_term");return ve(e.was_provided,e)}())?(r.llm_term_llm_show_term_nodelist=function(){var e=qr(o,"term");return ve(e.get_content_nodelist,e)}(),r.llm_term_llm_ref_label_verbatim=ve(g_,null,function(){var e=qr(o,"ref_term");return ve(e.get_content_nodelist,e)}())):(r.llm_term_llm_show_term_nodelist=function(){var e=qr(o,"term");return ve(e.get_content_nodelist,e)}(),r.llm_term_llm_ref_label_verbatim=ve(g_,null,r.llm_term_llm_show_term_nodelist)),r.llmarg_ref=tr([e.defterm_ref_type,r.llm_term_llm_ref_label_verbatim])}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=r.llm_term_llm_show_term_nodelist,_=r.llm_term_llm_ref_label_verbatim;if(Ne(!Ne((o=n,ve(o.supports_feature,o,"refs")))))return function(){var e=n.fragment_renderer;return ve(e.render_nodelist,e,s,me({render_context:n,is_block_level:!1}))}();var l=r.latex_walker.resource_info,c=function(){var e=n;return ve(e.feature_render_manager,e,"refs")}(),u=function(){var r=c;return ve(r.get_ref,r,e.defterm_ref_type,_,l)}();return function(){var e=n.fragment_renderer;return ve(e.render_link,e,"term",me({href:u.target_href,display_nodelist:s,render_context:n}))}()}))}}),m_=he("FeatureDefTerm",[bs],{__module__:d_,feature_name:"defterm",FeatureDocumentManager:null,FeatureRenderManager:null,render_defterm_with_term:!0,render_defterm_with_term_suffix:": ",get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({macros:[ve(v_,null,"term")],environments:[ve(h_,null,"defterm",me({render_with_term:e.render_defterm_with_term,render_with_term_suffix:e.render_defterm_with_term_suffix}))]}))}))}}),w_={};ue(w_,"",dn);var k_="llm.feature.graphics",y_=(ve(w_.getLogger,w_,k_),he("GraphicsResource",[ge],{__module__:k_,get __init__(){return fe(this,(function(e,r){var n=null,t=null,a=null,i=null,o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"src_url":r=_[l];break;case"srcset":n=_[l];break;case"graphics_type":t=_[l];break;case"dpi":a=_[l];break;case"pixel_dimensions":i=_[l];break;case"physical_dimensions":o=_[l]}}}ve(ve(we,null,y_,"__init__"),null,e),e.src_url=r,e.srcset=n,e.graphics_type=t,e.dpi=a,e.pixel_dimensions=i,e.physical_dimensions=o,e._fields=tr(["src_url","srcset","graphics_type","dpi","pixel_dimensions","physical_dimensions"])}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}({})").format,a,e.__class__.__name__,ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return r}()));var a}))}})),b_=he("SimpleIncludeGraphicsMacro",[Ls],{__module__:k_,is_block_level:!0,allowed_in_standalone_mode:!1,get __init__(){return fe(this,(function(e,r){var n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}ve(ve(we,null,b_,"__init__"),null,e,me(xe({macroname:"includegraphics",arguments_spec_list:[ve(gs,null,me({parser:ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["[","]"]),optional:!0})),argname:"graphics_options"})),ve(gs,null,me({parser:ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["{","}"])})),argname:"graphics_path"}))]},n)))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["graphics_options","graphics_path"])));return r.llmarg_graphics_options_value=function(){var e=qr(o,"graphics_options");return ve(e.get_content_as_chars,e)}(),r.llmarg_graphics_path=function(){var e=qr(o,"graphics_path");return ve(e.get_content_as_chars,e)}(),r.llm_resources=[wr({resource_type:"graphics_path",resource_source_type:"file",resource_source:r.llmarg_graphics_path})],r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s,_=n.fragment_renderer,l=r.llmarg_graphics_options_value,c=r.llmarg_graphics_path;if(Ne(l))throw(o=ve(En,null,"Graphics options are not supported here: ‘{}’".format(l),me({pos:qr(node_args,"graphics_options").nodelist.pos}))).__cause__=null,o;if(Ne(!Ne((s=n,ve(s.supports_feature,s,"graphics_resource_provider")))))throw(o=ve(RuntimeError,null,"LLM's ‘SimpleIncludeGraphicsSpecInfo’ (‘\\includegraphics’) requires a ‘graphics_resource_provider’ feature to be installed in the render context")).__cause__=null,o;var u=r.latex_walker.resource_info,f=function(){var e=n;return ve(e.feature_render_manager,e,"graphics_resource_provider")}(),d=function(){var e=f;return ve(e.get_graphics_resource,e,c,u)}();return function(){var e=_;return ve(e.render_graphics_block,e,d)}()}))}}),x_=he("FeatureSimplePathGraphicsResourceProvider",[bs],{__module__:k_,feature_name:"graphics_resource_provider",RenderManager:he("RenderManager",[bs.RenderManager],{__module__:k_,get get_graphics_resource(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"graphics_path":r=a[i];break;case"resource_info":n=a[i]}}}return ve(y_,null,me({src_url:r}))}))}})}),O_={},P_={};ue(O_,"",dn),ue(P_,"",Ct);var E_="llm.feature.cells",S_=(ve(O_.getLogger,O_,E_),he("_NotSpecified",[ge],{__module__:E_})),C_=he("LatexTabularRowSeparatorSpec",[Qi.MacroSpec],{__module__:E_,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}ve(ve(we,null,C_,"__init__"),null,e,me({macroname:"\\",arguments_spec_list:[]}))}))}}),L_=he("LatexTabularColumnSeparatorSpec",[Qi.SpecialsSpec],{__module__:E_,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}ve(ve(we,null,L_,"__init__"),null,e,me({specials_chars:"&",arguments_spec_list:[]}))}))}}),j_=wr({mergespec:ve(Dn,null,ve(Qa.LatexCharsGroupParser,Qa,me({enable_groups:!1})),me({argname:"mergespec"})),styles:ve(Dn,null,ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["<",">"]),enable_groups:!1,optional:!0})),me({argname:"styles"})),styles_mapping:ve(Dn,null,ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["<",">"]),enable_groups:!1,optional:!0})),me({argname:"styles_mapping"})),cellcontents:ve(gs,null,"{",me({argname:"cellcontents",is_block_level:!0}))}),N_=he("MergeMacroSpec",[Qi.MacroSpec],{__module__:E_,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="merge";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}ve(ve(we,null,N_,"__init__"),null,e,r,me({arguments_spec_list:[qr(j_,"mergespec")]}))}))}});zr(j_,"placement",ve(Dn,null,ve(Qa.LatexDelimitedGroupParser,Qa,me({delimiters:tr(["[","]"]),optional:!0})),me({argname:"placement",parsing_state_delta:ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({extend_latex_context:ve(wr,null,me({macros:[ve(N_,null)]}))}))}))),zr(j_,"placement_mapping",ve(Dn,null,ve(Qa.LatexDelimitedGroupParser,Qa,me({delimiters:tr(["[","]"]),optional:!0})),me({argname:"placement_mapping",parsing_state_delta:ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({extend_latex_context:ve(wr,null,me({macros:[ve(N_,null)]}))}))})));var A_=he("CellMacro",[Us],{__module__:E_,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="cell";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}ve(ve(we,null,A_,"__init__"),null,e,me({macroname:r,arguments_spec_list:[qr(j_,"styles"),qr(j_,"placement"),qr(j_,"cellcontents")]}))}))}});zr(j_,"celldata_contents",ve(Dn,null,"{",me({argname:"celldata_contents",parsing_state_delta:ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({extend_latex_context:ve(wr,null,me({macros:[ve(A_,null),ve(C_,null)],specials:[ve(L_,null)]}))}))})));var I_=he("CelldataMacroSpec",[Qi.MacroSpec],{__module__:E_,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="celldata";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}ve(ve(we,null,I_,"__init__"),null,e,r,me({arguments_spec_list:[qr(j_,"styles_mapping"),qr(j_,"placement_mapping"),qr(j_,"celldata_contents")]}))}))}}),M_=he("CellIndexRangeModel",[ge],{__module__:E_,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"start":r=a[i];break;case"end":n=a[i]}}}ve(ve(we,null,M_,"__init__"),null,e),e.start=r,e.end=n}))},_fields:tr(["start","end"]),get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(Cr(e.end,Or(e.start,1)))?"{}".format(Or(e.start,1)):"[{}-{}]".format(Or(e.start,1),e.end)}))}}),T_=he("CellPlacementModel",[ge],{__module__:E_,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"row_range":r=a[i];break;case"col_range":n=a[i]}}}ve(ve(we,null,T_,"__init__"),null,e),e.row_range=r,e.col_range=n}))},_fields:tr(["row_range","col_range"]),get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return"{},{}".format(ve(ze,null,e.row_range),ve(ze,null,e.col_range))}))}}),D_=he("CellModel",[ge],{__module__:E_,get __init__(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placement":r=i[o];break;case"styles":n=i[o];break;case"content_nodes":t=i[o]}}}ve(ve(we,null,D_,"__init__"),null,e),e.placement=r,e.styles=n,e.content_nodes=t}))},_fields:tr(["placement","styles","content_nodes"]),get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return"<Cell @{} <{}> (‘{}’)>".format(ve(ze,null,e.placement),ve(" ".join," ",e.styles),ve(R_,null,ve((a=e.content_nodes).latex_verbatim,a)));var a}))}}),R_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("s"===t)e=n[t]}}return ve(P_.sub,P_,"(^\\s+|\\s+$)"," ",e)},q_=he("CellPlacementsMappingModel",[ge],{__module__:E_,get __init__(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"row_placements":r=a[i];break;case"col_placements":n=a[i]}}}ve(ve(we,null,q_,"__init__"),null,e),e.row_placements=r,e.col_placements=n}))},_fields:tr(["row_placements","col_placements"]),get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Or(Or("{}(".format(e.__class__.__name__),ve("".join,"",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"\n    {}={}".format(a,ve(ze,null,ve(Ee,null,e,a))))}return He(r)}())),"\n)".format())}))},get _get_index_range(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placements":r=i[o];break;case"j":n=i[o];break;case"current":t=i[o]}}}if(Ne(Cr(ve(je,null,r),0)))return ve(M_,null,t,Or(t,1));if(Ne(jr(n,Pr(ve(je,null,r),1))))return qr(r,n);var s=qr(r,yr(1));if(Ne(null===s.end)){var _=Or(s.start,Or(Pr(n,ve(je,null,r)),1));return ve(M_,null,_,Or(_,1))}return s}))},get get_row_index_range(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"row_j":r=a[i];break;case"current_row":n=a[i]}}}return ve((o=e)._get_index_range,o,e.row_placements,r,n);var o}))},get get_col_index_range(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"col_j":r=a[i];break;case"current_col":n=a[i]}}}return ve((o=e)._get_index_range,o,e.col_placements,r,n);var o}))},get start_row_col(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"current_row":r=a[i];break;case"current_col":n=a[i]}}}return tr([(o=e,ve(o.get_row_index_range,o,0,r)).start,function(){var r=e;return ve(r.get_col_index_range,r,0,n)}().start]);var o}))}}),z_=he("CellsModel",[ge],{__module__:E_,get __init__(){return fe(this,(function(e){var r,n=wr();if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("self"===i)e=a[i];else n[i]=a[i];delete n.__kwargtrans__}}if(ve(ve(we,null,z_,"__init__"),null,e),e.current_row=0,e.current_col=0,e.row_names=wr({}),e.column_names=wr({}),Ne(n))return e.cells_size=ve((r=n).py_pop,r,"cells_size"),e.cells_data=function(){var e=n;return ve(e.py_pop,e,"cells_data")}(),void function(){var r=e;ve(r.finalize,r)}();e.cells_size=[null,null],e.cells_data=[],e.grid_data=null}))},_fields:tr(["cells_size","cells_data"]),get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a=ve("".join,"",function(){for(var r=[],n=e.cells_data,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,Or("\n        ",ve(ze,null,a)))}return r}());return"{}(\n    cells_size={},\n    cells_data=[{}\n    ])".format(e.__class__.__name__,ve(ze,null,e.cells_size),a)}))},get add_cell_node(){return fe(this,(function(e,r,n,t){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cell_node":r=i[o];break;case"default_placement":n=i[o];break;case"default_styles":t=i[o]}}}var s,_=(s=ve(st,null,me({node:r})),ve(s.get_all_arguments_info,s,tr(["styles","placement","cellcontents"])));if(Ne(null===t))t=[];if(Ne(function(){var e=qr(_,"styles");return ve(e.was_provided,e)}()))var l=Or(function(){var e,r=ve((e=qr(_,"styles")).get_content_as_chars,e);return ve(r.py_split,r," ")}(),t);else l=t;if(Ne(function(){var e=qr(_,"placement");return ve(e.was_provided,e)}()))var c=function(){var e=qr(_,"placement");return ve(e.get_content_nodelist,e)}();else c=n;var u=function(){var e=qr(_,"cellcontents");return ve(e.get_content_nodelist,e)}();return function(){var r=e;return ve(r.add_cell,r,c,l,u)}()}))},get add_cell(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placement_spec":r=i[o];break;case"styles":n=i[o];break;case"content_nodes":t=i[o]}}}var s,_=ve((s=e).parse_placement_spec,s,r),l=ve(D_,null,me({placement:_,styles:n,content_nodes:t}));return function(){var r=e.cells_data;ve(r.append,r,l)}(),Ne(Ne(null===qr(e.cells_size,0))||Ir(l.placement.row_range.end,qr(e.cells_size,0)))&&zr(e.cells_size,0,l.placement.row_range.end),Ne(Ne(null===qr(e.cells_size,1))||Ir(l.placement.col_range.end,qr(e.cells_size,1)))&&zr(e.cells_size,1,l.placement.col_range.end),function(){var r=e;ve(r.move_to_col,r,l.placement.col_range.end)}(),l}))},get move_to_col(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"col":r=t[a]}}}e.current_col=r}))},get move_next_row(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.current_row=ve(Tr,null,e.current_row,1),e.current_col=0}))},get finalize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.grid_data=function(){for(var r=[],n=0;n<qr(e.cells_size,0);n++)ve(r.append,r,function(){for(var r=[],n=0;n<qr(e.cells_size,1);n++)ve(r.append,r,null);return r}());return r}();for(var a=e.cells_data,i=0;i<je(a);i++)for(var o=qr(a,i),s=!0,_=o.placement.row_range.start;_<o.placement.row_range.end;_++)for(var l=o.placement.col_range.start;l<o.placement.col_range.end;l++){if(Ne(null!==qr(qr(e.grid_data,_),l))){var c=qr(qr(qr(e.grid_data,_),l),"cell"),u=ve(Hr,null,"‘{}’ overlaps with ‘{}’".format(ve(ze,null,o),ve(ze,null,c)));throw u.__cause__=null,u}zr(qr(e.grid_data,_),l,wr({cell:o,is_topleft:s}));s=!1}}))},get add_celldata_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"celldata_node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["styles_mapping","placement_mapping","celldata_contents"]))),s=function(){for(var e,r,n=[],t=(r=ve((e=qr(o,"styles_mapping")).get_content_as_chars,e),ve(r.py_split,r,",")),a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,function(){var e=i;return ve(e.py_split,e)}())}return n}(),_=function(){var e=qr(o,"placement_mapping");return ve(e.get_content_nodelist,e)}(),l=function(){var e=qr(o,"celldata_contents");return ve(e.get_content_nodelist,e)}(),c=function(){var e=l;return ve(e.split_at_node,e,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("node"===t)e=n[t]}}return Ne(ve((a=e).isNodeType,a,Wn))&&Cr(e.macroname,"\\");var a}))}(),u=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("node"===t)e=n[t]}}return!!Ne(Ne(function(){var r=e;return ve(r.isNodeType,r,$n)}())&&Cr(e.specials_chars,"&"))},f=function(){for(var e,r=[],n=c,t=0;t<je(n);t++){var a=qr(n,t);e=void 0,ve(r.append,r,ve((e=a).split_at_node,e,u))}return r}();!function(){var r=e;ve(r.add_celldata,r,_,s,f)}()}))},get add_celldata(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placement_mapping_spec":r=i[o];break;case"styles_mapping":n=i[o];break;case"data_content_nodes":t=i[o]}}}var s,_=ve((s=e).parse_placement_mapping_spec,s,r),l=function(){var r=_;return ve(r.start_row_col,r,me({current_row:e.current_row,current_col:e.current_col}))}();e.current_row=l[0],e.current_col=l[1];for(var c=0,u=t,f=0;f<je(u);f++){for(var d=qr(u,f),p=0,g=d,h=0;h<je(g);h++){var v=qr(g,h),m=function(){var r=_;return ve(r.get_row_index_range,r,c,me({current_row:e.current_row}))}(),w=function(){var r=_;return ve(r.get_col_index_range,r,p,me({current_col:e.current_col}))}(),k=ve(T_,null,me({row_range:m,col_range:w}));if(Ne(jr(p,ve(je,null,n))))var y=qr(n,p);else y=qr(n,yr(1));var b=function(){var e=v.latex_walker;return ve(e.filter_whitespace_comments_nodes,e,v)}();if(Ne(Ne(Cr(ve(je,null,b),1))&&Ne(function(){var e=qr(b,0);return ve(e.isNodeType,e,Wn)}())&&Cr(qr(b,0).macroname,"cell"))){var x=function(){var r=e;return ve(r.add_cell_node,r,qr(b,0),me({default_placement:k,default_styles:y}))}();p=ve(Tr,null,p,Pr(x.placement.col_range.end,x.placement.col_range.start))}else if(Ne(Cr(ve(je,null,b),0))){e.current_col=w.end;p=ve(Tr,null,p,1)}else{!function(){var r=e;ve(r.add_cell,r,k,y,v)}();p=ve(Tr,null,p,1)}}!function(){var r=e;ve(r.move_next_row,r)}();c=ve(Tr,null,c,1),p=0}}))},_rx_int:ve(P_.compile,P_,"^\\d+$"),get parse_cell_index_spec(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=S_;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"index_spec":r=o[s];break;case"is_row":n=o[s];break;case"is_col":t=o[s];break;case"py_default":a=o[s]}}}if(Ne(ve(Re,null,r,ir)))var _=r;else _=ve((l=r).get_content_as_chars,l);var l;_=function(){var e=_;return ve(e.strip,e)}();if(Ne(Ne(!Ne(_))||Cr(_,"."))){if(Ne(a!==S_))return a;if(Ne(n))return e.current_row;if(Ne(t))return e.current_col;var c;throw(c=ve(RuntimeError,null,"Internal error: Neither is_row nor is_col is set!")).__cause__=null,c}if(Ne(function(){var r=e._rx_int;return ve(r.match,r,_)}()))return Pr(ve(Ie,null,_),1);if(Ne(Ne(n)&&Ce(_,e.row_names)))return qr(e.row_names,_);if(Ne(Ne(t)&&Ce(_,e.col_names)))return qr(e.col_names,_);throw(c=ve(Hr,null,"Invalid cell index: ‘{}’, expected number or valid alias name".format(_))).__cause__=null,c}))},get parse_cell_index_range_spec(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=S_;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"range_spec_s":r=_[l];break;case"is_row":n=_[l];break;case"is_col":t=_[l];break;case"py_default":a=_[l];break;case"default_start":i=_[l];break;case"default_end":o=_[l]}}}if(Ne(Ce(",",r))){for(var c=ve((y=r).py_split,y,","),u=[],f=null,d=null,p=c,g=0;g<je(p);g++){for(var h=qr(p,g),v=function(){var r=e;return ve(r.parse_cell_index_range_spec,r,h,me({is_row:n,is_col:t,py_default:a}))}(),m=v[0],w=v[1],k=m;k<w;k++){if(Ne(Ir(k,ve(je,null,u))))u=ve(Tr,null,u,function(){for(var e=[],r=0;r<Or(Pr(w,ve(je,null,u)),1);r++)ve(e.append,e,!1);return e}());zr(u,k,!0)}if(Ne(Ne(null===f)||Ar(f,m)))f=m;if(Ne(Ne(null===d)||jr(d,w)))d=w}for(k=f;k<d;k++)if(Ne(!Ne(qr(u,k)))){throw(P=ve(Hr,null,"Specified range ‘{}’ is not contiguous".format(r))).__cause__=null,P}return tr([f,d])}var y;if(Ne(Ce("-",r))){v=function(){var e=r;return ve(e.py_split,e,"-",1)}();var b=v[0],x=v[1],O=(m=function(){var r=e;return ve(r.parse_cell_index_spec,r,b,me({is_row:n,is_col:t,py_default:i}))}(),function(){var r=e;return ve(r.parse_cell_index_spec,r,x,me({is_row:n,is_col:t,py_default:null}))}());if(Ne(null===O))w=o;else w=Or(O,1);return tr([m,w])}if(Ne(Ce("+",r))){v=function(){var e=r;return ve(e.py_split,e,"+",1)}(),b=v[0];var P,E=v[1];m=function(){var r=e;return ve(r.parse_cell_index_spec,r,b,me({is_row:n,is_col:t,py_default:a}))}();if(Ne(!Ne(function(){var r=e._rx_int;return ve(r.match,r,E)}())))throw(P=ve(Hr,null,"Invalid number in ‘START+N’ cell index range specification: ‘{}’".format(E))).__cause__=null,P;var S=ve(Ie,null,E);return tr([m,w=Or(m,S)])}k=function(){var i=e;return ve(i.parse_cell_index_spec,i,r,me({is_row:n,is_col:t,py_default:a}))}();return tr([k,Or(k,1)])}))},get parse_placement_index_spec(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=S_;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=0;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=S_;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"placement_index_spec":r=_[l];break;case"is_row":n=_[l];break;case"is_col":t=_[l];break;case"py_default":a=_[l];break;case"default_start":i=_[l];break;case"default_end":o=_[l]}}}if(Ne(Cr(ve(je,null,r),0))){if(Ne(n))return ve(M_,null,me({start:e.current_row,end:Or(e.current_row,1)}));if(Ne(t))return ve(M_,null,me({start:e.current_col,end:Or(e.current_col,1)}));throw(d=ve(RuntimeError,null,"Internal error, neither is_row nor is_col was set here.")).__cause__=null,d}var c,u=ve((c=r.latex_walker).filter_whitespace_comments_nodes,c,r);if(Ne(Lr(ve(je,null,u),1))){if(Ne(n))var f="ROW";else if(Ne(t))f="COL";else f=null;var d;throw(d=ve(En,null,"Bad cell index or merge range specification, expected ‘{}’ or ‘\\merge{}{}-RANGE{}’, got {} ({} nodes)".format(f,"{",f,"}",ve(ze,null,r),ve(je,null,u)),me({pos:u.pos}))).__cause__=null,d}var p=qr(u,0);if(Ne(Ne(function(){var e=p;return ve(e.isNodeType,e,Wn)}())&&Cr(p.macroname,"merge"))){var g=function(){var e=ve(st,null,me({node:p}));return ve(e.get_all_arguments_info,e,tr(["mergespec"]))}(),h=function(){var e=qr(g,"mergespec");return ve(e.get_content_as_chars,e)}();if(Ne((v=o)===S_)){if(Ne(n))var v=qr(e.cells_size,0);if(Ne(t))v=qr(e.cells_size,1)}var m=function(){var r=e;return ve(r.parse_cell_index_range_spec,r,h,me({is_row:n,is_col:t,default_start:i,default_end:v}))}(),w=m[0],k=m[1];return ve(M_,null,me({start:w,end:k}))}var y=function(){var r,i=e;return ve(i.parse_cell_index_spec,i,ve((r=u).get_content_as_chars,r),me({is_row:n,is_col:t,py_default:a}))}();return ve(M_,null,me({start:y,end:Or(y,1)}))}))},get parse_placement_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"placement_spec":r=t[a]}}}if(Ne(ve(Re,null,r,T_)))return r;var i,o=(l=tr([[],[]]))[0],s=l[1];if(Ne(null!==r)){var _=ve((i=r).split_at_chars,i,";",me({keep_empty:!0}));if(Ne(Cr(ve(je,null,_),2)))o=(l=_)[0],s=l[1];else if(Ne(Cr(ve(je,null,_),1))){var l;s=(l=_)[0]}else if(!Ne(Cr(ve(je,null,_),0))){var c=ve(En,null,"Bad cell placement specification, expected ‘ROW;COL’ or ‘COL’, got ‘{}’".format(ve(R_,null,function(){var e=r;return ve(e.latex_verbatim,e)}())),me({pos:r.pos}));throw c.__cause__=null,c}}var u=function(){var r=e;return ve(r.parse_placement_index_spec,r,o,me({is_row:!0}))}(),f=function(){var r=e;return ve(r.parse_placement_index_spec,r,s,me({is_col:!0}))}();return ve(T_,null,me({row_range:u,col_range:f}))}))},get parse_placement_mapping_index_spec(){return fe(this,(function(e,r,n,t,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"placement_mapping_index_spec":r=o[s];break;case"index_end":n=o[s];break;case"is_row":t=o[s];break;case"is_col":a=o[s]}}}if(Ne(Cr(ve(je,null,r),0)))return[];for(var _,l=ve((_=r).split_at_chars,_,",",me({keep_empty:!0})),c=0,u=[],f=l,d=0;d<je(f);d++){var p=qr(f,d),g=function(){var e=p.latex_walker;return ve(e.filter_whitespace_comments_nodes,e,p)}();if(Ne(Lr(ve(je,null,g),1))){if(Ne(t))var h="ROW-RANGE";else if(Ne(a))h="COL-RANGE";else h=null;var v=ve(En,null,"Bad cell index or range or merge range specification, expected ‘{}’ or ‘\\merge{}{}-RANGE{}’, got {} ({} nodes)".format(h,"{",h,"}",ve(ze,null,placement_index_spec),ve(je,null,g)),me({pos:g.pos}));throw v.__cause__=null,v}var m=qr(g,0);if(Ne(Ne(function(){var e=m;return ve(e.isNodeType,e,Wn)}())&&Cr(m.macroname,"merge"))){var w=function(){var e=ve(st,null,me({node:m}));return ve(e.get_all_arguments_info,e,tr(["mergespec"]))}(),k=function(){var e=qr(w,"mergespec");return ve(e.get_content_as_chars,e)}(),y=function(){var r=e;return ve(r.parse_cell_index_range_spec,r,k,me({is_row:t,is_col:a,py_default:c,default_start:c,default_end:null}))}(),b=y[0],x=y[1];!function(){var e=u;ve(e.append,e,ve(M_,null,me({start:b,end:x})))}();c=x}else{y=function(){var r,n=e;return ve(n.parse_cell_index_range_spec,n,ve((r=g).get_content_as_chars,r),me({is_row:t,is_col:a,py_default:c,default_start:c,default_end:null}))}();var O=y[0],P=y[1];if(Ne(null===P)){!function(){var e=u;ve(e.append,e,ve(M_,null,me({start:O,end:null})))}();c=null}else for(var E=O;E<P;E++){!function(){var e=u;ve(e.append,e,ve(M_,null,me({start:E,end:Or(E,1)})))}();c=Or(E,1)}}}return u}))},get parse_placement_mapping_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"placement_mapping_spec":r=t[a]}}}var i,o=ve((i=r).split_at_chars,i,";",me({keep_empty:!0}));if(Ne(Cr(ve(je,null,o),2)))var s=(c=o)[0],_=c[1];else if(Ne(Cr(ve(je,null,o),1)))s=[],_=(c=o)[0];else{if(!Ne(Cr(ve(je,null,o),0))){var l=ve(En,null,"Expected ‘ROWS;COLS’ or ‘COLS’ or ‘’ for placement argument, got ‘{}’".format(ve(R_,null,function(){var e=r;return ve(e.latex_verbatim,e)}())),me({pos:r.pos}));throw l.__cause__=null,l}var c;s=(c=tr([[],[]]))[0],_=c[1]}var u=function(){var r=e;return ve(r.parse_placement_mapping_index_spec,r,s,me({index_end:null,is_row:!0}))}(),f=function(){var r=e;return ve(r.parse_placement_mapping_index_spec,r,_,me({index_end:null,is_col:!0}))}();return ve(q_,null,me({row_placements:u,col_placements:f}))}))}}),F_=he("CellsEnvironment",[js],{__module__:E_,is_block_level:!0,allowed_in_standalone_mode:!0,body_contents_is_block_level:!0,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="cells";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"environmentname":r=t[a]}}}ve(ve(we,null,F_,"__init__"),null,e,me({environmentname:r}))}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}return ve(Qi.LatexEnvironmentBodyContentsParser,Qi,me({environmentname:r.arg,contents_parsing_state_delta:ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({extend_latex_context:ve(wr,null,me({macros:[ve(A_,null),ve(I_,null),ve(C_,null)]}))})),child_parsing_state_delta:ve(ut,null)}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}for(var i,o=ve(z_,null),s=r.nodelist,_=0;_<je(s);_++){var l=qr(s,_);if(Ne((i=void 0,ve((i=l).isNodeType,i,Wn)))){if(Ne(Cr(l.macroname,"cell"))){!function(){var e=o;ve(e.add_cell_node,e,l)}();continue}if(Ne(Cr(l.macroname,"celldata"))){!function(){var e=o;ve(e.add_celldata_node,e,l)}();continue}if(Ne(Cr(l.macroname,"\\"))){!function(){var e=o;ve(e.move_next_row,e)}();continue}}if(!Ne(function(){var e=l;return ve(e.isNodeType,e,Un)}())&&!Ne(Ne(function(){var e=l;return ve(e.isNodeType,e,Gn)}())&&Cr(ve(je,null,function(){var e=l.chars;return ve(e.strip,e)}()),0))){var c=ve(En,null,"You cannot place ‘{}’ here.  Expected: \\cell, \\celldata, \\\\.".format(ve(R_,null,function(){var e=l;return ve(e.latex_verbatim,e)}())));throw c.__cause__=null,c}}!function(){var e=o;ve(e.finalize,e)}(),r.llm_cells_model=o}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((o=n.fragment_renderer).render_cells,o,me({cells_model:r.llm_cells_model,render_context:n}));var o}))}}),G_=(he("FeatureProvideCells",[bs],{__module__:E_,DocumentManager:null,RenderManager:null,get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({environments:[ve(F_,null)]}))}))}}),{});e(G_,"alphacounter",(function(){return U_})),e(G_,"Alphacounter",(function(){return W_})),e(G_,"_romancounterchars",(function(){return V_})),e(G_,"romancounter",(function(){return H_})),e(G_,"Romancounter",(function(){return $_})),e(G_,"_fnsymbols",(function(){return Y_})),e(G_,"fnsymbolcounter",(function(){return X_})),e(G_,"_unicodesuperscriptdigits",(function(){return J_})),e(G_,"_unicodesubscriptdigits",(function(){return Z_})),e(G_,"customdigitscounter",(function(){return K_})),e(G_,"unicodesuperscriptcounter",(function(){return Q_})),e(G_,"unicodesubscriptcounter",(function(){return el})),e(G_,"standard_counter_formatters",(function(){return rl})),e(G_,"_standard_tag_template_initials_formatters",(function(){return nl})),e(G_,"parse_counter_formatter",(function(){return tl})),e(G_,"_parse_counter_formatter_from_tag_template",(function(){return al}));var B_={};ue(B_,"",Ct);var U_=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"n":e=t[a];break;case"lower":r=t[a]}}}var i,o=Or(1,xr(e=ve(Dr,null,e,1),26)),s=kr(e,26),_=br(ve(Fe,null,Or(97,s)),o);return Ne(r)?_:ve((i=_).upper,i)},W_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(U_,null,e,me({lower:!1}))},V_=tr([tr([1e3,"M"]),tr([900,"CM"]),tr([500,"D"]),tr([400,"CD"]),tr([100,"C"]),tr([90,"XC"]),tr([50,"L"]),tr([40,"XL"]),tr([10,"X"]),tr([9,"IX"]),tr([5,"V"]),tr([4,"IV"]),tr([1,"I"])]),H_=function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="";if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"n":e=a[i];break;case"lower":r=a[i];break;case"zero":n=a[i]}}}var o="";if(Ne(Cr(e,0)))return n;for(var s,_=V_,l=0;l<je(_);l++){var c=qr(_,l),u=c[0],f=c[1];o=ve(Tr,null,o,br(f,xr(e,u))),e=kr(e,u)}return Ne(r)?ve((s=o).lower,s):o},$_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(H_,null,e,me({lower:!1}))},Y_=["*","†","‡","§","¶","‖"],X_=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=Y_;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"n":e=t[a];break;case"symbols":r=t[a]}}}e=ve(Dr,null,e,1);var i=ve(je,null,r),o=Or(1,xr(e,i)),s=kr(e,i),_=br(qr(r,s),o);return _},J_=[ve(Fe,null,8304),ve(Fe,null,185),ve(Fe,null,178),ve(Fe,null,179),ve(Fe,null,8308),ve(Fe,null,8309),ve(Fe,null,8310),ve(Fe,null,8311),ve(Fe,null,8312),ve(Fe,null,8313)],Z_=function(){for(var e=[],r=0;r<10;r++)ve(e.append,e,ve(Fe,null,Or(8320,r)));return e}(),K_=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="0123456789";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"n":e=t[a];break;case"digits":r=t[a]}}}for(var i=ve(je,null,r),o="";Ne(e);){var s=tr([xr(e,i),kr(e,i)]),_=s[0],l=s[1];o=Or(qr(r,l),o),e=_}return ve("".join,"",o)},Q_=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(K_,null,e,me({digits:J_}))},el=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(K_,null,e,me({digits:Z_}))},rl=wr({alph:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(U_,null,e,me({lower:!0}))},Alph:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(U_,null,e,me({lower:!1}))},roman:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(H_,null,e,me({lower:!0}))},Roman:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(H_,null,e,me({lower:!1}))},arabic:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(ir,null,e)},fnsymbol:function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return ve(X_,null,e)},unicodesuperscript:Q_,unicodesubscript:el}),nl=wr({a:U_,A:W_,i:H_,I:$_,1:ir}),tl=function(e,r,n,t){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=rl;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=nl;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"counter_formatter":e=i[o];break;case"named_counter_formatters":r=i[o];break;case"str_use_tag_template":n=i[o];break;case"tag_template_initials_counters":t=i[o]}}}if(Ne(ve(qe,null,e)))return e;if(Ne(ve(Re,null,e,ir))){if(Ne(Ce(e,r)))return qr(r,e);if(Ne(n))return ve(al,null,e,t)}if(Ne(ve(Re,null,e,wr))&&Ne(Ce("template",e))){var s=qr(e,"template"),_=ve("|".join,"|",function(){for(var e,n=[],t=ve((e=r).py_keys,e),a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,ve(B_.escape,B_,i))}return He(n)}()),l=ve(B_.compile,B_,Or(Or("\\$\\{(",_),")\\}"));return function(e){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("n"===a)e=t[a]}}return ve((i=l).sub,i,(function(n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)"m"===i&&(n=a[i])}}return ve(qr(r,ve((o=n).group,o,1)),null,e);var o}),s);var i}}var c=ve(Hr,null,"Invalid counter_formatter: ‘{}’".format(ve(ze,null,e)));throw c.__cause__=null,c},al=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=nl;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"tag_template":e=t[a];break;case"tag_template_initials_counters":r=t[a]}}}var i,o,s=ve(B_.compile,B_,Or(Or("[",ve("".join,"",ve((i=r).py_keys,i))),"]")),_=ve((o=s).search,o,e);if(Ne(null!==_)){var l=Fr(e,0,function(){var e=_;return ve(e.start,e)}(),1),c=Fr(e,function(){var e=_;return ve(e.end,e)}(),null,1),u=qr(r,function(){var e=_;return ve(e.group,e)}());return function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return Or(Or(l,ve(u,null,e)),c)}}return function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("n"===a)r=t[a]}}return e}},il={};ue(il,"",dn);var ol="llm.feature.floats",sl=(ve(il.getLogger,il,ol),he("FloatContentHandlerBase",[ge],{__module__:ol,get float_content_set_extra_definitions(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"extend_latex_context":r=t[a]}}}}))},get float_handle_content_nodes(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_node":r=a[i];break;case"content_nodes":n=a[i]}}}var o=ve(RuntimeError,null,"This method needs to be reimplemented in subclasses!".format());throw o.__cause__=null,o}))}})),_l=he("FloatContentAnyContent",[sl],{__module__:ol,get float_handle_content_nodes(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_node":r=a[i];break;case"content_nodes":n=a[i]}}}return n}))}}),ll=he("FloatContentIncludeGraphics",[sl],{__module__:ol,get float_content_set_extra_definitions(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"extend_latex_context":r=t[a]}}}var i;ve((i=qr(r,"macros")).append,i,ve(b_,null,me({macroname:"includegraphics"})))}))},get float_handle_content_nodes(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_node":r=a[i];break;case"content_nodes":n=a[i]}}}var o;n=ve((o=n.latex_walker).filter_whitespace_comments_nodes,o,n);if(Ne(Cr(ve(je,null,n),1))){var s=qr(n,0);if(Ne(Ne(function(){var e=s;return ve(e.isNodeType,e,Wn)}())&&Cr(s.macroname,"includegraphics")))return n}var _=ve(En,null,"expected exactly one \\includegraphics command".format(),me({pos:n.pos}));throw _.__cause__=null,_}))}}),cl=he("FloatContentCells",[sl],{__module__:ol,get float_content_set_extra_definitions(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"extend_latex_context":r=t[a]}}}var i;ve((i=qr(r,"environments")).append,i,ve(F_,null))}))},get float_handle_content_nodes(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_node":r=a[i];break;case"content_nodes":n=a[i]}}}var o;n=ve((o=n.latex_walker).filter_whitespace_comments_nodes,o,n);if(Ne(Cr(ve(je,null,n),1))){var s=qr(n,0);if(Ne(Ne(function(){var e=s;return ve(e.isNodeType,e,Vn)}())&&Cr(s.environmentname,"cells")))return n}var _=ve(En,null,"expected exactly one \\begin{}cells{}...\\end{}cells{} environment".format("{","}","{","}"),me({pos:n.pos}));throw _.__cause__=null,_}))}}),ul=wr({any:_l,includegraphics:ll,cells:cl}),fl=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("c"===t)e=n[t]}}if(Ne(ve(Re,null,e,sl)))return e;if(Ne(ve(Re,null,e,ir)))e=wr({name:e});if(Ne(Ce(qr(e,"name"),ul)))return ve(qr(ul,qr(e,"name")),null,me(ve((a=e).py_get,a,"config",wr({}))));var a,i=ve(Hr,null,"Invalid float handler specification: {}".format(ve(ze,null,e)));throw i.__cause__=null,i},dl=he("FloatEnvironment",[js],{__module__:ol,is_block_level:!0,float_content_is_block_level:!0,float_content_render_at_environment_node_location:!0,allowed_in_standalone_mode:!1,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_type":r=a[i];break;case"content_handlers":n=a[i]}}}if(ve(ve(we,null,dl,"__init__"),null,e,me({environmentname:r,arguments_spec_list:[]})),Ne(null===n))n=["includegraphics","cells"];n=function(){for(var e=[],r=n,t=0;t<je(r);t++){var a=qr(r,t);ve(e.append,e,ve(fl,null,a))}return e}();e.float_type=r,e.content_handlers=n}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}for(var s,_=ve(wr,null,me({macros:[ve(Yo,null,"label",me({arguments_spec_list:[ve(gs,null,me({parser:ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["{","}"])})),argname:"label"}))]})),ve(Yo,null,"caption",me({arguments_spec_list:[ve(gs,null,"{",me({argname:"captiontext"}))]}))],environments:[],specials:[]})),l=e.content_handlers,c=0;c<je(l);c++){var u=qr(l,c);s=void 0,ve((s=u).float_content_set_extra_definitions,s,_)}return ve(uo,null,me({environmentname:r.arg,contents_parsing_state_delta:ve(Uo,null,me({extend_latex_context:_,set_attributes:ve(wr,null,me({is_block_level:e.float_content_is_block_level}))}))}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}r.llm_float_label=ve(wr,null,me({ref_label_prefix:null,ref_label:null,label_node:null})),r.llm_float_caption=ve(wr,null,me({caption_nodelist:null,caption_node:null}));for(var i,o=[],s=r.nodelist,_=0;_<je(s);_++){var l=qr(s,_);if(Ne((i=void 0,ve((i=l).isNodeType,i,Wn)))){if(Ne(Cr(l.macroname,"label"))){zr(r.llm_float_label,"label_node",l);var c,u=function(){var e=ve(st,null,me({node:l}));return ve(e.get_all_arguments_info,e,tr(["label"]))}(),f=function(){var e=qr(u,"label");return ve(e.get_content_as_chars,e)}();if(Ne(Ce(":",f)))var d=function(){var e=f;return ve(e.py_split,e,":",1)}(),p=d[0],g=d[1];else p=(d=tr([null,f]))[0],g=d[1];if(Ne(Lr(p,e.float_type)))throw(c=ve(En,null,"{} label must start with the prefix ‘{}:...’ (got ‘{}’)".format(e.float_type,e.float_type,f),me({pos:l.pos}))).__cause__=null,c;if(zr(r.llm_float_label,"ref_label_prefix",p),zr(r.llm_float_label,"ref_label",g),Ne(Lr(p,e.float_type)))throw(c=ve(En,null,"Float's \\label{}...{} must have the prefix ‘{}:’".format("{","}",e.float_type),me({pos:l.pos}))).__cause__=null,c;continue}if(Ne(Cr(l.macroname,"caption"))){zr(r.llm_float_caption,"caption_node",l);var h=function(){var e=ve(st,null,me({node:l}));return ve(e.get_all_arguments_info,e,tr(["captiontext"]))}(),v=function(){var e=qr(h,"captiontext");return ve(e.get_content_nodelist,e)}();zr(r.llm_float_caption,"caption_nodelist",v);continue}}!function(){var e=o;ve(e.append,e,l)}()}o=function(){var e=r.latex_walker;return ve(e.make_nodelist,e,o,me({parsing_state:r.nodelist.parsing_state}))}();var m=[],w=null;for(s=e.content_handlers,_=0;_<je(s);_++){var k=qr(s,_);try{w=function(){var e=k;return ve(e.float_handle_content_nodes,e,r,o)}()}catch(e){if(!Re(e,En))throw e;var y=e;!function(){var e=m;ve(e.append,e,"*** {} error: {}".format(k.__class__.__name__,ve(ir,null,y)))}()}}if(Ne(null===w)){var b=ve(En,null,Or("Invalid {} contents! The following content handler(s) were unable to parse the float's content [other than possible \\caption and \\label commands]:\n".format(e.float_type),ve("\n".join,"\n",m)),me({pos:r.pos}));throw b.__cause__=null,b}return r.llm_float_content_nodelist=w,r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=ve((o=n).feature_render_manager,o,"floats"),_=qr(r.llm_float_label,"ref_label_prefix"),l=qr(r.llm_float_label,"ref_label"),c=!0;if(Ne(Ne(null===_)&&null===l))c=!1;var u=function(){var n=s;return ve(n.register_float,n,me({node:r,float_type:e.float_type,numbered:c,ref_label_prefix:_,ref_label:l,caption_nodelist:qr(r.llm_float_caption,"caption_nodelist"),content_nodelist:r.llm_float_content_nodelist}))}();return Ne(e.float_content_render_at_environment_node_location)?function(){var t=e;return ve(t.render_float,t,u,r,n)}():function(){var r=n.fragment_renderer;return ve(r.render_nothing,r,me({annotations:["float-placeholder","float-{}-placeholder".format(e.float_type)]}))}()}))},get render_float(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"float_instance":r=i[o];break;case"node":n=i[o];break;case"render_context":t=i[o]}}}var s,_=t.fragment_renderer;return ve((s=_).render_float,s,r,t)}))}}),pl=he("FloatInstance",[ge],{__module__:ol,get __init__(){return fe(this,(function(e){var r=null,n=null,t=null,a=null,i=null,o=null,s=null,_=null,l=null;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"float_type":r=u[f];break;case"float_type_info":n=u[f];break;case"number":t=u[f];break;case"formatted_counter_value_llm":a=u[f];break;case"ref_label_prefix":i=u[f];break;case"ref_label":o=u[f];break;case"target_id":s=u[f];break;case"caption_nodelist":_=u[f];break;case"content_nodelist":l=u[f]}}}ve(ve(we,null,pl,"__init__"),null,e),e.float_type=r,e.float_type_info=n,e.number=t,e.formatted_counter_value_llm=a,e.ref_label_prefix=i,e.ref_label=o,e.target_id=s,e.caption_nodelist=_,e.content_nodelist=l,e._fields=tr(["float_type","float_type_info","number","formatted_counter_value_llm","ref_label_prefix","ref_label","target_id","caption_nodelist","content_nodelist"])}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}({})").format,a,e.__class__.__name__,ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return r}()));var a}))}}),gl=he("FloatType",[ge],{__module__:ol,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"float_type":r=o[s];break;case"float_caption_name":n=o[s];break;case"counter_formatter":t=o[s];break;case"content_handlers":a=o[s]}}}if(ve(ve(we,null,gl,"__init__"),null,e),e.float_type=r,Ne(null===n))n=r;if(e.float_caption_name=n,Ne(null===t))t="arabic";e.counter_formatter=ve(G_.parse_counter_formatter,G_,t),e.content_handlers=a,e._fields=tr(["float_type","float_caption_name","counter_formatter","content_handlers"])}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}({})").format,a,e.__class__.__name__,ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return r}()));var a}))}}),hl=he("FeatureFloats",[bs],{__module__:ol,feature_name:"floats",get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"float_types":r=t[a]}}}if(ve(ve(we,null,hl,"__init__"),null,e),Ne(null===r))r=[ve(gl,null,"figure","Figure","arabic",["includegraphics"]),ve(gl,null,"table","Table","arabic",["cells","includegraphics"])];var i=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return Ne(ve(Re,null,e,gl))?e:ve(gl,null,me(e))};e.float_types_list=function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,ve(i,null,a))}return e}(),e.float_types=function(){for(var r=[],n=e.float_types_list,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a.float_type,a])}return wr(r)}()}))},get make_float_environment_spec(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"float_type":r=t[a]}}}return ve(dl,null,r,me({content_handlers:qr(e.float_types,r).content_handlers}))}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a,i=[],o=ve((a=e.float_types).py_items,a),s=0;s<je(o);s++){var _=qr(o,s),l=_[0];_[1];!function(){var r,n=i;ve(n.append,n,ve((r=e).make_float_environment_spec,r,l))}()}return ve(wr,null,me({environments:i}))}))},RenderManager:he("RenderManager",[bs.RenderManager],{__module__:ol,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.floats=function(){for(var r,n=[],t=ve((r=e.feature.float_types).py_items,r),a=0;a<je(t);a++){var i=qr(t,a),o=i[0];i[1];ve(n.append,n,[o,[]])}return wr(n)}(),e.float_counters=function(){for(var r,n=[],t=ve((r=e.feature.float_types).py_items,r),a=0;a<je(t);a++){var i=qr(t,a),o=i[0];i[1];ve(n.append,n,[o,1])}return wr(n)}(),e.float_instances=wr({})}))},get register_float(){return fe(this,(function(e,r){var n=!0,t=null,a=null,i=null,o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"float_type":r=_[l];break;case"node":var c=_[l];break;case"numbered":n=_[l];break;case"ref_label_prefix":t=_[l];break;case"ref_label":a=_[l];break;case"caption_nodelist":i=_[l];break;case"content_nodelist":o=_[l]}}}var u,f=ve((u=e).get_node_id,u,c);if(Ne(Ce(f,e.float_instances)))return qr(e.float_instances,f);var d=qr(e.feature.float_types,r);if(Ne(n)){var p=d.counter_formatter,g=qr(e.float_counters,r);zr(e.float_counters,r,ve(Tr,null,qr(e.float_counters,r),1));var h=ve(p,null,g),v=function(){var n=e.render_context.doc.environment;return ve(n.make_fragment,n,h,me({is_block_level:!1,what:"{} {} counter value".format(r,g)}))}()}else g=null,v=null;var m=null;if(Ne(null!==g))m="{}-{}".format(r,g);var w=ve(pl,null,me({float_type:r,float_type_info:d,number:g,formatted_counter_value_llm:v,ref_label_prefix:t,ref_label:a,target_id:m,caption_nodelist:i,content_nodelist:o}));if(function(){var n=qr(e.floats,r);ve(n.append,n,w)}(),Ne(Ne(null!==g)&&function(){var r=e.render_context;return ve(r.supports_feature,r,"refs")}())){var k=function(){var r=e.render_context;return ve(r.feature_render_manager,r,"refs")}();if(Ne(Ne(null!==t)&&null!==a)){be(Cr(t,r));var y=function(){var r=e;return ve(r.get_formatted_ref_llm_text,r,w)}();!function(){var e=k;ve(e.register_reference,e,t,a,me({node:c,formatted_ref_llm_text:y,target_href:"#{}".format(m)}))}()}}return zr(e.float_instances,f,w),w}))},get get_formatted_ref_llm_text(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"float_instance":r=t[a]}}}return Or(Or(r.float_type_info.float_caption_name,"~"),r.formatted_counter_value_llm.llm_text)}))}})}),vl={},ml={};ue(vl,"",dn),ue(ml,"",Ct);var wl="llm.feature.headings",kl=(ve(vl.getLogger,vl,wl),he("HeadingMacro",[xs.LLMMacroSpecBase],{__module__:wl,is_block_level:!0,allowed_in_standalone_mode:!0,_llm_main_text_argument:"text",allowed_ref_label_prefixes:tr(["sec","topic"]),get __init__(){return fe(this,(function(e,r){var n=1,t=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":r=i[o];break;case"heading_level":n=i[o];break;case"inline_heading":t=i[o]}}}ve(ve(we,null,kl,"__init__"),null,e,r,me({arguments_spec_list:[xs.text_arg,xs.label_arg]})),e.heading_level=n,e.inline_heading=t,e.is_block_heading=e.inline_heading}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["text","label"])));r.llmarg_heading_content_nodelist=function(){var e=qr(o,"text");return ve(e.get_content_nodelist,e)}(),r.llmarg_labels=ve(xs.helper_collect_labels,xs,qr(o,"label"),e.allowed_ref_label_prefixes),r.llm_referenceable_infos=[ve(ks.ReferenceableInfo,ks,me({formatted_ref_llm_text:r.llmarg_heading_content_nodelist,labels:r.llmarg_labels}))]}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=ve((o=n).feature_render_manager,o,"headings"),_=function(){var e=qr(r.llm_referenceable_infos,0);return ve(e.get_target_id,e)}();if(Ne(null===_))_=function(){var e=s;return ve(e.get_default_target_id,e,r.llmarg_labels,r.llmarg_heading_content_nodelist,me({node:r}))}();if(Ne(Ne(function(){var e=n;return ve(e.supports_feature,e,"refs")}())&&n.is_first_pass))for(var l=function(){var e=n;return ve(e.feature_render_manager,e,"refs")}(),c=r.llm_referenceable_infos,u=0;u<je(c);u++){var f=qr(c,u);!function(){var e=l;ve(e.register_reference_referenceable,e,me({node:r,referenceable_info:f}))}()}return function(){var t=n.fragment_renderer;return ve(t.render_heading,t,r.llmarg_heading_content_nodelist,me({render_context:n,heading_level:e.heading_level,inline_heading:e.inline_heading,target_id:_}))}()}))}})),yl=he("FeatureHeadings",[bs],{__module__:wl,feature_name:"headings",RenderManager:he("RenderManager",[bs.RenderManager],{__module__:wl,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.target_id_counters=wr({}),e.target_ids=wr({})}))},get get_default_target_id(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"heading_labels":r=a[i];break;case"heading_content_nodelist":n=a[i];break;case"node":var o=a[i]}}}var s,_=ve((s=e).get_node_id,s,o);if(Ne(Ce(_,e.target_ids)))return qr(e.target_ids,_);var l=function(){var t=e;return ve(t._generate_default_target_id,t,r,n)}();return zr(e.target_ids,_,l),l}))},get _generate_default_target_id(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"heading_labels":r=a[i];break;case"heading_content_nodelist":n=a[i]}}}var o,s,_=(s=ve((o=n).latex_verbatim,o),ve(s.strip,s));_=ve(ml.sub,ml,"[^A-Za-z0-9_-]+","-",_);return Ne(Ce(_=Fr(_="sec--{}".format(_),0,32,1),e.target_id_counters))?(zr(e.target_id_counters,_,ve(Tr,null,qr(e.target_id_counters,_),1)),"{}-{}".format(_,qr(e.target_id_counters,_))):(zr(e.target_id_counters,_,1),_)}))}}),SectionCommandSpec:he("SectionCommandSpec",[ge],{__module__:wl,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"cmdname":r=a[i];break;case"inline":n=a[i]}}}ve(ve(we,null,yl.SectionCommandSpec,"__init__"),null,e),e.cmdname=r,e.inline=n}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return"{}(cmdname={}, inline={})".format(e.__class__.__name__,e.cmdname,e.inline)}))}}),get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"section_commands_by_level":r=t[a]}}}if(ve(ve(we,null,yl,"__init__"),null,e),Ne(null===r))r=wr({1:(i=e,ve(i.SectionCommandSpec,i,"section")),2:function(){var r=e;return ve(r.SectionCommandSpec,r,"subsection")}(),3:function(){var r=e;return ve(r.SectionCommandSpec,r,"subsubsection")}(),4:function(){var r=e;return ve(r.SectionCommandSpec,r,"paragraph",me({inline:!0}))}(),5:function(){var r=e;return ve(r.SectionCommandSpec,r,"subparagraph",me({inline:!0}))}(),6:function(){var r=e;return ve(r.SectionCommandSpec,r,"subsubparagraph",me({inline:!0}))}()});var i,o=function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("x"===a)r=t[a]}}return Ne(ve(Re,null,r,e.SectionCommandSpec))?r:Ne(ve(Re,null,r,ir))?function(){var n=e;return ve(n.SectionCommandSpec,n,r)}():function(){var n=e;return ve(n.SectionCommandSpec,n,me(r))}()};e.section_commands_by_level=function(){for(var e,n=[],t=(e=ve(wr,null,r),ve(e.py_items,e)),a=0;a<je(t);a++){var i=qr(t,a),s=i[0],_=i[1];ve(n.append,n,[s,ve(o,null,_)])}return wr(n)}()}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({macros:function(){for(var r,n=[],t=ve((r=e.section_commands_by_level).py_items,r),a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];ve(n.append,n,ve(kl,null,me({macroname:s.cmdname,heading_level:o,inline_heading:s.inline})))}return n}()}))}))}}),bl={};ue(bl,"",dn),ue({},"",Ct);var xl="llm.feature.endnotes",Ol=(ve(bl.getLogger,bl,xl),he("EndnoteCategory",[ge],{__module__:xl,get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"category_name":r=o[s];break;case"counter_formatter":n=o[s];break;case"heading_title":t=o[s];break;case"endnote_command":a=o[s]}}}ve(ve(we,null,Ol,"__init__"),null,e),e.category_name=r;n=ve(G_.parse_counter_formatter,G_,n);e.counter_formatter=n,e.heading_title=t,e.endnote_command=a}))}})),Pl=he("EndnoteMacro",[Ls],{__module__:xl,allowed_in_standalone_mode:!1,get __init__(){return fe(this,(function(e,r,n){var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":r=i[o];break;case"endnote_category_name":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Pl,"__init__"),null,e,me(xe({macroname:r,arguments_spec_list:[ve(gs,null,"{",me({argname:"endnote_content"}))]},t))),e.endnote_category_name=n}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=ve((o=n).feature_render_manager,o,"endnotes");if(Ne(null===s)){var _=ve(RuntimeError,null,"You did not set up the feature 'endnotes' in your LLM environment");throw _.__cause__=null,_}var l=function(){var e=ve(st,null,me({node:r}));return ve(e.get_all_arguments_info,e,tr(["endnote_content"]))}(),c=function(){var e=qr(l,"endnote_content");return ve(e.get_content_nodelist,e)}(),u=function(){var n=s;return ve(n.add_endnote,n,me({category_name:e.endnote_category_name,content_nodelist:c,node:r}))}(),f=function(){var e=s;return ve(e.render_endnote_mark,e,u)}();return f}))}}),El=he("EndnoteInstance",[ge],{__module__:xl,get __init__(){return fe(this,(function(e,r,n,t,a,i,o){if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"category_name":r=_[l];break;case"number":n=_[l];break;case"formatted_counter_value_llm":t=_[l];break;case"content_nodelist":a=_[l];break;case"ref_label_prefix":i=_[l];break;case"ref_label":o=_[l]}}}ve(ve(we,null,El,"__init__"),null,e),e.category_name=r,e.number=n,e.formatted_counter_value_llm=t,e.content_nodelist=a,e.ref_label_prefix=i,e.ref_label=o,e._fields=tr(["category_name","number","formatted_counter_value_llm","content_nodelist","ref_label_prefix","ref_label"])}))},get asdict(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a,ve(Ee,null,e,a)])}return wr(r)}()}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve((a="{}({})").format,a,e.__class__.__name__,ve(", ".join,", ",function(){for(var r=[],n=e._fields,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,"{}={}".format(a,ve(Ee,null,e,a)))}return r}()));var a}))}}),Sl=he("FeatureEndnotes",[bs],{__module__:xl,feature_name:"endnotes",get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"categories":r=a[i];break;case"render_options":n=a[i]}}}ve(ve(we,null,Sl,"__init__"),null,e);var o=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("x"===t)e=n[t]}}return Ne(ve(Re,null,e,Ol))?e:ve(Ol,null,me(e))};if(Ne(!Ne(r)))r=[];e.base_categories=function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,ve(o,null,a))}return e}(),e.default_render_options=Ne(n)?n:wr({})}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}for(var a,i=[],o=e.base_categories,s=0;s<je(o);s++){var _=qr(o,s);Ne(_.endnote_command)&&(a=void 0,ve((a=i).append,a,ve(Pl,null,_.endnote_command,me({endnote_category_name:_.category_name}))))}return ve(wr,null,me({macros:i}))}))},DocumentManager:he("DocumentManager",[bs.DocumentManager],{__module__:xl,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.categories=ve(nr,null,e.feature.base_categories),e.categories_by_name=function(){for(var r=[],n=e.categories,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a.category_name,a])}return wr(r)}()}))},get add_endnote_category(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"endnote_category":r=t[a]}}}if(Ne(Ce(r.category_name,e.categories_by_name))){var i=ve(Hr,null,"Endnote category ‘{}’ is already a registered endnote category".format(r.category_name));throw i.__cause__=null,i}var o;ve((o=e.categories).append,o,r),zr(e.categories_by_name,r.category_name,r)}))}}),RenderManager:he("RenderManager",[bs.RenderManager],{__module__:xl,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.endnotes=function(){for(var r=[],n=e.feature_document_manager.categories,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a.category_name,[]])}return wr(r)}(),e.endnote_counters=function(){for(var r=[],n=e.feature_document_manager.categories,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,[a.category_name,1])}return wr(r)}(),e.endnote_instances=wr({})}))},get add_endnote(){return fe(this,(function(e,r,n){var t=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"category_name":r=o[s];break;case"content_nodelist":n=o[s];break;case"node":var _=o[s];break;case"ref_label_prefix":t=o[s];break;case"ref_label":a=o[s]}}}var l,c=ve((l=e).get_node_id,l,_);if(Ne(Ce(c,e.endnote_instances)))return qr(e.endnote_instances,c);var u=qr(e.feature_document_manager.categories_by_name,r),f=u.counter_formatter,d=qr(e.endnote_counters,r);zr(e.endnote_counters,r,ve(Tr,null,qr(e.endnote_counters,r),1));var p=ve(f,null,d),g=function(){var n=e.render_context.doc.environment;return ve(n.make_fragment,n,p,me({is_block_level:!1,what:"{} counter".format(r)}))}(),h=ve(El,null,me({category_name:r,number:d,formatted_counter_value_llm:g,content_nodelist:n,ref_label_prefix:t,ref_label:a}));return function(){var n=qr(e.endnotes,r);ve(n.append,n,h)}(),Ne(null!==c)&&zr(e.endnote_instances,c,h),h}))},get render_endnote_mark(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"endnote":r=t[a]}}}var i,o="#{}-{}".format(r.category_name,r.number),s=r.formatted_counter_value_llm;return ve((i=e.render_context.fragment_renderer).render_link,i,"endnote",o,me({display_nodelist:s.nodes,render_context:e.render_context,annotations:["endnote",r.category_name]}))}))},get render_endnotes_category(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"category_name":r=t[a]}}}var i=e.render_context,o=i.fragment_renderer;if(Ne(ve(Se,null,r,"category_name"))){var s=r;r=s.category_name}var _,l=function(n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)if("n"===i)n=a[i]}}var o=qr(qr(e.endnotes,r),Pr(n,1)),s=o.formatted_counter_value_llm;return s.nodes},c=function(e){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("n"===a)e=t[a]}}return"{}-{}".format(r,e)},u=function(){for(var n=[],t=qr(e.endnotes,r),a=0;a<je(t);a++){var i=qr(t,a);ve(n.append,n,i.content_nodelist)}return n}();return ve((_=o).render_enumeration,_,u,me({counter_formatter:l,target_id_generator:c,render_context:e.render_context,annotations:[Or(r,"-list")]}))}))},get render_endnotes(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="endnotes";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"target_id":r=_[l];break;case"annotations":n=_[l];break;case"include_headings_at_level":t=_[l];break;case"set_headings_target_ids":a=_[l];break;case"endnotes_heading_title":i=_[l];break;case"endnotes_heading_level":o=_[l]}}}if(Ne(null===t))t=ve((c=e.feature.default_render_options).py_get,c,"include_headings_at_level",null);var c;if(Ne(null===a))a=function(){var r=e.feature.default_render_options;return ve(r.py_get,r,"set_headings_target_ids",!1)}();if(Ne(null===i))i=function(){var r=e.feature.default_render_options;return ve(r.py_get,r,"endnotes_heading_title",null)}();if(Ne(null===o))o=function(){var r=e.feature.default_render_options;return ve(r.py_get,r,"endnotes_heading_level",1)}();for(var u=e.render_context,f=u.fragment_renderer,d=!1,p=[],g=e.feature_document_manager.categories,h=0;h<je(g);h++){var v=qr(g,h);if(!Ne(!Ne(ve(je,null,qr(e.endnotes,v.category_name))))){d=!0;if(Ne(Ne(null!==t)&&!1!==t)){var m=function(){var r=e.render_context.doc.environment;return ve(r.make_fragment,r,v.heading_title,me({is_block_level:!1,what:"{} heading title".format(v.category_name)}))}(),w=null;if(Ne(a))w="{}-{}".format(r,v.category_name);!function(){var r,n=p;ve(n.append,n,ve((r=f).render_heading,r,m.nodes,me({render_context:e.render_context,heading_level:t,target_id:w})))}()}!function(){var r,n=p;ve(n.append,n,ve((r=e).render_endnotes_category,r,v))}()}}if(Ne(!Ne(d)))return function(){var e=f;return ve(e.render_nothing,e,me({annotations:["no-endnotes"]}))}();if(Ne(null!==i)){var k=function(){var r=e.render_context.doc.environment;return ve(r.make_fragment,r,i,me({is_block_level:!1,what:"endnotes heading title".format()}))}();!function(){var r,n=p;ve(n.insert,n,0,ve((r=f).render_heading,r,k.nodes,me({render_context:e.render_context,heading_level:o})))}()}return function(){var e,t=f;return ve(t.render_semantic_block,t,ve((e=f).render_join_blocks,e,p),me({role:"endnotes",annotations:n,target_id:r}))}()}))}})}),Cl={};ue(Cl,"",dn);var Ll="llm.feature.cite",jl=ve(Cl.getLogger,Cl,Ll),Nl=he("CitationEndnoteCategory",[Ol],{__module__:Ll,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="arabic";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=tr([null,null]);if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"counter_formatter":r=a[i];break;case"citation_delimiters":n=a[i]}}}e.inner_counter_formatter_fn=r,Ne(Ce(e.inner_counter_formatter_fn,rl))&&(e.inner_counter_formatter_fn=qr(rl,e.inner_counter_formatter_fn)),e.citation_delimiters=n;var o=function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("x"===a)r=t[a]}}return Or(Or(qr(e.citation_delimiters,0),ve((i=e).inner_counter_formatter_fn,i,r)),qr(e.citation_delimiters,1));var i};ve(ve(we,null,Nl,"__init__"),null,e,"citation",me({counter_formatter:o,heading_title:"References"}))}))}}),Al=he("FeatureExternalPrefixedCitations",[bs],{__module__:Ll,feature_name:"citations",use_endnotes:!0,DocumentManager:he("DocumentManager",[bs.DocumentManager],{__module__:Ll,get initialize(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"use_endnotes":r=t[a]}}}if(Ne(null!==r)?e.use_endnotes=r:e.use_endnotes=e.feature.use_endnotes,Ne(e.use_endnotes)){var i=ve((o=e.doc).feature_document_manager,o,"endnotes");e.endnote_category=ve(Nl,null,me({counter_formatter:e.feature.counter_formatter,citation_delimiters:e.feature.citation_delimiters})),function(){var r=i;ve(r.add_endnote_category,r,e.endnote_category)}()}var o}))}}),RenderManager:he("RenderManager",[bs.RenderManager],{__module__:Ll,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.citation_endnotes=wr({}),e.use_endnotes=e.feature_document_manager.use_endnotes,e.external_citations_providers=e.feature.external_citations_providers}))},get get_citation_content_llm(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cite_prefix":r=i[o];break;case"cite_key":n=i[o];break;case"resource_info":t=i[o]}}}if(Ne(null===e.external_citations_providers))throw(_=ve(Hr,null,"No external citations providers are set!")).__cause__=null,_;for(var s,_,l=null,c=e.external_citations_providers,u=0;u<je(c);u++){var f=qr(c,u);if(Ne(l=(s=void 0,ve((s=f).get_citation_full_text_llm,s,r,n,t))))break}if(Ne(null===l))throw(_=ve(Hr,null,"Citation not found: ‘{}:{}’".format(r,n))).__cause__=null,_;if(Ne(ve(Re,null,l,Hi)))var d=l;else d=function(){var t=e.render_context.doc.environment;return ve(t.make_fragment,t,l,me({is_block_level:!1,standalone_mode:!0,what:"Citation text for {}:{}".format(r,n)}))}();return d}))},get get_citation_endnote(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cite_prefix":r=i[o];break;case"cite_key":n=i[o];break;case"resource_info":t=i[o]}}}var s,_=null;if(Ne(e.use_endnotes))_=ve((s=e.render_context).feature_render_manager,s,"endnotes");if(Ne(Ce(tr([r,n]),e.citation_endnotes)))return e.citation_endnotes.__getitem__([r,n]);var l=function(){var a=e;return ve(a.get_citation_content_llm,a,r,n,t)}(),c=function(){var e=_;return ve(e.add_endnote,e,me({category_name:"citation",content_nodelist:l.nodes,ref_label_prefix:r,ref_label:n,node:tr([r,n])}))}();return c.formatted_inner_counter_value_llm=function(){var r,n=e.render_context.doc.environment;return ve(n.make_fragment,n,ve((r=e.feature_document_manager.endnote_category).inner_counter_formatter_fn,r,c.number),me({is_block_level:!1,standalone_mode:!0,what:"citation counter (inner)".format()}))}(),e.citation_endnotes.__setitem__([r,n],c),c}))}}),get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="arabic";if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=tr(["[","]"]);if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="; ";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"external_citations_providers":r=o[s];break;case"counter_formatter":n=o[s];break;case"citation_delimiters":t=o[s];break;case"citation_optional_text_separator":a=o[s]}}}ve(ve(we,null,Al,"__init__"),null,e),e.external_citations_providers=r,e.counter_formatter=n,e.citation_delimiters=t,e.citation_optional_text_separator=a}))},get set_external_citations_providers(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"external_citations_providers":r=t[a]}}}var i;Ne(null!==e.external_citations_providers)&&ve((i=jl).warning,i,"FeatureExternalPrefixedCitations.set_external_citations_providers(): There are already external citation providers set.  They will be replaced."),e.external_citations_providers=r}))},get add_external_citations_provider(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"external_citations_provider":r=t[a]}}}var i;Ne(null===e.external_citations_providers)&&(ve((i=jl).warning,i,"FeatureExternalPrefixedCitations.add_external_citations_provider(): External citations provider list was not initialized, creating an empty list."),e.external_citations_providers=[]),function(){var n=e.external_citations_providers;ve(n.append,n,r)}()}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return wr({macros:[ve(Il,null,"cite")]})}))}}),Il=he("CiteMacro",[Ls],{__module__:Ll,allowed_in_standalone_mode:!1,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"macroname":r=t[a]}}}ve(ve(we,null,Il,"__init__"),null,e,me({macroname:r,arguments_spec_list:[ve(gs,null,"[",me({argname:"cite_pre_text"})),ve(gs,null,ve(Qa.LatexCharsCommaSeparatedListParser,Qa,me({enable_comments:!1})),me({argname:"citekey"}))]}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["cite_pre_text","citekey"]))),s=null;if(Ne(function(){var e=qr(o,"cite_pre_text");return ve(e.was_provided,e)}()))s=function(){var e=qr(o,"cite_pre_text");return ve(e.get_content_nodelist,e)}();var _=function(){var e=qr(o,"citekey");return ve(e.get_content_nodelist,e)}();r.llmarg_optional_cite_extra_nodelist=s,r.llmarg_citekeylist_nodelist=_;for(var l=[],c=_,u=0;u<je(c);u++){var f=qr(c,u);if(!Ne(!Ne(f))){var d=function(){var e=f;return ve(e.latex_verbatim,e)}();if(Ne(qr(f.delimiters,0)))d=Fr(d,ve(je,null,qr(f.delimiters,0)),null,1);if(Ne(qr(f.delimiters,1)))d=Fr(d,0,yr(ve(je,null,qr(f.delimiters,1))),1);if(Ne(Ce(":",d))){var p=function(){var e=d;return ve(e.py_split,e,":",1)}(),g=p[0],h=p[1];g=function(){var e,r=ve((e=g).strip,e);return ve(r.lower,r)}()}else g=(p=tr([null,d]))[0],h=p[1];!function(){var e=l;ve(e.append,e,tr([g,h]))}()}}return r.llmarg_cite_items=l,r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}for(var o,s=n.fragment_renderer,_=r.llmarg_optional_cite_extra_nodelist,l=ve((o=n).feature_render_manager,o,"citations"),c=l.feature.citation_delimiters,u=r.latex_walker.resource_info,f=[],d=r.llmarg_cite_items,p=0;p<je(d);p++){var g=qr(d,p),h=g,v=h[0],m=h[1];if(Ne(null===l))!function(){var e,r,n=f;ve(n.append,n,ve((r=s).render_text_format,r,me({text_formats:["cite"],content:(e=s,ve(e.render_value,e,"[{}:{}]".format(v,m)))})))}();else{var w=null,k=null,y=null;if(Ne(l.use_endnotes))w=function(){var e=l;return ve(e.get_citation_endnote,e,v,m,u)}(),y=w.formatted_inner_counter_value_llm;else k=function(){var e=l;return ve(e.get_citation_content_llm,e,v,m,u)}(),y=k;var b=[];Ne(null!==qr(c,0))&&function(){var e,n=b;ve(n.append,n,ve((e=r.latex_walker).make_node,e,Gn,me({chars:qr(c,0),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state})))}(),function(){var e=b;ve(e.extend,e,ve(nr,null,y.nodes))}(),Ne(null!==_)&&(function(){var e,n=b;ve(n.append,n,ve((e=r.latex_walker).make_node,e,Gn,me({chars:l.feature.citation_optional_text_separator,pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state})))}(),function(){var e=b;ve(e.extend,e,ve(nr,null,_))}()),Ne(null!==qr(c,1))&&function(){var e,n=b;ve(n.append,n,ve((e=r.latex_walker).make_node,e,Gn,me({chars:qr(c,1),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state})))}();var x=function(){var e=r.parsing_state;return ve(e.sub_context,e,me({is_block_level:!1}))}();if(Ne(l.use_endnotes)){var O="#{}-{}".format(w.category_name,w.number),P=function(){var e,t=n.fragment_renderer;return ve(t.render_link,t,"endnote",O,me({display_nodelist:(e=r.latex_walker,ve(e.make_nodelist,e,b,me({parsing_state:x}))),render_context:n,annotations:["endnote",w.category_name]}))}();!function(){var e=f;ve(e.append,e,P)}()}else{var E=function(){var e,t=n.fragment_renderer;return ve(t.render_nodelist,t,ve((e=r.latex_walker).make_nodelist,e,b,me({parsing_state:x})),n)}();!function(){var e=f;ve(e.append,e,E)}()}}}return function(){var e=s;return ve(e.render_join,e,f)}()}))}}),Ml={};ue({},"",Ct),ue(Ml,"",dn);var Tl="llm.feature.enumeration",Dl=(ve(Ml.getLogger,Ml,Tl),[wr({template:"${arabic}."}),wr({template:"(${roman})"}),wr({template:"${alph}-"})]),Rl=he("Enumeration",[js],{__module__:Tl,is_block_level:!0,body_contents_is_block_level:!0,allowed_in_standalone_mode:!0,get __init__(){return fe(this,(function(e,r){var n=null,t=null,a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"environmentname":r=o[s];break;case"counter_formatter":n=o[s];break;case"annotations":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}if(ve(ve(we,null,Rl,"__init__"),null,e,me(xe({environmentname:r,arguments_spec_list:[ve(gs,null,ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["[","]"]),optional:!0})),me({argname:"tag_template"}))]},a))),Ne(null===n))n=Dl;e.counter_formatter=n,e.annotations=t,e.body_parsing_state_delta=ve(ps,null,me({is_block_level:e.is_block_level}))}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}return ve(uo,null,me({environmentname:r.arg,contents_parsing_state_delta:ve(Uo,null,me({extend_latex_context:ve(wr,null,me({macros:[ve(Yo,null,"item",me({arguments_spec_list:[ve(gs,null,"[",me({argname:"custom_tag"}))]}))]}))}))}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}for(var i,o=ve((i=r.nodelist).split_at_node,i,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)"n"===t&&(e=n[t])}}return Ne(ve((a=e).isNodeType,a,Wn))&&Cr(e.macroname,"item");var a}),me({keep_separators:!0})),s=[],_=ve(er,null,o),l=0;l<je(_);l++){var c=qr(_,l),u=c[0],f=c[1];if(!Ne(!Ne(f))){var d=qr(f,0);if(!Ne(null===d)&&!Ne(Ne(Cr(u,0))&&Ne(function(){var e=d;return ve(e.isNodeType,e,Gn)}())&&Cr(function(){var e=d.chars;return ve(e.strip,e)}(),""))){if(Ne(Ne(!Ne(function(){var e=d;return ve(e.isNodeType,e,Wn)}()))||Lr(d.macroname,"item"))){var p=ve(LatexWalkerParseError,null,me({msg:"Expected ‘\\item’ in enumeration environment: {}".format(d),pos:d.pos}));throw p.__cause__=null,p}var g=function(){var e=d.latex_walker;return ve(e.make_nodelist,e,Fr(f.nodelist,1,null,1),me({parsing_state:d.parsing_state}))}();!function(){var e=s;ve(e.append,e,tr([d,g]))}()}}}return r.enumeration_items=s,r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=n.fragment_renderer,_=(o=ve(st,null,me({node:r})),ve(o.get_all_arguments_info,o,tr(["tag_template"]))),l=function(){var e=n;return ve(e.get_logical_state,e,"enumeration")}(),c=function(){var e=l;return ve(e.py_get,e,"nested_depth",0)}();if(Ne(ve(Re,null,u=e.counter_formatter,tr([nr,tr]))))if(Ne(Ir(c,ve(je,null,u))))var u=qr(u,Pr(ve(je,null,u),1));else u=qr(u,c);if(Ne(Ne(Ce("tag_template",_))&&function(){var e=qr(_,"tag_template");return ve(e.was_provided,e)}())){var f=function(){var e=qr(_,"tag_template");return ve(e.get_content_as_chars,e)}();u=f}for(var d=ve(G_.parse_counter_formatter,G_,u,me({str_use_tag_template:!0})),p=wr({}),g=[],h=ve(er,null,r.enumeration_items),v=0;v<je(h);v++){var m,w=(m=qr(h,v))[0],k=m[1],y=(m=k)[0],b=m[1];!function(){var e=g;ve(e.append,e,b)}();var x=function(){var e=ve(st,null,me({node:y}));return ve(e.get_all_arguments_info,e,tr(["custom_tag"]))}();Ne(Ne(Ce("custom_tag",x))&&function(){var e=qr(x,"custom_tag");return ve(e.was_provided,e)}())&&zr(p,Or(1,w),function(){var e=qr(x,"custom_tag");return ve(e.get_content_nodelist,e)}())}var O=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("n"===t)e=n[t]}}return Ne(Ce(e,p))?qr(p,e):ve(d,null,e)},P=function(){var e=n;return ve(e.push_logical_state,e,"enumeration","nested_depth",Or(c,1))}();try{P.__enter__();var E=function(){var r=s;return ve(r.render_enumeration,r,g,O,me({render_context:n,annotations:e.annotations,nested_depth:c}))}();P.__exit__()}catch(e){if(!P.__exit__(e.name,e,e.stack))throw e}return E}))}}),ql=wr({itemize:wr({counter_formatter:["•","-","▸"]}),enumerate:wr({counter_formatter:null})}),zl=he("FeatureEnumeration",[bs],{__module__:Tl,feature_name:"enumeration",DocumentManager:null,RenderManager:null,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"enumeration_environments":r=t[a]}}}if(ve(ve(we,null,zl,"__init__"),null,e),Ne(null===r))r=ql;e.enumeration_environments=r}))},get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(wr,null,me({environments:function(){for(var r,n=[],t=ve((r=e.enumeration_environments).py_items,r),a=0;a<je(t);a++){var i=qr(t,a),o=i[0],s=i[1];ve(n.append,n,ve(Rl,null,me({environmentname:o,counter_formatter:qr(s,"counter_formatter"),annotations:[o]})))}return n}()}))}))}}),Fl={},Gl={};ue(Fl,"",dn),ue(Gl,"",Ct);var Bl="llm.feature.math",Ul=ve(Fl.getLogger,Fl,Bl),Wl=tr(["equation","equation*","align","align*","gather","gather*"]),Vl=he("FeatureMath",[bs],{__module__:Bl,feature_name:"math",get __init__(){return fe(this,(function(e,r,n,t,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="eqref";if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="eq";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"eq_counter_formatter":r=o[s];break;case"math_environment_names":n=o[s];break;case"eqref_macro_name":t=o[s];break;case"eqref_ref_type":a=o[s]}}}if(ve(ve(we,null,Vl,"__init__"),null,e),Ne(null===r))r=wr({template:"(${arabic})"});if(e.eq_counter_formatter=ve(G_.parse_counter_formatter,G_,r),Ne(null===n))n=Wl;e.math_environment_names=n,e.eqref_macro_name=t,e.eqref_ref_type=a}))},DocumentManager:he("DocumentManager",[bs.DocumentManager],{__module__:Bl,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}}))}}),RenderManager:he("RenderManager",[bs.RenderManager],{__module__:Bl,get initialize(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.equation_counter=1,e.equation_info_by_node=wr({})}))},get new_numbered_display_math(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"lineno":n=i[o];break;case"custom_tag_llm_text":t=i[o]}}}var s,_=tr([(s=e,ve(s.get_node_id,s,r)),n]);if(Ne(Ce(_,e.equation_info_by_node)))return qr(e.equation_info_by_node,_);if(Ne(null!==t)){var l=t,c="_{}".format(qr(_,0));if(Ne(n))c=ve(Tr,null,c,"-{}".format(n))}else{c=e.equation_counter,l=function(){var r=e.feature;return ve(r.eq_counter_formatter,r,c)}();e.equation_counter=ve(Tr,null,e.equation_counter,1)}var u=tr([c,l]);return zr(e.equation_info_by_node,_,u),u}))}}),get add_latex_context_definitions(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}var a,i=function(){for(var r=[],n=e.math_environment_names,t=0;t<je(n);t++){var a=qr(n,t);ve(r.append,r,ve($l,null,a))}return r}(),o=[];return Ne(null!==e.eqref_macro_name)&&ve((a=o).append,a,ve(Yl,null,me({macroname:e.eqref_macro_name,ref_type:e.eqref_ref_type}))),ve(wr,null,me({macros:o,environments:i}))}))}}),Hl=he("_ProxyNodeWithLatexVerbatim",[ge],{__module__:Bl,pos:null,pos_end:null,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"verbatim":r=t[a]}}}e._verbatim=r}))},get latex_verbatim(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e._verbatim}))}}),$l=he("MathEnvironment",[js],{__module__:Bl,get __init__(){return fe(this,(function(e,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":r=a[i];break;case"is_numbered":n=a[i]}}}ve(ve(we,null,$l,"__init__"),null,e,me({environmentname:r})),Ne(null!==n)?e.is_numbered=n:e.is_numbered=Lr(Fr(r,yr(1),null,1),"*"),Ne(!Ne(e.is_numbered))&&(e.allowed_in_standalone_mode=!0)}))},get make_body_parsing_state_delta(){return fe(this,(function(e,r,n,t,a){var i=wr();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"token":r=s[_];break;case"nodeargd":n=s[_];break;case"arg_parsing_state_delta":t=s[_];break;case"latex_walker":a=s[_];break;default:i[_]=s[_]}delete i.__kwargtrans__}}return ve(pt,null)}))},get make_body_parser(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":r=i[o];break;case"nodeargd":n=i[o];break;case"arg_parsing_state_delta":t=i[o]}}}return ve(uo,null,me({environmentname:r.arg,contents_parsing_state_delta:ve(Uo,null,me({extend_latex_context:ve(wr,null,me({macros:[ve(Yo,null,"label",me({arguments_spec_list:[ve(gs,null,me({parser:ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["{","}"])})),argname:"label"}))]})),ve(Yo,null,"tag",me({arguments_spec_list:[ve(gs,null,me({parser:"*",argname:"tag_star"})),ve(gs,null,me({parser:ve(Qa.LatexCharsGroupParser,Qa,me({delimiters:tr(["{","}"])})),argname:"text"}))]})),ve(Yo,null,"\\",me({arguments_spec_list:[]}))]}))}))}))}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}if(r.llm_equation_lines_labels_infos=[],Ne(!Ne(e.is_numbered)))return r;for(var i,o=wr({labels_info:[],custom_tag_llm_text:null}),s=function(e){if(void 0===e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("newline_node"===a)e=t[a]}}var i;ve((i=r.llm_equation_lines_labels_infos).append,i,wr({labels:ve(nr,null,qr(o,"labels_info")),custom_tag_llm_text:qr(o,"custom_tag_llm_text"),newline_node:e})),function(){var e=o;ve(e.py_update,e,wr({labels_info:[],custom_tag_llm_text:null}))}()},_=!1,l=r.nodelist,c=0;c<je(l);c++){var u=qr(l,c);if(Ne(Ne((i=void 0,ve((i=u).isNodeType,i,An.LatexMacroNode)))&&Cr(u.macroname,"label"))){var f=function(){var e=ve(st,null,me({node:u}));return ve(e.get_all_arguments_info,e,tr(["label"]))}(),d=function(){var e=qr(f,"label");return ve(e.get_content_as_chars,e)}();if(Ne(Ce(":",d)))var p=function(){var e=d;return ve(e.py_split,e,":",1)}(),g=p[0],h=p[1];else g=(p=tr([null,d]))[0],h=p[1];var v=wr({node:u,label:tr([g,h])});!function(){var e=qr(o,"labels_info");ve(e.append,e,v)}()}else if(Ne(Ne(function(){var e=u;return ve(e.isNodeType,e,An.LatexMacroNode)}())&&Cr(u.macroname,"tag"))){var m=function(){var e=ve(st,null,me({node:u}));return ve(e.get_all_arguments_info,e,tr(["tag_star","text"]))}(),w=function(){var e,r=ve((e=qr(m,"text")).get_content_nodelist,e);return ve(r.latex_verbatim,r)}();if(Ne(!Ne(function(){var e=qr(m,"tag_star");return ve(e.was_provided,e)}())))w="({})".format(w);zr(o,"custom_tag_llm_text",w)}else if(Ne(Ne(function(){var e=u;return ve(e.isNodeType,e,An.LatexMacroNode)}())&&Cr(u.macroname,"\\"))){ve(s,null,u);_=!0}else if(Ne(Ne(!Ne(function(){var e=u;return ve(e.isNodeType,e,An.LatexCommentNode)}()))&&!Ne(Ne(function(){var e=u;return ve(e.isNodeType,e,An.LatexCharsNode)}())&&!Ne(function(){var e=u.chars;return ve(e.strip,e)}()))))_=!1}return Ne(!Ne(_))&&ve(s,null),r}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=r.environmentname;if(Ne(!Ne((o=n,ve(o.supports_feature,o,"math"))))){var _=ve(Hr,null,"Feature 'math' is not enabled, cannot render math environment");throw _.__cause__=null,_}var l=function(){var e=n;return ve(e.feature_render_manager,e,"math")}(),c=null;if(Ne(function(){var e=n;return ve(e.supports_feature,e,"refs")}()))c=function(){var e=n;return ve(e.feature_render_manager,e,"refs")}();for(var u=ve(nr,null,r.nodelist),f=null,d=ve(er,null,r.llm_equation_lines_labels_infos),p=0;p<je(d);p++){var g=(m=qr(d,p))[0],h=m[1],v=qr(h,"custom_tag_llm_text"),m=function(){var e=l;return ve(e.new_numbered_display_math,e,r,g,v)}(),w=m[0],k=m[1],y="equation-{}".format(w);if(Ne(null===f))f=y;if(Ne(!Ne(v))){var b=qr(h,"newline_node");if(Ne(null!==b))var x=function(){var e=u;return ve(e.index,e,b)}();else x=ve(je,null,u);!function(){var e=u;ve(e.insert,e,x,ve(Hl,null,Or(Or("\\tag*{",k),"}")))}()}y=f;if(Ne(Ne(null!==c)&&n.is_first_pass))for(var O=qr(h,"labels"),P=0;P<je(O);P++){var E=qr(O,P),S=(m=qr(E,"label"))[0],C=m[1];!function(){var e=c;ve(e.register_reference,e,S,C,me({node:r,formatted_ref_llm_text:k,target_href:"#{}".format(y)}))}()}}return function(){var e=n.fragment_renderer;return ve(e.render_math_content,e,tr(["\\begin{}{}{}".format("{",s,"}"),"\\end{}{}{}".format("{",s,"}")]),ve(An.LatexNodeList,An,u),n,"display",me({environmentname:s,target_id:f}))}()}))}}),Yl=he("MathEqrefMacro",[Ls],{__module__:Bl,delayed_render:!0,allowed_in_standalone_mode:!1,get __init__(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="eqref";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="eq";var t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":r=i[o];break;case"ref_type":n=i[o];break;default:t[o]=i[o]}delete t.__kwargtrans__}}ve(ve(we,null,Yl,"__init__"),null,e,me({macroname:r,arguments_spec_list:[ve(gs,null,ve(Qa.LatexCharsGroupParser,Qa),me({argname:"ref_label"}))]})),e.ref_type=n}))},get postprocess_parsed_node(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"node":r=t[a]}}}var i,o=(i=ve(st,null,me({node:r})),ve(i.get_all_arguments_info,i,tr(["ref_label"]))),s=null,_=function(){var e=qr(o,"ref_label");return ve(e.get_content_as_chars,e)}();if(Ne(Ce(":",_))){var l=function(){var e=_;return ve(e.py_split,e,":",1)}();s=l[0],_=l[1]}if(Ne(Lr(s,e.ref_type))){var c=ve(En,null,"Equation labels must begin with “{}:” (error in ‘\\{}’)".format(e.ref_type,r.macroname),me({pos:r.pos}));throw c.__cause__=null,c}r.llmarg_ref=tr([s,_])}))},get prepare_delayed_render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}}))},get render(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s=r.llmarg_ref,_=s[0],l=s[1],c=ve((o=n).feature_render_manager,o,"refs"),u=r.latex_walker.resource_info;try{return function(){var e=c;return ve(e.render_ref,e,_,l,null,u,n)}()}catch(e){if(Re(e,Ur)){var f=e;!function(){var e,n=Ul;ve(n.error,n,"Failed to resolve reference to ‘{}:{}’: {} in ‘{}’ @ {}".format(_,l,f,ve((e=r).latex_verbatim,e),function(){var e=r;return ve(e.format_pos,e)}()))}();var d=ve(En,null,"Unable to resolve reference to ‘{}:{}’. {}".format(_,l,f),me({pos:r.pos}));throw d.__cause__=null,d}throw e}}))}}),Xl={};ue(Xl,"",dn);for(var Jl="llm.llmstd",Zl=(ve(Xl.getLogger,Xl,Jl),he("LLMLatexWalkerParsingStateEventHandler",[fn.LatexWalkerParsingStateEventHandler],{__module__:Jl,get enter_math_mode(){return fe(this,(function(e,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"math_mode_delimiter":r=a[i];break;case"trigger_token":n=a[i]}}}var o=ve(wr,null,me({in_math_mode:!0,math_mode_delimiter:r}));return ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({set_attributes:o,extend_latex_context:ve(wr,null,me({unknown_macro_spec:ve(Qi.MacroSpec,Qi,""),unknown_environment_spec:ve(Qi.EnvironmentSpec,Qi,""),unknown_specials_spec:ve(Qi.SpecialsSpec,Qi,"")}))}))}))},get leave_math_mode(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"trigger_token":r=t[a]}}}return ve(Qi.ParsingStateDeltaExtendLatexContextDb,Qi,me({set_attributes:ve(wr,null,me({in_math_mode:!1,math_mode_delimiter:null})),extend_latex_context:ve(wr,null,me({unknown_macro_spec:null,unknown_environment_spec:null,unknown_specials_spec:null}))}))}))}})),Kl=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}}var t,a=ve(Qi.LatexContextDb,Qi);return ve((t=a).add_context_category,t,"base-formatting",me({macros:[ve(Is,null,"textbackslash",me({value:"\\"})),ve(Is,null,"%",me({value:"%"})),ve(Is,null,"#",me({value:"#"})),ve(Is,null,"&",me({value:"&"})),ve(Is,null,"$",me({value:"$"})),ve(Is,null," ",me({value:" "})),ve(Is,null,"{",me({value:"{"})),ve(Is,null,"}",me({value:"}"})),ve(qs,null,"emph",me({text_formats:tr(["textit"])})),ve(qs,null,"textit",me({text_formats:tr(["textit"])})),ve(qs,null,"textbf",me({text_formats:tr(["textbf"])}))],specials:[ve(Ms,null,"~",me({value:" "})),ve(Fs,null,"\n\n")]})),function(){var e=a;ve(e.add_context_category,e,"href",me({macros:[ve($s,null,me({macroname:"href",command_arguments:tr(["target_href","display_text"])})),ve($s,null,me({macroname:"url",command_arguments:tr(["target_href"])}))]}))}(),function(){var e=a;ve(e.add_context_category,e,"verbatimtext",me({environments:new ar([ve(Js,null,me({environmentname:"verbatimtext"}))])}))}(),a},Ql=function(){var e=null,r=!0,n="%%",t="",a=!1;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"force_block_level":e=o[s];break;case"enable_comments":r=o[s];break;case"comment_start":n=o[s];break;case"extra_forbidden_characters":t=o[s];break;case"dollar_inline_math_mode":a=o[s]}}}var _=ve(ir,null,t);if(Ne(Ne(!Ne(a))&&!Ce("$",_)))_=ve(Tr,null,_,"$");if(Ne(Ne(Ne(!Ne(r))||Lr(n,"%"))&&!Ce("%",_)))_=ve(Tr,null,_,"%");var l,c=[tr(["\\(","\\)"])];return Ne(a)&&ve((l=c).append,l,tr(["$","$"])),ve(ds,null,me({is_block_level:e,latex_context:null,enable_comments:r,comment_start:n,latex_inline_math_delimiters:c,latex_display_math_delimiters:[tr(["\\[","\\]"])],forbidden_characters:_}))},ec=function(){var e=!0,r=!0,n=null,t=!0,a=null,i=!0,o=null,s=!0,_=!0,l=null,c=null,u=null,f=null,d=!0,p=!0,g=null,h=!0;if(arguments.length){var v=arguments.length-1;if(arguments[v]&&arguments[v].hasOwnProperty("__kwargtrans__")){var m=arguments[v--];for(var w in m)switch(w){case"math":e=m[w];break;case"headings":r=m[w];break;case"heading_section_commands_by_level":n=m[w];break;case"refs":t=m[w];break;case"external_ref_resolvers":a=m[w];break;case"enumeration_environments":i=m[w];break;case"enumeration_environments_dict":o=m[w];break;case"endnotes":s=m[w];break;case"citations":_=m[w];break;case"external_citations_providers":l=m[w];break;case"eq_counter_formatter":c=m[w];break;case"footnote_counter_formatter":u=m[w];break;case"citation_counter_formatter":f=m[w];break;case"use_simple_path_graphics_resource_provider":d=m[w];break;case"floats":p=m[w];break;case"float_types":g=m[w];break;case"defterm":h=m[w]}}}if(Ne(null===u))u="alph";if(Ne(null===f))f="arabic";var k,y=[];if(Ne(e)&&ve((k=y).append,k,ve(Vl,null,me({eq_counter_formatter:c}))),Ne(i)&&function(){var e=y;ve(e.append,e,ve(zl,null,me({enumeration_environments:o})))}(),Ne(r)&&function(){var e=y;ve(e.append,e,ve(yl,null,me({section_commands_by_level:n})))}(),Ne(t)&&function(){var e=y;ve(e.append,e,ve(__,null,me({external_ref_resolvers:a})))}(),Ne(s)){var b=[ve(Ol,null,me({category_name:"footnote",counter_formatter:u,heading_title:"Footnotes",endnote_command:"footnote"}))];!function(){var e=y;ve(e.append,e,ve(Sl,null,me({categories:b})))}()}return Ne(Ne(_)&&null!==l)&&function(){var e=y;ve(e.append,e,ve(Al,null,me({external_citations_providers:l,counter_formatter:f,citation_delimiters:tr(["[","]"])})))}(),Ne(d)&&function(){var e=y;ve(e.append,e,ve(x_,null))}(),Ne(p)&&function(){var e=y;ve(e.append,e,ve(hl,null,me({float_types:g})))}(),Ne(h)&&function(){var e=y;ve(e.append,e,ve(m_,null))}(),y},rc=he("LLMStandardEnvironment",[ws],{__module__:Jl,get __init__(){return fe(this,(function(e,r,n,t){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var a=wr();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"features":r=o[s];break;case"parsing_state":n=o[s];break;case"latex_context":t=o[s];break;default:a[s]=o[s]}delete a.__kwargtrans__}}if(Ne(null===t))t=ve(Kl,null);if(Ne(null===n))n=ve(Ql,null,me(function(){for(var e,r=[],n=tr(["enable_comments","comment_start"]),t=0;t<je(n);t++){var i=qr(n,t);Ne(Ce(i,a))&&(e=void 0,ve(r.append,r,[i,(e=a,ve(e.py_pop,e,i))]))}return wr(r)}()));if(Ne(null===r))r=ve(ec,null,me(function(){for(var e,r=[],n=tr(["external_citations_providers","external_ref_resolvers","footnote_counter_formatter","citation_counter_formatter"]),t=0;t<je(n);t++){var i=qr(n,t);Ne(Ce(i,a))&&(e=void 0,ve(r.append,r,[i,(e=a,ve(e.py_pop,e,i))]))}return wr(r)}()));ve(ve(we,null,rc,"__init__"),null,e,r,n,t,me(a))}))},parsing_state_event_handler:ve(Zl,null),get get_parse_error_message(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"exception_object":r=t[a]}}}var i=null,o=r.error_type_info;if(Ne(o)){var s=qr(o,"what");if(Ne(Cr(s,"token_forbidden_character")))if(Ne(Cr(qr(o,"forbidden_character"),"%")))i="LaTeX comments are not allowed here. Use ‘\\%’ to typeset a literal percent sign.";else if(Ne(Cr(qr(o,"forbidden_character"),"$")))i="You can't use ‘$’ here. LaTeX math should be typeset using \\(...\\) for inline math and \\[...\\] for unnumbered display equations. Use ‘\\$’ for a literal dollar sign."}if(Ne(!Ne(i)))i=r.msg;var _,l=ve(fn.LatexWalkerParseErrorFormatter,fn,r);return i=ve(Tr,null,i,ve((_=l).format_full_traceback,_))}))}}),nc=r(m)("zoodb.zoollm._environment"),tc=yl.SectionCommandSpec,ac=Ol,ic=n_,oc=gl,sc=y_,_c=0,lc=[tc,ac,r_,ic,oc,sc];_c<lc.length;_c++){lc[_c].toJSON=function(){return this.asdict()}}function cc(e){return Re(e,Hi)}var uc=function(){"use strict";function e(r){I(this,e),this.options=null!=r?r:{},this.clear_all_refs(),this.target_href_resolver=null}return T(e,[{key:"clear_all_refs",value:function(){var e=this;this.ref_instance_database={},this.options.ref_types&&this.options.ref_types.forEach((function(r){e.ref_instance_database[r]={}}))}},{key:"add_ref",value:function(e){var r=e.ref_type,n=e.ref_label;if(null==r)throw new Error("Invalid ref_type:ref_label pair ‘".concat(r,":").concat(n,"’"));if(!this.ref_instance_database.hasOwnProperty(r)){if(void 0!==this.options.ref_types)throw new Error("Invalid ref prefix ‘".concat(r,"’ in ‘").concat(r,":").concat(n,"’, ")+"expected one of ".concat(this.options.ref_types));this.ref_instance_database[r]={}}if(this.ref_instance_database[r].hasOwnProperty(n))throw new Error("Ref target ‘".concat(r,":").concat(n,"’ already exists in ref instance ")+"database, found "+"".concat(JSON.stringify(this.ref_instance_database[r][n])));this.ref_instance_database[r][n]=e}},{key:"get_ref",value:function(e,r,n,t){var a,i,o=null===(a=this.ref_instance_database)||void 0===a||null===(i=a[e])||void 0===i?void 0:i[r];return null==o?(nc("No such reference in ref instance database — ".concat(e,":").concat(r)),null):null!=this.target_href_resolver?new ic(sn(Object.assign({},o.asdict(),{target_href:this.target_href_resolver(o,t)}))):o}},{key:"dump_database",value:function(){return{ref_instance_database:this.ref_instance_database}}},{key:"load_database",value:function(e){var r={},n=!0,t=!1,a=void 0;try{for(var i,o=Object.entries(e.ref_instance_database)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=d(i.value,2),_=s[0],l=s[1];r[_]={};var c=!0,u=!1,f=void 0;try{for(var p,g=Object.entries(l)[Symbol.iterator]();!(c=(p=g.next()).done);c=!0){var h=d(p.value,2),v=h[0],m=h[1];r[_][v]=new ic(sn(m))}}catch(e){u=!0,f=e}finally{try{c||null==g.return||g.return()}finally{if(u)throw f}}}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}this.ref_instance_database=r}}]),e}(),fc=function(){"use strict";function e(){I(this,e),this.clear_citations()}return T(e,[{key:"clear_citations",value:function(){this.citations_database={}}},{key:"add_citation",value:function(e,r,n){if(this.citations_database.hasOwnProperty(e)||(this.citations_database[e]={}),this.citations_database[e].hasOwnProperty(r))throw new Error("There is already a citation registered for ‘".concat(e,":").concat(r,"’"));this.citations_database[e][r]=n}},{key:"set_citations",value:function(e){this.clear_citations();var r=!0,n=!1,t=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var o=a.value,s=o.cite_prefix,_=o.cite_key,l=o.citation_text;this.add_citation(s,_,l)}}catch(e){n=!0,t=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw t}}}},{key:"get_citation_full_text_llm",value:function(e,r,n){return this.citations_database.hasOwnProperty(e)?this.citations_database[e].hasOwnProperty(r)?this.citations_database[e][r]:this.handle_unresolved_citation({cite_prefix:e,cite_key:r,resource_info:n,message:"There is no citation registered for key ‘".concat(e,":").concat(r,"’ ")+"in ".concat(n)}):this.handle_unresolved_citation({cite_prefix:e,cite_key:r,resource_info:n,message:"There is no citation registered for prefix ‘".concat(e,"’ in query ")+"for ‘".concat(e,":").concat(r,"’ in ").concat(n)})}},{key:"handle_unresolved_citation",value:function(e){var r=e.cite_prefix,n=e.cite_key,t=e.message;e.resource_info;return nc("Can't find citation ‘".concat(r,":").concat(n,"’: ").concat(t)),null}},{key:"dump_database",value:function(){var e={},r=!0,n=!1,t=void 0;try{for(var a,i=Object.entries(this.citations_database)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var o=d(a.value,2),s=o[0],_=o[1];e[s]={};var l=!0,c=!1,u=void 0;try{for(var f,p=Object.entries(_)[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var g=d(f.value,2),h=g[0],v=g[1];cc(v)&&(v=v.llm_text),e[s][h]=v}}catch(e){c=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){n=!0,t=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw t}}return{citations_database:e}}},{key:"load_database",value:function(e){this.citations_database=e.citations_database}}]),e}(),dc=he("FeatureZooGraphicsCollection",[bs],{__module__:"zoodb.zoollm._environment",RenderManager:he("RenderManager",[bs.RenderManager],{get get_graphics_resource(){return fe(this,(function(e,n,t){var a=e.feature,i=r(on).join(t.get_source_directory(),n);if(!a.graphics_collection.hasOwnProperty(i))throw new Error("No such graphics ‘".concat(i,"’ (‘").concat(n,"’ ")+"relative to ".concat(t,")"));var o=a.graphics_collection[i];if(null!=a.src_url_resolver){var s=a.src_url_resolver(o,e.render_context),_=s.src_url,l=s.srcset;if(void 0===_)throw new Error("src_url_resolver() did not return { src_url }.");return sc(sn(Object.assign({},o.asdict(),{src_url:_,srcset:l})))}return o}))}}),get __init__(){return fe(this,(function(e){we(dc,"__init__")(e),e.graphics_collection={},e.feature_name="graphics_resource_provider",e.src_url_resolver=null}))},get add_graphics(){return fe(this,(function(e,r,n){if(e.graphics_collection.hasOwnProperty(r))throw new Error("Graphics collection already has a graphics resource registered "+" for path ‘".concat(r,"’ (registered target ")+"‘".concat(e.graphics_collection[r].src_url,"’, new target ")+"‘".concat(n.src_url,"’)"));e.graphics_collection[r]=n}))},get set_collection(){return fe(this,(function(e,r){Object.entries(r).forEach((function(r){var n=d(r,2),t=n[0],a=n[1];e.add_graphics(t,a)}))}))}});var pc=he("ZooLLMEnvironment",[rc],{get __init__(){return fe(this,(function(e,r){var n,t,a;r=Object.assign({},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"alph";return{heading_section_commands_by_level:{2:tc("section",sn({inline:!1})),3:tc("subsection",sn({inline:!1})),4:tc("paragraph",sn({inline:!0}))},endnote_categories:[ac("footnote",sn({counter_formatter:e,heading_title:"Footnotes",endnote_command:"footnote"}))],citation_counter_formatter:"arabic",citation_delimiters:["[","]"],figure_filename_extensions:["",".svg",".png",".jpg",".jpeg"],float_types:[oc("figure","Figure",sn({counter_formatter:"Roman",content_handlers:["includegraphics"]})),oc("table","Table",sn({counter_formatter:"Roman",content_handlers:["cells","includegraphics"]}))],defterm_render_defterm_with_term:!0,defterm_render_defterm_with_term_suffix:": "}}(),r),e.citations_provider=null!==(n=r.citations_provider)&&void 0!==n?n:new fc,e.ref_resolver=null!==(t=r.ref_resolver)&&void 0!==t?t:new uc(r.ref_resolver_options),e.graphics_collection=null!==(a=r.graphics_collection)&&void 0!==a?a:new dc,nc("ZooLLMEnvironment.__init__(): creating feature class instances ..."),e.feature_math=new Vl,e.feature_headings=new yl(sn({section_commands_by_level:r.heading_section_commands_by_level})),e.feature_refs=new __([e.ref_resolver]),e.feature_endnotes=new Sl(sn({categories:r.endnote_categories})),e.feature_citations=new Al(sn({external_citations_providers:[e.citations_provider],counter_formatter:r.citation_counter_formatter,citation_delimiters:r.citation_delimiters})),e.feature_floats=new hl(sn({float_types:r.float_types})),e.feature_defterm=new m_,e.feature_defterm.render_defterm_with_term=r.defterm_render_defterm_with_term,e.feature_defterm.render_defterm_with_term_suffix=r.defterm_render_defterm_with_term_suffix;var i=[e.feature_math,e.feature_headings,e.feature_refs,e.feature_endnotes,e.feature_citations,e.feature_floats,e.feature_defterm,e.graphics_collection];nc("ZooLLMEnvironment.__init__(): calling super constructor ..."),we(pc,"__init__")(e,i)}))}}),gc={};ue(gc,"",Aa);var hc="llm.llmdump",vc=gc.fn_unique_object_id,mc=he("_FakeDataLoadedLLMLatexWalker",[ge],{__module__:hc,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"s":r=t[a]}}}e.s=r,e._fields=tr(["s"])}))},get __repr__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return"{}(s={})".format(e.__class__.__name__,e.s)}))}}),wc=he("_Skip",[ge],{__module__:hc}),kc=tr([Dn,Yo,Xo,Jo,Bo]),yc=(he("LLMDataDumper",[ge],{__module__:hc,get __init__(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)switch(t){case"self":e=n[t];break;case"environment":var a=n[t]}}}var i;e.environment=a,ve((i=e).py_clear,i)}))},get py_clear(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}e.data=wr({objects:wr({}),resources:wr({}),_dump:wr({version:1})})}))},get get_data(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return e.data}))},get add_dump(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"key":r=a[i];break;case"obj":n=a[i]}}}var o,s=ve((o=e)._make_object_dump,o,n,me({dumping_state:wr({object:n})}));zr(qr(e.data,"objects"),r,s)}))},get _make_object_dump(){return fe(this,(function(e,r){var n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"obj":r=a[i];break;case"dumping_state":var o=a[i];break;case"type_name":n=a[i]}}}for(var s,_=ve(ar,null,r._fields),l=ve(Oe,null,r),c=0;c<je(l);c++){var u=qr(l,c);Ne((s=void 0,ve((s=u).startswith,s,"llm")))&&function(){var e=_;ve(e.add,e,u)}()}var f=wr({$type:Ne(null!==n)?n:r.__class__.__name__});for(l=ve(rn,null,_),c=0;c<je(l);c++){var d=qr(l,c),p=function(){var n=e;return ve(n._make_dump,n,ve(Ee,null,r,d),me({dumping_state:o}))}();if(Ne(p===wc))p=wr({$skip:!0});zr(f,d,p)}return f}))},get _make_dump(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"x":r=t[a];break;case"dumping_state":var i=t[a]}}}if(Ne(ve(Re,null,r,tr([tr,nr])))){for(var o=[],s=r,_=0;_<je(s);_++){var l=qr(s,_);if(Ne((c=(u=void 0,ve((u=e)._make_dump,u,l,me({dumping_state:i}))))===wc))var c=null;!function(){var e=o;ve(e.append,e,c)}()}return o}var u;if(Ne(ve(Re,null,r,ms)))return function(){var n=e;return ve(n._make_resource,n,"LLMLatexWalker",r,ve(mc,null,r.s),me({dumping_state:i}))}();if(Ne(ve(Re,null,r,ds)))return function(){var n=e;return ve(n._make_resource,n,"LLMParsingState",r,r,me({dumping_state:i}))}();if(Ne(ve(Re,null,r,kc)))return wc;if(Ne(ve(Se,null,r,"_fields")))return function(){var n=e;return ve(n._make_object_dump,n,r,me({dumping_state:i}))}();if(Ne(null===r))return null;if(Ne(ve(Re,null,r,tr([ir,Me,Ie,Ae]))))return r;var f=ve(Hr,null,"Cannot dump value {} of unsupported type".format(r));throw f.__cause__=null,f}))},get _make_resource(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"restype":r=i[o];break;case"y":n=i[o];break;case"ydata":t=i[o];break;case"dumping_state":var s=i[o]}}}Ne(!Ce(r,qr(e.data,"resources")))&&zr(qr(e.data,"resources"),r,wr({}));var _,l=ve(ir,null,ve(vc,null,n));if(Ne(!Ce(l,qr(qr(e.data,"resources"),r)))){var c=ve((_=e)._make_object_dump,_,t,me({dumping_state:s,type_name:r}));zr(qr(qr(e.data,"resources"),r),l,c)}return wr({$restype:r,$reskey:l})}))}}),he("LLMDataLoadNotSupported",[ge],{__module__:hc})),bc=function(){for(var e=[],r=et,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,[t.__name__,t])}return wr(e)}(),xc=function(){for(var e=[],r=[ds,Rn],n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,[t.__name__,t])}return wr(e)}(),Oc=(he("LLMDataLoader",[ge],{__module__:hc,get __init__(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"data":r=t[a];break;case"environment":var i=t[a]}}}if(e.data=r,e.environment=i,Ne(Lr(qr(qr(e.data,"_dump"),"version"),1))){var o=ve(RuntimeError,null,"Dump version mismatch: {}, expected {}".format(qr(qr(e.data,"_dump"),"version"),1));throw o.__cause__=null,o}}))},get get_keys(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return ve(nr,null,ve((a=qr(e.data,"objects")).py_keys,a));var a}))},get get_object(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"key":r=t[a]}}}var i,o=qr(qr(e.data,"objects"),r);return ve((i=e)._load_from_data,i,o)}))},get _load_from_data(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"data":r=t[a]}}}if(Ne(ve(Re,null,r,nr)))return function(){for(var n,t=[],a=r,i=0;i<je(a);i++){var o=qr(a,i);n=void 0,ve(t.append,t,ve((n=e)._load_from_data,n,o))}return t}();if(Ne(ve(Re,null,r,wr))){if(Ne(Ne(Ce("$skip",r))&&!0===qr(r,"$skip")))return yc;if(Ne(Ce("$restype",r)))return ve((i=e)._load_resource,i,qr(r,"$restype"),qr(r,"$reskey"));if(Ne(Ce("$type",r)))return function(){var n,t=e;return ve(t._load_object,t,ve((n=r).py_pop,n,"$type"),r)}()}var i;return r}))},get _load_resource(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"restype":r=a[i];break;case"reskey":n=a[i]}}}var o,s=qr(qr(qr(e.data,"resources"),r),n);if(Ne(Cr(r,"LLMLatexWalker")))return ve(mc,null,qr(s,"s"));if(Ne(Cr(r,"LLMParsingState")))return ve((o=e)._load_object,o,r,ve(wr,null,s,me({latex_context:yc})));var _=ve(Hr,null,"Unknown data resource type to load: {}".format(r));throw _.__cause__=null,_}))},get _load_object(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"objtype":r=a[i];break;case"data":n=a[i]}}}if(Ne(Cr(r,"LLMFragment")))var o=e._make_fragment;else if(Ne(Ne(Ce(r,bc))||Cr(r,"LatexNodeList")))o=function(){var n,t=wr();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)t[o]=i[o];delete t.__kwargtrans__}}return ve((n=e)._make_node_instance,n,r,t)};else{if(!Ne(Ce(r,xc))){var s=ve(Hr,null,"Unknown object type ‘{}’ for data loading".format(r));throw s.__cause__=null,s}o=qr(xc,r)}var _=function(){for(var r,t,a=[],i=ve((r=n).py_items,r),o=0;o<je(i);o++){var s=qr(i,o),_=s[0],l=s[1];Ne(!Ne(function(){var e=_;return ve(e.startswith,e,"$")}()))&&(t=void 0,ve(a.append,a,[_,(t=e,ve(t._load_from_data,t,l))]))}return wr(a)}(),l=ve(o,null,me(_));return l}))},get _make_node_instance(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodetype":r=a[i];break;case"kwargs":n=a[i]}}}for(var o,s=wr({}),_=wr({}),l=ve((o=n).py_items,o),c=0;c<je(l);c++){var u=(g=qr(l,c))[0],f=g[1];Ne(function(){var e=u;return ve(e.startswith,e,"llm")}())?zr(_,u,f):zr(s,u,f)}if(Ne(Cr(r,"LatexNodeList")))var d=Jn;else d=qr(bc,r);var p=ve(d,null,me(s));for(l=function(){var e=_;return ve(e.py_items,e)}(),c=0;c<je(l);c++){var g;u=(g=qr(l,c))[0],f=g[1];ve(Pe,null,p,u,f)}return p}))},get _make_fragment(){return fe(this,(function(e){var r=wr();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)if("self"===a)e=t[a];else r[a]=t[a];delete r.__kwargtrans__}}var i,o=ve((i=r).py_pop,i,"nodes"),s=function(){var e=r;return ve(e.py_pop,e,"llm_text")}();return ve(Hi,null,me(xe({llm_text:o,environment:e.environment,_llm_text_if_loading_nodes:s},r)))}))}}),{});ue(Oc,"",dn);var Pc="llm.fragmentrenderer._base",Ec=(ve(Oc.getLogger,Oc,Pc),he("FragmentRenderer",[ge],{__module__:Pc,supports_delayed_render_markers:!1,get __init__(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"config":r=t[a]}}}if(ve(ve(we,null,Ec,"__init__"),null,e),Ne(null!==r))for(var i=ve((c=r).py_items,c),o=0;o<je(i);o++){var s=qr(i,o),_=s[0],l=s[1];ve(Pe,null,e,_,l)}var c}))},get render_fragment(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"llm_fragment":r=i[o];break;case"render_context":n=i[o];break;case"is_block_level":t=i[o]}}}try{return ve((_=e).render_nodelist,_,r.nodes,ve((s=e)._ensure_render_context,s,n),me({is_block_level:t}))}catch(e){if(Re(e,Ur)){throw e.__cause__=null,e}throw e}var s,_}))},get render_nodelist(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodelist":r=i[o];break;case"render_context":n=i[o];break;case"is_block_level":t=i[o]}}}var s,_;if(Ne(null===r))throw(s=ve(Hr,null,"render_nodelist(): nodelist should not be None")).__cause__=null,s;if(Ne(!Ne(ve(Se,null,r,"llm_is_block_level"))))throw(s=ve(Hr,null,"The given node list was not parsed & produced by LLM; missing .llm_is_block_level attribute")).__cause__=null,s;if(Ne(null===t))t=r.llm_is_block_level;if(Ne(Ne(!Ne(t))&&r.llm_is_block_level))throw(s=ve(Hr,null,"Cannot render node list ‘{}’ in inline mode (not block level mode) as it contains block-level elements.".format(r))).__cause__=null,s;if(Ne(t)){if(Ne(ve(Se,null,r,"llm_blocks")))var l=r.llm_blocks;else l=[r];return ve((_=e).render_blocks,_,l,n)}return function(){var t=e;return ve(t.render_inline_content,t,r,n)}()}))},get render_node(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o;n=ve((o=e)._ensure_render_context,o,n);if(Ne(function(){var e=r;return ve(e.isNodeType,e,Gn)}()))return function(){var t=e;return ve(t.render_node_chars,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,Un)}()))return function(){var t=e;return ve(t.render_node_comment,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,Bn)}()))return function(){var t=e;return ve(t.render_node_group,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,Wn)}()))return function(){var t=e;return ve(t.render_node_macro,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,Vn)}()))return function(){var t=e;return ve(t.render_node_environment,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,$n)}()))return function(){var t=e;return ve(t.render_node_specials,t,r,n)}();if(Ne(function(){var e=r;return ve(e.isNodeType,e,Yn)}()))return function(){var t=e;return ve(t.render_node_math,t,r,n)}();var s=ve(Hr,null,"Invalid node type: {}".format(r));throw s.__cause__=null,s}))},get render_node_chars(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}if(Ne(ve(Se,null,r,"llm_chars_value")))var o=r.llm_chars_value;else o=null;if(Ne(null===o))o=r.chars;return ve((s=e).render_value,s,o);var s}))},get render_node_comment(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return""}))},get render_node_group(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((s=e).render_nodelist,s,r.nodelist,ve((o=e)._ensure_render_context,o,n));var o,s}))},get render_node_macro(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((s=e).render_invocable_node,s,r,ve((o=e)._ensure_render_context,o,n));var o,s}))},get render_node_environment(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((s=e).render_invocable_node,s,r,ve((o=e)._ensure_render_context,o,n));var o,s}))},get render_node_specials(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((s=e).render_invocable_node,s,r,ve((o=e)._ensure_render_context,o,n));var o,s}))},get render_invocable_node(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o,s;if(Ne(Ne(!Ne(ve(Se,null,r,"llm_specinfo")))||null===r.llm_specinfo))throw(o=ve(RuntimeError,null,"Node {} does not have the `llm_specinfo` attribute set".format(r))).__cause__=null,o;if(Ne(n.is_standalone_mode)&&Ne(!Ne(r.llm_specinfo.allowed_in_standalone_mode)))throw(o=ve(Hr,null,"Cannot render ‘{}’ in standalone mode.".format(ve((s=r).latex_verbatim,s)))).__cause__=null,o;return function(){var t,a=e;return ve(a.render_invocable_node_call_render,a,r,r.llm_specinfo,ve((t=e)._ensure_render_context,t,n))}()}))},get render_invocable_node_call_render(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"llm_specinfo":n=i[o];break;case"render_context":t=i[o]}}}if(be(null!==t),Ne(null===n)){var s=ve(Hr,null,"Cannot render node={} because specinfo is None!".format(r));throw s.__cause__=null,s}var _,l=ve((_=t).get_is_delayed_render,_,r);if(Ne(l)){var c=t.is_first_pass,u=null;if(Ne(c)){!function(){var e=n;ve(e.prepare_delayed_render,e,r,t)}();u=function(){var n=t;return ve(n.register_delayed_render,n,r,e)}()}return Ne(e.supports_delayed_render_markers)?function(){var n=e;return ve(n.render_delayed_marker,n,r,u,t)}():Ne(c)?(function(){var e=n;ve(e.prepare_delayed_render,e,r,t)}(),function(){var n=e;return ve(n.render_delayed_dummy_placeholder,n,r,u,t)}()):(be(!Ne(t.is_first_pass)),function(){var e=t;return ve(e.get_delayed_render_content,e,r)}())}var f=function(){var e=n;return ve(e.render,e,r,t)}();return f}))},get render_node_math(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}return ve((s=e).render_math_content,s,r.delimiters,r.nodelist,ve((o=e)._ensure_render_context,o,n),me({displaytype:r.displaytype,target_id:null}));var o,s}))},get render_math_content(){return fe(this,(function(e,r,n,t,a){var i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"delimiters":r=s[_];break;case"nodelist":n=s[_];break;case"render_context":t=s[_];break;case"displaytype":a=s[_];break;case"environmentname":s[_];break;case"target_id":i=s[_]}}}var l,c,u=ve((c=e).render_verbatim,c,Or(Or(qr(r,0),ve((l=n).latex_verbatim,l)),qr(r,1)),me({annotations:["{}-math".format(a)],target_id:i}));return u}))},get render_blocks(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"node_blocks":r=a[i];break;case"render_context":n=a[i]}}}for(var o,s=[],_=r,l=0;l<je(_);l++){var c=qr(_,l);if(Ne(ve(Re,null,c,Jn)))var u=(o=void 0,ve((o=e).render_build_paragraph,o,c,n));else u=function(){var r=e;return ve(r.render_node,r,c,n)}();!function(){var e=s;ve(e.append,e,u)}()}return function(){var r=e;return ve(r.render_join_blocks,r,s)}()}))},get render_build_paragraph(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}return ve((o=e).render_inline_content,o,r,n);var o}))},get render_inline_content(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}return ve((o=e).render_join,o,function(){for(var t,a=[],i=r,o=0;o<je(i);o++){var s=qr(i,o);t=void 0,ve(a.append,a,ve((t=e).render_node,t,s,n))}return a}());var o}))},get render_join(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"content_list":r=t[a]}}}return ve("".join,"",r)}))},get render_join_blocks(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"content_list":r=t[a]}}}return ve("\n\n".join,"\n\n",function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);Ne(Ne(null!==a)&&ve(je,null,a))&&ve(e.append,e,a)}return e}())}))},get render_semantic_block(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":r=a[i];break;case"role":n=a[i];break;case"annotations":a[i];break;case"target_id":a[i]}}}return r}))},get replace_delayed_markers_with_final_values(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":r=a[i];break;case"delayed_values":n=a[i]}}}var o=ve(RuntimeError,null,"Reimplement me!");throw o.__cause__=null,o}))},get render_value(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a]}}}var i=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_delayed_marker(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}var s=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_delayed_dummy_placeholder(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}var s=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_nothing(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"annotations":r=t[a]}}}var i=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_empty_error_placeholder(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"debug_str":r=t[a]}}}var i=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_text_format(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"text_formats":r=i[o];break;case"nodelist":n=i[o];break;case"render_context":t=i[o]}}}var s=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_enumeration(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"iter_items_nodelists":r=i[o];break;case"counter_formatter":n=i[o];break;case"render_context":t=i[o];break;case"target_id_generator":i[o];break;case"annotations":i[o]}}}var s=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_heading(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"heading_nodelist":r=a[i];break;case"render_context":n=a[i];break;case"heading_level":a[i];break;case"inline_heading":a[i];break;case"target_id":a[i]}}}var o=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_verbatim(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a];break;case"annotations":t[a];break;case"target_id":t[a]}}}var i=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_link(){return fe(this,(function(e,r,n,t,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"ref_type":r=s[_];break;case"href":n=s[_];break;case"display_nodelist":t=s[_];break;case"render_context":a=s[_];break;case"annotations":i=s[_]}}}var l=ve(RuntimeError,null,"Subclasses need to reimplement this method");throw l.__cause__=null,l}))},get render_float(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_instance":r=a[i];break;case"render_context":n=a[i]}}}var o=ve(RuntimeError,null,"Feature is not implemented by subclass");throw o.__cause__=null,o}))},get render_graphics_block(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"graphics_resource":r=t[a]}}}var i=ve(RuntimeError,null,"Feature is not implemented by subclass");throw i.__cause__=null,i}))},get render_cells(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cells_model":r=i[o];break;case"render_context":n=i[o];break;case"target_id":t=i[o]}}}var s=ve(RuntimeError,null,"Feature is not implemented by subclass");throw s.__cause__=null,s}))},get _ensure_render_context(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"render_context":r=t[a]}}}return Ne(r)||ve(Ja,null,me({fragment_renderer:e}))}))}})),Sc={};e(Sc,"__all__",(function(){return qc})),e(Sc,"escape",(function(){return zc})),e(Sc,"_invalid_charrefs",(function(){return Fc})),e(Sc,"_invalid_codepoints",(function(){return Gc})),e(Sc,"_replace_charref",(function(){return Bc})),e(Sc,"_charref",(function(){return Uc})),e(Sc,"unescape",(function(){return Wc})),e(Sc,"_html5",(function(){return jc})),e(Sc,"_re",(function(){return Ct}));for(var Cc,Lc=wr({AElig:198,Aacute:193,Acirc:194,Agrave:192,Alpha:913,Aring:197,Atilde:195,Auml:196,Beta:914,Ccedil:199,Chi:935,Dagger:8225,Delta:916,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Epsilon:917,Eta:919,Euml:203,Gamma:915,Iacute:205,Icirc:206,Igrave:204,Iota:921,Iuml:207,Kappa:922,Lambda:923,Mu:924,Ntilde:209,Nu:925,OElig:338,Oacute:211,Ocirc:212,Ograve:210,Omega:937,Omicron:927,Oslash:216,Otilde:213,Ouml:214,Phi:934,Pi:928,Prime:8243,Psi:936,Rho:929,Scaron:352,Sigma:931,THORN:222,Tau:932,Theta:920,Uacute:218,Ucirc:219,Ugrave:217,Upsilon:933,Uuml:220,Xi:926,Yacute:221,Yuml:376,Zeta:918,aacute:225,acirc:226,acute:180,aelig:230,agrave:224,alefsym:8501,alpha:945,amp:38,and:8743,ang:8736,aring:229,asymp:8776,atilde:227,auml:228,bdquo:8222,beta:946,brvbar:166,bull:8226,cap:8745,ccedil:231,cedil:184,cent:162,chi:967,circ:710,clubs:9827,cong:8773,copy:169,crarr:8629,cup:8746,curren:164,dArr:8659,dagger:8224,darr:8595,deg:176,delta:948,diams:9830,divide:247,eacute:233,ecirc:234,egrave:232,empty:8709,emsp:8195,ensp:8194,epsilon:949,equiv:8801,eta:951,eth:240,euml:235,euro:8364,exist:8707,fnof:402,forall:8704,frac12:189,frac14:188,frac34:190,frasl:8260,gamma:947,ge:8805,gt:62,hArr:8660,harr:8596,hearts:9829,hellip:8230,iacute:237,icirc:238,iexcl:161,igrave:236,image:8465,infin:8734,int:8747,iota:953,iquest:191,isin:8712,iuml:239,kappa:954,lArr:8656,lambda:955,lang:9001,laquo:171,larr:8592,lceil:8968,ldquo:8220,le:8804,lfloor:8970,lowast:8727,loz:9674,lrm:8206,lsaquo:8249,lsquo:8216,lt:60,macr:175,mdash:8212,micro:181,middot:183,minus:8722,mu:956,nabla:8711,nbsp:160,ndash:8211,ne:8800,ni:8715,not:172,notin:8713,nsub:8836,ntilde:241,nu:957,oacute:243,ocirc:244,oelig:339,ograve:242,oline:8254,omega:969,omicron:959,oplus:8853,or:8744,ordf:170,ordm:186,oslash:248,otilde:245,otimes:8855,ouml:246,para:182,part:8706,permil:8240,perp:8869,phi:966,pi:960,piv:982,plusmn:177,pound:163,prime:8242,prod:8719,prop:8733,psi:968,quot:34,rArr:8658,radic:8730,rang:9002,raquo:187,rarr:8594,rceil:8969,rdquo:8221,real:8476,reg:174,rfloor:8971,rho:961,rlm:8207,rsaquo:8250,rsquo:8217,sbquo:8218,scaron:353,sdot:8901,sect:167,shy:173,sigma:963,sigmaf:962,sim:8764,spades:9824,sub:8834,sube:8838,sum:8721,sup:8835,sup1:185,sup2:178,sup3:179,supe:8839,szlig:223,tau:964,there4:8756,theta:952,thetasym:977,thinsp:8201,thorn:254,tilde:732,times:215,trade:8482,uArr:8657,uacute:250,uarr:8593,ucirc:251,ugrave:249,uml:168,upsih:978,upsilon:965,uuml:252,weierp:8472,xi:958,yacute:253,yen:165,yuml:255,zeta:950,zwj:8205,zwnj:8204}),jc=wr({Aacute:"Á",aacute:"á","Aacute;":"Á","aacute;":"á","Abreve;":"Ă","abreve;":"ă","ac;":"∾","acd;":"∿","acE;":"∾̳",Acirc:"Â",acirc:"â","Acirc;":"Â","acirc;":"â",acute:"´","acute;":"´","Acy;":"А","acy;":"а",AElig:"Æ",aelig:"æ","AElig;":"Æ","aelig;":"æ","af;":"⁡","Afr;":"𝔄","afr;":"𝔞",Agrave:"À",agrave:"à","Agrave;":"À","agrave;":"à","alefsym;":"ℵ","aleph;":"ℵ","Alpha;":"Α","alpha;":"α","Amacr;":"Ā","amacr;":"ā","amalg;":"⨿",AMP:"&",amp:"&","AMP;":"&","amp;":"&","And;":"⩓","and;":"∧","andand;":"⩕","andd;":"⩜","andslope;":"⩘","andv;":"⩚","ang;":"∠","ange;":"⦤","angle;":"∠","angmsd;":"∡","angmsdaa;":"⦨","angmsdab;":"⦩","angmsdac;":"⦪","angmsdad;":"⦫","angmsdae;":"⦬","angmsdaf;":"⦭","angmsdag;":"⦮","angmsdah;":"⦯","angrt;":"∟","angrtvb;":"⊾","angrtvbd;":"⦝","angsph;":"∢","angst;":"Å","angzarr;":"⍼","Aogon;":"Ą","aogon;":"ą","Aopf;":"𝔸","aopf;":"𝕒","ap;":"≈","apacir;":"⩯","apE;":"⩰","ape;":"≊","apid;":"≋","apos;":"'","ApplyFunction;":"⁡","approx;":"≈","approxeq;":"≊",Aring:"Å",aring:"å","Aring;":"Å","aring;":"å","Ascr;":"𝒜","ascr;":"𝒶","Assign;":"≔","ast;":"*","asymp;":"≈","asympeq;":"≍",Atilde:"Ã",atilde:"ã","Atilde;":"Ã","atilde;":"ã",Auml:"Ä",auml:"ä","Auml;":"Ä","auml;":"ä","awconint;":"∳","awint;":"⨑","backcong;":"≌","backepsilon;":"϶","backprime;":"‵","backsim;":"∽","backsimeq;":"⋍","Backslash;":"∖","Barv;":"⫧","barvee;":"⊽","Barwed;":"⌆","barwed;":"⌅","barwedge;":"⌅","bbrk;":"⎵","bbrktbrk;":"⎶","bcong;":"≌","Bcy;":"Б","bcy;":"б","bdquo;":"„","becaus;":"∵","Because;":"∵","because;":"∵","bemptyv;":"⦰","bepsi;":"϶","bernou;":"ℬ","Bernoullis;":"ℬ","Beta;":"Β","beta;":"β","beth;":"ℶ","between;":"≬","Bfr;":"𝔅","bfr;":"𝔟","bigcap;":"⋂","bigcirc;":"◯","bigcup;":"⋃","bigodot;":"⨀","bigoplus;":"⨁","bigotimes;":"⨂","bigsqcup;":"⨆","bigstar;":"★","bigtriangledown;":"▽","bigtriangleup;":"△","biguplus;":"⨄","bigvee;":"⋁","bigwedge;":"⋀","bkarow;":"⤍","blacklozenge;":"⧫","blacksquare;":"▪","blacktriangle;":"▴","blacktriangledown;":"▾","blacktriangleleft;":"◂","blacktriangleright;":"▸","blank;":"␣","blk12;":"▒","blk14;":"░","blk34;":"▓","block;":"█","bne;":"=⃥","bnequiv;":"≡⃥","bNot;":"⫭","bnot;":"⌐","Bopf;":"𝔹","bopf;":"𝕓","bot;":"⊥","bottom;":"⊥","bowtie;":"⋈","boxbox;":"⧉","boxDL;":"╗","boxDl;":"╖","boxdL;":"╕","boxdl;":"┐","boxDR;":"╔","boxDr;":"╓","boxdR;":"╒","boxdr;":"┌","boxH;":"═","boxh;":"─","boxHD;":"╦","boxHd;":"╤","boxhD;":"╥","boxhd;":"┬","boxHU;":"╩","boxHu;":"╧","boxhU;":"╨","boxhu;":"┴","boxminus;":"⊟","boxplus;":"⊞","boxtimes;":"⊠","boxUL;":"╝","boxUl;":"╜","boxuL;":"╛","boxul;":"┘","boxUR;":"╚","boxUr;":"╙","boxuR;":"╘","boxur;":"└","boxV;":"║","boxv;":"│","boxVH;":"╬","boxVh;":"╫","boxvH;":"╪","boxvh;":"┼","boxVL;":"╣","boxVl;":"╢","boxvL;":"╡","boxvl;":"┤","boxVR;":"╠","boxVr;":"╟","boxvR;":"╞","boxvr;":"├","bprime;":"‵","Breve;":"˘","breve;":"˘",brvbar:"¦","brvbar;":"¦","Bscr;":"ℬ","bscr;":"𝒷","bsemi;":"⁏","bsim;":"∽","bsime;":"⋍","bsol;":"\\","bsolb;":"⧅","bsolhsub;":"⟈","bull;":"•","bullet;":"•","bump;":"≎","bumpE;":"⪮","bumpe;":"≏","Bumpeq;":"≎","bumpeq;":"≏","Cacute;":"Ć","cacute;":"ć","Cap;":"⋒","cap;":"∩","capand;":"⩄","capbrcup;":"⩉","capcap;":"⩋","capcup;":"⩇","capdot;":"⩀","CapitalDifferentialD;":"ⅅ","caps;":"∩︀","caret;":"⁁","caron;":"ˇ","Cayleys;":"ℭ","ccaps;":"⩍","Ccaron;":"Č","ccaron;":"č",Ccedil:"Ç",ccedil:"ç","Ccedil;":"Ç","ccedil;":"ç","Ccirc;":"Ĉ","ccirc;":"ĉ","Cconint;":"∰","ccups;":"⩌","ccupssm;":"⩐","Cdot;":"Ċ","cdot;":"ċ",cedil:"¸","cedil;":"¸","Cedilla;":"¸","cemptyv;":"⦲",cent:"¢","cent;":"¢","CenterDot;":"·","centerdot;":"·","Cfr;":"ℭ","cfr;":"𝔠","CHcy;":"Ч","chcy;":"ч","check;":"✓","checkmark;":"✓","Chi;":"Χ","chi;":"χ","cir;":"○","circ;":"ˆ","circeq;":"≗","circlearrowleft;":"↺","circlearrowright;":"↻","circledast;":"⊛","circledcirc;":"⊚","circleddash;":"⊝","CircleDot;":"⊙","circledR;":"®","circledS;":"Ⓢ","CircleMinus;":"⊖","CirclePlus;":"⊕","CircleTimes;":"⊗","cirE;":"⧃","cire;":"≗","cirfnint;":"⨐","cirmid;":"⫯","cirscir;":"⧂","ClockwiseContourIntegral;":"∲","CloseCurlyDoubleQuote;":"”","CloseCurlyQuote;":"’","clubs;":"♣","clubsuit;":"♣","Colon;":"∷","colon;":":","Colone;":"⩴","colone;":"≔","coloneq;":"≔","comma;":",","commat;":"@","comp;":"∁","compfn;":"∘","complement;":"∁","complexes;":"ℂ","cong;":"≅","congdot;":"⩭","Congruent;":"≡","Conint;":"∯","conint;":"∮","ContourIntegral;":"∮","Copf;":"ℂ","copf;":"𝕔","coprod;":"∐","Coproduct;":"∐",COPY:"©",copy:"©","COPY;":"©","copy;":"©","copysr;":"℗","CounterClockwiseContourIntegral;":"∳","crarr;":"↵","Cross;":"⨯","cross;":"✗","Cscr;":"𝒞","cscr;":"𝒸","csub;":"⫏","csube;":"⫑","csup;":"⫐","csupe;":"⫒","ctdot;":"⋯","cudarrl;":"⤸","cudarrr;":"⤵","cuepr;":"⋞","cuesc;":"⋟","cularr;":"↶","cularrp;":"⤽","Cup;":"⋓","cup;":"∪","cupbrcap;":"⩈","CupCap;":"≍","cupcap;":"⩆","cupcup;":"⩊","cupdot;":"⊍","cupor;":"⩅","cups;":"∪︀","curarr;":"↷","curarrm;":"⤼","curlyeqprec;":"⋞","curlyeqsucc;":"⋟","curlyvee;":"⋎","curlywedge;":"⋏",curren:"¤","curren;":"¤","curvearrowleft;":"↶","curvearrowright;":"↷","cuvee;":"⋎","cuwed;":"⋏","cwconint;":"∲","cwint;":"∱","cylcty;":"⌭","Dagger;":"‡","dagger;":"†","daleth;":"ℸ","Darr;":"↡","dArr;":"⇓","darr;":"↓","dash;":"‐","Dashv;":"⫤","dashv;":"⊣","dbkarow;":"⤏","dblac;":"˝","Dcaron;":"Ď","dcaron;":"ď","Dcy;":"Д","dcy;":"д","DD;":"ⅅ","dd;":"ⅆ","ddagger;":"‡","ddarr;":"⇊","DDotrahd;":"⤑","ddotseq;":"⩷",deg:"°","deg;":"°","Del;":"∇","Delta;":"Δ","delta;":"δ","demptyv;":"⦱","dfisht;":"⥿","Dfr;":"𝔇","dfr;":"𝔡","dHar;":"⥥","dharl;":"⇃","dharr;":"⇂","DiacriticalAcute;":"´","DiacriticalDot;":"˙","DiacriticalDoubleAcute;":"˝","DiacriticalGrave;":"`","DiacriticalTilde;":"˜","diam;":"⋄","Diamond;":"⋄","diamond;":"⋄","diamondsuit;":"♦","diams;":"♦","die;":"¨","DifferentialD;":"ⅆ","digamma;":"ϝ","disin;":"⋲","div;":"÷",divide:"÷","divide;":"÷","divideontimes;":"⋇","divonx;":"⋇","DJcy;":"Ђ","djcy;":"ђ","dlcorn;":"⌞","dlcrop;":"⌍","dollar;":"$","Dopf;":"𝔻","dopf;":"𝕕","Dot;":"¨","dot;":"˙","DotDot;":"⃜","doteq;":"≐","doteqdot;":"≑","DotEqual;":"≐","dotminus;":"∸","dotplus;":"∔","dotsquare;":"⊡","doublebarwedge;":"⌆","DoubleContourIntegral;":"∯","DoubleDot;":"¨","DoubleDownArrow;":"⇓","DoubleLeftArrow;":"⇐","DoubleLeftRightArrow;":"⇔","DoubleLeftTee;":"⫤","DoubleLongLeftArrow;":"⟸","DoubleLongLeftRightArrow;":"⟺","DoubleLongRightArrow;":"⟹","DoubleRightArrow;":"⇒","DoubleRightTee;":"⊨","DoubleUpArrow;":"⇑","DoubleUpDownArrow;":"⇕","DoubleVerticalBar;":"∥","DownArrow;":"↓","Downarrow;":"⇓","downarrow;":"↓","DownArrowBar;":"⤓","DownArrowUpArrow;":"⇵","DownBreve;":"̑","downdownarrows;":"⇊","downharpoonleft;":"⇃","downharpoonright;":"⇂","DownLeftRightVector;":"⥐","DownLeftTeeVector;":"⥞","DownLeftVector;":"↽","DownLeftVectorBar;":"⥖","DownRightTeeVector;":"⥟","DownRightVector;":"⇁","DownRightVectorBar;":"⥗","DownTee;":"⊤","DownTeeArrow;":"↧","drbkarow;":"⤐","drcorn;":"⌟","drcrop;":"⌌","Dscr;":"𝒟","dscr;":"𝒹","DScy;":"Ѕ","dscy;":"ѕ","dsol;":"⧶","Dstrok;":"Đ","dstrok;":"đ","dtdot;":"⋱","dtri;":"▿","dtrif;":"▾","duarr;":"⇵","duhar;":"⥯","dwangle;":"⦦","DZcy;":"Џ","dzcy;":"џ","dzigrarr;":"⟿",Eacute:"É",eacute:"é","Eacute;":"É","eacute;":"é","easter;":"⩮","Ecaron;":"Ě","ecaron;":"ě","ecir;":"≖",Ecirc:"Ê",ecirc:"ê","Ecirc;":"Ê","ecirc;":"ê","ecolon;":"≕","Ecy;":"Э","ecy;":"э","eDDot;":"⩷","Edot;":"Ė","eDot;":"≑","edot;":"ė","ee;":"ⅇ","efDot;":"≒","Efr;":"𝔈","efr;":"𝔢","eg;":"⪚",Egrave:"È",egrave:"è","Egrave;":"È","egrave;":"è","egs;":"⪖","egsdot;":"⪘","el;":"⪙","Element;":"∈","elinters;":"⏧","ell;":"ℓ","els;":"⪕","elsdot;":"⪗","Emacr;":"Ē","emacr;":"ē","empty;":"∅","emptyset;":"∅","EmptySmallSquare;":"◻","emptyv;":"∅","EmptyVerySmallSquare;":"▫","emsp13;":" ","emsp14;":" ","emsp;":" ","ENG;":"Ŋ","eng;":"ŋ","ensp;":" ","Eogon;":"Ę","eogon;":"ę","Eopf;":"𝔼","eopf;":"𝕖","epar;":"⋕","eparsl;":"⧣","eplus;":"⩱","epsi;":"ε","Epsilon;":"Ε","epsilon;":"ε","epsiv;":"ϵ","eqcirc;":"≖","eqcolon;":"≕","eqsim;":"≂","eqslantgtr;":"⪖","eqslantless;":"⪕","Equal;":"⩵","equals;":"=","EqualTilde;":"≂","equest;":"≟","Equilibrium;":"⇌","equiv;":"≡","equivDD;":"⩸","eqvparsl;":"⧥","erarr;":"⥱","erDot;":"≓","Escr;":"ℰ","escr;":"ℯ","esdot;":"≐","Esim;":"⩳","esim;":"≂","Eta;":"Η","eta;":"η",ETH:"Ð",eth:"ð","ETH;":"Ð","eth;":"ð",Euml:"Ë",euml:"ë","Euml;":"Ë","euml;":"ë","euro;":"€","excl;":"!","exist;":"∃","Exists;":"∃","expectation;":"ℰ","ExponentialE;":"ⅇ","exponentiale;":"ⅇ","fallingdotseq;":"≒","Fcy;":"Ф","fcy;":"ф","female;":"♀","ffilig;":"ﬃ","fflig;":"ﬀ","ffllig;":"ﬄ","Ffr;":"𝔉","ffr;":"𝔣","filig;":"ﬁ","FilledSmallSquare;":"◼","FilledVerySmallSquare;":"▪","fjlig;":"fj","flat;":"♭","fllig;":"ﬂ","fltns;":"▱","fnof;":"ƒ","Fopf;":"𝔽","fopf;":"𝕗","ForAll;":"∀","forall;":"∀","fork;":"⋔","forkv;":"⫙","Fouriertrf;":"ℱ","fpartint;":"⨍",frac12:"½","frac12;":"½","frac13;":"⅓",frac14:"¼","frac14;":"¼","frac15;":"⅕","frac16;":"⅙","frac18;":"⅛","frac23;":"⅔","frac25;":"⅖",frac34:"¾","frac34;":"¾","frac35;":"⅗","frac38;":"⅜","frac45;":"⅘","frac56;":"⅚","frac58;":"⅝","frac78;":"⅞","frasl;":"⁄","frown;":"⌢","Fscr;":"ℱ","fscr;":"𝒻","gacute;":"ǵ","Gamma;":"Γ","gamma;":"γ","Gammad;":"Ϝ","gammad;":"ϝ","gap;":"⪆","Gbreve;":"Ğ","gbreve;":"ğ","Gcedil;":"Ģ","Gcirc;":"Ĝ","gcirc;":"ĝ","Gcy;":"Г","gcy;":"г","Gdot;":"Ġ","gdot;":"ġ","gE;":"≧","ge;":"≥","gEl;":"⪌","gel;":"⋛","geq;":"≥","geqq;":"≧","geqslant;":"⩾","ges;":"⩾","gescc;":"⪩","gesdot;":"⪀","gesdoto;":"⪂","gesdotol;":"⪄","gesl;":"⋛︀","gesles;":"⪔","Gfr;":"𝔊","gfr;":"𝔤","Gg;":"⋙","gg;":"≫","ggg;":"⋙","gimel;":"ℷ","GJcy;":"Ѓ","gjcy;":"ѓ","gl;":"≷","gla;":"⪥","glE;":"⪒","glj;":"⪤","gnap;":"⪊","gnapprox;":"⪊","gnE;":"≩","gne;":"⪈","gneq;":"⪈","gneqq;":"≩","gnsim;":"⋧","Gopf;":"𝔾","gopf;":"𝕘","grave;":"`","GreaterEqual;":"≥","GreaterEqualLess;":"⋛","GreaterFullEqual;":"≧","GreaterGreater;":"⪢","GreaterLess;":"≷","GreaterSlantEqual;":"⩾","GreaterTilde;":"≳","Gscr;":"𝒢","gscr;":"ℊ","gsim;":"≳","gsime;":"⪎","gsiml;":"⪐",GT:">",gt:">","GT;":">","Gt;":"≫","gt;":">","gtcc;":"⪧","gtcir;":"⩺","gtdot;":"⋗","gtlPar;":"⦕","gtquest;":"⩼","gtrapprox;":"⪆","gtrarr;":"⥸","gtrdot;":"⋗","gtreqless;":"⋛","gtreqqless;":"⪌","gtrless;":"≷","gtrsim;":"≳","gvertneqq;":"≩︀","gvnE;":"≩︀","Hacek;":"ˇ","hairsp;":" ","half;":"½","hamilt;":"ℋ","HARDcy;":"Ъ","hardcy;":"ъ","hArr;":"⇔","harr;":"↔","harrcir;":"⥈","harrw;":"↭","Hat;":"^","hbar;":"ℏ","Hcirc;":"Ĥ","hcirc;":"ĥ","hearts;":"♥","heartsuit;":"♥","hellip;":"…","hercon;":"⊹","Hfr;":"ℌ","hfr;":"𝔥","HilbertSpace;":"ℋ","hksearow;":"⤥","hkswarow;":"⤦","hoarr;":"⇿","homtht;":"∻","hookleftarrow;":"↩","hookrightarrow;":"↪","Hopf;":"ℍ","hopf;":"𝕙","horbar;":"―","HorizontalLine;":"─","Hscr;":"ℋ","hscr;":"𝒽","hslash;":"ℏ","Hstrok;":"Ħ","hstrok;":"ħ","HumpDownHump;":"≎","HumpEqual;":"≏","hybull;":"⁃","hyphen;":"‐",Iacute:"Í",iacute:"í","Iacute;":"Í","iacute;":"í","ic;":"⁣",Icirc:"Î",icirc:"î","Icirc;":"Î","icirc;":"î","Icy;":"И","icy;":"и","Idot;":"İ","IEcy;":"Е","iecy;":"е",iexcl:"¡","iexcl;":"¡","iff;":"⇔","Ifr;":"ℑ","ifr;":"𝔦",Igrave:"Ì",igrave:"ì","Igrave;":"Ì","igrave;":"ì","ii;":"ⅈ","iiiint;":"⨌","iiint;":"∭","iinfin;":"⧜","iiota;":"℩","IJlig;":"Ĳ","ijlig;":"ĳ","Im;":"ℑ","Imacr;":"Ī","imacr;":"ī","image;":"ℑ","ImaginaryI;":"ⅈ","imagline;":"ℐ","imagpart;":"ℑ","imath;":"ı","imof;":"⊷","imped;":"Ƶ","Implies;":"⇒","in;":"∈","incare;":"℅","infin;":"∞","infintie;":"⧝","inodot;":"ı","Int;":"∬","int;":"∫","intcal;":"⊺","integers;":"ℤ","Integral;":"∫","intercal;":"⊺","Intersection;":"⋂","intlarhk;":"⨗","intprod;":"⨼","InvisibleComma;":"⁣","InvisibleTimes;":"⁢","IOcy;":"Ё","iocy;":"ё","Iogon;":"Į","iogon;":"į","Iopf;":"𝕀","iopf;":"𝕚","Iota;":"Ι","iota;":"ι","iprod;":"⨼",iquest:"¿","iquest;":"¿","Iscr;":"ℐ","iscr;":"𝒾","isin;":"∈","isindot;":"⋵","isinE;":"⋹","isins;":"⋴","isinsv;":"⋳","isinv;":"∈","it;":"⁢","Itilde;":"Ĩ","itilde;":"ĩ","Iukcy;":"І","iukcy;":"і",Iuml:"Ï",iuml:"ï","Iuml;":"Ï","iuml;":"ï","Jcirc;":"Ĵ","jcirc;":"ĵ","Jcy;":"Й","jcy;":"й","Jfr;":"𝔍","jfr;":"𝔧","jmath;":"ȷ","Jopf;":"𝕁","jopf;":"𝕛","Jscr;":"𝒥","jscr;":"𝒿","Jsercy;":"Ј","jsercy;":"ј","Jukcy;":"Є","jukcy;":"є","Kappa;":"Κ","kappa;":"κ","kappav;":"ϰ","Kcedil;":"Ķ","kcedil;":"ķ","Kcy;":"К","kcy;":"к","Kfr;":"𝔎","kfr;":"𝔨","kgreen;":"ĸ","KHcy;":"Х","khcy;":"х","KJcy;":"Ќ","kjcy;":"ќ","Kopf;":"𝕂","kopf;":"𝕜","Kscr;":"𝒦","kscr;":"𝓀","lAarr;":"⇚","Lacute;":"Ĺ","lacute;":"ĺ","laemptyv;":"⦴","lagran;":"ℒ","Lambda;":"Λ","lambda;":"λ","Lang;":"⟪","lang;":"⟨","langd;":"⦑","langle;":"⟨","lap;":"⪅","Laplacetrf;":"ℒ",laquo:"«","laquo;":"«","Larr;":"↞","lArr;":"⇐","larr;":"←","larrb;":"⇤","larrbfs;":"⤟","larrfs;":"⤝","larrhk;":"↩","larrlp;":"↫","larrpl;":"⤹","larrsim;":"⥳","larrtl;":"↢","lat;":"⪫","lAtail;":"⤛","latail;":"⤙","late;":"⪭","lates;":"⪭︀","lBarr;":"⤎","lbarr;":"⤌","lbbrk;":"❲","lbrace;":"{","lbrack;":"[","lbrke;":"⦋","lbrksld;":"⦏","lbrkslu;":"⦍","Lcaron;":"Ľ","lcaron;":"ľ","Lcedil;":"Ļ","lcedil;":"ļ","lceil;":"⌈","lcub;":"{","Lcy;":"Л","lcy;":"л","ldca;":"⤶","ldquo;":"“","ldquor;":"„","ldrdhar;":"⥧","ldrushar;":"⥋","ldsh;":"↲","lE;":"≦","le;":"≤","LeftAngleBracket;":"⟨","LeftArrow;":"←","Leftarrow;":"⇐","leftarrow;":"←","LeftArrowBar;":"⇤","LeftArrowRightArrow;":"⇆","leftarrowtail;":"↢","LeftCeiling;":"⌈","LeftDoubleBracket;":"⟦","LeftDownTeeVector;":"⥡","LeftDownVector;":"⇃","LeftDownVectorBar;":"⥙","LeftFloor;":"⌊","leftharpoondown;":"↽","leftharpoonup;":"↼","leftleftarrows;":"⇇","LeftRightArrow;":"↔","Leftrightarrow;":"⇔","leftrightarrow;":"↔","leftrightarrows;":"⇆","leftrightharpoons;":"⇋","leftrightsquigarrow;":"↭","LeftRightVector;":"⥎","LeftTee;":"⊣","LeftTeeArrow;":"↤","LeftTeeVector;":"⥚","leftthreetimes;":"⋋","LeftTriangle;":"⊲","LeftTriangleBar;":"⧏","LeftTriangleEqual;":"⊴","LeftUpDownVector;":"⥑","LeftUpTeeVector;":"⥠","LeftUpVector;":"↿","LeftUpVectorBar;":"⥘","LeftVector;":"↼","LeftVectorBar;":"⥒","lEg;":"⪋","leg;":"⋚","leq;":"≤","leqq;":"≦","leqslant;":"⩽","les;":"⩽","lescc;":"⪨","lesdot;":"⩿","lesdoto;":"⪁","lesdotor;":"⪃","lesg;":"⋚︀","lesges;":"⪓","lessapprox;":"⪅","lessdot;":"⋖","lesseqgtr;":"⋚","lesseqqgtr;":"⪋","LessEqualGreater;":"⋚","LessFullEqual;":"≦","LessGreater;":"≶","lessgtr;":"≶","LessLess;":"⪡","lesssim;":"≲","LessSlantEqual;":"⩽","LessTilde;":"≲","lfisht;":"⥼","lfloor;":"⌊","Lfr;":"𝔏","lfr;":"𝔩","lg;":"≶","lgE;":"⪑","lHar;":"⥢","lhard;":"↽","lharu;":"↼","lharul;":"⥪","lhblk;":"▄","LJcy;":"Љ","ljcy;":"љ","Ll;":"⋘","ll;":"≪","llarr;":"⇇","llcorner;":"⌞","Lleftarrow;":"⇚","llhard;":"⥫","lltri;":"◺","Lmidot;":"Ŀ","lmidot;":"ŀ","lmoust;":"⎰","lmoustache;":"⎰","lnap;":"⪉","lnapprox;":"⪉","lnE;":"≨","lne;":"⪇","lneq;":"⪇","lneqq;":"≨","lnsim;":"⋦","loang;":"⟬","loarr;":"⇽","lobrk;":"⟦","LongLeftArrow;":"⟵","Longleftarrow;":"⟸","longleftarrow;":"⟵","LongLeftRightArrow;":"⟷","Longleftrightarrow;":"⟺","longleftrightarrow;":"⟷","longmapsto;":"⟼","LongRightArrow;":"⟶","Longrightarrow;":"⟹","longrightarrow;":"⟶","looparrowleft;":"↫","looparrowright;":"↬","lopar;":"⦅","Lopf;":"𝕃","lopf;":"𝕝","loplus;":"⨭","lotimes;":"⨴","lowast;":"∗","lowbar;":"_","LowerLeftArrow;":"↙","LowerRightArrow;":"↘","loz;":"◊","lozenge;":"◊","lozf;":"⧫","lpar;":"(","lparlt;":"⦓","lrarr;":"⇆","lrcorner;":"⌟","lrhar;":"⇋","lrhard;":"⥭","lrm;":"‎","lrtri;":"⊿","lsaquo;":"‹","Lscr;":"ℒ","lscr;":"𝓁","Lsh;":"↰","lsh;":"↰","lsim;":"≲","lsime;":"⪍","lsimg;":"⪏","lsqb;":"[","lsquo;":"‘","lsquor;":"‚","Lstrok;":"Ł","lstrok;":"ł",LT:"<",lt:"<","LT;":"<","Lt;":"≪","lt;":"<","ltcc;":"⪦","ltcir;":"⩹","ltdot;":"⋖","lthree;":"⋋","ltimes;":"⋉","ltlarr;":"⥶","ltquest;":"⩻","ltri;":"◃","ltrie;":"⊴","ltrif;":"◂","ltrPar;":"⦖","lurdshar;":"⥊","luruhar;":"⥦","lvertneqq;":"≨︀","lvnE;":"≨︀",macr:"¯","macr;":"¯","male;":"♂","malt;":"✠","maltese;":"✠","Map;":"⤅","map;":"↦","mapsto;":"↦","mapstodown;":"↧","mapstoleft;":"↤","mapstoup;":"↥","marker;":"▮","mcomma;":"⨩","Mcy;":"М","mcy;":"м","mdash;":"—","mDDot;":"∺","measuredangle;":"∡","MediumSpace;":" ","Mellintrf;":"ℳ","Mfr;":"𝔐","mfr;":"𝔪","mho;":"℧",micro:"µ","micro;":"µ","mid;":"∣","midast;":"*","midcir;":"⫰",middot:"·","middot;":"·","minus;":"−","minusb;":"⊟","minusd;":"∸","minusdu;":"⨪","MinusPlus;":"∓","mlcp;":"⫛","mldr;":"…","mnplus;":"∓","models;":"⊧","Mopf;":"𝕄","mopf;":"𝕞","mp;":"∓","Mscr;":"ℳ","mscr;":"𝓂","mstpos;":"∾","Mu;":"Μ","mu;":"μ","multimap;":"⊸","mumap;":"⊸","nabla;":"∇","Nacute;":"Ń","nacute;":"ń","nang;":"∠⃒","nap;":"≉","napE;":"⩰̸","napid;":"≋̸","napos;":"ŉ","napprox;":"≉","natur;":"♮","natural;":"♮","naturals;":"ℕ",nbsp:" ","nbsp;":" ","nbump;":"≎̸","nbumpe;":"≏̸","ncap;":"⩃","Ncaron;":"Ň","ncaron;":"ň","Ncedil;":"Ņ","ncedil;":"ņ","ncong;":"≇","ncongdot;":"⩭̸","ncup;":"⩂","Ncy;":"Н","ncy;":"н","ndash;":"–","ne;":"≠","nearhk;":"⤤","neArr;":"⇗","nearr;":"↗","nearrow;":"↗","nedot;":"≐̸","NegativeMediumSpace;":"​","NegativeThickSpace;":"​","NegativeThinSpace;":"​","NegativeVeryThinSpace;":"​","nequiv;":"≢","nesear;":"⤨","nesim;":"≂̸","NestedGreaterGreater;":"≫","NestedLessLess;":"≪","NewLine;":"\n","nexist;":"∄","nexists;":"∄","Nfr;":"𝔑","nfr;":"𝔫","ngE;":"≧̸","nge;":"≱","ngeq;":"≱","ngeqq;":"≧̸","ngeqslant;":"⩾̸","nges;":"⩾̸","nGg;":"⋙̸","ngsim;":"≵","nGt;":"≫⃒","ngt;":"≯","ngtr;":"≯","nGtv;":"≫̸","nhArr;":"⇎","nharr;":"↮","nhpar;":"⫲","ni;":"∋","nis;":"⋼","nisd;":"⋺","niv;":"∋","NJcy;":"Њ","njcy;":"њ","nlArr;":"⇍","nlarr;":"↚","nldr;":"‥","nlE;":"≦̸","nle;":"≰","nLeftarrow;":"⇍","nleftarrow;":"↚","nLeftrightarrow;":"⇎","nleftrightarrow;":"↮","nleq;":"≰","nleqq;":"≦̸","nleqslant;":"⩽̸","nles;":"⩽̸","nless;":"≮","nLl;":"⋘̸","nlsim;":"≴","nLt;":"≪⃒","nlt;":"≮","nltri;":"⋪","nltrie;":"⋬","nLtv;":"≪̸","nmid;":"∤","NoBreak;":"⁠","NonBreakingSpace;":" ","Nopf;":"ℕ","nopf;":"𝕟",not:"¬","Not;":"⫬","not;":"¬","NotCongruent;":"≢","NotCupCap;":"≭","NotDoubleVerticalBar;":"∦","NotElement;":"∉","NotEqual;":"≠","NotEqualTilde;":"≂̸","NotExists;":"∄","NotGreater;":"≯","NotGreaterEqual;":"≱","NotGreaterFullEqual;":"≧̸","NotGreaterGreater;":"≫̸","NotGreaterLess;":"≹","NotGreaterSlantEqual;":"⩾̸","NotGreaterTilde;":"≵","NotHumpDownHump;":"≎̸","NotHumpEqual;":"≏̸","notin;":"∉","notindot;":"⋵̸","notinE;":"⋹̸","notinva;":"∉","notinvb;":"⋷","notinvc;":"⋶","NotLeftTriangle;":"⋪","NotLeftTriangleBar;":"⧏̸","NotLeftTriangleEqual;":"⋬","NotLess;":"≮","NotLessEqual;":"≰","NotLessGreater;":"≸","NotLessLess;":"≪̸","NotLessSlantEqual;":"⩽̸","NotLessTilde;":"≴","NotNestedGreaterGreater;":"⪢̸","NotNestedLessLess;":"⪡̸","notni;":"∌","notniva;":"∌","notnivb;":"⋾","notnivc;":"⋽","NotPrecedes;":"⊀","NotPrecedesEqual;":"⪯̸","NotPrecedesSlantEqual;":"⋠","NotReverseElement;":"∌","NotRightTriangle;":"⋫","NotRightTriangleBar;":"⧐̸","NotRightTriangleEqual;":"⋭","NotSquareSubset;":"⊏̸","NotSquareSubsetEqual;":"⋢","NotSquareSuperset;":"⊐̸","NotSquareSupersetEqual;":"⋣","NotSubset;":"⊂⃒","NotSubsetEqual;":"⊈","NotSucceeds;":"⊁","NotSucceedsEqual;":"⪰̸","NotSucceedsSlantEqual;":"⋡","NotSucceedsTilde;":"≿̸","NotSuperset;":"⊃⃒","NotSupersetEqual;":"⊉","NotTilde;":"≁","NotTildeEqual;":"≄","NotTildeFullEqual;":"≇","NotTildeTilde;":"≉","NotVerticalBar;":"∤","npar;":"∦","nparallel;":"∦","nparsl;":"⫽⃥","npart;":"∂̸","npolint;":"⨔","npr;":"⊀","nprcue;":"⋠","npre;":"⪯̸","nprec;":"⊀","npreceq;":"⪯̸","nrArr;":"⇏","nrarr;":"↛","nrarrc;":"⤳̸","nrarrw;":"↝̸","nRightarrow;":"⇏","nrightarrow;":"↛","nrtri;":"⋫","nrtrie;":"⋭","nsc;":"⊁","nsccue;":"⋡","nsce;":"⪰̸","Nscr;":"𝒩","nscr;":"𝓃","nshortmid;":"∤","nshortparallel;":"∦","nsim;":"≁","nsime;":"≄","nsimeq;":"≄","nsmid;":"∤","nspar;":"∦","nsqsube;":"⋢","nsqsupe;":"⋣","nsub;":"⊄","nsubE;":"⫅̸","nsube;":"⊈","nsubset;":"⊂⃒","nsubseteq;":"⊈","nsubseteqq;":"⫅̸","nsucc;":"⊁","nsucceq;":"⪰̸","nsup;":"⊅","nsupE;":"⫆̸","nsupe;":"⊉","nsupset;":"⊃⃒","nsupseteq;":"⊉","nsupseteqq;":"⫆̸","ntgl;":"≹",Ntilde:"Ñ",ntilde:"ñ","Ntilde;":"Ñ","ntilde;":"ñ","ntlg;":"≸","ntriangleleft;":"⋪","ntrianglelefteq;":"⋬","ntriangleright;":"⋫","ntrianglerighteq;":"⋭","Nu;":"Ν","nu;":"ν","num;":"#","numero;":"№","numsp;":" ","nvap;":"≍⃒","nVDash;":"⊯","nVdash;":"⊮","nvDash;":"⊭","nvdash;":"⊬","nvge;":"≥⃒","nvgt;":">⃒","nvHarr;":"⤄","nvinfin;":"⧞","nvlArr;":"⤂","nvle;":"≤⃒","nvlt;":"<⃒","nvltrie;":"⊴⃒","nvrArr;":"⤃","nvrtrie;":"⊵⃒","nvsim;":"∼⃒","nwarhk;":"⤣","nwArr;":"⇖","nwarr;":"↖","nwarrow;":"↖","nwnear;":"⤧",Oacute:"Ó",oacute:"ó","Oacute;":"Ó","oacute;":"ó","oast;":"⊛","ocir;":"⊚",Ocirc:"Ô",ocirc:"ô","Ocirc;":"Ô","ocirc;":"ô","Ocy;":"О","ocy;":"о","odash;":"⊝","Odblac;":"Ő","odblac;":"ő","odiv;":"⨸","odot;":"⊙","odsold;":"⦼","OElig;":"Œ","oelig;":"œ","ofcir;":"⦿","Ofr;":"𝔒","ofr;":"𝔬","ogon;":"˛",Ograve:"Ò",ograve:"ò","Ograve;":"Ò","ograve;":"ò","ogt;":"⧁","ohbar;":"⦵","ohm;":"Ω","oint;":"∮","olarr;":"↺","olcir;":"⦾","olcross;":"⦻","oline;":"‾","olt;":"⧀","Omacr;":"Ō","omacr;":"ō","Omega;":"Ω","omega;":"ω","Omicron;":"Ο","omicron;":"ο","omid;":"⦶","ominus;":"⊖","Oopf;":"𝕆","oopf;":"𝕠","opar;":"⦷","OpenCurlyDoubleQuote;":"“","OpenCurlyQuote;":"‘","operp;":"⦹","oplus;":"⊕","Or;":"⩔","or;":"∨","orarr;":"↻","ord;":"⩝","order;":"ℴ","orderof;":"ℴ",ordf:"ª","ordf;":"ª",ordm:"º","ordm;":"º","origof;":"⊶","oror;":"⩖","orslope;":"⩗","orv;":"⩛","oS;":"Ⓢ","Oscr;":"𝒪","oscr;":"ℴ",Oslash:"Ø",oslash:"ø","Oslash;":"Ø","oslash;":"ø","osol;":"⊘",Otilde:"Õ",otilde:"õ","Otilde;":"Õ","otilde;":"õ","Otimes;":"⨷","otimes;":"⊗","otimesas;":"⨶",Ouml:"Ö",ouml:"ö","Ouml;":"Ö","ouml;":"ö","ovbar;":"⌽","OverBar;":"‾","OverBrace;":"⏞","OverBracket;":"⎴","OverParenthesis;":"⏜","par;":"∥",para:"¶","para;":"¶","parallel;":"∥","parsim;":"⫳","parsl;":"⫽","part;":"∂","PartialD;":"∂","Pcy;":"П","pcy;":"п","percnt;":"%","period;":".","permil;":"‰","perp;":"⊥","pertenk;":"‱","Pfr;":"𝔓","pfr;":"𝔭","Phi;":"Φ","phi;":"φ","phiv;":"ϕ","phmmat;":"ℳ","phone;":"☎","Pi;":"Π","pi;":"π","pitchfork;":"⋔","piv;":"ϖ","planck;":"ℏ","planckh;":"ℎ","plankv;":"ℏ","plus;":"+","plusacir;":"⨣","plusb;":"⊞","pluscir;":"⨢","plusdo;":"∔","plusdu;":"⨥","pluse;":"⩲","PlusMinus;":"±",plusmn:"±","plusmn;":"±","plussim;":"⨦","plustwo;":"⨧","pm;":"±","Poincareplane;":"ℌ","pointint;":"⨕","Popf;":"ℙ","popf;":"𝕡",pound:"£","pound;":"£","Pr;":"⪻","pr;":"≺","prap;":"⪷","prcue;":"≼","prE;":"⪳","pre;":"⪯","prec;":"≺","precapprox;":"⪷","preccurlyeq;":"≼","Precedes;":"≺","PrecedesEqual;":"⪯","PrecedesSlantEqual;":"≼","PrecedesTilde;":"≾","preceq;":"⪯","precnapprox;":"⪹","precneqq;":"⪵","precnsim;":"⋨","precsim;":"≾","Prime;":"″","prime;":"′","primes;":"ℙ","prnap;":"⪹","prnE;":"⪵","prnsim;":"⋨","prod;":"∏","Product;":"∏","profalar;":"⌮","profline;":"⌒","profsurf;":"⌓","prop;":"∝","Proportion;":"∷","Proportional;":"∝","propto;":"∝","prsim;":"≾","prurel;":"⊰","Pscr;":"𝒫","pscr;":"𝓅","Psi;":"Ψ","psi;":"ψ","puncsp;":" ","Qfr;":"𝔔","qfr;":"𝔮","qint;":"⨌","Qopf;":"ℚ","qopf;":"𝕢","qprime;":"⁗","Qscr;":"𝒬","qscr;":"𝓆","quaternions;":"ℍ","quatint;":"⨖","quest;":"?","questeq;":"≟",QUOT:'"',quot:'"',"QUOT;":'"',"quot;":'"',"rAarr;":"⇛","race;":"∽̱","Racute;":"Ŕ","racute;":"ŕ","radic;":"√","raemptyv;":"⦳","Rang;":"⟫","rang;":"⟩","rangd;":"⦒","range;":"⦥","rangle;":"⟩",raquo:"»","raquo;":"»","Rarr;":"↠","rArr;":"⇒","rarr;":"→","rarrap;":"⥵","rarrb;":"⇥","rarrbfs;":"⤠","rarrc;":"⤳","rarrfs;":"⤞","rarrhk;":"↪","rarrlp;":"↬","rarrpl;":"⥅","rarrsim;":"⥴","Rarrtl;":"⤖","rarrtl;":"↣","rarrw;":"↝","rAtail;":"⤜","ratail;":"⤚","ratio;":"∶","rationals;":"ℚ","RBarr;":"⤐","rBarr;":"⤏","rbarr;":"⤍","rbbrk;":"❳","rbrace;":"}","rbrack;":"]","rbrke;":"⦌","rbrksld;":"⦎","rbrkslu;":"⦐","Rcaron;":"Ř","rcaron;":"ř","Rcedil;":"Ŗ","rcedil;":"ŗ","rceil;":"⌉","rcub;":"}","Rcy;":"Р","rcy;":"р","rdca;":"⤷","rdldhar;":"⥩","rdquo;":"”","rdquor;":"”","rdsh;":"↳","Re;":"ℜ","real;":"ℜ","realine;":"ℛ","realpart;":"ℜ","reals;":"ℝ","rect;":"▭",REG:"®",reg:"®","REG;":"®","reg;":"®","ReverseElement;":"∋","ReverseEquilibrium;":"⇋","ReverseUpEquilibrium;":"⥯","rfisht;":"⥽","rfloor;":"⌋","Rfr;":"ℜ","rfr;":"𝔯","rHar;":"⥤","rhard;":"⇁","rharu;":"⇀","rharul;":"⥬","Rho;":"Ρ","rho;":"ρ","rhov;":"ϱ","RightAngleBracket;":"⟩","RightArrow;":"→","Rightarrow;":"⇒","rightarrow;":"→","RightArrowBar;":"⇥","RightArrowLeftArrow;":"⇄","rightarrowtail;":"↣","RightCeiling;":"⌉","RightDoubleBracket;":"⟧","RightDownTeeVector;":"⥝","RightDownVector;":"⇂","RightDownVectorBar;":"⥕","RightFloor;":"⌋","rightharpoondown;":"⇁","rightharpoonup;":"⇀","rightleftarrows;":"⇄","rightleftharpoons;":"⇌","rightrightarrows;":"⇉","rightsquigarrow;":"↝","RightTee;":"⊢","RightTeeArrow;":"↦","RightTeeVector;":"⥛","rightthreetimes;":"⋌","RightTriangle;":"⊳","RightTriangleBar;":"⧐","RightTriangleEqual;":"⊵","RightUpDownVector;":"⥏","RightUpTeeVector;":"⥜","RightUpVector;":"↾","RightUpVectorBar;":"⥔","RightVector;":"⇀","RightVectorBar;":"⥓","ring;":"˚","risingdotseq;":"≓","rlarr;":"⇄","rlhar;":"⇌","rlm;":"‏","rmoust;":"⎱","rmoustache;":"⎱","rnmid;":"⫮","roang;":"⟭","roarr;":"⇾","robrk;":"⟧","ropar;":"⦆","Ropf;":"ℝ","ropf;":"𝕣","roplus;":"⨮","rotimes;":"⨵","RoundImplies;":"⥰","rpar;":")","rpargt;":"⦔","rppolint;":"⨒","rrarr;":"⇉","Rrightarrow;":"⇛","rsaquo;":"›","Rscr;":"ℛ","rscr;":"𝓇","Rsh;":"↱","rsh;":"↱","rsqb;":"]","rsquo;":"’","rsquor;":"’","rthree;":"⋌","rtimes;":"⋊","rtri;":"▹","rtrie;":"⊵","rtrif;":"▸","rtriltri;":"⧎","RuleDelayed;":"⧴","ruluhar;":"⥨","rx;":"℞","Sacute;":"Ś","sacute;":"ś","sbquo;":"‚","Sc;":"⪼","sc;":"≻","scap;":"⪸","Scaron;":"Š","scaron;":"š","sccue;":"≽","scE;":"⪴","sce;":"⪰","Scedil;":"Ş","scedil;":"ş","Scirc;":"Ŝ","scirc;":"ŝ","scnap;":"⪺","scnE;":"⪶","scnsim;":"⋩","scpolint;":"⨓","scsim;":"≿","Scy;":"С","scy;":"с","sdot;":"⋅","sdotb;":"⊡","sdote;":"⩦","searhk;":"⤥","seArr;":"⇘","searr;":"↘","searrow;":"↘",sect:"§","sect;":"§","semi;":";","seswar;":"⤩","setminus;":"∖","setmn;":"∖","sext;":"✶","Sfr;":"𝔖","sfr;":"𝔰","sfrown;":"⌢","sharp;":"♯","SHCHcy;":"Щ","shchcy;":"щ","SHcy;":"Ш","shcy;":"ш","ShortDownArrow;":"↓","ShortLeftArrow;":"←","shortmid;":"∣","shortparallel;":"∥","ShortRightArrow;":"→","ShortUpArrow;":"↑",shy:"­","shy;":"­","Sigma;":"Σ","sigma;":"σ","sigmaf;":"ς","sigmav;":"ς","sim;":"∼","simdot;":"⩪","sime;":"≃","simeq;":"≃","simg;":"⪞","simgE;":"⪠","siml;":"⪝","simlE;":"⪟","simne;":"≆","simplus;":"⨤","simrarr;":"⥲","slarr;":"←","SmallCircle;":"∘","smallsetminus;":"∖","smashp;":"⨳","smeparsl;":"⧤","smid;":"∣","smile;":"⌣","smt;":"⪪","smte;":"⪬","smtes;":"⪬︀","SOFTcy;":"Ь","softcy;":"ь","sol;":"/","solb;":"⧄","solbar;":"⌿","Sopf;":"𝕊","sopf;":"𝕤","spades;":"♠","spadesuit;":"♠","spar;":"∥","sqcap;":"⊓","sqcaps;":"⊓︀","sqcup;":"⊔","sqcups;":"⊔︀","Sqrt;":"√","sqsub;":"⊏","sqsube;":"⊑","sqsubset;":"⊏","sqsubseteq;":"⊑","sqsup;":"⊐","sqsupe;":"⊒","sqsupset;":"⊐","sqsupseteq;":"⊒","squ;":"□","Square;":"□","square;":"□","SquareIntersection;":"⊓","SquareSubset;":"⊏","SquareSubsetEqual;":"⊑","SquareSuperset;":"⊐","SquareSupersetEqual;":"⊒","SquareUnion;":"⊔","squarf;":"▪","squf;":"▪","srarr;":"→","Sscr;":"𝒮","sscr;":"𝓈","ssetmn;":"∖","ssmile;":"⌣","sstarf;":"⋆","Star;":"⋆","star;":"☆","starf;":"★","straightepsilon;":"ϵ","straightphi;":"ϕ","strns;":"¯","Sub;":"⋐","sub;":"⊂","subdot;":"⪽","subE;":"⫅","sube;":"⊆","subedot;":"⫃","submult;":"⫁","subnE;":"⫋","subne;":"⊊","subplus;":"⪿","subrarr;":"⥹","Subset;":"⋐","subset;":"⊂","subseteq;":"⊆","subseteqq;":"⫅","SubsetEqual;":"⊆","subsetneq;":"⊊","subsetneqq;":"⫋","subsim;":"⫇","subsub;":"⫕","subsup;":"⫓","succ;":"≻","succapprox;":"⪸","succcurlyeq;":"≽","Succeeds;":"≻","SucceedsEqual;":"⪰","SucceedsSlantEqual;":"≽","SucceedsTilde;":"≿","succeq;":"⪰","succnapprox;":"⪺","succneqq;":"⪶","succnsim;":"⋩","succsim;":"≿","SuchThat;":"∋","Sum;":"∑","sum;":"∑","sung;":"♪",sup1:"¹","sup1;":"¹",sup2:"²","sup2;":"²",sup3:"³","sup3;":"³","Sup;":"⋑","sup;":"⊃","supdot;":"⪾","supdsub;":"⫘","supE;":"⫆","supe;":"⊇","supedot;":"⫄","Superset;":"⊃","SupersetEqual;":"⊇","suphsol;":"⟉","suphsub;":"⫗","suplarr;":"⥻","supmult;":"⫂","supnE;":"⫌","supne;":"⊋","supplus;":"⫀","Supset;":"⋑","supset;":"⊃","supseteq;":"⊇","supseteqq;":"⫆","supsetneq;":"⊋","supsetneqq;":"⫌","supsim;":"⫈","supsub;":"⫔","supsup;":"⫖","swarhk;":"⤦","swArr;":"⇙","swarr;":"↙","swarrow;":"↙","swnwar;":"⤪",szlig:"ß","szlig;":"ß","Tab;":"\t","target;":"⌖","Tau;":"Τ","tau;":"τ","tbrk;":"⎴","Tcaron;":"Ť","tcaron;":"ť","Tcedil;":"Ţ","tcedil;":"ţ","Tcy;":"Т","tcy;":"т","tdot;":"⃛","telrec;":"⌕","Tfr;":"𝔗","tfr;":"𝔱","there4;":"∴","Therefore;":"∴","therefore;":"∴","Theta;":"Θ","theta;":"θ","thetasym;":"ϑ","thetav;":"ϑ","thickapprox;":"≈","thicksim;":"∼","ThickSpace;":"  ","thinsp;":" ","ThinSpace;":" ","thkap;":"≈","thksim;":"∼",THORN:"Þ",thorn:"þ","THORN;":"Þ","thorn;":"þ","Tilde;":"∼","tilde;":"˜","TildeEqual;":"≃","TildeFullEqual;":"≅","TildeTilde;":"≈",times:"×","times;":"×","timesb;":"⊠","timesbar;":"⨱","timesd;":"⨰","tint;":"∭","toea;":"⤨","top;":"⊤","topbot;":"⌶","topcir;":"⫱","Topf;":"𝕋","topf;":"𝕥","topfork;":"⫚","tosa;":"⤩","tprime;":"‴","TRADE;":"™","trade;":"™","triangle;":"▵","triangledown;":"▿","triangleleft;":"◃","trianglelefteq;":"⊴","triangleq;":"≜","triangleright;":"▹","trianglerighteq;":"⊵","tridot;":"◬","trie;":"≜","triminus;":"⨺","TripleDot;":"⃛","triplus;":"⨹","trisb;":"⧍","tritime;":"⨻","trpezium;":"⏢","Tscr;":"𝒯","tscr;":"𝓉","TScy;":"Ц","tscy;":"ц","TSHcy;":"Ћ","tshcy;":"ћ","Tstrok;":"Ŧ","tstrok;":"ŧ","twixt;":"≬","twoheadleftarrow;":"↞","twoheadrightarrow;":"↠",Uacute:"Ú",uacute:"ú","Uacute;":"Ú","uacute;":"ú","Uarr;":"↟","uArr;":"⇑","uarr;":"↑","Uarrocir;":"⥉","Ubrcy;":"Ў","ubrcy;":"ў","Ubreve;":"Ŭ","ubreve;":"ŭ",Ucirc:"Û",ucirc:"û","Ucirc;":"Û","ucirc;":"û","Ucy;":"У","ucy;":"у","udarr;":"⇅","Udblac;":"Ű","udblac;":"ű","udhar;":"⥮","ufisht;":"⥾","Ufr;":"𝔘","ufr;":"𝔲",Ugrave:"Ù",ugrave:"ù","Ugrave;":"Ù","ugrave;":"ù","uHar;":"⥣","uharl;":"↿","uharr;":"↾","uhblk;":"▀","ulcorn;":"⌜","ulcorner;":"⌜","ulcrop;":"⌏","ultri;":"◸","Umacr;":"Ū","umacr;":"ū",uml:"¨","uml;":"¨","UnderBar;":"_","UnderBrace;":"⏟","UnderBracket;":"⎵","UnderParenthesis;":"⏝","Union;":"⋃","UnionPlus;":"⊎","Uogon;":"Ų","uogon;":"ų","Uopf;":"𝕌","uopf;":"𝕦","UpArrow;":"↑","Uparrow;":"⇑","uparrow;":"↑","UpArrowBar;":"⤒","UpArrowDownArrow;":"⇅","UpDownArrow;":"↕","Updownarrow;":"⇕","updownarrow;":"↕","UpEquilibrium;":"⥮","upharpoonleft;":"↿","upharpoonright;":"↾","uplus;":"⊎","UpperLeftArrow;":"↖","UpperRightArrow;":"↗","Upsi;":"ϒ","upsi;":"υ","upsih;":"ϒ","Upsilon;":"Υ","upsilon;":"υ","UpTee;":"⊥","UpTeeArrow;":"↥","upuparrows;":"⇈","urcorn;":"⌝","urcorner;":"⌝","urcrop;":"⌎","Uring;":"Ů","uring;":"ů","urtri;":"◹","Uscr;":"𝒰","uscr;":"𝓊","utdot;":"⋰","Utilde;":"Ũ","utilde;":"ũ","utri;":"▵","utrif;":"▴","uuarr;":"⇈",Uuml:"Ü",uuml:"ü","Uuml;":"Ü","uuml;":"ü","uwangle;":"⦧","vangrt;":"⦜","varepsilon;":"ϵ","varkappa;":"ϰ","varnothing;":"∅","varphi;":"ϕ","varpi;":"ϖ","varpropto;":"∝","vArr;":"⇕","varr;":"↕","varrho;":"ϱ","varsigma;":"ς","varsubsetneq;":"⊊︀","varsubsetneqq;":"⫋︀","varsupsetneq;":"⊋︀","varsupsetneqq;":"⫌︀","vartheta;":"ϑ","vartriangleleft;":"⊲","vartriangleright;":"⊳","Vbar;":"⫫","vBar;":"⫨","vBarv;":"⫩","Vcy;":"В","vcy;":"в","VDash;":"⊫","Vdash;":"⊩","vDash;":"⊨","vdash;":"⊢","Vdashl;":"⫦","Vee;":"⋁","vee;":"∨","veebar;":"⊻","veeeq;":"≚","vellip;":"⋮","Verbar;":"‖","verbar;":"|","Vert;":"‖","vert;":"|","VerticalBar;":"∣","VerticalLine;":"|","VerticalSeparator;":"❘","VerticalTilde;":"≀","VeryThinSpace;":" ","Vfr;":"𝔙","vfr;":"𝔳","vltri;":"⊲","vnsub;":"⊂⃒","vnsup;":"⊃⃒","Vopf;":"𝕍","vopf;":"𝕧","vprop;":"∝","vrtri;":"⊳","Vscr;":"𝒱","vscr;":"𝓋","vsubnE;":"⫋︀","vsubne;":"⊊︀","vsupnE;":"⫌︀","vsupne;":"⊋︀","Vvdash;":"⊪","vzigzag;":"⦚","Wcirc;":"Ŵ","wcirc;":"ŵ","wedbar;":"⩟","Wedge;":"⋀","wedge;":"∧","wedgeq;":"≙","weierp;":"℘","Wfr;":"𝔚","wfr;":"𝔴","Wopf;":"𝕎","wopf;":"𝕨","wp;":"℘","wr;":"≀","wreath;":"≀","Wscr;":"𝒲","wscr;":"𝓌","xcap;":"⋂","xcirc;":"◯","xcup;":"⋃","xdtri;":"▽","Xfr;":"𝔛","xfr;":"𝔵","xhArr;":"⟺","xharr;":"⟷","Xi;":"Ξ","xi;":"ξ","xlArr;":"⟸","xlarr;":"⟵","xmap;":"⟼","xnis;":"⋻","xodot;":"⨀","Xopf;":"𝕏","xopf;":"𝕩","xoplus;":"⨁","xotime;":"⨂","xrArr;":"⟹","xrarr;":"⟶","Xscr;":"𝒳","xscr;":"𝓍","xsqcup;":"⨆","xuplus;":"⨄","xutri;":"△","xvee;":"⋁","xwedge;":"⋀",Yacute:"Ý",yacute:"ý","Yacute;":"Ý","yacute;":"ý","YAcy;":"Я","yacy;":"я","Ycirc;":"Ŷ","ycirc;":"ŷ","Ycy;":"Ы","ycy;":"ы",yen:"¥","yen;":"¥","Yfr;":"𝔜","yfr;":"𝔶","YIcy;":"Ї","yicy;":"ї","Yopf;":"𝕐","yopf;":"𝕪","Yscr;":"𝒴","yscr;":"𝓎","YUcy;":"Ю","yucy;":"ю",yuml:"ÿ","Yuml;":"Ÿ","yuml;":"ÿ","Zacute;":"Ź","zacute;":"ź","Zcaron;":"Ž","zcaron;":"ž","Zcy;":"З","zcy;":"з","Zdot;":"Ż","zdot;":"ż","zeetrf;":"ℨ","ZeroWidthSpace;":"​","Zeta;":"Ζ","zeta;":"ζ","Zfr;":"ℨ","zfr;":"𝔷","ZHcy;":"Ж","zhcy;":"ж","zigrarr;":"⇝","Zopf;":"ℤ","zopf;":"𝕫","Zscr;":"𝒵","zscr;":"𝓏","zwj;":"‍","zwnj;":"‌"}),Nc=wr({}),Ac=wr({}),Ic=ve((Cc=Lc).py_items,Cc),Mc=0;Mc<je(Ic);Mc++){var Tc=qr(Ic,Mc),Dc=Tc[0],Rc=Tc[1];zr(Nc,Rc,Dc),zr(Ac,Dc,ve(Fe,null,Rc))}var qc=["escape","unescape"],zc=function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"s":e=t[a];break;case"quote":r=t[a]}}}e=function(){var r=e;return ve(r.py_replace,r,"&","&amp;")}(),e=function(){var r=e;return ve(r.py_replace,r,"<","&lt;")}(),e=function(){var r=e;return ve(r.py_replace,r,">","&gt;")}();if(Ne(r))e=function(){var r=e;return ve(r.py_replace,r,'"',"&quot;")}(),e=function(){var r=e;return ve(r.py_replace,r,"'","&#x27;")}();return e},Fc=wr({0:"�",13:"\r",128:"€",129:"",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",141:"",142:"Ž",143:"",144:"",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",157:"",158:"ž",159:"Ÿ"}),Gc=new ar([1,2,3,4,5,6,7,8,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,11,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Bc=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("s"===t)e=n[t]}}e=function(){var r=e;return ve(r.group,r,1)}();if(Ne(Cr(qr(e,0),"#"))){if(Ne(Ce(qr(e,1),"xX")))var a=ve(Ie,null,function(){var r=Fr(e,2,null,1);return ve(r.rstrip,r,";")}(),16);else a=ve(Ie,null,function(){var r=Fr(e,1,null,1);return ve(r.rstrip,r,";")}());return Ne(Ce(a,Fc))?qr(Fc,a):Ne(Ne(Nr(55296,a)&&Nr(a,57343))||Ar(a,1114111))?"�":Ne(Ce(a,Gc))?"":ve(Fe,null,a)}if(Ne(Ce(e,jc)))return qr(jc,e);for(var i=!1,o=Pr(ve(je,null,e),1);o>1;o--)if(Ne(Ce(Fr(e,0,o,1),jc)))return Or(qr(jc,Fr(e,0,o,1)),Fr(e,o,null,1));return i?void 0:Or("&",e)},Uc=ve(Ct.compile,Ct,"&(#[0-9]+;?|#[xX][0-9a-fA-F]+;?|[^\\t\\n\\f <&#;]{1,32};?)"),Wc=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("s"===t)e=n[t]}}return Ne(!Ce("&",e))?e:function(){var r=Uc;return ve(r.sub,r,Bc,e)}()},Vc={},Hc={},$c={};ue(Hc,"",dn),ue($c,"",Ct),ue(Vc,"",Sc);var Yc="llm.fragmentrenderer.html",Xc=ve(Hc.getLogger,Hc,Yc),Jc=ve($c.compile,$c,"[&]([a-zA-Z]+|[#][0-9]+|[#]x[0-9a-fA-F]+);"),Zc=he("HtmlFragmentRenderer",[Ec],{__module__:Yc,supports_delayed_render_markers:!0,use_link_target_blank:!1,html_blocks_joiner:"\n",heading_tags_by_level:wr({1:"h1",2:"h2",3:"h3",4:"span",5:"span",6:"span"}),inline_heading_add_space:!0,aggressively_escape_html_attributes:!1,render_nothing_as_comment_with_annotations:!0,use_mathjax:!0,get htmlescape(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a]}}}return ve(Vc.escape,Vc,r)}))},get htmlescape_double_quoted_attribute_value(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a]}}}if(Ne(e.aggressively_escape_html_attributes))return function(){var n=e;return ve(n.htmlescape,n,r)}();r=function(){var e=Jc;return ve(e.sub,e,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("m"===t)e=n[t]}}return Or(Or("&amp;",ve((a=e).group,a,1)),";");var a}),r)}(),r=function(){var e=r;return ve(e.py_replace,e,'"',"&quot;")}();return r}))},get generate_open_tag(){return fe(this,(function(e,r){var n=null,t=null,a=!1;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"tagname":r=o[s];break;case"attrs":n=o[s];break;case"class_names":t=o[s];break;case"self_close_tag":a=o[s]}}}var _="<{}".format(r);if(Ne(!Ne(n)))var n=wr({});if(Ne(Ce("class",n=ve(wr,null,n)))){var l=ve(Hr,null,"generate_open_tag(): set HTML 'class' attribute with class_names=, not with attrs=");throw l.__cause__=null,l}if(Ne(t)&&zr(n,"class",ve(" ".join," ",t)),Ne(n))for(var c=function(){var e=n;return ve(e.py_items,e)}(),u=0;u<je(c);u++){var f=qr(c,u),d=f[0],p=f[1];_=ve(Tr,null,_,' {}="{}"'.format(d,function(){var r=e;return ve(r.htmlescape_double_quoted_attribute_value,r,p)}()))}if(Ne(a))_=ve(Tr,null,_,"/>");else _=ve(Tr,null,_,">");return _}))},get wrap_in_tag(){return fe(this,(function(e,r,n){var t=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"tagname":r=o[s];break;case"content_html":n=o[s];break;case"attrs":t=o[s];break;case"class_names":a=o[s]}}}var _=function(){var n=e;return ve(n.generate_open_tag,n,r,me({attrs:t,class_names:a}))}();_=ve(Tr,null,_,ve(ir,null,n));return _=ve(Tr,null,_,"</{}>".format(r))}))},get wrap_in_link(){return fe(this,(function(e,r,n){var t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"display_html":r=i[o];break;case"target_href":n=i[o];break;case"class_names":t=i[o]}}}if(Ne(!Ne(n)))n="#";var s=wr({href:n});return Ne(ve(qe,null,e.use_link_target_blank))?Ne(function(){var r=e;return ve(r.use_link_target_blank,r,n)}())&&zr(s,"target","_blank"):Ne(Ne(e.use_link_target_blank)&&!Ne(function(){var e=n;return ve(e.startswith,e,"#")}()))&&zr(s,"target","_blank"),function(){var n=e;return ve(n.wrap_in_tag,n,"a",r,me({attrs:s,class_names:t}))}()}))},get render_build_paragraph(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}return Or(Or("<p>",function(){var t=e;return ve(t.render_inline_content,t,r,n)}()),"</p>")}))},get render_inline_content(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}return function(){var t=e;return ve(t.render_join,t,function(){for(var t,a=[],i=r,o=0;o<je(i);o++){var s=qr(i,o);t=void 0,ve(a.append,a,ve((t=e).render_node,t,s,n))}return a}())}()}))},get render_join(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"content_list":r=t[a]}}}return ve("".join,"",function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);ve(e.append,e,ve(ir,null,a))}return e}())}))},get render_join_blocks(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"content_list":r=t[a]}}}return function(){var n=e.html_blocks_joiner;return ve(n.join,n,function(){for(var e=[],n=r,t=0;t<je(n);t++){var a=qr(n,t);Ne(Ne(null!==a)&&ve(je,null,a))&&ve(e.append,e,a)}return e}())}()}))},get render_value(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a]}}}return function(){var n=e;return ve(n.htmlescape,n,r)}()}))},get render_empty_error_placeholder(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"debug_str":r=t[a]}}}var i=function(){var e=r;return ve(e.py_replace,e,"--","- - ")}();return'<span class="empty-error-placeholder">\x3c!-- {} --\x3e(?)</span>'.format(i)}))},get render_nothing(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"annotations":r=t[a]}}}if(Ne(!Ne(e.render_nothing_as_comment_with_annotations)))return"";if(Ne(!Ne(r)))r=[];r=function(){for(var e,n=[],t=r,a=0;a<je(t);a++){var i=qr(t,a);e=void 0,ve(n.append,n,ve((e=i).py_replace,e,"--","- - "))}return n}();return function(){var e="\x3c!-- {} --\x3e";return ve(e.format,e,ve(" ".join," ",r))}()}))},get render_verbatim(){return fe(this,(function(e,r){var n=null;if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"value":r=a[i];break;case"annotations":var o=a[i];break;case"target_id":n=a[i]}}}var s=wr({});return Ne(null!==n)&&zr(s,"id",n),function(){var n,t=e;return ve(t.wrap_in_tag,t,"span",ve((n=e).htmlescape,n,r),me({class_names:Ne(o)?o:["verbatim"],attrs:s}))}()}))},get render_math_content(){return fe(this,(function(e,r,n,t,a,i,o){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"delimiters":r=_[l];break;case"nodelist":n=_[l];break;case"render_context":t=_[l];break;case"displaytype":a=_[l];break;case"environmentname":i=_[l];break;case"target_id":o=_[l]}}}Ne(!Ne(e.use_mathjax))&&function(){var e=Xc;ve(e.warning,e,"called HtmlFragmentRenderer.render_math_content() but self.use_mathjax is not set. Your math will probably not render correctly.")}();var c=["{}-math".format(a)];Ne(null!==i)&&function(){var e,r=c;ve(r.append,r,"env-{}".format(ve((e=i).py_replace,e,"*","-star")))}();var u=function(){var t,a=e;return ve(a.htmlescape,a,Or(Or(qr(r,0),ve((t=n).latex_verbatim,t)),qr(r,1)))}(),f=wr({});return Ne(null!==o)&&zr(f,"id",o),Ne(Cr(a,"display"))?function(){var r=e;return ve(r.wrap_in_tag,r,"span",u,me({class_names:c,attrs:f}))}():function(){var r=e;return ve(r.wrap_in_tag,r,"span",u,me({class_names:c,attrs:f}))}()}))},get render_text_format(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"text_formats":r=i[o];break;case"nodelist":n=i[o];break;case"render_context":t=i[o]}}}var s=function(){var r=e;return ve(r.render_nodelist,r,n,t,me({is_block_level:!1}))}();return function(){var n=e;return ve(n.wrap_in_tag,n,"span",s,me({class_names:r}))}()}))},get render_semantic_block(){return fe(this,(function(e,r,n){var t=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var s in o)switch(s){case"self":e=o[s];break;case"content":r=o[s];break;case"role":n=o[s];break;case"annotations":t=o[s];break;case"target_id":a=o[s]}}}var _=wr({});return Ne(null!==a)&&zr(_,"id",a),Ne(Ce(n,tr(["section","main","article"])))?function(){var a=e;return ve(a.wrap_in_tag,a,n,r,me({attrs:_,class_names:t}))}():function(){var a=e;return ve(a.wrap_in_tag,a,"div",r,me({attrs:_,class_names:Or([n],Ne(t)?t:[])}))}()}))},get render_enumeration(){return fe(this,(function(e,r,n,t){var a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"iter_items_nodelists":r=s[_];break;case"counter_formatter":n=s[_];break;case"render_context":t=s[_];break;case"target_id_generator":a=s[_];break;case"annotations":i=s[_];break;case"nested_depth":s[_]}}}for(var l=[],c=ve(er,null,r),u=0;u<je(c);u++){var f=qr(c,u),d=f[0],p=f[1],g=!0;if(Ne(!1===p.parsing_state.is_block_level))g=!1;var h=function(){var r=e;return ve(r.render_nodelist,r,p,me({render_context:t,is_block_level:g}))}(),v=Or(1,d),m=ve(n,null,v);if(Ne(ve(Re,null,m,ir)))var w=function(){var r=e;return ve(r.render_value,r,m)}();else w=function(){var r=e;return ve(r.render_nodelist,r,m,me({render_context:t,is_block_level:!1}))}();var k=wr({});Ne(null!==a)&&zr(k,"id",ve(a,null,v)),function(){var r,n,t=l;ve(t.append,t,ve((n=e).render_join,n,[(r=e,ve(r.wrap_in_tag,r,"dt",w,me({attrs:k}))),function(){var r=e;return ve(r.wrap_in_tag,r,"dd",h)}()]))}()}return function(){var r,n=e;return ve(n.wrap_in_tag,n,"dl",ve((r=e).render_join,r,l),me({class_names:Or(["enumeration"],Ne(i)?i:[])}))}()}))},get render_heading(){return fe(this,(function(e,r,n){var t=1,a=null,i=!1,o=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var _=arguments[s--];for(var l in _)switch(l){case"self":e=_[l];break;case"heading_nodelist":r=_[l];break;case"render_context":n=_[l];break;case"heading_level":t=_[l];break;case"target_id":a=_[l];break;case"inline_heading":i=_[l];break;case"annotations":o=_[l]}}}if(Ne(!Ce(t,e.heading_tags_by_level))){var c=ve(Hr,null,"Bad heading_level={}, expected one of {}".format(t,ve(nr,null,function(){var r=e.heading_tags_by_level;return ve(r.py_keys,r)}())));throw c.__cause__=null,c}var u=Ne(o)?ve(nr,null,o):[];!function(){var e=u;ve(e.append,e,"heading-level-{}".format(t))}(),Ne(i)&&function(){var e=u;ve(e.append,e,"heading-inline")}();var f=wr({});Ne(null!==a)&&zr(f,"id",a);var d=function(){var a,i=e;return ve(i.wrap_in_tag,i,qr(e.heading_tags_by_level,t),ve((a=e).render_inline_content,a,r,n),me({class_names:u,attrs:f}))}();if(Ne(Ne(i)&&e.inline_heading_add_space))d=ve(Tr,null,d," ");return d}))},get render_link(){return fe(this,(function(e,r,n,t,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"ref_type":r=s[_];break;case"href":n=s[_];break;case"display_nodelist":t=s[_];break;case"render_context":a=s[_];break;case"annotations":i=s[_]}}}var l=function(){var r=e;return ve(r.render_nodelist,r,t,me({render_context:a,is_block_level:!1}))}();return function(){var t=e;return ve(t.wrap_in_link,t,l,n,me({class_names:Or(["href-{}".format(r)],Ne(i)?i:[])}))}()}))},get render_delayed_marker(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}return"<LLM:DLYD:{}/>".format(n)}))},get render_delayed_dummy_placeholder(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}return"\x3c!-- delayed:{} --\x3e".format(n)}))},get replace_delayed_markers_with_final_values(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":r=a[i];break;case"delayed_values":n=a[i]}}}return function(){var e=Kc;return ve(e.sub,e,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var t=arguments[r--];for(var a in t)if("m"===a)e=t[a]}}return qr(n,ve(Ie,null,ve((i=e).group,i,"key")));var i}),r)}()}))},get render_float(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_instance":r=a[i];break;case"render_context":n=a[i]}}}var o=wr({});Ne(null!==r.target_id)&&zr(o,"id",r.target_id);var s=[];Ne(null!==r.number)?function(){var t,a,i,o=s;ve(o.append,o,ve((i=e).wrap_in_tag,i,"span",ve((a=e).render_join,a,[(t=e,ve(t.render_value,t,r.float_type_info.float_caption_name)),"&nbsp;",function(){var t=e;return ve(t.render_nodelist,t,r.formatted_counter_value_llm.nodes,me({render_context:n}))}()]),me({class_names:["float-number"]})))}():Ne(r.caption_nodelist)&&function(){var n,t,a,i=s;ve(i.append,i,ve((a=e).wrap_in_tag,a,"span",ve((t=e).render_join,t,[(n=e,ve(n.render_value,n,r.float_type_info.float_caption_name))]),me({class_names:["float-no-number"]})))}(),Ne(r.caption_nodelist)&&(function(){var e=s;ve(e.append,e,": ")}(),function(){var t,a=s;ve(a.append,a,ve((t=e).render_nodelist,t,r.caption_nodelist,me({render_context:n})))}());var _=null;if(Ne(s))_=function(){var r,n,t=e;return ve(t.wrap_in_tag,t,"figcaption",ve((n=e).wrap_in_tag,n,"span",ve((r=e).render_join,r,s)),me({class_names:["float-caption-content"]}))}();var l=function(){var t=e;return ve(t.render_nodelist,t,r.content_nodelist,me({render_context:n,is_block_level:!0}))}(),c=function(){var r=e;return ve(r.render_semantic_block,r,l,"float-contents")}();if(Ne(null!==_))var u=function(){var r=e;return ve(r.render_join_blocks,r,[c,_])}();else u=c;var f=function(){var n=e;return ve(n.wrap_in_tag,n,"figure",u,me({attrs:o,class_names:["float","float-{}".format(r.float_type)]}))}();return f}))},graphics_raster_magnification:1,graphics_vector_magnification:1,get render_graphics_block(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"graphics_resource":r=t[a]}}}var i=wr({}),o=[];if(Ne(null!==r.physical_dimensions)){var s=r.physical_dimensions,_=s[0],l=s[1];if(Ne(Cr(r.graphics_type,"raster"))){if(Ne(null!==_))_=ve(Mr,null,_,e.graphics_raster_magnification);if(Ne(null!==l))l=ve(Mr,null,l,e.graphics_raster_magnification)}else if(Ne(Cr(r.graphics_type,"vector"))){if(Ne(null!==_))_=ve(Mr,null,_,e.graphics_vector_magnification);if(Ne(null!==l))l=ve(Mr,null,l,e.graphics_vector_magnification)}Ne(null!==_)&&function(){var e=o;ve(e.append,e,"width:{}pt".format(_))}(),Ne(null!==l)&&function(){var e=o;ve(e.append,e,"height:{}pt".format(l))}()}Ne(o)&&zr(i,"style",ve(";".join,";",o));var c=r.src_url;return zr(i,"src",c),Ne(Ne(null!==r.srcset)&&ve(je,null,r.srcset))&&zr(i,"srcset",r.srcset),function(){var r=e;return ve(r.generate_open_tag,r,"img",me({attrs:i}))}()}))},get render_cells(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cells_model":r=i[o];break;case"render_context":n=i[o];break;case"target_id":t=i[o]}}}for(var s=[],_=0;Ne(jr(_,ve(je,null,r.grid_data)));){for(var l=[],c=0;Ne(jr(c,ve(je,null,qr(r.grid_data,_))));){var u=qr(qr(r.grid_data,_),c);if(Ne(Ne(null===u)||null===qr(u,"cell"))){!function(){var r,n=l;ve(n.append,n,ve((r=e).wrap_in_tag,r,"td","",me({class_names:["cell-empty"]})))}();c=ve(Tr,null,c,1)}else if(Ne(qr(u,"is_topleft"))){var f=qr(u,"cell"),d=function(){var r=e;return ve(r.render_nodelist,r,f.content_nodes,me({render_context:n}))}(),p=Or(["cell"],function(){for(var e=[],r=f.styles,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,"cellstyle-{}".format(t))}return e}()),g="td";if(Ne(Ne(Ce("H",f.styles))||Ce("rH",f.styles)))g="th";var h=wr({}),v=f.placement;Ne(Lr(v.col_range.end,Or(v.col_range.start,1)))&&zr(h,"colspan",ve(ir,null,Pr(v.col_range.end,v.col_range.start))),Ne(Lr(v.row_range.end,Or(v.row_range.start,1)))&&zr(h,"rowspan",ve(ir,null,Pr(v.row_range.end,v.row_range.start))),function(){var r,n=l;ve(n.append,n,ve((r=e).wrap_in_tag,r,g,d,me({attrs:h,class_names:p})))}();c=v.col_range.end}else c=ve(Tr,null,c,1)}!function(){var e=s;ve(e.append,e,l)}();_=ve(Tr,null,_,1)}var m=wr({});Ne(null!==t)&&zr(m,"id",t);var w=function(){var r=e;return ve(r.wrap_in_tag,r,"table",ve("".join,"",function(){for(var e=[],r=s,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,Or(Or("<tr>",ve("".join,"",t)),"</tr>"))}return e}()),me({attrs:m,class_names:["cells"]}))}();return w}))},get get_html_css_global(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Qc}))},get get_html_css_content(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return eu}))},get get_html_js(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(e.use_mathjax)?ru:""}))},get get_html_body_end_js_scripts(){return fe(this,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var t in n)if("self"===t)e=n[t]}}return Ne(e.use_mathjax)?nu:""}))}}),Kc=ve($c.compile,$c,"<LLM:DLYD:(?P<key>\\d+)\\s*/>"),Qc="\np, ul, ol {\n  margin: 1em 0px;\n}\np:first-child, ul:first-child, ol:first-child {\n  margin-top: 0px;\n}\np:last-child, ul:last-child, ol:last-child {\n  margin-bottom: 0px;\n}\ndd > p, dd > p:first-child, dd > p:last-child {\n  margin: 0.33em 0px;\n}\n\na, a:link, a:hover, a:active, a:visited {\n  color: #3232c8;\n  text-decoration: none;\n}\na:hover {\n  color: #22228a;\n}\n",eu="\n.emph, .textit {\n  font-style: italic;\n}\n.textbf {\n  font-weight: bold;\n}\n\nh1 {\n  font-size: 1.6rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh2 {\n  font-size: 1.3rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh3 {\n  font-size: 1rem;\n  font-weight: bold;\n  margin: 1em 0px;\n}\n\n.heading-level-4 {\n  font-style: italic;\n  display: inline;\n}\n.heading-level-4::after {\n  display: inline-block;\n  margin: 0px .12em;\n  content: '—';\n}\n\n.heading-level-5 {\n  font-style: italic;\n  font-size: .9em;\n  display: inline;\n}\n.heading-level-5::after {\n  display: inline-block;\n  margin-right: .12em;\n  content: '';\n}\n\n.heading-level-6 {\n  font-style: italic;\n  font-size: .8em;\n  display: inline;\n}\n.heading-level-6::after {\n  display: inline-block;\n  margin-right: .06em;\n  content: '';\n}\n\ndl.enumeration {\n  display: block;\n  margin-left: 2.5em;\n}\ndl.enumeration > dt {\n  float: left;\n  clear: left;\n  display: inline-block;\n  /*margin: 0px; */\n  margin-left: -2.5em;\n  width: 2.0em;\n  min-width: 2.0em;\n  max-width: 2.0em;\n  margin-right: 0.5em;\n  text-align: right;\n}\ndl.enumeration > dd {\n  /*display: inline-block;\n  width: 100%;*/\n  border: 0px;\n  padding: 0px;\n  margin: 0px;\n}\n\nfigure.float {\n  width: 100%;\n  border-width: 1px 0px 1px 0px;\n  border-style: solid none solid none;\n  border-color: rgba(120, 120, 140, 0.15);\n  margin: 0.5rem 0px;\n  padding: 0.5rem 0px;\n}\n\nfigure.float .float-contents {\n  width: 100%;\n  max-width: 100%;\n  overflow-x: auto;\n}\n\nfigure.float .float-contents img {\n  display: block;\n  margin: 0pt auto;\n  padding: 0pt;\n  border: 0pt;\n  margin: 0px auto;\n}\n\nfigure.float figcaption {\n  display: block;\n  margin-top: 0.5em;\n  margin: 0.75em 2em 0px;\n  text-align: center;\n}\n\nfigure.float figcaption > span {\n  display: inline-block;\n  font-style: italic;\n  text-align: left;\n}\n\ntable {\n  margin: 1em 0px 1em 0px;\n  border-collapse: collapse;\n  border-top: solid 1pt;\n  border-bottom: solid 1pt;\n}\nfigure.float .float-contents table {\n  margin: 0px auto;\n}\ntd {\n  padding: 0.3em 0.5em;\n}\nth {\n  padding: 0.3em 0.5em;\n}\nth.cellstyle-H {\n  border-bottom: solid .5pt;\n}\nth.cellstyle-rH {\n}\n.cellstyle-l {\n  text-align: left;\n}\n.cellstyle-c {\n  text-align: center;\n}\n.cellstyle-r {\n  text-align: right;\n}\n.cellstyle-green {\n  background-color: rgb(200,255,200);\n}\n.cellstyle-blue {\n  background-color: rgb(200,220,255);\n}\n.cellstyle-yellow {\n  background-color: rgb(255,255,200);\n}\n.cellstyle-red {\n  background-color: rgb(255,200,200);\n}\n.cellstyle-lvert {\n  border-left: solid .5pt;\n}\n.cellstyle-rvert {\n  border-right: solid .5pt;\n}\n\n.defterm {\n  font-style: italic;\n}\n\n.defterm .defterm-term {\n  font-style: italic;\n  font-weight: bold;\n}\n\n.display-math {\n  width: 100%;\n  max-width: 100%;\n  display: block;\n  overflow-x: auto;\n}\n\n.citation {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\n.footnote {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\ndl.citation-list > dt, dl.footnote-list > dt {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\n",ru="\nMathJax = {\n    tex: {\n        inlineMath: [['\\\\(', '\\\\)']],\n        displayMath: [['\\\\[', '\\\\]']],\n        processEnvironments: true,\n        processRefs: true,\n\n        // equation numbering on\n        tags: 'ams'\n    },\n    options: {\n        // all MathJax content is marked with CSS classes\n        // skipHtmlTags: 'body',\n        // processHtmlClass: 'display-math|inline-math',\n    },\n    startup: {\n        pageReady: function() {\n            // override the default \"typeset everything on the page\" behavior to\n            // only typeset whatever we have explicitly marked as math\n            return typesetPageMathPromise();\n        }\n    }\n};\nfunction typesetPageMathPromise()\n{\n    var elements = document.querySelectorAll('.display-math, .inline-math');\n    return MathJax.typesetPromise(elements);\n}\n",nu='\n<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>\n<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>\n',tu=he("TextFragmentRenderer",[Ec],{__module__:"llm.fragmentrenderer.text",display_href_urls:!0,float_separator_top:br("·",80),float_separator_bottom:br("·",80),get render_value(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a]}}}return r}))},get render_delayed_marker(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}return""}))},get render_delayed_dummy_placeholder(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node":r=i[o];break;case"delayed_key":n=i[o];break;case"render_context":t=i[o]}}}return"#DELAYED#"}))},get render_nothing(){return fe(this,(function(e,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"annotations":r=t[a]}}}return""}))},get render_empty_error_placeholder(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"debug_str":r=t[a]}}}return""}))},get render_text_format(){return fe(this,(function(e,r,n,t){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"text_formats":r=i[o];break;case"nodelist":n=i[o];break;case"render_context":t=i[o]}}}var s=function(){var r=e;return ve(r.render_nodelist,r,n,t,me({is_block_level:!1}))}();return s}))},get render_enumeration(){return fe(this,(function(e,r,n,t){var a=null,i=0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"iter_items_nodelists":r=s[_];break;case"counter_formatter":n=s[_];break;case"render_context":t=s[_];break;case"target_id_generator":s[_];break;case"annotations":a=s[_];break;case"nested_depth":i=s[_]}}}for(var l=[],c=ve(er,null,r),u=0;u<je(c);u++){var f=qr(c,u),d=f[0],p=f[1],g=function(){var r=e;return ve(r.render_nodelist,r,p,me({render_context:t,is_block_level:!0}))}(),h=ve(n,null,Or(1,d));if(Ne(null===h))var v="?";else if(Ne(ve(Re,null,h,ir)))v=function(){var r=e;return ve(r.render_value,r,h)}();else v=function(){var r=e;return ve(r.render_nodelist,r,h,me({render_context:t,is_block_level:!1}))}();if(Ne(Ar(i,0)))v=Or(br(" ",br(4,i)),v);!function(){var e=l;ve(e.append,e,tr([v,g]))}()}if(Ne(!Ne(l)))return function(){var r=e;return ve(r.render_semantic_block,r,"","enumeration",me({annotations:a}))}();var m=ve(Be,null,function(){for(var e=[],r=l,n=0;n<je(r);n++){var t=qr(r,n),a=t[0];t[1];ve(e.append,e,ve(je,null,a))}return e}());return function(){var r=e;return ve(r.render_join_blocks,r,function(){for(var r,n,t,i,o=[],s=l,_=0;_<je(s);_++){var c=qr(s,_),u=c[0],f=c[1];r=void 0,n=void 0,t=void 0,i=void 0,ve(o.append,o,ve((i=e).render_semantic_block,i,ve((t=e).render_join,t,[(n=e,ve(n.render_value,n,Or(ve((r=u).rjust,r,Or(m,2)," ")," "))),f]),"enumeration",me({annotations:a})))}return o}())}()}))},get render_heading(){return fe(this,(function(e,r,n){var t=1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"heading_nodelist":r=i[o];break;case"render_context":n=i[o];break;case"heading_level":t=i[o];break;case"target_id":i[o];break;case"inline_heading":i[o];break;case"annotations":i[o]}}}var s=function(){var t=e;return ve(t.render_inline_content,t,r,n)}(),_=function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"x":e=t[a];break;case"c":r=t[a]}}}e=ve(ir,null,e);return Ne(Ce(Fr(function(){var r=e;return ve(r.rstrip,r)}(),yr(1),null,1),".,:;?!"))?e:Or(e,r)};if(Ne(Cr(t,1)))return"{}\n{}".format(s,br("=",ve(je,null,s)));if(Ne(Cr(t,2)))return"{}\n{}".format(s,br("-",ve(je,null,s)));if(Ne(Cr(t,3)))return"{}\n{}".format(s,br("~",ve(je,null,s)));if(Ne(Cr(t,4)))return"{}  ".format(ve(_,null,s,":"));if(Ne(Cr(t,5)))return"    {}  ".format(ve(_,null,s,":"));if(Ne(Cr(t,6)))return"        {}  ".format(ve(_,null,s,":"));var l=ve(Hr,null,"Bad heading_level={}, expected 1..6".format(t));throw l.__cause__=null,l}))},get render_verbatim(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"value":r=t[a];break;case"annotations":t[a];break;case"target_id":t[a]}}}return r}))},get render_link(){return fe(this,(function(e,r,n,t,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var s=arguments[o--];for(var _ in s)switch(_){case"self":e=s[_];break;case"ref_type":r=s[_];break;case"href":n=s[_];break;case"display_nodelist":t=s[_];break;case"render_context":a=s[_];break;case"annotations":i=s[_]}}}var l=function(){var r=e;return ve(r.render_nodelist,r,t,me({render_context:a,is_block_level:!1}))}();return Ne(Ne(e.display_href_urls)&&!Ne(function(){var e=n;return ve(e.startswith,e,"#")}()))?"{} <{}>".format(l,n):l}))},get render_float(){return fe(this,(function(e,r,n){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var a=arguments[t--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_instance":r=a[i];break;case"render_context":n=a[i]}}}var o=[];Ne(null!==r.number)?function(){var t,a,i=o;ve(i.append,i,ve((a=e).render_join,a,[r.float_type_info.float_caption_name," ",(t=e,ve(t.render_nodelist,t,r.formatted_counter_value_llm.nodes,me({render_context:n})))]))}():Ne(r.caption_nodelist)&&function(){var e=o;ve(e.append,e,r.float_type_info.float_caption_name)}(),Ne(r.caption_nodelist)&&(function(){var e=o;ve(e.append,e,": ")}(),function(){var t,a=o;ve(a.append,a,ve((t=e).render_nodelist,t,r.caption_nodelist,me({render_context:n})))}());var s=null;if(Ne(o))s=function(){var r=e;return ve(r.render_join,r,o)}();var _=function(){var t=e;return ve(t.render_nodelist,t,r.content_nodelist,me({render_context:n,is_block_level:!0}))}();if(Ne(null!==s))var l=function(){var r=e;return ve(r.render_join_blocks,r,[_,s])}();else l=_;return Or(Or(Or(Or(e.float_separator_top,"\n"),l),"\n"),e.float_separator_bottom)}))},get render_graphics_block(){return fe(this,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var t=arguments[n--];for(var a in t)switch(a){case"self":e=t[a];break;case"graphics_resource":r=t[a]}}}return"{}".format(Or(Or("[",r.src_url),"]"))}))},cells_column_sep:"   ",get render_cells(){return fe(this,(function(e,r,n,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"cells_model":r=i[o];break;case"render_context":n=i[o];break;case"target_id":t=i[o]}}}for(var s=[],_=r.cells_data,l=0;l<je(_);l++){var c=qr(_,l),u=function(){var r=e;return ve(r.render_nodelist,r,c.content_nodes,me({render_context:n}))}(),f=function(){var e=u;return ve(e.py_split,e,"\n")}(),d=!1;if(Ne(Ce("H",c.styles)))d=!0;!function(){var e=s;ve(e.append,e,wr({cell:c,rendered_contents_lines:f,width:ve(Be,null,function(){for(var e=[],r=f,n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,ve(je,null,t))}return e}()),is_header:d}))}()}var p=[];for(_=s,l=0;l<je(_);l++){var g=qr(_,l);!function(){var e=p;ve(e.append,e,ve("\n".join,"\n",function(){for(var e=[],r=qr(g,"rendered_contents_lines"),n=0;n<je(r);n++){var t=qr(r,n);ve(e.append,e,"    {}".format(t))}return e}()))}()}return ve("\n".join,"\n",p)}))}});var au=he("ZooHtmlFragmentRenderer",[Zc],{inline_heading_add_space:!1,html_blocks_joiner:"",get use_link_target_blank(){return fe(this,(function(e,r){return!function(e){return e.startsWith("#")||e.startsWith("/")&&!e.startsWith("//")||e.startsWith("javascript:")}(r)}))}}),iu=he("ZooTextFragmentRenderer",[tu],{display_href_urls:!1,float_separator_top:"[figure]",float_separator_bottom:""});function ou(e){var r=new iu;return e.render_standalone(r)}var su,_u,lu,cu=r(m)("zoodb.zoollm");function uu(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)return"";var t=Object.assign({list_joiner:"\n",list_item_wrapper:function(e){return e}},n),a=t.list_joiner,i=t.list_item_wrapper;if("string"==typeof e)return r.fragment_renderer.render_verbatim(e);if("number"==typeof e)return r.fragment_renderer.render_verbatim(Number(e).toString());if(e&&e.length)return e.map((function(e){return i(uu(e,r,n))})).join(a);if(e&&"render"in e)return e.render(r);throw cu("Cannot render %O",e),new Error("No idea how to render x = ".concat(e))}function fu(e){return null!=e&&(""!==e&&("is_empty"in e&&!e.is_empty()||void 0!==e.length&&e.length>0))}var du=r(m)("zoodb.dbprocessor.llmcontent");function pu(e){var r=e._llm;if(!r)return{enabled:!1,standalone:!1};if("full"===r||!0===r)return{enabled:!0,standalone:!1};if("standalone"===r)return{enabled:!0,standalone:!0};var n=r.enabled,t=r.standalone;return{enabled:null!=n&&n,standalone:null!=t&&t}}var gu,hu=function(e){"use strict";G(n,e);var r=Y(n);function n(e){var t,a,i;if(I(this,n),(t=r.call(this)).config=Object.assign({},e),!t.config.llm_environment)throw new Error("You need to specify the config field ‘llm_environment’ for LLMContentCompiler!");return null!==(a=(_u=t.config).content_scanner)&&void 0!==a||(_u.content_scanner=null),null!==(i=(lu=t.config).llm_error_policy)&&void 0!==i||(lu.llm_error_policy="abort"),t}return T(n,[{key:"initialize_zoo",value:function(){var e;null!==(e=(su=this.config).object_types)&&void 0!==e||(su.object_types=this.zoodb.object_types)}},{key:"process_zoo",value:function(){if(null==this.zoodb)throw new Error("No zoodb set!");var e=!0,r=!1,n=void 0;try{for(var t,a=this.config.object_types[Symbol.iterator]();!(e=(t=a.next()).done);e=!0){var i=t.value,o=this.zoodb.schema(i),s=!0,_=!1,l=void 0;try{for(var c,u=Object.entries(this.zoodb.objects[i])[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var f=d(c.value,2),p=f[0],g=f[1];this.compile_object(i,p,g,o)}}catch(e){_=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(_)throw l}}}}catch(e){r=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"prepare_zoo_update_objects",value:function(e){var r=!0,n=!1,t=void 0,a=!0,i=!1,o=void 0;try{for(var s,_=Object.entries(e)[Symbol.iterator]();!(a=(s=_.next()).done);a=!0){var l=d(s.value,2),c=l[0],u=l[1];try{for(var f,p=Object.entries(u)[Symbol.iterator]();!(r=(f=p.next()).done);r=!0){var g=d(f.value,2),h=g[0];g[1];this.config.content_scanner.unregister_all_from_object(c,h)}}catch(e){n=!0,t=e}finally{try{r||null==p.return||p.return()}finally{if(n)throw t}}}}catch(e){i=!0,o=e}finally{try{a||null==_.return||_.return()}finally{if(i)throw o}}}},{key:"compile_llm",value:function(e,r){var n,t=r.llm_options,a=r.fieldschema,i=r.object_schema,o=r.object_type,s=r.object,_=r.fieldname;if(cc(e))return e;if(null==t){if(null==a){var l=_e(i),c=!0,u=!1,f=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=d.value;if(g.fieldname===_){a=g.fieldschema;break}}}catch(e){u=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw f}}if(null==a)throw new Error("Couldn't find field schema for ‘".concat(_,"’ in object_schema"))}t=pu(a)}var h=null==s?void 0:s._zoodb.id,v=null==s||null===(n=s._zoodb)||void 0===n?void 0:n.source_file_path,m=new un(o,h,v),w=m.toString()+" .".concat(_);null!=e||(e="");var k=null;try{var y;k=this.config.llm_environment.make_fragment(e,sn({standalone_mode:null!==(y=t.standalone)&&void 0!==y&&y,resource_info:m,what:w}))}catch(e){var b=void 0!==e.msg?e.msg+"\n"+e.stack:e;if(console.error("Error while compiling LLM content for ".concat(m," ")+"— field ‘".concat(_,"’: "),b),"abort"==this.config.llm_error_policy)throw du("LLM Error & policy is 'abort', aborting compilation"),e;if("continue"!=this.config.llm_error_policy)throw new Error("Invalid llm_error_policy: ‘".concat(this.config.llm_error_policy,"’, ")+"expected 'abort' or 'continue'");du("Continuing despite LLM Error (llm_error_policy is 'continue')"),k=this.config.llm_environment.make_fragment("\\textbf{LLM ERROR "+"(\\begin{verbatimtext}".concat(w," (‘").concat(_,"’)\\end{verbatimtext}):} ")+"\\begin{verbatimtext}".concat(b,"\\end{verbatimtext}"),sn({standalone_mode:!0,resource_info:m,what:"ERROR-MESSAGE:".concat(w)}))}return null!=this.config.content_scanner&&this.config.content_scanner.scan_fragment(k),k}},{key:"_iter_llm_fields",value:function(e,r){var n,t,a,i,o,s,_,l,c,u,f,d,g;return p(this,(function(p){switch(p.label){case 0:n=!0,t=!1,a=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),i=se(e,r,{provide_parent:!0})[Symbol.iterator](),p.label=2;case 2:return(n=(o=i.next()).done)?[3,5]:(s=o.value,_=s.fieldname,l=s.fieldvalue,c=s.fieldschema,u=s.parent,f=s.parent_index,(d=pu(c)).enabled?[4,{fieldname:_,fieldvalue:l,fieldschema:c,parent:u,parent_index:f,llm_options:d}]:[3,4]);case 3:p.sent(),p.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return g=p.sent(),t=!0,a=g,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw a}return[7];case 8:return[2]}}))}},{key:"compile_object",value:function(e,r,n,t){du("Compiling LLM content - ".concat(e," ‘").concat(r,"’")),n._zoodb.llm_fields=[];var a=!0,i=!1,o=void 0;try{for(var s,_=this._iter_llm_fields(n,t)[Symbol.iterator]();!(a=(s=_.next()).done);a=!0){var l=s.value,c=l.fieldname,u=l.fieldvalue,f=(l.fieldschema,l.parent),d=l.parent_index,p=l.llm_options;n._zoodb.llm_fields.push(c),f[d]=this.compile_llm(u,{object_type:e,llm_options:p,object:n,fieldname:c})}}catch(e){i=!0,o=e}finally{try{a||null==_.return||_.return()}finally{if(i)throw o}}}},{key:"prepare_data_dump",value:function(e,r){if(r.llm_keep_fragment_instances)return e;throw new Error("Operation not supported!")}}]),n}(re),vu=r(m)("eczoo_jscomponents.codegraph");function mu(e,r){if(-1===e.indexOf("[TREEDIRECTION]"))return function(r){return r.connectedEdges(e)};var n;if("children"===r)n="target","source";else{if("parents"!==r)throw new Error("treeDirection must be 'children' or 'parents'");n="source","target"}return function(r){var t=r.cy().collection();return r.forEach((function(r){if(r.isNode()){var a=e.replace("[TREEDIRECTION]","[".concat(n,'="').concat(r.id(),'"]')),i=r.connectedEdges(a);t.merge(i)}})),t}}r(q).use(r(z));var wu=function(){"use strict";function e(n){var t=n.eczoodb,a=n.graphOptions,i=n.displayOptions;I(this,e),vu("EczCodeGraph constructor"),this.getNodeIdCode=e.getNodeIdCode,this.getNodeIdDomain=e.getNodeIdDomain,this.eczoodb=t,this.graphOptions=r(D).merge({graphRootNodesPrelayoutHints:{},isolationRelationSelector:{primary:"[TREEDIRECTION][_primaryParent=1]",secondary:'[TREEDIRECTION], [_relType="cousin"]'},rootPositioning:{rootAbstractCodesXSpacing:180,rootAbstractCodesYPosition:100,domainNodesXSpacing:180,domainNodesYPosition:0}},null!=a?a:{}),this.displayOptions=r(D).merge({displayMode:"all",modeIsolateNodesOptions:{nodeIds:null,redoLayout:!1,range:{parents:{primary:5,secondary:1},children:{primary:2,secondary:1}}},domainColoring:!0,cousinEdgesShown:!1,secondaryParentEdgesShown:!1,lowDegreeNodesDimmed:{enabled:!1,degree:8,dimLeaf:!1}},null!=i?i:{}),this._initialLayoutInvalidated=!0}return T(e,[{key:"initialize",value:function(){var e=this;return s((function(){return p(this,(function(r){switch(r.label){case 0:return vu("EczCodeGraph initialize()"),[4,e.initGraph()];case 1:return r.sent(),vu("EczCodeGraph initialize() done"),[2]}}))}))()}},{key:"initGraph",value:function(e){var n=this;return s((function(){var e,t,a,i,o,s,_,l,c,u,f,g,h,v,m,w,k,y,b,x,O,P,E,S,C,L,j,N,A,I,M,T,D,R,z,F,G,B,U,W,V,H,$,Y,X,J,Z,K,Q,ee,re,ne,te,ae,ie,oe,se,_e,le,ce,ue,fe,de,pe,ge,he,ve,me,we,ke,ye,be,xe,Oe,Pe,Ee,Se,Ce,Le,je,Ne,Ae,Ie;return p(this,(function(p){vu("EczCodeGraph: initGraph() ..."),e=[],t=[],a=0,i={},o=!0,s=!1,_=void 0;try{for(l=Object.entries(n.eczoodb.objects.domain)[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)u=d(c.value,2),f=u[0],g=u[1],vu("Adding domain =",g),h=n.getNodeIdDomain(f),cc(v=g.name)&&(v=ou(g.name)),e.push({data:{id:h,label:v,_isDomain:1,_domainId:f,_domainColorIndex:a}}),i[f]=a,a=(a+1)%bu}catch(e){s=!0,_=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw _}}m=!0,w=!1,k=void 0;try{for(y=Object.entries(n.eczoodb.objects.code)[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){if(x=d(b.value,2),O=x[0],P=x[1],vu("adding code =",P),E=n.eczoodb.code_short_name(P),S=E,cc(E)&&(S=ou(E)),S=S.replace(/\\\(|\\\)/g,""),C=n.getNodeIdCode(O),L={id:C,label:S,_codeId:O,_isCode:1},e.push({data:L}),j=P.relations.defines_kingdom,vu({code:P,thisCodeNodeId:C,definesKingdomRelation:j}),j&&j.length)N=j[0].kingdom,A=N.kingdom_id,I=N.parent_domain,M=I.domain_id,T=n.getNodeIdDomain(M),cc(D=N.name)&&(D=ou(D)),Object.assign(L,{_isKingdom:1,_kingdomId:A,_kingdomName:D,_parentDomainId:M,_domainColorIndex:i[M]}),t.push({data:{_relType:"parent",_primaryParent:1,source:C,target:T}});else{for(V=P;(null==(null===(R=V.relations)||void 0===R?void 0:R.defines_kingdom)||0==(null===(z=V.relations)||void 0===z||null===(F=z.defines_kingdom)||void 0===F?void 0:F.length))&&(null===(G=V.relations)||void 0===G||null===(B=G.parents)||void 0===B?void 0:B.length)>0;)V=V.relations.parents[0].code;vu("Code ‘".concat(O,"’'s primary-parent-root is"),V),null!=(null===(U=V.relations)||void 0===U?void 0:U.defines_kingdom)&&(null===(W=V.relations)||void 0===W?void 0:W.defines_kingdom.length)>0?(H=V.relations.defines_kingdom[0].kingdom,$=H.kingdom_id,Y=H.parent_domain.domain_id,Object.assign(L,{_hasParentKingdom:1,_parentKingdomId:$,_parentDomainId:Y,_domainColorIndex:i[Y]})):Object.assign(L,{_hasParentKingdom:0})}for(X=0,J=["parent","cousin"];X<J.length;X++)if(Z=J[X],K=P.relations[Z+"s"],vu("code's ".concat(Z," relations is: "),K),null!=K)for(Q=0;Q<K.length;++Q)ee=K[Q],re={_relType:Z,source:C,target:n.getNodeIdCode(ee.code.code_id)},"parent"===Z&&(re._primaryParent=0==Q&&null==j?1:0),t.push({data:re})}}catch(e){w=!0,k=e}finally{try{m||null==y.return||y.return()}finally{if(w)throw k}}(ne={}).elements={nodes:e,edges:t},ne.style=xu,n.cy=r(q)(ne),te=n.graphOptions.rootPositioning,ae=te.rootAbstractCodesXSpacing,ie=te.rootAbstractCodesYPosition,oe=te.domainNodesXSpacing,se=te.domainNodesYPosition,_e={},le=Object.keys(n.eczoodb.objects.domain),ce=!0,ue=!1,fe=void 0;try{for(de=le.entries()[Symbol.iterator]();!(ce=(pe=de.next()).done);ce=!0)ge=d(pe.value,2),he=ge[0],ve=ge[1],me=n.getNodeIdDomain(ve),_e[me]={position:{x:(he-(le.length-1)/2)*ae,y:ie},radiusOffset:50,direction:Math.PI-Math.PI*(he+.5)/le.length,angularSpread:Math.PI/le.length}}catch(e){ue=!0,fe=e}finally{try{ce||null==de.return||de.return()}finally{if(ue)throw fe}}we=n.getOverallRootNodeIds({includeDomains:!1}),vu("rootCodeNodeIds = ",we),ke=!0,ye=!1,be=void 0;try{for(xe=we.entries()[Symbol.iterator]();!(ke=(Oe=xe.next()).done);ke=!0)Pe=d(Oe.value,2),Ee=Pe[0],Se=Pe[1],_e[Se]={position:{x:(Ee-(we.length-1)/2)*oe,y:se},radiusOffset:50,direction:Math.PI+Math.PI*(Ee+.5)/we.length,angularSpread:Math.PI/we.length}}catch(e){ye=!0,be=e}finally{try{ke||null==xe.return||xe.return()}finally{if(ye)throw be}}vu("graphRootNodesPrelayoutHints = ",_e),n.graphOptions.graphRootNodesPrelayoutHints=_e,Ce=!0,Le=!1,je=void 0;try{for(Ne=Object.keys(n.graphOptions.graphRootNodesPrelayoutHints)[Symbol.iterator]();!(Ce=(Ae=Ne.next()).done);Ce=!0)Ie=Ae.value,n.cy.getElementById(Ie).addClass("graphRoot")}catch(e){Le=!0,je=e}finally{try{Ce||null==Ne.return||Ne.return()}finally{if(Le)throw je}}return n.setDisplayMode(null),n.setDomainColoring(null),n.setCousinEdgesShown(null),n.setSecondaryParentEdgesShown(null),n.setLowDegreeNodesDimmed(null),[2]}))}))()}},{key:"mountInDom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.style.backgroundColor="rgb(255, 236, 217)",this.cy.mount(e);var t,a=r(D).merge({},n);null!==(t=(gu=a).matchWebPageFonts)&&void 0!==t||(gu.matchWebPageFonts=!0);var i=Ou(a);this.cy.style().resetToDefault().fromJson(i).update()}},{key:"domainColoring",value:function(){return this.displayOptions.domainColoring}},{key:"setDomainColoring",value:function(e){if(null!=e){if((e=!!e)===this.displayOptions.domainColoring)return;this.displayOptions.domainColoring=e}this.displayOptions.domainColoring?this.cy.nodes().addClass("useDomainColors"):this.cy.nodes().removeClass("useDomainColors")}},{key:"cousinEdgesShown",value:function(){return this.displayOptions.cousinEdgesShown}},{key:"setCousinEdgesShown",value:function(e){if(null!=e){if((e=!!e)===this.displayOptions.cousinEdgesShown)return;this.displayOptions.cousinEdgesShown=e}var r=this.cy.edges('[_relType="cousin"]');this.displayOptions.cousinEdgesShown?r.removeClass("hidden"):r.addClass("hidden")}},{key:"secondaryParentEdgesShown",value:function(){return this.displayOptions.secondaryParentEdgesShown}},{key:"setSecondaryParentEdgesShown",value:function(e){if(null!=e){if((e=!!e)===this.displayOptions.secondaryParentEdgesShown)return;this.displayOptions.secondaryParentEdgesShown=e}var r=this.cy.edges("[_primaryParent=0]");this.displayOptions.secondaryParentEdgesShown?r.removeClass("hidden"):r.addClass("hidden")}},{key:"lowDegreeNodesDimmed",value:function(){return this.displayOptions.lowDegreeNodesDimmed}},{key:"setLowDegreeNodesDimmed",value:function(e){if(null!=e){if(r(D).isEqual(this.displayOptions.lowDegreeNodesDimmed,e))return;this.displayOptions.lowDegreeNodesDimmed=e}var n=this.displayOptions.lowDegreeNodesDimmed,t=n.enabled,a=n.degree,i=n.dimLeaf;if(this.cy.elements().removeClass("lowDegreeDimmed"),t){null!=a||(a=8),null!=i||(i=!0);var o="[[degree < ".concat(a,"]]");i||(o+="[[indegree >= 1]]"),this.cy.nodes(o).addClass("lowDegreeDimmed"),this.cy.edges((function(e){return e.source().is(".lowDegreeDimmed")||e.target().is(".lowDegreeDimmed")})).addClass("lowDegreeDimmed")}}},{key:"displayMode",value:function(){return this.displayOptions.displayMode}},{key:"modeIsolateNodesOptions",value:function(){return this.displayOptions.modeIsolateNodesOptions}},{key:"setDisplayMode",value:function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).modeIsolateNodesOptions,t=this;if(vu("setDisplayMode(): ",{displayMode:e,modeIsolateNodesOptions:n}),null!=e){if(e===this.displayOptions.displayMode){if("all"===e)return;if("isolate-nodes"!==e)throw new Error("Invalid display mode: ".concat(e));if(r(D).isEqual(n,this.displayOptions.modeIsolateNodesOptions))return void vu("setDisplayMode(): (nothing to update). ",{"this.displayOptions":this.displayOptions,modeIsolateNodesOptions:n})}if(this.displayOptions.displayMode=e,"all"===e);else{if("isolate-nodes"!==e)throw new Error("Invalid display mode: ".concat(e));r(D).merge(this.displayOptions.modeIsolateNodesOptions,n)}}if(this.cy.elements().removeClass(["isolationRoot","isolationSelected","isolationSecondary","isolationHidden"]),"all"===this.displayOptions.displayMode)vu("displayMode is 'all'");else{if("isolate-nodes"!==this.displayOptions.displayMode)throw new Error("Unknown displayMode = ".concat(this.displayOptions.displayMode));vu("applying displayMode=".concat(this.displayOptions.displayMode," with"),{displayOptions:this.displayOptions});for(var a=this.displayOptions.modeIsolateNodesOptions,i=a.nodeIds,o=(a.redoLayout,a.range),s={},_=0,l=["parents","children"];_<l.length;_++){var c=l[_];s[c]={};for(var u=0,f=["primary","secondary"];u<f.length;u++){var d=f[u],p=this.graphOptions.isolationRelationSelector[d];if(!1!==p){var g=mu(p,c);s[c][d]=g}else s[c][d]=!1}}vu({relationEdgesGetters:s});var h=this.cy.collection();i.forEach((function(e){return h.merge(t.cy.getElementById(e))}));for(var v=h,m=h,w=0;w<o.children.primary;++w){vu("computing isolation mode elements, elx1 = ",v);var k=s.children.primary(v);v=v.union(k).union(k.connectedNodes())}for(var y=v,b=0;b<o.children.secondary;++b){var x=s.children.secondary(y);y=v.union(x).union(x.connectedNodes())}for(var O=0;O<o.parents.primary;++O){vu("computing isolation mode elements, elx2 = ",m);var P=s.parents.primary(m);m=m.union(P).union(P.connectedNodes())}for(var E=m,S=0;S<o.parents.secondary;++S){var C=s.parents.secondary(m);E=m.union(C).union(C.connectedNodes())}var L=v.union(m),j=y.union(E),N=j.union(j.connectedNodes()).union(L),A=N.not(L);vu("elxall = ",N),vu("elxlast = ",A),h.addClass("isolationRoot"),L.addClass("isolationSelected"),A.addClass(["isolationSelected","isolationSecondary"]),this.cy.elements().not(N).addClass("isolationHidden")}}},{key:"initialLayoutInvalidated",value:function(){return this._initialLayoutInvalidated}},{key:"prelayout",value:function(e,n){var t=this;return s((function(){var a,i;return p(this,(function(o){if("all"===t.displayOptions.displayMode)a={primary:"[TREEDIRECTION][_primaryParent=1]",secondary:!1};else{if("isolate-nodes"!==t.displayOptions.displayMode)throw new Error("unknown displayMode=".concat(t.displayOptions.displayMode));a=t.graphOptions.isolationRelationSelector}return n=r(D).merge({origin:{position:{x:0,y:0},angularSpread:2*Math.PI,useWeights:!1},relationSelector:a,weightCalcLevels:6,weightCalcSecondaryFactor:.3},n),vu("prelayout(): Using rootNodeIds =",e),i=new ku({cy:t.cy,rootNodeIds:e,options:n,graphRootNodesPrelayoutHints:t.graphOptions.graphRootNodesPrelayoutHints}),t.cy.batch((function(){t.cy.elements().removeClass(["prelayoutPositioned","prelayoutOutOfLayoutTree","prelayoutRoot"]);try{i.run()}catch(e){return void console.error(e)}t.cy.edges((function(e){return e.target().is(".prelayoutPositioned")&&e.source().is(".prelayoutPositioned")})).addClass("prelayoutPositioned"),t.cy.elements(":visible").not(".prelayoutPositioned").addClass("prelayoutOutOfLayoutTree")})),[2]}))}))()}},{key:"getOverallRootNodeIds",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeDomains,r=this;null!=e||(e=!0);var n=[];e&&(n=Object.keys(this.eczoodb.objects.domain).map((function(e){return r.getNodeIdDomain(e)})));var t=Object.entries(this.eczoodb.objects.code).filter((function(e){var r,n,t,a=d(e,2),i=(a[0],a[1]);return!(null===(r=i.relations)||void 0===r||null===(n=r.parents)||void 0===n?void 0:n.length)&&!(null===(t=i.relations)||void 0===t?void 0:t.defines_kingdom)})).map((function(e){var n=d(e,2),t=n[0];n[1];return r.getNodeIdCode(t)}));return[].concat(n,t)}},{key:"layout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.animate,t=e.forceRelayout,a=e.prelayoutOptions,i=this;return s((function(){var e,o,s,_,l,c,u,f,d,g;return p(this,(function(p){switch(p.label){case 0:return null!=n||(n=!0),t&&(i._initialLayoutInvalidated=!0),vu("code graph layout()"),e=null,o=!0,s=!0,"all"===i.displayOptions.displayMode?(i._initialLayoutInvalidated||(o=!1,s=!1),e=i.getOverallRootNodeIds(),a=r(D).merge({},a)):"isolate-nodes"===i.displayOptions.displayMode&&(_=i.displayOptions.modeIsolateNodesOptions,l=_.nodeIds,(c=_.redoLayout)?e=l:(o=!1,e=i.getOverallRootNodeIds()),u={position:{x:0,y:0},radius:80},1===l.length&&r(D).merge(u,{radius:0}),a=r(D).merge({origin:r(D).merge({direction:Math.PI/2,angularSpread:Math.PI},u)},a),c||(s=!1),i.cy.nodes(".prelayoutPositioned").size,(o||s)&&(i._initialLayoutInvalidated=!0)),o?[4,i.prelayout(e,a)]:[3,2];case 1:p.sent(),p.label=2;case 2:return s?(vu("Running fcose layout ..."),f=[].concat(e.map((function(e){return{nodeId:e,position:i.cy.getElementById(e).position()}}))),d={name:"fcose",quality:"proof",randomize:!1,animate:n,fit:!0,sampleSize:500,nodeDimensionsIncludeLabels:!0,nodeRepulsion:function(e){return 1e5},idealEdgeLength:function(e){return 1===e.data("_primaryParent")?100:300},edgeElasticity:function(e){return 1===e.data("_primaryParent")?.3:.01},numIter:5e4,gravity:0,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:f},g=new Promise((function(e){vu("in promise - creating and running layout"),i.cy.elements((function(e){return e.visible()})).layout(r(D).merge({ready:function(){return e()},stop:function(){return e()}},d)).run()})),vu("laying out (fcose) - waiting for promise."),[4,g]):[2];case 3:return p.sent(),"all"===i.displayOptions.displayMode&&o&&s&&(i._initialLayoutInvalidated=!1),vu("done!"),[2]}}))}))()}}],[{key:"getNodeIdCode",value:function(e){return"c_".concat(e)}},{key:"getNodeIdDomain",value:function(e){return"d_".concat(e)}}]),e}(),ku=function(){"use strict";function e(n){var t=n.cy,a=n.rootNodeIds,i=n.options,o=n.graphRootNodesPrelayoutHints;I(this,e),this.cy=t,this.rootNodeIds=a,this.graphRootNodesPrelayoutHints=o,this.options=r(D).merge({trees:{children:{primary:!0,secondary:1},parents:{primary:!0,secondary:1}},relationSelector:{primary:"",secondary:""},origin:{position:{x:0,y:0},radius:50,angularSpread:2*Math.PI,direction:Math.PI/2,useWeights:!1},radiusSegmentLevels:[200,200],radiusSegmentLevelFactor:1.1,weightCalcLevels:2},i)}return T(e,[{key:"run",value:function(){var e=[],r={},n={},t=[],a=!0,i=!1,o=void 0;try{for(var s,_=this.rootNodeIds[Symbol.iterator]();!(a=(s=_.next()).done);a=!0){var l=s.value,c=this.graphRootNodesPrelayoutHints[l];null!=c?n[l]=c:t.push(l)}}catch(e){i=!0,o=e}finally{try{a||null==_.return||_.return()}finally{if(i)throw o}}var u=t.length,f=Math.max(t.length-1,1),p=this.options.origin;vu("Will need to auto position ".concat(u," root nodes"),{origin:p});var g=!0,h=!1,v=void 0;try{for(var m,w=t.entries()[Symbol.iterator]();!(g=(m=w.next()).done);g=!0){var k=d(m.value,2),y=k[0],b=k[1],x=y/f;1===f&&(x=.5);var O=p.direction+(x-.5)*p.angularSpread,P=p.radius,E={x:p.position.x+P*Math.cos(O),y:p.position.y+P*Math.sin(O)};n[b]={position:E,radiusOffset:P,direction:O,angularSpread:p.angularSpread/u}}}catch(e){h=!0,v=e}finally{try{g||null==w.return||w.return()}finally{if(h)throw v}}var S=!0,C=!1,L=void 0;try{for(var j,N=Object.entries(n)[Symbol.iterator]();!(S=(j=N.next()).done);S=!0){var A=d(j.value,2),I=A[0],M=A[1];if(vu("Prelayout - Prepping root node ".concat(I),{hints:M}),r[I]={position:M.position,isRoot:!0,relatedAs:"root"},this.options.trees.children){var T=this.options.trees.children;e.push(new yu({cy:this.cy,root:{nodeId:I,radius:M.radiusOffset,position:M.position,direction:M.direction,angularSpread:M.angularSpread},options:this.options,branchOptions:{treeDirection:"children",flipDirection:!1,tree:T},positionedNodesData:r}))}if(this.options.trees.parents){var D=this.options.trees.parents;e.push(new yu({cy:this.cy,root:{nodeId:I,radius:M.radiusOffset,position:M.position,direction:M.direction,angularSpread:M.angularSpread},options:this.options,branchOptions:{treeDirection:"parents",flipDirection:!0,tree:D},positionedNodesData:r}))}}}catch(e){C=!0,L=e}finally{try{S||null==N.return||N.return()}finally{if(C)throw L}}var R=!0,q=!1,z=void 0;try{for(var F,G=e[Symbol.iterator]();!(R=(F=G.next()).done);R=!0){F.value.positionAndMarkNodesInData()}}catch(e){q=!0,z=e}finally{try{R||null==G.return||G.return()}finally{if(q)throw z}}var B=!0,U=!1,W=void 0;try{for(var V,H=Object.entries(r)[Symbol.iterator]();!(B=(V=H.next()).done);B=!0){var $=d(V.value,2),Y=$[0],X=$[1],J=this.cy.getElementById(Y),Z=X.position,K=X.isRoot,Q=X.relatedAs;J.addClass(["prelayoutPositioned","prelayoutRelatedAs_".concat(Q)]),K&&J.addClass(["prelayoutPositioned","prelayoutRoot"]),J.position(Z)}}catch(e){U=!0,W=e}finally{try{B||null==H.return||H.return()}finally{if(U)throw W}}}}]),e}(),yu=function(){"use strict";function e(n){var t=n.cy,a=n.root,i=n.options,o=n.branchOptions,s=n.positionedNodesData;I(this,e),this.cy=t,this.root=a,this.rootNode=this.cy.getElementById(this.root.nodeId),this.options=i,this.branchOptions=r(D).merge({treeDirection:"children",flipDirection:!1},o),this.positionedNodesData=s,this.nodeOrderinginfoByLevel=null}return T(e,[{key:"_computeNodeInfos",value:function(){for(var e=[],r=this.options,n=new Set,t=[{nodeId:this.root.nodeId,level:0,treeDepthRemaining:Object.assign({},this.branchOptions.tree),parentNodeOrderingInfo:null,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],relatedAs:"root"}],a=function(e,r){var n=e.source(),t=e.target();return n.id()===r?t:n},i={},o=0,s=["primary","secondary"];o<s.length;o++){var _=s[o],l=r.relationSelector[_];if(!1!==l){var c=mu(l,this.branchOptions.treeDirection);i[_]=c}else i[_]=!1}e.push(t);for(var u=0;t.length;){var f=[],d=!0,p=!1,g=void 0;try{for(var h,v=t[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){for(var m=h.value,w=m.nodeId,k=m.parentNodeOrderingInfo,y=m.treeDepthRemaining,b=k,x=0;null!=b;){for(b.totalNumDescendants+=1;b.numDescendants.length<=x;)b.numDescendants.push(0);b.numDescendants[x]+=1,b=b.parentNodeOrderingInfo,x+=1}for(var O=0,P=["primary","secondary"];O<P.length;O++){var E,S,C=P[O];if(0!==y[C]){var L=i[C];if(!1!==L){var j=L(this.cy.getElementById(w)),N=[],A=!0,I=!1,M=void 0;try{for(var T,D=j[Symbol.iterator]();!(A=(T=D.next()).done);A=!0){var q=a(T.value,w).id();if(!this.positionedNodesData.hasOwnProperty(q)&&!n.has(q)){n.add(q);var z=Object.assign({},y);!0!==z[C]&&(z[C]-=1),"secondary"===C&&(z.primary=0),N.push({nodeId:q,level:u+1,parentNodeOrderingInfo:m,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],treeDepthRemaining:z,relatedAs:C})}}}catch(e){I=!0,M=e}finally{try{A||null==D.return||D.return()}finally{if(I)throw M}}(E=m.connectedNodesInfos).push.apply(E,(0,R.default)(N)),(S=f).push.apply(S,(0,R.default)(N))}}}}}catch(e){p=!0,g=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw g}}e.push(f),t=f,u+=1}this.nodeOrderinginfoByLevel=e}},{key:"_computeNodeWeights",value:function(){var e=this,n=!0,t=!1,a=void 0;try{for(var i,o=this.nodeOrderinginfoByLevel.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=d(i.value,2);s[0];s[1].forEach((function(n){var t,a=Math.max(1,null!==(t=r(D).sum(n.numDescendants.slice(0,e.options.weightCalcLevels)))&&void 0!==t?t:0);"secondary"===n.relatedAs&&(a*=e.options.weightCalcSecondaryFactor),n._weight=a}))}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}}},{key:"positionAndMarkNodesInData",value:function(){this._computeNodeInfos(),this._computeNodeWeights();var e=this.root.direction;this.branchOptions.flipDirection&&(e=-e),this._positionNodeChildren({node:this.rootNode,nodePosition:this.root.position,nodeInfo:this.nodeOrderinginfoByLevel[0][0],level:1,angularSpread:this.root.angularSpread,direction:e})}},{key:"_markNodeAndSetRelativePosition",value:function(e){var r=e.node,n=e.isRoot,t=e.referencePoint,a=e.relPos,i=e.relatedAs,o={x:t.x+a.x,y:t.y+a.y},s=r.id();if(this.positionedNodesData.hasOwnProperty(s))throw new Error("Node ".concat(s," is being positioned in two different subtrees!"));return this.positionedNodesData[r.id()]={position:o,isRoot:n,relatedAs:i},o}},{key:"_positionNodesRadially",value:function(e){var n,t=e.nodeInfos,a=e.referencePoint,i=e.R,o=e.direction,s=e.angularSpread,_=e.isRoot,l=e.useWeights;null!=_||(_=!1),null!=l||(l=!0);var c=r(D).sum(t.map((function(e){return null!==(n=e._weight)&&void 0!==n?n:1}))),u=0,f=[],p=t.length,g=!0,h=!1,v=void 0;try{for(var m,w=t.entries()[Symbol.iterator]();!(g=(m=w.next()).done);g=!0){var k=d(m.value,2),y=k[0],b=k[1],x=b.nodeId,O=b._weight,P=b.relatedAs,E=this.cy.getElementById(x),S=void 0;1===p?S=.5:l?(S=u/c,_&&p>1||(S+=O/(2*c))):(S=y/p,_&&p>1||(S+=.5/p));var C=o+(S-.5)*s,L={x:i*Math.cos(C),y:i*Math.sin(C)};u+=O;var j=this._markNodeAndSetRelativePosition({node:E,referencePoint:a,relPos:L,isRoot:_,relatedAs:P}),N=O*s/c;f.push({nodeId:x,node:E,nodePosition:j,nodeInfo:b,angularSpread:N,direction:C})}}catch(e){h=!0,v=e}finally{try{g||null==w.return||w.return()}finally{if(h)throw v}}return f}},{key:"_positionNodeChildren",value:function(e){e.node;var r=e.nodePosition,n=e.nodeInfo,t=e.level,a=e.angularSpread,i=e.direction,o=this.options;null==i&&(i=Math.atan2(r.y-this.root.position.y,r.x-this.root.position.x));for(var s=o.radiusSegmentLevels.length,_=this.root.radius,l=0;l<t;++l)_+=t<s?o.radiusSegmentLevels[t]:o.radiusSegmentLevels[s-1]*Math.pow(o.radiusSegmentLevelFactor,t-s);var c=this._positionNodesRadially({nodeInfos:n.connectedNodesInfos,referencePoint:this.root.position,R:_,direction:i,angularSpread:a}),u=!0,f=!1,d=void 0;try{for(var p,g=c[Symbol.iterator]();!(u=(p=g.next()).done);u=!0){var h=p.value;this._positionNodeChildren({node:h.node,nodePosition:h.nodePosition,nodeInfo:h.nodeInfo,level:t+1,angularSpread:h.angularSpread,direction:h.direction})}}catch(e){f=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(f)throw d}}}}]),e}(),bu=3,xu=[{selector:"node",style:{color:"rgb(127, 48, 0)","background-color":"rgb(127, 48, 0)",label:"data(label)",width:15,height:15,"min-zoomed-font-size":10}},{selector:"node[_isDomain=1]",style:{shape:"round-rectangle",width:25,height:25}},{selector:"node[_isKingdom=1]",style:{shape:"diamond",width:25,height:25}},{selector:"node[_hasParentKingdom=0]",style:{shape:"round-diamond",color:"rgb(136, 91, 7)","background-color":"rgb(136, 91, 7)",width:20,height:20}},{selector:"node.useDomainColors[_domainColorIndex=0]",style:{color:"rgb(95,69,130)","background-color":"rgb(95,69,130)"}},{selector:"node.useDomainColors[_domainColorIndex=1]",style:{color:"rgb(50,108,110)","background-color":"rgb(50,108,110)"}},{selector:"node.useDomainColors[_domainColorIndex=2]",style:{color:"rgb(111,50,72)","background-color":"rgb(111,50,72)"}},{selector:"edge",style:{width:1,opacity:.5,"target-arrow-shape":"triangle","curve-style":"bezier","font-size":"12px"}},{selector:'edge[_relType="parent"]',style:{width:1,"line-color":"#00307f","target-arrow-color":"#00307f",color:"#00307f"}},{selector:"edge[_primaryParent=0]",style:{opacity:.25}},{selector:'edge[_relType="cousin"]',style:{width:1,"target-arrow-shape":"none","line-style":"dotted","line-color":"#00883f","target-arrow-color":"#00883f",color:"#00883f"}},{selector:".graphRoot[_isDomain!=1]",style:{width:25,height:25}},{selector:".isolationRoot",style:{color:"rgb(230,50,50)","font-weight":"bold","background-color":"rgb(230,50,50)"}},{selector:".isolationSecondary",style:{opacity:.3}},{selector:"node.isolationSecondary",style:{width:10,height:10}},{selector:".prelayoutOutOfLayoutTree",style:{color:"rgb(255,0,255)","background-color":"rgb(255,0,255)",opacity:1}},{selector:".hidden, .isolationHidden",style:{display:"none"}},{selector:".lowDegreeDimmed",style:{opacity:.15,label:""}},{selector:"node.lowDegreeDimmed",style:{width:10,height:10}},{selector:".highlight",style:{opacity:1,color:"rgb(220,80,0)","background-color":"rgb(220,80,0)",width:40,height:40,"font-size":20}},{selector:".dimmed",style:{opacity:.3}}];function Ou(e){var n={};if(null!=e||(e={}),e.matchWebPageFonts){var t,a=null!==(t=e.window)&&void 0!==t?t:window,i=a.getComputedStyle(a.document.body);n["font-family"]=i.getPropertyValue("font-family"),n["font-size"]=i.getPropertyValue("font-size"),n["font-weight"]=i.getPropertyValue("font-weight"),n["font-style"]=i.getPropertyValue("font-style")}return null!=e.fontFamily&&(n["font-family"]=e.fontFamily),null!=e.fontSize&&(n["font-size"]=e.fontSize),null!=e.fontWeight&&(n["font-weight"]=e.fontWeight),null!=e.fontStyle&&(n["font-style"]=e.fontStyle),r(D).isEmpty(n)?xu:[].concat([{selector:"*",style:n}],xu)}var Pu;Pu=React;var Eu={};H=i("3Ie7j");function Su(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}window,Eu=function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r,n){"use strict";var t=n(1),a=function(e){e&&e("core","svg",t.svg)};"undefined"!=typeof cytoscape&&a(cytoscape),e.exports=a},function(e,r,n){"use strict";var t="function"==typeof Symbol&&"symbol"==(0,H.default)(Symbol.iterator)?function(e){return void 0===e?"undefined":(0,H.default)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":(0,H.default)(e)},a=n(2),i={},o={number:function(e){return null!=e&&(void 0===e?"undefined":t(e))===t(1)&&!isNaN(e)}};i.bufferCanvasImage=function(e,r){var n=r.renderer().usePaths;r.renderer().usePaths=function(){return!1},r.elements().forEach((function(e){e._private.rscratch.pathCacheKey=null,e._private.rscratch.pathCache=null}));var t=r.renderer(),i=r.mutableElements().boundingBox(),s=t.findContainerClientCoords(),_=e.full?Math.ceil(i.w):s[2],l=e.full?Math.ceil(i.h):s[3],c=o.number(e.maxWidth)||o.number(e.maxHeight),u=t.getPixelRatio(),f=1;if(void 0!==e.scale)_*=e.scale,l*=e.scale,f=e.scale;else if(c){var d=1/0,p=1/0;o.number(e.maxWidth)&&(d=f*e.maxWidth/_),o.number(e.maxHeight)&&(p=f*e.maxHeight/l),_*=f=Math.min(d,p),l*=f}c||(_*=u,l*=u,f*=u);var g=null,h=g=new a(_,l);if(_>0&&l>0){g.clearRect(0,0,_,l),e.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=e.bg,g.fillRect(0,0,_,l)),g.globalCompositeOperation="source-over";var v=t.getCachedZSortedEles();if(e.full)g.translate(-i.x1*f,-i.y1*f),g.scale(f,f),t.drawElements(g,v),g.scale(1/f,1/f),g.translate(i.x1*f,i.y1*f);else{var m=r.pan(),w={x:m.x*f,y:m.y*f};f*=r.zoom(),g.translate(w.x,w.y),g.scale(f,f),t.drawElements(g,v),g.scale(1/f,1/f),g.translate(-w.x,-w.y)}}return r.renderer().usePaths=n,h},i.svg=function(e){return i.bufferCanvasImage(e||{},this).getSerializedSvg()},e.exports=i},function(e,r,n){!function(){"use strict";var r,n,t,a,i,o=function(e,r){var n,t=Object.keys(r);for(n=0;n<t.length;n++)e=e.replace(new RegExp("\\{"+t[n]+"\\}","gi"),r[t[n]]);return e},s=function(e){var r,n,t;if(!e)throw new Error("cannot create a random attribute name for an undefined object");r="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",t=0;t<12;t++)n+=r[Math.floor(Math.random()*r.length)]}while(e[n]);return n},_=function(e){var r={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return r[e]||r.alphabetic};i=function(e,r){var n,t,a,i={};for(e=e.split(","),r=r||10,n=0;n<e.length;n+=2)t="&"+e[n+1]+";",a=parseInt(e[n],r),i[t]="&#"+a+";";return i["\\xa0"]="&#160;",i}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),r={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(t=function(e,r){this.__root=e,this.__ctx=r}).prototype.addColorStop=function(e,r){var n,t=this.__ctx.__createElement("stop");t.setAttribute("offset",e),-1!==r.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(r),t.setAttribute("stop-color",o("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),t.setAttribute("stop-opacity",n[4])):t.setAttribute("stop-color",r),this.__root.appendChild(t)},a=function(e,r){this.__root=e,this.__ctx=r},(n=function(e){var r,t={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((r=t).width=arguments[0],r.height=arguments[1]):r=e||t,!(this instanceof n))return new n(r);this.width=r.width||t.width,this.height=r.height||t.height,this.enableMirroring=void 0!==r.enableMirroring?r.enableMirroring:t.enableMirroring,this.canvas=this,this.__document=r.document||document,r.ctx?this.__ctx=r.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,r,n){void 0===r&&(r={});var t,a,i=this.__document.createElementNS("http://www.w3.org/2000/svg",e),o=Object.keys(r);for(n&&(i.setAttribute("fill","none"),i.setAttribute("stroke","none")),t=0;t<o.length;t++)a=o[t],i.setAttribute(a,r[a]);return i},n.prototype.__setDefaultStyles=function(){var e,n,t=Object.keys(r);for(e=0;e<t.length;e++)this[n=t[e]]=r[n].canvas},n.prototype.__applyStyleState=function(e){if(e){var r,n,t=Object.keys(e);for(r=0;r<t.length;r++)this[n=t[r]]=e[n]}},n.prototype.__getStyleState=function(){var e,n,t={},a=Object.keys(r);for(e=0;e<a.length;e++)t[n=a[e]]=this[n];return t},n.prototype.__applyStyleToCurrentElement=function(e){var n=this.__currentElement;this.__currentElementsToStyle;var i,s,_,l,c,u=Object.keys(r);for(i=0;i<u.length;i++)if(s=r[u[i]],_=this[u[i]],s.apply)if(_ instanceof a){if(_.__ctx)for(;_.__ctx.__defs.childNodes.length;)l=_.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[l]=l,this.__defs.appendChild(_.__ctx.__defs.childNodes[0]);n.setAttribute(s.apply,o("url(#{id})",{id:_.__root.getAttribute("id")}))}else if(_ instanceof t)n.setAttribute(s.apply,o("url(#{id})",{id:_.__root.getAttribute("id")}));else if(-1!==s.apply.indexOf(e)&&s.svg!==_)if("stroke"!==s.svgAttr&&"fill"!==s.svgAttr||-1===_.indexOf("rgba")){var f=s.svgAttr;if("globalAlpha"===u[i]&&(f=e+"-"+s.svgAttr,n.getAttribute(f)))continue;n.setAttribute(f,_)}else{c=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(_),n.setAttribute(s.svgAttr,o("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var d=c[4],p=this.globalAlpha;null!=p&&(d*=p),n.setAttribute(s.svgAttr+"-opacity",d)}},n.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},n.prototype.getSerializedSvg=function(e){var r,n,t,a,o,s=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(s)&&(s=s.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(r=Object.keys(i),n=0;n<r.length;n++)t=r[n],a=i[t],(o=new RegExp(t,"gi")).test(s)&&(s=s.replace(o,a));return s},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var e=this.__createElement("g"),r=this.__closestGroupOrSvg();this.__groupStack.push(r),r.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},n.prototype.__addTransform=function(e){var r=this.__closestGroupOrSvg();if(r.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:r,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");r.appendChild(n),this.__currentElement=n}var t=this.__currentElement.getAttribute("transform");t?t+=" ":t="",t+=e,this.__currentElement.setAttribute("transform",t)},n.prototype.scale=function(e,r){void 0===r&&(r=e),this.__addTransform(o("scale({x},{y})",{x:e,y:r}))},n.prototype.rotate=function(e){var r=180*e/Math.PI;this.__addTransform(o("rotate({angle},{cx},{cy})",{angle:r,cx:0,cy:0}))},n.prototype.translate=function(e,r){this.__addTransform(o("translate({x},{y})",{x:e,y:r}))},n.prototype.transform=function(e,r,n,t,a,i){this.__addTransform(o("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:r,c:n,d:t,e:a,f:i}))},n.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},n.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},n.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},n.prototype.moveTo=function(e,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:r},this.__addPathCommand(o("M {x} {y}",{x:e,y:r}))},n.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},n.prototype.lineTo=function(e,r){this.__currentPosition={x:e,y:r},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(o("L {x} {y}",{x:e,y:r})):this.__addPathCommand(o("M {x} {y}",{x:e,y:r}))},n.prototype.bezierCurveTo=function(e,r,n,t,a,i){this.__currentPosition={x:a,y:i},this.__addPathCommand(o("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:r,cp2x:n,cp2y:t,x:a,y:i}))},n.prototype.quadraticCurveTo=function(e,r,n,t){this.__currentPosition={x:n,y:t},this.__addPathCommand(o("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:r,x:n,y:t}))};var l=function(e){var r=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/r,e[1]/r]};n.prototype.arcTo=function(e,r,n,t,a){var i=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(void 0!==i&&void 0!==o){if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(i===e&&o===r||e===n&&r===t||0===a)this.lineTo(e,r);else{var s=l([i-e,o-r]),_=l([n-e,t-r]);if(s[0]*_[1]!=s[1]*_[0]){var c=s[0]*_[0]+s[1]*_[1],u=Math.acos(Math.abs(c)),f=l([s[0]+_[0],s[1]+_[1]]),d=a/Math.sin(u/2),p=e+d*f[0],g=r+d*f[1],h=[-s[1],s[0]],v=[_[1],-_[0]],m=function(e){var r=e[0];return e[1]>=0?Math.acos(r):-Math.acos(r)},w=m(h),k=m(v);this.lineTo(p+h[0]*a,g+h[1]*a),this.arc(p,g,a,w,k)}else this.lineTo(e,r)}}},n.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(e,r,n,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,r),this.lineTo(e+n,r),this.lineTo(e+n,r+t),this.lineTo(e,r+t),this.lineTo(e,r),this.closePath()},n.prototype.fillRect=function(e,r,n,t){var a;a=this.__createElement("rect",{x:e,y:r,width:n,height:t},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(e,r,n,t){var a;a=this.__createElement("rect",{x:e,y:r,width:n,height:t},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("stroke")},n.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),r=this.__root.childNodes[1],n=r.childNodes,t=n.length-1;t>=0;t--)n[t]&&r.removeChild(n[t]);this.__currentElement=r,this.__groupStack=[],e&&this.__addTransform(e)},n.prototype.clearRect=function(e,r,n,t){if(0!==e||0!==r||n!==this.width||t!==this.height){var a,i=this.__closestGroupOrSvg();a=this.__createElement("rect",{x:e,y:r,width:n,height:t,fill:"#FFFFFF"},!0),i.appendChild(a)}else this.__clearCanvas()},n.prototype.createLinearGradient=function(e,r,n,a){var i=this.__createElement("linearGradient",{id:s(this.__ids),x1:e+"px",x2:n+"px",y1:r+"px",y2:a+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(i),new t(i,this)},n.prototype.createRadialGradient=function(e,r,n,a,i,o){var _=this.__createElement("radialGradient",{id:s(this.__ids),cx:a+"px",cy:i+"px",r:o+"px",fx:e+"px",fy:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(_),new t(_,this)},n.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),r={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(r.decoration="underline"),this.__fontHref&&(r.href=this.__fontHref),r},n.prototype.__wrapTextLink=function(e,r){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(r),n}return r},n.prototype.__applyText=function(e,r,n,t){var a,i,o=this.__parseFont(),s=this.__closestGroupOrSvg(),l=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:r,y:n,"text-anchor":(a=this.textAlign,i={left:"start",right:"end",center:"middle",start:"start",end:"end"},i[a]||i.start),"dominant-baseline":_(this.textBaseline)},!0);l.appendChild(this.__document.createTextNode(e)),this.__currentElement=l,this.__applyStyleToCurrentElement(t),s.appendChild(this.__wrapTextLink(o,l))},n.prototype.fillText=function(e,r,n){this.__applyText(e,r,n,"fill")},n.prototype.strokeText=function(e,r,n){this.__applyText(e,r,n,"stroke")},n.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},n.prototype.arc=function(e,r,n,t,a,i){if(t!==a){(t%=2*Math.PI)==(a%=2*Math.PI)&&(a=(a+2*Math.PI-.001*(i?-1:1))%(2*Math.PI));var s=e+n*Math.cos(a),_=r+n*Math.sin(a),l=e+n*Math.cos(t),c=r+n*Math.sin(t),u=i?0:1,f=0,d=a-t;d<0&&(d+=2*Math.PI),f=i?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(l,c),this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:f,sweepFlag:u,endX:s,endY:_})),this.__currentPosition={x:s,y:_}}},n.prototype.clip=function(){var e=this.__closestGroupOrSvg(),r=this.__createElement("clipPath"),n=s(this.__ids),t=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),r.setAttribute("id",n),r.appendChild(this.__currentElement),this.__defs.appendChild(r),e.setAttribute("clip-path",o("url(#{id})",{id:n})),e.appendChild(t),this.__currentElement=t},n.prototype.drawImage=function(){var e,r,t,a,i,o,s,_,l,c,u,f,d,p=Array.prototype.slice.call(arguments),g=p[0],h=0,v=0;if(3===p.length)e=p[1],r=p[2],t=i=g.width,a=o=g.height;else if(5===p.length)e=p[1],r=p[2],t=p[3],a=p[4],i=g.width,o=g.height;else{if(9!==p.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);h=p[1],v=p[2],i=p[3],o=p[4],e=p[5],r=p[6],t=p[7],a=p[8]}s=this.__closestGroupOrSvg(),this.__currentElement;var m="translate("+e+", "+r+")";if(g instanceof n){if((_=g.getSvg().cloneNode(!0)).childNodes&&_.childNodes.length>1){for(l=_.childNodes[0];l.childNodes.length;)d=l.childNodes[0].getAttribute("id"),this.__ids[d]=d,this.__defs.appendChild(l.childNodes[0]);if(c=_.childNodes[1]){var w,k=c.getAttribute("transform");w=k?k+" "+m:m,c.setAttribute("transform",w),s.appendChild(c)}}}else"CANVAS"!==g.nodeName&&"IMG"!==g.nodeName||((u=this.__createElement("image")).setAttribute("width",t),u.setAttribute("height",a),u.setAttribute("opacity",this.globalAlpha),u.setAttribute("preserveAspectRatio","none"),(f=this.__document.createElement("canvas")).width=t,f.height=a,f.getContext("2d").drawImage(g,h,v,i,o,0,0,t,a),g=f,u.setAttribute("transform",m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===g.nodeName?g.toDataURL():g.getAttribute("src")),s.appendChild(u))},n.prototype.createPattern=function(e,r){var t,i=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),o=s(this.__ids);return i.setAttribute("id",o),i.setAttribute("width",e.width),i.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((t=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),i.appendChild(t),this.__defs.appendChild(i)):e instanceof n&&(i.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(i)),new a(i,this)},n.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=n),"object"==typeof e.exports&&(e.exports=n)}()}]);R=i("fOdIC");function Cu(){var e=Su(['\n  <div class="llm-html-error">\n    <b>🚨 LLM ERROR 🚨</b>\n    <pre>',"</pre>\n  </div>"]);return Cu=function(){return e},e}var Lu=r(m)("eczoodbjs.render_utils"),ju=sn,Nu=ze,Au={list_joiner:"",list_item_wrapper:function(e){return'<span class="paragraph-in-list">'.concat(e,"</span>")}};function Iu(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];var a,i=e.length-1,o=e.map((function(e,r){var n=e.replace(/>\n+ */g,">").replace(/\n+ *</g,"<");return 0===r?n.trimStart():r===i?n.trimEnd():n}));return(a=String).raw.apply(a,[{raw:o}].concat((0,R.default)(n)))}function Mu(e){var r=e.render_context;return{ne:fu,rdr:function(e){return uu(e,r,Au)},ref:function(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).display_llm,a=r.feature_render_manager("refs");return a.render_ref(e,n,null!=t?t:null,null,r)}}}function Tu(e){var r=e.zoo_llm_environment,n=e.render_doc,t=e.doc_metadata,a=e.render_endnotes,i=e.fragment_renderer,o=e.llm_error_policy,s=e.feature_document_options,_=e.feature_render_options;null!=o||(o="abort");var l={};null!=t&&(l.metadata=t),null!=s&&(l.feature_document_options=s),null!=i||(i=new au);var c=r.make_document(n,ju(l));try{var u=d(c.render(i,_),2),f=u[0],p=u[1];if(a){var g={endnotes_heading_title:"References",endnotes_heading_level:2};"object"==typeof a&&Object.assign(g,a);var h=p.feature_render_manager("endnotes").render_endnotes(ju(g));f=f.replace("<RENDER_ENDNOTES/>",h)}return f}catch(e){var v="<??>";try{v=e&&null!=e.__class__?Nu(e):""+e}catch(e){}if(console.error("\n🚨🚨🚨 LLM RENDERING ERROR 🚨🚨🚨\n\n"+v,e),"abort"===o)throw Lu("LLM Error & policy is 'abort', aborting compilation"),e;if("continue"==o)return Lu("Continuing despite LLM Error (llm_error_policy is 'continue')"),Iu(Cu(),v);throw new Error("Invalid llm_error_policy: ‘".concat(o,"’, ")+"expected 'abort' or 'continue'")}}function Du(){var e=Su(['\n  <span class="code-name" title="','">','</span>\n  <span class="code-introduced">',"</span>"]);return Du=function(){return e},e}function Ru(){var e=Su(['\n  <div class="kingdom-name">\n    <span class="kingdom-name-label">\n      This code defines the\n    </span>&nbsp;','</div>\n  <div class="kingdom-description">',"</div>"]);return Ru=function(){return e},e}function qu(){var e=Su(['\n  <div class="code-description">','</div>\n  <a class="code-link" href="','">go to code page →</a>']);return qu=function(){return e},e}function zu(){var e=Su(['\n  <a class="kingdom-link" href="','">go to kingdom page →</a>']);return zu=function(){return e},e}function Fu(){var e=Su(['\n  <div class="code-relations">\n    <span class="code-relation-type">',"</span>\n    <ul>","</ul>\n  </div>"]);return Fu=function(){return e},e}function Gu(){var e=Su(["\n  <RENDER_ENDNOTES/>"]);return Gu=function(){return e},e}function Bu(){var e=Su(['\n  <div class="domain-name">','</div>\n  <div class="domain-description">','</div>\n  <a class="domain-link" href="','">go to domain page →</a>\n  <div class="domain-kingdoms-list">\n    <p>Kingdoms:</p>\n    <ul>']);return Bu=function(){return e},e}function Uu(){var e=Su(["\n      <li>","</li>"]);return Uu=function(){return e},e}function Wu(){var e=Su(['\n      <div class="empty-info-pane">\n        <p>\n          Click on a node in the code graph\n          to display additional information here.\n        </p>\n        <p style="margin-top: 2em">Zoom into:</p>\n        <ul>']);return Wu=function(){return e},e}function Vu(){var e=Su(["\n          <li>","</li>"]);return Vu=function(){return e},e}function Hu(){var e=Su(["\n        </ul>\n      </div>\n"]);return Hu=function(){return e},e}var $u=r(m)("eczoo_jscomponents.codegraph.CodeGraphInformationPane");function Yu(e){var r=e.eczoodb,n=e.captureLinksToObjectTypes,t=r.zoo_llm_environment,a=(new au,new hu({llm_environment:t,llm_error_policy:"continue"})),i={get_ref:function(e,t,a){var i=r.zoo_llm_environment.ref_resolver.get_ref(e,t,a);return n.includes(e)?new ic(sn(Object.assign({},i.asdict(),{target_href:"jsCallbackRef:".concat(e,"/").concat(t)}))):null}};return{zoo_llm_environment:t,llm_simple_content:a,render:function(e){var r=Tu({zoo_llm_environment:t,render_doc:e,render_endnotes:{target_id:null,include_headings_at_level:!1,endnotes_heading_title:null,endnotes_heading_level:null},feature_render_options:{refs:{add_external_ref_resolvers:[i]}},llm_error_policy:"continue"});return $u("Got HTML: ",r),r}}}function Xu(e){var n=e.eczoodb,t=e.currentCodeSelected,a=e.currentDomainSelected,i=e.captureLinksToObjectTypes,o=e.onLinkToObjectActivated,_=e.displayInformationOptions;$u("In CodeGraphInformationPane ()",e),null!=i||(i=["code","domain","kingdom"]);var l=(0,Pu.useRef)(null),c=t||a,u=d((0,Pu.useState)({html:null,what:c}),2),f=u[0],g=u[1];return(0,Pu.useLayoutEffect)((function(){$u("layout effect. gonna gotta have to set up some html.");var e,r=(e=s((function(){var e,r,s,u,h,v,m,w,k,y,b,x,O,P;return p(this,(function(p){switch(p.label){case 0:return $u("setupHtmlContent()..."),null!=f.html&&f.what==c?[3,1]:($u("setupHtmlContent() ... gotta render some HTML here"),null!=t?(e=function(e){var r,n,t,a=e.eczoodb,i=e.code,o=e.displayInformationOptions,s=e.captureLinksToObjectTypes,_=Yu({eczoodb:a,captureLinksToObjectTypes:s}),l=_.llm_simple_content,c=_.render,u=(null!=o?o:{}).truncateDescriptionLength;null!=u||(u=700),$u("Rendering code information ...");var f,p=i.code_id,g=a.zoo_object_permalink("code",p),h=a.schemas.code,v=l.compile_llm(i.name,{object_type:"code",object_schema:h,object:i,fieldname:"name"}),m=l.compile_llm(i.introduced,{object_type:"code",object_schema:h,object:i,fieldname:"introduced"}),w=l.compile_llm(i.description,{object_type:"code",object_schema:h,object:i,fieldname:"description"}).truncate_to(u),k=null,y=null,b=null!==(f=null===(r=i.relations)||void 0===r||null===(n=r.defines_kingdom)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.kingdom)&&void 0!==f?f:null;if(null!=b){$u("code is a kingdom,",b);var x=a.schemas.kingdom;k=l.compile_llm(b.name,{object_type:"kingdom",object_schema:x,object:b,fieldname:"name"}),y=l.compile_llm(b.description,{object_type:"kingdom",object_schema:x,object:b,fieldname:"description"})}return c((function(e){var r,n,t,o,s,_,l,c,u=Mu({render_context:e}),f=(u.ne,u.rdr),h=u.ref,x="";if(x+=Iu(Du(),p,f(v),f(m)),null!=b&&(x+=Iu(Ru(),f(k),f(y))),x+=Iu(qu(),f(w),g),null!=b){var O=a.zoo_object_permalink("kingdom",b.kingdom_id);x+=Iu(zu(),O)}if(null!=i.relations)for(var P=0,E=[["Parent","Parents",null!==(s=null===(r=i.relations)||void 0===r?void 0:r.parents)&&void 0!==s?s:[]],["Child","Children",null!==(_=null===(n=i.relations)||void 0===n?void 0:n.parent_of)&&void 0!==_?_:[]],["Cousin","Cousins",[].concat(null!==(l=null===(t=i.relations)||void 0===t?void 0:t.cousins)&&void 0!==l?l:[],null!==(c=null===(o=i.relations)||void 0===o?void 0:o.cousin_of)&&void 0!==c?c:[])]];P<E.length;P++){var S=d(E[P],3),C=S[0],L=S[1],j=S[2];if(0!==j.length){var N=1===j.length?C:L,A=j.map((function(e){return"<li>"+h("code",e.code_id)+"</li>"})).join("");x+=Iu(Fu(),N,A)}}return x+Iu(Gu())}))}({eczoodb:n,displayInformationOptions:_,captureLinksToObjectTypes:i,code:t}),g({html:e,what:c})):null!=a?(r=function(e){var r=e.eczoodb,n=e.domain,t=Yu({eczoodb:r,captureLinksToObjectTypes:e.captureLinksToObjectTypes}),a=t.llm_simple_content,i=t.render;$u("Rendering domain information ...");var o=r.schemas.domain,s=a.compile_llm(n.name,{object_type:"domain",object_schema:o,object:n,fieldname:"name"}),_=a.compile_llm(n.description,{object_type:"domain",object_schema:o,object:n,fieldname:"description"}),l=r.zoo_object_permalink("domain",n.domain_id);return i((function(e){var r=Mu({render_context:e}),t=(r.ne,r.rdr),a=r.ref,i="";i+=Iu(Bu(),t(s),t(_),l);var o=!0,c=!1,u=void 0;try{for(var f,d=n.kingdoms[Symbol.iterator]();!(o=(f=d.next()).done);o=!0){var p=f.value.kingdom_id;i+=Iu(Uu(),a("kingdom",p))}}catch(e){c=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(c)throw u}}return i+"\n    </ul>\n  </div>"}))}({eczoodb:n,displayInformationOptions:_,captureLinksToObjectTypes:i,domain:a}),g({html:r,what:c})):(s=function(e){var r=e.eczoodb,n=e.captureLinksToObjectTypes,t=Yu({eczoodb:r,captureLinksToObjectTypes:n}),a=(t.llm_simple_content,t.render);return $u("Rendering empty pane information ..."),a((function(e){var n=Mu({render_context:e}),t=(n.ne,n.rdr,n.ref),a="";a+=Iu(Wu());var i=!0,o=!1,s=void 0;try{for(var _,l=Object.entries(r.objects.domain)[Symbol.iterator]();!(i=(_=l.next()).done);i=!0){var c=d(_.value,2),u=c[0];c[1],a+=Iu(Vu(),t("domain",u))}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return a+Iu(Hu())}))}({eczoodb:n,displayInformationOptions:_,captureLinksToObjectTypes:i}),$u("Gonna update panel html contents..."),g({html:s,what:c})),[3,4]);case 1:return null==(u=l.current)?[3,4]:null==window.MathJax?[3,3]:[4,window.MathJax.typesetPromise([u])];case 2:p.sent(),p.label=3;case 3:h=!0,v=!1,m=void 0;try{for(w=u.querySelectorAll("a")[Symbol.iterator]();!(h=(k=w.next()).done);h=!0)y=k.value,b=y.getAttribute("href"),null!=(x=/^jsCallbackRef:([^\/]+)\/(.*)$/.exec(b))&&(O=x[1],P=x[2],y.addEventListener("click",(function(){o(O,P)})),y.removeAttribute("href",""),y.style.cursor="pointer")}catch(e){v=!0,m=e}finally{try{h||null==w.return||w.return()}finally{if(v)throw m}}p.label=4;case 4:return[2]}}))})),function(){return e.apply(this,arguments)});r()}),[f,t,a]),r(Pu).createElement("div",{className:"CodeGraphInformationPane",ref:l,dangerouslySetInnerHTML:{__html:f.html}})}var Ju=r(m)("eczoo_jscomponents.codegraph.ui");cytoscape.use(r(Eu));function Zu(e){var n=e.eczCodeGraph,t=e.domainColoring,a=e.onChangeDomainColoring,i=e.cousinEdgesShown,o=e.onChangeCousinEdgesShown,s=e.secondaryParentEdgesShown,_=e.onChangeSecondaryParentEdgesShown,l=e.displayModeWithOptions,c=e.onChangeDisplayModeWithOptions,u=n.cy,f=d((0,Pu.useState)(u.zoom()),2),p=f[0],g=f[1];(0,Pu.useEffect)((function(){p!=u.zoom()&&u.zoom({level:p,renderedPosition:{x:u.width()/2,y:u.height()/2}})}),[p]);var h=d((0,Pu.useState)(l.modeIsolateNodesOptions.range.parents.primary),2),v=h[0],m=h[1];(0,Pu.useEffect)((function(){c({modeIsolateNodesOptions:{range:{parents:{primary:Math.round(v)},children:{primary:Math.round(v/2)}}}})}),[v]);var w=d((0,Pu.useState)(0!==l.modeIsolateNodesOptions.range.parents.secondary),2),k=w[0],y=w[1];(0,Pu.useEffect)((function(){var e=k?1:0;c({modeIsolateNodesOptions:{range:{parents:{secondary:e},children:{secondary:e}}}})}),[k]);var b=d((0,Pu.useState)(""),2),x=b[0],O=b[1];(0,Pu.useEffect)((function(){if(u.nodes().removeClass(["highlight","dimmed"]),""!==x){var e=u.nodes("[label @*= ".concat(JSON.stringify(x),"]"));e.addClass("highlight"),u.stop(),u.animate({fit:{eles:e},duration:80}),u.elements().not(".highlight").addClass("dimmed")}}),[x]);var P="viewport",E=function(e){u.zoom()!=p&&g(u.zoom())};(0,Pu.useEffect)((function(){return u.on(P,E),function(){u.removeListener(P,E)}}),[n]);var S=function(e){var r=n.cy.svg(e),t=window.document.createElement("a");t.setAttribute("href","data:image/svg+xml;base64,"+btoa(r)),t.setAttribute("download","Error_Correction_Zoo_Code_Graph.svg"),t.click()};return r(Pu).createElement("div",{className:"EczCodeGraphControlsComponent"},r(Pu).createElement("div",null,r(Pu).createElement("input",{type:"range",min:-2.3,max:2.3,step:.01,value:Math.log(p),onChange:function(e){return r=Math.exp(parseFloat(e.target.value)),void g(r);var r}}),r(Pu).createElement("button",{onClick:function(){g(1.2*p)}},"+"),r(Pu).createElement("button",{onClick:function(){g(p/1.2)}},"-"),r(Pu).createElement("button",{onClick:function(){var e=u.nodes();if("all"===l.displayMode);else{if("isolate-nodes"!==l.displayMode)throw new Error("can't center, don't know display mode = ",l);e=u.collection();var r=!0,n=!1,t=void 0;try{for(var a,i=l.modeIsolateNodesOptions.nodeIds[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var o=a.value;e.merge(u.getElementById(o))}}catch(e){n=!0,t=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw t}}}u.animate({center:{eles:e}},{duration:200})}},"center"),r(Pu).createElement("button",{onClick:function(){u.animate({fit:!0}),g(u.zoom())}},"fit")),r(Pu).createElement("div",null,r(Pu).createElement("input",{type:"checkbox",id:"input_domainColoring",checked:t,onChange:function(e){return a(!!e.target.checked)}}),r(Pu).createElement("label",{for:"input_domainColoring"},"domain colors"),r(Pu).createElement("input",{type:"checkbox",id:"input_cousinEdgesShown",checked:i,onChange:function(e){return o(!!e.target.checked)}}),r(Pu).createElement("label",{for:"input_cousinEdgesShown"},"cousins"),r(Pu).createElement("input",{type:"checkbox",id:"input_secondaryParentEdgesShown",checked:s,onChange:function(e){return _(!!e.target.checked)}}),r(Pu).createElement("label",{for:"input_secondaryParentEdgesShown"},"secondary parents")),r(Pu).createElement("div",null,r(Pu).createElement("div",null,r(Pu).createElement("button",{disabled:"isolate-nodes"!==l.displayMode,onClick:function(){c({displayMode:"all"})}},"back"),r(Pu).createElement("button",{disabled:"isolate-nodes"!==l.displayMode,onClick:function(){c({modeIsolateNodesOptions:{redoLayout:!0}})}},"relayout"),r(Pu).createElement("span",null," "),r(Pu).createElement("label",{for:"input_modeIsolateNodesDisplayRange"},"tree:"),r(Pu).createElement("input",{type:"range",id:"input_modeIsolateNodesDisplayRange",disabled:"isolate-nodes"!==l.displayMode,min:0,max:16,step:1,value:v,onChange:function(e){return m(parseFloat(e.target.value))}})),r(Pu).createElement("div",null,r(Pu).createElement("input",{type:"checkbox",id:"input_modeIsolateNodesAddSecondary",disabled:"isolate-nodes"!==l.displayMode,checked:k,onChange:function(e){return y(!!e.target.checked)}}),r(Pu).createElement("label",{for:"input_modeIsolateNodesAddSecondary"},"expand with secondary step"))),r(Pu).createElement("div",null,r(Pu).createElement("input",{type:"text",id:"input_searchGraphNodes",placeholder:"search",value:x,onChange:function(e){return r=e.target.value,void O(r);var r}}),r(Pu).createElement("button",{onClick:function(){O("")}},"clear")),r(Pu).createElement("button",{onClick:function(){return S({full:!0})}},"SVG full"),r(Pu).createElement("button",{onClick:function(){return S({full:!1})}},"SVG snapshot"))}function Ku(e){var n,t,a,i,o=e.eczCodeGraph,_=e.matchWebPageFonts,l=e.onLayoutDone,c=o.eczoodb,u=(0,Pu.useRef)(null),f=(0,Pu.useRef)(null),g=d((0,Pu.useState)(!1),2),h=g[0],v=g[1],m={};n=d((0,Pu.useState)(o.domainColoring()),2),m.domainColoring=n[0],m.setDomainColoring=n[1],(0,Pu.useEffect)((function(){o.setDomainColoring(m.domainColoring)}),[m.domainColoring]),t=d((0,Pu.useState)(o.cousinEdgesShown()),2),m.cousinEdgesShown=t[0],m.setCousinEdgesShown=t[1],(0,Pu.useEffect)((function(){o.setCousinEdgesShown(m.cousinEdgesShown)}),[m.cousinEdgesShown]),a=d((0,Pu.useState)(o.secondaryParentEdgesShown()),2),m.secondaryParentEdgesShown=a[0],m.setSecondaryParentEdgesShown=a[1],(0,Pu.useEffect)((function(){o.setSecondaryParentEdgesShown(m.secondaryParentEdgesShown)}),[m.secondaryParentEdgesShown]),i=d((0,Pu.useState)({displayMode:o.displayMode(),modeIsolateNodesOptions:o.modeIsolateNodesOptions()}),2),m.displayModeWithOptions=i[0],m.setDisplayModeWithOptions=i[1],(0,Pu.useEffect)((function(){var e,r=(e=s((function(){return p(this,(function(e){switch(e.label){case 0:return Ju("Updating graph's displayMode&Options -> ",m.displayModeWithOptions),o.setDisplayMode(m.displayModeWithOptions.displayMode,m.displayModeWithOptions),[4,o.layout({animate:!0})];case 1:return e.sent(),null==l||l(),[2]}}))})),function(){return e.apply(this,arguments)});r()}),[m.displayModeWithOptions]);var w=function(e){var n=e.nodeId,t=e.codeId,a=e.kingdomId,i=e.domainId;if(e.background)m.setDisplayModeWithOptions(r(D).merge({},m.displayModeWithOptions,{displayMode:"all"}));else{i&&(n=o.getNodeIdDomain(i)),a&&(t=c.objects.kingdom[a].kingdom_code.code_id),t&&(n=o.getNodeIdCode(t)),m.setDisplayModeWithOptions(r(D).merge({},m.displayModeWithOptions,{displayMode:"isolate-nodes",modeIsolateNodesOptions:{nodeIds:[n],redoLayout:!1}}));var s=o.cy,_=s.getElementById(n),l=_.renderedPosition();(l.x<0||l.y<0||l.x>s.width()||l.y>s.height())&&s.animate({center:{eles:_}},{duration:400})}};(0,Pu.useLayoutEffect)((function(){h||(o.mountInDom(u.current,{matchWebPageFonts:_,window:window}),o.cy.on("tap",(function(e){var r=e.target;if(Ju("Tap! eventTarget = ",r),!r||!r.isNode)return Ju("Unknown or non-node tap target."),void w({background:!0});if(r.isEdge()){var n=o.cy;n.animate({fit:{eles:r,padding:Math.min(n.width(),n.height())/6}})}else{if(r.isNode()){var t=r;return Ju("Tapped node ".concat(t.id())),void w({nodeId:t.id()})}Ju("Unknown click target ??!")}})),o.layout({animate:!0}).then((function(){return v(!0)})))})),(0,Pu.useEffect)((function(){if(h){m.displayModeWithOptions.displayMode;Ju("effect hook for diplayModeWithOptions",m.displayModeWithOptions),o.setDisplayMode(m.displayMode,m.displayModeWithOptions),o.layout()}}),[m.diplayModeWithOptions]),Ju("Rendering components. displayModeWithOptions=",m.displayModeWithOptions);var k=null,y=null;if("isolate-nodes"===m.displayModeWithOptions.displayMode){var b=m.displayModeWithOptions.modeIsolateNodesOptions.nodeIds;if(b&&1===b.length){var x=b[0],O=o.cy.getElementById(x).data()._codeId,P=o.cy.getElementById(x).data()._domainId;null!=O&&(k=c.objects.code[O]),null!=P&&(y=c.objects.domain[P])}}return r(Pu).createElement("div",{className:"EczCodeGraphComponent"},r(Pu).createElement("div",{ref:f,className:"EczCodeGraphComponent_CyPanel"},r(Pu).createElement("div",{ref:u,className:"EczCodeGraphComponent_Cy"})),r(Pu).createElement("div",{className:"EczCodeGraphComponent_SidePanel"},r(Pu).createElement(Zu,{eczCodeGraph:o,displayModeWithOptions:m.displayModeWithOptions,onChangeDisplayModeWithOptions:function(e){Ju("request to set display options -> ",e),m.setDisplayModeWithOptions(r(D).merge({},m.displayModeWithOptions,e))},domainColoring:m.domainColoring,onChangeDomainColoring:m.setDomainColoring,cousinEdgesShown:m.cousinEdgesShown,onChangeCousinEdgesShown:m.setCousinEdgesShown,secondaryParentEdgesShown:m.secondaryParentEdgesShown,onChangeSecondaryParentEdgesShown:m.setSecondaryParentEdgesShown}),r(Pu).createElement(Xu,{eczoodb:c,currentCodeSelected:k,currentDomainSelected:y,captureLinksToObjectTypes:["code","domain","kingdom"],onLinkToObjectActivated:function(e,r){if("code"===e)w({codeId:r});else if("kingdom"===e)w({kingdomId:r});else{if("domain"!==e)throw new Error("I don't know what to do with click on ".concat(object_type));w({domainId:r})}}})))}function Qu(e){return new ae}var ef=r(m)("eczoodbjs.use_llm_environment");function rf(e){var r,n=new pc(null!==(r=e.config.zoo_llm_environment_options)&&void 0!==r?r:{});return n.ref_resolver.target_href_resolver=function(r,n){return function(e,r,n){var t,a,i=n.zoo_object_permalink,o=null!=e?e:{},s=o.target_href,_=o.ref_type,l=o.ref_label;if(null!=s){var c=new URL(s);if("zoodbobjectref:"==c.protocol){var u=d(-1==(a=(t=c.pathname.replace(/^\/+/,"")).indexOf(":"))?[null,t]:[t.slice(0,a),t.slice(a+1)],2);return i(u[0],u[1])+c.hash}return s}throw new Error("Cannot resolve link reference to ‘".concat(_,":").concat(l,"’"))}(r,0,{zoo_object_permalink:e.zoo_object_permalink})},e.config.llm_allow_unresolved_references&&n.feature_refs.add_external_ref_resolver({get_ref:function(e,r,n,t){return ef("Default ref_resolver called for invalid reference "+"‘".concat(e,":").concat(r,"’")),ic(e,r,"<??>",null)}}),e.config.llm_allow_unresolved_citations&&n.feature_citations.add_external_citations_provider({get_citation_full_text_llm:function(e,r,n){return ef("Note: unresolved citation ‘".concat(e,":").concat(r,"’")),"\\begin{verbatimtext}".concat(e,":").concat(r,"\\end{verbatimtext}")}}),n.graphics_collection.src_url_resolver=function(r,n){return{src_url:e.config.zoo_graphics_resource_permalink(r),srcset:undefined}},e.$$kw=sn,n}function nf(e,r){if("code"===e)return"/c/".concat(r);if("domain"===e)return"/domain/".concat(r);if("kingdom"===e)return"/kingdom/".concat(r);if("user"===e)return"/team#u-".concat(r);if("codelist"===e)return"all"===r?"/all":"/list/".concat(r);throw new Error("Unknown object type ‘".concat(e,"’"))}var tf,af=r(m)("zoodb._zoodb"),of=function(){"use strict";function e(r){var n=r.processors;I(this,e),this.processors=null!=n?n:[],this.processors_initialized=!1;var t=!0,a=!1,i=void 0;try{for(var o,s=this.processors[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){o.value.install_zoo(this)}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}this.raw_data_db={}}return T(e,[{key:"schema",value:function(e){if(!this.db.schemas.hasOwnProperty(e))throw new Error("No zoo schema associated with object type ‘".concat(e,"’"));return this.db.schemas[e]}},{key:"object_types",get:function(){return Object.keys(this.db.objects)}},{key:"schemas",get:function(){return this.db.schemas}},{key:"objects",get:function(){return this.db.objects}},{key:"data_dump",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={db:this.db},n=!0,t=!1,a=void 0;try{for(var i,o=Array.from(this.processors).reverse()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;r=s.process_data_dump(r,e)}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}return r}},{key:"raw_data_db_dump",value:function(){return{db:this.raw_data_db}}},{key:"load_data",value:function(e){var r=this;return s((function(){var n,t,a,i,o,s,_,l,c,u,f;return p(this,(function(d){switch(d.label){case 0:if(af("zoodb load_data"),!e||"object"!=typeof e.schemas||"object"!=typeof e.objects)throw new Error("Invalid zoo DB data, expected db.schemas and db.objects to be objects, got "+"db=".concat(e));for(var p in e.objects)if(null==e.schemas[p])throw new Error("Zoo DB data does not have schema for objects of type ‘".concat(p,"’"));if(r.db=Object.assign({},e),r._object_types=Object.keys(e.objects),r.raw_data_db=JSON.parse(JSON.stringify(r.db)),r.processors_initialized)return[3,8];r.processors_initialized=!0,n=!0,t=!1,a=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),i=r.processors[Symbol.iterator](),d.label=2;case 2:return(n=(o=i.next()).done)?[3,5]:[4,o.value.initialize_zoo()];case 3:d.sent(),d.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return f=d.sent(),t=!0,a=f,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw a}return[7];case 8:s=!0,_=!1,l=void 0,d.label=9;case 9:d.trys.push([9,14,15,16]),c=r.processors[Symbol.iterator](),d.label=10;case 10:return(s=(u=c.next()).done)?[3,13]:[4,u.value.process_zoo()];case 11:d.sent(),d.label=12;case 12:return s=!0,[3,10];case 13:return[3,16];case 14:return f=d.sent(),_=!0,l=f,[3,16];case 15:try{s||null==c.return||c.return()}finally{if(_)throw l}return[7];case 16:return af("zoodb load_data done."),[2]}}))}))()}},{key:"update_objects",value:function(e){var r=this;return s((function(){var n,t,a,i,o,s,_,l,c,u,f,g,h,v,m,w,k,y,b,x,O,P,E,S,C,L,j,N,A,I,M,T,D,R,q,z,F,G,B,U,W,V;return p(this,(function(p){switch(p.label){case 0:n=!0,t=!1,a=void 0,i=!0,o=!1,s=void 0;try{for(_=Object.entries(e)[Symbol.iterator]();!(i=(l=_.next()).done);i=!0){c=d(l.value,2),u=c[0],f=c[1];try{for(g=Object.entries(f)[Symbol.iterator]();!(n=(h=g.next()).done);n=!0)v=d(h.value,2),m=v[0],v[1],r.raw_data_db.objects[u][m]=JSON.parse(JSON.stringify(e[u][m]))}catch(e){t=!0,a=e}finally{try{n||null==g.return||g.return()}finally{if(t)throw a}}}}catch(e){o=!0,s=e}finally{try{i||null==_.return||_.return()}finally{if(o)throw s}}w=!0,k=!1,y=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),b=r.processors[Symbol.iterator](),p.label=2;case 2:return(w=(x=b.next()).done)?[3,5]:[4,x.value.prepare_zoo_update_objects(e)];case 3:p.sent(),p.label=4;case 4:return w=!0,[3,2];case 5:return[3,8];case 6:return V=p.sent(),k=!0,y=V,[3,8];case 7:try{w||null==b.return||b.return()}finally{if(k)throw y}return[7];case 8:O=!0,P=!1,E=void 0,S=!0,C=!1,L=void 0;try{for(j=Object.entries(e)[Symbol.iterator]();!(S=(N=j.next()).done);S=!0){A=d(N.value,2),I=A[0],M=A[1];try{for(T=Object.entries(M)[Symbol.iterator]();!(O=(D=T.next()).done);O=!0)R=d(D.value,2),q=R[0],z=R[1],r.update_object(r.db.objects[I],q,z)}catch(e){P=!0,E=e}finally{try{O||null==T.return||T.return()}finally{if(P)throw E}}}}catch(e){C=!0,L=e}finally{try{S||null==j.return||j.return()}finally{if(C)throw L}}F=!0,G=!1,B=void 0,p.label=9;case 9:p.trys.push([9,14,15,16]),U=r.processors[Symbol.iterator](),p.label=10;case 10:return(F=(W=U.next()).done)?[3,13]:[4,W.value.process_zoo_update_objects(e)];case 11:p.sent(),p.label=12;case 12:return F=!0,[3,10];case 13:return[3,16];case 14:return V=p.sent(),G=!0,B=V,[3,16];case 15:try{F||null==U.return||U.return()}finally{if(G)throw B}return[7];case 16:return[2]}}))}))()}},{key:"update_object",value:function(e,r,n){e[r]=n}}]),e}(),sf=r(m)("eczoodbjs"),_f=function(e){"use strict";G(n,e);var r=Y(n);function n(e){var t;I(this,n);var a={};a.config=Object.assign({continue_with_errors:!1,use_relations_populator:null,use_llm_environment:null,zoo_llm_environment_options:null,llm_allow_unresolved_references:!1,llm_allow_unresolved_citations:!1,use_llm_processor:null,llm_processor_graphics_path_resource_retriever:null,fs:null,llm_processor_citations_override_arxiv_dois_file:"code_extras/override_arxiv_dois.yml",llm_processor_citations_preset_bibliography_files:["code_extras/bib_preset.yml"],llm_processor_graphics_resources_fs_data_dir:null,use_searchable_text_processor:null,zoo_object_permalink:nf,zoo_graphics_resource_permalink:function(e){return"/fig/".concat(e.src_url)},zoo_graphics_resource_image_max_zoom_factor:2,resource_file_extensions:null},e),a.zoo_object_permalink=a.config.zoo_object_permalink,a.zoo_llm_environment=null,a.config.use_llm_environment&&(a.zoo_llm_environment=a.config.use_llm_environment(a)),a.zoodb_processors=[],a.config.use_relations_populator?(a.zoo_relations_populator=a.config.use_relations_populator(a),a.zoodb_processors.push(a.zoo_relations_populator)):a.zoo_relations_populator=null,a.llm_error_policy=a.config.continue_with_errors?"continue":"abort",sf("llm_error_policy = ".concat(a.llm_error_policy)),a.zoo_llm_processor=null,a.config.use_llm_processor&&(a.zoo_llm_processor=a.config.use_llm_processor(a),a.zoodb_processors.push(a.zoo_llm_processor)),a.searchable_text_processor=null,a.config.use_searchable_text_processor&&(a.searchable_text_processor=a.config.use_searchable_text_processor(a),a.zoodb_processors.push(a.searchable_text_processor)),t=r.call(this,{processors:a.zoodb_processors});var i=!0,o=!1,s=void 0;try{for(var _,l=Object.entries(a)[Symbol.iterator]();!(i=(_=l.next()).done);i=!0){var c=d(_.value,2),u=c[0],f=c[1];t[u]=f}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return t}return T(n,[{key:"user_earliest_contribution",value:function(e){if(!e.zoo_contributions||!e.zoo_contributions.code)return null;var r=null,n=!0,t=!1,a=void 0;try{for(var i,o=e.zoo_contributions.code[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,_=new Date(s.date);(null===r||_-r<0)&&(r=_)}}catch(e){t=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw a}}return r}},{key:"code_short_name",value:function(e){if(null!=e.short_name&&""!==e.short_name)return e.short_name;var r=e.name,n=null;return this.config.use_llm_processor&&(r=r.llm_text),r.endsWith(" code")&&(n=r.slice(0,-5)),null!==n?this.config.use_llm_processor?this.zoo_llm_environment.make_fragment(n,this.$$kw({what:"".concat(e.name.what," (short)"),resource_info:e._zoodb.resource_info,standalone_mode:!0})):n:e.name}},{key:"code_visit_relations",value:function(e,r){var n=r.relation_properties,t=r.callback,a=r.only_first_relation,i=r.predicate_relation,o=[e],s={};for(s[e.code_id]=!0;o.length;){var _=o.shift();if(!0===t(_))return;var l=!0,c=!1,u=void 0;try{for(var f,d=n[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=f.value;if(_.relations&&_.relations[p]){var g=_.relations[p];a&&(g=g.slice(0,1));var h=!0,v=!1,m=void 0;try{for(var w,k=g[Symbol.iterator]();!(h=(w=k.next()).done);h=!0){var y=w.value;if(null==i||!i(_,y)){var b=y.code_id;s[b]||(s[b]=!0,o.push(this.objects.code[b]))}}}catch(e){v=!0,m=e}finally{try{h||null==k.return||k.return()}finally{if(v)throw m}}}}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}},{key:"code_is_descendant_of",value:function(e,r){var n=!1;return this.code_visit_relations(e,{relation_properties:["parents"],callback:function(e){if(e.code_id===r)return n=!0,!0}}),n}},{key:"code_is_cousin_of",value:function(e,r){var n=!1;return this.code_visit_relations(e,{relation_properties:["cousins","cousin_of"],callback:function(e){if(e.code_id===r)return n=!0,!0}}),n}},{key:"code_parent_domains",value:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).find_domain_id,n=Object.fromEntries(Object.entries(this.objects.kingdom).map((function(e){var r=d(e,2),n=(r[0],r[1]);return[n.kingdom_code.code_id,n.parent_domain]})));return this.code_visit_relations(e,{relation_properties:["parents"],callback:function(e){var t=n[e.code_id];if(void 0!==t&&domains.push(t),null!=r&&t.domain_id===r)return!0}}),domains}},{key:"code_get_family_tree",value:function(e){var r=[];return this.code_visit_relations(e,{relation_properties:["parent_of"],callback:function(e){r.push(e)}}),r}}]),n}(of);tf=ReactDOM;var lf=r(m)("eczoo_site.jscomponents.codegraph.setup");window.addEventListener("load",s((function(){var e,n,t,a,i,o,s,_,l,c,u,f,g,h,v,m,w;return p(this,(function(p){switch(p.label){case 0:return lf("setup code graph!"),(t=window.document.getElementById("main")).innerHTML="loading …",i=null!==(a=t.dataset.eczoodbDataUrl)&&void 0!==a?a:"/dat/eczoodata.json",s=null!==(o=t.dataset.eczoodbRefsDataUrl)&&void 0!==o?o:"/dat/eczoorefsdata.json",_=null===(e=window.eczData)||void 0===e?void 0:e.eczoodbData,l=null===(n=window.eczData)||void 0===n?void 0:n.eczoodbRefsData,_?[3,2]:(lf("Downloading the zoo graph data..."),c=fetch(i).then((function(e){return e.json()})),u=fetch(s).then((function(e){return e.json()})),[4,Promise.all([c,u])]);case 1:f=d.apply(void 0,[p.sent(),2]),_=f[0],l=f[1],p.label=2;case 2:return(g=new _f({use_relations_populator:Qu,use_llm_environment:rf,use_llm_processor:!1,llm_allow_unresolved_references:!0,use_searchable_text_processor:!1,fs:null})).zoo_llm_environment.ref_resolver.load_database(l.refs),g.zoo_llm_environment.citations_provider.load_database(l.citations),[4,g.load_data(_.db)];case 3:return p.sent(),h={},v=window.location.hash,lf({hrefFragment:v}),null!=v&&r(D).merge(h,function(e){var r=null,n=/^#code_(.*)$/.exec(e);if(null!=n){var t=n[1];lf("Gonna highlight code ".concat(t)),r=wu.getNodeIdCode(t)}var a=/^#domain_(.*)$/.exec(e);if(null!=a){var i=a[1];lf("Gonna highlight domain ".concat(i)),r=wu.getNodeIdDomain(i)}if(null!=r)return{displayMode:"isolate-nodes",modeIsolateNodesOptions:{nodeIds:[r],redoLayout:!0,range:{parents:{primary:5,secondary:1},children:{primary:2,secondary:1}}}}}(v)),[4,(m=new wu({eczoodb:g,displayOptions:h})).initialize()];case 4:return p.sent(),window.eczCodeGraph=m,lf("Graph initialized."),w=(0,tf.createRoot)(t),[4,new Promise((function(e){w.render(r(Pu).createElement(Ku,{eczCodeGraph:m,onLayoutDone:function(){return e()}},null))}))];case 5:return p.sent(),lf("Layout done."),[2]}}))})))}();
//# sourceMappingURL=setup.js.map
