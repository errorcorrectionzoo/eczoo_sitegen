"use strict";
var e=globalThis;function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var n={},_={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in _){var t=_[e];delete _[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){_[e]=t},e.parcelRequire94c2=a);var i=a.register;i("3krpC",(function(e,t){var r=a("4bJEF");t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,_=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(_=n))})),t.splice(_,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=void 0);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=a("lrRFl")(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),i("4bJEF",(function(e,t){var r,n,_=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var l,s=[],c=!1,u=-1;function f(){c&&l&&(c=!1,l.length?s=l.concat(s):u=-1,s.length&&d())}function d(){if(!c){var e=o(f);c=!0;for(var t=s.length;t;){for(l=s,s=[];++u<t;)l&&l[u].run();u=-1,t=s.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}_.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new h(e,t)),1!==s.length||c||o(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=p,_.addListener=p,_.once=p,_.off=p,_.removeListener=p,_.removeAllListeners=p,_.emit=p,_.prependListener=p,_.prependOnceListener=p,_.listeners=function(e){return[]},_.binding=function(e){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(e){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}})),i("lrRFl",(function(e,t){e.exports=function(e){function t(e){let n,_,a,i=null;function o(...e){if(!o.enabled)return;const r=o,_=Number(new Date),a=_-(n||_);r.diff=a,r.prev=n,r.curr=_,n=_,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,_)=>{if("%%"===n)return"%";i++;const a=t.formatters[_];if("function"==typeof a){const t=e[i];n=a.call(r,t),e.splice(i,1),i--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(_!==t.namespaces&&(_=t.namespaces,a=t.enabled(e)),a),set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e,t){let r=0,n=0,_=-1,a=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(_=n,a=r,n++):(r++,n++);else{if(-1===_)return!1;n=_+1,a++,r=a}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(n(e,r))return!1;for(const r of t.names)if(n(e,r))return!0;return!1},t.humanize=a("620kE"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}})),i("620kE",(function(e,t){var r=1e3,n=6e4,_=36e5,a=864e5,i=6048e5,o=315576e5;function l(e,t,r,n){var _=t>=1.5*r;return Math.round(e/r)+" "+n+(_?"s":"")}e.exports=function(e,t){t=t||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*a;case"hours":case"hour":case"hrs":case"hr":case"h":return l*_;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return t.long?(s=e,(c=Math.abs(s))>=a?l(s,c,a,"day"):c>=_?l(s,c,_,"hour"):c>=n?l(s,c,n,"minute"):c>=r?l(s,c,r,"second"):s+" ms"):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=_?Math.round(e/_)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}})),i("4N7g8",(function(e,t){var r=a("kLIqa"),n=t&&!t.nodeType&&t,_=n&&e&&!e.nodeType&&e,i=_&&_.exports===n?r.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=o?o(r):new e.constructor(r);return e.copy(n),n}})),i("kLIqa",(function(e,t){var r=a("30lt2"),n="object"==typeof self&&self&&self.Object===Object&&self,_=r||n||Function("return this")();e.exports=_})),i("30lt2",(function(t,r){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n})),i("4a4bO",(function(e,t){var r=a("kLIqa"),n=a("jVrpd"),_=t&&!t.nodeType&&t,i=_&&e&&!e.nodeType&&e,o=i&&i.exports===_?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||n;e.exports=l})),i("jVrpd",(function(e,t){e.exports=function(){return!1}})),i("3tQok",(function(e,t){var r=a("30lt2"),n=t&&!t.nodeType&&t,_=n&&e&&!e.nodeType&&e,i=_&&_.exports===n&&r.process,o=function(){try{var e=_&&_.require&&_.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),i("hoVWB",(function(e,r){t(e.exports,"__nest__",(()=>a)),t(e.exports,"__get__",(()=>i)),t(e.exports,"__getcm__",(()=>o)),t(e.exports,"object",(()=>s)),t(e.exports,"__class__",(()=>c)),t(e.exports,"__call__",(()=>u)),t(e.exports,"__kwargtrans__",(()=>f)),t(e.exports,"__super__",(()=>d)),t(e.exports,"Exception",(()=>Re)),t(e.exports,"property",(()=>h)),t(e.exports,"assert",(()=>g)),t(e.exports,"__mergekwargtrans__",(()=>v)),t(e.exports,"hasattr",(()=>b)),t(e.exports,"dir",(()=>m)),t(e.exports,"setattr",(()=>y)),t(e.exports,"getattr",(()=>w)),t(e.exports,"__in__",(()=>k)),t(e.exports,"len",(()=>P)),t(e.exports,"py_typeof",(()=>S)),t(e.exports,"dict",(()=>fe)),t(e.exports,"IndexError",(()=>Ue)),t(e.exports,"KeyError",(()=>ze)),t(e.exports,"__t__",(()=>O)),t(e.exports,"float",(()=>E)),t(e.exports,"ValueError",(()=>Be)),t(e.exports,"str",(()=>J)),t(e.exports,"int",(()=>A)),t(e.exports,"__mul__",(()=>pe)),t(e.exports,"bool",(()=>C)),t(e.exports,"isinstance",(()=>N)),t(e.exports,"callable",(()=>L)),t(e.exports,"repr",(()=>M)),t(e.exports,"chr",(()=>I)),t(e.exports,"ord",(()=>j)),t(e.exports,"max",(()=>R)),t(e.exports,"StopIteration",(()=>Fe)),t(e.exports,"py_iter",(()=>B)),t(e.exports,"list",(()=>X)),t(e.exports,"py_next",(()=>z)),t(e.exports,"py_reversed",(()=>U)),t(e.exports,"zip",(()=>G)),t(e.exports,"any",(()=>W)),t(e.exports,"all",(()=>$)),t(e.exports,"enumerate",(()=>Y)),t(e.exports,"set",(()=>K)),t(e.exports,"tuple",(()=>Z)),t(e.exports,"py_TypeError",(()=>We)),t(e.exports,"__mod__",(()=>de)),t(e.exports,"__neg__",(()=>he)),t(e.exports,"__floordiv__",(()=>ge)),t(e.exports,"__add__",(()=>ve)),t(e.exports,"__sub__",(()=>me)),t(e.exports,"__lshift__",(()=>ye)),t(e.exports,"__and__",(()=>we)),t(e.exports,"__eq__",(()=>be)),t(e.exports,"__ne__",(()=>ke)),t(e.exports,"__lt__",(()=>xe)),t(e.exports,"__le__",(()=>Pe)),t(e.exports,"__gt__",(()=>Oe)),t(e.exports,"__ge__",(()=>Ee)),t(e.exports,"__imul__",(()=>Ae)),t(e.exports,"__iadd__",(()=>Ce)),t(e.exports,"__isub__",(()=>Se)),t(e.exports,"__ior__",(()=>Te)),t(e.exports,"__getitem__",(()=>Ne)),t(e.exports,"__setitem__",(()=>Le)),t(e.exports,"__getslice__",(()=>Me)),t(e.exports,"__setslice__",(()=>Ie)),t(e.exports,"NotImplementedError",(()=>Ve)),t(e.exports,"AttributeError",(()=>Ge)),t(e.exports,"sorted",(()=>He)),t(e.exports,"map",(()=>Xe));var n="org.transcrypt.__runtime__",_={};function a(e,t,r){var n=e;if(""!=t){for(var _=t.split("."),a=_.length,i=0;i<_.length;i++){if(!n.hasOwnProperty(_[i])){a=i;break}n=n[_[i]]}for(i=a;i<_.length;i++)n[_[i]]={},n=n[_[i]]}for(let e of Object.getOwnPropertyNames(r))Object.defineProperty(n,e,{get:()=>r[e],enumerable:!0,configurable:!0})}function i(e,t,r){return e&&(e.hasOwnProperty("__class__")||"string"==typeof e||e instanceof String)?(r&&Object.defineProperty(e,r,{value:function(){var r=[].slice.apply(arguments);return t.apply(null,[e].concat(r))},writable:!0,enumerable:!0,configurable:!0}),function(){var r=[].slice.apply(arguments);return t.apply(null,[e.__proxy__?e.__proxy__:e].concat(r))}):t}function o(e,t,r){return e.hasOwnProperty("__class__")?function(){var r=[].slice.apply(arguments);return t.apply(null,[e.__class__].concat(r))}:function(){var r=[].slice.apply(arguments);return t.apply(null,[e].concat(r))}}_.interpreter_name="python",_.transpiler_name="transcrypt",_.executor_name=_.transpiler_name,_.transpiler_version="3.9.0";var l={__name__:"type",__bases__:[],__new__:function(e,t,r,n){for(var _=function(){var e=[].slice.apply(arguments);return _.__new__(e)},a=r.length-1;a>=0;a--){var i=r[a];for(var o in i){null!=(l=Object.getOwnPropertyDescriptor(i,o))&&Object.defineProperty(_,o,l)}for(let e of Object.getOwnPropertySymbols(i)){let t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(_,e,t)}}for(var o in _.__metaclass__=e,_.__name__=t.startsWith("py_")?t.slice(3):t,_.__bases__=r,n){var l=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(_,o,l)}for(let e of Object.getOwnPropertySymbols(n)){let t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(_,e,t)}return _}};l.__metaclass__=l;var s={__init__:function(e){},__metaclass__:l,__name__:"object",__bases__:[],__new__:function(e){var t=Object.create(this,{__class__:{value:this,enumerable:!0}});return("__getattr__"in this||"__setattr__"in this)&&(t.__proxy__=new Proxy(t,{get:function(e,t){let r=e[t];return null==r?e.__getattr__(t):r},set:function(e,t,r){try{e.__setattr__(t,r)}catch(n){e[t]=r}return!0}}),t=t.__proxy__),this.__init__.apply(null,[t].concat(e)),t}};function c(e,t,r,n){return void 0===n&&(n=t[0].__metaclass__),n.__new__(n,e,t,r)}function u(){var e=[].slice.apply(arguments);return"object"==typeof e[0]&&"__call__"in e[0]?e[0].__call__.apply(e[1],e.slice(2)):e[0].apply(e[1],e.slice(2))}_.executor_name=_.transpiler_name;function f(e){return e.__kwargtrans__=null,e.constructor=Object,e}function d(e,t){for(let r of e.__bases__)if(t in r)return r[t];throw new Re("Superclass method not found")}function h(e,t){return t||(t=function(){}),{get:function(){return e(this)},set:function(e){t(this,e)},enumerable:!0}}function p(e,t,r){e.hasOwnProperty(t)||Object.defineProperty(e,t,r)}function g(e,t){if(!e)throw qe(t,new Error)}function v(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function m(e){var t=[];for(var r in e)t.push(r.startsWith("py_")?r.slice(3):r);return t.sort(),t}function y(e,t,r){e[t]=r}function w(e,t){return t in e?e[t]:e["py_"+t]}function b(e,t){try{return t in e||"py_"+t in e}catch(e){return!1}}function k(e,t){return null!=t&&(t.__contains__ instanceof Function?t.__contains__(e):t.indexOf?t.indexOf(e)>-1:t.hasOwnProperty(e))}function x(e){return e.startswith("__")&&e.endswith("__")||"constructor"==e||e.startswith("py_")}function P(e){if(null==e)return 0;if(e.__len__ instanceof Function)return e.__len__();if(void 0!==e.length)return e.length;var t=0;for(var r in e)x(r)||t++;return t}function O(e){return null!=e&&(["boolean","number"].indexOf(typeof e)>=0?e:e.__bool__ instanceof Function?!!e.__bool__()&&e:e.__len__ instanceof Function?0!==e.__len__()&&e:(e instanceof Function||0!==P(e))&&e)}function E(e){if("inf"==e)return 1/0;if("-inf"==e)return-1/0;if("nan"==e)return NaN;if(isNaN(parseFloat(e))){if(!1===e)return 0;if(!0===e)return 1;throw Be("could not convert string to float: '"+J(e)+"'",new Error)}return+e}function A(e){return 0|E(e)}function C(e){return!!O(e)}function S(e){var t=typeof e;if("object"!=t)return"boolean"==t?C:"string"==t?J:"number"==t?e%1==0?A:E:null;try{return"__class__"in e?e.__class__:s}catch(e){return t}}function T(e,t){if(t instanceof Array){for(let r of t)if(T(e,r))return!0;return!1}try{var r=e;if(r==t)return!0;for(var n=[].slice.call(r.__bases__);n.length;){if((r=n.shift())==t)return!0;r.__bases__.length&&(n=[].slice.call(r.__bases__).concat(n))}return!1}catch(r){return e==t||t==s}}function N(e,t){try{return T("__class__"in e?e.__class__:S(e),t)}catch(r){return T(S(e),t)}}function L(e){return!(!e||"object"!=typeof e||!("__call__"in e))||"function"==typeof e}function M(e){try{return e.__repr__()}catch(a){try{return e.__str__()}catch(a){try{if(null==e)return"None";if(e.constructor==Object){var t="{",r=!1;for(var n in e)if(!x(n)){if(n.isnumeric())var _=n;else _="'"+n+"'";r?t+=", ":r=!0,t+=_+": "+M(e[n])}return t+="}"}return"boolean"==typeof e?e.toString().capitalize():e.toString()}catch(t){return"<object of type: "+typeof e+">"}}}}function I(e){return String.fromCharCode(e)}function j(e){return e.charCodeAt(0)}function R(e){return 1==arguments.length?Math.max(...e):Math.max(...arguments)}E.__name__="float",E.__bases__=[s],A.__name__="int",A.__bases__=[s],Number.prototype.__format__=function(e){if(null==e||0==e.strip().length)return this.toString();var t=!1,r=!1,n=0,_=!1,a=!1,i="-",o=">",l=" ",s=void 0,c=void 0,u=this.valueOf(),f=u<0;function d(e,t,r,n){null==r&&(r=" "),null==n&&(n=">");var _="",i="";e.startswith(["+","-"])&&(i=e[0],e=e.substr(1)),a&&e.startswith(["0b","0o","0x"])&&(_=e.slice(0,2),e=e.substr(2));var o=t-(e.length+i.length+_.length);switch(n){case"=":return i+_+pe(r,o)+e;case">":return pe(r,o)+i+_+e;case"<":return i+_+e+pe(r,o);case"^":var l=(o%2+2)%2;return pe(r,o=Math.floor(o/2))+i+_+e+pe(r,o+l);default:throw Be("Invalid align type: '"+n+"'",new Error)}}function h(e){if(-1==e.indexOf("e+")&&("g"==c||"G"==c)){for(var t=e.py_split("."),r=t[0],n=t[1];"0"==n[n.length-1];)n=n.slice(0,-1);e=""!=n?".".join([r,n]):r}return a&&-1==e.indexOf(".")&&(e+="."),e}u=Math.abs(u),e.endswith(["b","c","d","e","E","f","F","g","G","n","o","x","X","%"])?(c=e[e.length-1],e=e.slice(0,-1),"n"==c&&(c=Number.isInteger(u)?"d":"f")):(c=Number.isInteger(u)?"d":"g",r=!0);var p=e.split(".");if(e=p[0],null!=(s=p[1])&&(s=parseInt(s)),e.length>0&&","==e[e.length-1]&&(t=!0,e=e.slice(0,-1)),e.length>0){for(var g="";e&&e[e.length-1].isnumeric();)g=e[e.length-1]+g,e=e.slice(0,-1);g.length>0&&("0"==g[0]?(n=parseInt(g.substr(1)),_=!0):n=parseInt(g)),e.length>0&&"#"==e[e.length-1]&&(a=!0,e=e.slice(0,-1)),e.length>0&&e.endswith(["+","-"," "])&&(i=e[e.length-1],e=e.slice(0,-1)),e.length>0&&e.endswith(["<",">","=","^"])&&(o=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(l=e[0])}if(isNaN(u))u="nan";else if(u==1/0)u="inf";else switch(c){case"b":u=Math.floor(u).toString(2),a&&(u="0b"+u);break;case"c":u=String.fromCharCode(Math.floor(u));break;case"d":u=Math.floor(u).toString(),t&&(u=u.replace(/\B(?=(\d{3})+(?!\d))/g,","));break;case"o":u=Math.floor(u).toString(8),a&&(u="0o"+u);break;case"x":case"X":u=Math.floor(u).toString(16),a&&(u="0x"+u);break;case"e":case"E":null==s&&(s=6);var v=(w=u.toExponential(s).split("e+"))[0],m=w[1];u=h(u=v.toString()+"e+"+d(m.toString(),2,"0"));break;case"f":case"F":case"%":null==s&&(s=6),"%"==c&&(u*=100),u=h(u=u.toFixed(s)),"%"==c&&(u+="%");break;case"g":case"G":null==s&&(s=r?1:6),0==s&&(s=1);var y=!1;if(r)(p=u.toString().split("."))[0].length+p[1].length>=s&&(y=!0);var w;v=(w=u.toExponential(s-1).split("e+"))[0];u=h(u=(y|=!(-4<=(m=w[1])&&m<s))?v.toString()+"e+"+d(m.toString(),2,"0"):u.toFixed(s-1-m));break;default:throw Be("Invalid format type: '"+c+"'",new Error)}return c===c.toUpperCase()&&(u=u.toUpperCase()),"c"!=c&&("-"==i?f&&(u="-"+u):u=f?"-"+u:i+u),_&&(l="0",o="="),n>0&&(u=d(u,n,l,o)),u},C.__name__="bool",C.__bases__=[A];Math.abs;function D(){try{return{value:this.__next__(),done:!1}}catch(e){return{value:void 0,done:!0}}}function F(){var e=this.next();if(e.done)throw Fe(new Error);return e.value}function B(e){if("string"==typeof e||"__iter__"in e)(t=e.__iter__()).next=D;else if("selector"in e){(t=X(e).__iter__()).next=D}else if("next"in e){"__next__"in(t=e)||(t.__next__=F)}else{if(!(Symbol.iterator in e))throw De(new Error);var t;(t=e[Symbol.iterator]()).__next__=F}return t[Symbol.iterator]=function(){return t},t}function z(e){try{var t=e.__next__()}catch(r){if((t=e.next()).done)throw Fe(new Error);return t.value}if(null==t)throw Fe(new Error);return t}function q(e){this.iterable=e,this.index=0}function V(e){this.iterable=e,this.index=0}function U(e){return(e=e.slice()).reverse(),e}function G(){for(var e=[].slice.call(arguments),t=0;t<e.length;t++)"string"==typeof e[t]?e[t]=e[t].split(""):Array.isArray(e[t])||(e[t]=Array.from(e[t]));return(0==e.length?[]:e.reduce((function(e,t){return e.length<t.length?e:t}))).map((function(t,r){return e.map((function(e){return e[r]}))}))}function W(e){for(let t of e)if(C(t))return!0;return!1}function $(e){for(let t of e)if(!C(t))return!1;return!0}function Y(e){return G(function(e,t,r){if(null==t&&(t=e,e=0),null==r&&(r=1),r>0&&e>=t||r<0&&e<=t)return[];for(var n=[],_=e;r>0?_<t:_>t;_+=r)n.push(_);return n}(P(e)),e)}function H(e){if(null==e||"object"==typeof e)return e;var t={};for(var r in obj)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function X(e){return e?Array.from(e):[]}function Z(e){let t=e?[].slice.apply(e):[];return t.__class__=Z,t}function K(e){let t=[];if(e)for(let r=0;r<e.length;r++)t.add(e[r]);return t.__class__=K,t}q.prototype.__next__=function(){if(this.index<this.iterable.length)return this.iterable[this.index++];throw Fe(new Error)},V.prototype.next=function(){return this.index<this.iterable.py_keys.length?{value:this.index++,done:!1}:{value:void 0,done:!0}},Array.prototype.__class__=X,X.__name__="list",X.__bases__=[s],Array.prototype.__iter__=function(){return new q(this)},Array.prototype.__getslice__=function(e,t,r){if(e<0&&(e=this.length+e),null==t?t=this.length:t<0?t=this.length+t:t>this.length&&(t=this.length),1==r)return Array.prototype.slice.call(this,e,t);let n=X([]);for(let _=e;_<t;_+=r)n.push(this[_]);return n},Array.prototype.__setslice__=function(e,t,r,n){if(e<0&&(e=this.length+e),null==t?t=this.length:t<0&&(t=this.length+t),null==r)Array.prototype.splice.apply(this,[e,t-e].concat(n));else{let _=0;for(let a=e;a<t;a+=r)this[a]=n[_++]}},Array.prototype.__repr__=function(){if(this.__class__==K&&!this.length)return"set()";let e=this.__class__&&this.__class__!=X?this.__class__==Z?"(":"{":"[";for(let t=0;t<this.length;t++)t&&(e+=", "),e+=M(this[t]);return this.__class__==Z&&1==this.length&&(e+=","),e+=this.__class__&&this.__class__!=X?this.__class__==Z?")":"}":"]",e},Array.prototype.__str__=Array.prototype.__repr__,Array.prototype.append=function(e){this.push(e)},Array.prototype.py_clear=function(){this.length=0},Array.prototype.extend=function(e){this.push.apply(this,e)},Array.prototype.insert=function(e,t){this.splice(e,0,t)},Array.prototype.remove=function(e){let t=this.indexOf(e);if(-1==t)throw Be("list.remove(x): x not in list",new Error);this.splice(t,1)},Array.prototype.index=function(e){return this.indexOf(e)},Array.prototype.py_pop=function(e){return null==e?this.pop():this.splice(e,1)[0]},Array.prototype.py_sort=function(){Ye.apply(null,[this].concat([].slice.apply(arguments)))},Array.prototype.__add__=function(e){return X(this.concat(e))},Array.prototype.__mul__=function(e){let t=this;for(let r=1;r<e;r++)t=t.concat(this);return t},Array.prototype.__rmul__=Array.prototype.__mul__,Z.__name__="tuple",Z.__bases__=[s],K.__name__="set",K.__bases__=[s],Array.prototype.__bindexOf__=function(e){e+="";let t=0,r=this.length-1;for(;t<=r;){let n=(t+r)/2|0,_=this[n]+"";if(_<e)t=n+1;else{if(!(_>e))return n;r=n-1}}return-1},Array.prototype.add=function(e){-1==this.indexOf(e)&&this.push(e)},Array.prototype.discard=function(e){var t=this.indexOf(e);-1!=t&&this.splice(t,1)},Array.prototype.isdisjoint=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1!=this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issuperset=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1==this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issubset=function(e){return K(e.slice()).issuperset(this)},Array.prototype.union=function(e){let t=K(this.slice().sort());for(let r=0;r<e.length;r++)-1==t.__bindexOf__(e[r])&&t.push(e[r]);return t},Array.prototype.intersection=function(e){this.sort();let t=K();for(let r=0;r<e.length;r++)-1!=this.__bindexOf__(e[r])&&t.push(e[r]);return t},Array.prototype.difference=function(e){let t=K(e.slice().sort()),r=K();for(let e=0;e<this.length;e++)-1==t.__bindexOf__(this[e])&&r.push(this[e]);return r},Array.prototype.symmetric_difference=function(e){return this.union(e).difference(this.intersection(e))},Array.prototype.py_update=function(){let e=[].concat.apply(this.slice(),arguments).sort();this.py_clear();for(let t=0;t<e.length;t++)e[t]!=e[t-1]&&this.push(e[t])},Array.prototype.__eq__=function(e){if(this.length!=e.length)return!1;this.__class__==K&&(this.sort(),e.sort());for(let t=0;t<this.length;t++)if(this[t]!=e[t])return!1;return!0},Array.prototype.__ne__=function(e){return!this.__eq__(e)},Array.prototype.__le__=function(e){if(this.__class__==K)return this.issubset(e);for(let t=0;t<this.length;t++){if(this[t]>e[t])return!1;if(this[t]<e[t])return!0}return!0},Array.prototype.__ge__=function(e){if(this.__class__==K)return this.issuperset(e);for(let t=0;t<this.length;t++){if(this[t]<e[t])return!1;if(this[t]>e[t])return!0}return!0},Array.prototype.__lt__=function(e){return this.__class__==K?this.issubset(e)&&!this.issuperset(e):!this.__ge__(e)},Array.prototype.__gt__=function(e){return this.__class__==K?this.issuperset(e)&&!this.issubset(e):!this.__le__(e)};function J(e){if("number"==typeof e)return e.toString();try{return e.__str__()}catch(t){try{return M(e)}catch(t){return String(e)}}}function Q(e){return this.hasOwnProperty(e)}function ee(){var e=[];for(var t in this)x(t)||e.push(t);return e}function te(){var e=[];for(var t in this)x(t)||e.push([t,this[t]]);return e}function re(e){delete this[e]}function ne(){for(var e in this)delete this[e]}function _e(e,t){var r=this[e];return null==r&&(r=this["py_"+e]),null==r?null==t?null:t:r}function ae(e,t){var r=this[e];if(null!=r)return r;var n=null==t?null:t;return this[e]=n,n}function ie(e,t){var r=this[e];if(null!=r)return delete this[e],r;if(void 0===t)throw ze(e,new Error);return t}function oe(){var e=Object.keys(this)[0];if(null==e)throw ze("popitem(): dictionary is empty",new Error);var t=Z([e,this[e]]);return delete this[e],t}function le(e){for(var t in e)this[t]=e[t]}function se(){var e=[];for(var t in this)x(t)||e.push(this[t]);return e}function ce(e){return this[e]}function ue(e,t){this[e]=t}function fe(e){var t={};if(!e||e instanceof Array){if(e)for(var r=0;r<e.length;r++){var n=e[r];if(!(n instanceof Array)||2!=n.length)throw Be("dict update sequence element #"+r+" has length "+n.length+"; 2 is required",new Error);var _=n[0],a=n[1];!(e instanceof Array)&&e instanceof Object&&(N(e,fe)||(a=fe(a))),t[_]=a}}else if(N(e,fe)){var i=e.py_keys();for(r=0;r<i.length;r++){t[_=i[r]]=e[_]}}else{if(!(e instanceof Object))throw Be("Invalid type of object for dict creation",new Error);t=e}return p(t,"__class__",{value:fe,enumerable:!1,writable:!0}),p(t,"__contains__",{value:Q,enumerable:!1}),p(t,"py_keys",{value:ee,enumerable:!1}),p(t,"__iter__",{value:function(){new q(this.py_keys())},enumerable:!1}),p(t,Symbol.iterator,{value:function(){new V(this.py_keys())},enumerable:!1}),p(t,"py_items",{value:te,enumerable:!1}),p(t,"py_del",{value:re,enumerable:!1}),p(t,"py_clear",{value:ne,enumerable:!1}),p(t,"py_get",{value:_e,enumerable:!1}),p(t,"py_setdefault",{value:ae,enumerable:!1}),p(t,"py_pop",{value:ie,enumerable:!1}),p(t,"py_popitem",{value:oe,enumerable:!1}),p(t,"py_update",{value:le,enumerable:!1}),p(t,"py_values",{value:se,enumerable:!1}),p(t,"__getitem__",{value:ce,enumerable:!1}),p(t,"__setitem__",{value:ue,enumerable:!1}),t}function de(e,t){return"object"==typeof e&&"__mod__"in e?e.__mod__(t):"object"==typeof t&&"__rmod__"in t?t.__rmod__(e):(e%t+t)%t}Uint8Array.prototype.__add__=function(e){let t=new Uint8Array(this.length+e.length);return t.set(this),t.set(e,this.length),t},Uint8Array.prototype.__mul__=function(e){let t=new Uint8Array(e*this.length);for(let r=0;r<e;r++)t.set(this,r*this.length);return t},Uint8Array.prototype.__rmul__=Uint8Array.prototype.__mul__,String.prototype.__class__=J,J.__name__="str",J.__bases__=[s],String.prototype.__iter__=function(){new q(this)},String.prototype.__repr__=function(){return(-1==this.indexOf("'")?"'"+this+"'":'"'+this+'"').py_replace("\t","\\t").py_replace("\n","\\n")},String.prototype.__str__=function(){return this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endswith=function(e){if(!(e instanceof Array))return""==e||this.slice(-e.length)==e;for(var t=0;t<e.length;t++)if(this.slice(-e[t].length)==e[t])return!0;return!1},String.prototype.find=function(e,t){return this.indexOf(e,t)},String.prototype.__getslice__=function(e,t,r){e<0&&(e=this.length+e),null==t?t=this.length:t<0&&(t=this.length+t);var n="";if(1==r)n=this.substring(e,t);else for(var _=e;_<t;_+=r)n=n.concat(this.charAt(_));return n},String.prototype.__format__=function(e){if(null==e||0==e.strip().length)return this.valueOf();var t=0,r="<",n=" ",_=this.valueOf();if("s"==e[e.length-1]&&(e=e.slice(0,-1)),e.length>0){for(var a="";e&&e[e.length-1].isnumeric();)a=e[e.length-1]+a,e=e.slice(0,-1);a.length>0&&(t=parseInt(a)),e.length>0&&e.endswith(["<",">","^"])&&(r=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(n=e[0])}return t>0&&(_=function(e,t,r,n){var _=t-e.length;switch(n){case">":return pe(r,_)+e;case"<":return e+pe(r,_);case"^":var a=(_%2+2)%2;return pe(r,_=Math.floor(_/2))+e+pe(r,_+a);default:return e}}(_,t,n,r)),_},p(String.prototype,"format",{get:function(){return i(this,(function(e){var t=Z([].slice.apply(arguments).slice(1)),r=0;return e.replace(/\{([^\{]*)\}/g,(function(e,n){var _=n.split(":");n=_[0];var a=_[1];_=n.split("!"),n=_[0];var i=_[1],o=void 0;if(""==n&&(n=r++),n==+n&&void 0!==t[n])o=t[n];else{var l=void 0,s=(""+n).indexOf(".");if(-1!=s?(l=n.substring(s+1),n=n.substring(0,s)):-1!=(s=(""+n).indexOf("["))&&(l=n.substring(s+1).slice(0,-1),n=n.substring(0,s)),n==+n&&l&&void 0!==t[n])o=t[n][l];else for(var c=0;c<t.length;c++)if("object"==typeof t[c]&&null!=t[c]&&void 0!==t[c][n]){o=l?t[c][n][l]:t[c][n];break}}if(void 0===o)return e;if("r"==i)o=M(o);else if("s"==i)o=J(o);else if("a"==i)throw Be("Conversion to ascii not yet supported: '"+e+"'",new Error);return function(e,t){if(null==e)return"None";switch(t=t||"",typeof e){case"number":case"string":return e.__format__(t);case"boolean":return t?(e?1:0).__format__(t):J(e);case"object":return"__format__"in e?e.__format__(t):J(e).__format__(t);default:return J(e).__format__(t)}}(o,a)}))}))},enumerable:!0}),String.prototype.isalnum=function(){return/^[0-9a-zA-Z]{1,}$/.test(this)},String.prototype.isalpha=function(){return/^[a-zA-Z]{1,}$/.test(this)},String.prototype.isdecimal=function(){return/^[0-9]{1,}$/.test(this)},String.prototype.isdigit=function(){return this.isdecimal()},String.prototype.islower=function(){return/^[a-z]{1,}$/.test(this)},String.prototype.isupper=function(){return/^[A-Z]{1,}$/.test(this)},String.prototype.isspace=function(){return/^[\s]{1,}$/.test(this)},String.prototype.isnumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},String.prototype.join=function(e){return(e=Array.from(e)).join(this)},String.prototype.lower=function(){return this.toLowerCase()},String.prototype.py_replace=function(e,t,r){return this.split(e,r).join(t)},String.prototype.lstrip=function(){return this.replace(/^\s*/g,"")},String.prototype.rfind=function(e,t){return this.lastIndexOf(e,t)},String.prototype.rsplit=function(e,t){if(null==e||null==e){e=/\s+/;var r=this.strip()}else r=this;if(null==t||-1==t)return r.split(e);var n=r.split(e);if(t<n.length){var _=n.length-t;return[n.slice(0,_).join(e)].concat(n.slice(_))}return n},String.prototype.rstrip=function(){return this.replace(/\s*$/g,"")},String.prototype.py_split=function(e,t){if(null==e||null==e){e=/\s+/;var r=this.strip()}else r=this;if(null==t||-1==t)return r.split(e);var n=r.split(e);return t<n.length?n.slice(0,t).concat([n.slice(t).join(e)]):n},String.prototype.startswith=function(e){if(!(e instanceof Array))return 0==this.indexOf(e);for(var t=0;t<e.length;t++)if(0==this.indexOf(e[t]))return!0;return!1},String.prototype.strip=function(){return this.trim()},String.prototype.upper=function(){return this.toUpperCase()},String.prototype.__mul__=function(e){for(var t="",r=0;r<e;r++)t+=this;return t},String.prototype.__rmul__=String.prototype.__mul__,fe.__name__="dict",fe.__bases__=[s],p(Function.prototype,"__setdoc__",{value:function(e){return this.__doc__=e,this},enumerable:!1});function he(e){return"object"==typeof e&&"__neg__"in e?e.__neg__():-e}function pe(e,t){return"object"==typeof e&&"__mul__"in e?e.__mul__(t):"object"==typeof t&&"__rmul__"in t?t.__rmul__(e):"string"==typeof e?e.__mul__(t):"string"==typeof t?t.__rmul__(e):e*t}function ge(e,t){return"object"==typeof e&&"__floordiv__"in e?e.__floordiv__(t):"object"==typeof t&&"__rfloordiv__"in t?t.__rfloordiv__(e):"object"==typeof e&&"__div__"in e?e.__div__(t):"object"==typeof t&&"__rdiv__"in t?t.__rdiv__(e):Math.floor(e/t)}function ve(e,t){return"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function me(e,t){return"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function ye(e,t){return"object"==typeof e&&"__lshift__"in e?e.__lshift__(t):"object"==typeof t&&"__rlshift__"in t?t.__rlshift__(e):e<<t}function we(e,t){return"object"==typeof e&&"__and__"in e?e.__and__(t):"object"==typeof t&&"__rand__"in t?t.__rand__(e):e&t}function be(e,t){return"object"==typeof e&&"__eq__"in e?e.__eq__(t):e==t}function ke(e,t){return"object"==typeof e&&"__ne__"in e?e.__ne__(t):e!=t}function xe(e,t){return"object"==typeof e&&"__lt__"in e?e.__lt__(t):e<t}function Pe(e,t){return"object"==typeof e&&"__le__"in e?e.__le__(t):e<=t}function Oe(e,t){return"object"==typeof e&&"__gt__"in e?e.__gt__(t):e>t}function Ee(e,t){return"object"==typeof e&&"__ge__"in e?e.__ge__(t):e>=t}function Ae(e,t){return"object"==typeof e&&"__imul__"in e?e.__imul__(t):"object"==typeof e&&"__mul__"in e?e.__mul__(t):"object"==typeof t&&"__rmul__"in t?t.__rmul__(e):"string"==typeof e?e.__mul__(t):"string"==typeof t?t.__rmul__(e):e*t}function Ce(e,t){return"object"==typeof e&&"__iadd__"in e?e.__iadd__(t):"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function Se(e,t){return"object"==typeof e&&"__isub__"in e?e.__isub__(t):"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function Te(e,t){return"object"==typeof e&&"__ior__"in e?e.__ior__(t):"object"==typeof e&&"__or__"in e?e.__or__(t):"object"==typeof t&&"__ror__"in t?t.__ror__(e):e|t}function Ne(e,t){return"object"==typeof e&&"__getitem__"in e?e.__getitem__(t):("string"==typeof e||e instanceof Array)&&t<0?e[e.length+t]:e[t]}function Le(e,t,r){"object"==typeof e&&"__setitem__"in e?e.__setitem__(t,r):("string"==typeof e||e instanceof Array)&&t<0?e[e.length+t]=r:e[t]=r}function Me(e,t,r,n){return"object"==typeof e&&"__getitem__"in e?e.__getitem__([t,r,n]):e.__getslice__(t,r,n)}function Ie(e,t,r,n,_){"object"==typeof e&&"__setitem__"in e?e.__setitem__([t,r,n],_):e.__setslice__(t,r,n,_)}var je=c("BaseException",[s],{__module__:n}),Re=c("Exception",[je],{__module__:n,get __init__(){return i(this,(function(e){var t=fe();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}var a=Z([].slice.apply(arguments).slice(1,r+1))}else a=Z();e.__args__=a,ke(t.error,null)?e.stack=t.error.stack:Error?e.stack=new u(Error,null).stack:e.stack="No stack trace available"}))},get __repr__(){return i(this,(function(e){return Oe(u(P,null,e.__args__),1)?u((t="{}{}").format,t,e.__class__.__name__,u(M,null,u(Z,null,e.__args__))):u(P,null,e.__args__)?function(){var t="{}({})";return u(t.format,t,e.__class__.__name__,u(M,null,Ne(e.__args__,0)))}():function(){var t="{}()";return u(t.format,t,e.__class__.__name__)}();var t}))},get __str__(){return i(this,(function(e){return Oe(u(P,null,e.__args__),1)?u(J,null,u(Z,null,e.__args__)):u(P,null,e.__args__)?u(J,null,Ne(e.__args__,0)):""}))}}),De=c("IterableError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t){var r;u((r=Re).__init__,r,e,"Can't iterate over non-iterable",f({error:t}))}))}}),Fe=c("StopIteration",[Re],{__module__:n,get __init__(){return i(this,(function(e,t){var r;u((r=Re).__init__,r,e,"Iterator exhausted",f({error:t}))}))}}),Be=c("ValueError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),ze=c("KeyError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),qe=c("AssertionError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;t?u((n=Re).__init__,n,e,t,f({error:r})):function(){var t=Re;u(t.__init__,t,e,f({error:r}))}()}))}}),Ve=c("NotImplementedError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),Ue=c("IndexError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),Ge=c("AttributeError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),We=c("py_TypeError",[Re],{__module__:n,get __init__(){return i(this,(function(e,t,r){var n;u((n=Re).__init__,n,e,t,f({error:r}))}))}}),$e=c("Warning",[Re],{__module__:n}),Ye=(c("UserWarning",[$e],{__module__:n}),c("DeprecationWarning",[$e],{__module__:n}),c("RuntimeWarning",[$e],{__module__:n}),function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"iterable":e=_[a];break;case"key":t=_[a];break;case"reverse":r=_[a]}}}var i;t?u((i=e).sort,i,(function(e,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"a":e=_[a];break;case"b":r=_[a]}}}return Oe(u(t,null,e),u(t,null,r))?1:he(1)})):function(){var t=e;u(t.sort,t)}(),r&&function(){var t=e;u(t.reverse,t)}()}),He=function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"iterable":e=_[a];break;case"key":t=_[a];break;case"reverse":r=_[a]}}}if(be(S(e),fe))var i=u(H,null,u((o=e).py_keys,o));else i=u(H,null,e);var o;return u(Ye,null,i,t,r),i},Xe=function(e,t){return function(){for(var r=[],n=t,_=0;_<P(n);_++){var a=Ne(n,_);u(r.append,r,u(e,null,a))}return r}()},Ze=c("__Terminal__",[s],{__module__:n,get __init__(){return i(this,(function(e){e.buffer="";try{e.element=u((t=document).getElementById,t,"__terminal__")}catch(t){e.element=null}var t;e.element&&(e.element.style.overflowX="auto",e.element.style.boxSizing="border-box",e.element.style.padding="5px",e.element.innerHTML="_")}))},get print(){return i(this,(function(e){var t,r,n=" ",_="\n";if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"sep":n=i[o];break;case"end":_=i[o]}}var l=Z([].slice.apply(arguments).slice(1,a+1))}else l=Z();e.buffer=Me(u((r="{}{}{}").format,r,e.buffer,u((t=n).join,t,function(){for(var e=[],t=l,r=0;r<P(t);r++){var n=Ne(t,r);u(e.append,e,u(J,null,n))}return e}()),_),he(4096),null,1),e.element?(e.element.innerHTML=function(){var t=function(){var t=e.buffer;return u(t.py_replace,t,"\n","<br>")}();return u(t.py_replace,t," ","&nbsp")}(),e.element.scrollTop=e.element.scrollHeight):function(){var e=console;u(e.log,e,function(){var e=n;return u(e.join,e,function(){for(var e=[],t=l,r=0;r<P(t);r++){var n=Ne(t,r);u(e.append,e,u(J,null,n))}return e}())}())}()}))},get input(){return i(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"question":t=n[_]}}}var a;u((a=e).print,a,u("{}".format,"{}",t),f({end:""}));var i=function(){var t,r=window;return u(r.prompt,r,u("\n".join,"\n",Me(u((t=e.buffer).py_split,t,"\n"),he(8),null,1)))}();return function(){var t=e;u(t.print,t,i)}(),i}))}}),Ke=u(Ze,null);Ke.print,Ke.input;String.prototype.startswith=function(e,t){var r=void 0===t?0:t;if(!(e instanceof Array))return this.substring(r,r+e.length)===e;for(var n=0;n<e.length;n++)if(this.substring(r,r+e[n].length)===e[n])return!0;return!1},String.prototype.count=function(e){for(var t=0,r=0;t<this.length;++t)e==this[t]&&++r;return r},String.prototype.rjust=function(e,t){return this.length>=e?this:t.repeat(e-this.length)+this},String.prototype.rstrip=function(e){if(void 0===e)return this.replace(/\s*$/g,"");for(var t=this;t.length&&-1!==e.indexOf(t.slice(-1));)t=t.slice(0,-1);return t},ie=function(e,t){var r=this[e];if(void 0!==r)return delete this[e],r;if(void 0===t)throw ze(e,new Error);return t},be=function(e,t){return"object"==typeof e&&null!=e&&"__eq__"in e?e.__eq__(t):"object"==typeof t&&null!=t&&"__eq__"in t?t.__eq__(e):e==t}})),i("2R1eR",(function(e,t){var r=a("4bJEF");function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function _(e,t){for(var r,n="",_=0,a=-1,i=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else{if(47===r)break;r=47}if(47===r){if(a===o-1||1===i);else if(a!==o-1&&2===i){if(n.length<2||2!==_||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",_=0):_=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=o,i=0;continue}}else if(2===n.length||1===n.length){n="",_=0,a=o,i=0;continue}t&&(n.length>0?n+="/..":n="..",_=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),_=o-a-1;a=o,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var i={resolve:function(){for(var e,t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o;i>=0?o=arguments[i]:(void 0===e&&(e=r.cwd()),o=e),n(o),0!==o.length&&(t=o+"/"+t,a=47===o.charCodeAt(0))}return t=_(t,!a),a?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(n(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=_(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];n(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=i.resolve(e))===(t=i.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var _=e.length,a=_-r,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var l=t.length-o,s=a<l?a:l,c=-1,u=0;u<=s;++u){if(u===s){if(l>s){if(47===t.charCodeAt(o+u))return t.slice(o+u+1);if(0===u)return t.slice(o+u)}else a>s&&(47===e.charCodeAt(r+u)?c=u:0===u&&(c=0));break}var f=e.charCodeAt(r+u);if(f!==t.charCodeAt(o+u))break;47===f&&(c=u)}var d="";for(u=r+c+1;u<=_;++u)u!==_&&47!==e.charCodeAt(u)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(o+c):(o+=c,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,_=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){_=i;break}}else a=!1;return-1===_?r?"/":".":r&&1===_?"//":e.slice(0,_)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var r,_=0,a=-1,i=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,l=-1;for(r=e.length-1;r>=0;--r){var s=e.charCodeAt(r);if(47===s){if(!i){_=r+1;break}}else-1===l&&(i=!1,l=r+1),o>=0&&(s===t.charCodeAt(o)?-1==--o&&(a=r):(o=-1,a=l))}return _===a?a=l:-1===a&&(a=e.length),e.slice(_,a)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!i){_=r+1;break}}else-1===a&&(i=!1,a=r+1);return-1===a?"":e.slice(_,a)},extname:function(e){n(e);for(var t=-1,r=0,_=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47!==l)-1===_&&(a=!1,_=o+1),46===l?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){r=o+1;break}}return-1===t||-1===_||0===i||1===i&&t===_-1&&t===r+1?"":e.slice(t,_)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,_=e.charCodeAt(0),a=47===_;a?(t.root="/",r=1):r=0;for(var i=-1,o=0,l=-1,s=!0,c=e.length-1,u=0;c>=r;--c)if(47!==(_=e.charCodeAt(c)))-1===l&&(s=!1,l=c+1),46===_?-1===i?i=c:1!==u&&(u=1):-1!==i&&(u=-1);else if(!s){o=c+1;break}return-1===i||-1===l||0===u||1===u&&i===l-1&&i===o+1?-1!==l&&(t.base=t.name=0===o&&a?e.slice(1,l):e.slice(o,l)):(0===o&&a?(t.name=e.slice(1,i),t.base=e.slice(1,l)):(t.name=e.slice(o,i),t.base=e.slice(o,l)),t.ext=e.slice(i,l)),o>0?t.dir=e.slice(0,o-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i})),i("lMHab",(function(e,t){var r=a("iXQi0"),n=a("1FSpw"),_=a("bzZym"),i=a("hcZ9I").scan,o=_.ValidatorResult,l=_.ValidatorResultError,s=_.SchemaError,c=_.SchemaContext,u=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(d),this.attributes=Object.create(n.validators)};function f(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}u.prototype.customFormats={},u.prototype.schemas=null,u.prototype.types=null,u.prototype.attributes=null,u.prototype.unresolvedRefs=null,u.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=i(t||"/",e),_=t||e.$id||e.id;for(var a in n.id)this.schemas[a]=n.id[a];for(var a in n.ref)this.unresolvedRefs.push(a);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[_]},u.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},u.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},u.prototype.setSchemas=function(e){this.schemas=e},u.prototype.getSchema=function(e){return this.schemas[e]},u.prototype.validate=function(e,t,n,_){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new s("Expected `schema` to be an object or boolean");n||(n={});var a,u=t.$id||t.id,f=r.resolve(n.base||"/",u||"");if(!_){(_=new c(t,n,[],f,Object.create(this.schemas))).schemas[f]||(_.schemas[f]=t);var d=i(f,t);for(var h in d.id){var p=d.id[h];_.schemas[h]=p}}if(n.required&&void 0===e)return(a=new o(e,t,n,_)).addError("is required, but is undefined"),a;if(!(a=this.validateSchema(e,t,n,_)))throw new Error("Result undefined");if(n.throwAll&&a.errors.length)throw new l(a);return a},u.prototype.validateSchema=function(e,t,r,a){var i=new o(e,t,r,a);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var l={schema:t,ctx:a};t.extends.forEach(this.schemaTraverser.bind(this,l)),t=l.schema,l.schema=null,l.ctx=null,l=null}else t=_.deepMerge(t,this.superResolve(t.extends,a));var u=f(t);if(u){var d=this.resolve(t,u,a),h=new c(d.subschema,r,a.path,d.switchSchema,a.schemas);return this.validateSchema(e,d.subschema,r,h)}var p=r&&r.skipAttributes||[];for(var g in t)if(!n.ignoreProperties[g]&&p.indexOf(g)<0){var v=null,m=this.attributes[g];if(m)v=m.call(this,e,t,r,a);else if(!1===r.allowUnknownAttributes)throw new s("Unsupported attribute: "+g,t);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var y=r.rewrite.call(this,e,t,r,a);i.instance=y}return i},u.prototype.schemaTraverser=function(e,t){e.schema=_.deepMerge(e.schema,this.superResolve(t,e.ctx))},u.prototype.superResolve=function(e,t){var r=f(e);return r?this.resolve(e,r,t).subschema:e},u.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var a=r.parse(t),i=a&&a.hash,o=i&&i.length&&t.substr(0,t.length-i.length);if(!o||!n.schemas[o])throw new s("no such schema <"+t+">",e);var l=_.objectGetPath(n.schemas[o],i.substr(1));if(void 0===l)throw new s("no such schema "+i+" located in <"+o+">",e);return{subschema:l,switchSchema:t}},u.prototype.testType=function(e,t,r,n,_){if(void 0!==_){if(null===_)throw new s('Unexpected null in "type" keyword');if("function"==typeof this.types[_])return this.types[_].call(this,e);if(_&&"object"==typeof _){var a=this.validateSchema(e,_,r,n);return void 0===a||!(a&&a.errors.length)}return!0}};var d=u.prototype.types={};d.string=function(e){return"string"==typeof e},d.number=function(e){return"number"==typeof e&&isFinite(e)},d.integer=function(e){return"number"==typeof e&&e%1==0},d.boolean=function(e){return"boolean"==typeof e},d.array=function(e){return Array.isArray(e)},d.null=function(e){return null===e},d.date=function(e){return e instanceof Date},d.any=function(e){return!0},d.object=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)},e.exports=u})),i("iXQi0",(function(e,t){var r=a("8QgzN");function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(l),c=["%","/","?",";","#"].concat(s),u=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},p={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=a("b22N0");function m(e,t,r){if(e&&"object"==typeof e&&e instanceof n)return e;var _=new n;return _.parse(e,t,r),_}n.prototype.parse=function(e,t,n){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),i=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var m=e=l.join(i);if(m=m.trim(),!n&&1===e.split("#").length){var y=o.exec(m);if(y)return this.path=m,this.href=m,this.pathname=y[1],y[2]?(this.search=y[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=_.exec(m);if(w){var b=(w=w[0]).toLowerCase();this.protocol=b,m=m.substr(w.length)}if(n||w||m.match(/^\/\/[^@/]+@[^@/]+/)){var k="//"===m.substr(0,2);!k||w&&p[w]||(m=m.substr(2),this.slashes=!0)}if(!p[w]&&(k||w&&!g[w])){for(var x,P,O=-1,E=0;E<u.length;E++){-1!==(A=m.indexOf(u[E]))&&(-1===O||A<O)&&(O=A)}-1!==(P=-1===O?m.lastIndexOf("@"):m.lastIndexOf("@",O))&&(x=m.slice(0,P),m=m.slice(P+1),this.auth=decodeURIComponent(x)),O=-1;for(E=0;E<c.length;E++){var A;-1!==(A=m.indexOf(c[E]))&&(-1===O||A<O)&&(O=A)}-1===O&&(O=m.length),this.host=m.slice(0,O),m=m.slice(O),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var S=this.hostname.split(/\./),T=(E=0,S.length);E<T;E++){var N=S[E];if(N&&!N.match(f)){for(var L="",M=0,I=N.length;M<I;M++)N.charCodeAt(M)>127?L+="x":L+=N[M];if(!L.match(f)){var j=S.slice(0,E),R=S.slice(E+1),D=N.match(d);D&&(j.push(D[1]),R.unshift(D[2])),R.length&&(m="/"+R.join(".")+m),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+F,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!h[b])for(E=0,T=s.length;E<T;E++){var z=s[E];if(-1!==m.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),m=m.split(z).join(q)}}var V=m.indexOf("#");-1!==V&&(this.hash=m.substr(V),m=m.slice(0,V));var U=m.indexOf("?");if(-1!==U?(this.search=m.substr(U),this.query=m.substr(U+1),t&&(this.query=v.parse(this.query)),m=m.slice(0,U)):t&&(this.search="",this.query={}),m&&(this.pathname=m),g[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var G=this.search||"";this.path=F+G}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",_=!1,a="";this.host?_=e+this.host:this.hostname&&(_=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(_+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==_?(_="//"+(_||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):_||(_=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),t+_+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(i=i.replace("#","%23"))+n},n.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if("string"==typeof e){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,_=Object.keys(this),a=0;a<_.length;a++){var i=_[a];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),l=0;l<o.length;l++){var s=o[l];"protocol"!==s&&(r[s]=e[s])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var f=c[u];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||p[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",v=r.search||"";r.path=h+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=y||m||r.host&&e.pathname,b=w,k=r.pathname&&r.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),w=w&&(""===d[0]||""===k[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),r.search=e.search,r.query=e.query;else if(null!=e.search){if(x)r.host=k.shift(),r.hostname=r.host,(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname);return r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var P=k.slice(-1)[0],O=(r.host||e.host||k.length>1)&&("."===P||".."===P)||""===P,E=0,A=k.length;A>=0;A--)"."===(P=k[A])?k.splice(A,1):".."===P?(k.splice(A,1),E++):E&&(k.splice(A,1),E--);if(!w&&!b)for(;E--;E)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),O&&"/"!==k.join("/").substr(-1)&&k.push("");var C,S=""===k[0]||k[0]&&"/"===k[0].charAt(0);x&&(r.hostname=S?"":k.length?k.shift():"",r.host=r.hostname,(C=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=C.shift(),r.hostname=C.shift(),r.host=r.hostname));return(w=w||r.host&&k.length)&&!S&&k.unshift(""),k.length>0?r.pathname=k.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.parse=m,t.resolve=function(e,t){return m(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},t.format=function(e){return"string"==typeof e&&(e=m(e)),e instanceof n?e.format():n.prototype.format.call(e)},t.Url=n})),i("8QgzN",(function(t,r){!function(n){var _=r&&!r.nodeType&&r,a=t&&!t.nodeType&&t,i="object"==typeof e&&e;i.global!==i&&i.window!==i&&i.self!==i||(n=i);var o,l,s=2147483647,c=36,u=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(h[e])}function m(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(d,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],_=0,a=e.length;_<a;)(t=e.charCodeAt(_++))>=55296&&t<=56319&&_<a?56320==(64512&(r=e.charCodeAt(_++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),_--):n.push(t);return n}function b(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=c)e=p(e/35);return p(n+36*e/(e+38))}function P(e){var t,r,n,_,a,i,o,l,u,f,d,h=[],g=e.length,m=0,y=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&v("not-basic"),h.push(e.charCodeAt(n));for(_=r>0?r+1:0;_<g;){for(a=m,i=1,o=c;_>=g&&v("invalid-input"),((l=(d=e.charCodeAt(_++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:c)>=c||l>p((s-m)/i))&&v("overflow"),m+=l*i,!(l<(u=o<=w?1:o>=w+26?26:o-w));o+=c)i>p(s/(f=c-u))&&v("overflow"),i*=f;w=x(m-a,t=h.length+1,0==a),p(m/t)>s-y&&v("overflow"),y+=p(m/t),m%=t,h.splice(m++,0,y)}return b(h)}function O(e){var t,r,n,_,a,i,o,l,u,f,d,h,m,y,b,P=[];for(h=(e=w(e)).length,t=128,r=0,a=72,i=0;i<h;++i)(d=e[i])<128&&P.push(g(d));for(n=_=P.length,_&&P.push("-");n<h;){for(o=s,i=0;i<h;++i)(d=e[i])>=t&&d<o&&(o=d);for(o-t>p((s-r)/(m=n+1))&&v("overflow"),r+=(o-t)*m,t=o,i=0;i<h;++i)if((d=e[i])<t&&++r>s&&v("overflow"),d==t){for(l=r,u=c;!(l<(f=u<=a?1:u>=a+26?26:u-a));u+=c)b=l-f,y=c-f,P.push(g(k(f+b%y,0))),l=p(b/y);P.push(g(k(l,0))),a=x(r,m,n==_),r=0,++n}++r,++t}return P.join("")}if(o={version:"1.4.1",ucs2:{decode:w,encode:b},decode:P,encode:O,toASCII:function(e){return y(e,(function(e){return f.test(e)?"xn--"+O(e):e}))},toUnicode:function(e){return y(e,(function(e){return u.test(e)?P(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return o}));else if(_&&a)if(t.exports==_)a.exports=o;else for(l in o)o.hasOwnProperty(l)&&(_[l]=o[l]);else n.punycode=o}(this)})),i("b22N0",(function(e,t){var r=a("3cLhU"),n=a("kxU7n"),_=a("2AcSp");e.exports={formats:_,parse:n,stringify:r}})),i("3cLhU",(function(e,t){var r=a("6INNj"),n=a("4ovd2"),_=a("2AcSp"),i=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,s=Array.prototype.push,c=function(e,t){s.apply(e,l(t)?t:[t])},u=Date.prototype.toISOString,f=_.default,d={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:n.encode,encodeValuesOnly:!1,filter:void 0,format:f,formatter:_.formatters[f],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},h={},p=function e(t,_,a,i,o,s,u,f,p,g,v,m,y,w,b,k,x,P){for(var O,E=t,A=P,C=0,S=!1;void 0!==(A=A.get(h))&&!S;){var T=A.get(t);if(C+=1,void 0!==T){if(T===C)throw new RangeError("Cyclic object value");S=!0}void 0===A.get(h)&&(C=0)}if("function"==typeof g?E=g(_,E):E instanceof Date?E=y(E):"comma"===a&&l(E)&&(E=n.maybeMap(E,(function(e){return e instanceof Date?y(e):e}))),null===E){if(s)return p&&!k?p(_,d.encoder,x,"key",w):_;E=""}if("string"==typeof(O=E)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||n.isBuffer(E))return p?[b(k?_:p(_,d.encoder,x,"key",w))+"="+b(p(E,d.encoder,x,"value",w))]:[b(_)+"="+b(String(E))];var N,L=[];if(void 0===E)return L;if("comma"===a&&l(E))k&&p&&(E=n.maybeMap(E,p)),N=[{value:E.length>0?E.join(",")||null:void 0}];else if(l(g))N=g;else{var M=Object.keys(E);N=v?M.sort(v):M}var I=f?String(_).replace(/\./g,"%2E"):String(_),j=i&&l(E)&&1===E.length?I+"[]":I;if(o&&l(E)&&0===E.length)return j+"[]";for(var R=0;R<N.length;++R){var D=N[R],F="object"==typeof D&&D&&void 0!==D.value?D.value:E[D];if(!u||null!==F){var B=m&&f?String(D).replace(/\./g,"%2E"):String(D),z=l(E)?"function"==typeof a?a(j,B):j:j+(m?"."+B:"["+B+"]");P.set(t,C);var q=r();q.set(h,P),c(L,e(F,z,a,i,o,s,u,f,"comma"===a&&k&&l(E)?null:p,g,v,m,y,w,b,k,x,q))}}return L};e.exports=function(e,t){var n,a=e,s=function(e){if(!e)return d;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=_.default;if(void 0!==e.format){if(!i.call(_.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,a=_.formatters[r],s=d.filter;if(("function"==typeof e.filter||l(e.filter))&&(s=e.filter),n=e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":d.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=void 0===e.allowDots?!0===e.encodeDotInKeys||d.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:d.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:d.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:s,format:r,formatter:a,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof s.filter?a=(0,s.filter)("",a):l(s.filter)&&(n=s.filter);var u=[];if("object"!=typeof a||null===a)return"";var f=o[s.arrayFormat],h="comma"===f&&s.commaRoundTrip;n||(n=Object.keys(a)),s.sort&&n.sort(s.sort);for(var g=r(),v=0;v<n.length;++v){var m=n[v],y=a[m];s.skipNulls&&null===y||c(u,p(y,m,f,h,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,g))}var w=u.join(s.delimiter),b=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),w.length>0?b+w:""}})),i("6INNj",(function(e,t){var r=a("gxVBT"),n=a("5Wvo6"),_=a("bsTf1"),i=a("cfvit"),o=a("5hTFZ")||i||_;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new r("Side channel does not contain "+n(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=o()),e.set(t,r)}};return t}})),i("gxVBT",(function(e,t){e.exports=TypeError})),i("5Wvo6",(function(t,r){var n="function"==typeof Map&&Map.prototype,_=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&_&&"function"==typeof _.get?_.get:null,o=n&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=l&&s&&"function"==typeof s.get?s.get:null,u=l&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,g=Object.prototype.toString,v=Function.prototype.toString,m=String.prototype.match,y=String.prototype.slice,w=String.prototype.replace,b=String.prototype.toUpperCase,k=String.prototype.toLowerCase,x=RegExp.prototype.test,P=Array.prototype.concat,O=Array.prototype.join,E=Array.prototype.slice,A=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,S=Object.getOwnPropertySymbols,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,N="function"==typeof Symbol&&"object"==typeof Symbol.iterator,L="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===N||"symbol")?Symbol.toStringTag:null,M=Object.prototype.propertyIsEnumerable,I=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-A(-e):A(e);if(n!==e){var _=String(n),a=y.call(t,_.length+1);return w.call(_,r,"$&_")+"."+w.call(w.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(t,r,"$&_")}var R=a("9wa3L"),D=R.custom,F=W(D)?D:null,B={__proto__:null,double:'"',single:"'"},z={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function q(e,t,r){var n=r.quoteStyle||t,_=B[n];return _+e+_}function V(e){return w.call(String(e),/"/g,"&quot;")}function U(e){return!("[object Array]"!==H(e)||L&&"object"==typeof e&&L in e)}function G(e){return!("[object RegExp]"!==H(e)||L&&"object"==typeof e&&L in e)}function W(e){if(N)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!T)return!1;try{return T.call(e),!0}catch(e){}return!1}t.exports=function t(r,n,_,a){var l=n||{};if(Y(l,"quoteStyle")&&!Y(B,l.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Y(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!Y(l,"customInspect")||l.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Y(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Y(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=l.numericSeparator;if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return Z(r,l);if("number"==typeof r){if(0===r)return 1/0/r>0?"0":"-0";var b=String(r);return g?j(r,b):b}if("bigint"==typeof r){var x=String(r)+"n";return g?j(r,x):x}var A=void 0===l.depth?5:l.depth;if(void 0===_&&(_=0),_>=A&&A>0&&"object"==typeof r)return U(r)?"[Array]":"[Object]";var S,D=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=O.call(Array(e.indent+1)," ")}return{base:r,prev:O.call(Array(t+1),r)}}(l,_);if(void 0===a)a=[];else if(X(a,r)>=0)return"[Circular]";function z(e,r,n){if(r&&(a=E.call(a)).push(r),n){var i={depth:l.depth};return Y(l,"quoteStyle")&&(i.quoteStyle=l.quoteStyle),t(e,i,_+1,a)}return t(e,l,_+1,a)}if("function"==typeof r&&!G(r)){var $=function(e){if(e.name)return e.name;var t=m.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(r),K=re(r,z);return"[Function"+($?": "+$:" (anonymous)")+"]"+(K.length>0?" { "+O.call(K,", ")+" }":"")}if(W(r)){var ne=N?w.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(r);return"object"!=typeof r||N?ne:J(ne)}if((S=r)&&"object"==typeof S&&("undefined"!=typeof HTMLElement&&S instanceof HTMLElement||"string"==typeof S.nodeName&&"function"==typeof S.getAttribute)){for(var _e="<"+k.call(String(r.nodeName)),ae=r.attributes||[],ie=0;ie<ae.length;ie++)_e+=" "+ae[ie].name+"="+q(V(ae[ie].value),"double",l);return _e+=">",r.childNodes&&r.childNodes.length&&(_e+="..."),_e+="</"+k.call(String(r.nodeName))+">"}if(U(r)){if(0===r.length)return"[]";var oe=re(r,z);return D&&!function(e){for(var t=0;t<e.length;t++)if(X(e[t],"\n")>=0)return!1;return!0}(oe)?"["+te(oe,D)+"]":"[ "+O.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==H(e)||L&&"object"==typeof e&&L in e)}(r)){var le=re(r,z);return"cause"in Error.prototype||!("cause"in r)||M.call(r,"cause")?0===le.length?"["+String(r)+"]":"{ ["+String(r)+"] "+O.call(le,", ")+" }":"{ ["+String(r)+"] "+O.call(P.call("[cause]: "+z(r.cause),le),", ")+" }"}if("object"==typeof r&&s){if(F&&"function"==typeof r[F]&&R)return R(r,{depth:A-_});if("symbol"!==s&&"function"==typeof r.inspect)return r.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(r)){var se=[];return o&&o.call(r,(function(e,t){se.push(z(t,r,!0)+" => "+z(e,r))})),ee("Map",i.call(r),se,D)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(r)){var ce=[];return u&&u.call(r,(function(e){ce.push(z(e,r))})),ee("Set",c.call(r),ce,D)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(r))return Q("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(r))return Q("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(r))return Q("WeakRef");if(function(e){return!("[object Number]"!==H(e)||L&&"object"==typeof e&&L in e)}(r))return J(z(Number(r)));if(function(e){if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}(r))return J(z(C.call(r)));if(function(e){return!("[object Boolean]"!==H(e)||L&&"object"==typeof e&&L in e)}(r))return J(p.call(r));if(function(e){return!("[object String]"!==H(e)||L&&"object"==typeof e&&L in e)}(r))return J(z(String(r)));if("undefined"!=typeof window&&r===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&r===globalThis||void 0!==e&&r===e)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==H(e)||L&&"object"==typeof e&&L in e)}(r)&&!G(r)){var ue=re(r,z),fe=I?I(r)===Object.prototype:r instanceof Object||r.constructor===Object,de=r instanceof Object?"":"null prototype",he=!fe&&L&&Object(r)===r&&L in r?y.call(H(r),8,-1):de?"Object":"",pe=(fe||"function"!=typeof r.constructor?"":r.constructor.name?r.constructor.name+" ":"")+(he||de?"["+O.call(P.call([],he||[],de||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":D?pe+"{"+te(ue,D)+"}":pe+"{ "+O.call(ue,", ")+" }"}return String(r)};var $=Object.prototype.hasOwnProperty||function(e){return e in this};function Y(e,t){return $.call(e,t)}function H(e){return g.call(e)}function X(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Z(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Z(y.call(e,0,t.maxStringLength),t)+n}var _=z[t.quoteStyle||"single"];return _.lastIndex=0,q(w.call(w.call(e,_,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function J(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function ee(e,t,r,n){return e+" ("+t+") {"+(n?te(r,n):O.call(r,", "))+"}"}function te(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+O.call(e,","+r)+"\n"+t.prev}function re(e,t){var r=U(e),n=[];if(r){n.length=e.length;for(var _=0;_<e.length;_++)n[_]=Y(e,_)?t(e[_],e):""}var a,i="function"==typeof S?S(e):[];if(N){a={};for(var o=0;o<i.length;o++)a["$"+i[o]]=i[o]}for(var l in e)Y(e,l)&&(r&&String(Number(l))===l&&l<e.length||N&&a["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof S)for(var s=0;s<i.length;s++)M.call(e,i[s])&&n.push("["+t(i[s])+"]: "+t(e[i[s]],e));return n}})),i("9wa3L",(function(e,t){})),i("bsTf1",(function(e,t){var r=a("5Wvo6"),n=a("gxVBT"),_=function(e,t,r){for(var n,_=e;null!=(n=_.next);_=n)if(n.key===t)return _.next=n.next,r||(n.next=e.next,e.next=n),n};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+r(e))},delete:function(t){var r=e&&e.next,n=function(e,t){if(e)return _(e,t,!0)}(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return function(e,t){if(e){var r=_(e,t);return r&&r.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!_(e,t)}(e,t)},set:function(t,r){e||(e={next:void 0}),function(e,t,r){var n=_(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(e,t,r)}};return t}})),i("cfvit",(function(e,t){var r=a("1GFyc"),n=a("b6GwZ"),_=a("5Wvo6"),i=a("gxVBT"),o=r("%Map%",!0),l=n("Map.prototype.get",!0),s=n("Map.prototype.set",!0),c=n("Map.prototype.has",!0),u=n("Map.prototype.delete",!0),f=n("Map.prototype.size",!0);e.exports=!!o&&function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+_(e))},delete:function(t){if(e){var r=u(e,t);return 0===f(e)&&(e=void 0),r}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&c(e,t)},set:function(t,r){e||(e=new o),s(e,t,r)}};return t}})),i("1GFyc",(function(e,t){var r=a("j4VYl"),n=a("boiKR"),_=a("eYX1V"),i=a("eXXqq"),o=a("bAv8V"),l=a("c9Bks"),s=a("gxVBT"),c=a("bvmhk"),u=a("jBJDK"),f=a("32JIt"),d=a("loBbq"),h=a("5FrKq"),p=a("lVmB9"),g=Function,v=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch(e){}},m=a("fd0O5"),y=a("3hXiA"),w=function(){throw new s},b=m?function(){try{return w}catch(e){try{return m(arguments,"callee").get}catch(e){return w}}}():w,k=a("87X5j")(),x=a("3Zf2S"),P="function"==typeof Reflect&&Reflect.getPrototypeOf||r.getPrototypeOf||x,O=a("juxzH"),E=a("iz78u"),A={},C="undefined"!=typeof Uint8Array&&P?P(Uint8Array):void 0,S={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":k&&P?P([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":A,"%AsyncGenerator%":A,"%AsyncGeneratorFunction%":A,"%AsyncIteratorPrototype%":A,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":_,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":A,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&P?P(P([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&k&&P?P((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":m,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&k&&P?P((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&P?P(""[Symbol.iterator]()):void 0,"%Symbol%":k?Symbol:void 0,"%SyntaxError%":l,"%ThrowTypeError%":b,"%TypedArray%":C,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":E,"%Function.prototype.apply%":O,"%Object.defineProperty%":y,"%Math.abs%":u,"%Math.floor%":f,"%Math.max%":d,"%Math.min%":h,"%Math.pow%":p};if(P)try{null.error}catch(e){var T=P(P(e));S["%Error.prototype%"]=T}var N=function e(t){var r;if("%AsyncFunction%"===t)r=v("async function () {}");else if("%GeneratorFunction%"===t)r=v("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=v("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var _=e("%AsyncGenerator%");_&&P&&(r=P(_.prototype))}return S[t]=r,r},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=a("42afd"),I=a("jLlR8"),j=M.call(E,Array.prototype.concat),R=M.call(O,Array.prototype.splice),D=M.call(E,String.prototype.replace),F=M.call(E,String.prototype.slice),B=M.call(E,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,V=function(e,t){var r,n=e;if(I(L,n)&&(n="%"+(r=L[n])[0]+"%"),I(S,n)){var _=S[n];if(_===A&&(_=N(n)),void 0===_&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:_}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===B(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=F(e,0,1),r=F(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return D(e,z,(function(e,t,r,_){n[n.length]=r?D(_,q,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",_=V("%"+n+"%",t),a=_.name,i=_.value,o=!1,c=_.alias;c&&(n=c[0],R(r,j([0,1],c)));for(var u=1,f=!0;u<r.length;u+=1){var d=r[u],h=F(d,0,1),p=F(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===p||"'"===p||"`"===p)&&h!==p)throw new l("property names with quotes must have matching quotes");if("constructor"!==d&&f||(o=!0),I(S,a="%"+(n+="."+d)+"%"))i=S[a];else if(null!=i){if(!(d in i)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(m&&u+1>=r.length){var g=m(i,d);i=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:i[d]}else f=I(i,d),i=i[d];f&&!o&&(S[a]=i)}}return i}})),i("j4VYl",(function(e,t){e.exports=Object})),i("boiKR",(function(e,t){e.exports=Error})),i("eYX1V",(function(e,t){e.exports=EvalError})),i("eXXqq",(function(e,t){e.exports=RangeError})),i("bAv8V",(function(e,t){e.exports=ReferenceError})),i("c9Bks",(function(e,t){e.exports=SyntaxError})),i("bvmhk",(function(e,t){e.exports=URIError})),i("jBJDK",(function(e,t){e.exports=Math.abs})),i("32JIt",(function(e,t){e.exports=Math.floor})),i("loBbq",(function(e,t){e.exports=Math.max})),i("5FrKq",(function(e,t){e.exports=Math.min})),i("lVmB9",(function(e,t){e.exports=Math.pow})),i("fd0O5",(function(e,t){var r=a("hfKS7");if(r)try{r([],"length")}catch(e){r=null}e.exports=r})),i("hfKS7",(function(e,t){e.exports=Object.getOwnPropertyDescriptor})),i("3hXiA",(function(e,t){var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch(e){r=!1}e.exports=r})),i("87X5j",(function(e,t){var r="undefined"!=typeof Symbol&&Symbol,n=a("j9k2R");e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&n())))}})),i("j9k2R",(function(e,t){e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var _=Object.getOwnPropertySymbols(e);if(1!==_.length||_[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}})),i("3Zf2S",(function(e,t){var r=a("3xylx"),n=a("fd0O5"),_=[].__proto__===Array.prototype&&n&&n(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;e.exports=_&&"function"==typeof _.get?r([_.get]):"function"==typeof o&&function(e){return o(null==e?e:i(e))}})),i("3xylx",(function(e,t){var r=a("42afd"),n=a("gxVBT"),_=a("iz78u"),i=a("38Jb7");e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new n("a function is required");return i(r,_,e)}})),i("42afd",(function(e,t){var r=a("fRh0r");e.exports=Function.prototype.bind||r})),i("fRh0r",(function(e,t){var r=Object.prototype.toString,n=Math.max,_=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var _=0;_<t.length;_+=1)r[_+e.length]=t[_];return r};e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==r.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a,i=function(e,t){for(var r=[],n=t||0,_=0;n<e.length;n+=1,_+=1)r[_]=e[n];return r}(arguments,1),o=n(0,t.length-i.length),l=[],s=0;s<o;s++)l[s]="$"+s;if(a=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var r=t.apply(this,_(i,arguments));return Object(r)===r?r:this}return t.apply(e,_(i,arguments))})),t.prototype){var c=function(){};c.prototype=t.prototype,a.prototype=new c,c.prototype=null}return a}})),i("iz78u",(function(e,t){e.exports=Function.prototype.call})),i("38Jb7",(function(e,t){var r=a("42afd"),n=a("juxzH"),_=a("iz78u"),i=a("bD6Br");e.exports=i||r.call(_,n)})),i("juxzH",(function(e,t){e.exports=Function.prototype.apply})),i("bD6Br",(function(e,t){e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply})),i("jLlR8",(function(e,t){var r=Function.prototype.call,n=Object.prototype.hasOwnProperty,_=a("42afd");e.exports=_.call(r,n)})),i("b6GwZ",(function(e,t){var r=a("1GFyc"),n=a("lJ4PN"),_=n(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&_(e,".prototype.")>-1?n(a):a}})),i("lJ4PN",(function(e,t){var r=a("2pCE9"),n=a("3hXiA"),_=a("3xylx"),i=a("chw8T");e.exports=function(e){var t=_(arguments),n=e.length-(arguments.length-1);return r(t,1+(n>0?n:0),!0)},n?n(e.exports,"apply",{value:i}):e.exports.apply=i})),i("2pCE9",(function(e,t){var r=a("1GFyc"),n=a("dJ3xt"),_=a("ivLm9")(),i=a("fd0O5"),o=a("gxVBT"),l=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new o("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new o("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],a=!0,s=!0;if("length"in e&&i){var c=i(e,"length");c&&!c.configurable&&(a=!1),c&&!c.writable&&(s=!1)}return(a||s||!r)&&(_?n(e,"length",t,!0,!0):n(e,"length",t)),e}})),i("dJ3xt",(function(e,t){var r=a("3hXiA"),n=a("c9Bks"),_=a("gxVBT"),i=a("fd0O5");e.exports=function(e,t,a){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new _("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new _("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new _("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new _("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new _("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new _("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],u=!!i&&i(e,t);if(r)r(e,t,{configurable:null===s&&u?u.configurable:!s,enumerable:null===o&&u?u.enumerable:!o,value:a,writable:null===l&&u?u.writable:!l});else{if(!c&&(o||l||s))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=a}}})),i("ivLm9",(function(e,t){var r=a("3hXiA"),n=function(){return!!r};n.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=n})),i("chw8T",(function(e,t){var r=a("42afd"),n=a("juxzH"),_=a("38Jb7");e.exports=function(){return _(r,n,arguments)}})),i("5hTFZ",(function(e,t){var r=a("1GFyc"),n=a("ig0zj"),_=a("5Wvo6"),i=a("cfvit"),o=a("gxVBT"),l=r("%WeakMap%",!0),s=n("WeakMap.prototype.get",!0),c=n("WeakMap.prototype.set",!0),u=n("WeakMap.prototype.has",!0),f=n("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new o("Side channel does not contain "+_(e))},delete:function(r){if(l&&r&&("object"==typeof r||"function"==typeof r)){if(e)return f(e,r)}else if(i&&t)return t.delete(r);return!1},get:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?s(e,r):t&&t.get(r)},has:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?u(e,r):!!t&&t.has(r)},set:function(r,n){l&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new l),c(e,r,n)):i&&(t||(t=i()),t.set(r,n))}};return r}:i})),i("ig0zj",(function(e,t){var r=a("1GFyc"),n=a("lJ4PN"),_=n(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&_(e,".prototype.")>-1?n(a):a}})),i("4ovd2",(function(e,t){var r=a("2AcSp"),n=Object.prototype.hasOwnProperty,_=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},l=1024;e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var a=t[n],i=a.obj[a.prop],o=Object.keys(i),l=0;l<o.length;++l){var s=o[l],c=i[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:i,prop:s}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(_(r)){for(var n=[],a=0;a<r.length;++a)void 0!==r[a]&&n.push(r[a]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,n,_,a){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var s="",c=0;c<o.length;c+=l){for(var u=o.length>=l?o.slice(c,c+l):o,f=[],d=0;d<u.length;++d){var h=u.charCodeAt(d);45===h||46===h||95===h||126===h||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===r.RFC1738&&(40===h||41===h)?f[f.length]=u.charAt(d):h<128?f[f.length]=i[h]:h<2048?f[f.length]=i[192|h>>6]+i[128|63&h]:h<55296||h>=57344?f[f.length]=i[224|h>>12]+i[128|h>>6&63]+i[128|63&h]:(d+=1,h=65536+((1023&h)<<10|1023&u.charCodeAt(d)),f[f.length]=i[240|h>>18]+i[128|h>>12&63]+i[128|h>>6&63]+i[128|63&h])}s+=f.join("")}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(_(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,a){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(_(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return _(t)&&!_(r)&&(i=o(t,a)),_(t)&&_(r)?(r.forEach((function(r,_){if(n.call(t,_)){var i=t[_];i&&"object"==typeof i&&r&&"object"==typeof r?t[_]=e(i,r,a):t.push(r)}else t[_]=r})),t):Object.keys(r).reduce((function(t,_){var i=r[_];return n.call(t,_)?t[_]=e(t[_],i,a):t[_]=i,t}),i)}}})),i("2AcSp",(function(e,t){var r=String.prototype.replace,n=/%20/g,_="RFC1738",a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return r.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:_,RFC3986:a}})),i("kxU7n",(function(e,t){var r=a("4ovd2"),n=Object.prototype.hasOwnProperty,_=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},s=function(e,t,r,_){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=r.depth>0&&/(\[[^[\]]*])/.exec(a),s=o?a.slice(0,o.index):a,c=[];if(s){if(!r.plainObjects&&n.call(Object.prototype,s)&&!r.allowPrototypes)return;c.push(s)}for(var u=0;r.depth>0&&null!==(o=i.exec(a))&&u<r.depth;){if(u+=1,!r.plainObjects&&n.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}if(o){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");c.push("["+a.slice(o.index)+"]")}return function(e,t,r,n){for(var _=n?t:l(t,r),a=e.length-1;a>=0;--a){var i,o=e[a];if("[]"===o&&r.parseArrays)i=r.allowEmptyArrays&&(""===_||r.strictNullHandling&&null===_)?[]:[].concat(_);else{i=r.plainObjects?{__proto__:null}:{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=r.decodeDotInKeys?s.replace(/%2E/g,"."):s,u=parseInt(c,10);r.parseArrays||""!==c?!isNaN(u)&&o!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(i=[])[u]=_:"__proto__"!==c&&(i[c]=_):i={0:_}}_=i}return _}(c,t,r,_)}};e.exports=function(e,t){var a=function(e){if(!e)return i;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset,n=void 0===e.duplicates?i.duplicates:e.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||i.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:i.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,duplicates:n,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:i.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return a.plainObjects?{__proto__:null}:{};for(var c="string"==typeof e?function(e,t){var a={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c,u=t.parameterLimit===1/0?void 0:t.parameterLimit,f=s.split(t.delimiter,u),d=-1,h=t.charset;if(t.charsetSentinel)for(c=0;c<f.length;++c)0===f[c].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[c]?h="utf-8":"utf8=%26%2310003%3B"===f[c]&&(h="iso-8859-1"),d=c,c=f.length);for(c=0;c<f.length;++c)if(c!==d){var p,g,v=f[c],m=v.indexOf("]="),y=-1===m?v.indexOf("="):m+1;-1===y?(p=t.decoder(v,i.decoder,h,"key"),g=t.strictNullHandling?null:""):(p=t.decoder(v.slice(0,y),i.decoder,h,"key"),g=r.maybeMap(l(v.slice(y+1),t),(function(e){return t.decoder(e,i.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=o(String(g))),v.indexOf("[]=")>-1&&(g=_(g)?[g]:g);var w=n.call(a,p);w&&"combine"===t.duplicates?a[p]=r.combine(a[p],g):w&&"last"!==t.duplicates||(a[p]=g)}return a}(e,a):e,u=a.plainObjects?{__proto__:null}:{},f=Object.keys(c),d=0;d<f.length;++d){var h=f[d],p=s(h,c[h],a,"string"==typeof e);u=r.merge(u,p,a)}return!0===a.allowSparse?u:r.compact(u)}})),i("1FSpw",(function(e,t){var r=a("bzZym"),n=r.ValidatorResult,_=r.SchemaError,i={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},o=i.validators={};function l(e,t,r,n,_){var a=t.throwError,i=t.throwAll;t.throwError=!1,t.throwAll=!1;var o=this.validateSchema(e,_,t,r);return t.throwError=a,t.throwAll=i,!o.valid&&n instanceof Function&&n(o),o.valid}function s(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function c(e,t,r,n,_,a){if(this.types.object(e)&&(!t.properties||void 0===t.properties[_]))if(!1===t.additionalProperties)a.addError({name:"additionalProperties",argument:_,message:"is not allowed to have the additional property "+JSON.stringify(_)});else{var i=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,_,i,r,n);var o=this.validateSchema(e[_],i,r,n.makeChild(i,_));o.instance!==a.instance[_]&&(a.instance[_]=o.instance),a.importErrors(o)}}o.type=function(e,t,r,_){if(void 0===e)return null;var a=new n(e,t,r,_),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,_))){var o=i.map((function(e){if(e){var t=e.$id||e.id;return t?"<"+t+">":e+""}}));a.addError({name:"type",argument:o,message:"is not of a type(s) "+o})}return a},o.anyOf=function(e,t,r,a){if(void 0===e)return null;var i=new n(e,t,r,a),o=new n(e,t,r,a);if(!Array.isArray(t.anyOf))throw new _("anyOf must be an array");if(!t.anyOf.some(l.bind(this,e,r,a,(function(e){o.importErrors(e)})))){var s=t.anyOf.map((function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&i.importErrors(o),i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},o.allOf=function(e,t,r,a){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new _("allOf must be an array");var i=new n(e,t,r,a),o=this;return t.allOf.forEach((function(t,n){var _=o.validateSchema(e,t,r,a);if(!_.valid){var l=t.$id||t.id||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+n+"]";i.addError({name:"allOf",argument:{id:l,length:_.errors.length,valid:_},message:"does not match allOf schema "+l+" with "+_.errors.length+" error[s]:"}),i.importErrors(_)}})),i},o.oneOf=function(e,t,r,a){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new _("oneOf must be an array");var i=new n(e,t,r,a),o=new n(e,t,r,a),s=t.oneOf.filter(l.bind(this,e,r,a,(function(e){o.importErrors(e)}))).length,c=t.oneOf.map((function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==s&&(r.nestedErrors&&i.importErrors(o),i.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")})),i},o.if=function(e,t,_,a){if(void 0===e)return null;if(!r.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var i,o=l.call(this,e,_,a,null,t.if),s=new n(e,t,_,a);if(o){if(void 0===t.then)return;if(!r.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');i=this.validateSchema(e,t.then,_,a.makeChild(t.then)),s.importErrors(i)}else{if(void 0===t.else)return;if(!r.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');i=this.validateSchema(e,t.else,_,a.makeChild(t.else)),s.importErrors(i)}return s},o.propertyNames=function(e,t,a,i){if(this.types.object(e)){var o=new n(e,t,a,i),l=void 0!==t.propertyNames?t.propertyNames:{};if(!r.isSchema(l))throw new _('Expected "propertyNames" to be a schema (object or boolean)');for(var c in e)if(void 0!==s(e,c)){var u=this.validateSchema(c,l,a,i.makeChild(l));o.importErrors(u)}return o}},o.properties=function(e,t,r,a){if(this.types.object(e)){var i=new n(e,t,r,a),o=t.properties||{};for(var l in o){var c=o[l];if(void 0!==c){if(null===c)throw new _('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,l,c,r,a);var u=s(e,l),f=this.validateSchema(u,c,r,a.makeChild(c,l));f.instance!==i.instance[l]&&(i.instance[l]=f.instance),i.importErrors(f)}}return i}},o.patternProperties=function(e,t,r,a){if(this.types.object(e)){var i=new n(e,t,r,a),o=t.patternProperties||{};for(var l in e){var s=!0;for(var u in o){var f=o[u];if(void 0!==f){if(null===f)throw new _('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(u,"u")}catch(e){d=new RegExp(u)}if(d.test(l)){s=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,l,f,r,a);var h=this.validateSchema(e[l],f,r,a.makeChild(f,l));h.instance!==i.instance[l]&&(i.instance[l]=h.instance),i.importErrors(h)}}}s&&c.call(this,e,t,r,a,l,i)}return i}},o.additionalProperties=function(e,t,r,_){if(this.types.object(e)){if(t.patternProperties)return null;var a=new n(e,t,r,_);for(var i in e)c.call(this,e,t,r,_,i,a);return a}},o.minProperties=function(e,t,r,_){if(this.types.object(e)){var a=new n(e,t,r,_);return Object.keys(e).length>=t.minProperties||a.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),a}},o.maxProperties=function(e,t,r,_){if(this.types.object(e)){var a=new n(e,t,r,_);return Object.keys(e).length<=t.maxProperties||a.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),a}},o.items=function(e,t,r,_){var a=this;if(this.types.array(e)&&void 0!==t.items){var i=new n(e,t,r,_);return e.every((function(e,n){if(Array.isArray(t.items))var o=void 0===t.items[n]?t.additionalItems:t.items[n];else o=t.items;if(void 0===o)return!0;if(!1===o)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var l=a.validateSchema(e,o,r,_.makeChild(o,n));return l.instance!==i.instance[n]&&(i.instance[n]=l.instance),i.importErrors(l),!0})),i}},o.contains=function(e,t,_,a){var i=this;if(this.types.array(e)&&void 0!==t.contains){if(!r.isSchema(t.contains))throw new Error('Expected "contains" keyword to be a schema');var o=new n(e,t,_,a);return!1===e.some((function(e,r){return 0===i.validateSchema(e,t.contains,_,a.makeChild(t.contains,r)).errors.length}))&&o.addError({name:"contains",argument:t.contains,message:"must contain an item matching given schema"}),o}},o.minimum=function(e,t,r,_){if(this.types.number(e)){var a=new n(e,t,r,_);return t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),a}},o.maximum=function(e,t,r,_){if(this.types.number(e)){var a=new n(e,t,r,_);return t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),a}},o.exclusiveMinimum=function(e,t,r,_){if("boolean"!=typeof t.exclusiveMinimum&&this.types.number(e)){var a=new n(e,t,r,_);return e>t.exclusiveMinimum||a.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),a}},o.exclusiveMaximum=function(e,t,r,_){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e)){var a=new n(e,t,r,_);return e<t.exclusiveMaximum||a.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),a}};var u=function(e,t,a,i,o,l){if(this.types.number(e)){var s=t[o];if(0==s)throw new _(o+" cannot be zero");var c=new n(e,t,a,i),u=r.getDecimalPlaces(e),f=r.getDecimalPlaces(s),d=Math.max(u,f),h=Math.pow(10,d);return Math.round(e*h)%Math.round(s*h)!=0&&c.addError({name:o,argument:s,message:l+JSON.stringify(s)}),c}};function f(e,t,n){var _,a=n.length;for(_=t+1;_<a;_++)if(r.deepCompareStrict(e,n[_]))return!1;return!0}o.multipleOf=function(e,t,r,n){return u.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},o.divisibleBy=function(e,t,r,n){return u.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},o.required=function(e,t,r,_){var a=new n(e,t,r,_);return void 0===e&&!0===t.required?a.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){void 0===s(e,t)&&a.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),a},o.pattern=function(e,t,r,_){if(this.types.string(e)){var a=new n(e,t,r,_),i=t.pattern;try{var o=new RegExp(i,"u")}catch(e){o=new RegExp(i)}return e.match(o)||a.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),a}},o.format=function(e,t,_,a){if(void 0!==e){var i=new n(e,t,_,a);return i.disableFormat||r.isFormat(e,t.format,this)||i.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),i}},o.minLength=function(e,t,r,_){if(this.types.string(e)){var a=new n(e,t,r,_),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)>=t.minLength||a.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),a}},o.maxLength=function(e,t,r,_){if(this.types.string(e)){var a=new n(e,t,r,_),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)<=t.maxLength||a.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),a}},o.minItems=function(e,t,r,_){if(this.types.array(e)){var a=new n(e,t,r,_);return e.length>=t.minItems||a.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),a}},o.maxItems=function(e,t,r,_){if(this.types.array(e)){var a=new n(e,t,r,_);return e.length<=t.maxItems||a.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),a}},o.uniqueItems=function(e,t,r,_){if(!0===t.uniqueItems&&this.types.array(e)){var a=new n(e,t,r,_);return e.every(f)||a.addError({name:"uniqueItems",message:"contains duplicate item"}),a}},o.dependencies=function(e,t,r,_){if(this.types.object(e)){var a=new n(e,t,r,_);for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i],l=_.makeChild(o,i);if("string"==typeof o&&(o=[o]),Array.isArray(o))o.forEach((function(t){void 0===e[t]&&a.addError({name:"dependencies",argument:l.propertyPath,message:"property "+t+" not found, required by "+l.propertyPath})}));else{var s=this.validateSchema(e,o,r,l);a.instance!==s.instance&&(a.instance=s.instance),s&&s.errors.length&&(a.addError({name:"dependencies",argument:l.propertyPath,message:"does not meet dependency required by "+l.propertyPath}),a.importErrors(s))}}return a}},o.enum=function(e,t,a,i){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new _("enum expects an array",t);var o=new n(e,t,a,i);return t.enum.some(r.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o},o.const=function(e,t,_,a){if(void 0===e)return null;var i=new n(e,t,_,a);return r.deepCompareStrict(t.const,e)||i.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),i},o.not=o.disallow=function(e,t,r,_){var a=this;if(void 0===e)return null;var i=new n(e,t,r,_),o=t.not||t.disallow;return o?(Array.isArray(o)||(o=[o]),o.forEach((function(n){if(a.testType(e,t,r,_,n)){var o=n&&(n.$id||n.id)||n;i.addError({name:"not",argument:o,message:"is of prohibited type "+o})}})),i):null},e.exports=i})),i("bzZym",(function(e,r){var n,_,i,o,l,s,c,u,f,d,h;t(e.exports,"ValidationError",(()=>n),(e=>n=e)),t(e.exports,"ValidatorResult",(()=>_),(e=>_=e)),t(e.exports,"ValidatorResultError",(()=>i),(e=>i=e)),t(e.exports,"SchemaError",(()=>o),(e=>o=e)),t(e.exports,"SchemaContext",(()=>l),(e=>l=e)),t(e.exports,"isFormat",(()=>s),(e=>s=e)),t(e.exports,"deepCompareStrict",(()=>c),(e=>c=e)),t(e.exports,"deepMerge",(()=>u),(e=>u=e)),t(e.exports,"objectGetPath",(()=>f),(e=>f=e)),t(e.exports,"getDecimalPlaces",(()=>d),(e=>d=e)),t(e.exports,"isSchema",(()=>h),(e=>h=e));var p=a("iXQi0"),g=n=function(e,t,r,n,_,a){if(Array.isArray(n)?(this.path=n,this.property=n.reduce((function(e,t){return e+x(t)}),"instance")):void 0!==n&&(this.property=n),e&&(this.message=e),r){var i=r.$id||r.id;this.schema=i||r}void 0!==t&&(this.instance=t),this.name=_,this.argument=a,this.stack=this.toString()};g.prototype.toString=function(){return this.property+" "+this.message};var v=_=function(e,t,r,n){this.instance=e,this.schema=t,this.options=r,this.path=n.path,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat};function m(e,t){return t+": "+e.toString()+"\n"}function y(e){Error.captureStackTrace&&Error.captureStackTrace(this,y),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}v.prototype.addError=function(e){var t;if("string"==typeof e)t=new g(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new g(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new y(this);if(this.throwError)throw t;return t},v.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))},v.prototype.toString=function(e){return this.errors.map(m).join("")},Object.defineProperty(v.prototype,"valid",{get:function(){return!this.errors.length}}),i=y,y.prototype=new Error,y.prototype.constructor=y,y.prototype.name="Validation Error";var w=o=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};w.prototype=Object.create(Error.prototype,{constructor:{value:w,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var b=l=function(e,t,r,n,_){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce((function(e,t){return e+x(t)}),"instance")):this.propertyPath=r,this.base=n,this.schemas=_};b.prototype.resolve=function(e){return p.resolve(this.base,e)},b.prototype.makeChild=function(e,t){var r=void 0===t?this.path:this.path.concat([t]),n=e.$id||e.id,_=p.resolve(this.base,n||""),a=new b(e,this.options,r,_,Object.create(this.schemas));return n&&!a.schemas[_]&&(a.schemas[_]=e),a};var k={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};k.regexp=k.regex,k.pattern=k.regex,k.ipv4=k["ip-address"],s=function(e,t,r){if("string"==typeof e&&void 0!==k[t]){if(k[t]instanceof RegExp)return k[t].test(e);if("function"==typeof k[t])return k[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var x=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function P(e,t,r,n){"object"==typeof r?t[n]=A(e[n],r):-1===e.indexOf(r)&&t.push(r)}function O(e,t,r){t[r]=e[r]}function E(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=A(e[n],t[n]):r[n]=t[n]}function A(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(P.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(O.bind(null,e,n)),Object.keys(t).forEach(E.bind(null,e,t,n))),n}function C(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}c=function e(t,r){if(typeof t!=typeof r)return!1;if(Array.isArray(t))return!!Array.isArray(r)&&(t.length===r.length&&t.every((function(n,_){return e(t[_],r[_])})));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),_=Object.keys(r);return n.length===_.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r},u=A,f=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var _=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(_ in e))return;e=e[_]}return e},d=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t},h=function(e){return"object"==typeof e&&e||"boolean"==typeof e}})),i("hcZ9I",(function(e,r){var n,_;t(e.exports,"SchemaScanResult",(()=>n),(e=>n=e)),t(e.exports,"scan",(()=>_),(e=>_=e));var i=a("iXQi0"),o=a("bzZym");function l(e,t){this.id=e,this.ref=t}n=l,_=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var l=i.resolve(e,t.$ref);s[l]=s[l]?s[l]+1:0}else{var c=t.$id||t.id,u=c?i.resolve(e,c):e;if(u){if(u.indexOf("#")<0&&(u+="#"),a[u]){if(!o.deepCompareStrict(a[u],t))throw new Error("Schema <"+u+"> already exists with different definition");return a[u]}a[u]=t,"#"==u[u.length-1]&&(a[u.substring(0,u.length-1)]=t)}n(u+"/items",Array.isArray(t.items)?t.items:[t.items]),n(u+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),r(u+"/additionalItems",t.additionalItems),_(u+"/properties",t.properties),r(u+"/additionalProperties",t.additionalProperties),_(u+"/definitions",t.definitions),_(u+"/patternProperties",t.patternProperties),_(u+"/dependencies",t.dependencies),n(u+"/disallow",t.disallow),n(u+"/allOf",t.allOf),n(u+"/anyOf",t.anyOf),n(u+"/oneOf",t.oneOf),r(u+"/not",t.not)}}function n(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function _(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var a={},s={};return r(e,t),new l(a,s)}})),i("5NijP",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("8DvLW")),c=i(a("b9BWf")),u=o(a("2vOVV"));function f(e,t){let r=Object.keys(e);return(t=Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t)).length>0&&t[0]&&(r=r.filter((r=>t.includes(e[r].pathType)))),r.map((t=>({encoded:t,decoded:"file"===e[t].pathType?c.toFileSystemPath(t,!0):t})))}e.exports.default=class{paths(...e){return f(this._$refs,e.flat()).map((e=>(0,u.default)(e.decoded)))}values(...e){const t=this._$refs;return f(t,e.flat()).reduce(((e,r)=>(e[(0,u.default)(r.decoded)]=t[r.encoded].value,e)),{})}exists(e,t){try{return this._resolve(e,"",t),!0}catch{return!1}}get(e,t){return this._resolve(e,"",t).value}set(e,t){const r=c.resolve(this._root$Ref.path,e),n=c.stripHash(r),_=this._$refs[n];if(!_)throw(0,l.ono)(`Error resolving $ref pointer "${e}". \n"${n}" not found.`);_.set(r,t)}_get$Ref(e){e=c.resolve(this._root$Ref.path,e);const t=c.stripHash(e);return this._$refs[t]}_add(e){const t=c.stripHash(e),r=new s.default(this);return r.path=t,this._$refs[t]=r,this._root$Ref=this._root$Ref||r,r}_resolve(e,t,r){const n=c.resolve(this._root$Ref.path,e),_=c.stripHash(n),a=this._$refs[_];if(!a)throw(0,l.ono)(`Error resolving $ref pointer "${e}". \n"${_}" not found.`);return a.resolve(n,r,e,t)}constructor(){this._$refs={},this.toJSON=this.values,this.circular=!1,this._$refs={},this._root$Ref=null}}})),i("58l9B",(function(e,r){var n;n=e.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",(()=>s),(e=>s=e)),t(e.exports,"Ono",(()=>a("iZAwj").Ono),(e=>a("iZAwj").Ono=e)),t(e.exports,"ono",(()=>a("jU2th").ono),(e=>a("jU2th").ono=e));var _,i,o=a("jU2th"),l=(a("iZAwj"),a("5esnK")),s=o.ono;"object"==typeof e.exports&&(e.exports=Object.assign(e.exports.default,e.exports)),_=e.exports,i=l,Object.keys(i).forEach((function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(_,e)||Object.defineProperty(_,e,{enumerable:!0,get:function(){return i[e]}})}))})),i("jU2th",(function(e,r){t(e.exports,"ono",(()=>_));var n=a("iZAwj");const _=o;o.error=new(0,n.Ono)(Error),o.eval=new(0,n.Ono)(EvalError),o.range=new(0,n.Ono)(RangeError),o.reference=new(0,n.Ono)(ReferenceError),o.syntax=new(0,n.Ono)(SyntaxError),o.type=new(0,n.Ono)(TypeError),o.uri=new(0,n.Ono)(URIError);const i=o;function o(...e){let t=e[0];if("object"==typeof t&&"string"==typeof t.name)for(let r of Object.values(i))if("function"==typeof r&&"ono"===r.name){let n=r[Symbol.species];if(n&&n!==Error&&(t instanceof n||t.name===n.name))return r.apply(void 0,e)}return o.error.apply(void 0,e)}})),i("iZAwj",(function(e,r){t(e.exports,"Ono",(()=>o));var n=a("6bu4B"),_=a("bmR24"),i=a("eQmnA");const o=l;function l(e,t){function r(...r){let{originalError:a,props:i,message:o}=(0,_.normalizeArgs)(r,t),l=new e(o);return(0,n.extendError)(l,a,i)}return t=(0,_.normalizeOptions)(t),r[Symbol.species]=e,r}l.toJSON=function(e){return i.toJSON.call(e)},l.extend=function(e,t,r){return r||t instanceof Error?(0,n.extendError)(e,t,r):t?(0,n.extendError)(e,void 0,t):(0,n.extendError)(e)}})),i("6bu4B",(function(e,r){t(e.exports,"extendError",(()=>l));var n=a("fcXXE"),_=a("gcc2a"),i=a("eQmnA");const o=["name","message","stack"];function l(e,t,r){let a=e;return function(e,t){let r=Object.getOwnPropertyDescriptor(e,"stack");(0,_.isLazyStack)(r)?(0,_.lazyJoinStacks)(r,e,t):(0,_.isWritableStack)(r)&&(e.stack=(0,_.joinStacks)(e,t))}(a,t),t&&"object"==typeof t&&function(e,t){let r=(0,i.getDeepKeys)(t,o),n=e,_=t;for(let e of r)if(void 0===n[e])try{n[e]=_[e]}catch(e){}}(a,t),a.toJSON=i.toJSON,n.addInspectMethod&&(0,n.addInspectMethod)(a),r&&"object"==typeof r&&Object.assign(a,r),a}})),i("fcXXE",(function(e,r){t(e.exports,"format",(()=>n)),t(e.exports,"addInspectMethod",(()=>_));const n=!1,_=!1})),i("gcc2a",(function(e,r){t(e.exports,"isLazyStack",(()=>a)),t(e.exports,"isWritableStack",(()=>i)),t(e.exports,"joinStacks",(()=>o)),t(e.exports,"lazyJoinStacks",(()=>l));const n=/\r?\n/,_=/\bono[ @]/;function a(e){return Boolean(e&&e.configurable&&"function"==typeof e.get)}function i(e){return Boolean(!e||e.writable||"function"==typeof e.set)}function o(e,t){let r=s(e.stack),n=t?t.stack:void 0;return r&&n?r+"\n\n"+n:r||n}function l(e,t,r){r?Object.defineProperty(t,"stack",{get:()=>o({stack:e.get.apply(t)},r),enumerable:!1,configurable:!0}):function(e,t){Object.defineProperty(e,"stack",{get:()=>s(t.get.apply(e)),enumerable:!1,configurable:!0})}(t,e)}function s(e){if(e){let t,r=e.split(n);for(let e=0;e<r.length;e++){let n=r[e];if(_.test(n))void 0===t&&(t=e);else if(void 0!==t){r.splice(t,e-t);break}}if(r.length>0)return r.join("\n")}return e}})),i("eQmnA",(function(e,r){t(e.exports,"toJSON",(()=>i)),t(e.exports,"getDeepKeys",(()=>o));const n=["function","symbol","undefined"],_=["constructor","prototype","__proto__"],a=Object.getPrototypeOf({});function i(){let e={},t=this;for(let r of o(t))if("string"==typeof r){let _=t[r],a=typeof _;n.includes(a)||(e[r]=_)}return e}function o(e,t=[]){let r=[];for(;e&&e!==a;)r=r.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let n=new Set(r);for(let e of t.concat(_))n.delete(e);return n}})),i("bmR24",(function(e,r){t(e.exports,"normalizeOptions",(()=>_)),t(e.exports,"normalizeArgs",(()=>i));var n=a("fcXXE");function _(e){return{concatMessages:void 0===(e=e||{}).concatMessages||Boolean(e.concatMessages),format:void 0===e.format?n.format:"function"==typeof e.format&&e.format}}function i(e,t){let r,n,_,a="";return"string"==typeof e[0]?_=e:"string"==typeof e[1]?(e[0]instanceof Error?r=e[0]:n=e[0],_=e.slice(1)):(r=e[0],n=e[1],_=e.slice(2)),_.length>0&&(a=t.format?t.format.apply(void 0,_):_.join(" ")),t.concatMessages&&r&&r.message&&(a+=(a?" \n":"")+r.message),{originalError:r,props:n,message:a}}})),i("5esnK",(function(e,t){a("buJLX")})),i("buJLX",(function(e,t){var r=a("4bJEF"),n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},_=/%[sdj%]/g;e.exports.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,a=n.length,i=String(e).replace(_,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),o=n[r];r<a;o=n[++r])g(o)||!b(o)?i+=" "+o:i+=" "+l(o);return i},e.exports.deprecate=function(t,n){if(void 0!==r&&!0===r.noDeprecation)return t;if(void 0===r)return function(){return e.exports.deprecate(t,n).apply(this,arguments)};var _=!1;return function(){if(!_){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),_=!0}return t.apply(this,arguments)}};var i={},o=/^$/;function l(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e.exports._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),u(n,t,n.depth)}function s(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function c(e,t){return e}function u(t,r,n){if(t.customInspect&&r&&P(r.inspect)&&r.inspect!==e.exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var _=r.inspect(n,t);return m(_)||(_=u(t,_,n)),_}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(v(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(t,r);if(a)return a;var i=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(r)),x(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(r);if(0===i.length){if(P(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return f(r)}var s,c="",b=!1,O=["{","}"];(h(r)&&(b=!0,O=["[","]"]),P(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(c=" "+RegExp.prototype.toString.call(r)),k(r)&&(c=" "+Date.prototype.toUTCString.call(r)),x(r)&&(c=" "+f(r)),0!==i.length||b&&0!=r.length?n<0?w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),s=b?function(e,t,r,n,_){for(var a=[],i=0,o=t.length;i<o;++i)C(t,String(i))?a.push(d(e,t,r,n,String(i),!0)):a.push("");return _.forEach((function(_){_.match(/^\d+$/)||a.push(d(e,t,r,n,_,!0))})),a}(t,r,n,o,i):i.map((function(e){return d(t,r,n,o,e,b)})),t.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(s,c,O)):O[0]+c+O[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,_,a){var i,o,l;if((l=Object.getOwnPropertyDescriptor(t,_)||{value:t[_]}).get?o=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(o=e.stylize("[Setter]","special")),C(n,_)||(i="["+_+"]"),o||(e.seen.indexOf(l.value)<0?(o=g(r)?u(e,l.value,null):u(e,l.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(i)){if(a&&_.match(/^\d+$/))return o;(i=JSON.stringify(""+_)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.slice(1,-1),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+o}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function w(e){return b(e)&&"[object RegExp]"===O(e)}function b(e){return"object"==typeof e&&null!==e}function k(e){return b(e)&&"[object Date]"===O(e)}function x(e){return b(e)&&("[object Error]"===O(e)||e instanceof Error)}function P(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}e.exports.debuglog=function(t){if(t=t.toUpperCase(),!i[t])if(o.test(t)){var n=r.pid;i[t]=function(){var r=e.exports.format.apply(e.exports,arguments);console.error("%s %d: %s",t,n,r)}}else i[t]=function(){};return i[t]},e.exports.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.exports.types=a("l5y9f"),e.exports.isArray=h,e.exports.isBoolean=p,e.exports.isNull=g,e.exports.isNullOrUndefined=function(e){return null==e},e.exports.isNumber=v,e.exports.isString=m,e.exports.isSymbol=function(e){return"symbol"==typeof e},e.exports.isUndefined=y,e.exports.isRegExp=w,e.exports.types.isRegExp=w,e.exports.isObject=b,e.exports.isDate=k,e.exports.types.isDate=k,e.exports.isError=x,e.exports.types.isNativeError=x,e.exports.isFunction=P,e.exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.exports.isBuffer=a("535KJ");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],r].join(" ")),e.exports.format.apply(e.exports,arguments))},e.exports.inherits=a("kIEeu"),e.exports._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var S="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(S&&e[S]){var t;if("function"!=typeof(t=e[S]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),_=[],a=0;a<arguments.length;a++)_.push(arguments[a]);_.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,_)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),S&&Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},e.exports.promisify.custom=S,e.exports.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var _=t.pop();if("function"!=typeof _)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return _.apply(a,arguments)};e.apply(this,t).then((function(e){r.nextTick(i.bind(null,null,e))}),(function(e){r.nextTick(T.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}})),i("l5y9f",(function(e,t){var r=a("7UCbU"),n=a("8VyzH"),_=a("8FbLp"),i=a("8JlaR");function o(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,s="undefined"!=typeof Symbol,c=o(Object.prototype.toString),u=o(Number.prototype.valueOf),f=o(String.prototype.valueOf),d=o(Boolean.prototype.valueOf);if(l)var h=o(BigInt.prototype.valueOf);if(s)var p=o(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===c(e)}function m(e){return"[object Set]"===c(e)}function y(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function b(e){return"[object ArrayBuffer]"===c(e)}function k(e){return"undefined"!=typeof ArrayBuffer&&(b.working?b(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===c(e)}function P(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}e.exports.isArgumentsObject=r,e.exports.isGeneratorFunction=n,e.exports.isTypedArray=i,e.exports.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.exports.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||P(e)},e.exports.isUint8Array=function(e){return"Uint8Array"===_(e)},e.exports.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===_(e)},e.exports.isUint16Array=function(e){return"Uint16Array"===_(e)},e.exports.isUint32Array=function(e){return"Uint32Array"===_(e)},e.exports.isInt8Array=function(e){return"Int8Array"===_(e)},e.exports.isInt16Array=function(e){return"Int16Array"===_(e)},e.exports.isInt32Array=function(e){return"Int32Array"===_(e)},e.exports.isFloat32Array=function(e){return"Float32Array"===_(e)},e.exports.isFloat64Array=function(e){return"Float64Array"===_(e)},e.exports.isBigInt64Array=function(e){return"BigInt64Array"===_(e)},e.exports.isBigUint64Array=function(e){return"BigUint64Array"===_(e)},v.working="undefined"!=typeof Map&&v(new Map),e.exports.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),e.exports.isSet=function(e){return"undefined"!=typeof Set&&(m.working?m(e):e instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),e.exports.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.exports.isWeakSet=function(e){return w(e)},b.working="undefined"!=typeof ArrayBuffer&&b(new ArrayBuffer),e.exports.isArrayBuffer=k,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),e.exports.isDataView=P;var O="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function A(e){return void 0!==O&&(void 0===E.working&&(E.working=E(new O)),E.working?E(e):e instanceof O)}function C(e){return g(e,u)}function S(e){return g(e,f)}function T(e){return g(e,d)}function N(e){return l&&g(e,h)}function L(e){return s&&g(e,p)}e.exports.isSharedArrayBuffer=A,e.exports.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},e.exports.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},e.exports.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},e.exports.isGeneratorObject=function(e){return"[object Generator]"===c(e)},e.exports.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},e.exports.isNumberObject=C,e.exports.isStringObject=S,e.exports.isBooleanObject=T,e.exports.isBigIntObject=N,e.exports.isSymbolObject=L,e.exports.isBoxedPrimitive=function(e){return C(e)||S(e)||T(e)||N(e)||L(e)},e.exports.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(k(e)||A(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e.exports,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),i("7UCbU",(function(e,t){var r=a("fMbqd")(),n=a("cOGba")("Object.prototype.toString"),_=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===n(e)},i=function(e){return!!_(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n(e)&&"callee"in e&&"[object Function]"===n(e.callee)},o=function(){return _(arguments)}();_.isLegacyArguments=i,e.exports=o?_:i})),i("fMbqd",(function(e,t){var r=a("j9k2R");e.exports=function(){return r()&&!!Symbol.toStringTag}})),i("cOGba",(function(e,t){var r=a("1GFyc"),n=a("lJ4PN"),_=n(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&_(e,".prototype.")>-1?n(a):a}})),i("8VyzH",(function(e,t){var r,n=Object.prototype.toString,_=Function.prototype.toString,i=/^\s*(?:function)?\*/,o=a("fMbqd")(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(i.test(_.call(e)))return!0;if(!o)return"[object GeneratorFunction]"===n.call(e);if(!l)return!1;if(void 0===r){var t=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&l(t)}return l(e)===r}})),i("8FbLp",(function(t,r){var n=a("3gMM1"),_=a("9uJfP"),i=a("lJ4PN"),o=a("iiYVQ"),l=a("fd0O5"),s=o("Object.prototype.toString"),c=a("fMbqd")(),u="undefined"==typeof globalThis?e:globalThis,f=_(),d=o("String.prototype.slice"),h=Object.getPrototypeOf,p=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},g={__proto__:null};n(f,c&&l&&h?function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=h(t),n=l(r,Symbol.toStringTag);if(!n){var _=h(r);n=l(_,Symbol.toStringTag)}g["$"+e]=i(n.get)}}:function(e){var t=new u[e],r=t.slice||t.set;r&&(g["$"+e]=i(r))});t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=d(s(e),8,-1);return p(f,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(g,(function(r,n){if(!t)try{r(e),t=d(n,1)}catch(e){}})),t}(e)}return l?function(e){var t=!1;return n(g,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=d(n,1))}catch(e){}})),t}(e):null}})),i("3gMM1",(function(e,t){var r=a("guTVa"),n=Object.prototype.toString,_=Object.prototype.hasOwnProperty;e.exports=function(e,t,a){if(!r(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=a),"[object Array]"===n.call(e)?function(e,t,r){for(var n=0,a=e.length;n<a;n++)_.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,i):"string"==typeof e?function(e,t,r){for(var n=0,_=e.length;n<_;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,i):function(e,t,r){for(var n in e)_.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,i)}})),i("guTVa",(function(e,t){var r,n,_=Function.prototype.toString,a="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},a((function(){throw 42}),null,r)}catch(e){e!==n&&(a=null)}else a=null;var i=/^\s*class\b/,o=function(e){try{var t=_.call(e);return i.test(t)}catch(e){return!1}},l=function(e){try{return!o(e)&&(_.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var d=document.all;s.call(d)===s.call(document.all)&&(f=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=s.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=a?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{a(e,null,r)}catch(e){if(e!==n)return!1}return!o(e)&&l(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return l(e);if(o(e))return!1;var t=s.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&l(e)}})),i("9uJfP",(function(t,r){var n=a("lAymU"),_="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof _[n[t]]&&(e[e.length]=n[t]);return e}})),i("lAymU",(function(e,t){e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]})),i("iiYVQ",(function(e,t){var r=a("1GFyc"),n=a("lJ4PN"),_=n(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&_(e,".prototype.")>-1?n(a):a}})),i("8JlaR",(function(e,t){var r=a("8FbLp");e.exports=function(e){return!!r(e)}})),i("535KJ",(function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}})),i("kIEeu",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),i("8DvLW",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const n=r(a("kXcQo"));var _=a("l8NiV"),i=a("b9BWf");class o{constructor(e){this.errors=[],this.$refs=e}addError(e){void 0===this.errors&&(this.errors=[]);const t=this.errors.map((({footprint:e})=>e));"errors"in e&&Array.isArray(e.errors)?this.errors.push(...e.errors.map(_.normalizeError).filter((({footprint:e})=>!t.includes(e)))):"footprint"in e&&t.includes(e.footprint)||this.errors.push((0,_.normalizeError)(e))}exists(e,t){try{return this.resolve(e,t),!0}catch{return!1}}get(e,t){return this.resolve(e,t)?.value}resolve(e,t,r,a){const o=new n.default(this,e,r);try{return o.resolve(this.value,t,a)}catch(e){if(!t||!t.continueOnError||!(0,_.isHandledError)(e))throw e;return null===e.path&&(e.path=(0,i.safePointerToPath)((0,i.getHash)(a))),e instanceof _.InvalidPointerError&&(e.source=decodeURI((0,i.stripHash)(a))),this.addError(e),null}}set(e,t){const r=new n.default(this,e);this.value=r.set(this.value,t)}static is$Ref(e){return Boolean(e)&&"object"==typeof e&&null!==e&&"$ref"in e&&"string"==typeof e.$ref&&e.$ref.length>0}static isExternal$Ref(e){return o.is$Ref(e)&&"#"!==e.$ref[0]}static isAllowed$Ref(e,t){if(this.is$Ref(e)){if("#/"===e.$ref.substring(0,2)||"#"===e.$ref)return!0;if("#"!==e.$ref[0]&&(!t||t.resolve?.external))return!0}}static isExtended$Ref(e){return o.is$Ref(e)&&Object.keys(e).length>1}static dereference(e,t){if(t&&"object"==typeof t&&o.isExtended$Ref(e)){const r={};for(const t of Object.keys(e))"$ref"!==t&&(r[t]=e[t]);for(const e of Object.keys(t))e in r||(r[e]=t[e]);return r}return t}}e.exports.default=o})),i("kXcQo",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=i(a("b9BWf"));var c=a("l8NiV");const u=/\//g,f=/~/g,d=/~1/g,h=/~0/g,p=e=>{try{return decodeURIComponent(e)}catch{return e}};class g{constructor(e,t,r){this.$ref=e,this.path=t,this.originalPath=r||t,this.value=void 0,this.circular=!1,this.indirections=0}resolve(e,t,r){const n=g.parse(this.path,this.originalPath);this.value=y(e);for(let e=0;e<n.length;e++){if(v(this,t,r)&&(this.path=g.join(this.path,n.slice(e))),"object"==typeof this.value&&null!==this.value&&!w(r)&&"$ref"in this.value)return this;const _=n[e];if(void 0===this.value[_]||null===this.value[_]&&e===n.length-1){let t=!1;for(let r=n.length-1;r>e;r--){const _=n.slice(e,r+1).join("/");if(void 0!==this.value[_]){this.value=this.value[_],e=r,t=!0;break}}if(t)continue;throw this.value=null,new c.MissingPointerError(_,decodeURI(this.originalPath))}this.value=this.value[_]}return(!this.value||this.value.$ref&&s.resolve(this.path,this.value.$ref)!==r)&&v(this,t,r),this}set(e,t,r){const n=g.parse(this.path);let _;if(0===n.length)return this.value=t,t;this.value=y(e);for(let e=0;e<n.length-1;e++)v(this,r),_=n[e],this.value&&void 0!==this.value[_]?this.value=this.value[_]:this.value=m(this,_,{});return v(this,r),_=n[n.length-1],m(this,_,t),e}static parse(e,t){const r=s.getHash(e).substring(1);if(!r)return[];const n=r.split("/");for(let e=0;e<n.length;e++)n[e]=p(n[e].replace(d,"/").replace(h,"~"));if(""!==n[0])throw new c.InvalidPointerError(r,void 0===t?e:t);return n.slice(1)}static join(e,t){-1===e.indexOf("#")&&(e+="#"),t=Array.isArray(t)?t:[t];for(let r=0;r<t.length;r++){const n=t[r];e+="/"+encodeURIComponent(n.replace(f,"~0").replace(u,"~1"))}return e}}function v(e,t,r){if(l.default.isAllowed$Ref(e.value,t)){const n=s.resolve(e.path,e.value.$ref);if(n!==e.path||w(r)){const r=e.$ref.$refs._resolve(n,e.path,t);return null!==r&&(e.indirections+=r.indirections+1,l.default.isExtended$Ref(e.value)?(e.value=l.default.dereference(e.value,r.value),!1):(e.$ref=r.$ref,e.path=r.path,e.value=r.value,!0))}e.circular=!0}}function m(e,t,r){if(!e.value||"object"!=typeof e.value)throw new c.JSONParserError(`Error assigning $ref pointer "${e.path}". \nCannot set "${t}" of a non-object.`);return"-"===t&&Array.isArray(e.value)?e.value.push(r):e.value[t]=r,r}function y(e){if((0,c.isHandledError)(e))throw e;return e}function w(e){return"string"==typeof e&&0==g.parse(e).length}e.exports.default=g})),i("b9BWf",(function(e,t){var r,n=a("4bJEF"),_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&_(t,e,n[a]);return i(t,e),t}),l=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.parse=void 0,e.exports.resolve=m,e.exports.cwd=y,e.exports.getProtocol=w,e.exports.getExtension=function(e){const t=e.lastIndexOf(".");return t>=0?b(e.substr(t).toLowerCase()):""},e.exports.stripQuery=b,e.exports.getHash=k,e.exports.stripHash=x,e.exports.isHttp=function(e){const t=w(e);return"http"===t||"https"===t||void 0===t&&"undefined"!=typeof window},e.exports.isFileSystemPath=P,e.exports.fromFileSystemPath=function(e){if((0,p.isWindows)()){const t=y(),r=e.toUpperCase(),n=(0,s.default)(t).toUpperCase(),_=r.includes(n),i=r.includes(n),o=c.win32?.isAbsolute(e)||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("file://");_||i||o||t.startsWith("http")||(e=(0,a("2R1eR").join)(t,e)),e=(0,s.default)(e)}e=encodeURI(e);for(const t of g)e=e.replace(t[0],t[1]);return e},e.exports.toFileSystemPath=function(e,t){e=decodeURI(e);for(let t=0;t<v.length;t+=2)e=e.replace(v[t],v[t+1]);let r="file://"===e.substr(0,7).toLowerCase();r&&(e="/"===e[7]?e.substr(8):e.substr(7),(0,p.isWindows)()&&"/"===e[1]&&(e=e[0]+":"+e.substr(1)),t?e="file:///"+e:(r=!1,e=(0,p.isWindows)()?e:"/"+e));(0,p.isWindows)()&&!r&&":\\"===(e=e.replace(u,"\\")).substr(1,2)&&(e=e[0].toUpperCase()+e.substr(1));return e},e.exports.safePointerToPath=function(e){return e.length<=1||"#"!==e[0]||"/"!==e[1]?[]:e.slice(2).split("/").map((e=>decodeURIComponent(e).replace(d,"/").replace(h,"~")))},e.exports.relative=function(e,t){if(!P(e)||!P(t))return m(e,t);const r=c.default.dirname(x(e)),n=x(t);return c.default.relative(r,n)+k(t)};const s=l(a("2vOVV")),c=o(a("2R1eR")),u=/\//g,f=/^(\w{2,}):\/\//i,d=/~1/g,h=/~0/g;var p=a("8crO1");const g=[[/\?/g,"%3F"],[/#/g,"%23"]],v=[/%23/g,"#",/%24/g,"$",/%26/g,"&",/%2C/g,",",/%40/g,"@"];function m(e,t){const r=new URL((0,s.default)(e),"resolve://"),n=new URL((0,s.default)(t),r),_=t.match(/(\s*)$/)?.[1]||"";if("resolve:"===n.protocol){const{pathname:e,search:t,hash:r}=n;return e+t+r+_}return n.toString()+_}function y(){if("undefined"!=typeof window)return location.href;const e=n.cwd(),t=e.slice(-1);return"/"===t||"\\"===t?e:e+"/"}function w(e){const t=f.exec(e||"");if(t)return t[1].toLowerCase()}function b(e){const t=e.indexOf("?");return t>=0&&(e=e.substr(0,t)),e}function k(e){if(!e)return"#";const t=e.indexOf("#");return t>=0?e.substring(t):"#"}function x(e){if(!e)return"";const t=e.indexOf("#");return t>=0&&(e=e.substring(0,t)),e}function P(e){if("undefined"!=typeof window||void 0!==n)return!1;const t=w(e);return void 0===t||"file"===t}e.exports.parse=e=>new URL(e)})),i("2vOVV",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e.startsWith("\\\\?\\")?e:e.split(n.default?.win32?.sep).join(n.default?.posix?.sep??"/")};const n=r(a("2R1eR"))})),i("8crO1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isWindows=void 0;const r=/^win/.test(globalThis.process?globalThis.process.platform:"");e.exports.isWindows=()=>r})),i("l8NiV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.InvalidPointerError=e.exports.TimeoutError=e.exports.MissingPointerError=e.exports.UnmatchedResolverError=e.exports.ResolverError=e.exports.UnmatchedParserError=e.exports.ParserError=e.exports.JSONParserErrorGroup=e.exports.JSONParserError=void 0,e.exports.isHandledError=function(e){return e instanceof _||e instanceof i},e.exports.normalizeError=function(e){null===e.path&&(e.path=[]);return e},a("58l9B");var r=a("iZAwj"),n=a("b9BWf");class _ extends Error{constructor(e,t){super(),this.code="EUNKNOWN",this.name="JSONParserError",this.message=e,this.source=t,this.path=null,r.Ono.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}}e.exports.JSONParserError=_;class i extends Error{constructor(e){super(),this.files=e,this.name="JSONParserErrorGroup",this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${(0,n.toFileSystemPath)(e.$refs._root$Ref.path)}'`,r.Ono.extend(this)}static getParserErrors(e){const t=[];for(const r of Object.values(e.$refs._$refs))r.errors&&t.push(...r.errors);return t}get errors(){return i.getParserErrors(this.files)}}e.exports.JSONParserErrorGroup=i;e.exports.ParserError=class extends _{constructor(e,t){super(`Error parsing ${t}: ${e}`,t),this.code="EPARSER",this.name="ParserError"}};e.exports.UnmatchedParserError=class extends _{constructor(e){super(`Could not find parser for "${e}"`,e),this.code="EUNMATCHEDPARSER",this.name="UnmatchedParserError"}};e.exports.ResolverError=class extends _{constructor(e,t){super(e.message||`Error reading file "${t}"`,t),this.code="ERESOLVER",this.name="ResolverError","code"in e&&(this.ioErrorCode=String(e.code))}};e.exports.UnmatchedResolverError=class extends _{constructor(e){super(`Could not find resolver for "${e}"`,e),this.code="EUNMATCHEDRESOLVER",this.name="UnmatchedResolverError"}};e.exports.MissingPointerError=class extends _{constructor(e,t){super(`Missing $ref pointer "${(0,n.getHash)(t)}". Token "${e}" does not exist.`,(0,n.stripHash)(t)),this.code="EMISSINGPOINTER",this.name="MissingPointerError"}};e.exports.TimeoutError=class extends _{constructor(e){super(`Dereferencing timeout reached: ${e}ms`),this.code="ETIMEOUT",this.name="TimeoutError"}};e.exports.InvalidPointerError=class extends _{constructor(e,t){super(`Invalid $ref pointer "${e}". Pointers must begin with "#/"`,(0,n.stripHash)(t)),this.code="EUNMATCHEDRESOLVER",this.name="InvalidPointerError"}}})),i("1FCt6",(function(e,t){var r,n=a("3M269").Buffer,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&_(t,e,n[a]);return i(t,e),t});Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("b9BWf")),c=o(a("02Yrw"));var u=a("l8NiV");e.exports.default=async function(e,t,r){const _=e.indexOf("#");let a="";_>=0&&(a=e.substring(_),e=e.substring(0,_));const i=t._add(e),o={url:e,hash:a,extension:s.getExtension(e)};try{const e=await async function(e,t,r){let n=c.all(t.resolve);n=c.filter(n,"canRead",e),c.sort(n);try{return await c.run(n,"read",e,r)}catch(r){throw!r&&t.continueOnError?new u.UnmatchedResolverError(e.url):r&&"error"in r?r.error instanceof u.ResolverError?r.error:new u.ResolverError(r,e.url):l.ono.syntax(`Unable to resolve $ref pointer "${e.url}"`)}}(o,r,t);i.pathType=e.plugin.name,o.data=e.result;const _=await async function(e,t,r){const _=c.all(t.parse),a=c.filter(_,"canParse",e),i=a.length>0?a:_;c.sort(i);try{const t=await c.run(i,"parse",e,r);if(!t.plugin.allowEmpty&&(void 0===(o=t.result)||"object"==typeof o&&0===Object.keys(o).length||"string"==typeof o&&0===o.trim().length||n.isBuffer(o)&&0===o.length))throw l.ono.syntax(`Error parsing "${e.url}" as ${t.plugin.name}. \nParsed value is empty`);return t}catch(r){throw!r&&t.continueOnError?new u.UnmatchedParserError(e.url):r&&r.message&&r.message.startsWith("Error parsing")?r:r&&"error"in r?r.error instanceof u.ParserError?r.error:new u.ParserError(r.error.message,e.url):l.ono.syntax(`Unable to parse ${e.url}`)}var o}(o,r,t);return i.value=_.result,_.result}catch(e){throw(0,u.isHandledError)(e)&&(i.value=e),e}}})),i("3M269",(function(e,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n,_;t(e.exports,"Buffer",(()=>n),(e=>n=e)),t(e.exports,"INSPECT_MAX_BYTES",(()=>_),(e=>_=e));var i=a("fVvVb"),o=a("js4oQ"),l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n=u,_=50;var s=2147483647;function c(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return f(e,t,r)}function f(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),n=c(r),_=n.write(e,t);_!==r&&(n=n.slice(0,_));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(G(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(G(e,ArrayBuffer)||e&&G(e.buffer,ArrayBuffer))return g(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(G(e,SharedArrayBuffer)||e&&G(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var _=function(e){if(u.isBuffer(e)){var t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||W(e.length)?c(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(_)return _;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return d(e),c(e<0?0:0|v(e))}function p(e){for(var t=e.length<0?0:0|v(e.length),r=c(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function v(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||G(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var _=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(_)return n?-1:q(e).length;t=(""+t).toLowerCase(),_=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,_){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),W(r=+r)&&(r=_?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(_)return-1;r=e.length-1}else if(r<0){if(!_)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,_);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?_?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,_);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,_){var a,i=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,r/=2}function s(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(_){var c=-1;for(a=r;a<o;a++)if(s(e,a)===s(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*i}else-1!==c&&(a-=a-c),c=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var u=!0,f=0;f<l;f++)if(s(e,a+f)!==s(t,f)){u=!1;break}if(u)return a}return-1}function x(e,t,r,n){r=Number(r)||0;var _=e.length-r;n?(n=Number(n))>_&&(n=_):n=_;var a=t.length;n>a/2&&(n=a/2);for(var i=0;i<n;++i){var o=parseInt(t.substr(2*i,2),16);if(W(o))return i;e[r+i]=o}return i}function P(e,t,r,n){return U(q(t,e.length-r),e,r,n)}function O(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return U(V(t),e,r,n)}function A(e,t,r,n){return U(function(e,t){for(var r,n,_,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,_=r%256,a.push(_),a.push(n);return a}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],_=t;_<r;){var a,i,o,l,s=e[_],c=null,u=s>239?4:s>223?3:s>191?2:1;if(_+u<=r)switch(u){case 1:s<128&&(c=s);break;case 2:128==(192&(a=e[_+1]))&&(l=(31&s)<<6|63&a)>127&&(c=l);break;case 3:a=e[_+1],i=e[_+2],128==(192&a)&&128==(192&i)&&(l=(15&s)<<12|(63&a)<<6|63&i)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[_+1],i=e[_+2],o=e[_+3],128==(192&a)&&128==(192&i)&&128==(192&o)&&(l=(15&s)<<18|(63&a)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),_+=u}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return f(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,_=0,a=Math.min(r,n);_<a;++_)if(e[_]!==t[_]){r=e[_],n=t[_];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),_=0;for(r=0;r<e.length;++r){var a=e[r];if(G(a,Uint8Array))_+a.length>n.length?u.from(a).copy(n,_):Uint8Array.prototype.set.call(n,a,_);else{if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,_)}_+=a.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=_;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(u.prototype[l]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,_){if(G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===_&&(_=this.length),t<0||r>e.length||n<0||_>this.length)throw new RangeError("out of range index");if(n>=_&&t>=r)return 0;if(n>=_)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(_>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),o=Math.min(a,i),l=this.slice(n,_),s=e.slice(t,r),c=0;c<o;++c)if(l[c]!==s[c]){a=l[c],i=s[c];break}return a<i?-1:i<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var _=this.length-t;if((void 0===r||r>_)&&(r=_),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return P(this,e,t,r);case"ascii":case"latin1":case"binary":return O(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function N(e,t,r){var n="";r=Math.min(e.length,r);for(var _=t;_<r;++_)n+=String.fromCharCode(127&e[_]);return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var _=t;_<r;++_)n+=String.fromCharCode(e[_]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var _="",a=t;a<r;++a)_+=$[e[a]];return _}function I(e,t,r){for(var n=e.slice(t,r),_="",a=0;a<n.length-1;a+=2)_+=String.fromCharCode(n[a]+256*n[a+1]);return _}function j(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,_,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>_||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n,_,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,_){return t=+t,r>>>=0,_||D(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,_){return t=+t,r>>>=0,_||D(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e],_=1,a=0;++a<t&&(_*=256);)n+=this[e+a]*_;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e+--t],_=1;t>0&&(_*=256);)n+=this[e+--t]*_;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e],_=1,a=0;++a<t&&(_*=256);)n+=this[e+a]*_;return n>=(_*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=t,_=1,a=this[e+--n];n>0&&(_*=256);)a+=this[e+--n]*_;return a>=(_*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var _=1,a=0;for(this[t]=255&e;++a<r&&(_*=256);)this[t+a]=e/_&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||R(this,e,t,r,Math.pow(2,8*r)-1,0);var _=r-1,a=1;for(this[t+_]=255&e;--_>=0&&(a*=256);)this[t+_]=e/a&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var _=Math.pow(2,8*r-1);R(this,e,t,r,_-1,-_)}var a=0,i=1,o=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var _=Math.pow(2,8*r-1);R(this,e,t,r,_-1,-_)}var a=r-1,i=1,o=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var _=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),_},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var _=e.charCodeAt(0);("utf8"===n&&_<128||"latin1"===n)&&(e=_)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=u.isBuffer(e)?e:u.from(e,n),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%o]}return this};var z=/[^+/0-9A-Za-z-_]/g;function q(e,t){var r;t=t||1/0;for(var n=e.length,_=null,a=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!_){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}_=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),_=r;continue}r=65536+(_-55296<<10|r-56320)}else _&&(t-=3)>-1&&a.push(239,191,189);if(_=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function V(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var _=0;_<n&&!(_+r>=t.length||_>=e.length);++_)t[_+r]=e[_];return _}function G(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}var $=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,_=0;_<16;++_)t[n+_]=e[r]+e[_];return t}()})),i("fVvVb",(function(e,r){var n,_;t(e.exports,"toByteArray",(()=>n),(e=>n=e)),t(e.exports,"fromByteArray",(()=>_),(e=>_=e)),n=function(e){var t,r,n=c(e),_=n[0],a=n[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,_,a)),s=0,u=a>0?_-4:_;for(r=0;r<u;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[s++]=t>>16&255,l[s++]=t>>8&255,l[s++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[s++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[s++]=t>>8&255,l[s++]=255&t);return l},_=function(e){for(var t,r=e.length,n=r%3,_=[],i=16383,o=0,l=r-n;o<l;o+=i)_.push(u(e,o,o+i>l?l:o+i));1===n?(t=e[r-1],_.push(a[t>>2]+a[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],_.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return _.join("")};for(var a=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)a[s]=l[s],i[l.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,r){for(var n,_,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a[(_=n)>>18&63]+a[_>>12&63]+a[_>>6&63]+a[63&_]);return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63})),i("js4oQ",(function(e,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n,_;t(e.exports,"read",(()=>n),(e=>n=e)),t(e.exports,"write",(()=>_),(e=>_=e)),n=function(e,t,r,n,_){var a,i,o=8*_-n-1,l=(1<<o)-1,s=l>>1,c=-7,u=r?_-1:0,f=r?-1:1,d=e[t+u];for(u+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+u],u+=f,c-=8);for(i=a&(1<<-c)-1,a>>=-c,c+=n;c>0;i=256*i+e[t+u],u+=f,c-=8);if(0===a)a=1-s;else{if(a===l)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,n),a-=s}return(d?-1:1)*i*Math.pow(2,a-n)},_=function(e,t,r,n,_,a){var i,o,l,s=8*a-_-1,c=(1<<s)-1,u=c>>1,f=23===_?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,h=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=c?(o=0,i=c):i+u>=1?(o=(t*l-1)*Math.pow(2,_),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,_),i=0));_>=8;e[r+d]=255&o,d+=h,o/=256,_-=8);for(i=i<<_|o,s+=_;s>0;e[r+d]=255&i,d+=h,i/=256,s-=8);e[r+d-h]|=128*p}})),i("02Yrw",(function(e,t){function r(e,t,r,n,_){const a=e[t];if("function"==typeof a)return a.apply(e,[r,n,_]);if(!n){if(a instanceof RegExp)return a.test(r.url);if("string"==typeof a)return a===r.extension;if(Array.isArray(a))return-1!==a.indexOf(r.extension)}return a}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.all=function(e){return Object.keys(e||{}).filter((t=>"object"==typeof e[t])).map((t=>(e[t].name=t,e[t])))},e.exports.filter=function(e,t,n){return e.filter((e=>!!r(e,t,n)))},e.exports.sort=function(e){for(const t of e)t.order=t.order||Number.MAX_SAFE_INTEGER;return e.sort(((e,t)=>e.order-t.order))},e.exports.run=async function(e,t,n,_){let a,i,o=0;return new Promise(((l,s)=>{function c(){if(a=e[o++],!a)return s(i);try{const i=r(a,t,n,u,_);if(i&&"function"==typeof i.then)i.then(f,d);else if(void 0!==i)f(i);else if(o===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(e){d(e)}}function u(e,t){e?d(e):f(t)}function f(e){l({plugin:a,result:e})}function d(e){i={plugin:a,error:e},c()}c()}))}})),i("dlWR1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.normalizeArgs=n;var r=a("h1anm");function n(e){let t,n,_,a;const i=Array.prototype.slice.call(e);"function"==typeof i[i.length-1]&&(a=i.pop()),"string"==typeof i[0]?(t=i[0],"object"==typeof i[2]?(n=i[1],_=i[2]):(n=void 0,_=i[1])):(t="",n=i[0],_=i[1]);try{_=(0,r.getNewOptions)(_)}catch(e){console.error(`JSON Schema Ref Parser: Error normalizing options: ${e}`)}return _.mutateInputSchema||"object"!=typeof n||(n=JSON.parse(JSON.stringify(n))),{path:t,schema:n,options:_,callback:a}}e.exports.default=n})),i("h1anm",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getNewOptions=e.exports.getJsonSchemaRefParserDefaultOptions=void 0;const n=r(a("bBkmn")),_=r(a("8vevj")),i=r(a("bftfD")),o=r(a("e0bcV")),l=r(a("bAdDM")),s=r(a("94hgF"));e.exports.getJsonSchemaRefParserDefaultOptions=()=>({parse:{json:{...n.default},yaml:{..._.default},text:{...i.default},binary:{...o.default}},resolve:{file:{...l.default},http:{...s.default},external:!0},continueOnError:!1,dereference:{circular:!0,excludedPathMatcher:()=>!1,referenceResolution:"relative"},mutateInputSchema:!0});function c(e,t){if(u(t)){const r=Object.keys(t).filter((e=>!["__proto__","constructor","prototype"].includes(e)));for(let n=0;n<r.length;n++){const _=r[n],a=t[_],i=e[_];u(a)?e[_]=c(i||{},a):void 0!==a&&(e[_]=a)}}return e}function u(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}e.exports.getNewOptions=t=>{const r=(0,e.exports.getJsonSchemaRefParserDefaultOptions)();return t&&c(r,t),r}})),i("bBkmn",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=a("l8NiV");e.exports.default={order:100,allowEmpty:!0,canParse:".json",allowBOM:!0,async parse(e){let t=e.data;if(r.isBuffer(t)&&(t=t.toString()),"string"!=typeof t)return t;if(0!==t.trim().length)try{return JSON.parse(t)}catch(r){if(this.allowBOM)try{const e=t.indexOf("{");return t=t.slice(e),JSON.parse(t)}catch(t){throw new n.ParserError(t.message,e.url)}throw new n.ParserError(r.message,e.url)}}}})),i("8vevj",(function(e,t){var r=a("3M269").Buffer,n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var _=a("l8NiV");const i=n(a("9EoL2"));e.exports.default={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let t=e.data;if(r.isBuffer(t)&&(t=t.toString()),"string"!=typeof t)return t;try{return i.default.load(t,{schema:a("9EoL2").JSON_SCHEMA})}catch(t){throw new _.ParserError(t?.message||"Parser Error",e.url)}}}})),i("9EoL2",(function(e,r){var n,_,i,o,l,s,c,u,f,d,h,p,g,v;t(e.exports,"Type",(()=>n),(e=>n=e)),t(e.exports,"Schema",(()=>_),(e=>_=e)),t(e.exports,"FAILSAFE_SCHEMA",(()=>i),(e=>i=e)),t(e.exports,"JSON_SCHEMA",(()=>o),(e=>o=e)),t(e.exports,"CORE_SCHEMA",(()=>l),(e=>l=e)),t(e.exports,"DEFAULT_SCHEMA",(()=>s),(e=>s=e)),t(e.exports,"load",(()=>c),(e=>c=e)),t(e.exports,"loadAll",(()=>u),(e=>u=e)),t(e.exports,"dump",(()=>f),(e=>f=e)),t(e.exports,"YAMLException",(()=>d),(e=>d=e)),t(e.exports,"types",(()=>h),(e=>h=e)),t(e.exports,"safeLoad",(()=>p),(e=>p=e)),t(e.exports,"safeLoadAll",(()=>g),(e=>g=e)),t(e.exports,"safeDump",(()=>v),(e=>v=e));var m=a("9jn82"),y=a("bWYPR");function w(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}n=a("ltPw1"),_=a("b1A7U"),i=a("inVvI"),o=a("apZ10"),l=a("aBiEO"),s=a("39QRs"),c=m.load,u=m.loadAll,f=y.dump,d=a("bd00D"),h={binary:a("XPkKA"),float:a("1XPxO"),map:a("fMFQD"),null:a("8QhUm"),pairs:a("iKor8"),set:a("2LZcQ"),timestamp:a("jSxhT"),bool:a("e939J"),int:a("1YR4t"),merge:a("d0wzf"),omap:a("2NLsz"),seq:a("7SckX"),str:a("c670G")},p=w("safeLoad","load"),g=w("safeLoadAll","loadAll"),v=w("safeDump","dump")})),i("9jn82",(function(e,r){var n,_;t(e.exports,"loadAll",(()=>n),(e=>n=e)),t(e.exports,"load",(()=>_),(e=>_=e));var i=a("aOfT7"),o=a("bd00D"),l=a("69qlB"),s=a("39QRs"),c=Object.prototype.hasOwnProperty,u=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,d=/[,\[\]\{\}]/,h=/^(?:!|!!|![a-z\-]+!)$/i,p=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function g(e){return Object.prototype.toString.call(e)}function v(e){return 10===e||13===e}function m(e){return 9===e||32===e}function y(e){return 9===e||32===e||10===e||13===e}function w(e){return 44===e||91===e||93===e||123===e||125===e}function b(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function k(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function x(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var P=new Array(256),O=new Array(256),E=0;E<256;E++)P[E]=k(E)?1:0,O[E]=k(E);function A(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||s,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function C(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=l(r),new o(t,r)}function S(e,t){throw C(e,t)}function T(e,t){e.onWarning&&e.onWarning.call(null,C(e,t))}var N={YAML:function(e,t,r){var n,_,a;null!==e.version&&S(e,"duplication of %YAML directive"),1!==r.length&&S(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&S(e,"ill-formed argument of the YAML directive"),_=parseInt(n[1],10),a=parseInt(n[2],10),1!==_&&S(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&T(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,_;2!==r.length&&S(e,"TAG directive accepts exactly two arguments"),n=r[0],_=r[1],h.test(n)||S(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,n)&&S(e,'there is a previously declared suffix for "'+n+'" tag handle'),p.test(_)||S(e,"ill-formed tag prefix (second argument) of the TAG directive");try{_=decodeURIComponent(_)}catch(t){S(e,"tag prefix is malformed: "+_)}e.tagMap[n]=_}};function L(e,t,r,n){var _,a,i,o;if(t<r){if(o=e.input.slice(t,r),n)for(_=0,a=o.length;_<a;_+=1)9===(i=o.charCodeAt(_))||32<=i&&i<=1114111||S(e,"expected valid JSON character");else u.test(o)&&S(e,"the stream contains non-printable characters");e.result+=o}}function M(e,t,r,n){var _,a,o,l;for(i.isObject(r)||S(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,l=(_=Object.keys(r)).length;o<l;o+=1)a=_[o],c.call(t,a)||(t[a]=r[a],n[a]=!0)}function I(e,t,r,n,_,a,i,o,l){var s,u;if(Array.isArray(_))for(s=0,u=(_=Array.prototype.slice.call(_)).length;s<u;s+=1)Array.isArray(_[s])&&S(e,"nested arrays are not supported inside keys"),"object"==typeof _&&"[object Object]"===g(_[s])&&(_[s]="[object Object]");if("object"==typeof _&&"[object Object]"===g(_)&&(_="[object Object]"),_=String(_),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(a))for(s=0,u=a.length;s<u;s+=1)M(e,t,a[s],r);else M(e,t,a,r);else e.json||c.call(r,_)||!c.call(t,_)||(e.line=i||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,S(e,"duplicated mapping key")),"__proto__"===_?Object.defineProperty(t,_,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[_]=a,delete r[_];return t}function j(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function R(e,t,r){for(var n=0,_=e.input.charCodeAt(e.position);0!==_;){for(;m(_);)9===_&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),_=e.input.charCodeAt(++e.position);if(t&&35===_)do{_=e.input.charCodeAt(++e.position)}while(10!==_&&13!==_&&0!==_);if(!v(_))break;for(j(e),_=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===_;)e.lineIndent++,_=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&T(e,"deficient indentation"),n}function D(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!y(t)))}function F(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function B(e,t){var r,n,_=e.tag,a=e.anchor,i=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),n=e.input.charCodeAt(e.position);0!==n&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),45===n)&&y(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,R(e,!0,-1)&&e.lineIndent<=t)i.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,V(e,t,3,!1,!0),i.push(e.result),R(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=_,e.anchor=a,e.kind="sequence",e.result=i,!0)}function z(e){var t,r,n,_,a=!1,i=!1;if(33!==(_=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&S(e,"duplication of a tag property"),60===(_=e.input.charCodeAt(++e.position))?(a=!0,_=e.input.charCodeAt(++e.position)):33===_?(i=!0,r="!!",_=e.input.charCodeAt(++e.position)):r="!",t=e.position,a){do{_=e.input.charCodeAt(++e.position)}while(0!==_&&62!==_);e.position<e.length?(n=e.input.slice(t,e.position),_=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==_&&!y(_);)33===_&&(i?S(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),h.test(r)||S(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),_=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),d.test(n)&&S(e,"tag suffix cannot contain flow indicator characters")}n&&!p.test(n)&&S(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch(t){S(e,"tag name is malformed: "+n)}return a?e.tag=n:c.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:S(e,'undeclared tag handle "'+r+'"'),!0}function q(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&S(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!y(r)&&!w(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function V(e,t,r,n,_){var a,o,l,s,u,f,d,h,p,g=1,k=!1,E=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=l=4===r||3===r,n&&R(e,!0,-1)&&(k=!0,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)),1===g)for(;z(e)||q(e);)R(e,!0,-1)?(k=!0,l=a,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)):l=!1;if(l&&(l=k||_),1!==g&&4!==r||(h=1===r||2===r?t:t+1,p=e.position-e.lineStart,1===g?l&&(B(e,p)||function(e,t,r){var n,_,a,i,o,l,s,c=e.tag,u=e.anchor,f={},d=Object.create(null),h=null,p=null,g=null,v=!1,w=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=f),s=e.input.charCodeAt(e.position);0!==s;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),a=e.line,63!==s&&58!==s||!y(n)){if(i=e.line,o=e.lineStart,l=e.position,!V(e,r,2,!1,!0))break;if(e.line===a){for(s=e.input.charCodeAt(e.position);m(s);)s=e.input.charCodeAt(++e.position);if(58===s)y(s=e.input.charCodeAt(++e.position))||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(I(e,f,d,h,p,null,i,o,l),h=p=g=null),w=!0,v=!1,_=!1,h=e.tag,p=e.result;else{if(!w)return e.tag=c,e.anchor=u,!0;S(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!w)return e.tag=c,e.anchor=u,!0;S(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(v&&(I(e,f,d,h,p,null,i,o,l),h=p=g=null),w=!0,v=!0,_=!0):v?(v=!1,_=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=n;if((e.line===a||e.lineIndent>t)&&(v&&(i=e.line,o=e.lineStart,l=e.position),V(e,t,4,!0,_)&&(v?p=e.result:g=e.result),v||(I(e,f,d,h,p,g,i,o,l),h=p=g=null),R(e,!0,-1),s=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&0!==s)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&I(e,f,d,h,p,null,i,o,l),w&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=f),w}(e,p,h))||function(e,t){var r,n,_,a,i,o,l,s,c,u,f,d,h=!0,p=e.tag,g=e.anchor,v=Object.create(null);if(91===(d=e.input.charCodeAt(e.position)))i=93,s=!1,a=[];else{if(123!==d)return!1;i=125,s=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),d=e.input.charCodeAt(++e.position);0!==d;){if(R(e,!0,t),(d=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=p,e.anchor=g,e.kind=s?"mapping":"sequence",e.result=a,!0;h?44===d&&S(e,"expected the node content, but found ','"):S(e,"missed comma between flow collection entries"),f=null,o=l=!1,63===d&&y(e.input.charCodeAt(e.position+1))&&(o=l=!0,e.position++,R(e,!0,t)),r=e.line,n=e.lineStart,_=e.position,V(e,t,1,!1,!0),u=e.tag,c=e.result,R(e,!0,t),d=e.input.charCodeAt(e.position),!l&&e.line!==r||58!==d||(o=!0,d=e.input.charCodeAt(++e.position),R(e,!0,t),V(e,t,1,!1,!0),f=e.result),s?I(e,a,v,u,c,f,r,n,_):o?a.push(I(e,null,v,u,c,f,r,n,_)):a.push(c),R(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(h=!0,d=e.input.charCodeAt(++e.position)):h=!1}S(e,"unexpected end of the stream within a flow collection")}(e,h)?E=!0:(o&&function(e,t){var r,n,_,a,o,l=1,s=!1,c=!1,u=t,f=0,d=!1;if(124===(a=e.input.charCodeAt(e.position)))n=!1;else{if(62!==a)return!1;n=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===l?l=43===a?3:2:S(e,"repeat of a chomping mode identifier");else{if(!((_=48<=(o=a)&&o<=57?o-48:-1)>=0))break;0===_?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?S(e,"repeat of an indentation width identifier"):(u=t+_-1,c=!0)}if(m(a)){do{a=e.input.charCodeAt(++e.position)}while(m(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!v(a)&&0!==a)}for(;0!==a;){for(j(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),v(a))f++;else{if(e.lineIndent<u){3===l?e.result+=i.repeat("\n",s?1+f:f):1===l&&s&&(e.result+="\n");break}for(n?m(a)?(d=!0,e.result+=i.repeat("\n",s?1+f:f)):d?(d=!1,e.result+=i.repeat("\n",f+1)):0===f?s&&(e.result+=" "):e.result+=i.repeat("\n",f):e.result+=i.repeat("\n",s?1+f:f),s=!0,c=!0,f=0,r=e.position;!v(a)&&0!==a;)a=e.input.charCodeAt(++e.position);L(e,r,e.position,!1)}}return!0}(e,h)||function(e,t){var r,n,_;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=_=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(L(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,_=e.position}else v(r)?(L(e,n,_,!0),F(e,R(e,!1,t)),n=_=e.position):e.position===e.lineStart&&D(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,_=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var r,n,_,a,i,o,l;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return L(e,r,e.position,!0),e.position++,!0;if(92===o){if(L(e,r,e.position,!0),v(o=e.input.charCodeAt(++e.position)))R(e,!1,t);else if(o<256&&P[o])e.result+=O[o],e.position++;else if((i=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(_=i,a=0;_>0;_--)(i=b(o=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+i:S(e,"expected hexadecimal character");e.result+=x(a),e.position++}else S(e,"unknown escape sequence");r=n=e.position}else v(o)?(L(e,r,n,!0),F(e,R(e,!1,t)),r=n=e.position):e.position===e.lineStart&&D(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?E=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!y(n)&&!w(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),c.call(e.anchorMap,r)||S(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],R(e,!0,-1),!0}(e)?function(e,t,r){var n,_,a,i,o,l,s,c,u=e.kind,f=e.result;if(y(c=e.input.charCodeAt(e.position))||w(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(y(n=e.input.charCodeAt(e.position+1))||r&&w(n)))return!1;for(e.kind="scalar",e.result="",_=a=e.position,i=!1;0!==c;){if(58===c){if(y(n=e.input.charCodeAt(e.position+1))||r&&w(n))break}else if(35===c){if(y(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&D(e)||r&&w(c))break;if(v(c)){if(o=e.line,l=e.lineStart,s=e.lineIndent,R(e,!1,-1),e.lineIndent>=t){i=!0,c=e.input.charCodeAt(e.position);continue}e.position=a,e.line=o,e.lineStart=l,e.lineIndent=s;break}}i&&(L(e,_,a,!1),F(e,e.line-o),_=a=e.position,i=!1),m(c)||(a=e.position+1),c=e.input.charCodeAt(++e.position)}return L(e,_,a,!1),!!e.result||(e.kind=u,e.result=f,!1)}(e,h,1===r)&&(E=!0,null===e.tag&&(e.tag="?")):(E=!0,null===e.tag&&null===e.anchor||S(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===g&&(E=l&&B(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&S(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),s=0,u=e.implicitTypes.length;s<u;s+=1)if((d=e.implicitTypes[s]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(c.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,s=0,u=(f=e.typeMap.multi[e.kind||"fallback"]).length;s<u;s+=1)if(e.tag.slice(0,f[s].tag.length)===f[s].tag){d=f[s];break}d||S(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||E}function U(e){var t,r,n,_,a=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(_=e.input.charCodeAt(e.position))&&(R(e,!0,-1),_=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==_));){for(i=!0,_=e.input.charCodeAt(++e.position),t=e.position;0!==_&&!y(_);)_=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&S(e,"directive name must not be less than one character in length");0!==_;){for(;m(_);)_=e.input.charCodeAt(++e.position);if(35===_){do{_=e.input.charCodeAt(++e.position)}while(0!==_&&!v(_));break}if(v(_))break;for(t=e.position;0!==_&&!y(_);)_=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==_&&j(e),c.call(N,r)?N[r](e,r,n):T(e,'unknown document directive "'+r+'"')}R(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,R(e,!0,-1)):i&&S(e,"directives end mark is expected"),V(e,e.lineIndent-1,4,!1,!0),R(e,!0,-1),e.checkLineBreaks&&f.test(e.input.slice(a,e.position))&&T(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&D(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,R(e,!0,-1)):e.position<e.length-1&&S(e,"end of the stream or a document separator is expected")}function G(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new A(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,S(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)U(r);return r.documents}n=function(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=G(e,r);if("function"!=typeof t)return n;for(var _=0,a=n.length;_<a;_+=1)t(n[_])},_=function(e,t){var r=G(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new o("expected a single document in the stream, but found more")}}})),i("aOfT7",(function(e,r){var n,_,a,i;function o(e){return null==e}t(e.exports,"isNothing",(()=>n),(e=>n=e)),t(e.exports,"isObject",(()=>_),(e=>_=e)),t(e.exports,"repeat",(()=>a),(e=>a=e)),t(e.exports,"isNegativeZero",(()=>i),(e=>i=e)),n=o,_=function(e){return"object"==typeof e&&null!==e},a=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},i=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}})),i("bd00D",(function(e,t){function r(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+="\n\n"+e.mark.snippet),n+" "+r):n}function n(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=r(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){return this.name+": "+r(this,e)},e.exports=n})),i("69qlB",(function(e,t){var r=a("aOfT7");function n(e,t,r,n,_){var a="",i="",o=Math.floor(_/2)-1;return n-t>o&&(t=n-o+(a=" ... ").length),r-n>o&&(r=n+o-(i=" ...").length),{str:a+e.slice(t,r).replace(/\t/g,"→")+i,pos:n-t+a.length}}function _(e,t){return r.repeat(" ",t-e.length)+e}e.exports=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var a,i=/\r?\n|\r|\0/g,o=[0],l=[],s=-1;a=i.exec(e.buffer);)l.push(a.index),o.push(a.index+a[0].length),e.position<=a.index&&s<0&&(s=o.length-2);s<0&&(s=o.length-1);var c,u,f="",d=Math.min(e.line+t.linesAfter,l.length).toString().length,h=t.maxLength-(t.indent+d+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=n(e.buffer,o[s-c],l[s-c],e.position-(o[s]-o[s-c]),h),f=r.repeat(" ",t.indent)+_((e.line-c+1).toString(),d)+" | "+u.str+"\n"+f;for(u=n(e.buffer,o[s],l[s],e.position,h),f+=r.repeat(" ",t.indent)+_((e.line+1).toString(),d)+" | "+u.str+"\n",f+=r.repeat("-",t.indent+d+3+u.pos)+"^\n",c=1;c<=t.linesAfter&&!(s+c>=l.length);c++)u=n(e.buffer,o[s+c],l[s+c],e.position-(o[s]-o[s+c]),h),f+=r.repeat(" ",t.indent)+_((e.line+c+1).toString(),d)+" | "+u.str+"\n";return f.replace(/\n$/,"")}})),i("39QRs",(function(e,t){e.exports=a("aBiEO").extend({implicit:[a("jSxhT"),a("d0wzf")],explicit:[a("XPkKA"),a("2NLsz"),a("iKor8"),a("2LZcQ")]})})),i("aBiEO",(function(e,t){e.exports=a("apZ10")})),i("apZ10",(function(e,t){e.exports=a("inVvI").extend({implicit:[a("8QhUm"),a("e939J"),a("1YR4t"),a("1XPxO")]})})),i("inVvI",(function(e,t){var r=a("b1A7U");e.exports=new r({explicit:[a("c670G"),a("7SckX"),a("fMFQD")]})})),i("b1A7U",(function(e,t){var r=a("bd00D"),n=a("ltPw1");function _(e,t){var r=[];return e[t].forEach((function(e){var t=r.length;r.forEach((function(r,n){r.tag===e.tag&&r.kind===e.kind&&r.multi===e.multi&&(t=n)})),r[t]=e})),r}function i(e){return this.extend(e)}i.prototype.extend=function(e){var t=[],a=[];if(e instanceof n)a.push(e);else if(Array.isArray(e))a=a.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof n))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),a.forEach((function(e){if(!(e instanceof n))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var o=Object.create(i.prototype);return o.implicit=(this.implicit||[]).concat(t),o.explicit=(this.explicit||[]).concat(a),o.compiledImplicit=_(o,"implicit"),o.compiledExplicit=_(o,"explicit"),o.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function n(e){e.multi?(r.multi[e.kind].push(e),r.multi.fallback.push(e)):r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(o.compiledImplicit,o.compiledExplicit),o},e.exports=i})),i("ltPw1",(function(e,t){var r=a("bd00D"),n=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],_=["scalar","sequence","mapping"];e.exports=function(e,t){var a,i;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===n.indexOf(t))throw new r('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(a=t.styleAliases||null,i={},null!==a&&Object.keys(a).forEach((function(e){a[e].forEach((function(t){i[String(t)]=e}))})),i),-1===_.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}})),i("c670G",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})})),i("7SckX",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})})),i("fMFQD",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})})),i("8QhUm",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})})),i("e939J",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})})),i("1YR4t",(function(e,t){var r=a("aOfT7"),n=a("ltPw1");function _(e){return 48<=e&&e<=55}function i(e){return 48<=e&&e<=57}e.exports=new n("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,a=0,o=!1;if(!n)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===n)return!0;if("b"===(t=e[++a])){for(a++;a<n;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!(48<=(r=e.charCodeAt(a))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!_(e.charCodeAt(a)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;a<n;a++)if("_"!==(t=e[a])){if(!i(e.charCodeAt(a)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,r=e,n=1;if(-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(n=-1),t=(r=r.slice(1))[0]),"0"===r)return 0;if("0"===t){if("b"===r[1])return n*parseInt(r.slice(2),2);if("x"===r[1])return n*parseInt(r.slice(2),16);if("o"===r[1])return n*parseInt(r.slice(2),8)}return n*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!r.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})})),i("1XPxO",(function(e,t){var r=a("aOfT7"),n=a("ltPw1"),_=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var i=/^[-+]?[0-9]+e/;e.exports=new n("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!_.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||r.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(e))return"-0.0";return n=e.toString(10),i.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})})),i("jSxhT",(function(e,t){var r=a("ltPw1"),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==n.exec(e)||null!==_.exec(e))},construct:function(e){var t,r,a,i,o,l,s,c,u=0,f=null;if(null===(t=n.exec(e))&&(t=_.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,a,i));if(o=+t[4],l=+t[5],s=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(f=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(f=-f)),c=new Date(Date.UTC(r,a,i,o,l,s,u)),f&&c.setTime(c.getTime()-f),c},instanceOf:Date,represent:function(e){return e.toISOString()}})})),i("d0wzf",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})})),i("XPkKA",(function(e,t){var r=a("ltPw1"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,_=0,a=e.length,i=n;for(r=0;r<a;r++)if(!((t=i.indexOf(e.charAt(r)))>64)){if(t<0)return!1;_+=6}return _%8==0},construct:function(e){var t,r,_=e.replace(/[\r\n=]/g,""),a=_.length,i=n,o=0,l=[];for(t=0;t<a;t++)t%4==0&&t&&(l.push(o>>16&255),l.push(o>>8&255),l.push(255&o)),o=o<<6|i.indexOf(_.charAt(t));return 0===(r=a%4*6)?(l.push(o>>16&255),l.push(o>>8&255),l.push(255&o)):18===r?(l.push(o>>10&255),l.push(o>>2&255)):12===r&&l.push(o>>4&255),new Uint8Array(l)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,r,_="",a=0,i=e.length,o=n;for(t=0;t<i;t++)t%3==0&&t&&(_+=o[a>>18&63],_+=o[a>>12&63],_+=o[a>>6&63],_+=o[63&a]),a=(a<<8)+e[t];return 0===(r=i%3)?(_+=o[a>>18&63],_+=o[a>>12&63],_+=o[a>>6&63],_+=o[63&a]):2===r?(_+=o[a>>10&63],_+=o[a>>4&63],_+=o[a<<2&63],_+=o[64]):1===r&&(_+=o[a>>2&63],_+=o[a<<4&63],_+=o[64],_+=o[64]),_}})})),i("2NLsz",(function(e,t){var r=a("ltPw1"),n=Object.prototype.hasOwnProperty,_=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,a,i,o,l=[],s=e;for(t=0,r=s.length;t<r;t+=1){if(a=s[t],o=!1,"[object Object]"!==_.call(a))return!1;for(i in a)if(n.call(a,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(i))return!1;l.push(i)}return!0},construct:function(e){return null!==e?e:[]}})})),i("iKor8",(function(e,t){var r=a("ltPw1"),n=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,_,a,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(_=o[t],"[object Object]"!==n.call(_))return!1;if(1!==(a=Object.keys(_)).length)return!1;i[t]=[a[0],_[a[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,_,a,i=e;for(a=new Array(i.length),t=0,r=i.length;t<r;t+=1)n=i[t],_=Object.keys(n),a[t]=[_[0],n[_[0]]];return a}})})),i("2LZcQ",(function(e,t){var r=a("ltPw1"),n=Object.prototype.hasOwnProperty;e.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(n.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})})),i("bWYPR",(function(e,r){var n;t(e.exports,"dump",(()=>n),(e=>n=e));var _=a("aOfT7"),i=a("bd00D"),o=a("39QRs"),l=Object.prototype.toString,s=Object.prototype.hasOwnProperty,c=65279,u={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},f=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],d=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function h(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+_.repeat("0",n-t.length)+t}function p(e){this.schema=e.schema||o,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=_.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,_,a,i,o,l;if(null===t)return{};for(r={},_=0,a=(n=Object.keys(t)).length;_<a;_+=1)i=n[_],o=String(t[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(l=e.compiledTypeMap.fallback[i])&&s.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[i]=o;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function g(e,t){for(var r,n=_.repeat(" ",t),a=0,i=-1,o="",l=e.length;a<l;)-1===(i=e.indexOf("\n",a))?(r=e.slice(a),a=l):(r=e.slice(a,i+1),a=i+1),r.length&&"\n"!==r&&(o+=n),o+=r;return o}function v(e,t){return"\n"+_.repeat(" ",e.indent*t)}function m(e){return 32===e||9===e}function y(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==c||65536<=e&&e<=1114111}function w(e){return y(e)&&e!==c&&13!==e&&10!==e}function b(e,t,r){var n=w(e),_=n&&!m(e);return(r?n:n&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!_)||w(t)&&!m(t)&&35===e||58===t&&_}function k(e,t){var r,n=e.charCodeAt(t);return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1))>=56320&&r<=57343?1024*(n-55296)+r-56320+65536:n}function x(e){return/^\n* /.test(e)}function P(e,t,r,n,_,a,i,o){var l,s,u=0,f=null,d=!1,h=!1,p=-1!==n,g=-1,v=y(s=k(e,0))&&s!==c&&!m(s)&&45!==s&&63!==s&&58!==s&&44!==s&&91!==s&&93!==s&&123!==s&&125!==s&&35!==s&&38!==s&&42!==s&&33!==s&&124!==s&&61!==s&&62!==s&&39!==s&&34!==s&&37!==s&&64!==s&&96!==s&&function(e){return!m(e)&&58!==e}(k(e,e.length-1));if(t||i)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!y(u=k(e,l)))return 5;v=v&&b(u,f,o),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=k(e,l)))d=!0,p&&(h=h||l-g-1>n&&" "!==e[g+1],g=l);else if(!y(u))return 5;v=v&&b(u,f,o),f=u}h=h||p&&l-g-1>n&&" "!==e[g+1]}return d||h?r>9&&x(e)?5:i?2===a?5:2:h?4:3:!v||i||_(e)?2===a?5:2:1}function O(e,t,r,n,_){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==f.indexOf(t)||d.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,r),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),l=n||e.flowLevel>-1&&r>=e.flowLevel;switch(P(t,l,e.indent,o,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!n,_)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+E(t,e.indent)+A(g(t,a));case 4:return">"+E(t,e.indent)+A(g(function(e,t){var r,n,_=/(\n+)([^\n]*)/g,a=(o=e.indexOf("\n"),o=-1!==o?o:e.length,_.lastIndex=o,C(e.slice(0,o),t)),i="\n"===e[0]||" "===e[0];var o;for(;n=_.exec(e);){var l=n[1],s=n[2];r=" "===s[0],a+=l+(i||r||""===s?"":"\n")+C(s,t),i=r}return a}(t,o),a));case 5:return'"'+function(e){for(var t,r="",n=0,_=0;_<e.length;n>=65536?_+=2:_++)n=k(e,_),!(t=u[n])&&y(n)?(r+=e[_],n>=65536&&(r+=e[_+1])):r+=t||h(n);return r}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function E(e,t){var r=x(e)?String(t):"",n="\n"===e[e.length-1];return r+(n&&("\n"===e[e.length-2]||"\n"===e)?"+":n?"":"-")+"\n"}function A(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function C(e,t){if(""===e||" "===e[0])return e;for(var r,n,_=/ [^ ]/g,a=0,i=0,o=0,l="";r=_.exec(e);)(o=r.index)-a>t&&(n=i>a?i:o,l+="\n"+e.slice(a,n),a=n+1),i=o;return l+="\n",e.length-a>t&&i>a?l+=e.slice(a,i)+"\n"+e.slice(i+1):l+=e.slice(a),l.slice(1)}function S(e,t,r,n){var _,a,i,o="",l=e.tag;for(_=0,a=r.length;_<a;_+=1)i=r[_],e.replacer&&(i=e.replacer.call(r,String(_),i)),(N(e,t+1,i,!0,!0,!1,!0)||void 0===i&&N(e,t+1,null,!0,!0,!1,!0))&&(n&&""===o||(o+=v(e,t)),e.dump&&10===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=l,e.dump=o||"[]"}function T(e,t,r){var n,_,a,o,c,u;for(a=0,o=(_=r?e.explicitTypes:e.implicitTypes).length;a<o;a+=1)if(((c=_[a]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(r?c.multi&&c.representName?e.tag=c.representName(t):e.tag=c.tag:e.tag="?",c.represent){if(u=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===l.call(c.represent))n=c.represent(t,u);else{if(!s.call(c.represent,u))throw new i("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');n=c.represent[u](t,u)}e.dump=n}return!0}return!1}function N(e,t,r,n,_,a,o){e.tag=null,e.dump=r,T(e,r,!1)||T(e,r,!0);var s,c=l.call(e.dump),u=n;n&&(n=e.flowLevel<0||e.flowLevel>t);var f,d,h="[object Object]"===c||"[object Array]"===c;if(h&&(d=-1!==(f=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(_=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(h&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),"[object Object]"===c)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var _,a,o,l,s,c,u="",f=e.tag,d=Object.keys(r);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(_=0,a=d.length;_<a;_+=1)c="",n&&""===u||(c+=v(e,t)),l=r[o=d[_]],e.replacer&&(l=e.replacer.call(r,o,l)),N(e,t+1,o,!0,!0,!0)&&((s=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,s&&(c+=v(e,t)),N(e,t+1,l,!0,s)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=f,e.dump=u||"{}"}(e,t,e.dump,_),d&&(e.dump="&ref_"+f+e.dump)):(!function(e,t,r){var n,_,a,i,o,l="",s=e.tag,c=Object.keys(r);for(n=0,_=c.length;n<_;n+=1)o="",""!==l&&(o+=", "),e.condenseFlow&&(o+='"'),i=r[a=c[n]],e.replacer&&(i=e.replacer.call(r,a,i)),N(e,t,a,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),N(e,t,i,!1,!1)&&(l+=o+=e.dump));e.tag=s,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if("[object Array]"===c)n&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?S(e,t-1,e.dump,_):S(e,t,e.dump,_),d&&(e.dump="&ref_"+f+e.dump)):(!function(e,t,r){var n,_,a,i="",o=e.tag;for(n=0,_=r.length;n<_;n+=1)a=r[n],e.replacer&&(a=e.replacer.call(r,String(n),a)),(N(e,t,a,!1,!1)||void 0===a&&N(e,t,null,!1,!1))&&(""!==i&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&O(e,e.dump,t,a,u)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function L(e,t){var r,n,_=[],a=[];for(M(e,_,a),r=0,n=a.length;r<n;r+=1)t.duplicates.push(_[a[r]]);t.usedDuplicates=new Array(n)}function M(e,t,r){var n,_,a;if(null!==e&&"object"==typeof e)if(-1!==(_=t.indexOf(e)))-1===r.indexOf(_)&&r.push(_);else if(t.push(e),Array.isArray(e))for(_=0,a=e.length;_<a;_+=1)M(e[_],t,r);else for(_=0,a=(n=Object.keys(e)).length;_<a;_+=1)M(e[n[_]],t,r)}n=function(e,t){var r=new p(t=t||{});r.noRefs||L(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),N(r,0,n,!0,!0)?r.dump+"\n":""}})),i("bftfD",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=a("l8NiV");const _=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;e.exports.default={order:300,allowEmpty:!0,encoding:"utf8",canParse:e=>("string"==typeof e.data||r.isBuffer(e.data))&&_.test(e.url),parse(e){if("string"==typeof e.data)return e.data;if(r.isBuffer(e.data))return e.data.toString(this.encoding);throw new n.ParserError("data is not text",e.url)}}})),i("e0bcV",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});const n=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;e.exports.default={order:400,allowEmpty:!0,canParse:e=>r.isBuffer(e.data)&&n.test(e.url),parse:e=>r.isBuffer(e.data)?e.data:r.from(e.data)}})),i("bAdDM",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("9wa3L"));a("58l9B");var s=a("jU2th");const c=i(a("b9BWf"));var u=a("l8NiV");e.exports.default={order:100,canRead:e=>c.isFileSystemPath(e.url),async read(e){let t;try{t=c.toFileSystemPath(e.url)}catch(t){throw new u.ResolverError(s.ono.uri(t,`Malformed URI: ${e.url}`),e.url)}try{return await l.default.promises.readFile(t)}catch(e){throw new u.ResolverError((0,s.ono)(e,`Error opening file "${t}"`),t)}}}})),i("94hgF",(function(e,t){var r,n=a("3M269").Buffer,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&_(t,e,n[a]);return i(t,e),t});Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("b9BWf"));var c=a("l8NiV");async function u(e,t,r){e=s.parse(e);const _=r||[];_.push(e.href);try{const r=await async function(e,t){let r,n;t.timeout&&(r=new AbortController,n=setTimeout((()=>r.abort()),t.timeout));const _=await fetch(e,{method:"GET",headers:t.headers||{},credentials:t.withCredentials?"include":"same-origin",signal:r?r.signal:null});n&&clearTimeout(n);return _}(e,t);if(r.status>=400)throw(0,l.ono)({status:r.status},`HTTP ERROR ${r.status}`);if(r.status>=300){if(!Number.isNaN(t.redirects)&&_.length>t.redirects)throw new c.ResolverError((0,l.ono)({status:r.status},`Error downloading ${_[0]}. \nToo many redirects: \n  ${_.join(" \n  ")}`));if("location"in r.headers&&r.headers.location){return u(s.resolve(e.href,r.headers.location),t,_)}throw(0,l.ono)({status:r.status},`HTTP ${r.status} redirect with no location header`)}if(r.body){const e=await r.arrayBuffer();return n.from(e)}return n.alloc(0)}catch(t){throw new c.ResolverError((0,l.ono)(t,`Error downloading ${e.href}`),e.href)}}e.exports.default={order:200,headers:null,timeout:6e4,redirects:5,withCredentials:!1,canRead:e=>s.isHttp(e.url),read(e){const t=s.parse(e.url);return"undefined"==typeof window||t.protocol||(t.protocol=s.parse(location.href).protocol),u(t,this)}}})),i("hBMkZ",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo")),c=o(a("1FCt6")),u=i(a("b9BWf"));var f=a("l8NiV");function d(e,t,r,n,_,a){_||(_=new Set);let i=[];if(e&&"object"==typeof e&&!ArrayBuffer.isView(e)&&!_.has(e)){_.add(e),l.default.isExternal$Ref(e)&&i.push(async function(e,t,r,n){const _="root"===n.dereference?.externalReferenceResolution,a=u.resolve(_?u.cwd():t,e.$ref),i=u.stripHash(a),o=r._$refs[i];if(o)return Promise.resolve(o.value);try{const e=d(await(0,c.default)(a,r,n),i+"#",r,n,new Set,!0);return Promise.all(e)}catch(e){if(!n?.continueOnError||!(0,f.isHandledError)(e))throw e;return r._$refs[i]&&(e.source=decodeURI(u.stripHash(t)),e.path=u.safePointerToPath(u.getHash(t))),[]}}(e,t,r,n));const o=Object.keys(e);for(const l of o){const o=s.default.join(t,l),c=e[l];i=i.concat(d(c,o,r,n,_,a))}}return i}e.exports.default=function(e,t){if(!t.resolve?.external)return Promise.resolve();try{const r=d(e.schema,e.$refs._root$Ref.path+"#",e.$refs,t);return Promise.all(r)}catch(e){return Promise.reject(e)}}})),i("7UBq0",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo")),c=i(a("b9BWf"));function u(e,t,r,n,_,a,i,o){const c=null===t?e:e[t];if(c&&"object"==typeof c&&!ArrayBuffer.isView(c))if(l.default.isAllowed$Ref(c))f(e,t,r,n,_,a,i,o);else{const e=Object.keys(c).sort(((e,t)=>"definitions"===e?-1:"definitions"===t?1:e.length-t.length));for(const t of e){const e=s.default.join(r,t),d=s.default.join(n,t),h=c[t];l.default.isAllowed$Ref(h)?f(c,t,r,d,_,a,i,o):u(c,t,e,d,_,a,i,o)}}}function f(e,t,r,n,_,a,i,o){const f=null===t?e:e[t],d=c.resolve(r,f.$ref),h=i._resolve(d,n,o);if(null===h)return;const p=s.default.parse(n).length,g=c.stripHash(h.path),v=c.getHash(h.path),m=g!==i._root$Ref.path,y=l.default.isExtended$Ref(f);_+=h.indirections;const w=function(e,t,r){for(const n of e)if(n&&n.parent===t&&n.key===r)return n;return}(a,e,t);if(w){if(!(p<w.depth||_<w.indirections))return;!function(e,t){const r=e.indexOf(t);e.splice(r,1)}(a,w)}a.push({$ref:f,parent:e,key:t,pathFromRoot:n,depth:p,file:g,hash:v,value:h.value,circular:h.circular,extended:y,external:m,indirections:_}),w&&!m||u(h.value,null,h.path,n,_+1,a,i,o)}e.exports.default=function(e,t){const r=[];u(e,"schema",e.$refs._root$Ref.path+"#","#",0,r,e.$refs,t),function(e){let t,r,n;e.sort(((e,t)=>{if(e.file!==t.file)return e.file<t.file?-1:1;if(e.hash!==t.hash)return e.hash<t.hash?-1:1;if(e.circular!==t.circular)return e.circular?-1:1;if(e.extended!==t.extended)return e.extended?1:-1;if(e.indirections!==t.indirections)return e.indirections-t.indirections;if(e.depth!==t.depth)return e.depth-t.depth;{const r=e.pathFromRoot.lastIndexOf("/definitions"),n=t.pathFromRoot.lastIndexOf("/definitions");return r!==n?n-r:e.pathFromRoot.length-t.pathFromRoot.length}}));for(const _ of e)_.external?_.file===t&&_.hash===r?_.$ref.$ref=n:_.file===t&&0===_.hash.indexOf(r+"/")?_.$ref.$ref=s.default.join(n,s.default.parse(_.hash.replace(r,"#"))):(t=_.file,r=_.hash,n=_.pathFromRoot,_.$ref=_.parent[_.key]=l.default.dereference(_.$ref,_.value),_.circular&&(_.$ref.$ref=_.pathFromRoot)):_.$ref.$ref=_.hash}(r)}})),i("ftePO",(function(e,t){var r,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),_=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&n(t,e,a[i]);return _(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo"));a("58l9B");var c=a("jU2th");const u=i(a("b9BWf"));var f=a("l8NiV");function d(e,t,r,n,_,a,i,o,c){let u;const g={value:e,circular:!1};if(o&&o.timeoutMs&&Date.now()-c>o.timeoutMs)throw new f.TimeoutError(o.timeoutMs);const v=o.dereference||{},m=v.excludedPathMatcher||(()=>!1);if(("ignore"===v?.circular||!_.has(e))&&e&&"object"==typeof e&&!ArrayBuffer.isView(e)&&!m(r)){if(n.add(e),_.add(e),l.default.isAllowed$Ref(e,o))u=h(e,t,r,n,_,a,i,o,c),g.circular=u.circular,g.value=u.value;else for(const f of Object.keys(e)){const y=s.default.join(t,f),w=s.default.join(r,f);if(m(w))continue;const b=e[f];let k=!1;l.default.isAllowed$Ref(b,o)?(u=h(b,y,w,n,_,a,i,o,c),k=u.circular,e[f]!==u.value&&(e[f]=u.value,v?.onDereference?.(b.$ref,e[f],e,f))):n.has(b)?k=p(y,i,o):(u=d(b,y,w,n,_,a,i,o,c),k=u.circular,e[f]!==u.value&&(e[f]=u.value)),g.circular=g.circular||k}n.delete(e)}return g}function h(e,t,r,n,_,a,i,o,s){const c=l.default.isExternal$Ref(e)&&"root"===o?.dereference?.externalReferenceResolution,f=u.resolve(c?u.cwd():t,e.$ref),h=a.get(f);if(h&&!h.circular){const t=Object.keys(e);if(t.length>1){const r={};for(const n of t)"$ref"===n||n in h.value||(r[n]=e[n]);return{circular:h.circular,value:Object.assign({},h.value,r)}}return h}const g=i._resolve(f,t,o);if(null===g)return{circular:!1,value:null};const v=g.circular;let m=v||n.has(g.value);m&&p(t,i,o);let y=l.default.dereference(e,g.value);if(!m){const e=d(y,g.path,r,n,_,a,i,o,s);m=e.circular,y=e.value}m&&!v&&"ignore"===o.dereference?.circular&&(y=e),v&&(y.$ref=r);const w={circular:m,value:y};return 1===Object.keys(e).length&&a.set(f,w),w}function p(e,t,r){if(t.circular=!0,!r.dereference.circular)throw c.ono.reference(`Circular $ref pointer found at ${e}`);return!0}e.exports.default=function(e,t){const r=Date.now(),n=d(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,t,r);e.$refs.circular=n.circular,e.schema=n.value}})),i("cfZ0q",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return e?void t.then((function(t){(0,n.default)((function(){e(null,t)}))}),(function(t){(0,n.default)((function(){e(t)}))})):t};const n=r(a("eJL19"))})),i("eJL19",(function(e,t){var r=a("4bJEF");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default="object"==typeof r&&"function"==typeof r.nextTick?r.nextTick:"function"==typeof setImmediate?setImmediate:function(e){setTimeout(e,0)}})),i("cwOQi",(function(e,t){var r;e.exports,r=function(e){return t={45:(e,t,r)=>{var n={};n.layoutBase=r(551),n.CoSEConstants=r(806),n.CoSEEdge=r(767),n.CoSEGraph=r(880),n.CoSEGraphManager=r(578),n.CoSELayout=r(765),n.CoSENode=r(991),n.ConstraintHandler=r(902),e.exports=n},806:(e,t,r)=>{var n=r(551).FDLayoutConstants;function _(){}for(var a in n)_[a]=n[a];_.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,_.DEFAULT_RADIAL_SEPARATION=n.DEFAULT_EDGE_LENGTH,_.DEFAULT_COMPONENT_SEPERATION=60,_.TILE=!0,_.TILING_PADDING_VERTICAL=10,_.TILING_PADDING_HORIZONTAL=10,_.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,_.ENFORCE_CONSTRAINTS=!0,_.APPLY_LAYOUT=!0,_.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,_.TREE_REDUCTION_ON_INCREMENTAL=!0,_.PURE_INCREMENTAL=_.DEFAULT_INCREMENTAL,e.exports=_},767:(e,t,r)=>{var n=r(551).FDLayoutEdge;function _(e,t,r){n.call(this,e,t,r)}for(var a in _.prototype=Object.create(n.prototype),n)_[a]=n[a];e.exports=_},880:(e,t,r)=>{var n=r(551).LGraph;function _(e,t,r){n.call(this,e,t,r)}for(var a in _.prototype=Object.create(n.prototype),n)_[a]=n[a];e.exports=_},578:(e,t,r)=>{var n=r(551).LGraphManager;function _(e){n.call(this,e)}for(var a in _.prototype=Object.create(n.prototype),n)_[a]=n[a];e.exports=_},765:(e,t,r)=>{var n=r(551).FDLayout,_=r(578),a=r(880),i=r(991),o=r(767),l=r(806),s=r(902),c=r(551).FDLayoutConstants,u=r(551).LayoutConstants,f=r(551).Point,d=r(551).PointD,h=r(551).DimensionD,p=r(551).Layout,g=r(551).Integer,v=r(551).IGeometry,m=r(551).LGraph,y=r(551).Transform,w=r(551).LinkedList;function b(){n.call(this),this.toBeTiled={},this.constraints={}}for(var k in b.prototype=Object.create(n.prototype),n)b[k]=n[k];b.prototype.newGraphManager=function(){var e=new _(this);return this.graphManager=e,e},b.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},b.prototype.newNode=function(e){return new i(this.graphManager,e)},b.prototype.newEdge=function(e){return new o(null,null,e)},b.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},b.prototype.initSpringEmbedder=function(){n.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},b.prototype.layout=function(){return u.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},b.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)l.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter((function(e){return t.has(e)})),this.graphManager.setAllNodesToApplyGravitation(r));else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(r),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(s.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),l.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},b.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var r=!this.isTreeGrowing&&!this.isGrowthFinished,n=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(r,n),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},b.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var n=e[r].rect,_=e[r].id;t[_]={id:_,x:n.getCenterX(),y:n.getCenterY(),w:n.width,h:n.height}}return t},b.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},b.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),t=0;t<e.length;t++)e[t].move()},b.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var t=this.graphManager.getAllNodes(),r=0;r<t.length;r++){var n=t[r];this.idToNodeMap.set(n.id,n)}var _=function t(r){for(var n,_=r.getChild().getNodes(),a=0,i=0;i<_.length;i++)null==(n=_[i]).getChild()?e.fixedNodeSet.has(n.id)&&(a+=100):a+=t(n);return a};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach((function(t){e.fixedNodeSet.add(t.nodeId)})),t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)if(null!=(n=t[r]).getChild()){var a=_(n);a>0&&(n.fixedNodeWeight=a)}if(this.constraints.relativePlacementConstraint){var i=new Map,o=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(t){e.fixedNodesOnHorizontal.add(t),e.fixedNodesOnVertical.add(t)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var s=this.constraints.alignmentConstraint.vertical;for(r=0;r<s.length;r++)this.dummyToNodeForVerticalAlignment.set("dummy"+r,[]),s[r].forEach((function(t){i.set(t,"dummy"+r),e.dummyToNodeForVerticalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnHorizontal.add("dummy"+r)}))}if(this.constraints.alignmentConstraint.horizontal){var c=this.constraints.alignmentConstraint.horizontal;for(r=0;r<c.length;r++)this.dummyToNodeForHorizontalAlignment.set("dummy"+r,[]),c[r].forEach((function(t){o.set(t,"dummy"+r),e.dummyToNodeForHorizontalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnVertical.add("dummy"+r)}))}}if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(e){var t,r,n;for(n=e.length-1;n>=2*e.length/3;n--)t=Math.floor(Math.random()*(n+1)),r=e[n],e[n]=e[t],e[t]=r;return e},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(t){if(t.left){var r=i.has(t.left)?i.get(t.left):t.left,n=i.has(t.right)?i.get(t.right):t.right;e.nodesInRelativeHorizontal.includes(r)||(e.nodesInRelativeHorizontal.push(r),e.nodeToRelativeConstraintMapHorizontal.set(r,[]),e.dummyToNodeForVerticalAlignment.has(r)?e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(r).getCenterX())),e.nodesInRelativeHorizontal.includes(n)||(e.nodesInRelativeHorizontal.push(n),e.nodeToRelativeConstraintMapHorizontal.set(n,[]),e.dummyToNodeForVerticalAlignment.has(n)?e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(n)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(n,e.idToNodeMap.get(n).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(r).push({right:n,gap:t.gap}),e.nodeToRelativeConstraintMapHorizontal.get(n).push({left:r,gap:t.gap})}else{var _=o.has(t.top)?o.get(t.top):t.top,a=o.has(t.bottom)?o.get(t.bottom):t.bottom;e.nodesInRelativeVertical.includes(_)||(e.nodesInRelativeVertical.push(_),e.nodeToRelativeConstraintMapVertical.set(_,[]),e.dummyToNodeForHorizontalAlignment.has(_)?e.nodeToTempPositionMapVertical.set(_,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(_)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(_,e.idToNodeMap.get(_).getCenterY())),e.nodesInRelativeVertical.includes(a)||(e.nodesInRelativeVertical.push(a),e.nodeToRelativeConstraintMapVertical.set(a,[]),e.dummyToNodeForHorizontalAlignment.has(a)?e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(a)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(a).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(_).push({bottom:a,gap:t.gap}),e.nodeToRelativeConstraintMapVertical.get(a).push({top:_,gap:t.gap})}}));else{var u=new Map,f=new Map;this.constraints.relativePlacementConstraint.forEach((function(e){if(e.left){var t=i.has(e.left)?i.get(e.left):e.left,r=i.has(e.right)?i.get(e.right):e.right;u.has(t)?u.get(t).push(r):u.set(t,[r]),u.has(r)?u.get(r).push(t):u.set(r,[t])}else{var n=o.has(e.top)?o.get(e.top):e.top,_=o.has(e.bottom)?o.get(e.bottom):e.bottom;f.has(n)?f.get(n).push(_):f.set(n,[_]),f.has(_)?f.get(_).push(n):f.set(_,[n])}}));var d=function(e,t){var r=[],n=[],_=new w,a=new Set,i=0;return e.forEach((function(o,l){if(!a.has(l)){r[i]=[],n[i]=!1;var s=l;for(_.push(s),a.add(s),r[i].push(s);0!=_.length;)s=_.shift(),t.has(s)&&(n[i]=!0),e.get(s).forEach((function(e){a.has(e)||(_.push(e),a.add(e),r[i].push(e))}));i++}})),{components:r,isFixed:n}},h=d(u,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=h.components,this.fixedComponentsOnHorizontal=h.isFixed;var p=d(f,e.fixedNodesOnVertical);this.componentsOnVertical=p.components,this.fixedComponentsOnVertical=p.isFixed}}},b.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(t){var r=e.idToNodeMap.get(t.nodeId);r.displacementX=0,r.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var t=this.constraints.alignmentConstraint.vertical,r=0;r<t.length;r++){for(var n=0,_=0;_<t[r].length;_++){if(this.fixedNodeSet.has(t[r][_])){n=0;break}n+=this.idToNodeMap.get(t[r][_]).displacementX}var a=n/t[r].length;for(_=0;_<t[r].length;_++)this.idToNodeMap.get(t[r][_]).displacementX=a}if(this.constraints.alignmentConstraint.horizontal){var i=this.constraints.alignmentConstraint.horizontal;for(r=0;r<i.length;r++){var o=0;for(_=0;_<i[r].length;_++){if(this.fixedNodeSet.has(i[r][_])){o=0;break}o+=this.idToNodeMap.get(i[r][_]).displacementY}var s=o/i[r].length;for(_=0;_<i[r].length;_++)this.idToNodeMap.get(i[r][_]).displacementY=s}}}if(this.constraints.relativePlacementConstraint)if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForVerticalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(t)[0]).displacementX:e.idToNodeMap.get(t).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(t).forEach((function(n){var _;n.right?(_=e.nodeToTempPositionMapHorizontal.get(n.right)-e.nodeToTempPositionMapHorizontal.get(t)-r)<n.gap&&(r-=n.gap-_):(_=e.nodeToTempPositionMapHorizontal.get(t)-e.nodeToTempPositionMapHorizontal.get(n.left)+r)<n.gap&&(r+=n.gap-_)})),e.nodeToTempPositionMapHorizontal.set(t,e.nodeToTempPositionMapHorizontal.get(t)+r),e.dummyToNodeForVerticalAlignment.has(t)?e.dummyToNodeForVerticalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementX=r})):e.idToNodeMap.get(t).displacementX=r}})),this.nodesInRelativeVertical.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForHorizontalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(t)[0]).displacementY:e.idToNodeMap.get(t).displacementY,e.nodeToRelativeConstraintMapVertical.get(t).forEach((function(n){var _;n.bottom?(_=e.nodeToTempPositionMapVertical.get(n.bottom)-e.nodeToTempPositionMapVertical.get(t)-r)<n.gap&&(r-=n.gap-_):(_=e.nodeToTempPositionMapVertical.get(t)-e.nodeToTempPositionMapVertical.get(n.top)+r)<n.gap&&(r+=n.gap-_)})),e.nodeToTempPositionMapVertical.set(t,e.nodeToTempPositionMapVertical.get(t)+r),e.dummyToNodeForHorizontalAlignment.has(t)?e.dummyToNodeForHorizontalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementY=r})):e.idToNodeMap.get(t).displacementY=r}}));else{for(r=0;r<this.componentsOnHorizontal.length;r++){var c=this.componentsOnHorizontal[r];if(this.fixedComponentsOnHorizontal[r])for(_=0;_<c.length;_++)this.dummyToNodeForVerticalAlignment.has(c[_])?this.dummyToNodeForVerticalAlignment.get(c[_]).forEach((function(t){e.idToNodeMap.get(t).displacementX=0})):this.idToNodeMap.get(c[_]).displacementX=0;else{var u=0,f=0;for(_=0;_<c.length;_++)this.dummyToNodeForVerticalAlignment.has(c[_])?(u+=(h=this.dummyToNodeForVerticalAlignment.get(c[_])).length*this.idToNodeMap.get(h[0]).displacementX,f+=h.length):(u+=this.idToNodeMap.get(c[_]).displacementX,f++);var d=u/f;for(_=0;_<c.length;_++)this.dummyToNodeForVerticalAlignment.has(c[_])?this.dummyToNodeForVerticalAlignment.get(c[_]).forEach((function(t){e.idToNodeMap.get(t).displacementX=d})):this.idToNodeMap.get(c[_]).displacementX=d}}for(r=0;r<this.componentsOnVertical.length;r++)if(c=this.componentsOnVertical[r],this.fixedComponentsOnVertical[r])for(_=0;_<c.length;_++)this.dummyToNodeForHorizontalAlignment.has(c[_])?this.dummyToNodeForHorizontalAlignment.get(c[_]).forEach((function(t){e.idToNodeMap.get(t).displacementY=0})):this.idToNodeMap.get(c[_]).displacementY=0;else{for(u=0,f=0,_=0;_<c.length;_++)if(this.dummyToNodeForHorizontalAlignment.has(c[_])){var h;u+=(h=this.dummyToNodeForHorizontalAlignment.get(c[_])).length*this.idToNodeMap.get(h[0]).displacementY,f+=h.length}else u+=this.idToNodeMap.get(c[_]).displacementY,f++;for(d=u/f,_=0;_<c.length;_++)this.dummyToNodeForHorizontalAlignment.has(c[_])?this.dummyToNodeForHorizontalAlignment.get(c[_]).forEach((function(t){e.idToNodeMap.get(t).displacementY=d})):this.idToNodeMap.get(c[_]).displacementY=d}}},b.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,r=[],n=this.graphManager.getGraphs(),_=n.length;for(t=0;t<_;t++)(e=n[t]).updateConnected(),e.isConnected||(r=r.concat(e.getNodes()));return r},b.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,r=new Set;for(t=0;t<e.length;t++){var n=e[t];if(!r.has(n)){var _=n.getSource(),a=n.getTarget();if(_==a)n.getBendpoints().push(new d),n.getBendpoints().push(new d),this.createDummyNodesForBendpoints(n),r.add(n);else{var i=[];if(i=(i=i.concat(_.getEdgeListToNode(a))).concat(a.getEdgeListToNode(_)),!r.has(i[0])){var o;if(i.length>1)for(o=0;o<i.length;o++){var l=i[o];l.getBendpoints().push(new d),this.createDummyNodesForBendpoints(l)}i.forEach((function(e){r.add(e)}))}}}if(r.size==e.length)break}},b.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),r=Math.ceil(Math.sqrt(e.length)),n=0,_=0,a=0,i=new d(0,0),o=0;o<e.length;o++){o%r==0&&(a=0,_=n,0!=o&&(_+=l.DEFAULT_COMPONENT_SEPERATION),n=0);var s=e[o],c=p.findCenterOfTree(s);t.x=a,t.y=_,(i=b.radialLayout(s,c,t)).y>n&&(n=Math.floor(i.y)),a=Math.floor(i.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(u.WORLD_CENTER_X-i.x/2,u.WORLD_CENTER_Y-i.y/2))},b.radialLayout=function(e,t,r){var n=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);b.branchRadialLayout(t,null,0,359,0,n);var _=m.calculateBounds(e),a=new y;a.setDeviceOrgX(_.getMinX()),a.setDeviceOrgY(_.getMinY()),a.setWorldOrgX(r.x),a.setWorldOrgY(r.y);for(var i=0;i<e.length;i++)e[i].transform(a);var o=new d(_.getMaxX(),_.getMaxY());return a.inverseTransformPoint(o)},b.branchRadialLayout=function(e,t,r,n,_,a){var i=(n-r+1)/2;i<0&&(i+=180);var o=(i+r)%360*v.TWO_PI/360,l=(Math.cos(o),_*Math.cos(o)),s=_*Math.sin(o);e.setCenter(l,s);var c=[],u=(c=c.concat(e.getEdges())).length;null!=t&&u--;for(var f,d=0,h=c.length,p=e.getEdgesBetween(t);p.length>1;){var g=p[0];p.splice(0,1);var m=c.indexOf(g);m>=0&&c.splice(m,1),h--,u--}f=null!=t?(c.indexOf(p[0])+1)%h:0;for(var y=Math.abs(n-r)/u,w=f;d!=u;w=++w%h){var k=c[w].getOtherEnd(e);if(k!=t){var x=(r+d*y)%360,P=(x+y)%360;b.branchRadialLayout(k,e,x,P,_+a,a),d++}}},b.maxDiagonalInTree=function(e){for(var t=g.MIN_VALUE,r=0;r<e.length;r++){var n=e[r].getDiagonal();n>t&&(t=n)}return t},b.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},b.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var r=[],n=this.graphManager.getAllNodes(),_=0;_<n.length;_++){var a=(o=n[_]).getParent();0!==this.getNodeDegreeWithChildren(o)||null!=a.id&&this.getToBeTiled(a)||r.push(o)}for(_=0;_<r.length;_++){var o,l=(o=r[_]).getParent().id;void 0===t[l]&&(t[l]=[]),t[l]=t[l].concat(o)}Object.keys(t).forEach((function(r){if(t[r].length>1){var n="DummyCompound_"+r;e.memberGroups[n]=t[r];var _=t[r][0].getParent(),a=new i(e.graphManager);a.id=n,a.paddingLeft=_.paddingLeft||0,a.paddingRight=_.paddingRight||0,a.paddingBottom=_.paddingBottom||0,a.paddingTop=_.paddingTop||0,e.idToDummyNode[n]=a;var o=e.getGraphManager().add(e.newGraph(),a),l=_.getChild();l.add(a);for(var s=0;s<t[r].length;s++){var c=t[r][s];l.remove(c),o.add(c)}}}))},b.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},b.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(r){var n=e.idToDummyNode[r];if(t[r]=e.tileNodes(e.memberGroups[r],n.paddingLeft+n.paddingRight),n.rect.width=t[r].width,n.rect.height=t[r].height,n.setCenter(t[r].centerX,t[r].centerY),n.labelMarginLeft=0,n.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var _=n.rect.width,a=n.rect.height;n.labelWidth&&("left"==n.labelPosHorizontal?(n.rect.x-=n.labelWidth,n.setWidth(_+n.labelWidth),n.labelMarginLeft=n.labelWidth):"center"==n.labelPosHorizontal&&n.labelWidth>_?(n.rect.x-=(n.labelWidth-_)/2,n.setWidth(n.labelWidth),n.labelMarginLeft=(n.labelWidth-_)/2):"right"==n.labelPosHorizontal&&n.setWidth(_+n.labelWidth)),n.labelHeight&&("top"==n.labelPosVertical?(n.rect.y-=n.labelHeight,n.setHeight(a+n.labelHeight),n.labelMarginTop=n.labelHeight):"center"==n.labelPosVertical&&n.labelHeight>a?(n.rect.y-=(n.labelHeight-a)/2,n.setHeight(n.labelHeight),n.labelMarginTop=(n.labelHeight-a)/2):"bottom"==n.labelPosVertical&&n.setHeight(a+n.labelHeight))}}))},b.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],r=t.id,n=t.paddingLeft,_=t.paddingTop,a=t.labelMarginLeft,i=t.labelMarginTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,n,_,a,i)}},b.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach((function(r){var n=e.idToDummyNode[r],_=n.paddingLeft,a=n.paddingTop,i=n.labelMarginLeft,o=n.labelMarginTop;e.adjustLocations(t[r],n.rect.x,n.rect.y,_,a,i,o)}))},b.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var r=e.getChild();if(null==r)return this.toBeTiled[t]=!1,!1;for(var n=r.getNodes(),_=0;_<n.length;_++){var a=n[_];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null!=a.getChild()){if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[a.id]=!1}return this.toBeTiled[t]=!0,!0},b.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,n=0;n<t.length;n++){var _=t[n];_.getSource().id!==_.getTarget().id&&(r+=1)}return r},b.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),n=0;n<r.length;n++){var _=r[n];t+=this.getNodeDegreeWithChildren(_)}return t},b.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},b.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},b.prototype.adjustLocations=function(e,t,r,n,_,a,i){r+=_+i;for(var o=t+=n+a,l=0;l<e.rows.length;l++){var s=e.rows[l];t=o;for(var c=0,u=0;u<s.length;u++){var f=s[u];f.rect.x=t,f.rect.y=r,t+=f.rect.width+e.horizontalPadding,f.rect.height>c&&(c=f.rect.height)}r+=c+e.verticalPadding}},b.prototype.tileCompoundMembers=function(e,t){var r=this;this.tiledMemberPack=[],Object.keys(e).forEach((function(n){var _=t[n];if(r.tiledMemberPack[n]=r.tileNodes(e[n],_.paddingLeft+_.paddingRight),_.rect.width=r.tiledMemberPack[n].width,_.rect.height=r.tiledMemberPack[n].height,_.setCenter(r.tiledMemberPack[n].centerX,r.tiledMemberPack[n].centerY),_.labelMarginLeft=0,_.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var a=_.rect.width,i=_.rect.height;_.labelWidth&&("left"==_.labelPosHorizontal?(_.rect.x-=_.labelWidth,_.setWidth(a+_.labelWidth),_.labelMarginLeft=_.labelWidth):"center"==_.labelPosHorizontal&&_.labelWidth>a?(_.rect.x-=(_.labelWidth-a)/2,_.setWidth(_.labelWidth),_.labelMarginLeft=(_.labelWidth-a)/2):"right"==_.labelPosHorizontal&&_.setWidth(a+_.labelWidth)),_.labelHeight&&("top"==_.labelPosVertical?(_.rect.y-=_.labelHeight,_.setHeight(i+_.labelHeight),_.labelMarginTop=_.labelHeight):"center"==_.labelPosVertical&&_.labelHeight>i?(_.rect.y-=(_.labelHeight-i)/2,_.setHeight(_.labelHeight),_.labelMarginTop=(_.labelHeight-i)/2):"bottom"==_.labelPosVertical&&_.setHeight(i+_.labelHeight))}}))},b.prototype.tileNodes=function(e,t){var r=this.tileNodesByFavoringDim(e,t,!0),n=this.tileNodesByFavoringDim(e,t,!1),_=this.getOrgRatio(r);return this.getOrgRatio(n)<_?n:r},b.prototype.getOrgRatio=function(e){var t=e.width/e.height;return t<1&&(t=1/t),t},b.prototype.calcIdealRowWidth=function(e,t){var r=l.TILING_PADDING_VERTICAL,n=l.TILING_PADDING_HORIZONTAL,_=e.length,a=0,i=0,o=0;e.forEach((function(e){a+=e.getWidth(),i+=e.getHeight(),e.getWidth()>o&&(o=e.getWidth())}));var s,c=a/_,u=i/_,f=Math.pow(r-n,2)+4*(c+n)*(u+r)*_,d=(n-r+Math.sqrt(f))/(2*(c+n));t?(s=Math.ceil(d))==d&&s++:s=Math.floor(d);var h=s*(c+n)-n;return o>h&&(h=o),h+=2*n},b.prototype.tileNodesByFavoringDim=function(e,t,r){var n=l.TILING_PADDING_VERTICAL,_=l.TILING_PADDING_HORIZONTAL,a=l.TILING_COMPARE_BY,i={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:n,horizontalPadding:_,centerX:0,centerY:0};a&&(i.idealRowWidth=this.calcIdealRowWidth(e,r));var o=function(e){return e.rect.width*e.rect.height},s=function(e,t){return o(t)-o(e)};e.sort((function(e,t){var r=s;return i.idealRowWidth?(r=a)(e.id,t.id):r(e,t)}));for(var c=0,u=0,f=0;f<e.length;f++)c+=(d=e[f]).getCenterX(),u+=d.getCenterY();for(i.centerX=c/e.length,i.centerY=u/e.length,f=0;f<e.length;f++){var d=e[f];if(0==i.rows.length)this.insertNodeToRow(i,d,0,t);else if(this.canAddHorizontal(i,d.rect.width,d.rect.height)){var h=i.rows.length-1;i.idealRowWidth||(h=this.getShortestRowIndex(i)),this.insertNodeToRow(i,d,h,t)}else this.insertNodeToRow(i,d,i.rows.length,t);this.shiftToLastRow(i)}return i},b.prototype.insertNodeToRow=function(e,t,r,n){var _=n;r==e.rows.length&&(e.rows.push([]),e.rowWidth.push(_),e.rowHeight.push(0));var a=e.rowWidth[r]+t.rect.width;e.rows[r].length>0&&(a+=e.horizontalPadding),e.rowWidth[r]=a,e.width<a&&(e.width=a);var i=t.rect.height;r>0&&(i+=e.verticalPadding);var o=0;i>e.rowHeight[r]&&(o=e.rowHeight[r],e.rowHeight[r]=i,o=e.rowHeight[r]-o),e.height+=o,e.rows[r].push(t)},b.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]<r&&(t=n,r=e.rowWidth[n]);return t},b.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,n=0;n<e.rows.length;n++)e.rowWidth[n]>r&&(t=n,r=e.rowWidth[n]);return t},b.prototype.canAddHorizontal=function(e,t,r){if(e.idealRowWidth){var n=e.rows.length-1;return e.rowWidth[n]+t+e.horizontalPadding<=e.idealRowWidth}var _=this.getShortestRowIndex(e);if(_<0)return!0;var a=e.rowWidth[_];if(a+e.horizontalPadding+t<=e.width)return!0;var i,o,l=0;return e.rowHeight[_]<r&&_>0&&(l=r+e.verticalPadding-e.rowHeight[_]),i=e.width-a>=t+e.horizontalPadding?(e.height+l)/(a+t+e.horizontalPadding):(e.height+l)/e.width,l=r+e.verticalPadding,(o=e.width<t?(e.height+l)/t:(e.height+l)/e.width)<1&&(o=1/o),i<1&&(i=1/i),i<o},b.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,n=e.rows[t],_=n[n.length-1],a=_.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&t!=r){n.splice(-1,1),e.rows[r].push(_),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var i=Number.MIN_VALUE,o=0;o<n.length;o++)n[o].height>i&&(i=n[o].height);t>0&&(i+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[r];e.rowHeight[t]=i,e.rowHeight[r]<_.height+e.verticalPadding&&(e.rowHeight[r]=_.height+e.verticalPadding);var s=e.rowHeight[t]+e.rowHeight[r];e.height+=s-l,this.shiftToLastRow(e)}},b.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},b.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},b.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){var n=this.graphManager.getAllNodes(),_=[];r=!1;for(var a=0;a<n.length;a++)if(1==(e=n[a]).getEdges().length&&!e.getEdges()[0].isInterGraph&&null==e.getChild()){if(l.PURE_INCREMENTAL){var i=e.getEdges()[0].getOtherEnd(e),o=new h(e.getCenterX()-i.getCenterX(),e.getCenterY()-i.getCenterY());_.push([e,e.getEdges()[0],e.getOwner(),o])}else _.push([e,e.getEdges()[0],e.getOwner()]);r=!0}if(1==r){for(var s=[],c=0;c<_.length;c++)1==_[c][0].getEdges().length&&(s.push(_[c]),_[c][0].getOwner().remove(_[c][0]));t.push(s),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},b.prototype.growTree=function(e){for(var t,r=e[e.length-1],n=0;n<r.length;n++)t=r[n],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},b.prototype.findPlaceforPrunedNode=function(e){var t,r,n=e[0];if(r=n==e[1].source?e[1].target:e[1].source,l.PURE_INCREMENTAL)n.setCenter(r.getCenterX()+e[3].getWidth(),r.getCenterY()+e[3].getHeight());else{var _=r.startX,a=r.finishX,i=r.startY,o=r.finishY,s=[0,0,0,0];if(i>0)for(var u=_;u<=a;u++)s[0]+=this.grid[u][i-1].length+this.grid[u][i].length-1;if(a<this.grid.length-1)for(u=i;u<=o;u++)s[1]+=this.grid[a+1][u].length+this.grid[a][u].length-1;if(o<this.grid[0].length-1)for(u=_;u<=a;u++)s[2]+=this.grid[u][o+1].length+this.grid[u][o].length-1;if(_>0)for(u=i;u<=o;u++)s[3]+=this.grid[_-1][u].length+this.grid[_][u].length-1;for(var f,d,h=g.MAX_VALUE,p=0;p<s.length;p++)s[p]<h?(h=s[p],f=1,d=p):s[p]==h&&f++;if(3==f&&0==h)0==s[0]&&0==s[1]&&0==s[2]?t=1:0==s[0]&&0==s[1]&&0==s[3]?t=0:0==s[0]&&0==s[2]&&0==s[3]?t=3:0==s[1]&&0==s[2]&&0==s[3]&&(t=2);else if(2==f&&0==h){var v=Math.floor(2*Math.random());t=0==s[0]&&0==s[1]?0==v?0:1:0==s[0]&&0==s[2]?0==v?0:2:0==s[0]&&0==s[3]?0==v?0:3:0==s[1]&&0==s[2]?0==v?1:2:0==s[1]&&0==s[3]?0==v?1:3:0==v?2:3}else t=4==f&&0==h?v=Math.floor(4*Math.random()):d;0==t?n.setCenter(r.getCenterX(),r.getCenterY()-r.getHeight()/2-c.DEFAULT_EDGE_LENGTH-n.getHeight()/2):1==t?n.setCenter(r.getCenterX()+r.getWidth()/2+c.DEFAULT_EDGE_LENGTH+n.getWidth()/2,r.getCenterY()):2==t?n.setCenter(r.getCenterX(),r.getCenterY()+r.getHeight()/2+c.DEFAULT_EDGE_LENGTH+n.getHeight()/2):n.setCenter(r.getCenterX()-r.getWidth()/2-c.DEFAULT_EDGE_LENGTH-n.getWidth()/2,r.getCenterY())}},e.exports=b},991:(e,t,r)=>{var n=r(551).FDLayoutNode,_=r(551).IMath;function a(e,t,r,_){n.call(this,e,t,r,_)}for(var i in a.prototype=Object.create(n.prototype),n)a[i]=n[i];a.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*_.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*_.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(e,t){for(var r,n=this.getChild().getNodes(),_=0;_<n.length;_++)null==(r=n[_]).getChild()?(r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},a.prototype.move=function(){var e=this.graphManager.getLayout();null!=this.child&&0!=this.child.getNodes().length||(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},902:(e,t,r)=>{function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _=r(806),a=r(551).LinkedList,i=r(551).Matrix,o=r(551).SVD;function l(){}l.handleConstraints=function(e){var t={};t.fixedNodeConstraint=e.constraints.fixedNodeConstraint,t.alignmentConstraint=e.constraints.alignmentConstraint,t.relativePlacementConstraint=e.constraints.relativePlacementConstraint;for(var r=new Map,l=new Map,s=[],c=[],u=e.getAllNodes(),f=0,d=0;d<u.length;d++){var h=u[d];null==h.getChild()&&(l.set(h.id,f++),s.push(h.getCenterX()),c.push(h.getCenterY()),r.set(h.id,h))}t.relativePlacementConstraint&&t.relativePlacementConstraint.forEach((function(e){e.gap||0==e.gap||(e.left?e.gap=_.DEFAULT_EDGE_LENGTH+r.get(e.left).getWidth()/2+r.get(e.right).getWidth()/2:e.gap=_.DEFAULT_EDGE_LENGTH+r.get(e.top).getHeight()/2+r.get(e.bottom).getHeight()/2)}));var p=function(e){var t=0,r=0;return e.forEach((function(e){t+=s[l.get(e)],r+=c[l.get(e)]})),{x:t/e.size,y:r/e.size}},g=function(e,t,r,_,i){var o=new Map;e.forEach((function(e,t){o.set(t,0)})),e.forEach((function(e,t){e.forEach((function(e){o.set(e.id,o.get(e.id)+1)}))}));var u=new Map,f=new Map,d=new a;o.forEach((function(e,n){0==e?(d.push(n),r||("horizontal"==t?u.set(n,l.has(n)?s[l.get(n)]:_.get(n)):u.set(n,l.has(n)?c[l.get(n)]:_.get(n)))):u.set(n,Number.NEGATIVE_INFINITY),r&&f.set(n,new Set([n]))})),r&&i.forEach((function(e){var n=[];if(e.forEach((function(e){r.has(e)&&n.push(e)})),n.length>0){var a=0;n.forEach((function(e){"horizontal"==t?(u.set(e,l.has(e)?s[l.get(e)]:_.get(e)),a+=u.get(e)):(u.set(e,l.has(e)?c[l.get(e)]:_.get(e)),a+=u.get(e))})),a/=n.length,e.forEach((function(e){r.has(e)||u.set(e,a)}))}else{var i=0;e.forEach((function(e){i+="horizontal"==t?l.has(e)?s[l.get(e)]:_.get(e):l.has(e)?c[l.get(e)]:_.get(e)})),i/=e.length,e.forEach((function(e){u.set(e,i)}))}}));for(var h=function(){var n=d.shift();e.get(n).forEach((function(e){if(u.get(e.id)<u.get(n)+e.gap)if(r&&r.has(e.id)){var a=void 0;if(a="horizontal"==t?l.has(e.id)?s[l.get(e.id)]:_.get(e.id):l.has(e.id)?c[l.get(e.id)]:_.get(e.id),u.set(e.id,a),a<u.get(n)+e.gap){var i=u.get(n)+e.gap-a;f.get(n).forEach((function(e){u.set(e,u.get(e)-i)}))}}else u.set(e.id,u.get(n)+e.gap);o.set(e.id,o.get(e.id)-1),0==o.get(e.id)&&d.push(e.id),r&&f.set(e.id,function(e,t){var r=new Set(e),n=!0,_=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;r.add(l)}}catch(e){_=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(_)throw a}}return r}(f.get(n),f.get(e.id)))}))};0!=d.length;)h();if(r){var p=new Set;e.forEach((function(e,t){0==e.length&&p.add(t)}));var g=[];f.forEach((function(e,t){if(p.has(t)){var _=!1,a=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;r.has(c)&&(_=!0)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}if(!_){var u=!1,f=void 0;g.forEach((function(t,r){t.has([].concat(n(e))[0])&&(u=!0,f=r)})),u?e.forEach((function(e){g[f].add(e)})):g.push(new Set(e))}}})),g.forEach((function(e,r){var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,f=!0,d=!1,h=void 0;try{for(var p,g=e[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var v=p.value,m=void 0;m="horizontal"==t?l.has(v)?s[l.get(v)]:_.get(v):l.has(v)?c[l.get(v)]:_.get(v);var y=u.get(v);m<n&&(n=m),m>i&&(i=m),y<a&&(a=y),y>o&&(o=y)}}catch(e){d=!0,h=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw h}}var w=(n+i)/2-(a+o)/2,b=!0,k=!1,x=void 0;try{for(var P,O=e[Symbol.iterator]();!(b=(P=O.next()).done);b=!0){var E=P.value;u.set(E,u.get(E)+w)}}catch(e){k=!0,x=e}finally{try{!b&&O.return&&O.return()}finally{if(k)throw x}}}))}return u},v=function(e){var t=0,r=0,n=0,_=0;if(e.forEach((function(e){e.left?s[l.get(e.left)]-s[l.get(e.right)]>=0?t++:r++:c[l.get(e.top)]-c[l.get(e.bottom)]>=0?n++:_++})),t>r&&n>_)for(var a=0;a<l.size;a++)s[a]=-1*s[a],c[a]=-1*c[a];else if(t>r)for(var i=0;i<l.size;i++)s[i]=-1*s[i];else if(n>_)for(var o=0;o<l.size;o++)c[o]=-1*c[o]},m=function(e){var t=[],r=new a,n=new Set,_=0;return e.forEach((function(a,i){if(!n.has(i)){t[_]=[];var o=i;for(r.push(o),n.add(o),t[_].push(o);0!=r.length;)o=r.shift(),e.get(o).forEach((function(e){n.has(e.id)||(r.push(e.id),n.add(e.id),t[_].push(e.id))}));_++}})),t},y=function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(r).push(e),t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t},w=function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t},b=[],k=[],x=!1,P=!1,O=new Set,E=new Map,A=new Map,C=[];if(t.fixedNodeConstraint&&t.fixedNodeConstraint.forEach((function(e){O.add(e.nodeId)})),t.relativePlacementConstraint&&(t.relativePlacementConstraint.forEach((function(e){e.left?(E.has(e.left)?E.get(e.left).push({id:e.right,gap:e.gap,direction:"horizontal"}):E.set(e.left,[{id:e.right,gap:e.gap,direction:"horizontal"}]),E.has(e.right)||E.set(e.right,[])):(E.has(e.top)?E.get(e.top).push({id:e.bottom,gap:e.gap,direction:"vertical"}):E.set(e.top,[{id:e.bottom,gap:e.gap,direction:"vertical"}]),E.has(e.bottom)||E.set(e.bottom,[]))})),A=y(E),C=m(A)),_.TRANSFORM_ON_CONSTRAINT_HANDLING){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>1)t.fixedNodeConstraint.forEach((function(e,t){b[t]=[e.position.x,e.position.y],k[t]=[s[l.get(e.nodeId)],c[l.get(e.nodeId)]]})),x=!0;else if(t.alignmentConstraint)!function(){var e=0;if(t.alignmentConstraint.vertical){for(var r=t.alignmentConstraint.vertical,_=function(t){var _=new Set;r[t].forEach((function(e){_.add(e)}));var a=new Set([].concat(n(_)).filter((function(e){return O.has(e)}))),i=void 0;i=a.size>0?s[l.get(a.values().next().value)]:p(_).x,r[t].forEach((function(t){b[e]=[i,c[l.get(t)]],k[e]=[s[l.get(t)],c[l.get(t)]],e++}))},a=0;a<r.length;a++)_(a);x=!0}if(t.alignmentConstraint.horizontal){for(var i=t.alignmentConstraint.horizontal,o=function(t){var r=new Set;i[t].forEach((function(e){r.add(e)}));var _=new Set([].concat(n(r)).filter((function(e){return O.has(e)}))),a=void 0;a=_.size>0?s[l.get(_.values().next().value)]:p(r).y,i[t].forEach((function(t){b[e]=[s[l.get(t)],a],k[e]=[s[l.get(t)],c[l.get(t)]],e++}))},u=0;u<i.length;u++)o(u);x=!0}t.relativePlacementConstraint&&(P=!0)}();else if(t.relativePlacementConstraint){for(var S=0,T=0,N=0;N<C.length;N++)C[N].length>S&&(S=C[N].length,T=N);if(S<A.size/2)v(t.relativePlacementConstraint),x=!1,P=!1;else{var L=new Map,M=new Map,I=[];C[T].forEach((function(e){E.get(e).forEach((function(t){"horizontal"==t.direction?(L.has(e)?L.get(e).push(t):L.set(e,[t]),L.has(t.id)||L.set(t.id,[]),I.push({left:e,right:t.id})):(M.has(e)?M.get(e).push(t):M.set(e,[t]),M.has(t.id)||M.set(t.id,[]),I.push({top:e,bottom:t.id}))}))})),v(I),P=!1;var j=g(L,"horizontal"),R=g(M,"vertical");C[T].forEach((function(e,t){k[t]=[s[l.get(e)],c[l.get(e)]],b[t]=[],j.has(e)?b[t][0]=j.get(e):b[t][0]=s[l.get(e)],R.has(e)?b[t][1]=R.get(e):b[t][1]=c[l.get(e)]})),x=!0}}if(x){for(var D,F=i.transpose(b),B=i.transpose(k),z=0;z<F.length;z++)F[z]=i.multGamma(F[z]),B[z]=i.multGamma(B[z]);var q=i.multMat(F,i.transpose(B)),V=o.svd(q);D=i.multMat(V.V,i.transpose(V.U));for(var U=0;U<l.size;U++){var G=[s[U],c[U]],W=[D[0][0],D[1][0]],$=[D[0][1],D[1][1]];s[U]=i.dotProduct(G,W),c[U]=i.dotProduct(G,$)}P&&v(t.relativePlacementConstraint)}}if(_.ENFORCE_CONSTRAINTS){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>0){var Y={x:0,y:0};t.fixedNodeConstraint.forEach((function(e,t){var r,n,_={x:s[l.get(e.nodeId)],y:c[l.get(e.nodeId)]},a=e.position,i=(n=_,{x:(r=a).x-n.x,y:r.y-n.y});Y.x+=i.x,Y.y+=i.y})),Y.x/=t.fixedNodeConstraint.length,Y.y/=t.fixedNodeConstraint.length,s.forEach((function(e,t){s[t]+=Y.x})),c.forEach((function(e,t){c[t]+=Y.y})),t.fixedNodeConstraint.forEach((function(e){s[l.get(e.nodeId)]=e.position.x,c[l.get(e.nodeId)]=e.position.y}))}if(t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var H=t.alignmentConstraint.vertical,X=function(e){var t=new Set;H[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return O.has(e)}))),_=void 0;_=r.size>0?s[l.get(r.values().next().value)]:p(t).x,t.forEach((function(e){O.has(e)||(s[l.get(e)]=_)}))},Z=0;Z<H.length;Z++)X(Z);if(t.alignmentConstraint.horizontal)for(var K=t.alignmentConstraint.horizontal,J=function(e){var t=new Set;K[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(n(t)).filter((function(e){return O.has(e)}))),_=void 0;_=r.size>0?c[l.get(r.values().next().value)]:p(t).y,t.forEach((function(e){O.has(e)||(c[l.get(e)]=_)}))},Q=0;Q<K.length;Q++)J(Q)}t.relativePlacementConstraint&&function(){var e=new Map,r=new Map,n=new Map,_=new Map,a=new Map,i=new Map,o=new Set,u=new Set;if(O.forEach((function(e){o.add(e),u.add(e)})),t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var f=t.alignmentConstraint.vertical,d=function(t){n.set("dummy"+t,[]),f[t].forEach((function(r){e.set(r,"dummy"+t),n.get("dummy"+t).push(r),O.has(r)&&o.add("dummy"+t)})),a.set("dummy"+t,s[l.get(f[t][0])])},h=0;h<f.length;h++)d(h);if(t.alignmentConstraint.horizontal)for(var p=t.alignmentConstraint.horizontal,v=function(e){_.set("dummy"+e,[]),p[e].forEach((function(t){r.set(t,"dummy"+e),_.get("dummy"+e).push(t),O.has(t)&&u.add("dummy"+e)})),i.set("dummy"+e,c[l.get(p[e][0])])},b=0;b<p.length;b++)v(b)}var k=new Map,x=new Map,P=function(t){E.get(t).forEach((function(n){var _=void 0,a=void 0;"horizontal"==n.direction?(_=e.get(t)?e.get(t):t,a=e.get(n.id)?{id:e.get(n.id),gap:n.gap,direction:n.direction}:n,k.has(_)?k.get(_).push(a):k.set(_,[a]),k.has(a.id)||k.set(a.id,[])):(_=r.get(t)?r.get(t):t,a=r.get(n.id)?{id:r.get(n.id),gap:n.gap,direction:n.direction}:n,x.has(_)?x.get(_).push(a):x.set(_,[a]),x.has(a.id)||x.set(a.id,[]))}))},A=!0,C=!1,S=void 0;try{for(var T,N=E.keys()[Symbol.iterator]();!(A=(T=N.next()).done);A=!0)P(T.value)}catch(e){C=!0,S=e}finally{try{!A&&N.return&&N.return()}finally{if(C)throw S}}var L=y(k),M=y(x),I=m(L),j=m(M),R=w(k),D=w(x),F=[],B=[];I.forEach((function(e,t){F[t]=[],e.forEach((function(e){0==R.get(e).length&&F[t].push(e)}))})),j.forEach((function(e,t){B[t]=[],e.forEach((function(e){0==D.get(e).length&&B[t].push(e)}))}));var z=g(k,"horizontal",o,a,F),q=g(x,"vertical",u,i,B),V=function(e){n.get(e)?n.get(e).forEach((function(t){s[l.get(t)]=z.get(e)})):s[l.get(e)]=z.get(e)},U=!0,G=!1,W=void 0;try{for(var $,Y=z.keys()[Symbol.iterator]();!(U=($=Y.next()).done);U=!0)V($.value)}catch(e){G=!0,W=e}finally{try{!U&&Y.return&&Y.return()}finally{if(G)throw W}}var H=function(e){_.get(e)?_.get(e).forEach((function(t){c[l.get(t)]=q.get(e)})):c[l.get(e)]=q.get(e)},X=!0,Z=!1,K=void 0;try{for(var J,Q=q.keys()[Symbol.iterator]();!(X=(J=Q.next()).done);X=!0)H(J.value)}catch(e){Z=!0,K=e}finally{try{!X&&Q.return&&Q.return()}finally{if(Z)throw K}}}()}for(var ee=0;ee<u.length;ee++){var te=u[ee];null==te.getChild()&&te.setCenter(s[l.get(te.id)],c[l.get(te.id)])}},e.exports=l},551:t=>{t.exports=e}},r={},function e(n){var _=r[n];if(void 0!==_)return _.exports;var a=r[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(45);var t,r},e.exports=r(a("9ty7o"))})),i("9ty7o",(function(e,t){var r;e.exports,r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var _=t[n]={i:n,l:!1,exports:{}};return e[n].call(_.exports,_,_.exports,r),_.l=!0,_.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t,r){function n(){}n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,e.exports=n},function(e,t,r){var n=r(2),_=r(8),a=r(9);function i(e,t,r){n.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(var o in i.prototype=Object.create(n.prototype),n)i[o]=n[o];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),n=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==n)break;r=r.getOwner().getParent()}return null},i.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=_.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=i},function(e,t,r){e.exports=function(e){this.vGraphObject=e}},function(e,t,r){var n=r(2),_=r(10),a=r(13),i=r(0),o=r(16),l=r(5);function s(e,t,r,i){null==r&&null==i&&(i=t),n.call(this,i),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=_.MIN_VALUE,this.inclusionTreeDepth=_.MAX_VALUE,this.vGraphObject=i,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new a(t.x,t.y,r.width,r.height):new a}for(var c in s.prototype=Object.create(n.prototype),n)s[c]=n[c];s.prototype.getEdges=function(){return this.edges},s.prototype.getChild=function(){return this.child},s.prototype.getOwner=function(){return this.owner},s.prototype.getWidth=function(){return this.rect.width},s.prototype.setWidth=function(e){this.rect.width=e},s.prototype.getHeight=function(){return this.rect.height},s.prototype.setHeight=function(e){this.rect.height=e},s.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},s.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},s.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},s.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},s.prototype.getRect=function(){return this.rect},s.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},s.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},s.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},s.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},s.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},s.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},s.prototype.getEdgeListToNode=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.target==e){if(n.source!=r)throw"Incorrect edge source!";t.push(n)}})),t},s.prototype.getEdgesBetween=function(e){var t=[],r=this;return r.edges.forEach((function(n){if(n.source!=r&&n.target!=r)throw"Incorrect edge source and/or target";n.target!=e&&n.source!=e||t.push(n)})),t},s.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach((function(r){if(r.source==t)e.add(r.target);else{if(r.target!=t)throw"Incorrect incidency!";e.add(r.source)}})),e},s.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),r=0;r<t.length;r++)t[r].withChildren().forEach((function(t){e.add(t)}));return e},s.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return 0==e&&(e=1),e},s.prototype.getEstimatedSize=function(){if(this.estimatedSize==_.MIN_VALUE)throw"assert failed";return this.estimatedSize},s.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},s.prototype.scatter=function(){var e,t,r=-i.INITIAL_WORLD_BOUNDARY,n=i.INITIAL_WORLD_BOUNDARY;e=i.WORLD_CENTER_X+o.nextDouble()*(n-r)+r;var _=-i.INITIAL_WORLD_BOUNDARY,a=i.INITIAL_WORLD_BOUNDARY;t=i.WORLD_CENTER_Y+o.nextDouble()*(a-_)+_,this.rect.x=e,this.rect.y=t},s.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),r=e.getBottom()-e.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(t+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(r+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>r?(this.rect.y-=(this.labelHeight-r)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(r+this.labelHeight))}}},s.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==_.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},s.prototype.transform=function(e){var t=this.rect.x;t>i.WORLD_BOUNDARY?t=i.WORLD_BOUNDARY:t<-i.WORLD_BOUNDARY&&(t=-i.WORLD_BOUNDARY);var r=this.rect.y;r>i.WORLD_BOUNDARY?r=i.WORLD_BOUNDARY:r<-i.WORLD_BOUNDARY&&(r=-i.WORLD_BOUNDARY);var n=new l(t,r),_=e.inverseTransformPoint(n);this.setLocation(_.x,_.y)},s.prototype.getLeft=function(){return this.rect.x},s.prototype.getRight=function(){return this.rect.x+this.rect.width},s.prototype.getTop=function(){return this.rect.y},s.prototype.getBottom=function(){return this.rect.y+this.rect.height},s.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=s},function(e,t,r){var n=r(0);function _(){}for(var a in n)_[a]=n[a];_.MAX_ITERATIONS=2500,_.DEFAULT_EDGE_LENGTH=50,_.DEFAULT_SPRING_STRENGTH=.45,_.DEFAULT_REPULSION_STRENGTH=4500,_.DEFAULT_GRAVITY_STRENGTH=.4,_.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,_.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,_.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,_.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,_.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,_.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,_.COOLING_ADAPTATION_FACTOR=.33,_.ADAPTATION_LOWER_NODE_LIMIT=1e3,_.ADAPTATION_UPPER_NODE_LIMIT=5e3,_.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,_.MAX_NODE_DISPLACEMENT=3*_.MAX_NODE_DISPLACEMENT_INCREMENTAL,_.MIN_REPULSION_DIST=_.DEFAULT_EDGE_LENGTH/10,_.CONVERGENCE_CHECK_PERIOD=100,_.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,_.MIN_EDGE_LENGTH=1,_.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=_},function(e,t,r){function n(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(e){this.x=e},n.prototype.setY=function(e){this.y=e},n.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=n},function(e,t,r){var n=r(2),_=r(10),a=r(0),i=r(7),o=r(3),l=r(1),s=r(13),c=r(12),u=r(11);function f(e,t,r){n.call(this,r),this.estimatedSize=_.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof i?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var d in f.prototype=Object.create(n.prototype),n)f[d]=n[d];f.prototype.getNodes=function(){return this.nodes},f.prototype.getEdges=function(){return this.edges},f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getParent=function(){return this.parent},f.prototype.getLeft=function(){return this.left},f.prototype.getRight=function(){return this.right},f.prototype.getTop=function(){return this.top},f.prototype.getBottom=function(){return this.bottom},f.prototype.isConnected=function(){return this.isConnected},f.prototype.add=function(e,t,r){if(null==t&&null==r){var n=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(n)>-1)throw"Node already in graph!";return n.owner=this,this.getNodes().push(n),n}var _=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(r)>-1))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(_.source=t,_.target=r,_.isInterGraph=!1,this.getEdges().push(_),t.edges.push(_),r!=t&&r.edges.push(_),_)},f.prototype.remove=function(e){var t=e;if(e instanceof o){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r=t.edges.slice(),n=r.length,_=0;_<n;_++)(a=r[_]).isInterGraph?this.graphManager.remove(a):a.source.owner.remove(a);if(-1==(i=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(i,1)}else if(e instanceof l){var a;if(null==(a=e))throw"Edge is null!";if(null==a.source||null==a.target)throw"Source and/or target is null!";if(null==a.source.owner||null==a.target.owner||a.source.owner!=this||a.target.owner!=this)throw"Source and/or target owner is invalid!";var i,s=a.source.edges.indexOf(a),c=a.target.edges.indexOf(a);if(!(s>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(a.source.edges.splice(s,1),a.target!=a.source&&a.target.edges.splice(c,1),-1==(i=a.source.owner.getEdges().indexOf(a)))throw"Not in owner's edge list!";a.source.owner.getEdges().splice(i,1)}},f.prototype.updateLeftTop=function(){for(var e,t,r,n=_.MAX_VALUE,a=_.MAX_VALUE,i=this.getNodes(),o=i.length,l=0;l<o;l++){var s=i[l];n>(e=s.getTop())&&(n=e),a>(t=s.getLeft())&&(a=t)}return n==_.MAX_VALUE?null:(r=null!=i[0].getParent().paddingLeft?i[0].getParent().paddingLeft:this.margin,this.left=a-r,this.top=n-r,new c(this.left,this.top))},f.prototype.updateBounds=function(e){for(var t,r,n,a,i,o=_.MAX_VALUE,l=-_.MAX_VALUE,c=_.MAX_VALUE,u=-_.MAX_VALUE,f=this.nodes,d=f.length,h=0;h<d;h++){var p=f[h];e&&null!=p.child&&p.updateBounds(),o>(t=p.getLeft())&&(o=t),l<(r=p.getRight())&&(l=r),c>(n=p.getTop())&&(c=n),u<(a=p.getBottom())&&(u=a)}var g=new s(o,c,l-o,u-c);o==_.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),i=null!=f[0].getParent().paddingLeft?f[0].getParent().paddingLeft:this.margin,this.left=g.x-i,this.right=g.x+g.width+i,this.top=g.y-i,this.bottom=g.y+g.height+i},f.calculateBounds=function(e){for(var t,r,n,a,i=_.MAX_VALUE,o=-_.MAX_VALUE,l=_.MAX_VALUE,c=-_.MAX_VALUE,u=e.length,f=0;f<u;f++){var d=e[f];i>(t=d.getLeft())&&(i=t),o<(r=d.getRight())&&(o=r),l>(n=d.getTop())&&(l=n),c<(a=d.getBottom())&&(c=a)}return new s(i,l,o-i,c-l)},f.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==_.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,n=0;n<r;n++)e+=t[n].calcEstimatedSize();return this.estimatedSize=0==e?a.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},f.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,r,n=new u,_=new Set,a=this.nodes[0];for(a.withChildren().forEach((function(e){n.push(e),_.add(e)}));0!==n.length;)for(var i=(t=(a=n.shift()).getEdges()).length,o=0;o<i;o++)null==(r=t[o].getOtherEndInGraph(a,this))||_.has(r)||r.withChildren().forEach((function(e){n.push(e),_.add(e)}));if(this.isConnected=!1,_.size>=this.nodes.length){var l=0;_.forEach((function(t){t.owner==e&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=f},function(e,t,r){var n,_=r(1);function a(e){n=r(6),this.layout=e,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),r=this.add(e,t);return this.setRootGraph(r),this.rootGraph},a.prototype.add=function(e,t,r,n,_){if(null==r&&null==n&&null==_){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}_=r,r=e;var a=(n=t).getOwner(),i=_.getOwner();if(null==a||a.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==i||i.getGraphManager()!=this)throw"Target not in this graph mgr!";if(a==i)return r.isInterGraph=!1,a.add(r,n,_);if(r.isInterGraph=!0,r.source=n,r.target=_,this.edges.indexOf(r)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},a.prototype.remove=function(e){if(e instanceof n){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,a=[],i=(a=a.concat(t.getEdges())).length,o=0;o<i;o++)r=a[o],t.remove(r);var l,s=[];for(i=(s=s.concat(t.getNodes())).length,o=0;o<i;o++)l=s[o],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof _){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";if(c=r.source.edges.indexOf(r),r.source.edges.splice(c,1),c=r.target.edges.indexOf(r),r.target.edges.splice(c,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";c=r.source.owner.getGraphManager().edges.indexOf(r),r.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,n=0;n<r;n++)e=e.concat(t[n].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),r=(t.length,0);r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,n=e.getOwner();null!=(r=n.getParent());){if(r==t)return!0;if(null==(n=r.getOwner()))break}for(n=t.getOwner();null!=(r=n.getParent());){if(r==e)return!0;if(null==(n=r.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,n,_,a=this.getAllEdges(),i=a.length,o=0;o<i;o++)if(t=(e=a[o]).source,r=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=r,t!=r){for(n=t.getOwner();null==e.lca;){for(e.targetInLca=r,_=r.getOwner();null==e.lca;){if(_==n){e.lca=_;break}if(_==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=_.getParent(),_=e.targetInLca.getOwner()}if(n==this.rootGraph)break;null==e.lca&&(e.sourceInLca=n.getParent(),n=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();null!=r;){for(var n=t.getOwner();null!=n;){if(n==r)return n;n=n.getParent().getOwner()}r=r.getParent().getOwner()}return r},a.prototype.calcInclusionTreeDepths=function(e,t){var r;null==e&&null==t&&(e=this.rootGraph,t=1);for(var n=e.getNodes(),_=n.length,a=0;a<_;a++)(r=n[a]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=[],r=this.edges.length,n=0;n<r;n++)e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target)&&t.push(e);for(n=0;n<t.length;n++)this.remove(t[n]);return!1},e.exports=a},function(e,t,r){var n=r(12);function _(){}_.calcSeparationAmount=function(e,t,r,n){if(!e.intersects(t))throw"assert failed";var _=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,_),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var i=a*r[0],o=r[1]/a;r[0]<o?o=r[0]:i=r[1],r[0]=-1*_[0]*(o/2+n),r[1]=-1*_[1]*(i/2+n)},_.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},_.getIntersection2=function(e,t,r){var n=e.getCenterX(),_=e.getCenterY(),a=t.getCenterX(),i=t.getCenterY();if(e.intersects(t))return r[0]=n,r[1]=_,r[2]=a,r[3]=i,!0;var o=e.getX(),l=e.getY(),s=e.getRight(),c=e.getX(),u=e.getBottom(),f=e.getRight(),d=e.getWidthHalf(),h=e.getHeightHalf(),p=t.getX(),g=t.getY(),v=t.getRight(),m=t.getX(),y=t.getBottom(),w=t.getRight(),b=t.getWidthHalf(),k=t.getHeightHalf(),x=!1,P=!1;if(n===a){if(_>i)return r[0]=n,r[1]=l,r[2]=a,r[3]=y,!1;if(_<i)return r[0]=n,r[1]=u,r[2]=a,r[3]=g,!1}else if(_===i){if(n>a)return r[0]=o,r[1]=_,r[2]=v,r[3]=i,!1;if(n<a)return r[0]=s,r[1]=_,r[2]=p,r[3]=i,!1}else{var O=e.height/e.width,E=t.height/t.width,A=(i-_)/(a-n),C=void 0,S=void 0,T=void 0,N=void 0,L=void 0,M=void 0;if(-O===A?n>a?(r[0]=c,r[1]=u,x=!0):(r[0]=s,r[1]=l,x=!0):O===A&&(n>a?(r[0]=o,r[1]=l,x=!0):(r[0]=f,r[1]=u,x=!0)),-E===A?a>n?(r[2]=m,r[3]=y,P=!0):(r[2]=v,r[3]=g,P=!0):E===A&&(a>n?(r[2]=p,r[3]=g,P=!0):(r[2]=w,r[3]=y,P=!0)),x&&P)return!1;if(n>a?_>i?(C=this.getCardinalDirection(O,A,4),S=this.getCardinalDirection(E,A,2)):(C=this.getCardinalDirection(-O,A,3),S=this.getCardinalDirection(-E,A,1)):_>i?(C=this.getCardinalDirection(-O,A,1),S=this.getCardinalDirection(-E,A,3)):(C=this.getCardinalDirection(O,A,2),S=this.getCardinalDirection(E,A,4)),!x)switch(C){case 1:N=l,T=n+-h/A,r[0]=T,r[1]=N;break;case 2:T=f,N=_+d*A,r[0]=T,r[1]=N;break;case 3:N=u,T=n+h/A,r[0]=T,r[1]=N;break;case 4:T=c,N=_+-d*A,r[0]=T,r[1]=N}if(!P)switch(S){case 1:M=g,L=a+-k/A,r[2]=L,r[3]=M;break;case 2:L=w,M=i+b*A,r[2]=L,r[3]=M;break;case 3:M=y,L=a+k/A,r[2]=L,r[3]=M;break;case 4:L=m,M=i+-b*A,r[2]=L,r[3]=M}}return!1},_.getCardinalDirection=function(e,t,r){return e>t?r:1+r%4},_.getIntersection=function(e,t,r,_){if(null==_)return this.getIntersection2(e,t,r);var a,i,o,l,s,c,u,f=e.x,d=e.y,h=t.x,p=t.y,g=r.x,v=r.y,m=_.x,y=_.y;return 0==(u=(a=p-d)*(l=g-m)-(i=y-v)*(o=f-h))?null:new n((o*(c=m*v-g*y)-l*(s=h*d-f*p))/u,(i*s-a*c)/u)},_.angleOfVector=function(e,t,r,n){var _=void 0;return e!==r?(_=Math.atan((n-t)/(r-e)),r<e?_+=Math.PI:n<t&&(_+=this.TWO_PI)):_=n<t?this.ONE_AND_HALF_PI:this.HALF_PI,_},_.doIntersect=function(e,t,r,n){var _=e.x,a=e.y,i=t.x,o=t.y,l=r.x,s=r.y,c=n.x,u=n.y,f=(i-_)*(u-s)-(c-l)*(o-a);if(0===f)return!1;var d=((u-s)*(c-_)+(l-c)*(u-a))/f,h=((a-o)*(c-_)+(i-_)*(u-a))/f;return 0<d&&d<1&&0<h&&h<1},_.findCircleLineIntersections=function(e,t,r,n,_,a,i){var o=(r-e)*(r-e)+(n-t)*(n-t),l=2*((e-_)*(r-e)+(t-a)*(n-t)),s=(e-_)*(e-_)+(t-a)*(t-a)-i*i;if(l*l-4*o*s>=0){var c=(-l+Math.sqrt(l*l-4*o*s))/(2*o),u=(-l-Math.sqrt(l*l-4*o*s))/(2*o);return c>=0&&c<=1?[c]:u>=0&&u<=1?[u]:null}return null},_.HALF_PI=.5*Math.PI,_.ONE_AND_HALF_PI=1.5*Math.PI,_.TWO_PI=2*Math.PI,_.THREE_PI=3*Math.PI,e.exports=_},function(e,t,r){function n(){}n.sign=function(e){return e>0?1:e<0?-1:0},n.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=n},function(e,t,r){function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=function(e){return{value:e,next:null,prev:null}},a=function(e,t,r,n){return null!==e?e.next=t:n.head=t,null!==r?r.prev=t:n.tail=t,t.prev=e,t.next=r,n.length++,t},i=function(e,t){var r=e.prev,n=e.next;return null!==r?r.next=n:t.head=n,null!==n?n.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e},o=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach((function(e){return r.push(e)}))}return n(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return a(t.prev,_(e),t,this)}},{key:"insertAfter",value:function(e,t){return a(t,_(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return a(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return a(t,e,t.next,this)}},{key:"push",value:function(e){return a(this.tail,_(e),null,this)}},{key:"unshift",value:function(e){return a(null,_(e),this.head,this)}},{key:"remove",value:function(e){return i(e,this)}},{key:"pop",value:function(){return i(this.tail,this).value}},{key:"popNode",value:function(){return i(this.tail,this)}},{key:"shift",value:function(){return i(this.head,this).value}},{key:"shiftNode",value:function(){return i(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var r=1,n=this.head;r<e;)n=n.next,r++;n.value=t}}}]),e}();e.exports=o},function(e,t,r){function n(e,t,r){this.x=null,this.y=null,null==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(r=e,this.x=r.x,this.y=r.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?(r=e,this.setLocation(r.x,r.y)):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(e,t){this.x=e,this.y=t},n.prototype.translate=function(e,t){this.x+=e,this.y+=t},n.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},n.prototype.toString=function(){return(new n).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=n},function(e,t,r){function n(e,t,r,n){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=n&&(this.x=e,this.y=t,this.width=r,this.height=n)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(e){this.x=e},n.prototype.getY=function(){return this.y},n.prototype.setY=function(e){this.y=e},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},e.exports=n},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _(){}_.lastID=0,_.createID=function(e){return _.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=_.getString(),_.lastID++),e.uniqueID)},_.getString=function(e){return null==e&&(e=_.lastID),"Object#"+e},_.isPrimitive=function(e){var t=void 0===e?"undefined":n(e);return null==e||"object"!=t&&"function"!=t},e.exports=_},function(e,t,r){function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _=r(0),a=r(7),i=r(3),o=r(1),l=r(6),s=r(5),c=r(17),u=r(29);function f(e){u.call(this),this.layoutQuality=_.QUALITY,this.createBendsAsNeeded=_.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=_.DEFAULT_INCREMENTAL,this.animationOnLayout=_.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=_.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=_.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=_.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}f.RANDOM_SEED=1,f.prototype=Object.create(u.prototype),f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},f.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},f.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},f.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},f.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},f.prototype.newNode=function(e){return new i(this.graphManager,e)},f.prototype.newEdge=function(e){return new o(null,null,e)},f.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},f.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==_.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},f.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},f.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var r=this.graphManager.getRoot().getNodes();for(t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},f.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof i){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),n=0;n<r.length;n++)update(r[n]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else if(e instanceof o){var _=e;null!=_.vGraphObject&&_.vGraphObject.update(_)}else if(e instanceof l){var a=e;null!=a.vGraphObject&&a.vGraphObject.update(a)}},f.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=_.QUALITY,this.animationDuringLayout=_.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=_.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=_.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=_.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=_.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=_.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},f.prototype.transform=function(e){if(null==e)this.transform(new s(0,0));else{var t=new c,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var n=this.getAllNodes(),_=0;_<n.length;_++)n[_].transform(t)}}},f.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,n=e.getNodes(),_=0;_<n.length;_++)null==(r=(t=n[_]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},f.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),_=!0,a=0;a<r.length;a++)null!=r[a].getChild()&&(_=!1);if(!_)return e;var i=new Set,o=[],l=new Map,s=[];for(s=s.concat(r);s.length>0&&t;){for(o.push(s[0]);o.length>0&&t;){var c=o[0];o.splice(0,1),i.add(c);var u=c.getEdges();for(a=0;a<u.length;a++){var f=u[a].getOtherEnd(c);if(l.get(c)!=f){if(i.has(f)){t=!1;break}o.push(f),l.set(f,c)}}}if(t){var d=[].concat(n(i));for(e.push(d),a=0;a<d.length;a++){var h=d[a],p=s.indexOf(h);p>-1&&s.splice(p,1)}i=new Set,l=new Map}else e=[]}return e},f.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,n=this.graphManager.calcLowestCommonAncestor(e.source,e.target),_=0;_<e.bendpoints.length;_++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),n.add(a);var i=this.newEdge(null);this.graphManager.add(i,r,a),t.add(a),r=a}return i=this.newEdge(null),this.graphManager.add(i,r,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):n.remove(e),t},f.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(n(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(r.bendpoints.length>0){for(var _=this.edgeToDummyNodes.get(r),a=0;a<_.length;a++){var i=_[a],o=new s(i.getCenterX(),i.getCenterY()),l=r.bendpoints.get(a);l.x=o.x,l.y=o.y,i.getOwner().remove(i)}this.graphManager.add(r,r.source,r.target)}}},f.transform=function(e,t,r,n){if(null!=r&&null!=n){var _=t;return e<=50?_-=(t-t/r)/50*(50-e):_+=(t*n-t)/50*(e-50),_}var a,i;return e<=50?(a=9*t/500,i=t/10):(a=9*t/50,i=-8*t),a*e+i},f.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],n=new Map,_=!1,a=null;1!=t.length&&2!=t.length||(_=!0,a=t[0]);for(var i=0;i<t.length;i++){var o=(c=t[i]).getNeighborsList().size;n.set(c,c.getNeighborsList().size),1==o&&r.push(c)}var l=[];for(l=l.concat(r);!_;){var s=[];for(s=s.concat(l),l=[],i=0;i<t.length;i++){var c=t[i],u=t.indexOf(c);u>=0&&t.splice(u,1),c.getNeighborsList().forEach((function(e){if(r.indexOf(e)<0){var t=n.get(e)-1;1==t&&l.push(e),n.set(e,t)}}))}r=r.concat(l),1!=t.length&&2!=t.length||(_=!0,a=t[0])}return a},f.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=f},function(e,t,r){function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return n.x=1e4*Math.sin(n.seed++),n.x-Math.floor(n.x)},e.exports=n},function(e,t,r){var n=r(5);function _(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}_.prototype.getWorldOrgX=function(){return this.lworldOrgX},_.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},_.prototype.getWorldOrgY=function(){return this.lworldOrgY},_.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},_.prototype.getWorldExtX=function(){return this.lworldExtX},_.prototype.setWorldExtX=function(e){this.lworldExtX=e},_.prototype.getWorldExtY=function(){return this.lworldExtY},_.prototype.setWorldExtY=function(e){this.lworldExtY=e},_.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},_.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},_.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},_.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},_.prototype.getDeviceExtX=function(){return this.ldeviceExtX},_.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},_.prototype.getDeviceExtY=function(){return this.ldeviceExtY},_.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},_.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return 0!=r&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r),t},_.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return 0!=r&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r),t},_.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return 0!=r&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r),t},_.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return 0!=r&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r),t},_.prototype.inverseTransformPoint=function(e){return new n(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=_},function(e,t,r){var n=r(15),_=r(4),a=r(0),i=r(8),o=r(9);function l(){n.call(this),this.useSmartIdealEdgeLengthCalculation=_.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=_.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=_.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=_.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=_.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*_.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=_.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=_.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=_.MAX_ITERATIONS}for(var s in l.prototype=Object.create(n.prototype),n)l[s]=n[s];l.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=_.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,n,i,o,l,s=this.getGraphManager().getAllEdges(),c=0;c<s.length;c++)t=(e=s[c]).idealLength,e.isInterGraph&&(n=e.getSource(),i=e.getTarget(),o=e.getSourceInLca().getEstimatedSize(),l=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=o+l-2*a.SIMPLE_NODE_SIZE),r=e.getLca().getInclusionTreeDepth(),e.idealLength+=t*_.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*r))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>_.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*_.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-_.ADAPTATION_LOWER_NODE_LIMIT)/(_.ADAPTATION_UPPER_NODE_LIMIT-_.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-_.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=_.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>_.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(_.COOLING_ADAPTATION_FACTOR,1-(e-_.ADAPTATION_LOWER_NODE_LIMIT)/(_.ADAPTATION_UPPER_NODE_LIMIT-_.ADAPTATION_LOWER_NODE_LIMIT)*(1-_.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=_.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*_.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,r,n,a,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%_.GRID_CALCULATION_CHECK_PERIOD==1&&i&&this.updateGrid(),a=new Set,e=0;e<l.length;e++)r=l[e],this.calculateRepulsionForceOfANode(r,a,i,o),a.add(r);else for(e=0;e<l.length;e++)for(r=l[e],t=e+1;t<l.length;t++)n=l[t],r.getOwner()==n.getOwner()&&this.calcRepulsionForce(r,n)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var r,n,_,a,i=e.getSource(),o=e.getTarget();if(this.uniformLeafNodeSizes&&null==i.getChild()&&null==o.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(_=(n=e.edgeElasticity*(r-t))*(e.lengthX/r),a=n*(e.lengthY/r),i.springForceX+=_,i.springForceY+=a,o.springForceX-=_,o.springForceY-=a)},l.prototype.calcRepulsionForce=function(e,t){var r,n,a,l,s,c,u,f=e.getRect(),d=t.getRect(),h=new Array(2),p=new Array(4);if(f.intersects(d)){i.calcSeparationAmount(f,d,h,_.DEFAULT_EDGE_LENGTH/2),c=2*h[0],u=2*h[1];var g=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=g*c,e.repulsionForceY-=g*u,t.repulsionForceX+=g*c,t.repulsionForceY+=g*u}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=d.getCenterX()-f.getCenterX(),n=d.getCenterY()-f.getCenterY()):(i.getIntersection(f,d,p),r=p[2]-p[0],n=p[3]-p[1]),Math.abs(r)<_.MIN_REPULSION_DIST&&(r=o.sign(r)*_.MIN_REPULSION_DIST),Math.abs(n)<_.MIN_REPULSION_DIST&&(n=o.sign(n)*_.MIN_REPULSION_DIST),a=r*r+n*n,l=Math.sqrt(a),c=(s=(e.nodeRepulsion/2+t.nodeRepulsion/2)*e.noOfChildren*t.noOfChildren/a)*r/l,u=s*n/l,e.repulsionForceX-=c,e.repulsionForceY-=u,t.repulsionForceX+=c,t.repulsionForceY+=u},l.prototype.calcGravitationalForce=function(e){var t,r,n,_,a,i,o,l;r=((t=e.getOwner()).getRight()+t.getLeft())/2,n=(t.getTop()+t.getBottom())/2,_=e.getCenterX()-r,a=e.getCenterY()-n,i=Math.abs(_)+e.getWidth()/2,o=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(i>(l=t.getEstimatedSize()*this.gravityRangeFactor)||o>l)&&(e.gravitationForceX=-this.gravityConstant*_,e.gravitationForceY=-this.gravityConstant*a):(i>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||o>l)&&(e.gravitationForceX=-this.gravityConstant*_*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t,r;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var n=new Array(t),_=0;_<t;_++)n[_]=new Array(r);for(_=0;_<t;_++)for(var a=0;a<r;a++)n[_][a]=new Array;return n},l.prototype.addNodeToGrid=function(e,t,r){var n,_,a,i;n=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),_=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange));for(var o=n;o<=_;o++)for(var l=a;l<=i;l++)this.grid[o][l].push(e),e.setGridCoordinates(n,_,a,i)},l.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,r,n){if(this.totalIterations%_.GRID_CALCULATION_CHECK_PERIOD==1&&r||n){var a,i=new Set;e.surrounding=new Array;for(var o=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var s=e.startY-1;s<e.finishY+2;s++)if(!(l<0||s<0||l>=o.length||s>=o[0].length))for(var c=0;c<o[l][s].length;c++)if(a=o[l][s][c],e.getOwner()==a.getOwner()&&e!=a&&!t.has(a)&&!i.has(a)){var u=Math.abs(e.getCenterX()-a.getCenterX())-(e.getWidth()/2+a.getWidth()/2),f=Math.abs(e.getCenterY()-a.getCenterY())-(e.getHeight()/2+a.getHeight()/2);u<=this.repulsionRange&&f<=this.repulsionRange&&i.add(a)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(i))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,r){var n=r(1),_=r(4);function a(e,t,r){n.call(this,e,t,r),this.idealLength=_.DEFAULT_EDGE_LENGTH,this.edgeElasticity=_.DEFAULT_SPRING_STRENGTH}for(var i in a.prototype=Object.create(n.prototype),n)a[i]=n[i];e.exports=a},function(e,t,r){var n=r(3),_=r(4);function a(e,t,r,a){n.call(this,e,t,r,a),this.nodeRepulsion=_.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var i in a.prototype=Object.create(n.prototype),n)a[i]=n[i];a.prototype.setGridCoordinates=function(e,t,r,n){this.startX=e,this.finishX=t,this.startY=r,this.finishY=n},e.exports=a},function(e,t,r){function n(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(e){this.width=e},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(e){this.height=e},e.exports=n},function(e,t,r){var n=r(14);function _(){this.map={},this.keys=[]}_.prototype.put=function(e,t){var r=n.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},_.prototype.contains=function(e){return n.createID(e),null!=this.map[e]},_.prototype.get=function(e){var t=n.createID(e);return this.map[t]},_.prototype.keySet=function(){return this.keys},e.exports=_},function(e,t,r){var n=r(14);function _(){this.set={}}_.prototype.add=function(e){var t=n.createID(e);this.contains(t)||(this.set[t]=e)},_.prototype.remove=function(e){delete this.set[n.createID(e)]},_.prototype.clear=function(){this.set={}},_.prototype.contains=function(e){return this.set[n.createID(e)]==e},_.prototype.isEmpty=function(){return 0===this.size()},_.prototype.size=function(){return Object.keys(this.set).length},_.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,n=0;n<r;n++)e.push(this.set[t[n]])},_.prototype.size=function(){return Object.keys(this.set).length},_.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];this.add(n)}},e.exports=_},function(e,t,r){function n(){}n.multMat=function(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var _=0;_<t[0].length;_++){r[n][_]=0;for(var a=0;a<e[0].length;a++)r[n][_]+=e[n][a]*t[a][_]}}return r},n.transpose=function(e){for(var t=[],r=0;r<e[0].length;r++){t[r]=[];for(var n=0;n<e.length;n++)t[r][n]=e[n][r]}return t},n.multCons=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]*t;return r},n.minusOp=function(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=e[n]-t[n];return r},n.dotProduct=function(e,t){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[n];return r},n.mag=function(e){return Math.sqrt(this.dotProduct(e,e))},n.normalize=function(e){for(var t=[],r=this.mag(e),n=0;n<e.length;n++)t[n]=e[n]/r;return t},n.multGamma=function(e){for(var t=[],r=0,n=0;n<e.length;n++)r+=e[n];r*=-1/e.length;for(var _=0;_<e.length;_++)t[_]=r+e[_];return t},n.multL=function(e,t,r){for(var n=[],_=[],a=[],i=0;i<t[0].length;i++){for(var o=0,l=0;l<t.length;l++)o+=-.5*t[l][i]*e[l];_[i]=o}for(var s=0;s<r.length;s++){for(var c=0,u=0;u<r.length;u++)c+=r[s][u]*_[u];a[s]=c}for(var f=0;f<t.length;f++){for(var d=0,h=0;h<t[0].length;h++)d+=t[f][h]*a[h];n[f]=d}return n},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=r(11),a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===r&&void 0===r||(this.compareFunction=this._defaultCompareFunction);var n=void 0;n=t instanceof _?t.size():t.length,this._quicksort(t,0,n-1)}return n(e,[{key:"_quicksort",value:function(e,t,r){if(t<r){var n=this._partition(e,t,r);this._quicksort(e,t,n),this._quicksort(e,n+1,r)}}},{key:"_partition",value:function(e,t,r){for(var n=this._get(e,t),_=t,a=r;;){for(;this.compareFunction(n,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,_),n);)_++;if(!(_<a))return a;this._swap(e,_,a),_++,a--}}},{key:"_get",value:function(e,t){return e instanceof _?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,r){e instanceof _?e.set_object_at(t,r):e[t]=r}},{key:"_swap",value:function(e,t,r){var n=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,n)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=a},function(e,t,r){function n(){}n.svd=function(e){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=e.length,this.n=e[0].length;var t=Math.min(this.m,this.n);this.s=function(e){for(var t=[];e-- >0;)t.push(0);return t}(Math.min(this.m+1,this.n)),this.U=function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}([this.m,t]),this.V=function(e){return function e(t){if(0==t.length)return 0;for(var r=[],n=0;n<t[0];n++)r.push(e(t.slice(1)));return r}(e)}([this.n,this.n]);for(var r,_,a=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.n),i=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.m),o=Math.min(this.m-1,this.n),l=Math.max(0,Math.min(this.n-2,this.m)),s=0;s<Math.max(o,l);s++){if(s<o){this.s[s]=0;for(var c=s;c<this.m;c++)this.s[s]=n.hypot(this.s[s],e[c][s]);if(0!==this.s[s]){e[s][s]<0&&(this.s[s]=-this.s[s]);for(var u=s;u<this.m;u++)e[u][s]/=this.s[s];e[s][s]+=1}this.s[s]=-this.s[s]}for(var f=s+1;f<this.n;f++){if(r=s<o,_=0!==this.s[s],r&&_){for(var d=0,h=s;h<this.m;h++)d+=e[h][s]*e[h][f];d=-d/e[s][s];for(var p=s;p<this.m;p++)e[p][f]+=d*e[p][s]}a[f]=e[s][f]}if(function(e,t){return t}(0,s<o))for(var g=s;g<this.m;g++)this.U[g][s]=e[g][s];if(s<l){a[s]=0;for(var v=s+1;v<this.n;v++)a[s]=n.hypot(a[s],a[v]);if(0!==a[s]){a[s+1]<0&&(a[s]=-a[s]);for(var m=s+1;m<this.n;m++)a[m]/=a[s];a[s+1]+=1}if(a[s]=-a[s],function(e,t){return e&&t}(s+1<this.m,0!==a[s])){for(var y=s+1;y<this.m;y++)i[y]=0;for(var w=s+1;w<this.n;w++)for(var b=s+1;b<this.m;b++)i[b]+=a[w]*e[b][w];for(var k=s+1;k<this.n;k++)for(var x=-a[k]/a[s+1],P=s+1;P<this.m;P++)e[P][k]+=x*i[P]}for(var O=s+1;O<this.n;O++)this.V[O][s]=a[O]}}var E=Math.min(this.n,this.m+1);o<this.n&&(this.s[o]=e[o][o]),this.m<E&&(this.s[E-1]=0),l+1<E&&(a[l]=e[l][E-1]),a[E-1]=0;for(var A=o;A<t;A++){for(var C=0;C<this.m;C++)this.U[C][A]=0;this.U[A][A]=1}for(var S=o-1;S>=0;S--)if(0!==this.s[S]){for(var T=S+1;T<t;T++){for(var N=0,L=S;L<this.m;L++)N+=this.U[L][S]*this.U[L][T];N=-N/this.U[S][S];for(var M=S;M<this.m;M++)this.U[M][T]+=N*this.U[M][S]}for(var I=S;I<this.m;I++)this.U[I][S]=-this.U[I][S];this.U[S][S]=1+this.U[S][S];for(var j=0;j<S-1;j++)this.U[j][S]=0}else{for(var R=0;R<this.m;R++)this.U[R][S]=0;this.U[S][S]=1}for(var D=this.n-1;D>=0;D--){if(function(e,t){return e&&t}(D<l,0!==a[D]))for(var F=D+1;F<t;F++){for(var B=0,z=D+1;z<this.n;z++)B+=this.V[z][D]*this.V[z][F];B=-B/this.V[D+1][D];for(var q=D+1;q<this.n;q++)this.V[q][F]+=B*this.V[q][D]}for(var V=0;V<this.n;V++)this.V[V][D]=0;this.V[D][D]=1}for(var U=E-1,G=Math.pow(2,-52),W=Math.pow(2,-966);E>0;){var $=void 0,Y=void 0;for($=E-2;$>=-1&&-1!==$;$--)if(Math.abs(a[$])<=W+G*(Math.abs(this.s[$])+Math.abs(this.s[$+1]))){a[$]=0;break}if($===E-2)Y=4;else{var H=void 0;for(H=E-1;H>=$&&H!==$;H--){var X=(H!==E?Math.abs(a[H]):0)+(H!==$+1?Math.abs(a[H-1]):0);if(Math.abs(this.s[H])<=W+G*X){this.s[H]=0;break}}H===$?Y=3:H===E-1?Y=1:(Y=2,$=H)}switch($++,Y){case 1:var Z=a[E-2];a[E-2]=0;for(var K=E-2;K>=$;K--){var J=n.hypot(this.s[K],Z),Q=this.s[K]/J,ee=Z/J;this.s[K]=J,K!==$&&(Z=-ee*a[K-1],a[K-1]=Q*a[K-1]);for(var te=0;te<this.n;te++)J=Q*this.V[te][K]+ee*this.V[te][E-1],this.V[te][E-1]=-ee*this.V[te][K]+Q*this.V[te][E-1],this.V[te][K]=J}break;case 2:var re=a[$-1];a[$-1]=0;for(var ne=$;ne<E;ne++){var _e=n.hypot(this.s[ne],re),ae=this.s[ne]/_e,ie=re/_e;this.s[ne]=_e,re=-ie*a[ne],a[ne]=ae*a[ne];for(var oe=0;oe<this.m;oe++)_e=ae*this.U[oe][ne]+ie*this.U[oe][$-1],this.U[oe][$-1]=-ie*this.U[oe][ne]+ae*this.U[oe][$-1],this.U[oe][ne]=_e}break;case 3:var le=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(a[E-2])),Math.abs(this.s[$])),Math.abs(a[$])),se=this.s[E-1]/le,ce=this.s[E-2]/le,ue=a[E-2]/le,fe=this.s[$]/le,de=a[$]/le,he=((ce+se)*(ce-se)+ue*ue)/2,pe=se*ue*(se*ue),ge=0;(function(e,t){return e||t})(0!==he,0!==pe)&&(ge=Math.sqrt(he*he+pe),he<0&&(ge=-ge),ge=pe/(he+ge));for(var ve=(fe+se)*(fe-se)+ge,me=fe*de,ye=$;ye<E-1;ye++){var we=n.hypot(ve,me),be=ve/we,ke=me/we;ye!==$&&(a[ye-1]=we),ve=be*this.s[ye]+ke*a[ye],a[ye]=be*a[ye]-ke*this.s[ye],me=ke*this.s[ye+1],this.s[ye+1]=be*this.s[ye+1];for(var xe=0;xe<this.n;xe++)we=be*this.V[xe][ye]+ke*this.V[xe][ye+1],this.V[xe][ye+1]=-ke*this.V[xe][ye]+be*this.V[xe][ye+1],this.V[xe][ye]=we;if(be=ve/(we=n.hypot(ve,me)),ke=me/we,this.s[ye]=we,ve=be*a[ye]+ke*this.s[ye+1],this.s[ye+1]=-ke*a[ye]+be*this.s[ye+1],me=ke*a[ye+1],a[ye+1]=be*a[ye+1],ye<this.m-1)for(var Pe=0;Pe<this.m;Pe++)we=be*this.U[Pe][ye]+ke*this.U[Pe][ye+1],this.U[Pe][ye+1]=-ke*this.U[Pe][ye]+be*this.U[Pe][ye+1],this.U[Pe][ye]=we}a[E-2]=ve;break;case 4:if(this.s[$]<=0){this.s[$]=this.s[$]<0?-this.s[$]:0;for(var Oe=0;Oe<=U;Oe++)this.V[Oe][$]=-this.V[Oe][$]}for(;$<U&&!(this.s[$]>=this.s[$+1]);){var Ee=this.s[$];if(this.s[$]=this.s[$+1],this.s[$+1]=Ee,$<this.n-1)for(var Ae=0;Ae<this.n;Ae++)Ee=this.V[Ae][$+1],this.V[Ae][$+1]=this.V[Ae][$],this.V[Ae][$]=Ee;if($<this.m-1)for(var Ce=0;Ce<this.m;Ce++)Ee=this.U[Ce][$+1],this.U[Ce][$+1]=this.U[Ce][$],this.U[Ce][$]=Ee;$++}E--}}return{U:this.U,V:this.V,S:this.s}},n.hypot=function(e,t){var r=void 0;return Math.abs(e)>Math.abs(t)?(r=t/e,r=Math.abs(e)*Math.sqrt(1+r*r)):0!=t?(r=e/t,r=Math.abs(t)*Math.sqrt(1+r*r)):r=0,r},e.exports=n},function(e,t,r){var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sequence1=t,this.sequence2=r,this.match_score=n,this.mismatch_penalty=_,this.gap_penalty=a,this.iMax=t.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var i=0;i<this.iMax;i++){this.grid[i]=new Array(this.jMax);for(var o=0;o<this.jMax;o++)this.grid[i][o]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.tracebackGrid[l][s]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return n(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var n=1;n<this.jMax;n++){var _=[this.sequence1[r-1]===this.sequence2[n-1]?this.grid[r-1][n-1]+this.match_score:this.grid[r-1][n-1]+this.mismatch_penalty,this.grid[r-1][n]+this.gap_penalty,this.grid[r][n-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(_);this.grid[r][n]=_[a[0]],this.tracebackGrid[r][n]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var r=[],n=-1;-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=_},function(e,t,r){var n=function(){};n.FDLayout=r(18),n.FDLayoutConstants=r(4),n.FDLayoutEdge=r(19),n.FDLayoutNode=r(20),n.DimensionD=r(21),n.HashMap=r(22),n.HashSet=r(23),n.IGeometry=r(8),n.IMath=r(9),n.Integer=r(10),n.Point=r(12),n.PointD=r(5),n.RandomSeed=r(16),n.RectangleD=r(13),n.Transform=r(17),n.UniqueIDGeneretor=r(14),n.Quicksort=r(25),n.LinkedList=r(11),n.LGraphObject=r(2),n.LGraph=r(6),n.LEdge=r(1),n.LGraphManager=r(7),n.LNode=r(3),n.Layout=r(15),n.LayoutConstants=r(0),n.NeedlemanWunsch=r(27),n.Matrix=r(24),n.SVD=r(26),e.exports=n},function(e,t,r){function n(){this.listeners=[]}var _=n.prototype;_.addListener=function(e,t){this.listeners.push({event:e,callback:t})},_.removeListener=function(e,t){for(var r=this.listeners.length;r>=0;r--){var n=this.listeners[r];n.event===e&&n.callback===t&&this.listeners.splice(r,1)}},_.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var n=this.listeners[r];e===n.event&&n.callback(t)}},e.exports=n}])},e.exports=r()}));var o,l,s=a("3krpC"),c={},u={},f={};l=function(){this.__data__=[],this.size=0};var d,h={},p={};p=function(e,t){return e===t||e!=e&&t!=t},h=function(e,t){for(var r=e.length;r--;)if(p(e[r][0],t))return r;return-1};var g=Array.prototype.splice;d=function(e){var t=this.__data__,r=h(t,e);return!(r<0)&&(r==t.length-1?t.pop():g.call(t,r,1),--this.size,!0)};var v;v=function(e){var t=this.__data__,r=h(t,e);return r<0?void 0:t[r][1]};var m;m=function(e){return h(this.__data__,e)>-1};var y;function w(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}y=function(e,t){var r=this.__data__,n=h(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},w.prototype.clear=l,w.prototype.delete=d,w.prototype.get=v,w.prototype.has=m,w.prototype.set=y,f=w;var b;b=function(){this.__data__=new f,this.size=0};var k;k=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var x;x=function(e){return this.__data__.get(e)};var P;P=function(e){return this.__data__.has(e)};var O,E,A={},C={},S={},T={},N={};E=(te=a("kLIqa")).Symbol;var L={},M=Object.prototype,I=M.hasOwnProperty,j=M.toString,R=E?E.toStringTag:void 0;L=function(e){var t=I.call(e,R),r=e[R];try{e[R]=void 0;var n=!0}catch(e){}var _=j.call(e);return n&&(t?e[R]=r:delete e[R]),_};var D={},F=Object.prototype.toString;D=function(e){return F.call(e)};var B=E?E.toStringTag:void 0;N=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?L(e):D(e)};var z={};z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};T=function(e){if(!z(e))return!1;var t=N(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var q,V,U={},G=(te=a("kLIqa"))["__core-js_shared__"],W=(V=/[^.]+$/.exec((q=G)&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";U=function(e){return!!W&&W in e};var $={},Y=Function.prototype.toString;$=function(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var H=/^\[object .+?Constructor\]$/,X=Function.prototype,Z=Object.prototype,K=X.toString,J=Z.hasOwnProperty,Q=RegExp("^"+K.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S=function(e){return!(!z(e)||U(e))&&(T(e)?Q:H).test($(e))};var ee={};ee=function(e,t){return null==e?void 0:e[t]},C=function(e,t){var r=ee(e,t);return S(r)?r:void 0};var te=a("kLIqa"),re=C(te,"Map");A=re;var ne,_e,ae={},ie={},oe={},le=C(Object,"create");oe=le,_e=function(){this.__data__=oe?oe(null):{},this.size=0};var se;se=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var ce,ue=Object.prototype.hasOwnProperty;ce=function(e){var t=this.__data__;if(oe){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ue.call(t,e)?t[e]:void 0};var fe,de=Object.prototype.hasOwnProperty;fe=function(e){var t=this.__data__;return oe?void 0!==t[e]:de.call(t,e)};var he;function pe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}he=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=oe&&void 0===t?"__lodash_hash_undefined__":t,this},pe.prototype.clear=_e,pe.prototype.delete=se,pe.prototype.get=ce,pe.prototype.has=fe,pe.prototype.set=he,ie=pe,ne=function(){this.size=0,this.__data__={hash:new ie,map:new(A||f),string:new ie}};var ge,ve={},me={};me=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ve=function(e,t){var r=e.__data__;return me(t)?r["string"==typeof t?"string":"hash"]:r.map},ge=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t};var ye;ye=function(e){return ve(this,e).get(e)};var we;we=function(e){return ve(this,e).has(e)};var be;function ke(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}be=function(e,t){var r=ve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ke.prototype.clear=ne,ke.prototype.delete=ge,ke.prototype.get=ye,ke.prototype.has=we,ke.prototype.set=be,ae=ke;function xe(e){var t=this.__data__=new f(e);this.size=t.size}O=function(e,t){var r=this.__data__;if(r instanceof f){var n=r.__data__;if(!A||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ae(n)}return r.set(e,t),this.size=r.size,this},xe.prototype.clear=b,xe.prototype.delete=k,xe.prototype.get=x,xe.prototype.has=P,xe.prototype.set=O,u=xe;var Pe={},Oe={},Ee={},Ae=function(){try{var e=C(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();Ee=Ae,Oe=function(e,t,r){"__proto__"==t&&Ee?Ee(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Pe=function(e,t,r){(void 0!==r&&!p(e[t],r)||void 0===r&&!(t in e))&&Oe(e,t,r)};var Ce={};var Se=function(e){return function(t,r,n){for(var _=-1,a=Object(t),i=n(t),o=i.length;o--;){var l=i[e?o:++_];if(!1===r(a[l],l,a))break}return t}}();Ce=Se;var Te={},Ne=a("4N7g8"),Le={},Me={},Ie={},je=(te=a("kLIqa")).Uint8Array;Ie=je,Me=function(e){var t=new e.constructor(e.byteLength);return new Ie(t).set(new Ie(e)),t},Le=function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Re={};Re=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var De={},Fe={},Be=Object.create,ze=function(){function e(){}return function(t){if(!z(t))return{};if(Be)return Be(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();Fe=ze;var qe={},Ve={};var Ue=(Ve=function(e,t){return function(r){return e(t(r))}})(Object.getPrototypeOf,Object);qe=Ue;var Ge={},We=Object.prototype;Ge=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||We)},De=function(e){return"function"!=typeof e.constructor||Ge(e)?{}:Fe(qe(e))};var $e={},Ye={},He={};He=function(e){return null!=e&&"object"==typeof e};Ye=function(e){return He(e)&&"[object Arguments]"==N(e)};var Xe=Object.prototype,Ze=Xe.hasOwnProperty,Ke=Xe.propertyIsEnumerable,Je=Ye(function(){return arguments}())?Ye:function(e){return He(e)&&Ze.call(e,"callee")&&!Ke.call(e,"callee")};$e=Je;var Qe={},et=Array.isArray;Qe=et;var tt={},rt={},nt={};nt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},rt=function(e){return null!=e&&nt(e.length)&&!T(e)},tt=function(e){return He(e)&&rt(e)};var _t=a("4a4bO"),at={},it=Function.prototype,ot=Object.prototype,lt=it.toString,st=ot.hasOwnProperty,ct=lt.call(Object);at=function(e){if(!He(e)||"[object Object]"!=N(e))return!1;var t=qe(e);if(null===t)return!0;var r=st.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lt.call(r)==ct};var ut,ft={},dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1,ut=function(e){return He(e)&&nt(e.length)&&!!dt[N(e)]};var ht={};ht=function(e){return function(t){return e(t)}};var pt=(eh=a("3tQok"))&&eh.isTypedArray,gt=pt?ht(pt):ut;ft=gt;var vt={};vt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var mt={},yt={},wt={},bt=Object.prototype.hasOwnProperty;wt=function(e,t,r){var n=e[t];bt.call(e,t)&&p(n,r)&&(void 0!==r||t in e)||Oe(e,t,r)},yt=function(e,t,r,n){var _=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var o=t[a],l=n?n(r[o],e[o],o,r,e):void 0;void 0===l&&(l=e[o]),_?Oe(r,o,l):wt(r,o,l)}return r};var kt={},xt={},Pt={};Pt=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};_t=a("4a4bO");var Ot={},Et=/^(?:0|[1-9]\d*)$/;Ot=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Et.test(e))&&e>-1&&e%1==0&&e<t};var At=Object.prototype.hasOwnProperty;xt=function(e,t){var r=Qe(e),n=!r&&$e(e),_=!r&&!n&&_t(e),a=!r&&!n&&!_&&ft(e),i=r||n||_||a,o=i?Pt(e.length,String):[],l=o.length;for(var s in e)!t&&!At.call(e,s)||i&&("length"==s||_&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ot(s,l))||o.push(s);return o};var Ct={},St={};St=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t};var Tt=Object.prototype.hasOwnProperty;Ct=function(e){if(!z(e))return St(e);var t=Ge(e),r=[];for(var n in e)("constructor"!=n||!t&&Tt.call(e,n))&&r.push(n);return r},kt=function(e){return rt(e)?xt(e,!0):Ct(e)},mt=function(e){return yt(e,kt(e))},Te=function(e,t,r,n,_,a,i){var o=vt(e,r),l=vt(t,r),s=i.get(l);if(s)Pe(e,r,s);else{var c=a?a(o,l,r+"",e,t,i):void 0,u=void 0===c;if(u){var f=Qe(l),d=!f&&_t(l),h=!f&&!d&&ft(l);c=l,f||d||h?Qe(o)?c=o:tt(o)?c=Re(o):d?(u=!1,c=Ne(l,!0)):h?(u=!1,c=Le(l,!0)):c=[]:at(l)||$e(l)?(c=o,$e(o)?c=mt(o):z(o)&&!T(o)||(c=De(l))):u=!1}u&&(i.set(l,c),_(c,l,n,a,i),i.delete(l)),Pe(e,r,c)}},c=function e(t,r,n,_,a){t!==r&&Ce(r,(function(i,o){if(a||(a=new u),z(i))Te(t,r,o,n,e,_,a);else{var l=_?_(vt(t,o),i,o+"",t,r,a):void 0;void 0===l&&(l=i),Pe(t,o,l)}}),kt)};var Nt,Lt={},Mt={};Nt=function(e){return e};var It={},jt={};jt=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var Rt=Math.max;It=function(e,t,r){return t=Rt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,_=-1,a=Rt(n.length-t,0),i=Array(a);++_<a;)i[_]=n[t+_];_=-1;for(var o=Array(t+1);++_<t;)o[_]=n[_];return o[t]=r(i),jt(e,this,o)}};var Dt,Ft={},Bt={};Bt=function(e){return function(){return e}},Dt=Ee?function(e,t){return Ee(e,"toString",{configurable:!0,enumerable:!1,value:Bt(t),writable:!0})}:Nt;var zt=Date.now;var qt=function(e){var t=0,r=0;return function(){var n=zt(),_=16-(n-r);if(r=n,_>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Dt);Ft=qt,Mt=function(e,t){return Ft(It(e,t,Nt),e+"")};var Vt={};Vt=function(e,t,r){if(!z(r))return!1;var n=typeof t;return!!("number"==n?rt(r)&&Ot(t,r.length):"string"==n&&t in r)&&p(r[t],e)};var Ut=(Lt=function(e){return Mt((function(t,r){var n=-1,_=r.length,a=_>1?r[_-1]:void 0,i=_>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(_--,a):void 0,i&&Vt(r[0],r[1],i)&&(a=_<3?void 0:a,_=1),t=Object(t);++n<_;){var o=r[n];o&&e(t,o,n,a)}return t}))})((function(e,t,r){c(e,t,r)}));o=Ut;s=a("3krpC"),s=a("3krpC");function Gt(e,t){if(void 0===e)throw new Error("get_field_schema(): schema is undefined!");const r=t.split("."),n=r.pop();for(const t of r){if("[]"==t&&"array"==e.type&&(e=e.items||{}),"object"!=e.type)throw new Error(`get_field_schema(): cannot access ‘${t}’ of non-object type ‘${e}’`);e=(e.properties||{})[t]||{}}return(e.properties||{})[n]}function*Wt(e,t,r){if(void 0===e)throw new Error("iterfield(): obj is undefined!");const n=t.split(".");for(let t=0;t<n.length;++t){const _=n[t];if("[]"==_){e||=[];for(let _=0;_<e.length;++_){const a=e[_];let i=(r?`${r}.`:"")+`[${_}]`;const o=n.slice(t+1).join(".");o?yield*Wt(a,o,i):yield{value:a,fieldnameidx:i}}return}e=(e||{})[_],r=(r?`${r}.`:"")+_}yield{value:e,fieldnameidx:r}}function $t(e,t){if(void 0===e)throw new Error("getfield(): obj is undefined!");const r=t.split("."),n=r.pop();for(let t of r){if(Array.isArray(e)){let e=/^\[(\d+)\]$/.exec(t);null!=e&&(t=parseInt(e[1]))}e=e[t]||{}}return e[n]}function Yt(e,t,r){if(void 0===e)throw new Error("setfield(): obj is undefined!");let n=null;"object"==typeof r?({set_object_attribute_fn:n}=r):n=(e,t)=>{Object.hasOwn(e,t)?e[t]=r(e[t]):e[t]=r()};const _=t.split("."),a=_.map(((e,t)=>{let r=t===_.length-2,n=/^\[(\d*)\]$/.exec(e);if(null!=n){let t=n[1];return{isarray:!0,isbeforelast:r,part:e=""===t?-1:parseInt(t)}}return{isarray:!1,isbeforelast:r,part:e}}));for(let t=0;t<a.length-1;++t){let r=a[t].part;-1===r&&(r=e.length),Object.hasOwn(e,r)||(e[r]=a[t+1].isarray?[]:{}),e=e[r]}let i=a[a.length-1].part;return-1===i&&(i=e.length),n(e,i)}function Ht(e,t,r){Yt(e,t,(e=>(e||[]).concat(r)))}class Xt{constructor(){this.zoodb=null}install_zoo(e){this.zoodb=e}initialize_zoo(){}process_zoo(){throw new Error("Please reimplement me")}prepare_zoo_update_objects(e){}process_zoo_update_objects(e){return this.process_zoo()}process_data_dump(e,t){return e}}const Zt=r(s)("zoodb.dbprocessor.relations");class Kt{constructor({object_type:e,relation_spec:t,zoodb:r}){this.object_type=e,this.relation_spec=t,this.zoodb=r,this.object_field=t.object_field,this.to_object_type=t.to_object_type,this.allow_null=t.allow_null??!1,this.relation_add_object_field=t.relation_add_object_field,this.relation_primary_key_field=t.relation_primary_key_field,this.value_is_shorthand_object_id=!0===this.relation_primary_key_field;const n=this.relation_spec.backreference;if(n?(this.use_backreference=!0,this.backref_relation_primary_key_field=n.relation_primary_key_field??this.object_type+"_id",this.backref_relation_object_field=n.relation_object_field??this.object_type,this.backref_field=n.field):this.use_backreference=!1,!Object.hasOwn(this.zoodb.objects,this.to_object_type))throw new Error(`Invalid _zoo_relation definition in ‘${this.object_type}’: There is no such object type ‘${this.to_object_type}’`);const _=Gt(this.zoodb.schema(this.object_type),this.object_field);if(null==_)throw new Error(`Invalid field ‘${this.object_field}’ in ‘${this.object_type}’ object (in relation to ‘${this.to_object_type}’)`);"array"===_.type?(this.source_has_multiple_relations=!0,this.relation_add_object_field&&(this.fully_specified_relation_add_object_field=this.object_field+".[]."+this.relation_add_object_field)):(this.source_has_multiple_relations=!1,this.relation_add_object_field&&(this.fully_specified_relation_add_object_field=this.object_field+"."+this.relation_add_object_field))}get_computed_fields(){let e={};return this.fully_specified_relation_add_object_field&&(e[this.object_type]=[{fieldname:this.fully_specified_relation_add_object_field,msg:`You are only expected to set ‘${this.relation_primary_key_field}’.`}]),this.use_backreference&&(e[this.to_object_type]=(e[this.to_object_type]??[]).concat([{fieldname:this.backref_field,msg:"This field will be determined automatically."}])),e}get_object_relation_objects(e){const t=$t(e,this.object_field);if(this.source_has_multiple_relations)return t&&t.length?t:[];if(!t){if(!this.allow_null)throw new Error(`Object ${this.object_type} ${e._zoodb.id}: Relation object data is invalid (it might be null or undefined).  We expected a single target object relation because the field ‘${this.object_field}’ isn't of type array.  If it's a shorthand id field and it can be null, the relation specification's ‘allow_null’ must be set.`);return[]}return[t]}process_object_relation(e,t){for(const r of this.get_object_relation_objects(e))this._process_single_relation(e,r,t)}_process_single_relation(e,t,r){let n=this.zoodb;const{process_object_types:_}=r;let a=null;if(this.value_is_shorthand_object_id)a=t;else{if(!t)throw new Error(`Object ${this.object_type} ${e._zoodb.id}: Relation object data is invalid (it might be null or undefined).`);a=t[this.relation_primary_key_field]}if(null==a&&!this.allow_null)throw new Error(`Target object ID in reference cannot be null in ${this.object_type} ‘${e._zoodb?.id}’ .${this.object_field}:  ${JSON.stringify(t)}`);let i=null;if(null!=a&&(i=n.objects[this.to_object_type][a]??null),null!=a&&null==i)throw new Error(`In ${this.object_type} object ‘${e._zoodb.id}’ (‘${e._zoodb.source_file_path}’): Invalid reference in  ‘${this.object_field}’ to ${this.to_object_type} object with nonexistent ID ‘${a}’`);let o=null;if(o=this.value_is_shorthand_object_id?{[this.to_object_type+"_id"]:t}:Object.fromEntries(Object.entries(t).filter((([e])=>e!=this.relation_primary_key_field))),null!=this.relation_add_object_field&&(t[this.relation_add_object_field]=i),this.use_backreference&&(null==_||_.includes(this.to_object_type))&&null!=i){const t=Object.assign({},o);if(t[this.backref_relation_primary_key_field]=e._zoodb.id,t[this.backref_relation_object_field]=e,!this.backref_field)throw new Error(`Invalid field: in backreference: in relation object in ${this.object_type}`);Ht(i,this.backref_field,[t])}}toString(){return`[ZooRelation ${this.object_type}:${this.object_field} → ${this.to_object_type}]`}}class Jt extends Xt{constructor(e){super(),this.config=e??{},this.relations=null}initialize_zoo(){this.config.object_types??=this.zoodb.object_types,this.relations=Object.fromEntries(this.config.object_types.map((e=>{const t=(this.zoodb.schema(e)._zoo_relations??[]).map((t=>new Kt({object_type:e,relation_spec:t,zoodb:this.zoodb})));return[e,t]}))),this.check_all_clean_fields()}process_zoo(){let e=this.zoodb;this.clear_all_relation_fields();const t=this.config.object_types;if(!this.relations)return;const r={process_object_types:this.config.object_types};for(const n of t){if(Zt(`Processing relations for ${n} object relations`),!this.relations[n])return;let t=e.objects[n];for(const e of Object.values(t))for(const t of this.relations[n])t.process_object_relation(e,r)}}prepare_zoo_update_objects(){this.clear_all_relation_fields()}clear_all_relation_fields({dbobjects:e}={}){this.check_all_clean_fields({action:({object:e,fieldnameidx:t})=>{Yt(e,t,{set_object_attribute_fn:(e,t)=>{delete e[t]}})},dbobjects:e})}check_all_clean_fields({action:e,dbobjects:t}={}){t??=this.zoodb.objects,null==e&&(e=({object_type:e,computed_relation_fieldinfo:t,fieldnameidx:r,value:n})=>{throw new Error(`${e} object's ‘${r}’ field should not be specified manually (got ${JSON.stringify(n)}). `+t.msg)});const r={};for(const[,e]of Object.entries(this.relations))for(const t of e){const e=t.get_computed_fields();for(const[t,n]of Object.entries(e))r[t]=(r[t]??[]).concat(n)}for(const[n,_]of Object.entries(r))for(const r of Object.values(t[n]))for(const t of _){const{fieldname:_}=t;for(const{value:a,fieldnameidx:i}of Wt(r,_))void 0!==a&&e({object_type:n,object:r,computed_relation_fieldinfo:t,fieldnameidx:i,value:a})}}process_data_dump(e,t){let{relations_keep_object_property_pointers:r}=t;return r??=!1,r||this.clear_all_relation_fields({dbobjects:e.db.objects}),e}}function Qt(){return new Jt}s=a("3krpC");const er=(tr=a("hoVWB")).__kwargtrans__;var tr=a("hoVWB");function rr(e,t){let r=e.findLastIndex((e=>void 0!==e));if(-1===r){if(e.length!=t.length)throw new Error(`Error in function call: ${e.length} arguments provided, expected ${t.length} (${t.map((e=>"‘"+e+"’")).join(", ")})`);return e}let n=e[r];if(null==n||"object"!=typeof n||!Object.hasOwn(n,"__kwargtrans__"))return e;let _=Object.assign({},n);e[r]=void 0,delete _.__kwargtrans__;for(const[r,n]of t.entries()){let t=_[n];if(void 0!==t){if(void 0!==e[r])throw new Error(`Both positional and keyword arguments provided for ‘${n}’ (py-style)`);e[r]=t,delete _[n]}}delete _.constructor;const a=Object.keys(_);if(a.length)throw new Error(`Invalid keyword argument(s): ${a.map((e=>"‘"+e+"’")).join(", ")}`);return e}function nr(e){try{return`${e}`}catch(e){return"[failed to convert to string]"}}function _r(e){if(e&&null!=e.__class__){const t=nr(e.__class__.__name__);return e.__repr__?`${t}: ${function(e){try{return`${(0,tr.repr)(e)}`}catch(e){return"[failed to convert repr]"}}(e)}`:e.__str__?`${t}: ${nr(e)}`:e.args?`${t}: ${nr(e.args)}`:e.msg?`${t}: ${nr(e.msg)}`:`${t}: ${nr(e)}`}return nr(e)}tr=a("hoVWB");var ar=a("2R1eR"),ir=(tr=a("hoVWB"),{});t(ir,"serializable",(()=>Lu));tr=a("hoVWB");var or={};t(or,"VerbatimSpecInfo",(()=>ol)),t(or,"make_verbatim_args_spec_list",(()=>ll)),t(or,"VerbatimMacro",(()=>sl)),t(or,"VerbatimEnvironment",(()=>cl)),t(or,"FeatureVerbatim",(()=>ul)),t(or,"FeatureClass",(()=>fl)),t(or,"SimpleLatexDefinitionsFeature",(()=>cr)),t(or,"ParsedArgumentsInfo",(()=>wn)),t(or,"FLMSpecInfo",(()=>zo)),t(or,"latexnodes_parsers",(()=>oa)),t(or,"FLMArgumentSpec",(()=>ko)),t(or,"latexnodes_nodes",(()=>Or));tr=a("hoVWB");var lr="flm.feature._base",sr=(0,(tr=a("hoVWB")).__class__)("Feature",[tr.object],{__module__:lr,feature_name:null,feature_dependencies:null,feature_optional_dependencies:null,feature_default_config:(0,tr.dict)({}),DocumentManager:(0,tr.__class__)("DocumentManager",[tr.object],{__module__:lr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"feature":t=a[i];break;case"doc":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sr.DocumentManager,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.feature=t,e.feature_name=e.feature.feature_name,e.doc=r,e.RenderManager=e.feature.RenderManager}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return a=e.feature,(0,tr.__call__)(a.get_node_id,a,t);var a}))}}),RenderManager:(0,tr.__class__)("RenderManager",[tr.object],{__module__:lr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"feature_document_manager":t=a[i];break;case"render_context":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sr.RenderManager,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.feature_document_manager=t,e.feature=e.feature_document_manager.feature,e.feature_name=e.feature.feature_name,e.render_context=r}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}}))},get process(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"first_pass_value":t=n[_]}}}}))},get postprocess(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"final_value":t=n[_]}}}}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return a=e.feature,(0,tr.__call__)(a.get_node_id,a,t);var a}))}}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.dict)({})}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.tuple))?t:t._flm_node_id}))}}),cr=(0,tr.__class__)("SimpleLatexDefinitionsFeature",[sr],{__module__:lr,DocumentManager:null,RenderManager:null,latex_definitions:(0,tr.dict)({}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.latex_definitions}))}}),ur=(tr=a("hoVWB"),{});t(ur,"fn_unique_object_id",(()=>fr));var fr=(()=>{let e=0;const t=new WeakMap;return r=>(t.has(r)||t.set(r,++e),t.get(r))})(),dr=(tr=a("hoVWB"),tr=a("hoVWB"),{});t(dr,"getLogger",(()=>gr)),t(dr,"basicConfig",(()=>vr));tr=a("hoVWB");r(s=a("3krpC")).formatters.r=e=>(0,tr.repr)(e);class hr{constructor(e){this.scope=e,this._debug_fn=r(s)(this.scope),this._debug_fn_star=r(s)(this.scope+"*"),this.error=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.ERROR]] !! "+e,...t)},this.critical=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.CRITICAL]] !! "+e,...t)},this.warning=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.WARNING]] !! "+e,...t)},this.info=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star(e,...t)},this.debug=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn("logging.debug ~~ "+e,...t)}}_process_kwargs(e){e.exc_info&&console.trace()}}let pr={};function gr(e){let t=pr[e];return null==t&&(t=new hr(e),pr[e]=t),t}function vr(){}var mr={};(0,tr.__nest__)(mr,"",dr);var yr,wr="flm.flmrendercontext",br=(yr=mr,(0,tr.__call__)(yr.getLogger,yr,wr),(0,tr.__class__)("FLMRenderContext",[tr.object],{__module__:wr,is_standalone_mode:!1,is_first_pass:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"fragment_renderer":t=a[i];break;case"doc":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,br,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.doc=r,e.fragment_renderer=t,e.pass_name=null,e.is_first_pass=!0,e._logical_state=(0,tr.dict)({}),e._nodes_determined_as_delayed=(0,tr.dict)({})}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return!1}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return null}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"fragment_renderer":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This render context does not support delayed rendering");throw i.__cause__=null,i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"This render context does not support delayed rendering");throw a.__cause__=null,a}))},get get_is_delayed_render(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}if((0,tr.__t__)((0,tr.__in__)(t._flm_node_id,e._nodes_determined_as_delayed)))return(0,tr.__getitem__)(e._nodes_determined_as_delayed,t._flm_node_id);var a=t.flm_specinfo.delayed_render;if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,a))){a=(0,tr.__call__)(a,null,t,render_context);(0,tr.__setitem__)(e._nodes_determined_as_delayed,t._flm_node_id,a)}return a}))},get set_render_pass(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pass_name":t=n[_]}}}e.pass_name=t,(0,tr.__t__)(null===t)?e.is_first_pass=!0:e.is_first_pass=!1}))},get get_logical_state(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"domainname":t=n[_]}}}return(0,tr.__t__)(!(0,tr.__in__)(t,e._logical_state))&&(0,tr.__setitem__)(e._logical_state,t,(0,tr.dict)({})),(0,tr.__getitem__)(e._logical_state,t)}))},get push_logical_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"domainname":t=a[i];break;case"propname":r=a[i];break;case"value":n=a[i]}}}return(0,tr.__call__)(kr,null,e,t,r,n)}))}})),kr=(0,tr.__class__)("_RenderContextPushLogicalState",[tr.object],{__module__:wr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"render_context":t=i[o];break;case"domainname":r=i[o];break;case"propname":n=i[o];break;case"value":_=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,kr,"__init__"),null,e),e.render_context=t,e.domainname=r,e.propname=n,e.value=_}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e.render_context;return(0,tr.__call__)(t.get_logical_state,t,e.domainname)}();(0,tr.__t__)((0,tr.__in__)(e.propname,_))?(e.old_value_exists=!0,e.old_value=(0,tr.__getitem__)(_,e.propname)):(e.old_value_exists=!1,e.old_value=null),(0,tr.__setitem__)(_,e.propname,e.value)}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"exc_type":t=a[i];break;case"exc_value":r=a[i];break;case"traceback":n=a[i]}}}var o=function(){var t=e.render_context;return(0,tr.__call__)(t.get_logical_state,t,e.domainname)}();(0,tr.__t__)(!(0,tr.__t__)(e.old_value_exists))?function(){var t=o;(0,tr.__call__)(t.py_pop,t,e.propname)}():(0,tr.__setitem__)(o,e.propname,e.old_value)}))}}),xr=(0,tr.__class__)("FLMStandaloneModeRenderContext",[br],{__module__:wr,is_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"fragment_renderer":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,xr,"__init__"),null,e,(0,tr.__kwargtrans__)({fragment_renderer:t}))}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return!1}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}var a=(0,tr.__call__)(tr.ValueError,null,"There are no document features when rendering FLM text in standalone mode (reqested ‘{}’)".format(t));throw a.__cause__=null,a}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"fragment_renderer":r=_[a]}}}var i=(0,tr.__call__)(tr.ValueError,null,"Cannot render nodes with delayed content in standalone mode".format());throw i.__cause__=null,i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=(0,tr.__call__)(tr.ValueError,null,"There's no delayed render content in standalone mode".format());throw a.__cause__=null,a}))}}),Pr={};t(Pr,"LatexArgumentSpec",(()=>Ar)),t(Pr,"_unicode_from_str",(()=>Mr)),t(Pr,"LatexWalkerParsingStateEventHandler",(()=>Ln)),t(Pr,"ParsedArguments",(()=>Cr)),t(Pr,"to_str",(()=>Ir)),t(Pr,"format_pos",(()=>zr)),t(Pr,"_basestring",(()=>Lr)),t(Pr,"LatexWalkerNodesParseError",(()=>Vr)),t(Pr,"LatexTokenReaderBase",(()=>zn)),t(Pr,"get_updated_parsing_state_from_delta",(()=>Tn)),t(Pr,"LatexNodesCollector",(()=>ta)),t(Pr,"LatexWalkerTokenParseError",(()=>qr)),t(Pr,"ParsingStateDeltaLeaveMathMode",(()=>Sn)),t(Pr,"LatexWalkerEndOfStream",(()=>Ur)),t(Pr,"LatexNodesLatexRecomposer",(()=>hn)),t(Pr,"ParsingStateDeltaReplaceParsingState",(()=>On)),t(Pr,"CallableSpecBase",(()=>jn)),t(Pr,"LatexWalkerError",(()=>Rr)),t(Pr,"ParsingStateDelta",(()=>Pn)),t(Pr,"LatexContextDbBase",(()=>bn)),t(Pr,"LatexWalkerBase",(()=>In)),t(Pr,"LatexTokenReader",(()=>U_)),t(Pr,"ParsedArgumentsInfo",(()=>wn)),t(Pr,"LatexWalkerLocatedErrorFormatter",(()=>Br)),t(Pr,"LatexWalkerLocatedError",(()=>Dr)),t(Pr,"ParsingState",(()=>Z_)),t(Pr,"LatexToken",(()=>Dn)),t(Pr,"__all__",(()=>jr)),t(Pr,"LatexTokenListTokenReader",(()=>qn)),t(Pr,"LatexWalkerParseError",(()=>Fr)),t(Pr,"SingleParsedArgumentInfo",(()=>yn)),t(Pr,"logger",(()=>Nr)),t(Pr,"ParsingStateDeltaEnterMathMode",(()=>Cn)),t(Pr,"ParsingStateDeltaChained",(()=>En)),t(Pr,"ParsingStateDeltaWalkerEvent",(()=>An)),a("hoVWB");tr=a("hoVWB");var Or={};t(Or,"logger",(()=>$r)),t(Or,"_unicode_from_str",(()=>Yr)),t(Or,"_display_abbrev_str",(()=>Hr)),t(Or,"_display_str_delimiters",(()=>Xr)),t(Or,"LatexNode",(()=>Zr)),t(Or,"LatexCharsNode",(()=>Kr)),t(Or,"LatexGroupNode",(()=>Jr)),t(Or,"LatexCommentNode",(()=>Qr)),t(Or,"LatexMacroNode",(()=>en)),t(Or,"LatexEnvironmentNode",(()=>tn)),t(Or,"LatexSpecialsNode",(()=>rn)),t(Or,"LatexMathNode",(()=>nn)),t(Or,"LatexNodeList",(()=>_n)),t(Or,"_update_posposend_from_nodelist",(()=>on)),t(Or,"_get_content_as_chars",(()=>an)),t(Or,"_UseList",(()=>ln)),t(Or,"LatexNodesVisitor",(()=>sn)),t(Or,"latex_node_types",(()=>cn)),t(Or,"__all__",(()=>un)),t(Or,"LatexWalkerParseError",(()=>Fr)),t(Or,"ParsedArguments",(()=>Cr));tr=a("hoVWB");var Er="pylatexenc.latexnodes._parsedargs",Ar=((tr=a("hoVWB")).str,(0,tr.__class__)("LatexArgumentSpec",[tr.object],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parser":t=a[i];break;case"argname":r=a[i];break;case"parsing_state_delta":n=a[i]}}}e.parser=t,e.argname=r,e.parsing_state_delta=n}))},_fields:(0,tr.tuple)(["parser","argname","parsing_state_delta"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{cls}(argname={argname!r}, parser={parser!r}, parsing_state_delta={parsing_state_delta!r})";return(0,tr.__call__)(t.format,t,(0,tr.__kwargtrans__)({cls:e.__class__.__name__,argname:e.argname,parser:e.parser,parsing_state_delta:e.parsing_state_delta}))}()}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({parser:e.parser,argname:e.argname,parsing_state_delta:e.parsing_state_delta}))}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)((0,tr.__eq__)(e.parser,t.parser))&&(0,tr.__t__)((0,tr.__eq__)(e.argname,t.argname))&&(0,tr.__eq__)(e.parsing_state_delta,t.parsing_state_delta)}))}})),Cr=(0,tr.__class__)("ParsedArguments",[tr.object],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"argnlist":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"argspec",null)}();if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cr,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),(0,tr.__t__)((0,tr.__t__)(null===r)&&null!==o))r=o;e.argnlist=(0,tr.__t__)(t)?t:[],e.arguments_spec_list=(0,tr.__t__)(r)?r:[]}))},_fields:(0,tr.tuple)(["arguments_spec_list","argnlist"]),get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_parsed_arguments,r,e)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)((0,tr.__eq__)(e.arguments_spec_list,t.arguments_spec_list))&&(0,tr.__eq__)(e.argnlist,t.argnlist)}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.arguments_spec_list,argnlist:e.argnlist}))}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}(arguments_spec_list={!r}, argnlist={!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.arguments_spec_list,e.argnlist)}()}))}}),Sr=(tr=a("hoVWB"),{});(0,tr.__nest__)(Sr,"",dr);var Tr="pylatexenc.latexnodes._exctypes",Nr=function(){var e=Sr;return(0,tr.__call__)(e.getLogger,e,Tr)}(),Lr=tr.str,Mr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return e},Ir=tr.str,jr=["LatexWalkerError","LatexWalkerLocatedError","LatexWalkerParseError","LatexWalkerLocatedErrorFormatter","LatexWalkerNodesParseError","LatexWalkerTokenParseError","LatexWalkerEndOfStream"],Rr=(0,tr.__class__)("LatexWalkerError",[tr.Exception],{__module__:Tr}),Dr=(0,tr.__class__)("LatexWalkerLocatedError",[Rr],{__module__:Tr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"msg":t=s[c];break;case"s":r=s[c];break;case"pos":n=s[c];break;case"lineno":_=s[c];break;case"colno":a=s[c];break;case"error_type_info":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if(e.input_source=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"input_source",null)}(),e.msg=t,e.s=r,e.pos=n,e.lineno=_,e.colno=a,e.error_type_info=i,e.open_contexts=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"open_contexts",[])}(),(0,tr.__t__)((0,tr.__call__)(tr.len,null,o))){var u=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected keyword argument(s) to LatexWalkerLocatedError(): ",(0,tr.__call__)(tr.repr,null,o)));throw u.__cause__=null,u}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Dr,"__init__"),null,e,function(){var t=(0,tr.__call__)(Br,null,e);return(0,tr.__call__)(t.to_display_string,t)}())}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=(0,tr.__call__)(Br,null,e);return(0,tr.__call__)(t.to_display_string,t)}()}))},get set_pos_or_add_open_context_from_node(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"what":r=_[a]}}}if(!(0,tr.__t__)(null===t)){var i=t.pos;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"latex_walker"))&&(0,tr.__t__)(t.latex_walker)&&(0,tr.__call__)(tr.hasattr,null,t.latex_walker,"pos_to_lineno_colno")))var o=function(){var e=t.latex_walker;return(0,tr.__call__)(e.pos_to_lineno_colno,e,i)}(),l=o[0],s=o[1];else l=(o=(0,tr.tuple)([null,null]))[0],s=o[1];if((0,tr.__t__)(null===r))r=function(){var e=t;return(0,tr.__call__)(e.display_str,e)}();if((0,tr.__t__)(null===e.pos))return e.pos=i,e.lineno=l,void(e.colno=s);(0,tr.__t__)(null===e.open_contexts)&&(e.open_contexts=[]),function(){var t=e.open_contexts;(0,tr.__call__)(t.append,t,(0,tr.tuple)([r,i,l,s]))}()}}))}}),Fr=(0,tr.__class__)("LatexWalkerParseError",[Dr],{__module__:Tr}),Br=(0,tr.__class__)("LatexWalkerLocatedErrorFormatter",[tr.object],{__module__:Tr,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"exc":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Br,"__init__"),null,e),e.exc=t}))},get format_open_blocks(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.exc;if((0,tr.__t__)(!(0,tr.__t__)(_.open_contexts)))return null;for(var a="",i=(0,tr.__call__)(tr.py_reversed,null,_.open_contexts),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=l[2],f=l[3];a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var e="{empty:4}{loc:<18}  {what}\n";return(0,tr.__call__)(e.format,e,(0,tr.__kwargtrans__)({empty:"",loc:(0,tr.__call__)(zr,null,c,u,f),what:s}))}())}return a}))},get format_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(zr,null,e.exc.pos,e.exc.lineno,e.exc.colno)}))},get format_full_traceback(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.exc,a="";if((0,tr.__t__)(_.input_source))a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var e="  in {}";return(0,tr.__call__)(e.format,e,_.input_source)}());var i;a=(0,tr.__call__)(tr.__iadd__,null,a,(0,tr.__call__)(" {}".format," {}",(i=e,(0,tr.__call__)(i.format_pos,i))));if((0,tr.__t__)(_.open_contexts))a=(0,tr.__call__)(tr.__iadd__,null,a,"\nOpen LaTeX blocks:\n"),a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var t=e;return(0,tr.__call__)(t.format_open_blocks,t)}());return a}))},get to_display_string(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.exc,a=(0,tr.__call__)(Ir,null,_.msg);a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var t=e;return(0,tr.__call__)(t.format_full_traceback,t)}());return a}))}}),zr=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pos":e=_[a];break;case"lineno":t=_[a];break;case"colno":r=_[a]}}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)(null!==r)?function(){var e="@ (line {}, col {})";return(0,tr.__call__)(e.format,e,t,r)}():function(){var e="@ line {}";return(0,tr.__call__)(e.format,e,t)}():(0,tr.__t__)(null!==e)?function(){var t="@ char pos {}";return(0,tr.__call__)(t.format,t,e)}():"@ <unknown>"},qr=(0,tr.__class__)("LatexWalkerTokenParseError",[Fr],{__module__:Tr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"recovery_token_placeholder":t=a[i];break;case"recovery_token_at_pos":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,qr,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.recovery_token_placeholder=t,e.recovery_token_at_pos=r}))}}),Vr=(0,tr.__class__)("LatexWalkerNodesParseError",[Fr],{__module__:Tr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"recovery_nodes":t=o[l];break;case"recovery_parsing_state_delta":r=o[l];break;case"recovery_at_token":n=o[l];break;case"recovery_past_token":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Vr,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.recovery_nodes=t,e.recovery_parsing_state_delta=r,e.recovery_at_token=n,e.recovery_past_token=_}))}}),Ur=(0,tr.__class__)("LatexWalkerEndOfStream",[Rr],{__module__:Tr,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"final_space":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ur,"__init__"),null,e),e.final_space=t}))}}),Gr={};(0,tr.__nest__)(Gr,"",dr);var Wr="pylatexenc.latexnodes.nodes",$r=function(){var e=Gr;return(0,tr.__call__)(e.getLogger,e,Wr)}(),Yr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return e},Hr=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=40;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"s":e=n[_];break;case"maxlen":t=n[_]}}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(t))||(0,tr.__lt__)(t,2)))t=2;return(0,tr.__t__)((0,tr.__lt__)((0,tr.__call__)(tr.len,null,e),t))?e:(0,tr.__add__)((0,tr.__getslice__)(e,0,(0,tr.__sub__)(t,2),1),"…")},Xr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("delimiters"===n)e=r[n]}}var _="<??>",a="<??>";try{var i=e;_=i[0],a=i[1]}catch(e){}if((0,tr.__t__)(null===_))_="";if((0,tr.__t__)(null===a))a="";return(0,tr.tuple)([_,a])},Zr=(0,tr.__class__)("LatexNode",[tr.object],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"_fields":t=s[c];break;case"_redundant_fields":r=s[c];break;case"parsing_state":n=s[c];break;case"pos":_=s[c];break;case"pos_end":a=s[c];break;case"latex_walker":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}var u=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"len",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zr,"__init__"),null,e,(0,tr.__kwargtrans__)(o)),e.parsing_state=n,e.latex_walker=i,e.pos=_,e.pos_end=a,(0,tr.__t__)((0,tr.__t__)(null===a)&&null!==u)&&(e.pos_end=(0,tr.__add__)(e.pos,u)),e._fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)(["pos","pos_end","parsing_state","latex_walker"],(0,tr.__call__)(tr.list,null,t))),(0,tr.__t__)(null!==r)?e._redundant_fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(tr.list,null,e._fields),["len"]),(0,tr.__call__)(tr.list,null,r))):e._redundant_fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__call__)(tr.list,null,e._fields),["len"]))}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return Zr}))},get isNodeType(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"t":t=n[_]}}}return(0,tr.__call__)(tr.isinstance,null,e,t)}))},get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(null===e.latex_walker)){var _=(0,tr.__call__)(tr.py_TypeError,null,"Can't use latex_verbatim() on node because we don't have any latex_walker set");throw _.__cause__=null,_}return(0,tr.__getslice__)(e.latex_walker.s,e.pos,e.pos_end,1)}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)(null!==t)&&(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Zr))&&(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}()===function(){var e=t;return(0,tr.__call__)(e.nodeType,e)}())&&(0,tr.__t__)(t.parsing_state===e.parsing_state)&&(0,tr.__t__)(t.latex_walker===e.latex_walker)&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===t.pos)&&null===e.pos)||(0,tr.__eq__)(t.pos,e.pos))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===t.pos_end)&&null===e.pos_end)||(0,tr.__eq__)(t.pos_end,e.pos_end))&&(0,tr.__call__)(tr.all,null,function(){for(var r,n=[],_=e._fields,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__call__)(tr.getattr,null,e,i))&&null===(0,tr.__call__)(tr.getattr,null,t,i))||(0,tr.__eq__)((0,tr.__call__)(tr.getattr,null,e,i),(0,tr.__call__)(tr.getattr,null,t,i)))}return(0,tr.py_iter)(n)}())}))},get __ne__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return NotImplemented}))},__hash__:null,get __unicode__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(Yr,null,function(){var t=e;return(0,tr.__call__)(t.__str__,t)}())}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e;return(0,tr.__call__)(t.__repr__,t)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}().__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r,n=[],_=e._fields,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__call__)(tr.getattr,null,e,i))))}return n}())),")")}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)("<UNKNOWN NODE TYPE>: ",(0,tr.__call__)(tr.repr,null,e))}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_unknown,r,e)}()}))},get to_json_object_with_latexwalker(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"latexwalker":t=n[_]}}}for(var a=(0,tr.dict)({nodetype:e.__class__.__name__}),i=e._fields,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__eq__)(l,"spec"))?(0,tr.__setitem__)(a,l,(0,tr.__call__)(tr.repr,null,e.spec)):(0,tr.__t__)((0,tr.__eq__)(l,"latex_walker"))||(0,tr.__setitem__)(a,l,(0,tr.__call__)(tr.getattr,null,e,l))}return function(){var r,n=a;(0,tr.__call__)(n.py_update,n,(r=t,(0,tr.__call__)(r.pos_to_lineno_colno,r,e.pos,(0,tr.__kwargtrans__)({as_dict:!0}))))}(),a}))},get format_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)(null!==e.latex_walker)?function(){var t=e.latex_walker;return(0,tr.__call__)(t.format_pos,t,e.pos)}():function(){var t="[@ pos {}]";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(tr.repr,null,e.pos))}()}))}});Object.defineProperty(Zr,"len",tr.property.call(Zr,Zr._get_len));var Kr=(0,tr.__class__)("LatexCharsNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"chars":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Kr,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["chars"])},r))),e.chars=t}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return Kr}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("chars ‘",(0,tr.__call__)(Hr,null,e.chars)),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_chars,r,e)}()}))}}),Jr=(0,tr.__class__)("LatexGroupNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"delimiters",(0,tr.tuple)(["{","}"]))}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Jr,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["nodelist","delimiters"])},r))),e.nodelist=t,e.delimiters=i}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return Jr}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=(0,tr.__call__)(Xr,null,e.delimiters),a=_[0],i=_[1];return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("group ‘",a),"…"),i),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_group,r,e)}()}))}}),Qr=(0,tr.__class__)("LatexCommentNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"comment":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"comment_post_space","")}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qr,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["comment","comment_post_space"])},r))),e.comment=t,e.comment_post_space=i}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return Qr}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("comment ‘",(0,tr.__call__)(Hr,null,function(){var t=e.comment;return(0,tr.__call__)(t.strip,t)}())),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_comment,r,e)}()}))}}),en=(0,tr.__class__)("LatexMacroNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"nodeargd",(0,tr.__call__)(Cr,null))}(),o=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"macro_post_space","")}(),l=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"spec",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,en,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["macroname","spec","nodeargd","macro_post_space"]),_redundant_fields:(0,tr.tuple)(["nodeoptarg","nodeargs"])},r))),e.macroname=t,e.spec=l,e.nodeargd=i,e.macro_post_space=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return en}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("macro ‘\\",e.macroname),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_macro,r,e)}()}))}}),tn=(0,tr.__class__)("LatexEnvironmentNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"nodelist":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"nodeargd",(0,tr.__call__)(Cr,null))}(),l=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"spec",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["environmentname","spec","nodelist","nodeargd"]),_redundant_fields:(0,tr.tuple)(["envname","optargs","args"])},n))),e.environmentname=t,e.spec=l,e.nodelist=r,e.nodeargd=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return tn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("environment ‘{",e.environmentname),"}’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_environment,r,e)}()}))}}),rn=(0,tr.__class__)("LatexSpecialsNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"specials_chars":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"spec",null)}(),o=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"nodeargd",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,rn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["specials_chars","spec","nodeargd"])},r))),e.specials_chars=t,e.spec=i,e.nodeargd=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return rn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("specials ‘",e.specials_chars),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_specials,r,e)}()}))}}),nn=(0,tr.__class__)("LatexMathNode",[Zr],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"displaytype":t=a[i];break;case"nodelist":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"delimiters",(0,tr.tuple)([null,null]))}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,nn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["displaytype","nodelist","delimiters"])},n))),e.displaytype=t,e.nodelist=r,e.delimiters=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return nn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=(0,tr.__call__)(Xr,null,e.delimiters),a=_[0],i=_[1];return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.displaytype," math ‘"),a),"…"),i),"’")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_math,r,e)}()}))}}),_n=(0,tr.__class__)("LatexNodeList",[tr.object],{__module__:Wr,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r,n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_n))){var o=t;return e.nodelist=o.nodelist,e.parsing_state=o.parsing_state,e.latex_walker=o.latex_walker,e.pos=o.pos,void(e.pos_end=o.pos_end)}if(e.nodelist=t,(0,tr.__t__)(null===e.nodelist))throw(r=(0,tr.__call__)(tr.ValueError,null,"Cannot create a LatexNodeList with nodelist=None")).__cause__=null,r;if(e.parsing_state=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"parsing_state",null)}(),e.latex_walker=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"latex_walker",null)}(),e.pos=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"pos",null)}(),e.pos_end=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"pos_end",null)}(),(0,tr.__t__)((0,tr.__call__)(tr.len,null,n)))throw(r=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected keyword arguments to LatexNodeList: ",(0,tr.__call__)(tr.repr,null,n)))).__cause__=null,r;var l=(0,tr.__call__)(on,null,e.pos,e.pos_end,e.nodelist);e.pos=l[0],e.pos_end=l[1]}))},_fields:(0,tr.tuple)(["nodelist","parsing_state","latex_walker","pos","pos_end"]),get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get __iter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)(null===e.nodelist)?(0,tr.__call__)(tr.py_iter,null,[]):(0,tr.__call__)(tr.py_iter,null,e.nodelist)}))},[Symbol.iterator](){return this.__iter__()},get __getitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"index":t=n[_]}}}try{if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),3))){var a=t,i=a[0],o=a[1],l=a[2];return(0,tr.__getslice__)(e.nodelist,i,o,l)}}catch(e){}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.int))&&(0,tr.__lt__)(t,0)))t=(0,tr.__add__)((0,tr.__call__)(tr.len,null,e.nodelist),t);return(0,tr.__getitem__)(e.nodelist,t)}))},get __len__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.len,null,e.nodelist)}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)("".join,"",function(){for(var t,r,n=[],_=e.nodelist,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);(0,tr.__t__)(null!==i)&&(t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(t=i,(0,tr.__call__)(t.latex_verbatim,t))))}return n}())}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(null===e.nodelist))var _="null list",a="";else _=(0,tr.__call__)(tr.len,null,e.nodelist),a=(0,tr.__add__)((0,tr.__add__)(": ",(0,tr.__call__)(", ".join,", ",function(){for(var t,r,n=[],_=(0,tr.__getslice__)(e.nodelist,0,2,1),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__t__)(null!==i)?(t=i,(0,tr.__call__)(t.display_str,t)):"None")}return n}())),(0,tr.__t__)((0,tr.__gt__)(_,2))?" …":"");return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("list of nodes (",(0,tr.__call__)(tr.str,null,_)),")"),a)}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_list,r,e)}()}))},get filter(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node_predicate_fn":t=i[o];break;case"skip_none":r=i[o];break;case"skip_comments":n=i[o];break;case"skip_whitespace_char_nodes":_=i[o]}}}if((0,tr.__t__)(null!==e.latex_walker))var l=e.latex_walker.make_nodelist;else l=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("nl"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(_n,null,e,(0,tr.__kwargtrans__)(t))};var s=function(e){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)if("n"===o)e=i[o]}}return!(0,tr.__t__)((0,tr.__t__)(r)&&null===e)&&(!(0,tr.__t__)((0,tr.__t__)(n)&&function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,Qr)}())&&(!(0,tr.__t__)((0,tr.__t__)(_)&&(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,Kr)}())&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var t=e.chars;return(0,tr.__call__)(t.strip,t)}()),0))&&(!(0,tr.__t__)(null!==t)||(0,tr.__call__)(t,null,e))))},c=function(){for(var t,r=[],n=e.nodelist,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)((0,tr.__call__)(s,null,a))&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a))}return r}();return(0,tr.__call__)(l,null,c,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__t__)((0,tr.__call__)(tr.len,null,c))?null:e.pos_end,pos_end:(0,tr.__t__)((0,tr.__call__)(tr.len,null,c))?null:e.pos_end}))}))},get split_at_node(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"node_predicate_fn":t=o[l];break;case"skip_none":r=o[l];break;case"keep_separators":n=o[l];break;case"max_split":_=o[l];break;case"call_make_nodelist":a=o[l]}}}var s=[[]];if((0,tr.__t__)((0,tr.__t__)(null!==_)&&(0,tr.__eq__)(_,0)))var c=!0;else c=!1;for(var u=e.nodelist,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if(!(0,tr.__t__)((0,tr.__t__)(r)&&null===d))if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&(0,tr.__call__)(t,null,d))){if((0,tr.__t__)(n)?function(){var e=s;(0,tr.__call__)(e.append,e,[d])}():function(){var e=s;(0,tr.__call__)(e.append,e,[])}(),(0,tr.__t__)((0,tr.__t__)(null!==_)&&(0,tr.__ge__)((0,tr.__call__)(tr.len,null,s),_)))c=!0}else!function(){var e=(0,tr.__getitem__)(s,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,s),1));(0,tr.__call__)(e.append,e,d)}()}if((0,tr.__t__)((0,tr.__t__)(a)&&null!==e.latex_walker))var h=e.latex_walker.make_nodelist;else h=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("nl"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(_n,null,e,(0,tr.__kwargtrans__)(t))};return function(){for(var t,r=[],n=s,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(h,null,a,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state})))}return r}()}))},get split_at_chars(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"sep_chars":t=i[o];break;case"max_split":r=i[o];break;case"keep_empty":n=i[o];break;case"skip_none":_=i[o]}}}var l=[],s=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"m":e=n[_];break;case"offset":t=n[_]}}}if((0,tr.__t__)(null===e))return(0,tr.tuple)([(0,tr.__neg__)(1),null]);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"start"))&&(0,tr.__call__)(tr.hasattr,null,e,"end")))return(0,tr.tuple)([(0,tr.__add__)(t,function(){var t=e;return(0,tr.__call__)(t.start,t)}()),(0,tr.__add__)(t,function(){var t=e;return(0,tr.__call__)(t.end,t)}())]);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e))||!(0,tr.__t__)((0,tr.__call__)(tr.len,null,e))))return(0,tr.tuple)([(0,tr.__neg__)(1),null]);var a=e,i=a[0],o=a[1];if((0,tr.__t__)(null===i))i=(0,tr.__neg__)(1);else i=(0,tr.__add__)(t,i);o=(0,tr.__add__)(t,o);return(0,tr.tuple)([i,o])},c=function(e,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"chars":e=a[i];break;case"pos":n=a[i]}}}if((0,tr.__t__)((0,tr.__t__)(null!==r)&&(0,tr.__ge__)((0,tr.__call__)(tr.len,null,l),r)))return(0,tr.tuple)([(0,tr.__neg__)(1),(0,tr.__call__)(tr.len,null,e)]);if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"search"))){var o=function(){var r=t;return(0,tr.__call__)(r.search,r,(0,tr.__getslice__)(e,n,null,1))}();return(0,tr.__call__)(s,null,o,n)}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,t))){o=(0,tr.__call__)(t,null,e,n);return(0,tr.__call__)(s,null,o)}var c=function(){var r=e;return(0,tr.__call__)(r.find,r,t,n)}();return(0,tr.__t__)((0,tr.__t__)(null===c)||(0,tr.__eq__)(c,(0,tr.__neg__)(1)))?(0,tr.tuple)([(0,tr.__neg__)(1),null]):(0,tr.tuple)([c,(0,tr.__add__)(c,(0,tr.__call__)(tr.len,null,t))])},u=e.latex_walker;if((0,tr.__t__)(null!==u))var f=u.make_node,d=u.make_nodelist;else f=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("cls"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(e,null,(0,tr.__kwargtrans__)(t))},d=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("nl"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(_n,null,e,(0,tr.__kwargtrans__)(t))};for(var h=function(t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"chars":t=i[o];break;case"n":r=i[o];break;case"rel_pos":n=i[o];break;case"rel_pos_end":_=i[o]}}}return(0,tr.__call__)(f,null,Kr,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__add__)(r.pos,n),pos_end:(0,tr.__add__)(r.pos,_),chars:t}))},p=function(t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"nodes":t=_[a];break;case"pos_end":r=_[a]}}}var i=(0,tr.__call__)(d,null,t,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__t__)((0,tr.__call__)(tr.len,null,t))?null:r,pos_end:r}));!function(){var e=l;(0,tr.__call__)(e.append,e,i)}()},g=[],v=e.nodelist,m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m);if((0,tr.__t__)(null===y))(0,tr.__t__)(!(0,tr.__t__)(_))&&function(){var e=g;(0,tr.__call__)(e.append,e,y)}();else if((0,tr.__t__)(function(){var e=y;return(0,tr.__call__)(e.isNodeType,e,Kr)}()))for(var w=0;(0,tr.__t__)(!0);){var b=w,k=(0,tr.__call__)(c,null,y.chars,b),x=k[0];w=k[1];if(!(0,tr.__t__)((0,tr.__ne__)(x,(0,tr.__neg__)(1)))){if((0,tr.__t__)((0,tr.__eq__)(b,0))){!function(){var e=g;(0,tr.__call__)(e.append,e,y)}();break}P=(0,tr.__getslice__)(y.chars,b,null,1);(0,tr.__t__)((0,tr.__call__)(tr.len,null,P))&&function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.__call__)(h,null,P,y,b,(0,tr.__call__)(tr.len,null,y.chars)))}();break}var P=(0,tr.__getslice__)(y.chars,b,x,1);if((0,tr.__t__)((0,tr.__eq__)(b,0))){(0,tr.__t__)((0,tr.__call__)(tr.len,null,P))&&function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.__call__)(h,null,P,y,b,x))}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,g))||n)&&(0,tr.__call__)(p,null,g,(0,tr.__kwargtrans__)({pos_end:(0,tr.__add__)(y.pos,x)}));g=[]}else{var O=[];if((0,tr.__t__)((0,tr.__call__)(tr.len,null,P)))O=[(0,tr.__call__)(h,null,P,y,b,x)];(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,O))||n)&&(0,tr.__call__)(p,null,O,(0,tr.__kwargtrans__)({pos_end:(0,tr.__add__)(y.pos,x)}))}}else!function(){var e=g;(0,tr.__call__)(e.append,e,y)}()}return(0,tr.__t__)((0,tr.__t__)(g)||n)&&(0,tr.__call__)(p,null,g,(0,tr.__kwargtrans__)({pos_end:e.pos_end})),l}))},get parse_keyval_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=",";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="=";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="concatenate";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=tr.dict;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"comma_sep_chars":t=l[s];break;case"eq_sep_chars":r=l[s];break;case"repeated_key_aggregate_action":n=l[s];break;case"default_value_nodelist":_=l[s];break;case"extract_value_group_contents":a=l[s];break;case"dict_type":i=l[s]}}}var c=(0,tr.__call__)(i,null),u=e.latex_walker;if((0,tr.__t__)(null!==u))var f=u.make_nodelist;else f=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("nl"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(_n,null,e,(0,tr.__kwargtrans__)(t))};for(var d=function(){var r=e;return(0,tr.__call__)(r.split_at_chars,r,t)}(),h=d,p=0;p<(0,tr.len)(h);p++){var g=(0,tr.__getitem__)(h,p),v=function(){var e=g;return(0,tr.__call__)(e.split_at_chars,e,r,(0,tr.__kwargtrans__)({max_split:1}))}();if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,v),0))){var m=(0,tr.__getitem__)(v,0),y=null;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,v),2)))throw(b=(0,tr.__call__)(RuntimeError,null,"[internal error?] unexpected split length past max_split?")).__cause__=null,b;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,v),2))){y=(0,tr.__getitem__)(v,1);if((0,tr.__t__)((0,tr.__t__)(a)&&(0,tr.__t__)(null!==y)&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,y),1))&&function(){var e=(0,tr.__getitem__)(y.nodelist,0);return(0,tr.__call__)(e.isNodeType,e,Jr)}()))y=(0,tr.__getitem__)(y.nodelist,0).nodelist}if((0,tr.__t__)(null===y))y=_;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,_n))))y=(0,tr.__call__)(f,null,[y],(0,tr.__kwargtrans__)({parsing_state:e.parsing_state}));var w=function(){var e=m;return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(w,c)))if((0,tr.__t__)((0,tr.__eq__)(n,"concatenate")))y=(0,tr.__call__)(f,null,(0,tr.__add__)((0,tr.__getitem__)(c,w).nodelist,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,_n))?y.nodelist:[y]),(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__getitem__)(c,w).pos}));else{if((0,tr.__t__)((0,tr.__eq__)(n,"error"))){var b=(0,tr.__call__)(tr.ValueError,null,function(){var e="Repeated Key: ‘{}’";return(0,tr.__call__)(e.format,e,w)}());throw b.__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(n,"first")))y=(0,tr.__getitem__)(c,w).nodelist;else if((0,tr.__t__)((0,tr.__eq__)(n,"last")));else y=(0,tr.__call__)(n,null,w,(0,tr.__getitem__)(c,w).nodelist,y,(0,tr.__kwargtrans__)({result_keyvals:c}))}(0,tr.__setitem__)(c,w,y)}}return c}))},get get_content_as_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(an,null,e.nodelist)}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.list))?(0,tr.__eq__)(e.nodelist,t):(0,tr.__t__)((0,tr.__eq__)(e.nodelist,t.nodelist))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===e.pos)&&null===t.pos)||(0,tr.__eq__)(e.pos,t.pos))&&((0,tr.__t__)((0,tr.__t__)(null===e.pos_end)&&null===t.pos_end)||(0,tr.__eq__)(e.pos_end,t.pos_end))}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.nodelist}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="LatexNodeList({nodelist!r}, pos={pos!r}, pos_end={pos_end!r})";return(0,tr.__call__)(t.format,t,(0,tr.__kwargtrans__)({nodelist:e.nodelist,pos:e.pos,pos_end:e.pos_end}))}()}))}});Object.defineProperty(_n,"len",tr.property.call(_n,_n._get_len));var an=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("nodelist"===n)e=r[n]}}if((0,tr.__t__)(null===e))return"";for(var _=[],a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(null===o)&&!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,Qr)}()))if((0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,Jr)}()))!function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(an,null,o.nodelist))}();else{if(!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,Kr)}())){var l=(0,tr.__call__)(Fr,null,function(){var e="Expected simple characters only, got ‘{}’";return(0,tr.__call__)(e.format,e,o.__class__.__name__)}(),(0,tr.__kwargtrans__)({pos:o.pos}));throw l.__cause__=null,l}!function(){var e=_;(0,tr.__call__)(e.append,e,o.chars)}()}}return(0,tr.__call__)("".join,"",_)},on=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pos":e=_[a];break;case"pos_end":t=_[a];break;case"nodelist":r=_[a]}}}if((0,tr.__t__)(null===e)){for(var i=!1,o=r,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s)){e=s.pos;i=!0;break}}if(!i)e=null}if((0,tr.__t__)(null===t)){for(i=!1,o=(0,tr.__call__)(tr.py_reversed,null,r),l=0;l<(0,tr.len)(o);l++){s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s)){t=s.pos_end;i=!0;break}}if(!i)t=null}return(0,tr.tuple)([e,t])},ln=(0,tr.__class__)("_UseList",[tr.object],{__module__:Wr}),sn=(0,tr.__class__)("LatexNodesVisitor",[tr.object],{__module__:Wr,get start(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get visit(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return null}))},get visit_chars_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_group_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_comment_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_macro_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_environment_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_specials_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_math_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_node_list(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodes":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsed_args":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_unknown_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n.visit,n,t,(0,tr.__kwargtrans__)(r))}()}))},get descend_into_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=ln;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"py_default":r=_[a]}}}if((0,tr.__t__)(null===t))return(0,tr.__t__)(r===ln)?[]:r;for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);(0,tr.__t__)(null!==s)?function(){var t,r=i;(0,tr.__call__)(r.append,r,(t=s,(0,tr.__call__)(t.accept_node_visitor,t,e)))}():function(){var e=i;(0,tr.__call__)(e.append,e,null)}()}return i}))},get descend_into_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsed_arguments":t=n[_]}}}return(0,tr.__t__)(null===t)?"":function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get node_standard_process_unknown(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_unknown_node,r,t)}()}))},get node_standard_process_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_chars_node,r,t)}()}))},get node_standard_process_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_group_node,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_comment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_comment_node,r,t)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}();return function(){var r=e;return(0,tr.__call__)(r.visit_macro_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a}))}()}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}(),i=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_environment_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a,visited_results_body:i}))}()}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}();return function(){var r=e;return(0,tr.__call__)(r.visit_specials_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a}))}()}))},get node_standard_process_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist,(0,tr.__kwargtrans__)({py_default:null}))}();return function(){var r=e;return(0,tr.__call__)(r.visit_math_node,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodelist":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_node_list,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsed_arguments":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.argnlist,(0,tr.__kwargtrans__)({py_default:null}))}();return function(){var r=e;return(0,tr.__call__)(r.visit_parsed_arguments,r,t,(0,tr.__kwargtrans__)({visited_results_argnlist:a}))}()}))}}),cn=(0,tr.tuple)([Zr,Kr,Jr,Qr,en,tn,rn,nn]),un=(0,tr.__add__)(function(){for(var e,t=[],r=cn,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,_.__name__)}return t}(),["LatexNodeList","LatexNodesVisitor"]),fn={};(0,tr.__nest__)(fn,"",dr);var dn="pylatexenc.latexnodes._latex_recomposer",hn=(function(){var e=fn;(0,tr.__call__)(e.getLogger,e,dn)}(),(0,tr.__class__)("LatexNodesLatexRecomposer",[sn],{__module__:dn,get latex_recompose(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.start,r,t)}()}))},get recompose_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"chars":t=_[a];break;case"n":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";return(0,tr.__call__)(tr.str,null,t)}))},get recompose_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"n":r=_[a]}}}var i=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t)}();return(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=i,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);(0,tr.__t__)(null!==_)&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,_))}return t}())}))},get recompose_delimited_nodelist(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"nodelist":r=a[i];break;case"n":n=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t=(0,tr.tuple)(["",""]);return(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(t,0),function(){var t=e;return(0,tr.__call__)(t.recompose_nodelist,t,r,n)}()),(0,tr.__getitem__)(t,1))}))},get recompose_comment(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"comment":t=a[i];break;case"comment_post_space":r=a[i];break;case"n":n=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";if((0,tr.__t__)(!(0,tr.__t__)(r)))r="";return(0,tr.__add__)((0,tr.__add__)(n.parsing_state.comment_start,t),r)}))},get recompose_macro_call(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"macro_post_space":r=i[o];break;case"parsed_arguments":n=i[o];break;case"n":_=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,n)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\",t),r),l)}))},get recompose_environment_call(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"parsed_arguments":r=i[o];break;case"body_node_list":n=i[o];break;case"n":_=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,r)}(),s=function(){var t=e;return(0,tr.__call__)(t.recompose_nodelist,t,n,_)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\begin{",(0,tr.__call__)(tr.str,null,t)),"}"),l),s),"\\end{"),(0,tr.__call__)(tr.str,null,t)),"}")}))},get recompose_specials_call(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"parsed_arguments":r=a[i];break;case"n":n=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,r)}();return(0,tr.__add__)(t,o)}))},get recompose_math_content(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"nodelist":r=a[i];break;case"n":n=a[i]}}}return function(){var _=e;return(0,tr.__call__)(_.recompose_delimited_nodelist,_,t,r,n)}()}))},get recompose_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsed_arguments":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_nodelist,r,t.argnlist,null)}()}))},get recompose_unknown(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__add__)((0,tr.__add__)("<<< UNKNOWN NODE: ",(0,tr.__call__)(tr.repr,null,t))," >>>")}))},get node_standard_process_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_chars,r,t.chars,t)}()}))},get node_standard_process_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_delimited_nodelist,r,t.delimiters,t.nodelist,t)}()}))},get node_standard_process_comment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_comment,r,t.comment,t.comment_post_space,t)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_macro_call,r,t.macroname,t.macro_post_space,t.nodeargd,t)}()}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_environment_call,r,t.environmentname,t.nodeargd,t.nodelist,t)}()}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_specials_call,r,t.specials_chars,t.nodeargd,t)}()}))},get node_standard_process_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_math_content,r,t.delimiters,t.nodelist,t)}()}))},get node_standard_process_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodelist":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_nodelist,r,t.nodelist,t)}()}))},get node_standard_process_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsed_arguments":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_parsed_arguments,r,t)}()}))},get visit(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var r=e;return(0,tr.__call__)(r.recompose_unknown,r,t)}()}))}})),pn=(tr=a("hoVWB"),{});(0,tr.__nest__)(pn,"",dr);var gn="pylatexenc.latexnodes._parsedargsinfo",vn=tr.str,mn=function(){var e=pn;return(0,tr.__call__)(e.getLogger,e,gn)}(),yn=(0,tr.__class__)("SingleParsedArgumentInfo",[tr.object],{__module__:gn,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"argument_node_object":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,yn,"__init__"),null,e),e.argument_node_object=t}))},get was_provided(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return null!==e.argument_node_object}))},get get_content_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"unwrap_double_group":t=_[a];break;case"make_nodelist":r=_[a]}}}if((0,tr.__t__)(null===r))r=_n;var i=e.argument_node_object;if((0,tr.__t__)(null===i))return(0,tr.__call__)(r,null,[null]);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,i,_n)))return i;if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,Jr)}())){if((0,tr.__t__)((0,tr.__t__)(t)&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,i.nodelist),1))&&(0,tr.__getitem__)(i.nodelist,0))){var o=(0,tr.__getitem__)(i.nodelist,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,Jr)}())&&(0,tr.__ne__)((0,tr.__getitem__)(o.delimiters,0),(0,tr.__getitem__)(i.delimiters,0))))return o.nodelist}return i.nodelist}return(0,tr.__call__)(r,null,[i])}))},get get_content_as_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}();return function(){var e=_;return(0,tr.__call__)(e.get_content_as_chars,e)}()}))},get parse_content_as_keyval(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}var a=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}();return function(){var e=a;return(0,tr.__call__)(e.parse_keyval_content,e,(0,tr.__kwargtrans__)(t))}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}(argument_node_object={!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.argument_node_object)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)((0,tr.__t__)(null===e.argument_node_object)&&null===t.argument_node_object)||(0,tr.__eq__)(e.argument_node_object,t.argument_node_object)}))}}),wn=(0,tr.__class__)("ParsedArgumentsInfo",[tr.object],{__module__:gn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsed_arguments":t=_[a];break;case"node":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wn,"__init__"),null,e),e.parsed_arguments=t,e.node=r,(0,tr.__t__)(null!==e.node)?(e.node_pos=e.node.pos,(0,tr.__t__)((0,tr.__t__)(null===e.parsed_arguments)&&(0,tr.__call__)(tr.hasattr,null,e.node,"nodeargd"))?e.parsed_arguments=e.node.nodeargd:e.parsed_arguments=null):e.node_pos=null,(0,tr.__t__)((0,tr.__t__)(null===e.parsed_arguments)&&null===e.node)&&function(){var e=mn;(0,tr.__call__)(e.warning,e,"You created ParsedArgumentsInfo with both node=None and parsed_arguments=None, might be a bug in your code?")}()}))},get get_argument_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"arg":t=n[_]}}}if((0,tr.__t__)(null===e.parsed_arguments))throw(d=(0,tr.__call__)(Fr,null,"Cannot get argument information, there were no arguments specified",(0,tr.__kwargtrans__)({pos:e.node_pos}))).__cause__=null,d;var a=t;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,vn))){for(var i=a,o=!1,l=(0,tr.__call__)(tr.enumerate,null,e.parsed_arguments.arguments_spec_list),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1];if((0,tr.__t__)((0,tr.__eq__)(f.argname,i))){a=u;o=!0;break}}if(!o){var d=(0,tr.__call__)(Fr,null,function(){var e="Cannot find argument named ‘{}’";return(0,tr.__call__)(e.format,e,i)}(),(0,tr.__kwargtrans__)({pos:e.node_pos}));throw d.__cause__=null,d}}return(0,tr.__call__)(yn,null,(0,tr.__getitem__)(e.parsed_arguments.argnlist,a))}))},get get_all_arguments_info(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"args":t=o[l];break;case"allow_additional_arguments":r=o[l];break;case"skip_nonexistent_arguments":n=o[l];break;case"include_unrequested_argnames":_=o[l];break;case"include_unrequested_argindices":a=o[l]}}}if((0,tr.__t__)(null===e.parsed_arguments)){if((0,tr.__t__)(n))return(0,tr.dict)({});var s="Missing arguments";if((0,tr.__t__)(null!==e.node))s=function(){var t="Missing arguments to {!r}";return(0,tr.__call__)(t.format,t,e.node)}();throw(k=(0,tr.__call__)(Fr,null,s,e.node_pos)).__cause__=null,k}var c=(0,tr.dict)({}),u=(0,tr.__call__)(tr.set,null),f=(0,tr.__call__)(tr.set,null);if((0,tr.__t__)((0,tr.__t__)(null===t)&&null===_))_=!0;if((0,tr.__t__)((0,tr.__t__)(null===t)&&null===a))a=!0;for(var d=(0,tr.__call__)(tr.enumerate,null,e.parsed_arguments.arguments_spec_list),h=0;h<(0,tr.len)(d);h++){var p=(0,tr.__getitem__)(d,h),g=p[0],v=p[1],m=(0,tr.__getitem__)(e.parsed_arguments.argnlist,g),y=!1,w=!1,b=!1;if((0,tr.__t__)(null!==t)){if((0,tr.__t__)((0,tr.__t__)(v.argname)&&(0,tr.__in__)(v.argname,t))){y=!0,w=!0;!function(){var e=u;(0,tr.__call__)(e.add,e,v.argname)}()}if((0,tr.__t__)((0,tr.__in__)(g,t))){y=!0,b=!0;!function(){var e=f;(0,tr.__call__)(e.add,e,g)}()}}else y=!0;if((0,tr.__t__)(!(0,tr.__t__)(y))){if((0,tr.__t__)(!(0,tr.__t__)(r))){var k=(0,tr.__call__)(Fr,null,function(){var e="Got unexpected argument ‘{}’";return(0,tr.__call__)(e.format,e,v.argname)}(),(0,tr.__kwargtrans__)({pos:(0,tr.__t__)(null!==m)?m.pos:null}));throw k.__cause__=null,k}}else{var x=(0,tr.__call__)(yn,null,m);(0,tr.__t__)((0,tr.__t__)(v.argname)&&((0,tr.__t__)(w)||_))&&(0,tr.__setitem__)(c,v.argname,x),(0,tr.__t__)((0,tr.__t__)(b)||a)&&(0,tr.__setitem__)(c,g,x)}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(n))&&null!==t))for(d=t,h=0;h<(0,tr.len)(d);h++){var P=(0,tr.__getitem__)(d,h);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__in__)(P,u))&&!(0,tr.__in__)(P,f))){k=(0,tr.__call__)(tr.ValueError,null,function(){var e="Missing argument {}";return(0,tr.__call__)(e.format,e,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,P,vn))?(0,tr.__add__)((0,tr.__add__)("‘",P),"’"):(0,tr.__call__)(tr.str,null,P))}());throw k.__cause__=null,k}}return c}))}}),bn=(0,(tr=a("hoVWB")).__class__)("LatexContextDbBase",[tr.object],{__module__:"pylatexenc.latexnodes._latexcontextdbbase",get get_macro_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}return null}))},get get_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"environmentname":t=n[_]}}}return null}))},get get_specials_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"specials_chars":t=n[_]}}}return null}))},get test_for_specials(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":n=a[i]}}}return null}))}}),kn=(tr=a("hoVWB"),tr=a("hoVWB"),{});(0,tr.__nest__)(kn,"",dr);var xn="pylatexenc.latexnodes._parsingstatedelta",Pn=(function(){var e=kn;(0,tr.__call__)(e.getLogger,e,xn)}(),(0,tr.__class__)("ParsingStateDelta",[tr.object],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"set_attributes":t=a[i];break;case"_fields":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Pn,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.set_attributes=(0,tr.__t__)(t)?(0,tr.__call__)(tr.dict,null,t):null,e._fields=(0,tr.__t__)(null!==r)?r:(0,tr.tuple)(["set_attributes"])}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.__class__.__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r,n=[],_=e._fields,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,i))?(0,tr.__call__)(tr.getattr,null,e,i):"<??>")))}return n}())),")")}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state":t=_[a];break;case"latex_walker":r=_[a]}}}return(0,tr.__t__)(e.set_attributes)?function(){var r=t;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(e.set_attributes))}():t}))}})),On=(0,tr.__class__)("ParsingStateDeltaReplaceParsingState",[Pn],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"set_parsing_state":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,On,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["set_parsing_state"])},r))),e.set_parsing_state=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state":t=_[a];break;case"latex_walker":r=_[a]}}}return(0,tr.__t__)(null!==e.set_parsing_state)?e.set_parsing_state:t}))}}),En=(0,tr.__class__)("ParsingStateDeltaChained",[Pn],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state_deltas":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,En,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["parsing_state_deltas"])},r))),e.parsing_state_deltas=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state":t=_[a];break;case"latex_walker":r=_[a]}}}for(var i=t,o=e.parsing_state_deltas,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s))i=function(){var e=s;return(0,tr.__call__)(e.get_updated_parsing_state,e,i,r)}()}return i}))}}),An=(0,tr.__class__)("ParsingStateDeltaWalkerEvent",[Pn],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"walker_event_name":t=_[a];break;case"walker_event_kwargs":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,An,"__init__"),null,e,(0,tr.__kwargtrans__)({_fields:(0,tr.tuple)(["walker_event_name","walker_event_kwargs"])})),e.walker_event_name=t,e.walker_event_kwargs=r}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state":t=_[a];break;case"latex_walker":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.parsing_state_event_handler,e)}(),o=(0,tr.__call__)(tr.getattr,null,i,e.walker_event_name),l=(0,tr.__call__)(o,null,(0,tr.__kwargtrans__)(e.walker_event_kwargs));return(0,tr.__call__)(Tn,null,t,l,r)}))}}),Cn=(0,tr.__class__)("ParsingStateDeltaEnterMathMode",[An],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"math_mode_delimiter":t=_[a];break;case"trigger_token":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cn,"__init__"),null,e,(0,tr.__kwargtrans__)({walker_event_name:"enter_math_mode",walker_event_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({math_mode_delimiter:t,trigger_token:r}))}))}))}}),Sn=(0,tr.__class__)("ParsingStateDeltaLeaveMathMode",[An],{__module__:xn,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"trigger_token":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Sn,"__init__"),null,e,(0,tr.__kwargtrans__)({walker_event_name:"leave_math_mode",walker_event_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({trigger_token:t}))}))}))}}),Tn=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"parsing_state":e=_[a];break;case"parsing_state_delta":t=_[a];break;case"latex_walker":r=_[a]}}}return(0,tr.__t__)(null===t)?e:function(){var n=t;return(0,tr.__call__)(n.get_updated_parsing_state,n,e,r)}()},Nn="pylatexenc.latexnodes._walkerbase",Ln=(0,tr.__class__)("LatexWalkerParsingStateEventHandler",[tr.object],{__module__:Nn,get enter_math_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"math_mode_delimiter":t=_[a];break;case"trigger_token":r=_[a]}}}return(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!0,math_mode_delimiter:t}))}))}))},get leave_math_mode(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"trigger_token":t=n[_]}}}return(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!1,math_mode_delimiter:null}))}))}))}}),Mn=(0,tr.__call__)(Ln,null),In=(0,tr.__class__)("LatexWalkerBase",[tr.object],{__module__:Nn,get parsing_state_event_handler(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return Mn}))},get parse_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"parser":t=o[l];break;case"token_reader":r=o[l];break;case"parsing_state":n=o[l];break;case"open_context":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement parse_content()");throw s.__cause__=null,s}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node_class":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_node()");throw i.__cause__=null,i}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodelist()");throw i.__cause__=null,i}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_reader":t=a[i];break;case"parsing_state":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodes_collector()");throw o.__cause__=null,o}))},get make_latex_group_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"delimiters":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_group_parser()");throw a.__cause__=null,a}))},get make_latex_math_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"math_mode_delimiters":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_math_parser()");throw a.__cause__=null,a}))},get check_tolerant_parsing_ignore_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"exc":t=n[_]}}}return t}))},get format_node_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__add__)("character position ",(0,tr.__call__)(tr.repr,null,t.pos))}))}}),jn=(0,(tr=a("hoVWB")).__class__)("CallableSpecBase",[tr.object],{__module__:"pylatexenc.latexnodes._callablespecbase",get get_node_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement get_node_parser()");throw a.__cause__=null,a}))}}),Rn=(tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return e}),Dn=(0,tr.__class__)("LatexToken",[tr.object],{__module__:"pylatexenc.latexnodes._token",get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="";if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i="";var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"tok":t=s[c];break;case"arg":r=s[c];break;case"pos":n=s[c];break;case"pos_end":_=s[c];break;case"pre_space":a=s[c];break;case"post_space":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}var u=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"len",null)}();if(e.tok=t,e.arg=r,e.pos=n,e.pos_end=_,e.pre_space=a,e.post_space=i,(0,tr.__t__)((0,tr.__t__)(null===_)&&(0,tr.__t__)(null!==u)&&null!==n)&&(e.pos_end=(0,tr.__add__)(n,u)),(0,tr.__t__)(o)){var f=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected arguments to LatexToken(): ",(0,tr.__call__)(tr.repr,null,o)));throw f.__cause__=null,f}e._fields=["tok","arg","pos","pos_end","pre_space"],(0,tr.__t__)((0,tr.__in__)(e.tok,(0,tr.tuple)(["macro","comment"])))&&function(){var t=e._fields;(0,tr.__call__)(t.append,t,"post_space")}(),(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Dn,"__init__"),null,e)}))},get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get __unicode__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(Rn,null,function(){var t=e;return(0,tr.__call__)(t.__str__,t)}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("LatexToken(",(0,tr.__call__)(", ".join,", ",function(){for(var t,r,n=[],_=e._fields,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__call__)(tr.getattr,null,e,i))))}return n}())),")")}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e;return(0,tr.__call__)(t.__repr__,t)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__call__)(tr.all,null,function(){for(var r,n=[],_=e._fields,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__call__)(tr.getattr,null,e,i))&&null===(0,tr.__call__)(tr.getattr,null,t,i))||(0,tr.__eq__)((0,tr.__call__)(tr.getattr,null,e,i),(0,tr.__call__)(tr.getattr,null,t,i)))}return(0,tr.py_iter)(n)}())}))},__hash__:null});Object.defineProperty(Dn,"len",tr.property.call(Dn,Dn._get_len));var Fn={};(0,tr.__nest__)(Fn,"",dr);var Bn="pylatexenc.latexnodes._tokenreaderbase",zn=(function(){var e=Fn;(0,tr.__call__)(e.getLogger,e,Bn)}(),(0,tr.__class__)("LatexTokenReaderBase",[tr.object],{__module__:Bn,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,zn,"__init__"),null,e,(0,tr.__kwargtrans__)(t))}))},get make_token(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return(0,tr.__call__)(Dn,null,(0,tr.__kwargtrans__)(t))}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"rewind_pre_space":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement rewind_to_token()");throw i.__cause__=null,i}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"fastforward_post_space":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement move_past_token()");throw i.__cause__=null,i}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement peek_token()");throw a.__cause__=null,a}))},get peek_token_or_none(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}try{return function(){var r=e;return(0,tr.__call__)(r.peek_token,r,(0,tr.__kwargtrans__)({parsing_state:t}))}()}catch(e){if((0,tr.isinstance)(e,Ur))return null;throw e}}))},get next_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.peek_token,r,(0,tr.__kwargtrans__)({parsing_state:t}))}();return function(){var t=e;(0,tr.__call__)(t.move_past_token,t,a)}(),a}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement cur_pos()");throw _.__cause__=null,_}))},get peek_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))},get skip_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))},get peek_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"num_chars":t=_[a];break;case"parsing_state":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get next_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"num_chars":t=_[a];break;case"parsing_state":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get move_to_pos_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pos":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))}})),qn=(0,tr.__class__)("LatexTokenListTokenReader",[zn],{__module__:Bn,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token_list":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,qn,"__init__"),null,e),e.token_list=t,e._idx=0}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}if((0,tr.__t__)((0,tr.__ge__)(e._idx,(0,tr.__call__)(tr.len,null,e.token_list)))){var a=(0,tr.__call__)(Ur,null);throw a.__cause__=null,a}return(0,tr.__getitem__)(e.token_list,e._idx)}))},get next_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.peek_token,r,t)}();return e._idx=(0,tr.__call__)(tr.__iadd__,null,e._idx,1),a}))},get _find_tok_idx(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"methname":r=_[a]}}}try{var i=(0,tr.__call__)(tr.py_next,null,function(){for(var r,n=[],_=(0,tr.__call__)(tr.enumerate,null,e.token_list),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];(0,tr.__t__)(l===t)&&(r=void 0,r=n,(0,tr.__call__)(r.append,r,o))}return(0,tr.py_iter)(n)}())}catch(e){if((0,tr.isinstance)(e,tr.StopIteration)){var o=(0,tr.__call__)(tr.IndexError,null,function(){var e="{}({!r}): no such token in list";return(0,tr.__call__)(e.format,e,r,t)}());throw o.__cause__=null,o}throw e}return i}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"rewind_pre_space":r=_[a]}}}e._idx=function(){var r=e;return(0,tr.__call__)(r._find_tok_idx,r,t,"move_to_token")}()}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"fastforward_post_space":r=_[a]}}}e._idx=(0,tr.__add__)(function(){var r=e;return(0,tr.__call__)(r._find_tok_idx,r,t,"move_past_token")}(),1)}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e;return(0,tr.__call__)(t.peek_token,t,null)}().pos}))},get final_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__getitem__)(e.token_list,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e.token_list),1)).pos_end}))}}),Vn={};t(Vn,"T",(()=>t_)),t(Vn,"TEMPLATE",(()=>r_)),t(Vn,"I",(()=>n_)),t(Vn,"IGNORECASE",(()=>__)),t(Vn,"L",(()=>a_)),t(Vn,"LOCALE",(()=>i_)),t(Vn,"M",(()=>o_)),t(Vn,"MULTILINE",(()=>l_)),t(Vn,"S",(()=>s_)),t(Vn,"DOTALL",(()=>c_)),t(Vn,"U",(()=>u_)),t(Vn,"UNICODE",(()=>f_)),t(Vn,"X",(()=>d_)),t(Vn,"VERBOSE",(()=>h_)),t(Vn,"DEBUG",(()=>p_)),t(Vn,"A",(()=>g_)),t(Vn,"ASCII",(()=>v_)),t(Vn,"Y",(()=>m_)),t(Vn,"STICKY",(()=>y_)),t(Vn,"G",(()=>w_)),t(Vn,"GLOBAL",(()=>b_)),t(Vn,"J",(()=>k_)),t(Vn,"JSSTRICT",(()=>x_)),t(Vn,"error",(()=>P_)),t(Vn,"ReIndexError",(()=>O_)),t(Vn,"Match",(()=>E_)),t(Vn,"compile",(()=>S_)),t(Vn,"escape",(()=>F_)),t(Vn,"Regex",(()=>A_)),t(Vn,"PyRegExp",(()=>C_)),t(Vn,"search",(()=>T_)),t(Vn,"match",(()=>N_)),t(Vn,"fullmatch",(()=>L_)),t(Vn,"py_split",(()=>M_)),t(Vn,"findall",(()=>I_)),t(Vn,"finditer",(()=>j_)),t(Vn,"sub",(()=>R_)),t(Vn,"subn",(()=>D_)),t(Vn,"purge",(()=>B_)),t(Vn,"translate",(()=>Qn));tr=a("hoVWB"),tr=a("hoVWB");var Un={};(0,tr.__nest__)(Un,"",Vn);var Gn="re.translate",Wn=(0,tr.__class__)("Group",[tr.object],{__module__:Gn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"start":t=a[i];break;case"end":r=a[i];break;case"klass":n=a[i]}}}e.start=t,e.end=r,e.klass=n}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.str,null,(0,tr.tuple)([e.start,e.end,e.klass]))}))}}),$n=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("tokens"===n)e=r[n]}}for(var _=[],a=0,i=e,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=l.py_name;return(0,tr.__call__)(e.startswith,e,"(")}()))!function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Wn,null,a,null,l.py_name))}();else if((0,tr.__t__)((0,tr.__eq__)(l.py_name,")")))for(var s=(0,tr.__call__)(tr.py_reversed,null,_),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);(0,tr.__t__)(null===u.end)&&(u.end=a)}a=(0,tr.__call__)(tr.__iadd__,null,a,1)}return _},Yn=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("tokens"===n)e=r[n]}}(0,tr.__call__)($n,null,e);for(var _=0,a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)((0,tr.__eq__)(o.py_name,"(")))_=(0,tr.__call__)(tr.__iadd__,null,_,1)}return _},Hn=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"groupInfo":e=_[a];break;case"namedGroups":t=_[a];break;case"groupRef":r=_[a]}}}try{var i=(0,tr.__call__)(tr.int,null,r)}catch(e){i=(0,tr.__getitem__)(t,r)}for(var o=0,l=e,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)((0,tr.__eq__)(c.klass,"("))){o=(0,tr.__call__)(tr.__iadd__,null,o,1);if((0,tr.__t__)((0,tr.__eq__)(o,i)))return c}}},Xn=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"tokens":e=n[_];break;case"namedGroups":t=n[_]}}}for(var a=[],i=(0,tr.__call__)($n,null,e),o=i,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.__eq__)(s.klass,"(?<"))){var c=(0,tr.__getslice__)(e,0,null,1),u=(0,tr.__getslice__)(e,0,null,1),f=s.start,d=s.end,h=(0,tr.__getitem__)(e,(0,tr.__add__)(f,1)).py_name,p=(0,tr.__call__)(Hn,null,i,t,h),g=(0,tr.__getitem__)(e,(0,tr.__add__)(p.end,1));if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(g.py_name,["?","*"]))||function(){var e=g.py_name;return(0,tr.__call__)(e.startswith,e,"{0,")}())){(0,tr.__t__)((0,tr.__eq__)(g.py_name,"?"))?(0,tr.__setitem__)(c,(0,tr.__add__)(p.end,1),null):(0,tr.__t__)((0,tr.__eq__)(g.py_name,"*"))?(0,tr.__setitem__)(c,(0,tr.__add__)(p.end,1),(0,tr.__call__)(Zn,null,"+")):(0,tr.__t__)(function(){var e=g.py_name;return(0,tr.__call__)(e.startswith,e,"{0,")}())&&(0,tr.__setslice__)((0,tr.__getitem__)(c,(0,tr.__add__)(p.end,1)).py_name,0,3,null,"{1,"),(0,tr.__setitem__)(u,(0,tr.__add__)(p.end,1),null);for(var v=!1,m=f;m<d;m++)if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,m).py_name,"|"))){v=!0;!function(){var e=u;(0,tr.__call__)(e.py_pop,e,d)}(),(0,tr.__setslice__)(c,m,(0,tr.__add__)(d,1),null,[]),(0,tr.__setslice__)(u,f,(0,tr.__add__)(m,1),null,[]);break}(0,tr.__t__)(!(0,tr.__t__)(v))&&((0,tr.__setslice__)(u,f,(0,tr.__add__)(d,1),null,[]),function(){var e=c;(0,tr.__call__)(e.py_pop,e,d)}()),(0,tr.__setslice__)(c,f,(0,tr.__add__)(f,3),null,[]),(0,tr.__setslice__)(u,p.start,(0,tr.__add__)(p.end,1),null,[(0,tr.__call__)(Zn,null,"("),(0,tr.__call__)(Zn,null,")")]),function(){var e=c;(0,tr.__call__)(e.remove,e,null)}(),function(){var e=u;(0,tr.__call__)(e.remove,e,null)}(),function(){var e=a;(0,tr.__call__)(e.append,e,c)}(),function(){var e=a;(0,tr.__call__)(e.append,e,u)}()}else{for(m=f;m<d;m++)if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(c,m).py_name,"|"))){c=(0,tr.__getslice__)(e,0,m,1);!function(){var t=c;(0,tr.__call__)(t.extend,t,(0,tr.__getslice__)(e,(0,tr.__add__)(d,1),null,1))}();break}(0,tr.__setslice__)(c,f,(0,tr.__add__)(f,3),null,[]),function(){var e=a;(0,tr.__call__)(e.append,e,c)}()}break}}if((0,tr.__t__)(!(0,tr.__t__)(a)))return[e];var y=[];for(o=a,l=0;l<(0,tr.len)(o);l++){var w=(0,tr.__getitem__)(o,l);!function(){var e=y;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(Xn,null,w,t))}()}return y},Zn=(0,tr.__class__)("Token",[tr.object],{__module__:Gn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"py_name":t=a[i];break;case"paras":r=a[i];break;case"pure":n=a[i]}}}if((0,tr.__t__)(null===r))r=[];e.py_name=t,e.paras=r,e.pure=n,e.isModeGroup=!1}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.py_name}))},get resolve(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _="",a=e.paras,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);_=(0,tr.__call__)(tr.__iadd__,null,_,(0,tr.__call__)(tr.str,null,o))}return(0,tr.__add__)(e.py_name,_)}))}}),Kn=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"stack":e=n[_];break;case"queue":t=n[_]}}}var a=!(0,tr.__t__)((0,tr.__call__)(tr.bool,null,t));if((0,tr.__t__)(!(0,tr.__t__)(a))){!function(){var r=e;(0,tr.__call__)(r.append,r,(0,tr.__call__)(Zn,null,(0,tr.__getitem__)(t,0),[],!0))}();t=(0,tr.__getslice__)(t,1,null,1)}return(0,tr.tuple)([e,t,a])},Jn=function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"stack":e=a[i];break;case"queue":t=a[i];break;case"namedGroups":r=a[i];break;case"flags":n=a[i]}}}var o=!1,l=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e),1);if((0,tr.__t__)((0,tr.__lt__)((0,tr.__call__)(tr.len,null,e),2))){e=(p=(0,tr.__call__)(Kn,null,e,t))[0],t=p[1],o=p[2];return(0,tr.tuple)([e,t,n,o])}var s=(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),0))?(0,tr.__getitem__)(e,l):(0,tr.__call__)(Zn,null,""),c=(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),1))?(0,tr.__getitem__)(e,(0,tr.__sub__)(l,1)):(0,tr.__call__)(Zn,null,"");if((0,tr.__t__)(false)){for(var u=e,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);!function(){var e,t=console;(0,tr.__call__)(t.log,t,(e=d,(0,tr.__call__)(e.resolve,e)),"\t",(0,tr.__kwargtrans__)({end:""}))}()}!function(){var e=console;(0,tr.__call__)(e.log,e,"")}()}if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"\\")))(0,tr.__t__)((0,tr.__eq__)(s.py_name,"A"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"^")]):(0,tr.__t__)((0,tr.__eq__)(s.py_name,"a"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"\\07")]):(0,tr.__t__)((0,tr.__eq__)(s.py_name,"Z"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"$")]):(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,(0,tr.__add__)("\\",s.py_name))]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(s.py_name,"$"))&&s.pure))!function(){var t=e;(0,tr.__call__)(t.py_pop,t)}(),function(){var t=e;(0,tr.__call__)(t.extend,t,[(0,tr.__call__)(Zn,null,"(?="),(0,tr.__call__)(Zn,null,"\\n"),(0,tr.__call__)(Zn,null,"?"),(0,tr.__call__)(Zn,null,"$"),(0,tr.__call__)(Zn,null,")")])}();else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"{"))){(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(s.py_name,","))&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,c.paras),0))?(function(){var e=c.paras;(0,tr.__call__)(e.append,e,"0")}(),function(){var e=c.paras;(0,tr.__call__)(e.append,e,",")}()):(0,tr.__t__)((0,tr.__eq__)(s.py_name,"}"))?(!function(){var e=c.paras;(0,tr.__call__)(e.append,e,"}")}(),c.py_name=function(){var e=c;return(0,tr.__call__)(e.resolve,e)}(),c.paras=[]):function(){var e=c.paras;(0,tr.__call__)(e.append,e,s.py_name)}();e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(1),1)}else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(c.py_name,"["))&&(0,tr.__eq__)(s.py_name,"^")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"[^")]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(c.py_name,"("))&&(0,tr.__eq__)(s.py_name,"?")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"(?")]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(c.py_name,["*","+","?"]))&&(0,tr.__eq__)(s.py_name,"?")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,(0,tr.__add__)(c.py_name,"?"))]);else if((0,tr.__t__)((0,tr.__t__)(c.isModeGroup)&&(0,tr.__eq__)(s.py_name,")")))e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(2),1);else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?")))if((0,tr.__t__)((0,tr.__in__)(s.py_name,"aiLmsux"))){if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"i")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.IGNORECASE);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"L")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.LOCALE);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"m")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.MULTILINE);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"s")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.DOTALL);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"u")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.UNICODE);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"x")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.VERBOSE);else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,"a")))n=(0,tr.__call__)(tr.__ior__,null,n,Un.ASCII);!function(){var t=e;(0,tr.__call__)(t.py_pop,t)}(),c.isModeGroup=!0}else{(0,tr.__t__)((0,tr.__eq__)(s.py_name,"("))&&(s.py_name="<");var h=(0,tr.__call__)(Zn,null,(0,tr.__add__)("(?",s.py_name));(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[h])}else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?<")))(0,tr.__t__)((0,tr.__eq__)(s.py_name,")"))?((0,tr.__setslice__)(e,(0,tr.__neg__)(1),null,null,[(0,tr.__call__)(Zn,null,(0,tr.__call__)("".join,"",c.paras)),(0,tr.__call__)(Zn,null,">")]),c.paras=[]):(function(){var e=c.paras;(0,tr.__call__)(e.append,e,s.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?P")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,(0,tr.__add__)("(?P",s.py_name))]);else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?P<")))(0,tr.__t__)((0,tr.__eq__)(s.py_name,">"))?((0,tr.__setitem__)(r,(0,tr.__call__)("".join,"",c.paras),(0,tr.__add__)((0,tr.__call__)(Yn,null,e),1)),(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,"(")])):(function(){var e=c.paras;(0,tr.__call__)(e.append,e,s.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?P=")))(0,tr.__t__)((0,tr.__eq__)(s.py_name,")"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(Zn,null,(0,tr.__add__)("\\",(0,tr.__call__)(tr.str,null,(0,tr.__getitem__)(r,(0,tr.__getitem__)(c.paras,0)))))]):(0,tr.__t__)(!(0,tr.__t__)(c.paras))?(function(){var e=c.paras;(0,tr.__call__)(e.append,e,s.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}()):((0,tr.__setitem__)(c.paras,0,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(c.paras,0),s.py_name)),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(c.py_name,"(?#")))if((0,tr.__t__)((0,tr.__eq__)(s.py_name,")")))e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(2),1);else e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(1),1);else{var p;e=(p=(0,tr.__call__)(Kn,null,e,t))[0],t=p[1],o=p[2]}return(0,tr.tuple)([e,t,n,o])},Qn=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("rgx"===n)e=r[n]}}for(var _=[],a=(0,tr.__call__)(tr.list,null,e),i=0,o=(0,tr.__call__)(tr.dict,null),l=0;(0,tr.__t__)(!0);){l=(0,tr.__call__)(tr.__iadd__,null,l,1);if((0,tr.__t__)((0,tr.__gt__)(l,1e3))){var s=(0,tr.__call__)(tr.Exception,null,"Too many iterations in converting regex from Python to JavaScript");throw s.__cause__=null,s}var c=(0,tr.__call__)(Jn,null,_,a,o,i),u=(_=c[0],a=c[1],i=c[2],c[3]);if((0,tr.__t__)(u))break}for(var f=(0,tr.__call__)(Xn,null,_,o),d=(0,tr.__call__)(tr.len,null,f),h=[],p=0;p<(0,tr.__call__)(tr.len,null,f);p++)!function(){var e=h;(0,tr.__call__)(e.extend,e,(0,tr.__getitem__)(f,p))}(),(0,tr.__t__)((0,tr.__lt__)(p,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,f),1)))&&function(){var e=h;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Zn,null,"|"))}();_=h,(0,tr.__call__)($n,null,_);for(var g=[],v=_,m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m),w=function(){var e=y;return(0,tr.__call__)(e.resolve,e)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__and__)(i,Un.DOTALL))&&(0,tr.__eq__)(w,".")))w="[\\s\\S]";!function(){var e=g;(0,tr.__call__)(e.append,e,w)}()}return(0,tr.tuple)([g,i,o,(0,tr.__call__)(Yn,null,_),d])},e_="re",t_=(0,tr.__lshift__)(1,0),r_=t_,n_=(0,tr.__lshift__)(1,1),__=n_,a_=(0,tr.__lshift__)(1,2),i_=a_,o_=(0,tr.__lshift__)(1,3),l_=o_,s_=(0,tr.__lshift__)(1,4),c_=s_,u_=(0,tr.__lshift__)(1,5),f_=u_,d_=(0,tr.__lshift__)(1,6),h_=d_,p_=(0,tr.__lshift__)(1,7),g_=(0,tr.__lshift__)(1,8),v_=g_,m_=(0,tr.__lshift__)(1,16),y_=m_,w_=(0,tr.__lshift__)(1,17),b_=w_,k_=(0,tr.__lshift__)(1,19),x_=k_,P_=(0,tr.__class__)("error",[tr.Exception],{__module__:e_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"msg":t=o[l];break;case"error":r=o[l];break;case"pattern":n=o[l];break;case"flags":_=o[l];break;case"pos":a=o[l]}}}!function(){var n=tr.Exception;(0,tr.__call__)(n.__init__,n,e,t,(0,tr.__kwargtrans__)({error:r}))}(),e.pattern=n,e.flags=_,e.pos=a}))}}),O_=(0,tr.__class__)("ReIndexError",[tr.IndexError],{__module__:e_,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}!function(){var t=tr.IndexError;(0,tr.__call__)(t.__init__,t,e,"no such group")}()}))}}),E_=(0,tr.__class__)("Match",[tr.object],{__module__:e_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"mObj":t=l[s];break;case"string":r=l[s];break;case"pos":n=l[s];break;case"endpos":_=l[s];break;case"rObj":a=l[s];break;case"namedGroups":i=l[s]}}}for(var c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0];f[1];(0,tr.__setitem__)(t,d,(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(t,d),void 0))?null:(0,tr.__getitem__)(t,d))}e._obj=t,e._pos=n,e._endpos=_,e._re=a,e._string=r,e._namedGroups=i,e._lastindex=function(){var t=e;return(0,tr.__call__)(t._lastMatchGroup,t)}(),(0,tr.__t__)(null!==e._namedGroups)?e._lastgroup=(0,tr.__getitem__)(e._namedGroups,e._lastindex):e._lastgroup=null}))},get _getPos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._pos}))},get _setPos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getEndPos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._endpos}))},get _setEndPos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getRe(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._re}))},get _setRe(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getString(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._string}))},get _setString(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getLastGroup(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._lastgroup}))},get _setLastGroup(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getLastIndex(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._lastindex}))},get _setLastIndex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _lastMatchGroup(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e._obj),1))){for(var _=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e._obj),1);_>0;_--)if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,_)))return _;return null}return null}))},get expand(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"template":t=n[_]}}}var a=(0,tr.__call__)(tr.NotImplementedError,null);throw a.__cause__=null,a}))},get group(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}var _=(0,tr.tuple)([].slice.apply(arguments).slice(1,t+1))}else _=(0,tr.tuple)();var a=[];if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,_),0)))for(var i=_,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)((0,tr.py_typeof)(l)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(s=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,s;if((0,tr.__t__)(!(0,tr.__in__)(l,function(){var t=e._namedGroups;return(0,tr.__call__)(t.py_keys,t)}())))throw(s=(0,tr.__call__)(O_,null)).__cause__=null,s;!function(){var t=a;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,(0,tr.__getitem__)(e._namedGroups,l)))}()}else{var s;if((0,tr.__t__)((0,tr.__ge__)(l,(0,tr.__call__)(tr.len,null,e._obj))))throw(s=(0,tr.__call__)(O_,null)).__cause__=null,s;!function(){var t=a;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,l))}()}}else!function(){var t=a;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,0))}();return(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),1))?(0,tr.__getitem__)(a,0):(0,tr.__call__)(tr.tuple,null,a)}))},get groups(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"py_default":t=n[_]}}}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e._obj),1))){var a=(0,tr.__getslice__)(e._obj,1,null,1);return(0,tr.__call__)(tr.tuple,null,function(){for(var e,r=[],n=a,_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__t__)(null!==i)?i:t)}return r}())}return(0,tr.__call__)(tr.tuple,null)}))},get groupdict(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"py_default":t=n[_]}}}if((0,tr.__t__)(null!==e._namedGroups)){for(var a=(0,tr.dict)({}),i=function(){var t=e._namedGroups;return(0,tr.__call__)(t.py_items,t)}(),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=(0,tr.__getitem__)(e._obj,c);(0,tr.__setitem__)(a,s,(0,tr.__t__)(null!==u)?u:t)}return a}var f=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available");throw f.__cause__=null,f}))},get start(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"group":t=n[_]}}}var a=0;if((0,tr.__t__)((0,tr.py_typeof)(t)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(i=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,i;if((0,tr.__t__)(!(0,tr.__in__)(t,function(){var t=e._namedGroups;return(0,tr.__call__)(t.py_keys,t)}())))throw(i=(0,tr.__call__)(O_,null)).__cause__=null,i;a=(0,tr.__getitem__)(e._namedGroups,t)}else a=t;if((0,tr.__t__)((0,tr.__ge__)(a,(0,tr.__call__)(tr.len,null,e._obj))))throw(i=(0,tr.__call__)(O_,null)).__cause__=null,i;if((0,tr.__t__)((0,tr.__eq__)(a,0)))return e._obj.index;if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,a))){var i,o=(0,tr.__call__)(S_,null,(0,tr.__call__)(F_,null,(0,tr.__getitem__)(e._obj,a)),e._re.flags),l=function(){var t=o;return(0,tr.__call__)(t.search,t,(0,tr.__getitem__)(e._obj,0))}();if((0,tr.__t__)(l))return(0,tr.__add__)(e._obj.index,function(){var e=l;return(0,tr.__call__)(e.start,e)}());throw(i=(0,tr.__call__)(tr.Exception,null,"Failed to find capture group")).__cause__=null,i}return(0,tr.__neg__)(1)}))},get end(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"group":t=n[_]}}}var a=0;if((0,tr.__t__)((0,tr.py_typeof)(t)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(i=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,i;if((0,tr.__t__)(!(0,tr.__in__)(t,function(){var t=e._namedGroups;return(0,tr.__call__)(t.py_keys,t)}())))throw(i=(0,tr.__call__)(O_,null)).__cause__=null,i;a=(0,tr.__getitem__)(e._namedGroups,t)}else a=t;if((0,tr.__t__)((0,tr.__ge__)(a,(0,tr.__call__)(tr.len,null,e._obj))))throw(i=(0,tr.__call__)(O_,null)).__cause__=null,i;if((0,tr.__t__)((0,tr.__eq__)(a,0)))return(0,tr.__add__)(e._obj.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e._obj,0)));if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,a))){var i,o=(0,tr.__call__)(S_,null,(0,tr.__call__)(F_,null,(0,tr.__getitem__)(e._obj,a)),e._re.flags),l=function(){var t=o;return(0,tr.__call__)(t.search,t,(0,tr.__getitem__)(e._obj,0))}();if((0,tr.__t__)(l))return(0,tr.__add__)(e._obj.index,function(){var e=l;return(0,tr.__call__)(e.end,e)}());throw(i=(0,tr.__call__)(tr.Exception,null,"Failed to find capture group")).__cause__=null,i}return(0,tr.__neg__)(1)}))},get span(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"group":t=n[_]}}}return(0,tr.tuple)([function(){var r=e;return(0,tr.__call__)(r.start,r,t)}(),function(){var r=e;return(0,tr.__call__)(r.end,r,t)}()])}))}});Object.defineProperty(E_,"pos",tr.property.call(E_,E_._getPos,E_._setPos)),Object.defineProperty(E_,"endpos",tr.property.call(E_,E_._getEndPos,E_._setEndPos)),Object.defineProperty(E_,"re",tr.property.call(E_,E_._getRe,E_._setRe)),Object.defineProperty(E_,"string",tr.property.call(E_,E_._getString,E_._setString)),Object.defineProperty(E_,"lastgroup",tr.property.call(E_,E_._getLastGroup,E_._setLastGroup)),Object.defineProperty(E_,"lastindex",tr.property.call(E_,E_._getLastIndex,E_._setLastIndex));var A_=(0,tr.__class__)("Regex",[tr.object],{__module__:e_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"pattern":t=_[a];break;case"flags":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__gt__)((0,tr.__and__)(r,v_),0))))r=(0,tr.__call__)(tr.__ior__,null,r,f_);e._flags=r;var i=function(){var n=e;return(0,tr.__call__)(n._compileWrapper,n,t,r)}();e._jsFlags=i[0],e._obj=i[1],e._jspattern=t,e._pypattern=t;i=function(){var n=e;return(0,tr.__call__)(n._compileWrapper,n,(0,tr.__add__)(t,"|"),r)}(),i[0];var o=i[1];e._groups=(0,tr.__sub__)(function(){var e=o;return(0,tr.__call__)(e.exec,e,"")}().length,1),e._groupindex=null}))},get _getPattern(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e._pypattern;return(0,tr.__call__)(t.py_replace,t,"\\","\\\\")}();return _}))},get _setPattern(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getFlags(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._flags}))},get _setFlags(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getGroups(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._groups}))},get _setGroups(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getGroupIndex(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)(null===e._groupindex)?(0,tr.dict)({}):e._groupindex}))},get _setGroupIndex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"val":t=n[_]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _compileWrapper(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"pattern":t=_[a];break;case"flags":r=_[a]}}}var i=function(){var t=e;return(0,tr.__call__)(t._convertFlags,t,r)}(),o=null,l=null;try{o=new RegExp(t,i)}catch(e){l=e}if((0,tr.__t__)(null!==l)){var s=(0,tr.__call__)(P_,null,l.message,l,t,r);throw s.__cause__=null,s}return(0,tr.tuple)([i,o])}))},get _convertFlags(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"flags":t=n[_]}}}var a=[(0,tr.tuple)([p_,""]),(0,tr.tuple)([__,"i"]),(0,tr.tuple)([l_,"m"]),(0,tr.tuple)([y_,"y"]),(0,tr.tuple)([b_,"g"]),(0,tr.tuple)([f_,"u"])];return(0,tr.__call__)("".join,"",function(){for(var e,r=[],n=a,_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_);(0,tr.__t__)((0,tr.__gt__)((0,tr.__and__)((0,tr.__getitem__)(i,0),t),0))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(i,1)))}return r}())}))},get _getTargetStr(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}var o=(0,tr.__call__)(tr.len,null,t);if((0,tr.__t__)(null!==n)&&(0,tr.__t__)((0,tr.__lt__)(n,o)))o=n;if((0,tr.__t__)((0,tr.__lt__)(o,0)))o=0;return(0,tr.__getslice__)(t,r,o,1)}))},get _patternHasCaptures(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__gt__)(e._groups,0)}))},get search(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}if((0,tr.__t__)(null===n))n=(0,tr.__call__)(tr.len,null,t);var o=e._obj,l=function(){var e=o;return(0,tr.__call__)(e.exec,e,t)}();return(0,tr.__t__)(l)?(0,tr.__t__)((0,tr.__t__)((0,tr.__lt__)(l.index,r))||(0,tr.__gt__)(l.index,n))?null:(0,tr.__call__)(E_,null,l,t,r,n,e,e._groupindex):null}))},get match(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}var o=t;if((0,tr.__t__)(null!==n))o=(0,tr.__getslice__)(o,0,n,1);else n=(0,tr.__call__)(tr.len,null,t);var l=e._obj,s=function(){var e=l;return(0,tr.__call__)(e.exec,e,o)}();return(0,tr.__t__)(s)&&(0,tr.__t__)((0,tr.__eq__)(s.index,r))?(0,tr.__call__)(E_,null,s,t,r,n,e,e._groupindex):null}))},get fullmatch(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}var o=t,l=(0,tr.__call__)(tr.len,null,t);if((0,tr.__t__)(null!==n))o=(0,tr.__getslice__)(o,0,n,1),l=n;var s=e._obj,c=function(){var e=s;return(0,tr.__call__)(e.exec,e,o)}();if((0,tr.__t__)(c)){var u=(0,tr.__add__)(c.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(c,0)));return(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(c.index,r))&&(0,tr.__eq__)(u,l))?(0,tr.__call__)(E_,null,c,t,r,l,e,e._groupindex):null}return null}))},get py_split(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"string":t=_[a];break;case"maxsplit":r=_[a]}}}if((0,tr.__t__)((0,tr.__lt__)(r,0)))return[t];var i=null,o=e._obj;if((0,tr.__t__)((0,tr.__eq__)(r,0))){i=function(){var e=t;return(0,tr.__call__)(e.py_split,e,o)}();return i}for(var l=e._flags,s=(l=(0,tr.__call__)(tr.__ior__,null,l,b_),function(){var t=e;return(0,tr.__call__)(t._compileWrapper,t,e._jspattern,l)}()),c=(s[0],o=s[1],[]),u=null,f=0,d=0;d<r;d++){var h=function(){var e=o;return(0,tr.__call__)(e.exec,e,t)}();if(!(0,tr.__t__)(h))break;f=(0,tr.__call__)(tr.__iadd__,null,f,1);if((0,tr.__t__)(null!==u)){var p=(0,tr.__add__)(u.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(u,0))),g=(0,tr.__getslice__)(t,p,h.index,1);!function(){var e=c;(0,tr.__call__)(e.append,e,g)}(),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,h),1))&&function(){var e=c;(0,tr.__call__)(e.extend,e,(0,tr.__getslice__)(h,1,null,1))}()}else{g=(0,tr.__getslice__)(t,0,h.index,1);!function(){var e=c;(0,tr.__call__)(e.append,e,g)}(),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,h),1))&&function(){var e=c;(0,tr.__call__)(e.extend,e,(0,tr.__getslice__)(h,1,null,1))}()}u=h}if((0,tr.__t__)(null!==u)){var v=(0,tr.__add__)(u.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(u,0))),m=(0,tr.__getslice__)(t,v,null,1);!function(){var e=c;(0,tr.__call__)(e.append,e,m)}()}return c}))},get _findAllMatches(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}for(var o=function(){var _=e;return(0,tr.__call__)(_._getTargetStr,_,t,r,n)}(),l=e._flags,s=(l=(0,tr.__call__)(tr.__ior__,null,l,b_),function(){var t=e;return(0,tr.__call__)(t._compileWrapper,t,e._jspattern,l)}()),c=(s[0],s[1]),u=[];(0,tr.__t__)(!0);){var f=function(){var e=c;return(0,tr.__call__)(e.exec,e,o)}();if(!(0,tr.__t__)(f))break;!function(){var e=u;(0,tr.__call__)(e.append,e,f)}()}return u}))},get findall(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}var o=function(){var _=e;return(0,tr.__call__)(_._findAllMatches,_,t,r,n)}(),l=(0,tr.__call__)(tr.map,null,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),2))?(0,tr.__call__)(tr.tuple,null,(0,tr.__getslice__)(e,1,null,1)):(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e),2))?(0,tr.__getitem__)(e,1):(0,tr.__getitem__)(e,0)}),o);return l}))},get finditer(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":n=a[i]}}}var o=function(){var _=e;return(0,tr.__call__)(_._findAllMatches,_,t,r,n)}(),l=(0,tr.__call__)(tr.map,null,(function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)if("m"===a)r=_[a]}}return(0,tr.__call__)(E_,null,r,t,0,(0,tr.__call__)(tr.len,null,t),e,e._groupindex)}),o);return(0,tr.__call__)(tr.py_iter,null,l)}))},get sub(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"repl":t=a[i];break;case"string":r=a[i];break;case"count":n=a[i]}}}var o=function(){var _=e;return(0,tr.__call__)(_.subn,_,t,r,n)}(),l=o[0];o[1];return l}))},get subn(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"repl":t=a[i];break;case"string":r=a[i];break;case"count":n=a[i]}}}for(var o=e._flags,l=(o=(0,tr.__call__)(tr.__ior__,null,o,b_),function(){var t=e;return(0,tr.__call__)(t._compileWrapper,t,e._jspattern,o)}()),s=(l[0],l[1]),c="",u=0,f=(0,tr.__neg__)(1);(0,tr.__t__)(!0);){if((0,tr.__t__)((0,tr.__gt__)(n,0))&&(0,tr.__t__)((0,tr.__ge__)(u,n))){if((0,tr.__t__)((0,tr.__lt__)(f,0)))return(0,tr.tuple)([c,u]);c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getslice__)(r,f,d.index,1));return(0,tr.tuple)([c,u])}var d=function(){var e=s;return(0,tr.__call__)(e.exec,e,r)}();if(!(0,tr.__t__)(d)){if((0,tr.__t__)((0,tr.__lt__)(f,0)))return(0,tr.tuple)([r,0]);c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getslice__)(r,f,null,1));return(0,tr.tuple)([c,u])}if((0,tr.__t__)((0,tr.__lt__)(f,0)))var c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getslice__)(r,0,d.index,1));else c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getslice__)(r,f,d.index,1));if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,t))){var h=(0,tr.__call__)(t,null,(0,tr.__call__)(E_,null,d,r,0,(0,tr.__call__)(tr.len,null,r),e,e._groupindex));c=(0,tr.__call__)(tr.__iadd__,null,c,h)}else c=(0,tr.__call__)(tr.__iadd__,null,c,t);u=(0,tr.__call__)(tr.__iadd__,null,u,1),f=(0,tr.__add__)(d.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(d,0)))}}))}});Object.defineProperty(A_,"pattern",tr.property.call(A_,A_._getPattern,A_._setPattern)),Object.defineProperty(A_,"flags",tr.property.call(A_,A_._getFlags,A_._setFlags)),Object.defineProperty(A_,"groups",tr.property.call(A_,A_._getGroups,A_._setGroups)),Object.defineProperty(A_,"groupindex",tr.property.call(A_,A_._getGroupIndex,A_._setGroupIndex));var C_=(0,tr.__class__)("PyRegExp",[A_],{__module__:e_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"pyPattern":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(Qn,null,t),o=i[0],l=i[1],s=i[2],c=i[3],u=i[4],f=(r=(0,tr.__call__)(tr.__ior__,null,r,l),(0,tr.__call__)("".join,"",o));!function(){var t=A_;(0,tr.__call__)(t.__init__,t,e,f,r)}(),e._pypattern=t,e._nsplits=u,e._jsTokens=o,e._capgroups=c,e._groupindex=s}))}}),S_=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"pattern":e=n[_];break;case"flags":t=n[_]}}}if((0,tr.__t__)((0,tr.__and__)(t,x_)))var a=(0,tr.__call__)(A_,null,e,t);else a=(0,tr.__call__)(C_,null,e,t);return a},T_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pattern":e=_[a];break;case"string":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(S_,null,e,r);return function(){var e=i;return(0,tr.__call__)(e.search,e,t)}()},N_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pattern":e=_[a];break;case"string":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(S_,null,e,r);return function(){var e=i;return(0,tr.__call__)(e.match,e,t)}()},L_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pattern":e=_[a];break;case"string":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(S_,null,e,r);return function(){var e=i;return(0,tr.__call__)(e.fullmatch,e,t)}()},M_=function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":t=a[i];break;case"maxsplit":r=a[i];break;case"flags":n=a[i]}}}var o=(0,tr.__call__)(S_,null,e,n);return function(){var e=o;return(0,tr.__call__)(e.py_split,e,t,r)}()},I_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pattern":e=_[a];break;case"string":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(S_,null,e,r);return function(){var e=i;return(0,tr.__call__)(e.findall,e,t)}()},j_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"pattern":e=_[a];break;case"string":t=_[a];break;case"flags":r=_[a]}}}var i=(0,tr.__call__)(S_,null,e,r);return function(){var e=i;return(0,tr.__call__)(e.finditer,e,t)}()},R_=function(e,t,r,n,_){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"pattern":e=i[o];break;case"repl":t=i[o];break;case"string":r=i[o];break;case"count":n=i[o];break;case"flags":_=i[o]}}}var l=(0,tr.__call__)(S_,null,e,_);return function(){var e=l;return(0,tr.__call__)(e.sub,e,t,r,n)}()},D_=function(e,t,r,n,_){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"pattern":e=i[o];break;case"repl":t=i[o];break;case"string":r=i[o];break;case"count":n=i[o];break;case"flags":_=i[o]}}}var l=(0,tr.__call__)(S_,null,e,_);return function(){var e=l;return(0,tr.__call__)(e.subn,e,t,r,n)}()},F_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("string"===n)e=r[n]}}var _;if(_=e.replace(/[^A-Za-z:;\d]/g,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,0),"\\"))?"\\\\\\\\":(0,tr.__add__)("\\\\",(0,tr.__getitem__)(e,0))})),(0,tr.__t__)(null!==_))return _;var a=(0,tr.__call__)(tr.Exception,null,"Failed to escape the passed string");throw a.__cause__=null,a},B_=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}}},z_={},q_={};(0,tr.__nest__)(z_,"",dr),(0,tr.__nest__)(q_,"",Vn);var V_="pylatexenc.latexnodes._tokenreader",U_=(function(){var e=z_;(0,tr.__call__)(e.getLogger,e,V_)}(),(0,tr.__class__)("LatexTokenReader",[zn],{__module__:V_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"s":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,U_,"__init__"),null,e),e.s=t,e.tolerant_parsing=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"tolerant_parsing",!1)}(),(0,tr.__t__)(r)){var i=(0,tr.__call__)(tr.ValueError,null,function(){var e="Invalid argument(s) to LatexTokenReader: {!r}";return(0,tr.__call__)(e.format,e,r)}());throw i.__cause__=null,i}e._pos=0}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"rewind_pre_space":r=_[a]}}}if((0,tr.__t__)(r))var i=(0,tr.__sub__)(t.pos,(0,tr.__call__)(tr.len,null,t.pre_space));else i=t.pos;!function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,i)}()}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"tok":t=_[a];break;case"fastforward_post_space":r=_[a]}}}var i=t.pos_end;if((0,tr.__t__)(!(0,tr.__t__)(r))){var o=(0,tr.__call__)(tr.getattr,null,t,"post_space",null);if((0,tr.__t__)(o))i=(0,tr.__call__)(tr.__isub__,null,i,(0,tr.__call__)(tr.len,null,o))}!function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,i)}()}))},get peek_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"num_chars":t=_[a];break;case"parsing_state":r=_[a]}}}if((0,tr.__t__)((0,tr.__ge__)(e._pos,(0,tr.__call__)(tr.len,null,e.s)))){var i=(0,tr.__call__)(Ur,null);throw i.__cause__=null,i}return(0,tr.__getslice__)(e.s,e._pos,(0,tr.__add__)(e._pos,t),1)}))},get next_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"num_chars":t=_[a];break;case"parsing_state":r=_[a]}}}var i=function(){var n=e;return(0,tr.__call__)(n.peek_chars,n,t,r)}();return e._pos=(0,tr.__call__)(tr.__iadd__,null,e._pos,t),(0,tr.__t__)((0,tr.__gt__)(e._pos,(0,tr.__call__)(tr.len,null,e.s)))&&(e._pos=(0,tr.__call__)(tr.len,null,e.s)),i}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._pos}))},get move_to_pos_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pos":t=n[_]}}}!function(){var r=e;(0,tr.__call__)(r._advance_to_pos,r,t)}()}))},get _advance_to_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pos":t=n[_]}}}e._pos=t}))},get skip_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,e.s,e._pos,t)}(),i=a[0],o=a[1],l=a[2];return function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,l)}(),(0,tr.tuple)([i,o,l])}))},get peek_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,e.s,e._pos,t)}()}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}try{return function(){var r=e;return(0,tr.__call__)(r.impl_peek_token,r,t)}()}catch(t){if((0,tr.isinstance)(t,qr)){var a=t;if((0,tr.__t__)(e.tolerant_parsing))return function(){var t=e;(0,tr.__call__)(t.move_to_pos_chars,t,a.recovery_token_at_pos)}(),a.recovery_token_placeholder;throw t.__cause__=null,t}throw t}}))},get impl_peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state":t=n[_]}}}var a=e.s,i=(0,tr.__call__)(tr.len,null,a),o=e._pos,l=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,a,o,t)}(),s=l[0],c=l[1],u=l[2];if((0,tr.__t__)((0,tr.__t__)(t.enable_double_newline_paragraphs)&&(0,tr.__ge__)(function(){var e=s;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var f=function(){var e=s;return(0,tr.__call__)(e.find,e,"\n")}(),d=(0,tr.__add__)(function(){var e=s;return(0,tr.__call__)(e.rfind,e,"\n")}(),1),h=(s=(0,tr.__getslice__)(s,0,f,1),(0,tr.__add__)(c,f)),p=(0,tr.__add__)(c,d);if((0,tr.__t__)(null!==t.latex_context)){try{var g=function(){var e=t.latex_context;return(0,tr.__call__)(e.get_specials_spec,e,(0,tr.__kwargtrans__)({specials_chars:"\n\n"}))}()}catch(m){if(!(0,tr.isinstance)(m,tr.KeyError))throw m;g=null}if((0,tr.__t__)((0,tr.__t__)(null!==g)&&(0,tr.__eq__)(g.specials_chars,"\n\n")))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"specials",arg:g,pos:h,pos_end:p,pre_space:s}))}()}var v=(0,tr.__getslice__)(a,h,p,1);return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"char",arg:v,pos:h,pos_end:p,pre_space:s}))}()}o=u;if((0,tr.__t__)((0,tr.__ge__)(o,i))){var m=(0,tr.__call__)(Ur,null,(0,tr.__kwargtrans__)({final_space:s}));throw m.__cause__=null,m}var y=(0,tr.__getitem__)(a,o);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(y,t._math_delims_info_startchars))&&t.enable_math)){var w=function(){var r=e;return(0,tr.__call__)(r.impl_maybe_read_math_mode_delimiter,r,a,o,t,s)}();if((0,tr.__t__)(null!==w))return w}if((0,tr.__t__)((0,tr.__eq__)(y,t.macro_escape_char))){if((0,tr.__t__)(t.enable_environments)){if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,"begin",(0,tr.__add__)(o,1))}()))var b="begin";else if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,"end",(0,tr.__add__)(o,1))}()))b="end";else b=null;if((0,tr.__t__)(b)){var k=(0,tr.__add__)((0,tr.__add__)(o,1),(0,tr.__call__)(tr.len,null,b));if((0,tr.__t__)((0,tr.__t__)((0,tr.__ge__)(k,(0,tr.__call__)(tr.len,null,a)))||!(0,tr.__in__)((0,tr.__getitem__)(a,k),t.macro_alpha_chars)))return function(){var r=e;return(0,tr.__call__)(r.impl_read_environment,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,beginend:b,pre_space:s}))}()}}if((0,tr.__t__)(t.enable_macros))return function(){var r=e;return(0,tr.__call__)(r.impl_read_macro,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,pre_space:s}))}()}if((0,tr.__t__)((0,tr.__t__)(t.enable_comments)&&(0,tr.__t__)((0,tr.__eq__)(y,(0,tr.__getitem__)(t.comment_start,0)))&&function(){var e=a;return(0,tr.__call__)(e.startswith,e,t.comment_start,o)}()))return function(){var r=e;return(0,tr.__call__)(r.impl_read_comment,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,pre_space:s}))}();if((0,tr.__t__)(t.enable_groups)){if((0,tr.__t__)((0,tr.__in__)(y,t._latex_group_delimchars_by_open)))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"brace_open",arg:y,pos:o,pos_end:(0,tr.__add__)(o,1),pre_space:s}))}();if((0,tr.__t__)((0,tr.__in__)(y,t._latex_group_delimchars_close)))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"brace_close",arg:y,pos:o,pos_end:(0,tr.__add__)(o,1),pre_space:s}))}()}if((0,tr.__t__)((0,tr.__t__)(null!==t.latex_context)&&t.enable_specials)){g=function(){var e=t.latex_context;return(0,tr.__call__)(e.test_for_specials,e,a,o,(0,tr.__kwargtrans__)({parsing_state:t}))}();if((0,tr.__t__)(null!==g))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"specials",arg:g,pos:o,pos_end:(0,tr.__add__)(o,(0,tr.__call__)(tr.len,null,g.specials_chars)),pre_space:s}))}()}return function(){var r=e;return(0,tr.__call__)(r.impl_char_token,r,y,o,(0,tr.__add__)(o,1),t,s)}()}))},get impl_peek_space_chars(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":n=a[i]}}}for(var o=r,l="";(0,tr.__t__)(!0)&&!(0,tr.__t__)((0,tr.__ge__)(o,(0,tr.__call__)(tr.len,null,t)));){var s=(0,tr.__getitem__)(t,o);if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=s;return(0,tr.__call__)(e.isspace,e)}())))break;l=(0,tr.__call__)(tr.__iadd__,null,l,s),o=(0,tr.__call__)(tr.__iadd__,null,o,1)}return(0,tr.tuple)([l,r,o])}))},get impl_char_token(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"c":t=o[l];break;case"pos":r=o[l];break;case"pos_end":n=o[l];break;case"parsing_state":_=o[l];break;case"pre_space":a=o[l]}}}if((0,tr.__t__)((0,tr.__in__)(t,_.forbidden_characters))){var s=(0,tr.__call__)(qr,null,(0,tr.__kwargtrans__)({s:e.s,pos:r,msg:function(){var e="Character is forbidden here: ‘{}’ ({:#x})";return(0,tr.__call__)(e.format,e,t,(0,tr.__call__)(tr.ord,null,t))}(),error_type_info:(0,tr.dict)({what:"token_forbidden_character",forbidden_character:t}),recovery_token_placeholder:function(){var _=e;return(0,tr.__call__)(_.make_token,_,(0,tr.__kwargtrans__)({tok:"char",arg:t,pos:r,pos_end:n,pre_space:a}))}(),recovery_token_at_pos:n}));throw s.__cause__=null,s}return function(){var _=e;return(0,tr.__call__)(_.make_token,_,(0,tr.__kwargtrans__)({tok:"char",arg:t,pos:r,pos_end:n,pre_space:a}))}()}))},get impl_maybe_read_math_mode_delimiter(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":n=i[o];break;case"pre_space":_=i[o]}}}if((0,tr.__t__)(n.in_math_mode)){var l=n._math_expecting_close_delim_info;if((0,tr.__t__)(null!==l)){var s=(0,tr.__getitem__)(l,"close_delim"),c=(0,tr.__getitem__)(l,"tok");if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,s,r)}()))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:c,arg:s,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,s)),pre_space:_}))}()}}for(var u=n._math_all_delims_by_len,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),h=d[0],p=d[1];if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,h,r)}()))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:p,arg:h,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,h)),pre_space:_}))}()}return null}))},get impl_read_macro(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":n=i[o];break;case"pre_space":_=i[o]}}}if((0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)(t,r),n.macro_escape_char)))throw(l=(0,tr.__call__)(tr.ValueError,null,"Internal error, expected '\\' in impl_read_macro()")).__cause__=null,l;if((0,tr.__t__)((0,tr.__ge__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,t)))){var l=(0,tr.__call__)(qr,null,(0,tr.__kwargtrans__)({s:t,pos:(0,tr.__add__)(r,1),msg:function(){var e="Expected macro name after ‘{}’ escape character";return(0,tr.__call__)(e.format,e,n.macro_escape_char)}(),error_type_info:(0,tr.dict)({what:"token_end_of_stream_immediately_after_escape_character"}),recovery_token_placeholder:function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"char",arg:"",pos:r,pos_end:r,pre_space:_}))}(),recovery_token_at_pos:(0,tr.__call__)(tr.len,null,t)}));throw l.__cause__=null,l}var s=(0,tr.__getitem__)(t,(0,tr.__add__)(r,1)),c=s,u=(0,tr.__in__)(s,n.macro_alpha_chars),f=(0,tr.__add__)(r,2);if((0,tr.__t__)(u))for(;(0,tr.__t__)((0,tr.__t__)((0,tr.__lt__)(f,(0,tr.__call__)(tr.len,null,t)))&&(0,tr.__in__)((0,tr.__getitem__)(t,f),n.macro_alpha_chars));)c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getitem__)(t,f)),f=(0,tr.__call__)(tr.__iadd__,null,f,1);var d="";if((0,tr.__t__)(u)){var h=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,t,f,n)}(),p=(d=h[0],h[1]),g=h[2];if((0,tr.__t__)((0,tr.__ge__)(function(){var e=d;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var v=function(){var e=d;return(0,tr.__call__)(e.find,e,"\n")}();g=(0,tr.__add__)(p,v),d=(0,tr.__getslice__)(d,0,v,1)}f=g}return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"macro",arg:c,pos:r,pos_end:f,pre_space:_,post_space:d}))}()}))},rx_environment_name:function(){var e=q_;return(0,tr.__call__)(e.compile,e,"\\s*\\{(?P<environmentname>[A-Za-z0-9*._ :/!^()\\[\\]-]+)\\}")}(),get parse_latex_environment_name(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"pos":t=a[i];break;case"beginend":r=a[i];break;case"pos_envname":n=a[i]}}}var o=function(){var t=e.rx_environment_name;return(0,tr.__call__)(t.match,t,(0,tr.__getslice__)(e.s,n,null,1))}();if((0,tr.__t__)(null===o))return(0,tr.tuple)([null,null]);var l=(0,tr.__add__)(n,function(){var e=o;return(0,tr.__call__)(e.end,e)}());return(0,tr.tuple)([function(){var e=o;return(0,tr.__call__)(e.group,e,"environmentname")}(),l])}))},get impl_read_environment(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"s":t=o[l];break;case"pos":r=o[l];break;case"parsing_state":n=o[l];break;case"beginend":_=o[l];break;case"pre_space":a=o[l]}}}if((0,tr.__t__)((0,tr.__ne__)((0,tr.__getslice__)(t,r,(0,tr.__add__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,_)),1),(0,tr.__add__)(n.macro_escape_char,_)))){var s=(0,tr.__call__)(tr.ValueError,null,function(){var e="Internal error, expected ‘{}{}’ in read_environment()";return(0,tr.__call__)(e.format,e,n.macro_escape_char,_)}());throw s.__cause__=null,s}var c=(0,tr.__add__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,_)),u=function(){var t=e;return(0,tr.__call__)(t.parse_latex_environment_name,t,r,_,c)}(),f=u[0],d=u[1];if((0,tr.__t__)(null===f)){var h=(0,tr.__add__)(n.macro_escape_char,_);s=(0,tr.__call__)(qr,null,(0,tr.__kwargtrans__)({s:t,msg:function(){var e="Bad ‘\\{}’ call: expected {{environmentname}}";return(0,tr.__call__)(e.format,e,_)}(),pos:r,error_type_info:(0,tr.dict)({what:"token_error_parse_beginend_environment_name",beginend:_,macro_beginend:h}),recovery_token_placeholder:(0,tr.__call__)(Dn,null,(0,tr.__kwargtrans__)({tok:"char",arg:h,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,h)),pre_space:a})),recovery_token_at_pos:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,h))}));throw s.__cause__=null,s}var p=function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:(0,tr.__add__)(_,"_environment"),arg:f,pos:r,pos_end:d,pre_space:a}))}();return p}))},get impl_read_comment(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":n=i[o];break;case"pre_space":_=i[o]}}}if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,n.comment_start,r)}()))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var e="Internal error, expected comment start ‘{}’ in read_comment()";return(0,tr.__call__)(e.format,e,n.comment_start)}());throw l.__cause__=null,l}var s=(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,n.comment_start)),c=function(){var e=t;return(0,tr.__call__)(e.find,e,"\n",s)}();if((0,tr.__t__)((0,tr.__eq__)(c,(0,tr.__neg__)(1))))var u=(0,tr.__call__)(tr.len,null,t),f=(0,tr.__call__)(tr.len,null,t),d="";else{var h=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,t,c,n)}(),p=(d=h[0],h[1]),g=h[2];if((0,tr.__t__)((0,tr.__ge__)(function(){var e=d;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var v=function(){var e=d;return(0,tr.__call__)(e.find,e,"\n")}();g=(0,tr.__add__)(p,v),d=(0,tr.__getslice__)(d,0,v,1)}u=c,f=g}return function(){var n=e;return(0,tr.__call__)(n.make_token,n,(0,tr.__kwargtrans__)({tok:"comment",arg:(0,tr.__getslice__)(t,s,u,1),pos:r,pos_end:f,pre_space:_,post_space:d}))}()}))}})),G_=(tr=a("hoVWB"),{}),W_={};(0,tr.__nest__)(W_,"",ur),(0,tr.__nest__)(G_,"",dr);var $_="pylatexenc.latexnodes._parsingstate",Y_=function(){var e=G_;return(0,tr.__call__)(e.getLogger,e,$_)}(),H_=(0,tr.__add__)((0,tr.__call__)("".join,"",function(){for(var e,t=[],r=0;r<26;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)((0,tr.__call__)(tr.ord,null,"a"),r)));return t}()),(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=0;r<26;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)((0,tr.__call__)(tr.ord,null,"A"),r)));return t}())),X_=W_.fn_unique_object_id,Z_=(0,tr.__class__)("ParsingState",[tr.object],{__module__:$_,_fields:(0,tr.tuple)(["s","latex_context","in_math_mode","math_mode_delimiter","latex_group_delimiters","latex_inline_math_delimiters","latex_display_math_delimiters","enable_double_newline_paragraphs","enable_macros","enable_environments","enable_comments","enable_groups","enable_specials","enable_math","macro_alpha_chars","macro_escape_char","comment_start","forbidden_characters"]),get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Z_,"__init__"),null,e),e._parent_parsing_state_info=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"_parent_parsing_state_info",(0,tr.tuple)([null,(0,tr.dict)({})]))}(),function(){var r=e;(0,tr.__call__)(r.set_fields,r,(0,tr.__kwargtrans__)(t))}(),function(){var t=e;(0,tr.__call__)(t.finalize_state,t)}()}))},get set_fields(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o,l,s,c,u,f,d,h,p,g,v,m){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=!0;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=!0;if(void 0===c||null!=c&&c.hasOwnProperty("__kwargtrans__"))c=!0;if(void 0===u||null!=u&&u.hasOwnProperty("__kwargtrans__"))u=!0;if(void 0===f||null!=f&&f.hasOwnProperty("__kwargtrans__"))f=!0;if(void 0===d||null!=d&&d.hasOwnProperty("__kwargtrans__"))d=!0;if(void 0===h||null!=h&&h.hasOwnProperty("__kwargtrans__"))h=!0;if(void 0===p||null!=p&&p.hasOwnProperty("__kwargtrans__"))p=H_;if(void 0===g||null!=g&&g.hasOwnProperty("__kwargtrans__"))g="\\";if(void 0===v||null!=v&&v.hasOwnProperty("__kwargtrans__"))v="%";if(void 0===m||null!=m&&m.hasOwnProperty("__kwargtrans__"))m="";if(arguments.length){var y=arguments.length-1;if(arguments[y]&&arguments[y].hasOwnProperty("__kwargtrans__")){var w=arguments[y--];for(var b in w)switch(b){case"self":e=w[b];break;case"s":t=w[b];break;case"latex_context":r=w[b];break;case"in_math_mode":n=w[b];break;case"math_mode_delimiter":_=w[b];break;case"latex_group_delimiters":a=w[b];break;case"latex_inline_math_delimiters":i=w[b];break;case"latex_display_math_delimiters":o=w[b];break;case"enable_double_newline_paragraphs":l=w[b];break;case"enable_macros":s=w[b];break;case"enable_environments":c=w[b];break;case"enable_comments":u=w[b];break;case"enable_groups":f=w[b];break;case"enable_specials":d=w[b];break;case"enable_math":h=w[b];break;case"macro_alpha_chars":p=w[b];break;case"macro_escape_char":g=w[b];break;case"comment_start":v=w[b];break;case"forbidden_characters":m=w[b]}}}e.s=t,e.latex_context=r,e.in_math_mode=n,e.math_mode_delimiter=_,(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.in_math_mode))&&e.math_mode_delimiter)&&(!function(){var t=Y_;(0,tr.__call__)(t.warning,t,"ParsingState: You set math_mode_delimiter=%r but in_math_mode is False",e.math_mode_delimiter)}(),e.math_mode_delimiter=null),e.latex_group_delimiters=(0,tr.__t__)(null!==a)?a:[(0,tr.tuple)(["{","}"])],e.latex_inline_math_delimiters=(0,tr.__t__)(null!==i)?i:[(0,tr.tuple)(["$","$"]),(0,tr.tuple)(["\\(","\\)"])],e.latex_display_math_delimiters=(0,tr.__t__)(null!==o)?o:[(0,tr.tuple)(["$$","$$"]),(0,tr.tuple)(["\\[","\\]"])],e.enable_double_newline_paragraphs=l,e.enable_macros=s,e.enable_environments=c,e.enable_comments=u,e.enable_groups=f,e.enable_specials=d,e.enable_math=h,e.macro_alpha_chars=p,e.macro_escape_char=g,e.comment_start=v,e.forbidden_characters=m}))},get _finalize_state_latex_group_delimiters_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parent":t=_[a];break;case"kwargs":r=_[a]}}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&!(0,tr.__in__)("latex_group_delimiters",r)))return e._latex_group_delimchars_by_open=t._latex_group_delimchars_by_open,void(e._latex_group_delimchars_close=t._latex_group_delimchars_close);var i=(0,tr.__call__)(tr.zip,null,...e.latex_group_delimiters),o=(i[0],i[1]);e._latex_group_delimchars_by_open=(0,tr.__call__)(tr.dict,null,e.latex_group_delimiters),e._latex_group_delimchars_close=(0,tr.__call__)(tr.set,null,o)}))},get _finalize_state_latex_math_delim_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parent":t=_[a];break;case"kwargs":r=_[a]}}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(!(0,tr.__in__)("latex_inline_math_delimiters",r))&&!(0,tr.__in__)("latex_display_math_delimiters",r)))return e._math_delims_info_startchars=t._math_delims_info_startchars,e._math_all_delims_by_len=t._math_all_delims_by_len,e._math_delims_info_by_open=t._math_delims_info_by_open,void(e._math_delims_close=t._math_delims_close);e._math_delims_info_startchars=(0,tr.__call__)("".join,"",function(){for(var t,r=[],n=(0,tr.__add__)(e.latex_inline_math_delimiters,e.latex_display_math_delimiters),_=0;_<(0,tr.len)(n);_++)for(var a=(0,tr.__getitem__)(n,_),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__getslice__)(o,0,1,1))}return r}()),e._math_all_delims_by_len=(0,tr.__call__)(tr.sorted,null,function(){for(var t,r=[],n=(0,tr.tuple)([(0,tr.tuple)([e.latex_inline_math_delimiters,"mathmode_inline"]),(0,tr.tuple)([e.latex_display_math_delimiters,"mathmode_display"])]),_=0;_<(0,tr.len)(n);_++)for(var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1],l=(0,tr.__call__)(tr.set,null,function(){for(var e,t=[],r=i,n=0;n<(0,tr.len)(r);n++)for(var _=(0,tr.__getitem__)(r,n),a=0;a<(0,tr.len)(_);a++){var o=(0,tr.__getitem__)(_,a);e=void 0,e=t,(0,tr.__call__)(e.append,e,o)}return t}()),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([c,o]))}return r}(),(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e,0))},reverse:!0})),e._math_delims_info_by_open=(0,tr.__call__)(tr.dict,null,(0,tr.__add__)(function(){for(var t,r=[],n=e.latex_inline_math_delimiters,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([i,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({close_delim:o,tok:"mathmode_inline"}))]))}return r}(),function(){for(var t,r=[],n=e.latex_display_math_delimiters,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([i,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({close_delim:o,tok:"mathmode_display"}))]))}return r}())),e._math_delims_close=(0,tr.__call__)(tr.set,null,function(){for(var t,r=[],n=(t=e._math_delims_info_by_open,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=(a[0],a[1]);!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(i,"close_delim"))}()}return r}())}))},get _finalize_state_inmathmode_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parent":t=_[a];break;case"kwargs":r=_[a]}}}(0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(!(0,tr.__in__)("in_math_mode",r))&&!(0,tr.__in__)("math_mode_delimiter",r))?e._math_expecting_close_delim_info=t._math_expecting_close_delim_info:(0,tr.__t__)(!(0,tr.__t__)(e.in_math_mode))?e._math_expecting_close_delim_info=null:(0,tr.__t__)((0,tr.__in__)(e.math_mode_delimiter,e._math_delims_info_by_open))?e._math_expecting_close_delim_info=(0,tr.__getitem__)(e._math_delims_info_by_open,e.math_mode_delimiter):e._math_expecting_close_delim_info=null}))},get finalize_state(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e._parent_parsing_state_info,a=_[0],i=_[1];!function(){var t=e;(0,tr.__call__)(t._finalize_state_latex_group_delimiters_info,t,a,i)}(),function(){var t=e;(0,tr.__call__)(t._finalize_state_latex_math_delim_info,t,a,i)}(),function(){var t=e;(0,tr.__call__)(t._finalize_state_inmathmode_info,t,a,i)}()}))},get sub_context(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}var a=function(){var t=e;return(0,tr.__call__)(t.get_fields,t)}(),i=function(){for(var e,r=[],n=(e=t,(0,tr.__call__)(e.py_items,e)),_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(K_,null,l,(0,tr.__getitem__)(a,o))))&&function(){var e=r;(0,tr.__call__)(e.append,e,[o,l])}()}return(0,tr.dict)(r)}();!function(){var e=a;(0,tr.__call__)(e.py_update,e,i)}();var o=function(){var t=e;return(0,tr.__call__)(t.__class__,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_parent_parsing_state_info:(0,tr.tuple)([e,i])},a)))}();return o}))},get get_fields(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([a,(0,tr.__call__)(tr.getattr,null,e,a)]))}return r}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.__class__.__name__,a=function(){var t="{}<{:#x}>";return(0,tr.__call__)(t.format,t,_,(0,tr.__call__)(X_,null,e))}(),i=e._parent_parsing_state_info,o=i[0],l=i[1];return(0,tr.__t__)(!(0,tr.__t__)(o))?a:(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(a,function(){var e="(<{:#x}> {} ";return(0,tr.__call__)(e.format,e,(0,tr.__call__)(X_,null,o),"→")}()),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=(e=l,(0,tr.__call__)(e.py_items,e)),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),a=_[0],i=_[1];(0,tr.__t__)(!(0,tr.__in__)(a,(0,tr.tuple)(["s"])))&&function(){var e,r=t;(0,tr.__call__)(r.append,r,(e="{}={!r}",(0,tr.__call__)(e.format,e,a,i)))}()}return t}())),")")}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r,n=[],_=(t=e,r=(0,tr.__call__)(t.get_fields,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__in__)(o,(0,tr.tuple)(["latex_context","s"])))&&function(){var e=n;(0,tr.__call__)(e.append,e,[o,l])}()}return(0,tr.dict)(n)}()}))}}),K_=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"a":e=n[_];break;case"b":t=n[_]}}}return(0,tr.__t__)((0,tr.__t__)(null===e)&&null===t)||(0,tr.__eq__)(e,t)},J_=(tr=a("hoVWB"),{});(0,tr.__nest__)(J_,"",dr);var Q_="pylatexenc.latexnodes._nodescollector",ea=function(){var e=J_;return(0,tr.__call__)(e.getLogger,e,Q_)}(),ta=(0,tr.__class__)("LatexNodesCollector",[tr.object],{__module__:Q_,ReachedEndOfStream:(0,tr.__class__)("ReachedEndOfStream",[tr.Exception],{__module__:Q_}),ReachedStoppingCondition:(0,tr.__class__)("ReachedStoppingCondition",[tr.Exception],{__module__:Q_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"stop_data":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ta.ReachedStoppingCondition,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.stop_data=t}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!0;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"latex_walker":t=s[c];break;case"token_reader":r=s[c];break;case"parsing_state":n=s[c];break;case"stop_token_condition":_=s[c];break;case"stop_nodelist_condition":a=s[c];break;case"make_child_parsing_state":i=s[c];break;case"include_stop_token_pre_space_chars":o=s[c]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ta,"__init__"),null,e),e.latex_walker=t,e.token_reader=r,e.stop_token_condition=_,e.stop_nodelist_condition=a,e.include_stop_token_pre_space_chars=o,e._stop_token_condition_met=!1,e._stop_token_condition_met_token=null,e._stop_nodelist_condition_met=!1,e._stop_condition_stop_data=null,e._reached_end_of_stream=!1,e.parsing_state=n,e.start_parsing_state=n,e._nodelist=[],e._pending_chars_pos=null,e._pending_chars="",e._finalized=!1,e._make_child_parsing_state_fn=i}))},get get_final_nodelist(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(!(0,tr.__t__)(e._finalized))){var _=(0,tr.__call__)(RuntimeError,null,"Call to get_final_nodelist() before finalize()");throw _.__cause__=null,_}return function(){var t=e.latex_walker;return(0,tr.__call__)(t.make_nodelist,t,(0,tr.__kwargtrans__)({nodelist:e._nodelist,parsing_state:e.start_parsing_state}))}()}))},get get_parser_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(!(0,tr.__t__)(e._finalized))){var _=(0,tr.__call__)(RuntimeError,null,"Call to get_parser_parsing_state_delta() before finalize()");throw _.__cause__=null,_}return(0,tr.__t__)(e.start_parsing_state===e.parsing_state)?null:(0,tr.__call__)(On,null,(0,tr.__kwargtrans__)({set_parsing_state:e.parsing_state}))}))},get pos_start(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}try{var _=(0,tr.__call__)(tr.py_next,null,function(){for(var t,r=[],n=e._nodelist,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)(null!==a)&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a.pos))}return(0,tr.py_iter)(r)}())}catch(e){if(!(0,tr.isinstance)(e,tr.StopIteration))throw e;_=null}return(0,tr.__t__)(null!==_)?_:e._pending_chars_pos}))},get pos_end(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}try{var _=(0,tr.__call__)(tr.py_next,null,function(){for(var t,r=[],n=(0,tr.__call__)(tr.py_reversed,null,e._nodelist),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)(null!==a)&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a))}return(0,tr.py_iter)(r)}())}catch(e){if(!(0,tr.isinstance)(e,tr.StopIteration))throw e;_=null}return(0,tr.__t__)(null===_)?null:_.pos_end}))},get stop_token_condition_met(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._stop_token_condition_met}))},get stop_token_condition_met_token(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._stop_token_condition_met_token}))},get stop_nodelist_condition_met(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._stop_nodelist_condition_met}))},get stop_condition_stop_data(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._stop_condition_stop_data}))},get reached_end_of_stream(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._reached_end_of_stream}))},get is_finalized(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._finalized}))},get finalize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if(!(0,tr.__t__)(e._finalized)){var _=function(){var t=e;return(0,tr.__call__)(t.flush_pending_chars,t)}();if(e._finalized=!0,(0,tr.__t__)(null!==_)){var a=_;throw a.__cause__=null,a}}}))},get push_pending_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"chars":t=_[a];break;case"pos":r=_[a]}}}e._pending_chars=(0,tr.__call__)(tr.__iadd__,null,e._pending_chars,t),(0,tr.__t__)(null===e._pending_chars_pos)&&(e._pending_chars_pos=r)}))},get flush_pending_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(!(0,tr.__t__)(e._pending_chars)))return null;var _=(0,tr.tuple)([e._pending_chars_pos,e._pending_chars]),a=_[0],i=_[1];e._pending_chars="",e._pending_chars_pos=null;var o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.make_node,t,Kr,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,chars:i,pos:a,pos_end:(0,tr.__add__)(a,(0,tr.__call__)(tr.len,null,i))}))}();return function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,o)}()}))},get push_to_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}if((0,tr.__t__)(e._finalized)){var a=(0,tr.__call__)(RuntimeError,null,"You already called finalize()");throw a.__cause__=null,a}!function(){var r=e._nodelist;(0,tr.__call__)(r.append,r,t)}();var i=function(){var t=e;return(0,tr.__call__)(t._check_nodelist_stop_condition,t)}();return(0,tr.__t__)(null!==i)?i:null}))},get update_state_from_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"parsing_state_delta":t=n[_]}}}if((0,tr.__t__)(null!==t)){e.parsing_state;e.parsing_state=function(){var r=t;return(0,tr.__call__)(r.get_updated_parsing_state,r,e.parsing_state,e.latex_walker)}()}}))},get _check_nodelist_stop_condition(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.stop_nodelist_condition;if((0,tr.__t__)(null!==_)){var a=(0,tr.__call__)(_,null,e._nodelist);if((0,tr.__t__)(a))return e._stop_nodelist_condition_met=!0,function(){var e=ta;return(0,tr.__call__)(e.ReachedStoppingCondition,e,(0,tr.__kwargtrans__)({stop_data:a}))}()}return null}))},get _check_token_stop_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}var a=e.stop_token_condition;if((0,tr.__t__)(null!==a)){var i=(0,tr.__call__)(a,null,t);if((0,tr.__t__)(i))return e._stop_token_condition_met=!0,e._stop_token_condition_met_token=t,function(){var e=ta;return(0,tr.__call__)(e.ReachedStoppingCondition,e,(0,tr.__kwargtrans__)({stop_data:i}))}()}return null}))},get process_tokens(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}try{for(;(0,tr.__t__)(!0);)!function(){var t=e;(0,tr.__call__)(t.process_one_token,t)}()}catch(t){if((0,tr.isinstance)(t,ta.ReachedStoppingCondition)){var _=t;return void(e._stop_condition_stop_data=_.stop_data)}if((0,tr.isinstance)(t,ta.ReachedEndOfStream)){_=t;return void(e._reached_end_of_stream=!0)}if((0,tr.isinstance)(t,Rr)){_=t;throw t.__cause__=null,t}throw t}finally{!function(){var t=e;(0,tr.__call__)(t.finalize,t)}()}}))},get process_one_token(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(e._finalized)){var _=(0,tr.__call__)(RuntimeError,null,"You already called finalize()");throw _.__cause__=null,_}var a=e.latex_walker,i=e.token_reader;try{var o=function(){var t=i;return(0,tr.__call__)(t.next_token,t,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state}))}()}catch(_){if(!(0,tr.isinstance)(_,Ur))throw _;var l=_,s=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"final_space"))?(0,tr.__call__)(tr.getattr,null,l,"final_space"):null;if(!(0,tr.__t__)(s)){var c=function(){var e=ta;return(0,tr.__call__)(e.ReachedEndOfStream,e)}();c.pos_end=function(){var e=i;return(0,tr.__call__)(e.cur_pos,e)}();var u=c;throw u.__cause__=null,u}var f=(0,tr.__add__)(function(){var e=i;return(0,tr.__call__)(e.cur_pos,e)}(),(0,tr.__call__)(tr.len,null,s));o=function(){var e=i;return(0,tr.__call__)(e.make_token,e,(0,tr.__kwargtrans__)({tok:"char",arg:"",pre_space:s,pos:f,pos_end:f}))}();!function(){var e=i;(0,tr.__call__)(e.move_past_token,e,o)}()}var d=function(){var t=e;return(0,tr.__call__)(t._check_token_stop_condition,t,o)}();if((0,tr.__t__)(null!==d)){if((0,tr.__t__)(e.include_stop_token_pre_space_chars)){!function(){var t=e;(0,tr.__call__)(t.push_pending_chars,t,(0,tr.__kwargtrans__)({chars:o.pre_space,pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space))}))}();var h=!1}else h=!0;!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:h}))}(),d.pos_end=o.pos_end;var p=d;throw p.__cause__=null,p}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"char")))!function(){var t=e;(0,tr.__call__)(t.push_pending_chars,t,(0,tr.__kwargtrans__)({chars:(0,tr.__add__)(o.pre_space,o.arg),pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space))}))}();else{if((0,tr.__t__)(e._pending_chars)){e._pending_chars=(0,tr.__call__)(tr.__iadd__,null,e._pending_chars,o.pre_space),o.pre_space="";d=function(){var t=e;return(0,tr.__call__)(t.flush_pending_chars,t)}();if((0,tr.__t__)(null!==d)){!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}(),d.pos_end=o.pos;var g=d;throw g.__cause__=null,g}}else if((0,tr.__t__)(o.pre_space)){var v=function(){var t=a;return(0,tr.__call__)(t.make_node,t,Kr,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,chars:o.pre_space,pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space)),pos_end:o.pos}))}();o.pre_space="";d=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,v)}();if((0,tr.__t__)(null!==d)){!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}(),d.pos_end=o.pos;var m=d;throw m.__cause__=null,m}}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"brace_close"))){var y=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected mismatching closing delimiter ‘{}’";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_closing_group_delimiter",delimiter:o.arg})}));throw y.__cause__=null,y}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"end_environment"))){var w=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected closing environment: ‘{}’";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_end_environment",environmentname:o.arg})}));throw w.__cause__=null,w}if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(o.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))&&!(0,tr.__in__)(o.arg,e.parsing_state._math_delims_info_by_open))){var b=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected closing math mode token ‘{}’";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_closing_math_delimiter",mathmode_type:o.tok,delimiter:o.arg})}));throw b.__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"comment")))!function(){var t=e;(0,tr.__call__)(t.parse_comment_node,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"brace_open")))!function(){var t=e;(0,tr.__call__)(t.parse_latex_group,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"macro")))!function(){var t=e;(0,tr.__call__)(t.parse_macro,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"begin_environment")))!function(){var t=e;(0,tr.__call__)(t.parse_environment,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"specials")))!function(){var t=e;(0,tr.__call__)(t.parse_specials,t,o)}();else{if(!(0,tr.__t__)((0,tr.__in__)(o.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))){var k=(0,tr.__call__)(Fr,null,function(){var e="Unknown token type: {}";return(0,tr.__call__)(e.format,e,o.tok)}(),(0,tr.__kwargtrans__)({pos:o.pos}));throw k.__cause__=null,k}!function(){var t=e;(0,tr.__call__)(t.parse_math,t,o)}()}}}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":n=a[i]}}}return(0,tr.__t__)(null!==e._make_child_parsing_state_fn)?function(){var _=e;return(0,tr.__call__)(_._make_child_parsing_state_fn,_,(0,tr.__kwargtrans__)({parsing_state:t,node_class:r,token:n}))}():e.parsing_state}))},get parse_comment_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}var a=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_node,r,Qr,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,comment:t.arg,comment_post_space:t.post_space,pos:t.pos,pos_end:t.pos_end}))}(),i=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,a)}();if((0,tr.__t__)(null!==i)){i.pos_end=t.pos_end;var o=i;throw o.__cause__=null,o}}))},get parse_latex_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}!function(){var r=e.token_reader;(0,tr.__call__)(r.move_to_token,r,t,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var a=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_latex_group_parser,r,(0,tr.__kwargtrans__)({delimiters:t.arg}))}(),i=function(){var r,n=e.latex_walker;return(0,tr.__call__)(n.parse_content,n,a,(0,tr.__kwargtrans__)({token_reader:e.token_reader,parsing_state:(r=e,(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,Jr,(0,tr.__kwargtrans__)({token:t})))}))}(),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var e=ea;(0,tr.__call__)(e.warning,e,"parsing_state_delta is ignored after parsing a LaTeX group: %r",l)}();var s=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,o)}();if((0,tr.__t__)(null!==s)){s.pos_end=o.pos_end;var c=s;throw c.__cause__=null,c}}))},get parse_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}var a=t.arg,i=null;if((0,tr.__t__)(null!==e.parsing_state.latex_context))i=function(){var t=e.parsing_state.latex_context;return(0,tr.__call__)(t.get_macro_spec,t,a)}();if((0,tr.__t__)(null===i)){var o=function(){var r,n=e.latex_walker;return(0,tr.__call__)(n.check_tolerant_parsing_ignore_error,n,(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:(r="Encountered unknown macro ‘\\{}’",(0,tr.__call__)(r.format,r,a)),pos:t.pos,error_type_info:(0,tr.dict)({what:"nodes_unknown_macro_name",macroname:a})})))}();if((0,tr.__t__)(null!==o)){var l=o;throw l.__cause__=null,l}i=null}var s=en,c=function(){var e="macro ‘\\{}’";return(0,tr.__call__)(e.format,e,a)}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,i,s,c)}()}))},get parse_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}var a=e.latex_walker,i=t.arg,o=function(){var t=e.parsing_state.latex_context;return(0,tr.__call__)(t.get_environment_spec,t,i)}();if((0,tr.__t__)(null===o)){var l=function(){var e,r=a;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:(e="Encountered unknown environment ‘{}{}{}’",(0,tr.__call__)(e.format,e,"{",i,"}")),pos:t.pos,error_type_info:(0,tr.dict)({what:"nodes_unknown_environment_name",environmentname:i})})))}();if((0,tr.__t__)(null!==l)){var s=l;throw s.__cause__=null,s}o=null}var c=tn,u=function(){var e="environment ‘{}{}{}’";return(0,tr.__call__)(e.format,e,"{",i,"}")}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,o,c,u)}()}))},get parse_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}var a=t.arg,i=rn,o=function(){var e="specials ‘{}’";return(0,tr.__call__)(e.format,e,(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,a,"specials_chars"))?(0,tr.__call__)(tr.getattr,null,a,"specials_chars"):"<unkonwn>")}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,a,i,o)}()}))},get parse_invocable_token_type(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tok":t=i[o];break;case"spec":r=i[o];break;case"node_class":n=i[o];break;case"what":_=i[o]}}}var l=e.latex_walker,s=e.token_reader;if((0,tr.__t__)(null!==r))var c=function(){var e=r;return(0,tr.__call__)(e.get_node_parser,e,t)}();else c=null;if((0,tr.__t__)(null===c)){var u=function(){var e,r=l;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:(e="No parser found for callable token {!r}",(0,tr.__call__)(e.format,e,t)),pos:t.pos})))}();if((0,tr.__t__)(null!==u))throw(p=u).__cause__=null,p;var f=null,d=null}else{var h=function(){var r,a=l;return(0,tr.__call__)(a.parse_content,a,c,s,(r=e,(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,n,t)),(0,tr.__kwargtrans__)({open_context:(0,tr.tuple)([_,t])}))}();f=h[0],d=h[1]}if(function(){var t=e;(0,tr.__call__)(t.update_state_from_parsing_state_delta,t,d)}(),(0,tr.__t__)(null===f))!function(){var e=ea;(0,tr.__call__)(e.warning,e,"Parser %r produced no node (None) for token %r",c,t)}();else{var p;u=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,f)}();if((0,tr.__t__)(null!==u))throw u.pos_end=f.pos_end,(p=u).__cause__=null,p}}))},get parse_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"tok":t=n[_]}}}!function(){var r=e.token_reader;(0,tr.__call__)(r.move_to_token,r,t,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var a=function(){var r=e;return(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,nn,t)}(),i=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_latex_math_parser,r,(0,tr.__kwargtrans__)({math_mode_delimiters:t.arg}))}(),o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.parse_content,t,i,(0,tr.__kwargtrans__)({token_reader:e.token_reader,parsing_state:a}))}(),l=o[0],s=o[1];if(function(){var t=e;(0,tr.__call__)(t.update_state_from_parsing_state_delta,t,s)}(),(0,tr.__t__)(null===l))!function(){var e=ea;(0,tr.__call__)(e.warning,e,"Math parser produced no node (None) for token %r",t)}();else{var c=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,l)}();if((0,tr.__t__)(null!==c)){c.pos_end=l.pos_end;var u=c;throw u.__cause__=null,u}}}))}}),ra={};(0,tr.__nest__)(ra,"",dr);var na="flm.flmdocument",_a=function(){var e=ra;return(0,tr.__call__)(e.getLogger,e,na)}(),aa=(0,tr.__class__)("FLMDocumentRenderContext",[br],{__module__:na,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"doc":t=i[o];break;case"fragment_renderer":r=i[o];break;case"feature_document_managers":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,aa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({doc:t,fragment_renderer:r},_))),e.feature_document_managers=n,e.feature_render_managers=function(){for(var t,r,n=[],_=e.feature_document_managers,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null!==l)&&null!==l.RenderManager)?(0,tr.tuple)([o,(t=l,(0,tr.__call__)(t.RenderManager,t,l,e))]):(0,tr.tuple)([o,null]))}return n}(),e.feature_render_managers_by_name=(0,tr.__call__)(tr.dict,null,e.feature_render_managers),e.is_first_pass=!0,e._delayed_render_nodes=(0,tr.dict)({}),e._delayed_render_content=(0,tr.dict)({}),e.data=(0,tr.dict)({})}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__in__)(t,e.feature_render_managers_by_name)}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__getitem__)(e.feature_render_managers_by_name,t)}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"fragment_renderer":r=_[a]}}}var i=t._flm_node_id;return(0,tr.__setitem__)(e._delayed_render_nodes,i,t),i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=t._flm_node_id;return(0,tr.__getitem__)(e._delayed_render_content,a)}))},get make_standalone_fragment(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"flm_text":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=e.doc.environment;return(0,tr.__call__)(n.make_fragment,n,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({standalone_mode:!0},r)))}()}))}}),ia=(0,tr.__class__)("FLMDocument",[tr.object],{__module__:na,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"render_callback":t=o[l];break;case"environment":r=o[l];break;case"enable_features":n=o[l];break;case"feature_document_options":_=o[l];break;case"metadata":a=o[l]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ia,"__init__"),null,e),e.environment=r,e.render_callback=t,e.metadata=a,e.features=function(){var t=e.environment;return(0,tr.__call__)(t.get_features_selection,t,n)}(),(0,tr.__t__)(null===_))_=(0,tr.dict)({});e.feature_document_options=(0,tr.__call__)(tr.dict,null,_),e.feature_document_managers=function(){for(var t,r,n=[],_=e.features,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);t=void 0,r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__t__)(null!==i.DocumentManager)?(0,tr.tuple)([i.feature_name,(t=i,(0,tr.__call__)(t.DocumentManager,t,i,e))]):(0,tr.tuple)([i.feature_name,null]))}return n}(),e.feature_document_managers_by_name=(0,tr.__call__)(tr.dict,null,e.feature_document_managers)}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=e.feature_document_managers,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];if((0,tr.__t__)(null!==l)){var s=function(){var t=e.feature_document_options;return(0,tr.__call__)(t.py_get,t,o,(0,tr.dict)({}))}();!function(){var e=l;(0,tr.__call__)(e.initialize,e,(0,tr.__kwargtrans__)(s))}()}}}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__in__)(t,e.feature_document_managers_by_name)}))},get feature_document_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__getitem__)(e.feature_document_managers_by_name,t)}))},get make_render_context(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"fragment_renderer":t=_[a];break;case"feature_render_options":r=_[a]}}}var i=(0,tr.__call__)(aa,null,e,t,e.feature_document_managers);if((0,tr.__t__)(null===r))r=(0,tr.dict)({});r=(0,tr.__call__)(tr.dict,null,r);for(var o=i.feature_render_managers,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];if((0,tr.__t__)(null!==u)){var f=function(){var e=r;return(0,tr.__call__)(e.py_get,e,c,(0,tr.__call__)(tr.dict,null))}();!function(){var e=u;(0,tr.__call__)(e.initialize,e,(0,tr.__kwargtrans__)(f))}()}}return i}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"fragment_renderer":t=_[a];break;case"feature_render_options":r=_[a]}}}var i=function(){var n=e;return(0,tr.__call__)(n.make_render_context,n,t,(0,tr.__kwargtrans__)({feature_render_options:r}))}();!function(){var e=t;(0,tr.__call__)(e.document_render_start,e,i)}();var o=function(){var t=e;return(0,tr.__call__)(t.render_callback,t,i)}();(0,tr.__t__)(null===o)&&function(){var e=_a;(0,tr.__call__)(e.warning,e,"The FLM document render callback function returned `None`! Did you forget a ‘return ...’ instruction?")}();for(var l=i.feature_render_managers,s=0;s<(0,tr.len)(l);s++){(g=(0,tr.__getitem__)(l,s))[0];var c=g[1];(0,tr.__t__)(null!==c)&&function(){var e=c;(0,tr.__call__)(e.process,e,o)}()}for(l=function(){var e=i._delayed_render_nodes;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var u=(g=(0,tr.__getitem__)(l,s))[0],f=g[1];try{(0,tr.__setitem__)(i._delayed_render_content,u,function(){var e=f.flm_specinfo;return(0,tr.__call__)(e.render,e,f,i)}())}catch(e){if((0,tr.isinstance)(e,Dr)){var d=e;throw function(){var e,t=d;(0,tr.__call__)(t.set_pos_or_add_open_context_from_node,t,f,(0,tr.__kwargtrans__)({what:"{} (delayed render)".format((e=f,(0,tr.__call__)(e.display_str,e)))}))}(),(0,tr.__t__)(f.latex_walker.what)&&function(){var e=d;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,f,(0,tr.__kwargtrans__)({what:f.latex_walker.what}))}(),(h=d).__cause__=null,h}if((0,tr.isinstance)(e,tr.ValueError)){var h;d=e;throw(h=(0,tr.__call__)(Dr,null,(0,tr.__call__)(tr.str,null,d),(0,tr.__kwargtrans__)({pos:f.pos}))).__cause__=null,h}throw e}}if((0,tr.__t__)(t.supports_delayed_render_markers)){var p=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("s"===_)e=n[_]}}return function(){var r=t;return(0,tr.__call__)(r.replace_delayed_markers_with_final_values,r,e,i._delayed_render_content)}()};if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,o,tr.dict)))o=function(){for(var e,t=[],r=(e=o,(0,tr.__call__)(e.py_items,e)),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),a=_[0],i=_[1];!function(){var e=t;(0,tr.__call__)(e.append,e,[a,(0,tr.__call__)(p,null,i)])}()}return(0,tr.dict)(t)}();else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,o,tr.list)))o=function(){for(var e,t=[],r=o,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(p,null,_))}return t}();else o=(0,tr.__call__)(p,null,o)}else{!function(){var e=i;(0,tr.__call__)(e.set_render_pass,e,"second-pass")}();o=function(){var t=e;return(0,tr.__call__)(t.render_callback,t,i)}()}for(l=i.feature_render_managers,s=0;s<(0,tr.len)(l);s++){var g;(g=(0,tr.__getitem__)(l,s))[0],c=g[1];(0,tr.__t__)(null!==c)&&function(){var e=c;(0,tr.__call__)(e.postprocess,e,o)}()}return function(){var e=t;(0,tr.__call__)(e.document_render_finish,e,i)}(),(0,tr.tuple)([o,i])}))}}),oa=(tr=a("hoVWB"),{});t(oa,"LatexDelimitedExpressionParserInfo",(()=>ba)),t(oa,"LatexOptionalSquareBracketsParser",(()=>Ra)),t(oa,"LatexDelimitedExpressionParserOpeningDelimiterNotFound",(()=>wa)),t(oa,"LatexDelimitedGroupParser",(()=>Pa)),t(oa,"LatexDelimitedGroupParserInfo",(()=>xa)),t(oa,"LatexTackOnInformationFieldMacrosParser",(()=>Ha)),t(oa,"LatexMathParser",(()=>Qa)),t(oa,"LatexSingleNodeParser",(()=>ga)),t(oa,"LatexExpressionParser",(()=>La)),t(oa,"LatexDelimitedVerbatimParser",(()=>ua)),t(oa,"LatexDelimitedExpressionParser",(()=>ka)),t(oa,"get_standard_argument_parser",(()=>Ua)),t(oa,"LatexOptionalCharsMarkerParser",(()=>Da)),t(oa,"LatexDelimitedMultiDelimGroupParser",(()=>Aa)),t(oa,"LatexCharsCommaSeparatedListParser",(()=>$a)),t(oa,"LatexDelimitedMultiDelimGroupParserInfo",(()=>Ea)),t(oa,"LatexGeneralNodesParser",(()=>pa)),t(oa,"LatexParserBase",(()=>la)),t(oa,"LatexStandardArgumentParser",(()=>Ga)),t(oa,"LatexVerbatimEnvironmentContentsParser",(()=>fa)),t(oa,"LatexVerbatimBaseParser",(()=>ca)),t(oa,"LatexCharsGroupParser",(()=>Wa)),a("hoVWB");tr=a("hoVWB");var la=(0,(tr=a("hoVWB")).__class__)("LatexParserBase",[tr.object],{__module__:"pylatexenc.latexnodes.parsers._base",get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,la,"__init__"),null,e)}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=(0,tr.__call__)(RuntimeError,null,"LatexParserBase subclasses must reimplement parse()");throw l.__cause__=null,l}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!0}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="<{}>";return(0,tr.__call__)(t.format,t,e.__class__.__name__)}()}))}}),sa="pylatexenc.latexnodes.parsers._verbatim",ca=(0,tr.__class__)("LatexVerbatimBaseParser",[la],{__module__:sa,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ca,"__init__"),null,e,(0,tr.__kwargtrans__)(t))}))},VerbatimInfo:(0,tr.__class__)("VerbatimInfo",[tr.object],{__module__:sa,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ca.VerbatimInfo,"__init__"),null,e),e.parsed_delimiters=(0,tr.tuple)([null,null])}))}}),get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":n=i[o];break;case"parsing_state":_=i[o]}}}return!!(0,tr.__t__)(r)}))},get error_end_of_stream(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"pos":t=i[o];break;case"recovery_nodes":r=i[o];break;case"latex_walker":n=i[o];break;case"verbatim_info":_=i[o]}}}var l=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:"End of stream reached while reading verbatim content",pos:t,recovery_nodes:r,error_type_info:(0,tr.dict)({what:"verbatim_unexpected_end_of_stream",verbatim_delimiters:_.parsed_delimiters})}));throw l.__cause__=null,l}))},get finalize_verbatim_string(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"verbatim_string":t=_[a];break;case"verbatim_info":r=_[a]}}}return r.pos_start=r.content_pos_start,r.pos_end=(0,tr.__add__)(r.content_pos_start,(0,tr.__call__)(tr.len,null,t)),t}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=function(){var e=ca;return(0,tr.__call__)(e.VerbatimInfo,e)}();return l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,n,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({verbatim_info:l},_)))}()}))},get read_verbatim_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"latex_walker":t=o[l];break;case"token_reader":r=o[l];break;case"parsing_state":n=o[l];break;case"verbatim_info":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s="",c=!1,u=!1;for(_.content_pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}();(0,tr.__t__)(!(0,tr.__t__)(c));){try{var f=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:n}))}()}catch(e){if(!(0,tr.isinstance)(e,Ur))throw e;f=null,u=!0}var d=function(){var t=e;return(0,tr.__call__)(t.new_char_check_stop_condition,t,f,s,_,n)}();if((0,tr.__t__)(d)){c=!0;(0,tr.__t__)((0,tr.__t__)(!0!==d)&&(0,tr.__t__)(null!==f)&&(0,tr.__getitem__)(d,"put_back_char"))&&function(){var e,t=r;(0,tr.__call__)(t.move_to_pos_chars,t,(0,tr.__sub__)((e=r,(0,tr.__call__)(e.cur_pos,e)),1))}()}else{if((0,tr.__t__)(null===f))break;s=(0,tr.__call__)(tr.__iadd__,null,s,f)}}s=function(){var t=e;return(0,tr.__call__)(t.finalize_verbatim_string,t,s,_)}();var h=_.pos_start,p=_.pos_end,g=function(){var e,r=t;return(0,tr.__call__)(r.make_node,r,Kr,(0,tr.__kwargtrans__)({chars:s,pos:h,pos_end:p,parsing_state:(e=n,(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({enable_double_newline_paragraphs:!1,enable_macros:!1,enable_environments:!1,enable_specials:!1,enable_comments:!1,enable_groups:!1,enable_math:!1})))}))}();return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&u)?function(){var r=e;return(0,tr.__call__)(r.error_end_of_stream,r,(0,tr.__kwargtrans__)({pos:p,recovery_nodes:g,latex_walker:t,verbatim_info:_}))}():(0,tr.tuple)([g,null])}))}}),ua=(0,tr.__class__)("LatexDelimitedVerbatimParser",[ca],{__module__:sa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"auto_delimiters":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ua,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.delimiters=t,(0,tr.__t__)(null!==r)?e.auto_delimiters=(0,tr.__call__)(tr.dict,null,r):e.auto_delimiters=(0,tr.dict)({"{":"}","[":"]","<":">","(":")"}),e.depth_counter=1,e.parsed_delimiters=null}))},get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":n=i[o];break;case"parsing_state":_=i[o]}}}if((0,tr.__t__)(null===t))return!1;if((0,tr.__t__)((0,tr.__eq__)(t,(0,tr.__getitem__)(n.parsed_delimiters,1)))){if(e.depth_counter=(0,tr.__call__)(tr.__isub__,null,e.depth_counter,1),(0,tr.__t__)((0,tr.__le__)(e.depth_counter,0)))return!0}else(0,tr.__t__)((0,tr.__eq__)(t,(0,tr.__getitem__)(n.parsed_delimiters,0)))&&(e.depth_counter=(0,tr.__call__)(tr.__iadd__,null,e.depth_counter,1));return!1}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=function(){var e=ca;return(0,tr.__call__)(e.VerbatimInfo,e)}();if(function(){var e=r;(0,tr.__call__)(e.skip_space_chars,e,n)}(),l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),(0,tr.__t__)(null===e.delimiters)){var s=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:n}))}(),c=function(){var t=e.auto_delimiters;return(0,tr.__call__)(t.py_get,t,s,s)}();l.parsed_delimiters=(0,tr.tuple)([s,c])}else{l.parsed_delimiters=e.delimiters;var u=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:n}))}();if((0,tr.__t__)((0,tr.__ne__)(u,(0,tr.__getitem__)(l.parsed_delimiters,0)))){var f=(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected opening delimiter ‘{}’ for verbatim content";return(0,tr.__call__)(e.format,e,(0,tr.__getitem__)(l.parsed_delimiters,0))}(),pos:pos,error_type_info:(0,tr.dict)({what:"verbatim_expected_opening_delimiter_not_found",expected_delimiters:l.parsed_delimiters})}));throw f.__cause__=null,f}}var d=function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,n,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({verbatim_info:l},_)))}(),h=d[0],p=(d[1],function(){var e,r=t;return(0,tr.__call__)(r.make_node,r,Jr,(0,tr.__kwargtrans__)({delimiters:l.parsed_delimiters,nodelist:(e=t,(0,tr.__call__)(e.make_nodelist,e,[h],(0,tr.__kwargtrans__)({parsing_state:n}))),pos:l.original_pos,pos_end:(0,tr.__add__)(h.pos_end,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.parsed_delimiters,1))),parsing_state:n}))}());return(0,tr.tuple)([p,null])}))}}),fa=(0,tr.__class__)("LatexVerbatimEnvironmentContentsParser",[ca],{__module__:sa,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="verbatim";var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"environment_name":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fa,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.environment_name=t}))},get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":n=i[o];break;case"parsing_state":_=i[o]}}}return!!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.endswith,e,n.end_environment_code)}())&&(0,tr.dict)({put_back_char:!0})}))},get finalize_verbatim_string(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"verbatim_string":t=_[a];break;case"verbatim_info":r=_[a]}}}var i=r.end_environment_code;(0,tr.assert)(function(){var e=t;return(0,tr.__call__)(e.endswith,e,i)}());t=(0,tr.__getslice__)(t,0,(0,tr.__neg__)((0,tr.__call__)(tr.len,null,i)),1);var o=r.original_pos;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"\n")}()))t=(0,tr.__getslice__)(t,1,null,1),o=(0,tr.__call__)(tr.__iadd__,null,o,1);return r.pos_start=o,r.pos_end=(0,tr.__add__)(o,(0,tr.__call__)(tr.len,null,t)),t}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=function(){var e=ca;return(0,tr.__call__)(e.VerbatimInfo,e)}();l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),l.end_environment_code=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(n.macro_escape_char,"end{"),e.environment_name),"}");var s=function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,n,l,(0,tr.__kwargtrans__)(_))}(),c=s[0],u=(s[1],function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[c],(0,tr.__kwargtrans__)({parsing_state:n}))}());return(0,tr.tuple)([u,null])}))}}),da=(tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),{});(0,tr.__nest__)(da,"",dr);var ha="pylatexenc.latexnodes.parsers._generalnodes",pa=(function(){var e=da;(0,tr.__call__)(e.getLogger,e,ha)}(),tr.str,(0,tr.__class__)("LatexGeneralNodesParser",[la],{__module__:ha,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o,l){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!0;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;var s=(0,tr.dict)();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"stop_token_condition":t=u[f];break;case"stop_nodelist_condition":r=u[f];break;case"require_stop_condition_met":n=u[f];break;case"stop_condition_message":_=u[f];break;case"make_child_parsing_state":a=u[f];break;case"handle_stop_condition_token":i=u[f];break;case"include_stop_token_pre_space_chars":o=u[f];break;case"handle_stop_data":l=u[f];break;default:s[f]=u[f]}delete s.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,pa,"__init__"),null,e,(0,tr.__kwargtrans__)(s)),e.stop_token_condition=t,e.stop_nodelist_condition=r,e.require_stop_condition_met=n,e.stop_condition_message=_,e.make_child_parsing_state=a,e.handle_stop_condition_token=i,e.handle_stop_data=l,e.include_stop_token_pre_space_chars=o}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":n=a[i]}}}return function(){var _=t;return(0,tr.__call__)(_.make_nodes_collector,_,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:n,stop_token_condition:e.stop_token_condition,stop_nodelist_condition:e.stop_nodelist_condition,make_child_parsing_state:e.make_child_parsing_state,include_stop_token_pre_space_chars:e.include_stop_token_pre_space_chars}))}()}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),s=function(){var _=e;return(0,tr.__call__)(_.make_nodes_collector,_,t,r,n)}();try{!function(){var e=s;(0,tr.__call__)(e.process_tokens,e)}()}catch(y){if((0,tr.isinstance)(y,Fr)){var c=y,u=function(){var e=s;return(0,tr.__call__)(e.get_final_nodelist,e)}();(0,tr.__t__)(null===u.pos)&&(u.pos=l),(0,tr.__t__)(null===u.pos_end)&&(u.pos_end=l);var f=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:c.msg,pos:c.pos,open_contexts:c.open_contexts,error_type_info:c.error_type_info,recovery_nodes:u,recovery_parsing_state_delta:function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}()}));throw f.__cause__=null,f}throw y}var d=function(){var e=s;return(0,tr.__call__)(e.get_final_nodelist,e)}();(0,tr.__t__)(null===d.pos)&&(d.pos=l),(0,tr.__t__)(null===d.pos_end)&&(d.pos_end=l);var h=function(){var e=s;return(0,tr.__call__)(e.stop_token_condition_met,e)}(),p=function(){var e=s;return(0,tr.__call__)(e.stop_nodelist_condition_met,e)}();if((0,tr.__t__)(!(0,tr.__t__)(e.require_stop_condition_met)))var g=!0;else{g=!1;if((0,tr.__t__)(null!==e.stop_token_condition)){if((0,tr.__t__)(h))g=!0}else if((0,tr.__t__)(null!==e.stop_nodelist_condition)){if((0,tr.__t__)(p))g=!0}else g=!0}if((0,tr.__t__)(!(0,tr.__t__)(g))){var v=e.stop_condition_message;if((0,tr.__t__)(null===v))v="End of stream encountered while parsing nodes without stop condition being met [reporting starting position]";var m=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:v,pos:function(){var e=s;return(0,tr.__call__)(e.pos_start,e)}(),recovery_nodes:d,recovery_parsing_state_delta:function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}(),error_type_info:(0,tr.dict)({what:"nodes_generalnodes_required_stop_condition_not_met",stop_condition_message:e.stop_condition_message})})),y=m;throw y.__cause__=null,y}if((0,tr.__t__)((0,tr.__t__)(h)&&null!==e.handle_stop_condition_token)){var w=function(){var e=s;return(0,tr.__call__)(e.stop_token_condition_met_token,e)}();(0,tr.__t__)(null!==w)&&function(){var _=e;(0,tr.__call__)(_.handle_stop_condition_token,_,w,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,parsing_state:n}))}()}var b=function(){var e=s;return(0,tr.__call__)(e.stop_condition_stop_data,e)}();(0,tr.__t__)((0,tr.__t__)(null!==b)&&null!==e.handle_stop_data)&&function(){var _=e;(0,tr.__call__)(_.handle_stop_data,_,b,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,parsing_state:n}))}();var k=d,x=function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}();return(0,tr.tuple)([k,x])}))}})),ga=(0,tr.__class__)("LatexSingleNodeParser",[pa],{__module__:ha,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"stop_on_comment":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ga,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({stop_nodelist_condition:e._stop_nodelist_condition,require_stop_condition_met:!1},r))),e.stop_on_comment=t}))},get _stop_nodelist_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodelist":t=n[_]}}}var a=t;if((0,tr.__t__)(!(0,tr.__t__)(e.stop_on_comment)))a=function(){for(var e,t=[],r=a,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);(0,tr.__t__)(!(0,tr.__t__)((e=void 0,e=_,(0,tr.__call__)(e.isNodeType,e,Qr))))&&function(){var e=t;(0,tr.__call__)(e.append,e,_)}()}return t}();return!!(0,tr.__t__)((0,tr.__ge__)((0,tr.__call__)(tr.len,null,a),1))}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!1}))}}),va={};(0,tr.__nest__)(va,"",dr);var ma="pylatexenc.latexnodes.parsers._delimited",ya=(function(){var e=va;(0,tr.__call__)(e.getLogger,e,ma)}(),tr.str),wa=(0,tr.__class__)("LatexDelimitedExpressionParserOpeningDelimiterNotFound",[tr.Exception],{__module__:ma,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"first_tokens":t=a[i];break;case"msg":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wa,"__init__"),null,e,(0,tr.__kwargtrans__)(n)),e.first_tokens=t,e.msg=r}))}}),ba=(0,tr.__class__)("LatexDelimitedExpressionParserInfo",[tr.object],{__module__:ma,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"cls":e=i[o];break;case"parsing_state":t=i[o];break;case"delimiters":r=i[o];break;case"delimited_expression_parser":n=i[o];break;case"latex_walker":_=i[o]}}}return t}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"cls":e=i[o];break;case"delimiters":t=i[o];break;case"group_parsing_state":r=i[o];break;case"delimited_expression_parser":n=i[o];break;case"latex_walker":_=i[o]}}}return[]}))},get parse_initial(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"allow_pre_space":r=l[s];break;case"latex_walker":n=l[s];break;case"token_reader":_=l[s];break;case"group_parsing_state":a=l[s];break;case"delimited_expression_parser":i=l[s]}}}var c=function(){var e=_;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:a}))}(),u=!0;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r))&&c.pre_space))u=!1;else if((0,tr.__t__)(!(0,tr.__t__)(function(){var r=e;return(0,tr.__call__)(r.is_opening_delimiter,r,(0,tr.__kwargtrans__)({delimiters:t,first_token:c,group_parsing_state:a,delimited_expression_parser:i,latex_walker:n}))}())))u=!1;if((0,tr.__t__)(!(0,tr.__t__)(u))){var f=function(){var r=e;return(0,tr.__call__)(r.get_acceptable_open_delimiter_list,r,(0,tr.__kwargtrans__)({delimiters:t,group_parsing_state:a,delimited_expression_parser:i,latex_walker:n}))}();if((0,tr.__t__)(!(0,tr.__t__)(f)))var d="??";else d=(0,tr.__call__)(", ".join,", ",function(){for(var e,t,r=[],n=f,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,t=void 0,t=r,(0,tr.__call__)(t.append,t,(e="‘{}’",(0,tr.__call__)(e.format,e,a)))}return r}());var h=(0,tr.__call__)(wa,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected an opening LaTeX delimiter ({}), got {}/‘{}’{}";return(0,tr.__call__)(e.format,e,d,c.tok,c.arg,(0,tr.__t__)(c.pre_space)?" with leading whitespace":"")}(),first_tokens:[c]}));throw h.__cause__=null,h}return[c]}))},get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"first_token":r=o[l];break;case"group_parsing_state":n=o[l];break;case"delimited_expression_parser":_=o[l];break;case"latex_walker":a=o[l]}}}var s=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement is_opening_delimiter()");throw s.__cause__=null,s}))},get check_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"cls":e=a[i];break;case"delimiters":t=a[i];break;case"parsed_opening_delimiter":r=a[i];break;case"latex_walker":n=a[i]}}}if((0,tr.__t__)(null===t))return!0;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,ya)))var o=t;else o=(0,tr.__getitem__)(t,0);return!(0,tr.__t__)((0,tr.__ne__)(r,o))}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimited_expression_parser":t=l[s];break;case"opening_delimiter_tokens":r=l[s];break;case"group_parsing_state":n=l[s];break;case"parsing_state":_=l[s];break;case"delimiters":a=l[s];break;case"latex_walker":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ba,"__init__"),null,e),e.delimited_expression_parser=t,e.opening_delimiter_tokens=r,(0,tr.__t__)(r)?e.first_token=(0,tr.__getitem__)(r,0):e.first_token=null,e.group_parsing_state=n,e.parsing_state=_,e.delimiters=a,e.latex_walker=i,e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=(0,tr.tuple)([null,null])}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}var a=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement stop_token_condition()");throw a.__cause__=null,a}))},get handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":_=i[o]}}}!function(){var e=n;(0,tr.__call__)(e.move_past_token,e,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":n=a[i]}}}return(0,tr.__t__)(null!==e.child_parsing_state_delta)?(0,tr.__call__)(Tn,null,e.group_parsing_state,e.child_parsing_state_delta,e.latex_walker):t}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"opening_delimiter":t=n[_]}}}return t}))},get get_parsed_delimiters(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.first_token,a=e.delimiters;if((0,tr.__t__)(null===a))a=_.arg;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,ya))){var i=a,o=function(){var t=e;return(0,tr.__call__)(t.get_matching_delimiter,t,i)}();return(0,tr.tuple)([i,o])}return a}))},get make_content_parser(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"latex_walker":t=_[a];break;case"token_reader":r=_[a]}}}if((0,tr.__t__)((0,tr.__getitem__)(e.parsed_delimiters,1)))var i=function(){var t="matching ‘{}’";return(0,tr.__call__)(t.format,t,(0,tr.__getitem__)(e.parsed_delimiters,1))}();else i="matching closing delimiter";return(0,tr.__call__)(pa,null,(0,tr.__kwargtrans__)({make_child_parsing_state:e.make_child_parsing_state,stop_token_condition:e.stop_token_condition,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:function(){var t="Expected {} after ‘{}’";return(0,tr.__call__)(t.format,t,i,(0,tr.__getitem__)(e.parsed_delimiters,0))}()}))}))},get get_open_context_description(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.tuple)([function(){var t="Delimited expression ‘{}…{}’";return(0,tr.__call__)(t.format,t,...e.parsed_delimiters)}(),e.first_token])}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":n=i[o];break;case"parsing_state_delta":_=i[o]}}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),s=function(){var r=t;return(0,tr.__call__)(r.make_node,r,Jr,(0,tr.__kwargtrans__)({nodelist:n,parsing_state:e.group_parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return(0,tr.tuple)([s,_])}))}}),ka=(0,tr.__class__)("LatexDelimitedExpressionParser",[la],{__module__:ma,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"delimited_expression_parser_info_class":r=l[s];break;case"optional":n=l[s];break;case"allow_pre_space":_=l[s];break;case"discard_parsing_state_delta":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ka,"__init__"),null,e,(0,tr.__kwargtrans__)(i)),e.delimiters=t,e.optional=n,e.allow_pre_space=_,e.discard_parsing_state_delta=a,e.delimited_expression_parser_info_class=r}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.optional}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=function(){var r=e.delimited_expression_parser_info_class;return(0,tr.__call__)(r.get_group_parsing_state,r,(0,tr.__kwargtrans__)({parsing_state:n,delimiters:e.delimiters,delimited_expression_parser:e,latex_walker:t}))}(),s=null;try{s=function(){var n=e.delimited_expression_parser_info_class;return(0,tr.__call__)(n.parse_initial,n,(0,tr.__kwargtrans__)({delimiters:e.delimiters,allow_pre_space:e.allow_pre_space,latex_walker:t,token_reader:r,group_parsing_state:l,delimited_expression_parser:e}))}()}catch(n){if((0,tr.isinstance)(n,wa)){var c=n,u=null;if((0,tr.__t__)((0,tr.__t__)(null!==c.first_tokens)&&(0,tr.__call__)(tr.len,null,c.first_tokens)))u=(0,tr.__getitem__)(c.first_tokens,0);if((0,tr.__t__)(e.optional))return(0,tr.__t__)((0,tr.__t__)(null!==c.first_tokens)&&(0,tr.__call__)(tr.len,null,c.first_tokens))&&function(){var e=r;(0,tr.__call__)(e.move_to_token,e,u)}(),(0,tr.tuple)([null,null]);var f=null;if((0,tr.__t__)(null!==u))f=u.pos;var d=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:c.msg,pos:f,recovery_nodes:function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[],(0,tr.__kwargtrans__)({parsing_state:l,pos:u.pos,pos_end:u.pos}))}(),recovery_at_token:u,error_type_info:(0,tr.dict)({what:"nodes_delimited_expected_opening_delimiter_not_found",first_tokens:c.first_tokens})}));throw d.__cause__=null,d}throw n}var h=function(){var r=e;return(0,tr.__call__)(r.delimited_expression_parser_info_class,r,e,(0,tr.__kwargtrans__)({opening_delimiter_tokens:s,group_parsing_state:l,parsing_state:n,delimiters:e.delimiters,latex_walker:t}))}();!function(){var e=h;(0,tr.__call__)(e.initialize,e)}();var p=function(){var e=h;return(0,tr.__call__)(e.make_content_parser,e,t,r)}(),g=function(){var e,n=t;return(0,tr.__call__)(n.parse_content,n,p,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:h.contents_parsing_state,open_context:(e=h,(0,tr.__call__)(e.get_open_context_description,e))}))}(),v=g[0],m=g[1];if((0,tr.__t__)((0,tr.__t__)(e.discard_parsing_state_delta)&&null!==m))m=null;g=function(){var e=h;return(0,tr.__call__)(e.make_group_node_and_parsing_state_delta,e,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,nodelist:v,parsing_state_delta:m}))}();var y=g[0];m=g[1];return(0,tr.tuple)([y,m])}))}}),xa=(0,tr.__class__)("LatexDelimitedGroupParserInfo",[ba],{__module__:ma,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"parsing_state":t=o[l];break;case"delimiters":r=o[l];break;case"delimited_expression_parser":n=o[l];break;case"latex_walker":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}if((0,tr.__t__)(null===r))return t;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,ya))){if((0,tr.__t__)(!(0,tr.__in__)(r,t._latex_group_delimchars_by_open))){var s=(0,tr.__call__)(tr.ValueError,null,function(){var e="Delimiter ‘{}’ not a valid latex group delimiter ({!r})";return(0,tr.__call__)(e.format,e,r,t.latex_group_delimiters)}());throw s.__cause__=null,s}return t}for(var c=(0,tr.__call__)(tr.tuple,null,r),u=t.latex_group_delimiters,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if((0,tr.__t__)((0,tr.__eq__)(c,d)))return t}return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({latex_group_delimiters:(0,tr.__add__)(t.latex_group_delimiters,[c])}))}()}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"group_parsing_state":r=o[l];break;case"delimited_expression_parser":n=o[l];break;case"latex_walker":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,ya))?[t]:[(0,tr.__getitem__)(t,0)]:function(){for(var e,t=[],n=r.latex_group_delimiters,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0];a[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,i)}return t}()}))},get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"first_token":r=l[s];break;case"group_parsing_state":n=l[s];break;case"delimited_expression_parser":_=l[s];break;case"latex_walker":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}return!(0,tr.__t__)((0,tr.__ne__)(r.tok,"brace_open"))&&!(0,tr.__t__)(!(0,tr.__t__)(function(){var n=e;return(0,tr.__call__)(n.check_opening_delimiter,n,(0,tr.__kwargtrans__)({delimiters:t,parsed_opening_delimiter:r.arg,latex_walker:a}))}()))}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"opening_delimiter":t=n[_]}}}return(0,tr.__getitem__)(e.group_parsing_state._latex_group_delimchars_by_open,t)}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":n=a[i]}}}return(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(n.tok,"brace_open"))&&(0,tr.__eq__)(n.arg,(0,tr.__getitem__)(e.parsed_delimiters,0)))?e.contents_parsing_state:e.parsing_state}))}}),Pa=(0,tr.__class__)("LatexDelimitedGroupParser",[ka],{__module__:ma,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=xa;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"delimited_expression_parser_info_class":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Pa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,delimited_expression_parser_info_class:r},n)))}))}}),Oa=(0,tr.tuple)([(0,tr.tuple)(["{","}"]),(0,tr.tuple)(["[","]"]),(0,tr.tuple)(["(",")"]),(0,tr.tuple)(["<",">"])]),Ea=(0,tr.__class__)("LatexDelimitedMultiDelimGroupParserInfo",[xa],{__module__:ma,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"parsing_state":t=o[l];break;case"delimiters":r=o[l];break;case"delimited_expression_parser":n=o[l];break;case"latex_walker":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.assert)(null===r);var s=n.delimiters_list;return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({latex_group_delimiters:s}))}()}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ea,"initialize"),null,e);for(var _=(0,tr.__call__)(tr.list,null,e.parsing_state.latex_group_delimiters),a=e.parsed_delimiters,i=(0,tr.__getitem__)(a,0),o=!1,l=_,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0];c[1];if((0,tr.__t__)((0,tr.__eq__)(i,u)))o=!0}(0,tr.__t__)(!(0,tr.__t__)(o))&&function(){var e=_;(0,tr.__call__)(e.append,e,a)}(),e.contents_parsing_state=function(){var t=e.parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({latex_group_delimiters:_}))}()}))}}),Aa=(0,tr.__class__)("LatexDelimitedMultiDelimGroupParser",[ka],{__module__:ma,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Oa;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=Ea;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters_list":t=a[i];break;case"delimited_expression_parser_info_class":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Aa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:null,delimited_expression_parser_info_class:r},n))),e.delimiters_list=t}))}}),Ca={};(0,tr.__nest__)(Ca,"",dr);var Sa="pylatexenc.latexnodes.parsers._expression",Ta=function(){var e=Ca;return(0,tr.__call__)(e.getLogger,e,Sa)}(),Na=(0,tr.__class__)("_TryAgainWithSkippedCommentOrWhitespaceNodes",[tr.Exception],{__module__:Sa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"skipped_nodes":t=_[a];break;case"pos":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Na,"__init__"),null,e,"<internal>"),e.skipped_nodes=t,e.pos=r}))}}),La=(0,tr.__class__)("LatexExpressionParser",[la],{__module__:Sa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"allow_pre_space":t=o[l];break;case"allow_pre_comments":r=o[l];break;case"return_full_node_list":n=o[l];break;case"single_token_requiring_arg_is_error":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,La,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.allow_pre_space=t,e.allow_pre_comments=r,e.return_full_node_list=n,e.single_token_requiring_arg_is_error=_}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!1}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}for(var l=function(){var e=n;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({enable_environments:!1}))}(),s=[];(0,tr.__t__)(!0);){try{var c=function(){var a=e;return(0,tr.__call__)(a._parse_single_token,a,t,r,l,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({parsing_state:n},_)))}()}catch(e){if((0,tr.isinstance)(e,Na)){var u=e;s=(0,tr.__call__)(tr.__iadd__,null,s,u.skipped_nodes);continue}throw e}s=(0,tr.__call__)(tr.__iadd__,null,s,c);if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,s))))var f=function(){var e,_=t;return(0,tr.__call__)(_.make_nodelist,_,[],(0,tr.__kwargtrans__)({pos:(e=r,(0,tr.__call__)(e.cur_pos,e)),pos_end:function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),parsing_state:n}))}();else f=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,s,(0,tr.__kwargtrans__)({parsing_state:n}))}();if((0,tr.__t__)(e.return_full_node_list))var d=f;else if((0,tr.__t__)((0,tr.__call__)(tr.len,null,f)))d=(0,tr.__getitem__)(f,(0,tr.__neg__)(1));else d=function(){var e=t;return(0,tr.__call__)(e.make_node,e,Jr,(0,tr.__kwargtrans__)({parsing_state:n,nodelist:f,delimiters:(0,tr.tuple)(["",""]),pos:f.pos,pos_end:f.pos_end}))}();return(0,tr.tuple)([d,null])}}))},get _parse_single_token(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"latex_walker":t=o[l];break;case"token_reader":r=o[l];break;case"expr_parsing_state":n=o[l];break;case"parsing_state":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}try{var s=function(){var e=r;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:n}))}()}catch(h){if(!(0,tr.isinstance)(h,qr)){if((0,tr.isinstance)(h,Ur)){u=h,f=function(){var e,n=t;return(0,tr.__call__)(n.check_tolerant_parsing_ignore_error,n,(0,tr.__call__)(Fr,null,"End of input encountered but we expected an expression",(0,tr.__kwargtrans__)({pos:(e=r,(0,tr.__call__)(e.cur_pos,e)),error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"end_of_stream"})})))}();if((0,tr.__t__)(null!==f))throw(c=f).__cause__=null,c;return[]}throw h}var c,u=h,f=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,u)}();if((0,tr.__t__)(null!==f))throw(c=f).__cause__=null,c;s=f.recovery_token_placeholder;!function(){var e=r;(0,tr.__call__)(e.move_to_pos_chars,e,f.recovery_token_at_pos)}()}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"macro"))){var d=s.arg;if((0,tr.__t__)((0,tr.__t__)(e.single_token_requiring_arg_is_error)&&(0,tr.__in__)(d,(0,tr.tuple)(["begin","end"])))){f=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(Fr,null,(e="Expected expression, got \\{}",(0,tr.__call__)(e.format,e,d)),(0,tr.__kwargtrans__)({pos:s.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"beginend",beginend:d})})))}();if((0,tr.__t__)(null!==f)){var h=f;throw h.__cause__=null,h}return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,en,(0,tr.__kwargtrans__)({parsing_state:_,macroname:d,spec:null,nodeargd:null,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()]}var p=function(){var e=_.latex_context;return(0,tr.__call__)(e.get_macro_spec,e,d)}(),g=function(){var r,n=e;return(0,tr.__call__)(n._check_if_requires_args,n,t,p,s,(r="a single macro ‘\\{}’",(0,tr.__call__)(r.format,r,d)))}();return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,en,(0,tr.__kwargtrans__)({parsing_state:_,macroname:s.arg,spec:p,nodeargd:g,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()]}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"specials"))){var v=s.arg;g=function(){var r,n=e;return(0,tr.__call__)(n._check_if_requires_args,n,t,v,s,(r="specials ‘{}’",(0,tr.__call__)(r.format,r,v.specials_chars)))}();return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:_,specials_chars:v.specials_chars,spec:v,nodeargd:g,pos:s.pos,pos_end:s.pos_end}))}()]}if((0,tr.__t__)((0,tr.__call__)(tr.len,null,s.pre_space))){if((0,tr.__t__)(e.allow_pre_space)){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var m=(0,tr.__sub__)(s.pos,(0,tr.__call__)(tr.len,null,s.pre_space)),y=[function(){var e=t;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({parsing_state:_,chars:s.pre_space,pos:m,pos_end:s.pos}))}()];throw(w=(0,tr.__call__)(Na,null,y,m)).__cause__=null,w}var w;f=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,(0,tr.__call__)(Fr,null,"Expected expression w/o leading whitespace but found whitespace",(0,tr.__kwargtrans__)({pos:(0,tr.__sub__)(s.pos,(0,tr.__call__)(tr.len,null,s.pre_space)),error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"whitespace",whitespace:s.pre_space})})))}();if((0,tr.__t__)(null!==f))throw(w=f).__cause__=null,w;throw(w=(0,tr.__call__)(Na,null,[],s.pos)).__cause__=null,w}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"comment"))){if((0,tr.__t__)(e.allow_pre_comments)){y=[function(){var e=t;return(0,tr.__call__)(e.make_node,e,Qr,(0,tr.__kwargtrans__)({parsing_state:_,comment:s.arg,comment_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()];throw(b=(0,tr.__call__)(Na,null,y,s.pos)).__cause__=null,b}var b;f=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(Fr,null,(e="Expected expression w/o leading comments but found comment ‘%{}’",(0,tr.__call__)(e.format,e,s.arg)),(0,tr.__kwargtrans__)({pos:s.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"comment",comment:s.arg})})))}();if((0,tr.__t__)(null!==f))throw(b=f).__cause__=null,b;throw(b=(0,tr.__call__)(Na,null,[],s.pos)).__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"brace_open"))){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s)}();var k=function(){var e=t;return(0,tr.__call__)(e.parse_content,e,(0,tr.__call__)(Pa,null,(0,tr.__kwargtrans__)({delimiters:s.arg})),(0,tr.__kwargtrans__)({token_reader:r,parsing_state:_}))}(),x=k[0],P=k[1];return(0,tr.__t__)(null!==P)&&function(){var e=Ta;(0,tr.__call__)(e.warning,e,"Ignoring parsing_state_delta after parsing an expression group!")}(),[x]}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"brace_close"))){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s)}();f=(0,tr.__call__)(Vr,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected LaTeX expression, got closing brace ‘{}’";return(0,tr.__call__)(e.format,e,s.arg)}(),pos:s.pos,recovery_nodes:function(){var e=t;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({parsing_state:_,chars:"",pos:s.pos,pos_end:s.pos}))}(),recovery_at_token:s,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"closing_latex_group",delimiter:s.arg})}));f._error_was_unexpected_closing_brace_in_expression=!0;var O=f;throw O.__cause__=null,O}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"char")))return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({parsing_state:_,chars:s.arg,pos:s.pos,pos_end:s.pos_end}))}()];if((0,tr.__t__)((0,tr.__in__)(s.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))){if((0,tr.__t__)(function(){var e=s.arg;return(0,tr.__call__)(e.startswith,e,"\\")}()))var E=function(){var e=t;return(0,tr.__call__)(e.make_node,e,en,(0,tr.__kwargtrans__)({parsing_state:_,macroname:s.arg,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}();else E=function(){var e=t;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({parsing_state:_,chars:s.arg,pos:s.pos,pos_end:s.pos_end}))}();var A=(0,tr.__call__)(Vr,null,function(){var e="Unexpected math mode delimiter ‘{}’, was expecting a LaTeX expression";return(0,tr.__call__)(e.format,e,s.arg)}(),(0,tr.__kwargtrans__)({pos:s.pos,recovery_nodes:E,recovery_past_token:s,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"math_mode_delimiter",mathmode_type:s.tok,delimiter:s.arg})}));throw A.__cause__=null,A}var C=(0,tr.__call__)(Fr,null,function(){var e="Unknown token type: ‘{}’";return(0,tr.__call__)(e.format,e,s.tok)}(),(0,tr.__kwargtrans__)({pos:s.pos}));throw C.__cause__=null,C}))},get _check_if_requires_args(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"spec":r=i[o];break;case"got_token":n=i[o];break;case"what_we_got":_=i[o]}}}if((0,tr.__t__)(e.single_token_requiring_arg_is_error)){var l=function(){var e,t=(e=r,(0,tr.__call__)(e.get_node_parser,e,n));return(0,tr.__call__)(t.contents_can_be_empty,t)}();if((0,tr.__t__)(!(0,tr.__t__)(l))){var s=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(Fr,null,(e="Expected a LaTeX expression but got {} which expects arguments; did you mean to provide an expression in {{curly braces}} ?",(0,tr.__call__)(e.format,e,_)),(0,tr.__kwargtrans__)({pos:n.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"callable_with_mandatory_arguments",callable_token:n})})))}();if((0,tr.__t__)(null!==s)){var c=s;throw c.__cause__=null,c}return null}}return(0,tr.__call__)(Cr,null)}))}}),Ma=(tr=a("hoVWB"),{});(0,tr.__nest__)(Ma,"",dr);var Ia="pylatexenc.latexnodes.parsers._optionals",ja=function(){var e=Ma;return(0,tr.__call__)(e.getLogger,e,Ia)}(),Ra=(0,tr.__class__)("LatexOptionalSquareBracketsParser",[Pa],{__module__:Ia,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=(0,tr.tuple)(["[","]"]);if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"optional":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ra,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,optional:r},n)))}))}}),Da=(0,tr.__class__)("LatexOptionalCharsMarkerParser",[la],{__module__:Ia,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;var s=(0,tr.dict)();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"chars_list":t=u[f];break;case"following_arg_parser":r=u[f];break;case"include_chars_node_before_following_arg":n=u[f];break;case"return_none_instead_of_empty":_=u[f];break;case"allow_pre_space":a=u[f];break;case"return_full_node_list":i=u[f];break;case"collect_chars_with_following_arg_as_delimited_group":o=u[f];break;case"max_num_args":l=u[f];break;default:s[f]=u[f]}delete s.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Da,"__init__"),null,e,(0,tr.__kwargtrans__)(s)),(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))t=function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,a)}return r}();if(e.chars_list=function(){for(var e,r,n,_=[],a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);e=void 0,r=void 0,n=void 0,n=_,(0,tr.__call__)(n.append,n,(0,tr.__call__)(" ".join," ",(e=o,r=(0,tr.__call__)(e.strip,e),(0,tr.__call__)(r.py_split,r))))}return _}(),e.following_arg_parser=r,e.include_chars_node_before_following_arg=n,e.return_none_instead_of_empty=_,e.allow_pre_space=a,e.return_full_node_list=i,e.collect_chars_with_following_arg_as_delimited_group=o,e.max_num_args=l,(0,tr.__t__)(!(0,tr.__t__)(e.chars_list))){var d=(0,tr.__call__)(tr.ValueError,null,function(){var e="Invalid chars={!r}, needs to be non-empty string (after stripping whitespce)";return(0,tr.__call__)(e.format,e,chars)}());throw d.__cause__=null,d}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.chars_list),1))||(0,tr.__le__)(e.max_num_args,1))))throw(d=(0,tr.__call__)(tr.ValueError,null,"Cannot set return_full_node_list=False if we can have multiple given chars marker options (len(chars_list) > 1 and max_num_args != 1)")).__cause__=null,d;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&e.collect_chars_with_following_arg_as_delimited_group))throw(d=(0,tr.__call__)(tr.ValueError,null,"If collect_chars_with_following_arg_as_delimited_group=True, then we must have return_full_node_list=True")).__cause__=null,d}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!0}))},get get_following_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"chars":t=n[_]}}}return e.following_arg_parser}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}for(var l=0,s=[],c=null,u=e.chars_list;(0,tr.__t__)((0,tr.__t__)(null===e.max_num_args)||(0,tr.__lt__)(l,e.max_num_args));){var f=function(){var a=e;return(0,tr.__call__)(a._parse_single,a,u,t,r,n,(0,tr.__kwargtrans__)(_))}(),d=f[0],h=f[1],p=f[2],g=f[3];if((0,tr.__t__)(null===c))c=g;if((0,tr.__t__)(null!==h)&&function(){var e=ja;(0,tr.__call__)(e.warning,e,"Parsing state delta ignored after parsing optional chars marker: %r",h)}(),(0,tr.__t__)(null===p))break;l=(0,tr.__call__)(tr.__iadd__,null,l,1),s=(0,tr.__call__)(tr.__iadd__,null,s,d),u=function(){for(var e,t=[],r=u,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);(0,tr.__t__)((0,tr.__ne__)(_,p))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,_))}return t}()}if((0,tr.__t__)((0,tr.__eq__)(l,0))){if((0,tr.__t__)(e.return_none_instead_of_empty))return(0,tr.tuple)([null,null]);var v=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[],(0,tr.__kwargtrans__)({pos:c,pos_end:c,parsing_state:n}))}();return(0,tr.tuple)([v,null])}if((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))){(0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,s),1))&&function(){var e=ja;(0,tr.__call__)(e.error,e,"Internal error, node list here should have length == 1")}();var m=(0,tr.__getitem__)(s,0)}else m=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,s,(0,tr.__kwargtrans__)({parsing_state:n}))}();return(0,tr.tuple)([m,null])}))},get _parse_single(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"remaining_chars_list":t=o[l];break;case"latex_walker":r=o[l];break;case"token_reader":n=o[l];break;case"parsing_state":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s=function(){var e=n;return(0,tr.__call__)(e.peek_token,e,(0,tr.__kwargtrans__)({parsing_state:_}))}(),c=null,u="",f=!1,d=null,h=null;try{for(;(0,tr.__t__)(!0);){var p=function(){var e=n;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:_}))}();if((0,tr.__t__)(null===h)){h=p;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,h.pre_space))&&!(0,tr.__t__)(e.allow_pre_space)))return(0,tr.tuple)([null,null,null,h.pos])}if((0,tr.__t__)((0,tr.__eq__)(p.tok,"specials"))&&(p.tok="char",p.arg=p.arg.specials_chars),(0,tr.__t__)((0,tr.__ne__)(p.tok,"char")))break;if((0,tr.__t__)((0,tr.__t__)(u)&&(0,tr.__call__)(tr.len,null,p.pre_space)))u=(0,tr.__call__)(tr.__iadd__,null,u," ");u=(0,tr.__call__)(tr.__iadd__,null,u,p.arg);if((0,tr.__t__)((0,tr.__in__)(u,e.chars_list))){f=!0,d=u,c=p.pos_end;break}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){for(var t,r=[],n=e.chars_list,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)((t=void 0,t=a,(0,tr.__call__)(t.startswith,t,u)))&&function(){var e=r;(0,tr.__call__)(e.append,e,a)}()}return r}()),0)))break}}finally{(0,tr.__t__)(!(0,tr.__t__)(f))&&function(){var e=n;(0,tr.__call__)(e.move_to_token,e,s)}()}if((0,tr.__t__)(!(0,tr.__t__)(f)))return(0,tr.tuple)([null,null,null,s.pos]);var g=s.pos,v=function(){var t=e;return(0,tr.__call__)(t.get_following_arg_parser,t,u)}(),m=null,y=null;if((0,tr.__t__)(null!==v)){var w=function(){var e=r;return(0,tr.__call__)(e.parse_content,e,v,(0,tr.__kwargtrans__)({token_reader:n,parsing_state:_}))}();y=w[0],m=w[1]}if((0,tr.__t__)(e.collect_chars_with_following_arg_as_delimited_group)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,_n)))var b=y;else b=function(){var e=r;return(0,tr.__call__)(e.make_nodelist,e,[y],(0,tr.__kwargtrans__)({parsing_state:_}))}();var k=b.pos_end;if((0,tr.__t__)(null===k))k=g;var x=[function(){var e=r;return(0,tr.__call__)(e.make_node,e,Jr,(0,tr.__kwargtrans__)({parsing_state:_,delimiters:(0,tr.tuple)([d,""]),nodelist:b,pos:g,pos_end:k}))}()];return(0,tr.tuple)([x,m,d,g])}var P=null;if((0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&null===v)||e.include_chars_node_before_following_arg))P=function(){var e=r;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({parsing_state:_,chars:d,pos:g,pos_end:c}))}();if((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list)))return(0,tr.__t__)(null!==v)?(0,tr.tuple)([[y],m,d,g]):((0,tr.assert)(null!==P),(0,tr.tuple)([[P],m,d,g]));x=[];if((0,tr.__t__)(e.include_chars_node_before_following_arg)&&((0,tr.assert)(null!==P),function(){var e=x;(0,tr.__call__)(e.append,e,P)}()),(0,tr.__t__)(null!==v)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,_n)))var O=y;else O=[y];x=(0,tr.__call__)(tr.__iadd__,null,x,O)}return(0,tr.tuple)([x,m,d,g])}))}}),Fa=(0,tr.__class__)("LatexOptionalEmbellishmentArgsParser",[Da],{__module__:Ia,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"embellishment_chars":t=a[i];break;case"allow_pre_space":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({chars_list:t,following_arg_parser:(0,tr.__call__)(La,null,(0,tr.__kwargtrans__)({allow_pre_space:r,return_full_node_list:!0})),allow_pre_space:r,collect_chars_with_following_arg_as_delimited_group:!0,return_full_node_list:!0},n))),e.embellishment_chars=t}))}}),Ba={};(0,tr.__nest__)(Ba,"",dr);var za="pylatexenc.latexnodes.parsers._stdarg",qa=function(){var e=Ba;return(0,tr.__call__)(e.getLogger,e,za)}(),Va=(tr.str,(0,tr.dict)({})),Ua=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("arg_spec"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,t))))var a=e;else{var i=(0,tr.dict)({arg_spec:e});!function(){var e=i;(0,tr.__call__)(e.py_update,e,t)}();a=(0,tr.__call__)(tr.tuple,null,(0,tr.__call__)(tr.list,null,(0,tr.__call__)(tr.sorted,null,function(){var e=i;return(0,tr.__call__)(e.py_items,e)}(),(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("v"===n)e=r[n]}}return(0,tr.__getitem__)(e,0)}}))))}if((0,tr.__t__)(!(0,tr.__in__)(a,Va))){var o=(0,tr.__call__)(Ga,null,e,(0,tr.__kwargtrans__)(t));return(0,tr.__setitem__)(Va,a,o),o}return(0,tr.__getitem__)(Va,a)},Ga=(0,tr.__class__)("LatexStandardArgumentParser",[la],{__module__:za,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="{";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"arg_spec":t=o[l];break;case"return_full_node_list":r=o[l];break;case"expression_single_token_requiring_arg_is_error":n=o[l];break;case"allow_pre_space":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ga,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.arg_spec=t,e.return_full_node_list=r,e.expression_single_token_requiring_arg_is_error=n,e.allow_pre_space=_,e._arg_parser=null}))},get get_arg_parser_instance(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"arg_spec":t=n[_]}}}if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["m","{"]))))return(0,tr.__call__)(La,null,(0,tr.__kwargtrans__)({return_full_node_list:e.return_full_node_list,single_token_requiring_arg_is_error:e.expression_single_token_requiring_arg_is_error,allow_pre_space:e.allow_pre_space,allow_pre_comments:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["o","["]))))return(0,tr.__call__)(Pa,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["s","*"]))))return(0,tr.__call__)(Da,null,(0,tr.__kwargtrans__)({chars_list:["*"],allow_pre_space:e.allow_pre_space,return_full_node_list:e.return_full_node_list}));if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"e")}())){var a=function(){var e=(0,tr.__getslice__)(t,1,null,1);return(0,tr.__call__)(e.strip,e)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__le__)((0,tr.__call__)(tr.len,null,a),2))||(0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)(a,0),"{"))||(0,tr.__ne__)((0,tr.__getitem__)(a,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,a),1)),"}"))){var i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Expected embellishment chars with syntax ‘e{<chars>}’ in ",function(){var e="arg_spec; got ‘{}’";return(0,tr.__call__)(e.format,e,t)}()));throw i.__cause__=null,i}var o=(0,tr.__getslice__)(a,1,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,t),1),1);return(0,tr.__call__)(Fa,null,(0,tr.__kwargtrans__)({embellishment_chars:o,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"t")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),2)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for an optional char argument should be of the form ‘t<char>’")).__cause__=null,i;var l=(0,tr.__getitem__)(t,1);return(0,tr.__call__)(Da,null,(0,tr.__kwargtrans__)({chars_list:[l],allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"r")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for a required delimited argument should be of the form ‘r<char1><char2>’")).__cause__=null,i;var s=(0,tr.__getitem__)(t,1),c=(0,tr.__getitem__)(t,2);return(0,tr.__call__)(Pa,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)([s,c]),optional:!1,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"d")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for an optional delimited argument should be of the form ‘d<char1><char2>’")).__cause__=null,i;s=(0,tr.__getitem__)(t,1),c=(0,tr.__getitem__)(t,2);return(0,tr.__call__)(Pa,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)([s,c]),optional:!0,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"v")}())){if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),1)))var u=null;else{if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for a verbatim argument should be either ‘v’ or ‘v<char1><char2>’")).__cause__=null,i;u=(0,tr.tuple)([(0,tr.__getitem__)(t,1),(0,tr.__getitem__)(t,2)])}return(0,tr.__call__)(ua,null,(0,tr.__kwargtrans__)({delimiters:u}))}if((0,tr.__t__)((0,tr.__eq__)(t,"AnyDelimited")))return(0,tr.__call__)(Aa,null,(0,tr.__kwargtrans__)({optional:!1,allow_pre_space:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__eq__)(t,"AnyDelimitedOptional")))return(0,tr.__call__)(Aa,null,(0,tr.__kwargtrans__)({optional:!0,allow_pre_space:e.allow_pre_space}));i=(0,tr.__call__)(tr.ValueError,null,function(){var e="Unknown argument specification: {!r}";return(0,tr.__call__)(e.format,e,t)}());throw i.__cause__=null,i}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}(0,tr.__t__)(null===e._arg_parser)&&(e._arg_parser=function(){var t=e;return(0,tr.__call__)(t.get_arg_parser_instance,t,e.arg_spec)}());var l=e._arg_parser,s=function(){var e=t;return(0,tr.__call__)(e.parse_content,e,l,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({token_reader:r,parsing_state:n},_)))}(),c=s[0],u=s[1];return(0,tr.tuple)([c,u])}))}}),Wa=(0,tr.__class__)("LatexCharsGroupParser",[Pa],{__module__:za,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=(0,tr.tuple)(["{","}"]);if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"delimiters":t=i[o];break;case"enable_comments":r=i[o];break;case"enable_groups":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,delimited_expression_parser_info_class:Wa.CharsContentsParserInfo},_))),e.enable_comments=r,e.enable_groups=n}))},CharsContentsParserInfo:(0,tr.__class__)("CharsContentsParserInfo",[xa],{__module__:za,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.contents_parsing_state=function(){var t=e.group_parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1}))}(),e.current_parsing_state=e.contents_parsing_state,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":n=a[i]}}}return e.parsing_state}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))||(!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"char"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))||null)}))}})}),$a=(0,tr.__class__)("LatexCharsCommaSeparatedListParser",[Pa],{__module__:za,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=",";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=(0,tr.tuple)(["{","}"]);if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"comma_char":t=l[s];break;case"delimiters":r=l[s];break;case"enable_comments":n=l[s];break;case"enable_groups":_=l[s];break;case"keep_empty_parts":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$a,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:r,delimited_expression_parser_info_class:$a.CommaSepParserInfo},i))),e.comma_char=t,e.enable_comments=n,e.enable_groups=_,e.keep_empty_parts=a}))},CommaSepParserInfo:(0,tr.__class__)("CommaSepParserInfo",[xa],{__module__:za,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.comma_char=e.delimited_expression_parser.comma_char,e.contents_parsing_state=function(){var t=e.group_parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1}))}(),e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":n=a[i]}}}return e.parsing_state}))},get make_content_parser(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"latex_walker":t=_[a];break;case"token_reader":r=_[a]}}}return(0,tr.__call__)(Ya,null,e)}))}})}),Ya=(0,tr.__class__)("_CommaSepContentCustomParser",[la],{__module__:za,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"contents_parser_info":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ya,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.contents_parser_info=t,e.main_content_parser=(0,tr.__call__)(pa,null,(0,tr.__kwargtrans__)({stop_token_condition:e.stop_token_condition,make_child_parsing_state:t.make_child_parsing_state,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:function(){var r="Expected matching ‘{}’ of ‘{}’-separated group initiated by ‘{}’";return(0,tr.__call__)(r.format,r,(0,tr.__getitem__)(t.parsed_delimiters,1),e.contents_parser_info.comma_char,(0,tr.__getitem__)(t.parsed_delimiters,0))}()})),e.current_parsing_state=e.contents_parser_info.contents_parsing_state,e.comma_sep_arg_list=[],e.parsing_state_delta=null,e.parse_more=!0,e.pos_start=null,e.is_very_first_element=!0,e.last_element_pos_start=null,e.last_delimiter_token=null,e.last_element_pos_end=null}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.contents_parser_info.parsed_delimiters,1)))||!!(0,tr.__t__)((0,tr.__eq__)(t.tok,"char"))&&(!!(0,tr.__t__)((0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.contents_parser_info.parsed_delimiters,1)))||!!(0,tr.__t__)((0,tr.__eq__)(t.arg,e.contents_parser_info.comma_char)))}))},get handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":_=i[o]}}}!function(){var e=n;(0,tr.__call__)(e.move_past_token,e,t)}(),(0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))?(e.last_delimiter_token=null,e.last_element_pos_end=t.pos,e.parse_more=!1):(e.last_delimiter_token=t,e.last_element_pos_end=t.pos_end,e.parse_more=!0)}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":n=a[i]}}}for(e.pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),e.parse_more=!0;(0,tr.__t__)(e.parse_more);)!function(){var n=e;(0,tr.__call__)(n._parse_one_commasep_arg,n,t,r)}(),(0,tr.__t__)((0,tr.__t__)(e.parse_more)&&null!==e.parsing_state_delta)&&(e.current_parsing_state=function(){var r=e.parsing_state_delta;return(0,tr.__call__)(r.get_updated_parsing_state,r,e.current_parsing_state,t)}());var o=function(){var r=t;return(0,tr.__call__)(r.make_nodelist,r,e.comma_sep_arg_list,(0,tr.__kwargtrans__)({pos:e.pos_start,pos_end:e.last_element_pos_end,parsing_state:n}))}();return(0,tr.tuple)([o,e.parsing_state_delta])}))},get _parse_one_commasep_arg(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"latex_walker":t=_[a];break;case"token_reader":r=_[a]}}}e.last_element_pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),e.last_element_pos_end=null,e.last_delimiter_token=null;var i=function(){var n,_=t;return(0,tr.__call__)(_.parse_content,_,e.main_content_parser,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:e.current_parsing_state,open_context:(0,tr.tuple)([(n="Element {} of list separated by ‘{}’",(0,tr.__call__)(n.format,n,(0,tr.__call__)(tr.len,null,e.comma_sep_arg_list),e.contents_parser_info.comma_char)),e.contents_parser_info.first_token])}))}(),o=i[0],l=i[1],s=e.last_element_pos_end;if((0,tr.__t__)(null===s)){s=function(){var e=r;return(0,tr.__call__)(e.final_pos,e)}();e.parse_more=!1}if((0,tr.__t__)(null===e.last_delimiter_token))var c="";else c=e.last_delimiter_token.arg;var u=function(){var r=t;return(0,tr.__call__)(r.make_node,r,Jr,(0,tr.__kwargtrans__)({nodelist:o,parsing_state:e.current_parsing_state,delimiters:(0,tr.tuple)(["",c]),pos:e.last_element_pos_start,pos_end:s}))}(),f=!0;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,o))))if((0,tr.__t__)((0,tr.__t__)(e.is_very_first_element)&&null===e.last_delimiter_token))f=!1;else if((0,tr.__t__)(e.keep_empty_parts))f=!0;else f=!1;(0,tr.__t__)(f)&&function(){var t=e.comma_sep_arg_list;(0,tr.__call__)(t.append,t,u)}(),e.parsing_state_delta=l,e.is_very_first_element=!1}))}}),Ha=(0,tr.__class__)("LatexTackOnInformationFieldMacrosParser",[la],{__module__:za,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"macronames":t=o[l];break;case"allow_multiple":r=o[l];break;case"macro_arg_parsers":n=o[l];break;case"default_macro_arg_parser":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ha,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.macronames=(0,tr.__call__)(tr.set,null,t),(0,tr.__t__)(!1===r)?e.allow_multiple=(0,tr.__call__)(tr.set,null):(0,tr.__t__)(!0===r)?e.allow_multiple=e.macronames:e.allow_multiple=(0,tr.__call__)(tr.set,null,r),(0,tr.__t__)(!0===_)?e.default_macro_arg_parser=(0,tr.__call__)(La,null):e.default_macro_arg_parser=_,e.macro_arg_parsers=n}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!0}))},get get_macro_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}if((0,tr.__t__)(null===e.macro_arg_parsers))return e.default_macro_arg_parser;if((0,tr.__t__)(!(0,tr.__in__)(t,e.macro_arg_parsers)))return e.default_macro_arg_parser;var a=(0,tr.__getitem__)(e.macro_arg_parsers,t);return(0,tr.__t__)(!0===a)?e.default_macro_arg_parser:a}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":n=a[i]}}}for(var o=[],l=(0,tr.__call__)(tr.set,null);(0,tr.__t__)(!0);){var s=function(){var e=r;return(0,tr.__call__)(e.peek_token_or_none,e,n)}();if((0,tr.__t__)((0,tr.__t__)(null===s)||(0,tr.__t__)((0,tr.__ne__)(s.tok,"macro"))||!(0,tr.__in__)(s.arg,e.macronames)))break;var c=s.arg,u=!1;if(function(){var e=r;(0,tr.__call__)(e.move_past_token,e,s)}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(c,l))&&!(0,tr.__t__)((0,tr.__in__)(c,e.allow_multiple)))){var f=function(){var e="You cannot specify information field macro \\{} multiple times";return(0,tr.__call__)(e.format,e,c)}(),d=(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:f,pos:s.pos,error_type_info:(0,tr.dict)({what:"nodes_stdarg_illegal_multiple_information_field_macro",macroname:c})}));d=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,d)}();if((0,tr.__t__)(null!==d)){var h=d;throw h.__cause__=null,h}!function(){var e=qa;(0,tr.__call__)(e.warning,e,"%s; ignoring the additional information field macros",f)}();u=!0}var p=function(){var t=e;return(0,tr.__call__)(t.get_macro_arg_parser,t,c)}();if((0,tr.__t__)(null===p))var g=null,v=null;else{var m=function(){var e,_=t;return(0,tr.__call__)(_.parse_content,_,p,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:n,open_context:(0,tr.tuple)([(e="Argument of information field macro \\{}",(0,tr.__call__)(e.format,e,c)),s])}))}();g=m[0],v=m[1];(0,tr.__t__)(null!==v)&&function(){var e,t=qa;(0,tr.__call__)(t.warning,t,(e="Parsing state delta is ignored when parsing tack-on information field macro \\{}: {}",(0,tr.__call__)(e.format,e,c,v)))}()}if(!(0,tr.__t__)(u)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,g,_n)))var y=g;else y=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[g],(0,tr.__kwargtrans__)({parsing_state:n}))}();var w=function(){var e=t;return(0,tr.__call__)(e.make_node,e,Jr,(0,tr.__kwargtrans__)({parsing_state:n,delimiters:(0,tr.tuple)([(0,tr.__add__)("\\",c),""]),nodelist:y,pos:s.pos,pos_end:(0,tr.__t__)(null!==g)?g.pos_end:s.pos_end}))}();!function(){var e=o;(0,tr.__call__)(e.append,e,w)}()}}var b=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,o,(0,tr.__kwargtrans__)({parsing_state:n}))}();return(0,tr.tuple)([b,null])}))}}),Xa=(tr=a("hoVWB"),{});(0,tr.__nest__)(Xa,"",dr);var Za="pylatexenc.latexnodes.parsers._math",Ka=(function(){var e=Xa;(0,tr.__call__)(e.getLogger,e,Za)}(),tr.str),Ja=(0,tr.__class__)("LatexMathParserInfo",[ba],{__module__:Za,get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"first_token":r=l[s];break;case"group_parsing_state":n=l[s];break;case"delimited_expression_parser":_=l[s];break;case"latex_walker":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}return!(0,tr.__t__)(!(0,tr.__in__)(r.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))&&!(0,tr.__t__)(!(0,tr.__t__)(function(){var n=e;return(0,tr.__call__)(n.check_opening_delimiter,n,(0,tr.__kwargtrans__)({delimiters:t,parsed_opening_delimiter:r.arg,latex_walker:a}))}()))}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"group_parsing_state":r=o[l];break;case"delimited_expression_parser":n=o[l];break;case"latex_walker":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Ka))?[t]:[(0,tr.__getitem__)(t,0)]:function(){for(var e,t=[],n=(0,tr.__add__)(r.latex_inline_math_delimiters,r.latex_display_math_delimiters),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0];a[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,i)}return t}()}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.math_mode_type=e.first_token.tok,e.math_mode_delimiter=e.first_token.arg,e.math_parsing_state=(0,tr.__call__)(Tn,null,e.parsing_state,(0,tr.__call__)(Cn,null,(0,tr.__kwargtrans__)({math_mode_delimiter:e.math_mode_delimiter,trigger_token:e.first_token})),e.latex_walker),e.contents_parsing_state=e.math_parsing_state,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,e.math_mode_type))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"opening_delimiter":t=n[_]}}}return(0,tr.__getitem__)(e.math_parsing_state._math_expecting_close_delim_info,"close_delim")}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":n=i[o];break;case"parsing_state_delta":_=i[o]}}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}();if((0,tr.__t__)((0,tr.__eq__)(e.math_mode_type,"mathmode_inline")))var s="inline";else if((0,tr.__t__)((0,tr.__eq__)(e.math_mode_type,"mathmode_display")))s="display";else s="<unknown>";var c=function(){var r=t;return(0,tr.__call__)(r.make_node,r,nn,(0,tr.__kwargtrans__)({displaytype:s,nodelist:n,parsing_state:e.parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return(0,tr.tuple)([c,_])}))}}),Qa=(0,tr.__class__)("LatexMathParser",[ka],{__module__:Za,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"math_mode_delimiters":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,discard_parsing_state_delta:!1,delimited_expression_parser_info_class:Ja},r)))}))}}),ei={};(0,tr.__nest__)(ei,"",dr);var ti="flm.flmfragment",ri=function(){var e=ei;return(0,tr.__call__)(e.getLogger,e,ti)}(),ni=(0,tr.tuple)(["is_block_level","resource_info","standalone_mode","silent","what","parsing_mode"]),_i=(0,tr.__class__)("FLMFragment",[tr.object],{__module__:ti,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=null,a=!1,i=!1,o="(unknown)",l=!1,s=null,c=null,u=null;if(arguments.length){var f=arguments.length-1;if(arguments[f]&&arguments[f].hasOwnProperty("__kwargtrans__")){var d=arguments[f--];for(var h in d)switch(h){case"self":e=d[h];break;case"flm_text":t=d[h];break;case"environment":r=d[h];break;case"is_block_level":n=d[h];break;case"resource_info":_=d[h];break;case"standalone_mode":a=d[h];break;case"tolerant_parsing":i=d[h];break;case"what":o=d[h];break;case"silent":l=d[h];break;case"parsing_mode":s=d[h];break;case"input_lineno_colno_offsets":c=d[h];break;case"_flm_text_if_loading_nodes":u=d[h]}}}if(e.flm_text=t,e.environment=r,e.is_block_level=n,e.resource_info=_,e.standalone_mode=a,e.tolerant_parsing=i,e.what=o,e.silent=l,e.parsing_mode=s,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_n)))return e.nodes=e.flm_text,e.latex_walker=e.nodes.latex_walker,void((0,tr.__t__)(null!==u)?e.flm_text=u:e.flm_text=function(){var t=e.nodes;return(0,tr.__call__)(t.latex_verbatim,t)}());try{var p=function(){var t=_i;return(0,tr.__call__)(t.parse,t,e.flm_text,e.environment,(0,tr.__kwargtrans__)({standalone_mode:e.standalone_mode,tolerant_parsing:e.tolerant_parsing,is_block_level:e.is_block_level,what:e.what,resource_info:e.resource_info,parsing_mode:e.parsing_mode,input_lineno_colno_offsets:c}))}();e.latex_walker=p[0],e.nodes=p[1]}catch(t){if((0,tr.isinstance)(t,Pr.LatexWalkerLocatedError)){var g=t;if((0,tr.__t__)(!(0,tr.__t__)(e.silent))){var v=function(){var t=e.environment;return(0,tr.__call__)(t.get_located_error_message,t,g)}();!function(){var t=ri;(0,tr.__call__)(t.error,t,"Parse error in latex-like markup ‘{}’: {}\nGiven text was:\n‘{}’\n\n".format(e.what,v,e.flm_text))}()}throw t.__cause__=null,t}if((0,tr.isinstance)(t,tr.Exception)){g=t;throw(0,tr.__t__)(!(0,tr.__t__)(e.silent))&&function(){var t=ri;(0,tr.__call__)(t.error,t,"Error parsing latex-like markup ‘{}’: {}\nGiven text was:\n‘{}’\n\n".format(e.what,g,e.flm_text))}(),t.__cause__=null,t}throw t}}))},_attribute_fields:ni,_fields:(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)(["nodes"],(0,tr.__call__)(tr.list,null,ni))),get _attributes(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}var a=function(){for(var t,r=[],n=e._attribute_fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}();return function(){var e=a;(0,tr.__call__)(e.py_update,e,t)}(),a}))},get render(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_context":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return function(){var n=t.fragment_renderer;return(0,tr.__call__)(n.render_fragment,n,e,t,(0,tr.__kwargtrans__)(r))}()}))},get render_standalone(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"fragment_renderer":t=n[_]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.standalone_mode))){var a=(0,tr.__call__)(tr.ValueError,null,"You can only use render_standalone() on a fragment that was parsed in standalone mode (use `standalone_mode=True` in the FLMFragment constructor)");throw a.__cause__=null,a}var i=(0,tr.__call__)(xr,null,(0,tr.__kwargtrans__)({fragment_renderer:t}));return function(){var t=e;return(0,tr.__call__)(t.render,t,i)}()}))},get parse(){return(0,tr.__getcm__)(this,(function(e,t,r){var n=!1,_=null,a=null,i=null,o=null,l=null,s=null;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"cls":e=u[f];break;case"flm_text":t=u[f];break;case"environment":r=u[f];break;case"standalone_mode":n=u[f];break;case"tolerant_parsing":_=u[f];break;case"is_block_level":a=u[f];break;case"parsing_mode":i=u[f];break;case"resource_info":o=u[f];break;case"what":l=u[f];break;case"input_lineno_colno_offsets":s=u[f]}}}var d=function(){var e=r;return(0,tr.__call__)(e.make_latex_walker,e,t,(0,tr.__kwargtrans__)({is_block_level:a,parsing_mode:i,resource_info:o,standalone_mode:n,tolerant_parsing:_,what:l,input_lineno_colno_offsets:s}))}(),h=function(){var e,t=d;return(0,tr.__call__)(t.parse_content,t,(e=oa,(0,tr.__call__)(e.LatexGeneralNodesParser,e)))}(),p=h[0];h[1];return(0,tr.tuple)([d,p])}))},get start_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node_visitor":t=n[_]}}}!function(){var r=t;(0,tr.__call__)(r.start,r,e.nodes)}()}))},get is_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var t=e.flm_text;return(0,tr.__call__)(t.strip,t)}()),0)}))},get __bool__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return!(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.is_empty,t)}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.flm_text;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,_),50)))_=(0,tr.__add__)((0,tr.__getslice__)(_,0,49,1),"…");return"<{} {}>".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,_))}))},get whitespace_stripped(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t,r=e.environment;return(0,tr.__call__)(r.make_fragment,r,(t=e.flm_text,(0,tr.__call__)(t.strip,t)),(0,tr.__kwargtrans__)(function(){var t=e;return(0,tr.__call__)(t._attributes,t,(0,tr.__kwargtrans__)({what:"{}:whitespace-stripped".format(e.what)}))}()))}();return _}))},get get_first_paragraph(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e.nodes;return(0,tr.__call__)(t.split_at_node,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__t__)((_=e,(0,tr.__call__)(_.isNodeType,_,rn)))&&(0,tr.__eq__)(e.specials_chars,"\n\n");var _}),(0,tr.__kwargtrans__)({max_split:1}))}();_=function(){for(var e,t=[],r=_,n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,a),0))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,a))}return t}();if((0,tr.__t__)(!(0,tr.__t__)(_)))return e;var a=(0,tr.__getitem__)(_,0);return function(){var t,r=e.environment;return(0,tr.__call__)(r.make_fragment,r,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:a},(t=e,(0,tr.__call__)(t._attributes,t,(0,tr.__kwargtrans__)({what:"{}:first-paragraph".format(e.what)}))))))}()}))},get truncate_to(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=" …";if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"min_chars":r=a[i];break;case"truncation_marker":n=a[i]}}}var o=(0,tr.__call__)(ai,null,(0,tr.__kwargtrans__)({chars:t,min_chars:r,truncation_marker:n})),l=function(){var t=o;return(0,tr.__call__)(t.truncate_node_list,t,e.nodes)}();return function(){var r,n=e.environment;return(0,tr.__call__)(n.make_fragment,n,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:l},(r=e,(0,tr.__call__)(r._attributes,r,(0,tr.__kwargtrans__)({what:"{}:tr-{}".format(e.what,t)}))))))}()}))}}),ai=(0,tr.__class__)("_NodeListTruncator",[tr.object],{__module__:ti,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"min_chars":r=a[i];break;case"truncation_marker":n=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ai,"__init__"),null,e),e.chars=t,e.min_chars=r,e.truncation_marker=n,e.count=0}))},get truncate_node_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodes":t=n[_]}}}e.count=0;var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t)}();return(0,tr.__t__)(null===a)?t:a}))},get collect_nodes(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodes":t=n[_]}}}for(var a=(0,tr.__call__)(tr.enumerate,null,t),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1],c=function(){var t=e;return(0,tr.__call__)(t.collect_node,t,s)}();if((0,tr.__t__)(null!==c)){var u=(0,tr.__getslice__)(t,0,l,1);return(0,tr.__t__)(!0!==c)&&function(){var e=u;(0,tr.__call__)(e.extend,e,[c])}(),function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,u,(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}()}}return null}))},get collect_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Jr)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_groupnode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,en)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_macronode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,tn)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_environmentnode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,rn)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_specialsnode,r,t)}():function(){var r=e;return(0,tr.__call__)(r.collect_nodes_simplenode,r,t)}()}))},get collect_nodes_groupnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t.nodelist)}();if((0,tr.__t__)(null===a))return null;var i=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,Jr,(0,tr.__kwargtrans__)({delimiters:t.delimiters,nodelist:a,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();return i}))},get collect_node_argument(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_n))?function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t)}():function(){var r=e;return(0,tr.__call__)(r.collect_node,r,t)}()}))},get collect_nodes_macronode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t.spec,"_flm_main_text_argument"))){var a=t.spec._flm_main_text_argument,i=(0,tr.__call__)(tr.py_next,null,function(){for(var e,r=[],n=(0,tr.__call__)(tr.enumerate,null,t.spec.arguments_spec_list),_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_),o=i[0],l=i[1];(0,tr.__t__)((0,tr.__eq__)(l.argname,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,o))}return(0,tr.py_iter)(r)}()),o=(0,tr.__getitem__)(t.nodeargd.argnlist,i),l=function(){var t=e;return(0,tr.__call__)(t.collect_node_argument,t,o)}();if((0,tr.__t__)(l)){var s=(0,tr.__add__)((0,tr.__add__)((0,tr.__getslice__)(t.nodeargd.argnlist,0,i,1),[l]),(0,tr.__getslice__)(t.nodeargd.argnlist,(0,tr.__add__)(i,1),null,1));if((0,tr.__t__)(null!==l)){var c=function(){var e,r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,en,(0,tr.__kwargtrans__)({macroname:t.macroname,spec:t.spec,nodeargd:(e=Pr,(0,tr.__call__)(e.ParsedArguments,e,(0,tr.__kwargtrans__)({arguments_spec_list:t.nodeargd.arguments_spec_list,argnlist:s}))),macro_post_space:t.macro_post_space,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();c=function(){var e=t.spec;return(0,tr.__call__)(e.finalize_node,e,c)}();return c}}}return null}))},get collect_nodes_environmentnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t.nodelist)}();if((0,tr.__t__)(null===a))return null;var i=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,tn,(0,tr.__kwargtrans__)({environmentname:t.environmentname,nodeargd:t.nodeargd,nodelist:a,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();i=function(){var e=t.spec;return(0,tr.__call__)(e.finalize_node,e,i)}();return i}))},get collect_nodes_specialsnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=(0,tr.__call__)(tr.len,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}());return!(0,tr.__t__)((0,tr.__lt__)(a,(0,tr.__sub__)(e.chars,e.count)))||(e.count=(0,tr.__call__)(tr.__iadd__,null,e.count,a),null)}))},get collect_nodes_simplenode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r.estimate_simple_node_char_count,r,t)}();if((0,tr.__t__)((0,tr.__lt__)(a,(0,tr.__sub__)(e.chars,e.count))))return e.count=(0,tr.__call__)(tr.__iadd__,null,e.count,a),null;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Kr)}())){for(var i=t.chars,o=0,l=(0,tr.__call__)(tr.enumerate,null,i),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1];if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isalpha,e)}())))o=u;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__add__)(e.count,u),e.chars))&&(0,tr.__t__)((0,tr.__t__)(null===e.min_chars)||(0,tr.__ge__)((0,tr.__add__)(e.count,o),e.min_chars)))break}var d=(0,tr.__add__)((0,tr.__getslice__)(i,0,o,1),e.truncation_marker),h=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({chars:d,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();return h}return!(0,tr.__t__)((0,tr.__t__)(null!==e.min_chars)&&(0,tr.__lt__)(e.count,e.min_chars))||t}))},get estimate_simple_node_char_count(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Kr)}())?(0,tr.__call__)(tr.len,null,t.chars):(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,nn)}())?(0,tr.__floordiv__)((0,tr.__mul__)((0,tr.__call__)(tr.len,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()),2),3):((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Qr)}()),0)}))}}),ii=(tr=a("hoVWB"),tr=a("hoVWB"),{});t(ii,"LatexEnvironmentCallParser",(()=>fi)),t(ii,"LatexEnvironmentBodyContentsParser",(()=>mi)),t(ii,"LatexNoArgumentsParser",(()=>xi)),t(ii,"LatexEnvironmentBodyContentsParserInfo",(()=>vi)),t(ii,"ParsingStateDeltaExtendLatexContextDb",(()=>$i)),t(ii,"LatexContextDb",(()=>Wi)),t(ii,"LatexMacroCallParser",(()=>ui)),t(ii,"MacroSpec",(()=>eo)),t(ii,"EnvironmentSpec",(()=>to)),t(ii,"CallableSpec",(()=>Qi)),t(ii,"LatexArgumentsParser",(()=>Pi)),t(ii,"SpecialsSpec",(()=>ro)),t(ii,"LatexSpecialsCallParser",(()=>di)),a("hoVWB");tr=a("hoVWB");var oi={};(0,tr.__nest__)(oi,"",dr);var li="pylatexenc.macrospec._macrocallparser",si=function(){var e=oi;return(0,tr.__call__)(e.getLogger,e,li)}(),ci=(0,tr.__class__)("_LatexCallableParserBase",[la],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"token_call":t=l[s];break;case"spec_object":r=l[s];break;case"what":n=l[s];break;case"node_class":_=l[s];break;case"node_extra_kwargs":a=l[s];break;case"parse_body":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ci,"__init__"),null,e),e.token_call=t,e.spec_object=r,e.what=n,e.node_class=_,e.node_extra_kwargs=a,e.arguments_parser=e.spec_object.arguments_parser,e.parse_body=i,e.make_arguments_parsing_state_delta=e.spec_object.make_arguments_parsing_state_delta,e.make_body_parsing_state_delta=e.spec_object.make_body_parsing_state_delta,e.make_after_parsing_state_delta=e.spec_object.make_after_parsing_state_delta}))},get parse_call_arguments(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=(0,tr.__call__)(Tn,null,n,function(){var r=e;return(0,tr.__call__)(r.make_arguments_parsing_state_delta,r,(0,tr.__kwargtrans__)({token:e.token_call,latex_walker:t}))}(),t),s=function(){var n=t;return(0,tr.__call__)(n.parse_content,n,e.arguments_parser,r,l,(0,tr.__kwargtrans__)(_))}(),c=s[0],u=s[1];return(0,tr.tuple)([c,u])}))},get make_body_parser_and_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodeargd":t=i[o];break;case"arg_parsing_state_delta":r=i[o];break;case"parsing_state":n=i[o];break;case"latex_walker":_=i[o]}}}var l=(0,tr.__call__)(RuntimeError,null,"No default implementation of make_body_parser_and_parsing_state() in base class");throw l.__cause__=null,l}))},get parse_call_body(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"nodeargd":t=l[s];break;case"arg_parsing_state_delta":r=l[s];break;case"latex_walker":n=l[s];break;case"token_reader":_=l[s];break;case"parsing_state":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}var c=function(){var _=e;return(0,tr.__call__)(_.make_body_parser_and_parsing_state,_,t,r,a,n)}(),u=c[0],f=c[1],d=(c=function(){var e=n;return(0,tr.__call__)(e.parse_content,e,u,_,f,(0,tr.__kwargtrans__)(i))}(),c[0]),h=c[1];return(0,tr.tuple)([d,h])}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=e.token_call.pos;if((0,tr.__t__)(null!==e.arguments_parser))var s=function(){var a=e;return(0,tr.__call__)(a.parse_call_arguments,a,t,r,n,(0,tr.__kwargtrans__)(_))}(),c=s[0],u=s[1];else c=(s=(0,tr.tuple)([null,null]))[0],u=s[1];if((0,tr.__t__)(e.parse_body)){s=function(){var a=e;return(0,tr.__call__)(a.parse_call_body,a,c,u,t,r,n,(0,tr.__kwargtrans__)(_))}();var f=s[0],d=s[1]}else{(0,tr.__t__)(null!==u)&&function(){var t=si;(0,tr.__call__)(t.warning,t,"Parsing state delta (%r) ignored after arguments to %s!",u,e.what)}();f=null,d=null}(0,tr.__t__)(null!==d)&&function(){var e=si;(0,tr.__call__)(e.warning,e,"Parsing state delta (%r) ignored after body!",d)}();var h=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),p=(0,tr.__call__)(tr.dict,null,e.node_extra_kwargs);(0,tr.__t__)(e.parse_body)&&(0,tr.__setitem__)(p,"nodelist",f);var g=function(){var r=t;return(0,tr.__call__)(r.make_node,r,e.node_class,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({parsing_state:n,spec:e.spec_object,nodeargd:c,pos:l,pos_end:h},p)))}(),v=(g=function(){var t=e.spec_object;return(0,tr.__call__)(t.finalize_node,t,g)}(),function(){var r=e;return(0,tr.__call__)(r.make_after_parsing_state_delta,r,(0,tr.__kwargtrans__)({parsed_node:g,latex_walker:t}))}());return(0,tr.tuple)([g,v])}))}}),ui=(0,tr.__class__)("LatexMacroCallParser",[ci],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"token_call":t=_[a];break;case"macrospec":r=_[a]}}}var i=t.arg,o=t.post_space;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ui,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="macro call (\\{})";return(0,tr.__call__)(e.format,e,i)}(),node_class:en,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macroname:i,macro_post_space:o}))})),e.macroname=i,e.macro_post_space=o}))}}),fi=(0,tr.__class__)("LatexEnvironmentCallParser",[ci],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"token_call":t=_[a];break;case"environmentspec":r=_[a]}}}var i=t.arg;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fi,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="environment {}{}{}";return(0,tr.__call__)(e.format,e,"{",i,"}")}(),parse_body:!0,node_class:tn,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environmentname:i}))})),e.environmentname=i}))},get make_body_parser_and_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodeargd":t=i[o];break;case"arg_parsing_state_delta":r=i[o];break;case"parsing_state":n=i[o];break;case"latex_walker":_=i[o]}}}(0,tr.__t__)(null!==r)&&function(){var t=si;(0,tr.__call__)(t.warning,t,"Parsing carry-over information (%r) ignored after arguments to %s!",r,e.what)}();var l=function(){var n=e.spec_object;return(0,tr.__call__)(n.make_body_parser,n,e.token_call,t,r)}(),s=(0,tr.__call__)(Tn,null,n,function(){var n=e;return(0,tr.__call__)(n.make_body_parsing_state_delta,n,(0,tr.__kwargtrans__)({token:e.token_call,nodeargd:t,arg_parsing_state_delta:r,latex_walker:_}))}(),_);return(0,tr.tuple)([l,s])}))},get _handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"t":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":n=i[o];break;case"parsing_state":_=i[o]}}}!function(){var e=n;(0,tr.__call__)(e.move_past_token,e,t)}()}))},get _parse_body_token_stop_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"t":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"end_environment"))&&(0,tr.__eq__)(t.arg,e.environmentname))}))}}),di=(0,tr.__class__)("LatexSpecialsCallParser",[ci],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"token_call":t=_[a];break;case"specialsspec":r=_[a]}}}var i=r.specials_chars;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,di,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="specials ‘{}’";return(0,tr.__call__)(e.format,e,i)}(),node_class:rn,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({specials_chars:i}))})),e.specials_chars=i}))}}),hi=(tr=a("hoVWB"),{});(0,tr.__nest__)(hi,"",dr);var pi="pylatexenc.macrospec._environmentbodyparser",gi=function(){var e=hi;return(0,tr.__call__)(e.getLogger,e,pi)}(),vi=(0,tr.__class__)("LatexEnvironmentBodyContentsParserInfo",[ba],{__module__:pi,get parse_initial(){return(0,tr.__getcm__)(this,(function(e,t,r,n,_,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"allow_pre_space":r=l[s];break;case"latex_walker":n=l[s];break;case"token_reader":_=l[s];break;case"group_parsing_state":a=l[s];break;case"delimited_expression_parser":i=l[s]}}}return[]}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e.delimited_expression_parser;return(0,tr.__call__)(t.get_contents_parsing_state_delta,t)}();e.contents_parsing_state=(0,tr.__call__)(Tn,null,e.group_parsing_state,_,e.latex_walker),e.child_parsing_state_delta=function(){var t=e.delimited_expression_parser;return(0,tr.__call__)(t.get_child_parsing_state_delta,t)}(),e.parsed_delimiters=(0,tr.tuple)([function(){var t="\\begin{}{}{}";return(0,tr.__call__)(t.format,t,"{",e.delimited_expression_parser.environmentname,"}")}(),function(){var t="\\end{}{}{}";return(0,tr.__call__)(t.format,t,"{",e.delimited_expression_parser.environmentname,"}")}()])}))},get get_open_context_description(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return null}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"end_environment"))&&(0,tr.__eq__)(t.arg,e.delimited_expression_parser.environmentname))}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":n=i[o];break;case"parsing_state_delta":_=i[o]}}}if((0,tr.__t__)(null===n)){!function(){var e=gi;(0,tr.__call__)(e.warning,e,"environment body contents parser: parsed nodelist is None")}();n=function(){var r=t;return(0,tr.__call__)(r.make_nodelist,r,(0,tr.__kwargtrans__)({nodelist:[],parsing_state:e.contents_parsing_state}))}()}return(0,tr.tuple)([n,_])}))}}),mi=(0,tr.__class__)("LatexEnvironmentBodyContentsParser",[ka],{__module__:pi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"environmentname":t=o[l];break;case"contents_parsing_state_delta":r=o[l];break;case"child_parsing_state_delta":n=o[l];break;case"discard_parsing_state_delta":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,mi,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:null,discard_parsing_state_delta:_,delimited_expression_parser_info_class:vi},a))),e.environmentname=t,e.contents_parsing_state_delta=r,e.child_parsing_state_delta=n}))},get get_contents_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.contents_parsing_state_delta}))},get get_child_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.child_parsing_state_delta}))}}),yi=(tr=a("hoVWB"),{});(0,tr.__nest__)(yi,"",dr);var wi="pylatexenc.macrospec._argumentsparser",bi=function(){var e=yi;return(0,tr.__call__)(e.getLogger,e,wi)}(),ki=tr.str,xi=(0,tr.__class__)("LatexNoArgumentsParser",[la],{__module__:wi,get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=(0,tr.__call__)(Cr,null,(0,tr.__kwargtrans__)({arguments_spec_list:[],argnlist:[]}));return(0,tr.tuple)([l,null])}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return e.__class__===t.__class__}))}}),Pi=(0,tr.__class__)("LatexArgumentsParser",[la],{__module__:wi,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"arguments_spec_list":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Pi,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),(0,tr.__t__)(null===t))t=[];e.arguments_spec_list=function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,Ar)))?(0,tr.__call__)(Ar,null,a):a)}return r}()}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}for(var l=[],s=(0,tr.__call__)(tr.enumerate,null,e.arguments_spec_list),c=0;c<(0,tr.len)(s);c++){var u=(g=(0,tr.__getitem__)(s,c))[0],f=g[1],d=f.parser,h=function(){var e=r;return(0,tr.__call__)(e.peek_token_or_none,e,(0,tr.__kwargtrans__)({parsing_state:n}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,d,ki)))d=(0,tr.__call__)(Ua,null,d);var p=(0,tr.__call__)(Tn,null,n,f.parsing_state_delta,t),g=function(){var e,n=t;return(0,tr.__call__)(n.parse_content,n,d,r,p,(0,tr.__kwargtrans__)({open_context:(0,tr.tuple)([(e="Argument {}",(0,tr.__call__)(e.format,e,u)),h])}))}(),v=g[0],m=g[1];(0,tr.__t__)(null!==m)&&function(){var e=bi;(0,tr.__call__)(e.warning,e,"Parsing state changes information (%r) ignored in arguments!",m)}(),function(){var e=l;(0,tr.__call__)(e.append,e,v)}()}var y=(0,tr.__call__)(Cr,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.arguments_spec_list,argnlist:l}));return(0,tr.tuple)([y,null])}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return(0,tr.__t__)(e.__class__===t.__class__)&&(0,tr.__eq__)(e.arguments_spec_list,t.arguments_spec_list)}))}}),Oi=(tr=a("hoVWB"),{});t(Oi,"bisect_right",(()=>Mi)),t(Oi,"LineNumbersCalculator",(()=>Ii)),t(Oi,"PushPropOverride",(()=>ji)),t(Oi,"pylatexenc_deprecated_ver",(()=>Ri)),t(Oi,"pylatexenc_deprecated_2",(()=>Di)),t(Oi,"pylatexenc_deprecated_3",(()=>Fi)),t(Oi,"LazyDict",(()=>Bi)),t(Oi,"ChainMap",(()=>Ci));tr=a("hoVWB"),tr=a("hoVWB");var Ei={};(0,tr.__nest__)(Ei,"",dr);var Ai="collections",Ci=(function(){var e=Ei;(0,tr.__call__)(e.getLogger,e,Ai)}(),(0,tr.__class__)("ChainMap",[tr.object],{__module__:Ai,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}var _=(0,tr.tuple)([].slice.apply(arguments).slice(1,t+1))}else _=(0,tr.tuple)();e.maps=(0,tr.__t__)((0,tr.__call__)(tr.list,null,_))||[(0,tr.dict)({})]}))},get __missing__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}}var a=(0,tr.__call__)(tr.KeyError,null,t);throw a.__cause__=null,a}))},get __getitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}}for(var a=e.maps,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(!(0,tr.__in__)(t,o)))return(0,tr.__getitem__)(o,t)}return function(){var r=e;return(0,tr.__call__)(r.__missing__,r,t)}()}))},get py_get(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"key":t=_[a];break;case"py_default":r=_[a]}}}return(0,tr.__t__)((0,tr.__in__)(t,e))?(0,tr.__getitem__)(e,t):r}))},get __len__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.len,null,function(){var t=(0,tr.__call__)(tr.set,null);return(0,tr.__call__)(t.union,t,...e.maps)}())}))},get __iter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=(0,tr.dict)({}),a=(0,tr.__call__)(tr.py_reversed,null,e.maps),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);!function(){var e,t=_;(0,tr.__call__)(t.py_update,t,(e=tr.dict,(0,tr.__call__)(e.fromkeys,e,o)))}()}return(0,tr.__call__)(tr.py_iter,null,_)}))},[Symbol.iterator](){return this.__iter__()},get __contains__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}}return(0,tr.__call__)(tr.any,null,function(){for(var r,n=[],_=e.maps,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__in__)(t,i))}return(0,tr.py_iter)(n)}())}))},get __bool__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.any,null,e.maps)}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{!r}({!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.maps)}()}))},get fromkeys(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"cls":e=n[_];break;case"iterable":t=n[_]}}var a=(0,tr.tuple)([].slice.apply(arguments).slice(2,r+1))}else a=(0,tr.tuple)();return(0,tr.__call__)(e,null,function(){var e=tr.dict;return(0,tr.__call__)(e.fromkeys,e,t,...a)}())}))},get copy(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t,r=e;return(0,tr.__call__)(r.__class__,r,(t=(0,tr.__getitem__)(e.maps,0),(0,tr.__call__)(t.copy,t)),...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get __copy__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t,r=e;return(0,tr.__call__)(r.__class__,r,(t=(0,tr.__getitem__)(e.maps,0),(0,tr.__call__)(t.copy,t)),...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get new_child(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"m":t=n[_]}}}if((0,tr.__t__)(null===t))t=(0,tr.dict)({});return function(){var r=e;return(0,tr.__call__)(r.__class__,r,t,...e.maps)}()}))},get _get_parents(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e;return(0,tr.__call__)(t.__class__,t,...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get __setitem__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"key":t=_[a];break;case"value":r=_[a]}}}(0,tr.__setitem__)((0,tr.__getitem__)(e.maps,0),t,r)}))},get __delitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}}try{(0,tr.__getitem__)((0,tr.__getitem__)(e.maps,0),t)}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var a=(0,tr.__call__)(tr.KeyError,null,"Key not found in the first mapping: {}".format(t));throw a.__cause__=null,a}throw e}}))},get py_popitem(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}try{return function(){var t=(0,tr.__getitem__)(e.maps,0);return(0,tr.__call__)(t.py_popitem,t)}()}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var _=(0,tr.__call__)(tr.KeyError,null,"No keys found in the first mapping.");throw _.__cause__=null,_}throw e}}))},get py_pop(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}var a=(0,tr.tuple)([].slice.apply(arguments).slice(2,r+1))}else a=(0,tr.tuple)();try{return function(){var r=(0,tr.__getitem__)(e.maps,0);return(0,tr.__call__)(r.py_pop,r,t,...a)}()}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var i=(0,tr.__call__)(tr.KeyError,null,"Key not found in the first mapping: {}".format(t));throw i.__cause__=null,i}throw e}}))},get py_clear(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}!function(){var t=(0,tr.__getitem__)(e.maps,0);(0,tr.__call__)(t.py_clear,t)}()}))},get __ior__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}return function(){var r=(0,tr.__getitem__)(e.maps,0);(0,tr.__call__)(r.py_update,r,t)}(),e}))},get __or__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_collections_abc.Mapping))))return NotImplemented;var a=function(){var t=e;return(0,tr.__call__)(t.copy,t)}();return function(){var e=(0,tr.__getitem__)(a.maps,0);(0,tr.__call__)(e.py_update,e,t)}(),a}))},get __ror__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"other":t=n[_]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_collections_abc.Mapping))))return NotImplemented;for(var a=(0,tr.__call__)(tr.dict,null,t),i=(0,tr.__call__)(tr.py_reversed,null,e.maps),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);!function(){var e=a;(0,tr.__call__)(e.py_update,e,l)}()}return function(){var t=e;return(0,tr.__call__)(t.__class__,t,a)}()}))}}));Object.defineProperty(Ci,"parents",tr.property.call(Ci,Ci._get_parents));var Si={};t(Si,"bisect_right",(()=>Ti));tr=a("hoVWB");var Ti=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"a":e=n[_];break;case"x":t=n[_]}}}for(var a=0,i=(0,tr.__call__)(tr.len,null,e),o=null;(0,tr.__t__)(!0);){if((0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,a),t)))return a;if((0,tr.__t__)((0,tr.__le__)((0,tr.__getitem__)(e,(0,tr.__sub__)(i,1)),t)))return i;if((0,tr.__t__)((0,tr.__le__)((0,tr.__sub__)(i,a),2)))return(0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,(0,tr.__add__)(a,1)),t))?(0,tr.__add__)(a,1):(0,tr.__add__)(a,2);o=(0,tr.__floordiv__)((0,tr.__add__)(i,a),2);if((0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,o),t)))i=(0,tr.__add__)(o,1);else a=o}},Ni={};(0,tr.__nest__)(Ni,"",Si);var Li="pylatexenc._util",Mi=Ni.bisect_right,Ii=(0,tr.__class__)("LineNumbersCalculator",[tr.object],{__module__:Li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"line_number_offset":r=i[o];break;case"first_line_column_offset":n=i[o];break;case"column_offset":_=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ii,"__init__"),null,e),e.line_number_offset=r,e.first_line_column_offset=n,e.column_offset=_;e._pos_new_lines=(0,tr.__call__)(tr.list,null,(0,tr.__call__)((function*(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}yield 0;for(var _=0;(0,tr.__t__)((0,tr.__lt__)(_,(0,tr.__call__)(tr.len,null,e)));){_=function(){var t=e;return(0,tr.__call__)(t.find,t,"\n",_)}();if((0,tr.__t__)((0,tr.__eq__)(_,(0,tr.__neg__)(1))))return;_=(0,tr.__call__)(tr.__iadd__,null,_,1);yield _}}),null,t))}))},get pos_to_lineno_colno(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"pos":t=_[a];break;case"as_dict":r=_[a]}}}if((0,tr.__t__)(null===t))return(0,tr.__t__)(r)?(0,tr.dict)({lineno:null,colno:null}):(0,tr.tuple)([null,null]);var i=(0,tr.__sub__)((0,tr.__call__)(Mi,null,e._pos_new_lines,t),1);(0,tr.assert)((0,tr.__t__)((0,tr.__ge__)(i,0))&&(0,tr.__lt__)(i,(0,tr.__call__)(tr.len,null,e._pos_new_lines)));var o=(0,tr.__sub__)(t,(0,tr.__getitem__)(e._pos_new_lines,i));if((0,tr.__t__)((0,tr.__eq__)(i,0)))o=(0,tr.__call__)(tr.__iadd__,null,o,e.first_line_column_offset);else o=(0,tr.__call__)(tr.__iadd__,null,o,e.column_offset);i=(0,tr.__call__)(tr.__iadd__,null,i,e.line_number_offset);return(0,tr.__t__)(r)?(0,tr.dict)({lineno:i,colno:o}):(0,tr.tuple)([i,o])}))}}),ji=(0,tr.__class__)("PushPropOverride",[tr.object],{__module__:Li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"obj":t=a[i];break;case"propname":r=a[i];break;case"new_value":n=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ji,"__init__"),null,e),e.obj=t,e.propname=r,e.new_value=n}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)(null!==e.new_value)&&(e.initval=(0,tr.__call__)(tr.getattr,null,e.obj,e.propname),(0,tr.__call__)(tr.setattr,null,e.obj,e.propname,e.new_value)),e}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"py_metatype":t=a[i];break;case"value":r=a[i];break;case"traceback":n=a[i]}}}(0,tr.__t__)(null!==e.new_value)&&(0,tr.__call__)(tr.setattr,null,e.obj,e.propname,e.initval)}))}}),Ri=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Di=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Fi=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Bi=null,zi={},qi={};(0,tr.__nest__)(qi,"",ur),(0,tr.__nest__)(zi,"",dr);var Vi="pylatexenc.macrospec._latexcontextdb",Ui=(function(){var e=zi;(0,tr.__call__)(e.getLogger,e,Vi)}(),"__lctxdb_cat_"),Gi=qi.fn_unique_object_id,Wi=(0,tr.__class__)("LatexContextDb",[tr.object],{__module__:Vi,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wi,"__init__"),null,e,(0,tr.__kwargtrans__)(t)),e.category_list=[],e.d=(0,tr.dict)({}),e.frozen=!1,e.lookup_chain_maps=(0,tr.dict)({macros:function(){var e=Oi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}(),environments:function(){var e=Oi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}(),specials:function(){var e=Oi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}()}),e.unknown_macro_spec=null,e.unknown_environment_spec=null,e.unknown_specials_spec=null,e._autogen_category_counter=0}))},get freeze(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.frozen=!0}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="<LatexContextDb {:#x}{}>";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(Gi,null,e),(0,tr.__t__)(e.frozen)?"":" unfrozen")}()}))},get add_context_category(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=[];if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"category":t=s[c];break;case"macros":r=s[c];break;case"environments":n=s[c];break;case"specials":_=s[c];break;case"prepend":a=s[c];break;case"insert_before":i=s[c];break;case"insert_after":o=s[c]}}}if((0,tr.__t__)(e.frozen))throw(u=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.")).__cause__=null,u;if((0,tr.__t__)((0,tr.__t__)(null!==t)&&function(){var e=t;return(0,tr.__call__)(e.startswith,e,Ui)}())){var u=(0,tr.__call__)(tr.ValueError,null,function(){var e="Category name {} is unfortunately reserved for internal use";return(0,tr.__call__)(e.format,e,t)}());throw u.__cause__=null,u}if((0,tr.__t__)(null===t)){var f=function(){var t=e;return(0,tr.__call__)(t._get_new_autogen_category,t)}(),d=f[0];t=f[1];e._autogen_category_counter=(0,tr.__add__)(d,1)}if((0,tr.__t__)((0,tr.__in__)(t,e.category_list))){var u=(0,tr.__call__)(tr.ValueError,null,function(){var e="Category {} is already registered in the context database";return(0,tr.__call__)(e.format,e,t)}());throw u.__cause__=null,u}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,function(){for(var e,t=[],r=(0,tr.tuple)([a,i,o]),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);(0,tr.__t__)(_)&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,_))}return t}()),1)))throw(u=(0,tr.__call__)(tr.py_TypeError,null,"add_context_category(): You may only specify one of prepend=True, insert_before=... or insert_after=...")).__cause__=null,u;var h=(0,tr.dict)({macros:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],n=r,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.macroname,a]))}return t}()),environments:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=n,_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.environmentname,a]))}return t}()),specials:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=_,n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.specials_chars,a]))}return t}())});if((0,tr.__t__)(a))var p=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"listobj":e=n[_];break;case"item":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,0,t)}()};else if((0,tr.__t__)(i)){if((0,tr.__t__)((0,tr.__in__)(i,e.category_list)))var g=function(){var t=e.category_list;return(0,tr.__call__)(t.index,t,i)}();else g=0;p=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"listobj":e=n[_];break;case"item":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,g,t)}()}}else if((0,tr.__t__)(o)){if((0,tr.__t__)((0,tr.__in__)(o,e.category_list)))g=(0,tr.__add__)(function(){var t=e.category_list;return(0,tr.__call__)(t.index,t,o)}(),1);else g=(0,tr.__call__)(tr.len,null,e.category_list);p=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"listobj":e=n[_];break;case"item":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,g,t)}()}}else p=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"listobj":e=n[_];break;case"item":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.append,r,t)}()};(0,tr.__call__)(p,null,e.category_list,t);for(var v=(0,tr.tuple)(["macros","environments","specials"]),m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m);(0,tr.__call__)(p,null,(0,tr.__getitem__)(e.lookup_chain_maps,y).maps,(0,tr.__getitem__)(h,y))}(0,tr.__setitem__)(e.d,t,h)}))},get set_unknown_macro_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macrospec":t=n[_]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_macro_spec=t}))},get set_unknown_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"environmentspec":t=n[_]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_environment_spec=t}))},get set_unknown_specials_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"specialsspec":t=n[_]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_specials_spec=t}))},get categories(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.list,null,e.category_list)}))},get get_macro_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;case"raise_if_not_found":r=_[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"macros"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_macro_spec}throw t}}))},get get_environment_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"environmentname":t=_[a];break;case"raise_if_not_found":r=_[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"environments"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_environment_spec}throw t}}))},get get_specials_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"specials_chars":t=_[a];break;case"raise_if_not_found":r=_[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"specials"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_specials_spec}throw t}}))},get test_for_specials(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":n=a[i]}}}for(var o=0,l=null,s=e.category_list,c=0;c<(0,tr.len)(s);c++)for(var u=(0,tr.__getitem__)(s,c),f=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,u),"specials");return(0,tr.__call__)(t.py_keys,t)}(),d=0;d<(0,tr.len)(f);d++){var h=(0,tr.__getitem__)(f,d);if((0,tr.__t__)((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,h),o))&&function(){var e=t;return(0,tr.__call__)(e.startswith,e,h,r)}()))l=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.d,u),"specials"),h),o=(0,tr.__call__)(tr.len,null,h)}return l}))},get iter_macro_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"categories":t=n[_]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex macro spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"macros");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get iter_environment_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"categories":t=n[_]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex environment spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"environments");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get iter_specials_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"categories":t=n[_]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex environment spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"specials");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get filtered_context(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=[];if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"keep_categories":t=i[o];break;case"exclude_categories":r=i[o];break;case"keep_which":n=i[o];break;case"create_class":_=i[o]}}}if((0,tr.__t__)(null===_))_=e.__class__;var l=(0,tr.__call__)(_,null);l.unknown_macro_spec=e.unknown_macro_spec,l.unknown_environment_spec=e.unknown_environment_spec,l.unknown_specials_spec=e.unknown_specials_spec;for(var s=(0,tr.__t__)(!(0,tr.__t__)(n))||(0,tr.__in__)("macros",n),c=(0,tr.__t__)(!(0,tr.__t__)(n))||(0,tr.__in__)("environments",n),u=(0,tr.__t__)(!(0,tr.__t__)(n))||(0,tr.__in__)("specials",n),f=e.category_list,d=0;d<(0,tr.len)(f);d++){var h=(0,tr.__getitem__)(f,d);(0,tr.__t__)((0,tr.__t__)(t)&&!(0,tr.__in__)(h,t))||((0,tr.__t__)((0,tr.__t__)(r)&&(0,tr.__in__)(h,r))||function(){var t,r=l;(0,tr.__call__)(r.add_context_category,r,h,(0,tr.__kwargtrans__)({macros:(0,tr.__t__)(s)?(t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,h),"macros"),(0,tr.__call__)(t.py_values,t)):[],environments:(0,tr.__t__)(c)?function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,h),"environments");return(0,tr.__call__)(t.py_values,t)}():[],specials:(0,tr.__t__)(u)?function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,h),"specials");return(0,tr.__call__)(t.py_values,t)}():[]}))}())}return l}))},get _get_new_autogen_category(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(;(0,tr.__t__)(!0);){var _=(0,tr.__add__)(Ui,(0,tr.__call__)(tr.str,null,e._autogen_category_counter));if((0,tr.__t__)(!(0,tr.__in__)(_,e.category_list)))break;e._autogen_category_counter=(0,tr.__call__)(tr.__iadd__,null,e._autogen_category_counter,1)}return(0,tr.tuple)([e._autogen_category_counter,_])}))},get extended_with(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;var i,o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"category":t=s[c];break;case"macros":r=s[c];break;case"environments":n=s[c];break;case"specials":_=s[c];break;case"create_class":a=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if((0,tr.__t__)((0,tr.__in__)(t,e.category_list)))throw(i=tr.ValueError).__cause__=null,i;if((0,tr.__t__)(!(0,tr.__t__)(e.frozen)))throw(i=(0,tr.__call__)(RuntimeError,null,"You can only call extended_with() on frozen objects, because extended objects keep references to the original objects' data")).__cause__=null,i;if((0,tr.__t__)(null===a))a=e.__class__;var u=(0,tr.__call__)(a,null);if(u.unknown_macro_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_macro_spec",e.unknown_macro_spec)}(),u.unknown_environment_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_environment_spec",e.unknown_environment_spec)}(),u.unknown_specials_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_specials_spec",e.unknown_specials_spec)}(),(0,tr.__t__)(null===r))r=[];if((0,tr.__t__)(null===n))n=[];if((0,tr.__t__)(null===_))_=[];var f=(0,tr.dict)({macros:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],n=r,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.macroname,a]))}return t}()),environments:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=n,_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.environmentname,a]))}return t}()),specials:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=_,n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.specials_chars,a]))}return t}())});if(u.category_list=e.category_list,(0,tr.__t__)((0,tr.__t__)(null===t)&&(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e.category_list),0))&&function(){var t=(0,tr.__getitem__)(e.category_list,0);return(0,tr.__call__)(t.startswith,t,Ui)}())){var d=(0,tr.__getitem__)(e.category_list,0),h=(0,tr.__call__)(tr.dict,null,e.d),p=(0,tr.__getitem__)(h,d);p=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(p,"macros")),environments:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(p,"environments")),specials:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(p,"specials"))}));return function(){var e=(0,tr.__getitem__)(p,"macros");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"macros"))}(),function(){var e=(0,tr.__getitem__)(p,"environments");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"environments"))}(),function(){var e=(0,tr.__getitem__)(p,"specials");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"specials"))}(),(0,tr.__setitem__)(h,d,p),u.d=h,u.lookup_chain_maps=(0,tr.dict)({macros:function(){var t=Oi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(p,"macros"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"macros").maps,1,null,1))}(),environments:function(){var t=Oi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(p,"environments"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"environments").maps,1,null,1))}(),specials:function(){var t=Oi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(p,"specials"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"specials").maps,1,null,1))}()}),u._autogen_category_counter=e._autogen_category_counter,u.frozen=!0,u}if((0,tr.__t__)(null===t)){var g=function(){var t=e;return(0,tr.__call__)(t._get_new_autogen_category,t)}(),v=g[0];t=g[1];u._autogen_category_counter=(0,tr.__add__)(v,1)}else u._autogen_category_counter=e._autogen_category_counter;h=(0,tr.__call__)(tr.dict,null,e.d);return(0,tr.__setitem__)(h,t,f),u.category_list=(0,tr.__add__)([t],e.category_list),u.d=h,u.lookup_chain_maps=(0,tr.dict)({macros:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"macros");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"macros"))}(),environments:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"environments");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"environments"))}(),specials:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"specials");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"specials"))}()}),u.frozen=!0,u}))}}),$i=(0,tr.__class__)("ParsingStateDeltaExtendLatexContextDb",[Pn],{__module__:Vi,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"extend_latex_context":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$i,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["extend_latex_context","set_attributes"])},r))),e.extend_latex_context=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_state":t=_[a];break;case"latex_walker":r=_[a]}}}if((0,tr.__t__)(e.extend_latex_context)){if((0,tr.__t__)(e.set_attributes))var i=e.set_attributes;else i=(0,tr.dict)({});var o=function(){var r=t.latex_context;return(0,tr.__call__)(r.extended_with,r,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({category:null},e.extend_latex_context)))}();return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({latex_context:o},i)))}()}return(0,tr.__t__)(e.set_attributes)?function(){var r=t;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(e.set_attributes))}():t}))}}),Yi=(tr=a("hoVWB"),{});(0,tr.__nest__)(Yi,"",dr);var Hi="pylatexenc.macrospec._specclasses",Xi=(function(){var e=Yi;(0,tr.__call__)(e.getLogger,e,Hi)}(),tr.str),Zi=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Ki=(0,tr.__class__)("_NotSpecified",[tr.object],{__module__:Hi}),Ji=(0,tr.dict)({macro:ui,environment:fi,specials:di}),Qi=(0,tr.__class__)("CallableSpec",[jn],{__module__:Hi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o,l,s,c){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Ki;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=Ki;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=Ki;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=null;if(void 0===c||null!=c&&c.hasOwnProperty("__kwargtrans__"))c=null;var u=(0,tr.dict)();if(arguments.length){var f=arguments.length-1;if(arguments[f]&&arguments[f].hasOwnProperty("__kwargtrans__")){var d=arguments[f--];for(var h in d)switch(h){case"self":e=d[h];break;case"arguments_spec_list":t=d[h];break;case"spec_node_parser_type":r=d[h];break;case"macroname":n=d[h];break;case"environmentname":_=d[h];break;case"specials_chars":a=d[h];break;case"make_arguments_parsing_state_delta":i=d[h];break;case"make_body_parsing_state_delta":o=d[h];break;case"make_after_parsing_state_delta":l=d[h];break;case"make_body_parser":s=d[h];break;case"finalize_node":c=d[h];break;default:u[h]=d[h]}delete u.__kwargtrans__}}e.arguments_spec_list=t,e.spec_node_parser_type=r,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,Xi))&&(e.spec_node_parser_type=(0,tr.__getitem__)(Ji,r)),(0,tr.__t__)(n!==Ki)&&(e.macroname=n),(0,tr.__t__)(_!==Ki)&&(e.environmentname=_),(0,tr.__t__)(a!==Ki)&&(e.specials_chars=a),(0,tr.__t__)(null!==i)&&(e._fn_make_arguments_parsing_state_delta=i),(0,tr.__t__)(null!==o)&&(e._fn_make_body_parsing_state_delta=o),(0,tr.__t__)(null!==l)&&(e._fn_make_after_parsing_state_delta=l),(0,tr.__t__)(null!==s)&&(e._fn_make_body_parser=s),(0,tr.__t__)(null!==c)&&(e._fn_finalize_node=c);var p=(0,tr.__call__)(Zi,null,"CallableSpec_init_from_args_parser",e,t,u),g=function(){var e=u;return(0,tr.__call__)(e.py_pop,e,"body_parsing_state_delta",null)}();e.body_parsing_state_delta=g,(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qi,"__init__"),null,e,(0,tr.__kwargtrans__)(u)),(0,tr.__t__)(!(0,tr.__t__)(p))&&((0,tr.__t__)(e.arguments_spec_list)?e.arguments_parser=(0,tr.__call__)(Pi,null,t):e.arguments_parser=(0,tr.__call__)(xi,null))}))},get get_node_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.spec_node_parser_type,r,t,e)}()}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_finalize_node"))?function(){var r=e;return(0,tr.__call__)(r._fn_finalize_node,r,t)}():t}))},get make_arguments_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"token":t=_[a];break;case"latex_walker":r=_[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_arguments_parsing_state_delta"))?function(){var n=e;return(0,tr.__call__)(n._fn_make_arguments_parsing_state_delta,n,(0,tr.__kwargtrans__)({token:t,latex_walker:r}))}():null}))},get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"nodeargd":r=i[o];break;case"arg_parsing_state_delta":n=i[o];break;case"latex_walker":_=i[o]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_body_parsing_state_delta"))?function(){var a=e;return(0,tr.__call__)(a._fn_make_body_parsing_state_delta,a,(0,tr.__kwargtrans__)({token:t,nodeargd:r,arg_parsing_state_delta:n,latex_walker:_}))}():e.body_parsing_state_delta}))},get make_after_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsed_node":t=_[a];break;case"latex_walker":r=_[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_after_parsing_state_delta"))?function(){var n=e;return(0,tr.__call__)(n._fn_make_after_parsing_state_delta,n,(0,tr.__kwargtrans__)({parsed_node:t,latex_walker:r}))}():null}))},get needs_arguments(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=e.arguments_spec_list,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);if((0,tr.__t__)(function(){var e=i.spec;return(0,tr.__call__)(e.is_required,e)}()))return!0}return!1}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_body_parser"))?function(){var _=e;return(0,tr.__call__)(_._fn_make_body_parser,_,t,r,n)}():(0,tr.__call__)(mi,null,(0,tr.__kwargtrans__)({environmentname:t.arg}))}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.__class__.__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=(t=e.__dict__,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.startswith,e,"_")}()))&&(0,tr.__t__)(null!==o)&&!(0,tr.__in__)(i,(0,tr.tuple)(["spec_node_parser_type"])))&&function(){var e,t=r;(0,tr.__call__)(t.append,t,(e="{}={!r}",(0,tr.__call__)(e.format,e,i,o)))}()}return r}())),")")}))}}),eo=(0,tr.__class__)("MacroSpec",[Qi],{__module__:Hi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,eo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:ui,macroname:t},n)))}))}}),to=(0,tr.__class__)("EnvironmentSpec",[Qi],{__module__:Hi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,to,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:fi,environmentname:t},n)))}))}}),ro=(0,tr.__class__)("SpecialsSpec",[Qi],{__module__:Hi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ro,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:di,specials_chars:t},n)))}))}}),no={},_o={};(0,tr.__nest__)(_o,"",ur),(0,tr.__nest__)(no,"",dr),(0,tr.__nest__)({},"",Vn);var ao="pylatexenc.latexwalker._walker",io=Wi,oo=function(){var e=no;return(0,tr.__call__)(e.getLogger,e,ao)}(),lo=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}var n=(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else n=(0,tr.tuple)();return(0,tr.__call__)(tr.tuple,null,n)},so=_o.fn_unique_object_id,co=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},uo=(0,tr.__class__)("LatexWalker",[Pr.LatexWalkerBase],{__module__:ao,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"latex_context":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"default_parsing_state",null)}();if(e.s=t,e.line_number_offset=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"line_number_offset",null)}(),e.first_line_column_offset=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"first_line_column_offset",null)}(),e.column_offset=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"column_offset",null)}(),(0,tr.__t__)(null===e.line_number_offset)&&(e.line_number_offset=1),(0,tr.__t__)(null===e.first_line_column_offset)&&(e.first_line_column_offset=0),(0,tr.__t__)(null===e.column_offset)&&(e.column_offset=0),e._line_no_calc=null,e.debug_nodes=!1,(0,tr.__t__)(null!==o)){if(e.default_parsing_state=o,(0,tr.__t__)(null!==r))throw(l=(0,tr.__call__)(tr.ValueError,null,"You cannot specify both the default_parsing_state= and the latex_context= arguments")).__cause__=null,l}else{if((0,tr.__t__)(null===r)){r=(0,tr.__call__)(co,null,"LatexWalker_init_from_macro_dict",e,n);if((0,tr.__t__)(null===r))r=(0,tr.__call__)(io,null)}else if((0,tr.__t__)((0,tr.__in__)("macro_dict",n))){var l;throw(l=(0,tr.__call__)(tr.py_TypeError,null,"Cannot specify both `latex_context=` and `macro_dict=` arguments")).__cause__=null,l}(0,tr.__t__)(null!==r)?(!function(){var e=r;(0,tr.__call__)(e.freeze,e)}(),e.default_parsing_state=(0,tr.__call__)(Z_,null,(0,tr.__kwargtrans__)({s:e.s,latex_context:r}))):e.default_parsing_state=null}e.tolerant_parsing=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"tolerant_parsing",!0)}(),e.strict_braces=function(){var e=n;return(0,tr.__call__)(e.py_pop,e,"strict_braces",!1)}(),(0,tr.__t__)((0,tr.__in__)("keep_inline_math",n))&&(!function(){var e=Oi;(0,tr.__call__)(e.pylatexenc_deprecated_2,e,"The keep_inline_math=... option in LatexWalker() has no effect in pylatexenc 2.  Please consider using the more versatile option math_mode=... in LatexNodes2Text() instead.")}(),(0,tr.__getitem__)(n,"keep_inline_math")),(0,tr.__t__)(n)&&function(){var e,t=oo;(0,tr.__call__)(t.warning,t,"LatexWalker(): Unknown flag(s) encountered: %r",(e=n,(0,tr.__call__)(e.py_keys,e)))}(),(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uo,"__init__"),null,e)}))},make_latex_group_parser:Pa,make_latex_math_parser:Qa,get make_parsing_state(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}return function(){var r=e.default_parsing_state;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(t))}()}))},get parse_flags(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.dict)({tolerant_parsing:e.tolerant_parsing,strict_braces:e.strict_braces,keep_inline_math:null})}))},get _report_ignore_parse_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"exc":t=n[_]}}}!function(){var e=oo;(0,tr.__call__)(e.info,e,"Ignoring parse error (tolerant parsing mode): %s",t)}()}))},get check_tolerant_parsing_ignore_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"exc":t=n[_]}}}return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.tolerant_parsing))||!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Rr)))?t:(function(){var r=e;(0,tr.__call__)(r._report_ignore_parse_error,r,t)}(),null)}))},_ParsingContext:(0,tr.__class__)("_ParsingContext",[tr.object],{__module__:ao,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"latex_walker":t=_[a];break;case"open_context":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uo._ParsingContext,"__init__"),null,e),e.latex_walker=t,e.open_context=r,e.recovery_from_exception=null}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"exc_type":t=a[i];break;case"exc_value":r=a[i];break;case"exc_traceback":n=a[i]}}}if((0,tr.__t__)((0,tr.__t__)(null!==r)&&(0,tr.__call__)(tr.isinstance,null,r,Fr))){var o=r;if((0,tr.__t__)(e.open_context)){var l=(u=e.open_context)[0],s=u[1];(0,tr.__t__)(null!==l)&&((0,tr.__t__)(null!==s)?function(){var t,r=o.open_contexts;(0,tr.__call__)(r.append,r,(0,tr.__call__)(lo,null,l,s.pos,...(t=e.latex_walker,(0,tr.__call__)(t.pos_to_lineno_colno,t,s.pos))))}():function(){var e=o.open_contexts;(0,tr.__call__)(e.append,e,(0,tr.__call__)(lo,null,l,null,(0,tr.__neg__)(1),(0,tr.__neg__)(1)))}())}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"pos"))&&(0,tr.__t__)(null===o.lineno)&&null===o.colno)){var c=(0,tr.__call__)(tr.getattr,null,o,"pos"),u=function(){var t=e.latex_walker;return(0,tr.__call__)(t.pos_to_lineno_colno,t,c)}();o.lineno=u[0],o.colno=u[1]}o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.check_tolerant_parsing_ignore_error,t,o)}();return(0,tr.__t__)(null===o)?(e.recovery_from_exception=o,!0):null}}))},get perform_recovery_nodes_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"token_reader":t=n[_]}}}if((0,tr.__t__)(null===e.recovery_from_exception)){var a=(0,tr.__call__)(RuntimeError,null,"No exception had happened to try to recover nodes from");throw a.__cause__=null,a}var i=null,o=null,l=null;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_nodes")))i=e.recovery_from_exception.recovery_nodes;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_parsing_state_delta")))o=e.recovery_from_exception.recovery_parsing_state_delta;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_at_token")))l=e.recovery_from_exception.recovery_at_token;if((0,tr.__t__)(null!==l))!function(){var e=t;(0,tr.__call__)(e.move_to_token,e,l)}();else{var s=null;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_past_token")))s=e.recovery_from_exception.recovery_past_token;(0,tr.__t__)(null!==s)&&function(){var e=t;(0,tr.__call__)(e.move_past_token,e,s)}()}return(0,tr.tuple)([i,o])}))}}),get new_parsing_open_context(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"open_context_name":t=_[a];break;case"open_context_token":r=_[a]}}}return function(){var n=uo;return(0,tr.__call__)(n._ParsingContext,n,e,(0,tr.tuple)([t,r]))}()}))},get make_token_reader(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pos":t=n[_]}}}var a=function(){var t=Pr;return(0,tr.__call__)(t.LatexTokenReader,t,e.s,(0,tr.__kwargtrans__)({tolerant_parsing:e.tolerant_parsing}))}();return(0,tr.__t__)(null!==t)&&function(){var e=a;(0,tr.__call__)(e.move_to_pos_chars,e,t)}(),a}))},get parse_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"parser":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;case"open_context":_=i[o]}}}var l=null,s=null;if((0,tr.__t__)(null===r))l=function(){var t=e;return(0,tr.__call__)(t.make_token_reader,t)}();else l=r;if((0,tr.__t__)(null===n))s=function(){var t=e;return(0,tr.__call__)(t.make_parsing_state,t)}();else s=n;var c=null,u=null,f=(p=(0,tr.tuple)([null,null]))[0],d=p[1];if((0,tr.__t__)(_))f=(p=_)[0],d=p[1];!function(){var e=l;(0,tr.__call__)(e.cur_pos,e)}();var h=function(){var t=e;return(0,tr.__call__)(t.new_parsing_open_context,t,f,d)}();try{h.__enter__();try{var p=function(){var r=t;return(0,tr.__call__)(r.parse,r,(0,tr.__kwargtrans__)({latex_walker:e,token_reader:l,parsing_state:s}))}();c=p[0],u=p[1]}catch(e){if(!(0,tr.isinstance)(e,Ur))throw e;!function(){var e=oo;(0,tr.__call__)(e.warning,e,"End of stream encountered when parsing content with %s (%s)",t.__class__.__name__,f)}();c=(p=(0,tr.tuple)([null,null]))[0],u=p[1]}h.__exit__()}catch(e){if(!h.__exit__(e.name,e,e.stack))throw e}if((0,tr.__t__)(null!==h.recovery_from_exception))p=function(){var e=h;return(0,tr.__call__)(e.perform_recovery_nodes_info,e,l)}(),c=p[0],u=p[1];return(0,tr.tuple)([c,u])}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_reader":t=a[i];break;case"parsing_state":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}return function(){var _=Pr;return(0,tr.__call__)(_.LatexNodesCollector,_,e,t,r,(0,tr.__kwargtrans__)(n))}()}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node_class":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=(0,tr.tuple)([function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"pos")}(),function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"pos_end",null)}(),function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"parsing_state")}()]),o=i[0],l=i[1],s=i[2];if((0,tr.__t__)((0,tr.__t__)(null===l)&&(0,tr.__t__)(null!==o)&&(0,tr.__in__)("len",r))){!function(){var e=Oi;(0,tr.__call__)(e.pylatexenc_deprecated_3,e,"make_node(..., len=..., ...); use ‘pos_end=’ instead of ‘len=’")}();var c=(0,tr.__getitem__)(r,"len");l=(0,tr.__add__)(o,c)}var u=(0,tr.__call__)(t,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({pos:o,pos_end:l,parsing_state:s,latex_walker:e},r)));return(0,tr.__t__)(e.debug_nodes),u}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"parsing_state")}();return(0,tr.__call__)(_n,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({nodelist:t,parsing_state:i,latex_walker:e},r)))}))},get format_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"pos":t=n[_]}}}if((0,tr.__t__)(null===t))return"(location unknown)";var a=function(){var r=e;return(0,tr.__call__)(r.pos_to_lineno_colno,r,t)}(),i=a[0],o=a[1];return(0,tr.__call__)(zr,null,t,i,o)}))},get pos_to_lineno_colno(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"pos":t=_[a];break;case"as_dict":r=_[a]}}}return(0,tr.__t__)(null===e._line_no_calc)&&(e._line_no_calc=function(){var t=Oi;return(0,tr.__call__)(t.LineNumbersCalculator,t,e.s,(0,tr.__kwargtrans__)({line_number_offset:e.line_number_offset,first_line_column_offset:e.first_line_column_offset,column_offset:e.column_offset}))}()),function(){var n=e._line_no_calc;return(0,tr.__call__)(n.pos_to_lineno_colno,n,t,(0,tr.__kwargtrans__)({as_dict:r}))}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="<LatexWalker {}>";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(so,null,e))}()}))}}),fo={};(0,tr.__nest__)(fo,"",dr);!function(){var e=fo;(0,tr.__call__)(e.getLogger,e,"pylatexenc.latexwalker")}();var ho={},po={},go={};(0,tr.__nest__)(go,"",ur),(0,tr.__nest__)(ho,"",dr),(0,tr.__nest__)(po,"",Vn);var vo="flm.flmenvironment",mo=function(){var e=ho;return(0,tr.__call__)(e.getLogger,e,vo)}(),yo=go.fn_unique_object_id,wo=(0,tr.__class__)("FLMParsingState",[Pr.ParsingState],{__module__:vo,_fields:(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__call__)(tr.list,null,Pr.ParsingState._fields),["is_block_level"])),get set_fields(){return(0,tr.__get__)(this,(function(e){var t=null,r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"is_block_level":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wo,"set_fields"),null,e,(0,tr.__kwargtrans__)(r)),e.is_block_level=t}))}}),bo=(0,tr.__class__)("FLMParsingStateDeltaSetBlockLevel",[Pr.ParsingStateDelta],{__module__:vo,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"is_block_level":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bo,"__init__"),null,e,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({is_block_level:t})),_fields:(0,tr.tuple)(["is_block_level"])})),e.is_block_level=t}))}}),ko=function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"parser":e=i[o];break;case"argname":t=i[o];break;case"is_block_level":r=i[o];break;case"flm_doc":n=i[o];break;case"parsing_state_delta":_=i[o]}}}if((0,tr.__t__)(null===_)){if((0,tr.__t__)(null!==r))_=(0,tr.__call__)(bo,null,(0,tr.__kwargtrans__)({is_block_level:r}))}else if((0,tr.__t__)((0,tr.__t__)(null!==r)&&(0,tr.__ne__)(function(){var e=_.set_attributes;return(0,tr.__call__)(e.py_get,e,"is_block_level",null)}(),r))){var l=(0,tr.__call__)(tr.ValueError,null,"You specified a parsing_state_delta= to FLMArgumentSpec(...) which might not be compatible with the provided is_block_level= arg. It's your responsibility to make sure is_block_level is correctly applied in the parsing state delta you provided, and you should set is_block_level=None here.");throw l.__cause__=null,l}var s=function(){var r=Pr;return(0,tr.__call__)(r.LatexArgumentSpec,r,(0,tr.__kwargtrans__)({parser:e,argname:t,parsing_state_delta:_}))}();return s._flm_doc=n,s},xo=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("node"===n)e=r[n]}}for(var _=function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}(),a=(0,tr.__call__)(_,null,(0,tr.__kwargtrans__)((0,tr.__call__)(tr.dict,null,function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([a,(0,tr.__call__)(tr.getattr,null,e,a)]))}return r}()))),i=(0,tr.__call__)(tr.dir,null,e),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.startswith,e,"flm")}())||function(){var e=l;return(0,tr.__call__)(e.startswith,e,"_flm")}())&&(0,tr.__call__)(tr.setattr,null,a,l,(0,tr.__call__)(tr.getattr,null,e,l))}return a},Po=(0,tr.__class__)("BlocksBuilder",[tr.object],{__module__:vo,rx_space:function(){var e=po;return(0,tr.__call__)(e.compile,e,"[ \\t\\n\\r]+")}(),rx_only_space:function(){var e=po;return(0,tr.__call__)(e.compile,e,"^[ \\t\\n\\r]+$")}(),get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"latexnodelist":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Po,"__init__"),null,e),e.latexnodelist=t,e.pending_paragraph_nodes=[],e.blocks=[]}))},get flush_paragraph(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if(!(0,tr.__t__)(!(0,tr.__t__)(e.pending_paragraph_nodes))){var _=e.pending_paragraph_nodes,a=(_=function(){var t=e;return(0,tr.__call__)(t.finalize_paragraph,t,_)}(),function(){var t=Or;return(0,tr.__call__)(t.LatexNodeList,t,_,(0,tr.__kwargtrans__)({parsing_state:e.latexnodelist.parsing_state,latex_walker:e.latexnodelist.latex_walker}))}());a.flm_nodelist_finalized=!0,function(){var t=e.blocks;(0,tr.__call__)(t.append,t,a)}(),e.pending_paragraph_nodes=[]}}))},get simplify_whitespace_chars(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"is_head":r=a[i];break;case"is_tail":n=a[i]}}}var o=function(){var r=e.rx_space;return(0,tr.__call__)(r.sub,r," ",t)}();if((0,tr.__t__)(r))o=function(){var e=o;return(0,tr.__call__)(e.lstrip,e)}();if((0,tr.__t__)(n))o=function(){var e=o;return(0,tr.__call__)(e.rstrip,e)}();return o}))},get finalize_paragraph(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"paragraph_nodes":t=n[_]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))return t;for(var a=!0,i=null,o=!1,l=null,s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(p=(0,tr.__getitem__)(c,u))[0],d=p[1];if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,s),0))&&(0,tr.__t__)(null!==l)&&(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,l,"flm_is_block_heading")))a=!0;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,d,"flm_strip_preceding_whitespace"))&&(0,tr.__call__)(tr.getattr,null,d,"flm_strip_preceding_whitespace"))&&(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(i,"is_tail",!0),(0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCharsNode)}())){var h=(0,tr.dict)({is_head:a,is_tail:!1});(0,tr.__t__)(o)&&(0,tr.__setitem__)(h,"is_head",!0),function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)([d,h,f]))}();a=!1,i=h}else if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCommentNode)}()))){if((0,tr.__t__)(null===l))l=d;a=!1,i=null}o=!1;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,d,"flm_strip_following_whitespace"))&&(0,tr.__call__)(tr.getattr,null,d,"flm_strip_following_whitespace")))o=!0}(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(i,"is_tail",!0);for(c=s,u=0;u<(0,tr.len)(c);u++){var p,g=(p=(0,tr.__getitem__)(c,u))[0],v=(h=p[1],p[2]),m=function(){var t=e;return(0,tr.__call__)(t.simplify_whitespace_chars,t,g.chars,(0,tr.__kwargtrans__)({is_head:(0,tr.__getitem__)(h,"is_head"),is_tail:(0,tr.__getitem__)(h,"is_tail")}))}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.getattr,null,g,"flm_chars_value",null),m))){var y=(0,tr.__call__)(xo,null,g);y.flm_chars_value=m,(0,tr.__setitem__)(t,v,y)}}return t}))},get build_blocks(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=e.latexnodelist;(0,tr.assert)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.blocks),0));for(var a=_,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_level"))?(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_level"):null,s=!!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_heading");if((0,tr.__t__)(l)){if(function(){var t=e;(0,tr.__call__)(t.flush_paragraph,t)}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_paragraph_break_marker"))&&(0,tr.__call__)(tr.getattr,null,o,"flm_is_paragraph_break_marker")))continue;if((0,tr.__t__)(s)){!function(){var t=e.pending_paragraph_nodes;(0,tr.__call__)(t.append,t,o)}();continue}!function(){var t=e.blocks;(0,tr.__call__)(t.append,t,o)}()}else{var c=!0;if((0,tr.__t__)(!(0,tr.__t__)(e.pending_paragraph_nodes)))c=!1;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.pending_paragraph_nodes),1))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,(0,tr.__getitem__)(e.pending_paragraph_nodes,0),"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,(0,tr.__getitem__)(e.pending_paragraph_nodes,0),"flm_is_block_heading")))c=!1;(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCharsNode)}())&&function(){var t=e.rx_only_space;return(0,tr.__call__)(t.match,t,o.chars)}())||function(){var t=e.pending_paragraph_nodes;(0,tr.__call__)(t.append,t,o)}()}}return function(){var t=e;(0,tr.__call__)(t.flush_paragraph,t)}(),e.blocks}))}}),Oo=(0,tr.__class__)("NodesFinalizer",[tr.object],{__module__:vo,get finalize_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"latexnodelist":t=n[_]}}}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_nodelist_finalized"))&&(0,tr.__call__)(tr.getattr,null,t,"flm_nodelist_finalized")))return t;t.flm_nodelist_finalized=!0;var a=t.parsing_state.is_block_level;if((0,tr.__t__)(null===a))a=function(){var r=e;return(0,tr.__call__)(r.infer_is_block_level_nodelist,r,t)}();if(t.flm_is_block_level=a,(0,tr.__t__)(!(0,tr.__t__)(a)))for(var i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"flm_is_block_level"))&&(0,tr.__call__)(tr.getattr,null,l,"flm_is_block_level"))){var s=(0,tr.__call__)(Fr,null,(0,tr.__kwargtrans__)({msg:"Content is not allowed in inline text (not block level): ‘{}’".format(function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}()),pos:l.pos}));throw s.__cause__=null,s}}if((0,tr.__t__)(a)){var c=function(){var r=e;return(0,tr.__call__)(r.make_blocks_builder,r,t)}(),u=function(){var e=c;return(0,tr.__call__)(e.build_blocks,e)}();t.flm_blocks=u}return t}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_chars_value")))&&function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCharsNode)}())&&(t.flm_chars_value=function(){var r=e;return(0,tr.__call__)(r.simplify_whitespace_chars_inline,r,t.chars)}()),t}))},get infer_is_block_level_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"latexnodelist":t=n[_]}}}for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_level"))?(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_level"):null;if((0,tr.__t__)(l))return!0}return!1}))},get simplify_whitespace_chars_inline(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"chars":t=n[_]}}}return function(){var r=e.rx_inline_space;return(0,tr.__call__)(r.sub,r," ",t)}()}))},make_blocks_builder:Po,rx_inline_space:Po.rx_space}),Eo=(0,tr.__class__)("FLMLatexWalker",[uo],{__module__:vo,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=!1,n=null,_=null,a=null,i=null,o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"flm_text":var u=s[c];break;case"default_parsing_state":var f=s[c];break;case"flm_environment":var d=s[c];break;case"parsing_state_event_handler":t=s[c];break;case"standalone_mode":r=s[c];break;case"resource_info":n=s[c];break;case"parsing_mode":_=s[c];break;case"what":a=s[c];break;case"input_lineno_colno_offsets":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if((0,tr.__t__)(!(0,tr.__t__)(i)))i=(0,tr.dict)({});(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Eo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({s:u,default_parsing_state:f,line_number_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"line_number_offset",null)}(),first_line_column_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"first_line_column_offset",null)}(),column_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"column_offset",null)}()},o))),e.flm_environment=d,e.standalone_mode=r,e.resource_info=n,e.what=a,e.parsing_mode=_,e._parsing_state_event_handler=t,e.input_lineno_colno_offsets=i}))},get parsing_state_event_handler(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)(e._parsing_state_event_handler)?e._parsing_state_event_handler:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Eo,"parsing_state_event_handler"),null,e)}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;case"parsing_state":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}var o=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Eo,"make_nodelist"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({nodelist:t,parsing_state:r},n))),l=function(){var t=e.flm_environment;return(0,tr.__call__)(t.finalize_nodelist,t,o)}();if((0,tr.__t__)(null===l)){var s=(0,tr.__call__)(tr.ValueError,null,"Environment's finalize_nodelist() returned None");throw s.__cause__=null,s}return l}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node_class":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Eo,"make_node"),null,e,t,(0,tr.__kwargtrans__)(r)),o=function(){var t=e.flm_environment;return(0,tr.__call__)(t.finalize_node,t,i)}();if((0,tr.__t__)(null===o)){var l=(0,tr.__call__)(tr.ValueError,null,"Environment's finalize_node() returned None");throw l.__cause__=null,l}return o}))},get filter_whitespace_comments_nodes(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodelist":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.filter,r,(0,tr.__kwargtrans__)({node_predicate_fn:e._filter_whitespace_comments_nodes_predicate,skip_none:!0,skip_comments:!0,skip_whitespace_char_nodes:!0}))}()}))},get _filter_whitespace_comments_nodes_predicate(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return!(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_paragraph_break_marker"))&&(0,tr.__call__)(tr.getattr,null,t,"flm_is_paragraph_break_marker"))}))}}),Ao=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("features"===n)e=r[n]}}for(var _=(0,tr.__call__)(tr.set,null,function(){for(var t,r=[],n=e,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,a.feature_name)}return r}()),a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(null===o.feature_dependencies))for(var l=o.feature_dependencies,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)(!(0,tr.__in__)(c,_))){var u=(0,tr.__call__)(tr.ValueError,null,"Feature ‘{}’ ({}) has unmet dependency ‘{}’".format(o.feature_name,(0,tr.__call__)(tr.repr,null,o),c));throw u.__cause__=null,u}}}},Co=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("features"===n)e=r[n]}}for(var _=(0,tr.__call__)(tr.list,null,e),a=(0,tr.dict)({}),i=_,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)((0,tr.__in__)(l.feature_name,a)))throw(v=(0,tr.__call__)(tr.ValueError,null,"Duplicate feature detected: feature {} has the same name (‘{}’) as the as already-included feature {}".format((0,tr.__call__)(tr.repr,null,l),l.feature_name,(0,tr.__getitem__)(a,l.feature_name)))).__cause__=null,v;(0,tr.__setitem__)(a,l.feature_name,l)}!function(){var e=_;(0,tr.__call__)(e.py_sort,e,(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("f"===n)e=r[n]}}return e.feature_name}}))}(),(0,tr.__call__)(Ao,null,_);for(var s=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("f"===n)e=r[n]}}var _=(0,tr.__call__)(tr.set,null);if((0,tr.__t__)(null!==e.feature_dependencies))for(var i=e.feature_dependencies,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);!function(){var e=_;(0,tr.__call__)(e.add,e,l)}()}if((0,tr.__t__)(null!==e.feature_optional_dependencies))for(i=e.feature_optional_dependencies,o=0;o<(0,tr.len)(i);o++){var s=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__in__)(s,a))&&function(){var e=_;(0,tr.__call__)(e.add,e,s)}()}return(0,tr.__call__)(tr.sorted,null,(0,tr.__call__)(tr.list,null,_))},c=(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=(e=a,(0,tr.__call__)(e.py_items,e)),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),i=_[0],o=_[1];!function(){var e=t;(0,tr.__call__)(e.append,e,(0,tr.tuple)([i,(0,tr.__call__)(s,null,o)]))}()}return t}()),u=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"fparentname":e=n[_];break;case"all_feature_dependencies":t=n[_]}}}for(var a=(0,tr.__call__)(tr.set,null),i=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),o=0;o<(0,tr.len)(i);o++)for(var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u);(0,tr.__t__)((0,tr.__eq__)(f,e))&&function(){var e=a;(0,tr.__call__)(e.add,e,s)}()}return(0,tr.__call__)(tr.sorted,null,(0,tr.__call__)(tr.list,null,a))},f=[],d=function(){for(var e,t=[],r=(0,tr.__call__)(tr.py_reversed,null,_),n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(c,a.feature_name)),0))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,a))}return t}();(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,d),0));){var h=function(){var e=d;return(0,tr.__call__)(e.py_pop,e)}();!function(){var e=f;(0,tr.__call__)(e.append,e,h)}();var p=h.feature_name;for(i=(0,tr.__call__)(u,null,p,c),o=0;o<(0,tr.len)(i);o++){var g=(0,tr.__getitem__)(i,o);!function(){var e=(0,tr.__getitem__)(c,g);(0,tr.__call__)(e.remove,e,p)}(),(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(c,g)),0))&&function(){var e=d;(0,tr.__call__)(e.insert,e,0,(0,tr.__getitem__)(a,g))}()}}var v,m=[];for(i=function(){var e=c;return(0,tr.__call__)(e.py_items,e)}(),o=0;o<(0,tr.len)(i);o++){var y=(0,tr.__getitem__)(i,o),w=y[0],b=y[1];(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,b),0))&&function(){var e=m;(0,tr.__call__)(e.append,e,(0,tr.__add__)("‘{}’ → ".format(w),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=b,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,"‘{}’".format(_))}return t}())))}()}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,m),0)))throw(v=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("The feature dependency graph has a cycle!  Problematic dependencies:".format(),(0,tr.__call__)("; ".join,"; ",m)))).__cause__=null,v;if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,f),(0,tr.__call__)(tr.len,null,_))))throw(v=(0,tr.__call__)(RuntimeError,null,"Internal error, we didn't get all the features right when ordering them!")).__cause__=null,v;return(0,tr.tuple)([f,a])},So=(0,tr.__class__)("FLMEnvironment",[tr.object],{__module__:vo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=!1,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"features":t=o[l];break;case"parsing_state":r=o[l];break;case"latex_context":n=o[l];break;case"tolerant_parsing":_=o[l];break;case"parsing_mode_deltas":a=o[l]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,So,"__init__"),null,e),e.latex_context=n,e.parsing_state=r,e.parsing_mode_deltas=(0,tr.__t__)(a)?(0,tr.__call__)(tr.dict,null,a):(0,tr.dict)({});var s=(0,tr.__call__)(Co,null,t);if(e.features=s[0],e.features_by_name=s[1],e.tolerant_parsing=_,e._nodes_finalizer=(0,tr.__call__)(Oo,null),(0,tr.__t__)(null===e.parsing_state.latex_context)){for(var c=e.features,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=function(){var e=f;return(0,tr.__call__)(e.add_latex_context_definitions,e)}();if((0,tr.__t__)(null!==d)){d=(0,tr.__call__)(tr.dict,null,d);(0,tr.__t__)((0,tr.__call__)(tr.len,null,d))&&(function(){var e=d;(0,tr.__call__)(e.py_update,e,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({prepend:!0})))}(),function(){var t=e.latex_context;(0,tr.__call__)(t.add_context_category,t,"feature--{}".format(f.feature_name),(0,tr.__kwargtrans__)(d))}())}}!function(){var t=e.latex_context;(0,tr.__call__)(t.freeze,t)}(),e.parsing_state.latex_context=e.latex_context}else if((0,tr.__t__)(null!==e.latex_context)){var h=(0,tr.__call__)(RuntimeError,null,"The specified `parsing_state` instance already has a latex_context set");throw h.__cause__=null,h}}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__t__)((0,tr.__in__)(t,e.features_by_name))&&null!==(0,tr.__getitem__)(e.features_by_name,t)}))},get feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"feature_name":t=n[_]}}}return(0,tr.__getitem__)(e.features_by_name,t)}))},parsing_state_event_handler:null,get make_latex_walker(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=null,_=null,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"flm_text":t=l[s];break;case"standalone_mode":var c=l[s];break;case"is_block_level":var u=l[s];break;case"parsing_mode":r=l[s];break;case"resource_info":n=l[s];break;case"tolerant_parsing":_=l[s];break;case"what":a=l[s];break;case"input_lineno_colno_offsets":i=l[s]}}}var f=function(){var t=e;return(0,tr.__call__)(t.make_parsing_state,t,(0,tr.__kwargtrans__)({is_block_level:u,parsing_mode:r}))}();if((0,tr.__t__)(null===_))_=e.tolerant_parsing;return(0,tr.__call__)(Eo,null,(0,tr.__kwargtrans__)({flm_text:t,default_parsing_state:f,tolerant_parsing:_,flm_environment:e,standalone_mode:c,resource_info:n,what:a,parsing_state_event_handler:e.parsing_state_event_handler,input_lineno_colno_offsets:i}))}))},get define_parsing_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"parsing_mode":t=_[a];break;case"parsing_mode_delta":r=_[a]}}}if((0,tr.__t__)((0,tr.__in__)(t,e.parsing_mode_deltas))){var i=(0,tr.__call__)(tr.ValueError,null,"Parsing mode ‘{}’ already defined!".format(t));throw i.__cause__=null,i}(0,tr.__setitem__)(e.parsing_mode_deltas,t,r)}))},get make_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"is_block_level":t=_[a];break;case"parsing_mode":r=_[a]}}}var i=e.parsing_state;if((0,tr.__t__)(null!==r)){try{var o=(0,tr.__getitem__)(e.parsing_mode_deltas,r)}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var l=(0,tr.__call__)(tr.ValueError,null,"Invalid parsing_mode ‘{}’".format(r));throw l.__cause__=null,l}throw e}if((0,tr.__t__)(null!==o))i=function(){var e=o;return(0,tr.__call__)(e.get_updated_parsing_state,e,i,(0,tr.__kwargtrans__)({latex_walker:null}))}()}var s=(0,tr.dict)({});return(0,tr.__t__)(null!==t)&&(0,tr.__setitem__)(s,"is_block_level",t),function(){var e=i;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)(s))}()}))},get make_fragment(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"flm_text":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_i))){for(var i=t,o=(0,tr.tuple)(["is_block_level","standalone_mode"]),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(s,r))&&(0,tr.__t__)(null!==(0,tr.__getitem__)(r,s))&&(0,tr.__ne__)((0,tr.__getitem__)(r,s),(0,tr.__call__)(tr.getattr,null,i,s)))){var c=(0,tr.__call__)(tr.ValueError,null,"make_fragment(): FLMFragment instance specified but its ‘{}’ ({}) differs with requested ‘{}’ ({})".format(s,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,i,s)),s,(0,tr.__getitem__)(r,s)));throw c.__cause__=null,c}}return i}try{return(0,tr.__call__)(_i,null,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environment:e},r)))}catch(c){throw(0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.py_get,e,"silent",!1)}()))&&function(){var e,n,_=mo;(0,tr.__call__)(_.error,_,(n="Error compiling fragment for {}\nContent was:\n‘{}’\n",(0,tr.__call__)(n.format,n,(e=r,(0,tr.__call__)(e.py_get,e,"what","(unknown)")),t)),(0,tr.__kwargtrans__)({exc_info:!0}))}(),c.__cause__=null,c}}))},get make_document(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_callback":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(ia,null,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environment:e},r)));return function(){var e=i;(0,tr.__call__)(e.initialize,e)}(),i}))},get get_features_selection(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"enable_features":t=n[_]}}}if((0,tr.__t__)(null===t))return e.features;var a=function(){for(var r,n=[],_=t,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);r=void 0,r=n,(0,tr.__call__)(r.append,r,(0,tr.__getitem__)(e.features_by_name,i))}return n}();return(0,tr.__call__)(Ao,null,a),a}))},environment_get_located_error_message:null,get get_located_error_message(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"exception_object":t=n[_]}}}return(0,tr.__t__)(null!==e.environment_get_located_error_message)?function(){var r=e;return(0,tr.__call__)(r.environment_get_located_error_message,r,t)}():function(){var e=(0,tr.__call__)(Br,null,t);return(0,tr.__call__)(e.to_display_string,e)}()}))},get finalize_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"nodelist":t=n[_]}}}var a=function(){var r=e._nodes_finalizer;return(0,tr.__call__)(r.finalize_nodelist,r,t)}();return a}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}t=function(){var r=e._nodes_finalizer;return(0,tr.__call__)(r.finalize_node,r,t)}();return t._flm_node_id=(0,tr.__call__)(yo,null,t),t}))}}),To=function(){var e=null,t=!0,r="%%",n="",_=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"force_block_level":e=i[o];break;case"enable_comments":t=i[o];break;case"comment_start":r=i[o];break;case"extra_forbidden_characters":n=i[o];break;case"dollar_inline_math_mode":_=i[o]}}}var l=(0,tr.__call__)(tr.str,null,n);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(_))&&!(0,tr.__in__)("$",l)))l=(0,tr.__call__)(tr.__iadd__,null,l,"$");if((0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(t))||(0,tr.__ne__)(r,"%"))&&!(0,tr.__in__)("%",l)))l=(0,tr.__call__)(tr.__iadd__,null,l,"%");var s=[(0,tr.tuple)(["\\(","\\)"])];return(0,tr.__t__)(_)&&function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)(["$","$"]))}(),(0,tr.__call__)(wo,null,(0,tr.__kwargtrans__)({is_block_level:e,latex_context:null,enable_comments:t,comment_start:r,latex_inline_math_delimiters:s,latex_display_math_delimiters:[(0,tr.tuple)(["\\[","\\]"])],forbidden_characters:l}))},No=(0,tr.__class__)("FLMLatexWalkerMathContextParsingStateEventHandler",[Pr.LatexWalkerParsingStateEventHandler],{__module__:vo,math_mode_extend_context:(0,tr.dict)({unknown_macro_spec:function(){var e=ii;return(0,tr.__call__)(e.MacroSpec,e,"")}(),unknown_environment_spec:function(){var e=ii;return(0,tr.__call__)(e.EnvironmentSpec,e,"")}(),unknown_specials_spec:function(){var e=ii;return(0,tr.__call__)(e.SpecialsSpec,e,"")}()}),get enter_math_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"math_mode_delimiter":t=_[a];break;case"trigger_token":r=_[a]}}}var i=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!0,math_mode_delimiter:t}));return function(){var t=ii;return(0,tr.__call__)(t.ParsingStateDeltaExtendLatexContextDb,t,(0,tr.__kwargtrans__)({set_attributes:i,extend_latex_context:e.math_mode_extend_context}))}()}))},get leave_math_mode(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"trigger_token":t=n[_]}}}return function(){var e=ii;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!1,math_mode_delimiter:null})),extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({unknown_macro_spec:null,unknown_environment_spec:null,unknown_specials_spec:null}))}))}()}))}}),Lo=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("exception_object"===n)e=r[n]}}var _=null,a=e.error_type_info;if((0,tr.__t__)(a)){var i=(0,tr.__getitem__)(a,"what");if((0,tr.__t__)((0,tr.__eq__)(i,"token_forbidden_character")))if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(a,"forbidden_character"),"%")))_="Single percent signs are not allowed here. Use ‘\\%’ to typeset a literal percent sign, and ‘%%’ to start a comment.";else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(a,"forbidden_character"),"$")))_="You can't use ‘$’ here. LaTeX math should be typeset using \\(...\\) for inline math and \\[...\\] for unnumbered display equations. Use ‘\\$’ for a literal dollar sign."}if((0,tr.__t__)(!(0,tr.__t__)(_)))_=e.msg;var o=function(){var t=Pr;return(0,tr.__call__)(t.LatexWalkerLocatedErrorFormatter,t,e)}();_=(0,tr.__call__)(tr.__iadd__,null,_,function(){var e=o;return(0,tr.__call__)(e.format_full_traceback,e)}());return _},Mo=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"argvalue":e=_[a];break;case"latex_walker":t=_[a];break;case"parsing_state":r=_[a]}}}if((0,tr.__t__)(null===e))return null;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str)))e=function(){var n=t;return(0,tr.__call__)(n.make_node,n,Or.LatexCharsNode,(0,tr.__kwargtrans__)({chars:e,pos:null,pos_end:null,parsing_state:r}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,Or.LatexGroupNode)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,Or.LatexNodeList)))var i=e;else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.list)))i=function(){var n=t;return(0,tr.__call__)(n.make_nodelist,n,e,(0,tr.__kwargtrans__)({parsing_state:r}))}();else i=function(){var n=t;return(0,tr.__call__)(n.make_nodelist,n,[e],(0,tr.__kwargtrans__)({parsing_state:r}))}();var o=function(){var e=t;return(0,tr.__call__)(e.make_node,e,Or.LatexGroupNode,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["",""]),nodelist:i,pos:i.pos,pos_end:i.pos_end,parsing_state:r}))}();return o},Io=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"flm_spec":e=n[_];break;case"args":t=n[_];break;case"latex_walker":var a=n[_];break;case"parsing_state":var i=n[_]}}}var o=function(){for(var t,r=[],n=e.arguments_spec_list,_=0;_<(0,tr.len)(n);_++){(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,null)}return r}();if((0,tr.__t__)(null===t))return o;for(var l=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){for(var c=(p=(0,tr.__getitem__)(l,s))[0],u=p[1],f=null,d=(0,tr.__call__)(tr.enumerate,null,e.arguments_spec_list),h=0;h<(0,tr.len)(d);h++){var p,g=(p=(0,tr.__getitem__)(d,h))[0],v=p[1];if((0,tr.__t__)((0,tr.__eq__)(v.argname,c))){f=g;break}}if((0,tr.__t__)(null===f)){!function(){var t=mo;(0,tr.__call__)(t.error,t,"Cannot find argument %r in spec %r",c,e.arguments_spec_list)}();var m=(0,tr.__call__)(tr.ValueError,null,"No argument named ‘{}’ in spec".format(c));throw m.__cause__=null,m}(0,tr.__setitem__)(o,f,(0,tr.__call__)(Mo,null,u,a,i))}return o},jo=function(e,t){var r=null,n=null,_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"node_type":e=i[o];break;case"flm_spec":t=i[o];break;case"args":r=i[o];break;case"latex_walker":var l=i[o];break;case"parsing_state":var s=i[o];break;case"body_nodelist":n=i[o];break;case"node_kwargs":_=i[o]}}}var c=(0,tr.dict)({pos:null,pos_end:null});if((0,tr.__t__)(e===Or.LatexMacroNode)){if((0,tr.__setitem__)(c,"macroname",t.macroname),(0,tr.__t__)(null!==n))throw(u=(0,tr.__call__)(tr.ValueError,null,"For a LatexMacroNode you must have body_nodelist=None")).__cause__=null,u}else if((0,tr.__t__)(e===Or.LatexEnvironmentNode))(0,tr.__setitem__)(c,"environmentname",t.environmentname);else if((0,tr.__t__)(e===Or.LatexSpecialsNode)){var u;if((0,tr.__setitem__)(c,"specials_chars",t.specials_chars),(0,tr.__t__)(null!==n))throw(u=(0,tr.__call__)(tr.ValueError,null,"For a LatexSpecialsNode you must have body_nodelist=None")).__cause__=null,u}var f=(0,tr.__call__)(Io,null,t,r,(0,tr.__kwargtrans__)({latex_walker:l,parsing_state:s})),d=function(){var e=Or;return(0,tr.__call__)(e.ParsedArguments,e,(0,tr.__kwargtrans__)({argnlist:f,arguments_spec_list:t.arguments_spec_list}))}();(0,tr.__t__)(null!==n)&&(0,tr.__setitem__)(c,"nodelist",n),(0,tr.__t__)(null!==_)&&function(){var e=c;(0,tr.__call__)(e.py_update,e,_)}();var h=function(){var r=l;return(0,tr.__call__)(r.make_node,r,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({spec:t,nodeargd:d,parsing_state:s},c)))}();h=function(){var e=t;return(0,tr.__call__)(e.finalize_node,e,h)}();return h},Ro={};t(Ro,"logger",(()=>Bo)),t(Ro,"FLMSpecInfo",(()=>zo)),t(Ro,"FLMMacroSpecBase",(()=>qo)),t(Ro,"FLMEnvironmentSpecBase",(()=>Vo)),t(Ro,"FLMSpecialsSpecBase",(()=>Uo)),t(Ro,"make_verb_argument",(()=>Go)),t(Ro,"FLMSpecInfoConstantValue",(()=>Wo)),t(Ro,"ConstantValueMacro",(()=>$o)),t(Ro,"ConstantValueSpecials",(()=>Yo)),t(Ro,"text_arg",(()=>Ho)),t(Ro,"label_arg",(()=>Xo)),t(Ro,"helper_collect_labels",(()=>Zo)),t(Ro,"TextFormatMacro",(()=>Ko)),t(Ro,"SemanticBlockEnvironment",(()=>Jo)),t(Ro,"FLMSpecInfoParagraphBreak",(()=>Qo)),t(Ro,"ParagraphBreakSpecials",(()=>el)),t(Ro,"ParagraphBreakMacro",(()=>tl)),t(Ro,"FLMSpecInfoError",(()=>rl)),t(Ro,"FLMMacroSpecError",(()=>nl)),t(Ro,"FLMEnvironmentSpecError",(()=>_l)),t(Ro,"FLMSpecialsSpecError",(()=>al)),t(Ro,"ParsedArgumentsInfo",(()=>wn)),t(Ro,"LatexWalkerLocatedError",(()=>Dr)),t(Ro,"latexnodes_parsers",(()=>oa)),t(Ro,"FLMArgumentSpec",(()=>ko)),t(Ro,"ParsingStateDeltaChained",(()=>En)),t(Ro,"macrospec",(()=>ii)),t(Ro,"FLMParsingStateDeltaSetBlockLevel",(()=>bo)),t(Ro,"LatexWalkerParseError",(()=>Fr));tr=a("hoVWB");var Do={};(0,tr.__nest__)(Do,"",dr);var Fo="flm.flmspecinfo",Bo=function(){var e=Do;return(0,tr.__call__)(e.getLogger,e,Fo)}(),zo=(0,tr.__class__)("FLMSpecInfo",[Qi],{__module__:Fo,delayed_render:!1,is_block_level:!1,is_block_heading:!1,is_paragraph_break_marker:!1,allowed_in_standalone_mode:!1,body_contents_is_block_level:null,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"spec_node_parser_type":var i=_[a];break;case"arguments_spec_list":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,zo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:t,spec_node_parser_type:i},r)))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Reimplement me!");throw i.__cause__=null,i}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Element ‘{}’ cannot be placed here, render() not reimplemented.".format(t));throw i.__cause__=null,i}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=t.latex_walker.standalone_mode;if((0,tr.__t__)((0,tr.__t__)(a)&&!(0,tr.__t__)(e.allowed_in_standalone_mode))){var i=(0,tr.__call__)(Fr,null,"‘{}’ is not allowed here (standalone mode).".format(function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()),(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}t.flm_specinfo=e;try{!function(){var r=e;(0,tr.__call__)(r.postprocess_parsed_node,r,t)}()}catch(i){if((0,tr.isinstance)(i,Dr)){var o=i;throw function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=o).__cause__=null,l}if((0,tr.isinstance)(i,tr.ValueError)){var l;o=i;throw(l=(0,tr.__call__)(Fr,null,(0,tr.__call__)(tr.str,null,o),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,l}if((0,tr.isinstance)(i,tr.Exception)){o=i;throw function(){var e=Bo;(0,tr.__call__)(e.error,e,"Internal Parse Error! {}".format(o),(0,tr.__kwargtrans__)({exc_info:!0}))}(),function(){var e,r=Bo;(0,tr.__call__)(r.error,r,"Happened @{},  node: ‘{}’".format((0,tr.__call__)(tr.repr,null,(e=t.latex_walker,(0,tr.__call__)(e.pos_to_lineno_colno,e,t.pos))),function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()))}(),i.__cause__=null,i}throw i}if(t.flm_is_block_level=e.is_block_level,t.flm_is_block_heading=e.is_block_heading,t.flm_is_paragraph_break_marker=e.is_paragraph_break_marker,(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_SUBSTITUTE_NODE"))&&null!==t.flm_SUBSTITUTE_NODE)){var s=t.flm_SUBSTITUTE_NODE;return s.flm_SUBSTITUTE_FOR_NODE=t,s}return t}))},get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"nodeargd":r=i[o];break;case"arg_parsing_state_delta":n=i[o];break;case"latex_walker":_=i[o]}}}var l=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,zo,"make_body_parsing_state_delta"),null,e,t,r,n,_);if((0,tr.__t__)(null===e.body_contents_is_block_level))return l;var s=(0,tr.__call__)(bo,null,(0,tr.__kwargtrans__)({is_block_level:e.body_contents_is_block_level}));return(0,tr.__call__)(En,null,[l,s])}))}}),qo=(0,tr.__class__)("FLMMacroSpecBase",[zo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,qo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:ui,macroname:t},n)))}))}}),Vo=(0,tr.__class__)("FLMEnvironmentSpecBase",[zo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Vo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:fi,environmentname:t},n)))}))}}),Uo=(0,tr.__class__)("FLMSpecialsSpecBase",[zo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Uo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:di,specials_chars:t},n)))}))}}),Go=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("value"===n)e=r[n]}}for(var _=null,a=!1,i=(0,tr.tuple)(["+","|","=",".","-","!","~",",",";",":"]),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(!(0,tr.__in__)(l,e))){_=l;a=!0;break}}if(!a){var s=(0,tr.__call__)(tr.ValueError,null,"Couldn't form literal verbatim command for value %r",e);throw s.__cause__=null,s}return(0,tr.__add__)((0,tr.__add__)(_,e),_)},Wo=(0,tr.__class__)("FLMSpecInfoConstantValue",[zo],{__module__:Fo,allowed_in_standalone_mode:!0,get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=(0,tr.__add__)("The literal character(s) \\verbcode",(0,tr.__call__)(Go,null,e.value));if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.value),1)))_=(0,tr.__call__)(tr.__iadd__,null,_," (U+{})".format((0,tr.__call__)(tr.ord,null,e.value)));return _}))},get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wo,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.value=t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_value,t,e.value,r)}()}))}}),$o=(0,tr.__class__)("ConstantValueMacro",[Wo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$o,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname","value"])}),Yo=(0,tr.__class__)("ConstantValueSpecials",[Wo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"specials_chars":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Yo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars","value"])}),Ho=(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"text",flm_doc:"The text or FLM content to process"})),Xo=(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexTackOnInformationFieldMacrosParser,e,["label"],(0,tr.__kwargtrans__)({allow_multiple:!0}))}(),argname:"label",flm_doc:"A following \\verbcode+\\label{…}+ macro attaches a label to this macro call"})),Zo=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"node_arg_label":e=_[a];break;case"allowed_prefixes":t=_[a];break;case"allow_unknown_macros":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.was_provided,t)}())))return null;for(var i=[],o=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}(),l=o,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(c.delimiters,0),"\\label"))){var u=function(){var e=c.nodelist;return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",u)))var f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,":",1)}(),d=f[0],h=f[1];else d=(f=(0,tr.tuple)([null,u]))[0],h=f[1];if((0,tr.__t__)(!(0,tr.__in__)(d,t)))throw(p=(0,tr.__call__)(Fr,null,"Argument label ‘{}’ has incorrect prefix ‘{}:’; expected one of {}".format(u,d,t),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,p;!function(){var e=i;(0,tr.__call__)(e.append,e,(0,tr.tuple)([d,h]))}()}else{var p;if(!(0,tr.__t__)(r))throw(p=(0,tr.__call__)(Fr,null,"Bad information field macro {}".format((0,tr.__getitem__)(c.delimiters,0)),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,p}}return i},Ko=(0,tr.__class__)("TextFormatMacro",[qo],{__module__:Fo,allowed_in_standalone_mode:!0,_flm_main_text_argument:"text",get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_];break;case"text_formats":var a=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ko,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[Ho]})),e.text_formats=a}))},_fields:(0,tr.tuple)(["macroname","text_formats"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)("Formats its argument using the text format(s) ",(0,tr.__call__)(" ".join," ",function(){for(var t,r=[],n=e.text_formats,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"‘{}’".format(a))}return(0,tr.py_iter)(r)}()))}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["text"]))}();return function(){var t,n=r.fragment_renderer;return(0,tr.__call__)(n.render_text_format,n,e.text_formats,(t=(0,tr.__getitem__)(i,"text"),(0,tr.__call__)(t.get_content_nodelist,t)),r)}()}))}}),Jo=(0,tr.__class__)("SemanticBlockEnvironment",[Vo],{__module__:Fo,allowed_in_standalone_mode:!0,is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"environmentname":t=_[a];break;case"role":var i=_[a];break;case"annotations":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Jo,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t})),e.role=i,e.annotations=r}))},_fields:(0,tr.tuple)(["environmentname","role","annotations"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _="";if((0,tr.__t__)((0,tr.__t__)(null!==e.annotations)&&(0,tr.__call__)(tr.len,null,e.annotations)))_=(0,tr.__add__)((0,tr.__add__)(" and annotations [",(0,tr.__call__)(",".join,",",function(){for(var t,r=[],n=e.annotations,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__add__)((0,tr.__add__)("‘",a),"’"))}return r}())),"]");return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Formats its contents using a semantic block with role ‘",e.role),"’"),_)}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nodelist,e,t.nodelist,r)}();return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_semantic_block,t,i,(0,tr.__kwargtrans__)({role:e.role,render_context:r,annotations:e.annotations}))}()}))}}),Qo=(0,tr.__class__)("FLMSpecInfoParagraphBreak",[zo],{__module__:Fo,is_block_level:!0,is_paragraph_break_marker:!0,allowed_in_standalone_mode:!0,get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(Fr,null,"Paragraph break is not allowed here",(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}))},get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Produce a paragraph break to begin a new paragraph"}))}}),el=(0,tr.__class__)("ParagraphBreakSpecials",[Qo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"specials_chars":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,el,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars"])}),tl=(0,tr.__class__)("ParagraphBreakMacro",[Qo],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname"])}),rl=(0,tr.__class__)("FLMSpecInfoError",[zo],{__module__:Fo,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"error_msg":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,rl,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.error_msg=t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}if((0,tr.__t__)(e.error_msg))var i=e.error_msg;else i="The node ‘{}’ cannot be placed here.".format(function(){var e,r=(e=t,(0,tr.__call__)(e.latex_verbatim,e));return(0,tr.__call__)(r.strip,r)}());!function(){var e=Bo;(0,tr.__call__)(e.error,e,"Misplaced node: {}".format((0,tr.__call__)(tr.repr,null,t)))}();var o=(0,tr.__call__)(Fr,null,i,(0,tr.__kwargtrans__)({pos:t.pos}));throw o.__cause__=null,o}))}}),nl=(0,tr.__class__)("FLMMacroSpecError",[rl],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,nl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname","error_msg"])}),_l=(0,tr.__class__)("FLMEnvironmentSpecError",[rl],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"environmentname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_l,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,spec_node_parser_type:"environment"},r)))}))},_fields:(0,tr.tuple)(["environmentname","error_msg"])}),al=(0,tr.__class__)("FLMSpecialsSpecError",[rl],{__module__:Fo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"specials_chars":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,al,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars","error_msg"])}),il="flm.feature.verbatim",ol=(0,tr.__class__)("VerbatimSpecInfo",[zo],{__module__:il,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="text";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"annotations":t=o[l];break;case"verbatimtype":r=o[l];break;case"is_block_level":n=o[l];break;case"include_environment_begin_end":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ol,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.annotations=t,e.verbatimtype=r,e.include_environment_begin_end=_,e.is_block_level=n}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}(0,tr.assert)((0,tr.__eq__)(t.tok,"begin_environment"));var o=t.arg;return function(){var e=oa;return(0,tr.__call__)(e.LatexVerbatimEnvironmentContentsParser,e,(0,tr.__kwargtrans__)({environment_name:o}))}()}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=null,o=!1,l=!1;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,tn)}())){l=!0;if((0,tr.__t__)(e.include_environment_begin_end))var s=function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}();else s=function(){var e=t.nodelist;return(0,tr.__call__)(e.latex_verbatim,e)}();var c=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["verbatim_lang"]),(0,tr.__kwargtrans__)({skip_nonexistent_arguments:!0}))}();if((0,tr.__t__)((0,tr.__in__)("verbatim_lang",c)))i=function(){var e=(0,tr.__getitem__)(c,"verbatim_lang");return(0,tr.__call__)(e.get_content_as_chars,e)}()}else{o=!0,c=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["verbatim_content","verbatim_lang"]),(0,tr.__kwargtrans__)({skip_nonexistent_arguments:!0}))}(),s=function(){var e=(0,tr.__getitem__)(c,"verbatim_content");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)("verbatim_lang",c)))i=function(){var e=(0,tr.__getitem__)(c,"verbatim_lang");return(0,tr.__call__)(e.get_content_as_chars,e)}()}var u=(0,tr.__t__)(e.annotations)||[];return(0,tr.__t__)(null!==e.verbatimtype)&&(function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}".format(e.verbatimtype))}(),(0,tr.__t__)(o)&&function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}-inline".format(e.verbatimtype))}(),(0,tr.__t__)(l)&&function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}-environment".format(e.verbatimtype))}()),(0,tr.__t__)(i)&&function(){var e=u;(0,tr.__call__)(e.append,e,"verbatim-lang-{}".format(i))}(),function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_verbatim,t,s,r,(0,tr.__kwargtrans__)({is_block_level:e.is_block_level,annotations:u}))}()}))},get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Typeset verbatim content of type ‘{}’.".format(e.verbatimtype)}))}}),ll=function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"ismacro":e=_[a];break;case"verbatim_delimiters":t=_[a];break;case"optional_lang_arg":r=_[a]}}}var i=[];return(0,tr.__t__)(r)&&function(){var e,t=i;(0,tr.__call__)(t.append,t,(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:(e=oa,(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:!1,enable_comments:!1,enable_groups:!1}))),argname:"verbatim_lang",flm_doc:"Programming language in which to interpret the verbatim content, if applicable.  Some formatters might support syntax highlighting in the relevant language."})))}(),(0,tr.__t__)(e)&&function(){var e,r=i;(0,tr.__call__)(r.append,r,(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:(e=oa,(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.__kwargtrans__)({delimiters:t}))),argname:"verbatim_content",flm_doc:"The raw, verbatim content to typeset.  Any special characters, including \\verbcode+\\+, \\verbcode+{+, and \\verbcode+}+, will be typeset as is."})))}(),i},sl=(0,tr.__class__)("VerbatimMacro",[ol],{__module__:il,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=!1,_=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"verbatim_delimiters":r=i[o];break;case"optional_lang_arg":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro",arguments_spec_list:(0,tr.__call__)(ll,null,!0,r,n)},_))),e.verbatim_delimiters=r,e.optional_lang_arg=n}))},_fields:(0,tr.tuple)(["macroname","verbatim_delimiters","optional_lang_arg","annotations","verbatimtype","is_block_level","include_environment_begin_end"])}),cl=(0,tr.__class__)("VerbatimEnvironment",[ol],{__module__:il,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=!1,n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"optional_lang_arg":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,cl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,spec_node_parser_type:"environment",arguments_spec_list:(0,tr.__call__)(ll,null,!1,null,r)},n))),e.optional_lang_arg=r}))},_fields:(0,tr.tuple)(["environmentname","optional_lang_arg","annotations","verbatimtype","is_block_level","include_environment_begin_end"])}),ul=(0,tr.__class__)("FeatureVerbatim",[cr],{__module__:il,feature_name:"verbatim",feature_title:"Verbatim content typesetting",verbatim_include_types:(0,tr.tuple)(["text","code","a"]),get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _="\n        You can typeset verbatim content using the \\verbcode+\\verb...+ family of\n        macros and environments.  When typesetting verbatim content, any special\n        meaning of characters in FLM is ignored.  E.g., the characters\n        ‘\\verbcode+\\+’, ‘\\verbcode+{+’, ‘\\verbcode+}+’ are typeset as is, and\n        braces don't have to be matched.\n\n        The following verbatim types are available:\n        \\begin{itemize}\n        ";if((0,tr.__t__)((0,tr.__in__)("text",e.verbatim_include_types)))var _=(0,tr.__call__)(tr.__iadd__,null,_,"\n            \\item \\verba{text} — the verbatim characters are typeset as is, with no\n                special formatting applied to them.  This verbatim type is intended\n                for inputing special characters into normal text.\n            ");if((0,tr.__t__)((0,tr.__in__)("code",e.verbatim_include_types)))_=(0,tr.__call__)(tr.__iadd__,null,_,"\n            \\item \\verba{code} — the verbatim characters are typeset as a block of\n                code, possibly to be interpreted as a given programming language.\n                Renderers should represent the content as code, e.g., with a monospaced\n                font.\n            ");if((0,tr.__t__)((0,tr.__in__)("a",e.verbatim_include_types)))_=(0,tr.__call__)(tr.__iadd__,null,_,"\n            \\item \\verba{a} — the verbatim characters are typeset as an identifier,\n                typically in italic font.  This command is intended to typeset e.g.\n                keywords or other content that isn't necessarily to be highlighted as\n                computer code.\n            ");return _=(0,tr.__call__)(tr.__iadd__,null,_,"\\end{itemize}")}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=[],a=[];return(0,tr.__t__)((0,tr.__in__)("text",e.verbatim_include_types))&&(function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(sl,null,(0,tr.__kwargtrans__)({macroname:"verbtext"})))}(),function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.__call__)(cl,null,(0,tr.__kwargtrans__)({environmentname:"verbatimtext"})))}()),(0,tr.__t__)((0,tr.__in__)("code",e.verbatim_include_types))&&(function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(sl,null,(0,tr.__kwargtrans__)({macroname:"verbcode",optional_lang_arg:!0,verbatimtype:"code"})))}(),function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.__call__)(cl,null,(0,tr.__kwargtrans__)({environmentname:"verbatimcode",optional_lang_arg:!0,verbatimtype:"code",is_block_level:!0})))}()),(0,tr.__t__)((0,tr.__in__)("a",e.verbatim_include_types))&&function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(sl,null,(0,tr.__kwargtrans__)({macroname:"verba",optional_lang_arg:!0,verbatimtype:"a"})))}(),(0,tr.dict)({macros:_,environments:a})}))}}),fl=ul,dl={};t(dl,"optional_text_arg",(()=>hs)),t(dl,"thmlabel_arg",(()=>ps)),t(dl,"TheoremEnvironment",(()=>gs)),t(dl,"_default_theorem_environments_simpleset",(()=>vs)),t(dl,"_default_theorem_environments_defaultset",(()=>ms)),t(dl,"_default_theorem_environments_richset",(()=>ys)),t(dl,"default_theorem_environments",(()=>ws)),t(dl,"default_theorem_theorem_types",(()=>bs)),t(dl,"default_thm_shared_counter_formatter_spec",(()=>ks)),t(dl,"default_allowed_ref_label_prefixes",(()=>xs)),t(dl,"FeatureTheorems",(()=>Ps)),t(dl,"FeatureClass",(()=>Os)),t(dl,"CounterAlias",(()=>fs)),t(dl,"make_invocable_node_instance",(()=>jo)),t(dl,"flmspecinfo",(()=>Ro)),t(dl,"ParsingStateDelta",(()=>Pn)),t(dl,"Counter",(()=>us)),t(dl,"ParsedArgumentsInfo",(()=>wn)),t(dl,"build_counter_formatter",(()=>ls)),t(dl,"Feature",(()=>sr)),t(dl,"FLMArgumentSpec",(()=>ko)),t(dl,"headings",(()=>hl)),t(dl,"macrospec",(()=>ii)),t(dl,"latexnodes_nodes",(()=>Or)),t(dl,"LatexTackOnInformationFieldMacrosParser",(()=>Ha));tr=a("hoVWB");var hl={};t(hl,"logger",(()=>Il)),t(hl,"HeadingMacro",(()=>jl)),t(hl,"FeatureHeadings",(()=>Rl)),t(hl,"FeatureClass",(()=>Dl)),t(hl,"LatexArgumentSpec",(()=>Ar)),t(hl,"flmspecinfo",(()=>Ro)),t(hl,"ParsedArgumentsInfo",(()=>wn)),t(hl,"Feature",(()=>sr)),t(hl,"refs",(()=>pl));tr=a("hoVWB");var pl={};t(pl,"logger",(()=>yl)),t(pl,"ReferenceableInfo",(()=>wl)),t(pl,"get_safe_target_id",(()=>Ol)),t(pl,"RefInstance",(()=>bl)),t(pl,"_rx_unsafe_char",(()=>xl)),t(pl,"_rx_match_safechar",(()=>Pl)),t(pl,"FeatureRefsRenderManager",(()=>El)),t(pl,"_ref_arg_specs",(()=>Al)),t(pl,"RefMacro",(()=>Cl)),t(pl,"FeatureRefs",(()=>Sl)),t(pl,"FeatureClass",(()=>Tl)),t(pl,"FLMFragment",(()=>_i)),t(pl,"ParsedArgumentsInfo",(()=>wn)),t(pl,"LatexWalkerLocatedError",(()=>Dr)),t(pl,"latexnodes_parsers",(()=>oa)),t(pl,"Feature",(()=>sr)),t(pl,"FLMArgumentSpec",(()=>ko)),t(pl,"FLMMacroSpecBase",(()=>qo));tr=a("hoVWB");var gl={},vl={};(0,tr.__nest__)(gl,"",dr),(0,tr.__nest__)(vl,"",Vn);var ml="flm.feature.refs",yl=function(){var e=gl;return(0,tr.__call__)(e.getLogger,e,ml)}(),wl=(0,tr.__class__)("ReferenceableInfo",[tr.object],{__module__:ml,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"kind":t=a[i];break;case"formatted_ref_flm_text":r=a[i];break;case"labels":n=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wl,"__init__"),null,e),e.kind=t,e.formatted_ref_flm_text=r,e.labels=n,e._fields=(0,tr.tuple)(["kind","formatted_ref_flm_text","labels"])}))},get get_target_id(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if((0,tr.__t__)(!(0,tr.__t__)(e.labels)))return null;var _=(0,tr.__getitem__)(e.labels,0),a=_[0],i=_[1];return(0,tr.__call__)(Ol,null,a,i)}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return(0,tr.py_iter)(r)}())),")")}))}}),bl=(0,tr.__class__)("RefInstance",[tr.object],{__module__:ml,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"ref_type":t=l[s];break;case"ref_label":r=l[s];break;case"formatted_ref_flm_text":n=l[s];break;case"target_href":_=l[s];break;case"counter_value":a=l[s];break;case"counter_formatter_id":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bl,"__init__"),null,e),e.ref_type=t,e.ref_label=r,e.formatted_ref_flm_text=n,e.target_href=_,e.counter_value=a,e.counter_formatter_id=i,e._fields=(0,tr.tuple)(["ref_type","ref_label","formatted_ref_flm_text","target_href","counter_value","counter_formatter_id"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),")")}))}}),kl=e=>(+e).toString(16),xl=function(){var e=vl;return(0,tr.__call__)(e.compile,e,"[^a-zA-Z0-9-]")}(),Pl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}return"_{}X".format((0,tr.__call__)(kl,null,(0,tr.__call__)(tr.ord,null,function(){var t=e;return(0,tr.__call__)(t.group,t)}())))},Ol=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"ref_type":e=n[_];break;case"ref_label":t=n[_]}}}var a=function(){var t=xl;return(0,tr.__call__)(t.sub,t,Pl,e)}(),i=function(){var e=xl;return(0,tr.__call__)(e.sub,e,Pl,t)}();return"{}-{}".format(a,i)},El=(0,tr.__class__)("FeatureRefsRenderManager",[sr.RenderManager],{__module__:ml,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"add_external_ref_resolvers":t=n[_]}}}e.ref_labels=(0,tr.dict)({}),e.registered_references=(0,tr.dict)({}),e.external_ref_resolvers=[],(0,tr.__t__)(t)&&function(){var r=e.external_ref_resolvers;(0,tr.__call__)(r.extend,r,t)}(),function(){var t=e.external_ref_resolvers;(0,tr.__call__)(t.extend,t,e.feature.external_ref_resolvers)}(),e.registered_counter_formatters=(0,tr.dict)({})}))},get register_reference_referenceable(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)switch(n){case"self":e=r[n];break;case"node":var _=r[n];break;case"referenceable_info":var a=r[n]}}}if(!(0,tr.__t__)(!(0,tr.__t__)(a.labels)))for(var i=(0,tr.__add__)("#",function(){var e=a;return(0,tr.__call__)(e.get_target_id,e)}()),o=a.labels,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];!function(){var t=e;(0,tr.__call__)(t.register_reference,t,c,u,(0,tr.__kwargtrans__)({formatted_ref_flm_text:a.formatted_ref_flm_text,node:_,target_href:i}))}()}}))},get register_counter_formatter(){return(0,tr.__get__)(this,(function(e){var t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"counter_formatter_id":t=n[_];break;case"counter_formatter":var a=n[_]}}}if((0,tr.__t__)(null===t))t=a.counter_formatter_id;if((0,tr.__t__)((0,tr.__in__)(t,e.registered_counter_formatters))){var i=(0,tr.__call__)(tr.ValueError,null,"Counter formatter width ID ‘{}’ is already registered!".format(t));throw i.__cause__=null,i}(0,tr.__setitem__)(e.registered_counter_formatters,t,a)}))},get register_reference_step_counter(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var n=null,_=!0,a=null,i=!0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"ref_type":t=l[s];break;case"ref_label":r=l[s];break;case"node":var c=l[s];break;case"counter":var u=l[s];break;case"target_href_fn":n=l[s];break;case"counter_with_prefix":_=l[s];break;case"counter_prefix_variant":a=l[s];break;case"counter_with_delimiters":i=l[s]}}}var f=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,c)}(),d=(0,tr.tuple)([f,t,r]);if((0,tr.__t__)((0,tr.__in__)(d,e.registered_references)))return(0,tr.__getitem__)(e.registered_references,d);!function(){var e=u;(0,tr.__call__)(e.step,e)}();var h=function(){var e=u;return(0,tr.__call__)(e.format_flm,e,(0,tr.__kwargtrans__)({with_prefix:_,prefix_variant:a,with_delimiters:i}))}();if((0,tr.__t__)(null!==n))var p=(0,tr.__call__)(n,null,u.value);else p=null;return function(){var n=e;return(0,tr.__call__)(n.register_reference,n,t,r,(0,tr.__kwargtrans__)({node:c,formatted_ref_flm_text:h,target_href:p,counter_value:u.value,counter_formatter_id:u.formatter.counter_formatter_id}))}()}))},get register_reference(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"ref_type":t=i[o];break;case"ref_label":r=i[o];break;case"node":var l=i[o];break;case"formatted_ref_flm_text":var s=i[o];break;case"target_href":var c=i[o];break;case"counter_value":n=i[o];break;case"counter_formatter_id":_=i[o]}}}var u=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,l)}(),f=(0,tr.tuple)([u,t,r]);if((0,tr.__t__)((0,tr.__in__)(f,e.registered_references)))return(0,tr.__getitem__)(e.registered_references,f);if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(null!==r)&&(0,tr.__in__)((0,tr.tuple)([t,r]),e.ref_labels))){var d=(0,tr.__call__)(tr.ValueError,null,"Duplicate reference label ‘{}:{}’ in the same document!".format(t,r));throw d.__cause__=null,d}var h=(0,tr.__call__)(bl,null,(0,tr.__kwargtrans__)({ref_type:t,ref_label:r,formatted_ref_flm_text:s,target_href:c,counter_value:n,counter_formatter_id:_}));return(0,tr.__setitem__)(e.registered_references,f,h),(0,tr.__t__)((0,tr.__t__)(null!==t)&&null!==r)&&e.ref_labels.__setitem__([t,r],h),h}))},get get_ref(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"ref_type":t=a[i];break;case"ref_label":r=a[i];break;case"resource_info":n=a[i]}}}if((0,tr.__t__)((0,tr.__in__)((0,tr.tuple)([t,r]),e.ref_labels)))return e.ref_labels.__getitem__([t,r]);for(var o=e.external_ref_resolvers,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=function(){var _=s;return(0,tr.__call__)(_.get_ref,_,t,r,n,e.render_context)}();if((0,tr.__t__)(null!==c))return c}var u=(0,tr.__call__)(Dr,null,"Ref target ‘{}:{}’ found neither within database nor with any set external resolvers".format(t,r),(0,tr.__kwargtrans__)({pos:null}));throw u.__cause__=null,u}))},get render_ref(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=null,i=!0,o=!0;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"ref_type":t=s[c];break;case"ref_label":r=s[c];break;case"display_content_flm":n=s[c];break;case"resource_info":_=s[c];break;case"counter_prefix_variant":a=s[c];break;case"counter_with_prefix":i=s[c];break;case"counter_with_delimiters":o=s[c]}}}var u=function(){var n=e;return(0,tr.__call__)(n._get_ref_instance,n,t,r,_)}();return function(){var t=e;return(0,tr.__call__)(t.render_ref_instance,t,u,n,(0,tr.__kwargtrans__)({counter_prefix_variant:a,counter_with_prefix:i,counter_with_delimiters:o}))}()}))},get render_ref_instance(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"ref_instance":t=_[a];break;case"display_content_flm":r=_[a];break;case"counter_prefix_variant":_[a];break;case"counter_with_prefix":_[a];break;case"counter_with_delimiters":_[a]}}}if((0,tr.__t__)(null===r))r=t.formatted_ref_flm_text;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,_i))))r=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,r,(0,tr.__kwargtrans__)({standalone_mode:!0}))}();var i=r.nodes,o=e.render_context.fragment_renderer;return function(){var r=o;return(0,tr.__call__)(r.render_link,r,"ref",t.target_href,i,(0,tr.__kwargtrans__)({render_context:e.render_context,annotations:["ref-{}".format(t.ref_type)]}))}()}))},ref_many_use_flm_hyperref:!0,get render_ref_many(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=!0,a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type_label_list":t=o[l];break;case"resource_info":r=o[l];break;case"counter_prefix_variant":n=o[l];break;case"counter_with_delimiters":_=o[l];break;case"counter_with_prefix":a=o[l]}}}for(var s=e.render_context,c=s.fragment_renderer,u=function(){for(var n,_,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1];n=void 0,_=void 0,_=a,(0,tr.__call__)(_.append,_,(n=e,(0,tr.__call__)(n._get_ref_instance,n,s,c,r)))}return a}(),f=(0,tr.dict)({}),d=[],h=u,p=0;p<(0,tr.len)(h);p++){var g=(0,tr.__getitem__)(h,p);(0,tr.__t__)((0,tr.__t__)(null===g.counter_value)||null===g.counter_formatter_id)?function(){var e=d;(0,tr.__call__)(e.append,e,g)}():((0,tr.__t__)(!(0,tr.__in__)(g.counter_formatter_id,f))&&(0,tr.__setitem__)(f,g.counter_formatter_id,(0,tr.dict)({})),(0,tr.__setitem__)((0,tr.__getitem__)(f,g.counter_formatter_id),g.counter_value,g))}var v=[];for(h=function(){var e=f;return(0,tr.__call__)(e.py_items,e)}(),p=0;p<(0,tr.len)(h);p++){for(var m=(0,tr.__getitem__)(h,p),y=m[0],w=m[1],b=(0,tr.__getitem__)(e.registered_counter_formatters,y),k=function(){var e,t=b;return(0,tr.__call__)(t.format_many_flm,t,(e=w,(0,tr.__call__)(e.py_keys,e)),(0,tr.__kwargtrans__)({prefix_variant:n,with_delimiters:_,with_prefix:a,get_raw_s_items:!0}))}(),x="",P=k,O=0;O<(0,tr.len)(P);O++){var E=(0,tr.__getitem__)(P,O),A=function(){var e=s;return(0,tr.__call__)(e.make_standalone_fragment,e,(0,tr.__getitem__)(E,"s"),(0,tr.__kwargtrans__)({is_block_level:!1,what:"Rendered counter ref bit {}".format((0,tr.__call__)(tr.repr,null,E))}))}();if((0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(E,"n"))||!1===(0,tr.__getitem__)(E,"n")))x=(0,tr.__call__)(tr.__iadd__,null,x,function(){var e=c;return(0,tr.__call__)(e.render_fragment,e,A,s)}());else{var C=(0,tr.__getitem__)(w,(0,tr.__getitem__)(E,"n"));x=(0,tr.__call__)(tr.__iadd__,null,x,function(){var e=c;return(0,tr.__call__)(e.render_link,e,"ref",C.target_href,A.nodes,(0,tr.__kwargtrans__)({render_context:s,annotations:["refcnt-{}".format(y)]}))}())}}!function(){var e=v;(0,tr.__call__)(e.append,e,x)}()}if((0,tr.__t__)((0,tr.__call__)(tr.len,null,d)))for(h=d,p=0;p<(0,tr.len)(h);p++)g=(0,tr.__getitem__)(h,p),v=(0,tr.__call__)(tr.__iadd__,null,v,[function(){var t=e;return(0,tr.__call__)(t.render_ref_instance,t,g,null)}()]);return(0,tr.__call__)(", ".join,", ",v)}))},get _get_ref_instance(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"ref_type":t=a[i];break;case"ref_label":r=a[i];break;case"resource_info":n=a[i]}}}try{return function(){var _=e;return(0,tr.__call__)(_.get_ref,_,t,r,n)}()}catch(e){if((0,tr.isinstance)(e,Dr)){var o=e;throw e.__cause__=null,e}if((0,tr.isinstance)(e,tr.Exception)){o=e;var l=(0,tr.__call__)(tr.ValueError,null,"Unable to resolve reference to ‘{}:{}’: {} [in {}]".format(t,r,o,(0,tr.__call__)(tr.repr,null,n)));throw l.__cause__=null,l}throw e}}))}}),Al=(0,tr.dict)({ref_label:(0,tr.__call__)(ko,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e)}(),(0,tr.__kwargtrans__)({argname:"ref_label"})),"[]ref_label":(0,tr.__call__)(ko,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"])}))}(),(0,tr.__kwargtrans__)({argname:"ref_label"})),display_text:(0,tr.__call__)(ko,null,"{",(0,tr.__kwargtrans__)({argname:"display_text"})),Xref_label:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"ref_label"})),"[]Xref_label":(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"r[]",argname:"ref_label"}))}),Cl=(0,tr.__class__)("RefMacro",[qo],{__module__:ml,delayed_render:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r="ref",n=(0,tr.tuple)(["ref_label","display_text"]),_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"ref_type":r=i[o];break;case"command_arguments":n=i[o];break;case"counter_prefix_variant":_=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t._get_arguments_spec_list,t,n)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cl,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:l})),e.ref_type=r,e.command_arguments=n,e.counter_prefix_variant=_,e.command_argnames=function(){for(var e,t=[],r=l,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,_.argname)}return t}()}))},_fields:(0,tr.tuple)(["macroname","ref_type","command_arguments","counter_prefix_variant"]),get _get_arguments_spec_list(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"cls":e=n[_];break;case"command_arguments":t=n[_]}}}return function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(Al,a))}return r}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}for(var a=function(){var r=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(r.get_all_arguments_info,r,e.command_argnames)}(),i=function(){var e=(0,tr.__getitem__)(a,"ref_label");return(0,tr.__call__)(e.get_content_as_chars,e)}(),o=[],l=function(){var e=i;return(0,tr.__call__)(e.py_split,e,",")}(),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=(d=(0,tr.tuple)([null,c]))[0],f=d[1];if((0,tr.__t__)((0,tr.__in__)(":",f))){var d=function(){var e=f;return(0,tr.__call__)(e.py_split,e,":",1)}();u=d[0],f=d[1]}!function(){var e=o;(0,tr.__call__)(e.append,e,(0,tr.tuple)([u,f]))}()}if((0,tr.__t__)((0,tr.__in__)("display_text",a)))var h=function(){var e=(0,tr.__getitem__)(a,"display_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();else h=null;t.flmarg_ref_list=o,(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),1))&&(t.flmarg_ref=(0,tr.__getitem__)(o,0)),t.flm_ref_info=(0,tr.dict)({ref_list:o,display_content_nodelist:h})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__getitem__)(t.flm_ref_info,"ref_list"),o=(0,tr.__getitem__)(t.flm_ref_info,"display_content_nodelist"),l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),s=t.latex_walker.resource_info;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,i),1))){var c=(0,tr.__getitem__)(i,0),u=c[0],f=c[1];try{return function(){var t=l;return(0,tr.__call__)(t.render_ref,t,u,f,o,s,(0,tr.__kwargtrans__)({counter_prefix_variant:e.counter_prefix_variant}))}()}catch(p){if((0,tr.isinstance)(p,Dr)){var d=p;throw function(){var e=d;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(h=d).__cause__=null,h}if((0,tr.isinstance)(p,tr.Exception)){var h;d=p;throw function(){var e,r=yl;(0,tr.__call__)(r.error,r,"Failed to resolve reference to ‘{}:{}’: {} in ‘{}’ {}".format(u,f,d,(e=t,(0,tr.__call__)(e.latex_verbatim,e)),function(){var e=t;return(0,tr.__call__)(e.format_pos,e)}()))}(),(h=(0,tr.__call__)(Dr,null,"Unable to resolve reference to ‘{}:{}’: {}".format(u,f,d),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,h}throw p}}if((0,tr.__t__)(null!==o)){var p=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Reference with custom display string cannot have multiple ref targets: ",(0,tr.__call__)(tr.repr,null,i)));throw p.__cause__=null,p}return function(){var e=l;return(0,tr.__call__)(e.render_ref_many,e,i,s)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"recomposer":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}if((0,tr.__t__)(null===t.flm_ref_info))throw(h=(0,tr.__call__)(Dr,null,(0,tr.__add__)("Recomposing pure LaTeX: Invalid ref info in node ",(0,tr.__call__)(tr.repr,null,t)),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,h;for(var o=[],l=(0,tr.__getitem__)(t.flm_ref_info,"ref_list"),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1];!function(){var e,n=o;(0,tr.__call__)(n.append,n,(e=r,(0,tr.__call__)(e.make_safe_label,e,"ref",u,f,t.latex_walker.resource_info)))}()}var d=(0,tr.__getitem__)(t.flm_ref_info,"display_content_nodelist");if((0,tr.__t__)((0,tr.__t__)(null!==d)&&(0,tr.__t__)(d.nodelist)&&(0,tr.__call__)(tr.len,null,d.nodelist))){var h;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,o),1)))throw(h=(0,tr.__call__)(Dr,null,"Hyperref macro cannot have multiple ref targets because it specifies a custom display string.".format(),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,h;var p=(0,tr.__getitem__)((0,tr.__getitem__)(o,0),"safe_label"),g=function(){var e=r;return(0,tr.__call__)(e.recompose_pure_latex,e,d)}(),v=(0,tr.__getitem__)(g,"latex");return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\NoCaseChange{\\protect\\hyperref[",(0,tr.__call__)(tr.str,null,p)),"]{"),(0,tr.__call__)(tr.str,null,v)),"}}")}return function(){var e=r;(0,tr.__call__)(e.ensure_latex_package,e,"cleveref")}(),(0,tr.__add__)((0,tr.__add__)("\\NoCaseChange{\\protect\\cref{",(0,tr.__call__)(",".join,",",function(){for(var e,t=[],r=o,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(_,"safe_label"))}return t}())),"}}")}))}}),Sl=(0,tr.__class__)("FeatureRefs",[sr],{__module__:ml,feature_name:"refs",feature_title:"Labels and cross-references",RenderManager:El,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"external_ref_resolvers":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Sl,"__init__"),null,e),(0,tr.__t__)(null!==t)?e.external_ref_resolvers=(0,tr.__call__)(tr.list,null,t):e.external_ref_resolvers=[]}))},get set_external_ref_resolvers(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"external_ref_resolvers":t=n[_]}}}(0,tr.__t__)((0,tr.__t__)(null!==e.external_ref_resolvers)&&(0,tr.__call__)(tr.len,null,e.external_ref_resolvers))&&function(){var e=yl;(0,tr.__call__)(e.warning,e,"FeatureRefs.set_external_ref_resolvers(): There were already external refs resolvers set.  They will be replaced.")}(),e.external_ref_resolvers=t}))},get add_external_ref_resolver(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"external_ref_resolver":t=n[_]}}}!function(){var r=e.external_ref_resolvers;(0,tr.__call__)(r.append,r,t)}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[function(){var t=e;return(0,tr.__call__)(t.RefMacroCls,t,(0,tr.__kwargtrans__)({macroname:"ref",command_arguments:(0,tr.tuple)(["ref_label"])}))}(),function(){var t=e;return(0,tr.__call__)(t.RefMacroCls,t,(0,tr.__kwargtrans__)({macroname:"hyperref",command_arguments:(0,tr.tuple)(["[]ref_label","display_text"])}))}()]}))}))},RefMacroCls:Cl,get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"{}(external_ref_resolvers={})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.external_ref_resolvers))}))}}),Tl=Sl,Nl={},Ll={};(0,tr.__nest__)(Nl,"",dr),(0,tr.__nest__)(Ll,"",Vn);var Ml="flm.feature.headings",Il=function(){var e=Nl;return(0,tr.__call__)(e.getLogger,e,Ml)}(),jl=(0,tr.__class__)("HeadingMacro",[Ro.FLMMacroSpecBase],{__module__:Ml,is_block_level:!0,allowed_in_standalone_mode:!0,_flm_main_text_argument:"text",allowed_ref_label_prefixes:(0,tr.tuple)(["sec","topic"]),get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=1,n=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"heading_level":r=a[i];break;case"inline_heading":n=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,jl,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(Ar,null,"*",(0,tr.__kwargtrans__)({argname:"star"})),Ro.text_arg,Ro.label_arg]})),e.heading_level=r,e.inline_heading=n,e.is_block_heading=e.inline_heading}))},_fields:(0,tr.tuple)(["macroname","heading_level","inline_heading"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Create a{} heading at level {}".format((0,tr.__t__)(e.inline_heading)?"n inline":"",e.heading_level)}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["star","text","label"]))}();t.flmarg_heading_content_nodelist=function(){var e=(0,tr.__getitem__)(a,"text");return(0,tr.__call__)(e.get_content_nodelist,e)}(),t.flmarg_labels=function(){var t=Ro;return(0,tr.__call__)(t.helper_collect_labels,t,(0,tr.__getitem__)(a,"label"),e.allowed_ref_label_prefixes)}();var i=function(){var e=t.flmarg_heading_content_nodelist;return(0,tr.__call__)(e.latex_verbatim,e)}();t.flm_referenceable_infos=[function(){var e=pl;return(0,tr.__call__)(e.ReferenceableInfo,e,(0,tr.__kwargtrans__)({kind:"heading",formatted_ref_flm_text:i,labels:t.flmarg_labels}))}()]}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"headings")}(),o=null;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_heading_target_id")))o=t.flm_heading_target_id;else{o=function(){var e=(0,tr.__getitem__)(t.flm_referenceable_infos,0);return(0,tr.__call__)(e.get_target_id,e)}();if((0,tr.__t__)(null===o))o=function(){var e=i;return(0,tr.__call__)(e.get_default_target_id,e,t.flmarg_labels,t.flmarg_heading_content_nodelist,(0,tr.__kwargtrans__)({node:t}))}()}if((0,tr.__t__)((0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}())&&r.is_first_pass))for(var l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),s=t.flm_referenceable_infos,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);!function(){var e=l;(0,tr.__call__)(e.register_reference_referenceable,e,(0,tr.__kwargtrans__)({node:t,referenceable_info:u}))}()}return function(){var n=r.fragment_renderer;return(0,tr.__call__)(n.render_heading,n,t.flmarg_heading_content_nodelist,(0,tr.__kwargtrans__)({render_context:r,heading_level:e.heading_level,inline_heading:e.inline_heading,target_id:o}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=t.macroname,o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"headings")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"macroname_mapping",null)}();if((0,tr.__t__)(l)&&(0,tr.__t__)((0,tr.__in__)(i,l)))i=(0,tr.__getitem__)(l,i);var s=(0,tr.__add__)("\\",i);if((0,tr.__t__)(null!==t.nodeargd)){if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.nodeargd.argnlist,0)))s=(0,tr.__call__)(tr.__iadd__,null,s,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.nodeargd.argnlist,0))}());if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.nodeargd.argnlist,1)))s=(0,tr.__call__)(tr.__iadd__,null,s,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.nodeargd.argnlist,1))}())}for(var c=t.flmarg_labels,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],h=f[1],p=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",d,h,t.latex_walker.resource_info)}();s=(0,tr.__call__)(tr.__iadd__,null,s,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(p,"safe_label")),"}"))}return s}))}}),Rl=(0,tr.__class__)("FeatureHeadings",[sr],{__module__:Ml,feature_name:"headings",feature_title:"Headings: sections, paragraphs",feature_optional_dependencies:["refs"],RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Ml,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.target_id_counters=(0,tr.dict)({}),e.target_ids=(0,tr.dict)({})}))},get get_default_target_id(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"heading_labels":t=_[a];break;case"heading_content_nodelist":r=_[a];break;case"node":var i=_[a]}}}var o=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,i)}();if((0,tr.__t__)((0,tr.__in__)(o,e.target_ids)))return(0,tr.__getitem__)(e.target_ids,o);var l=function(){var n=e;return(0,tr.__call__)(n._generate_default_target_id,n,t,r)}();return(0,tr.__setitem__)(e.target_ids,o,l),l}))},get _generate_default_target_id(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"heading_labels":t=_[a];break;case"heading_content_nodelist":r=_[a]}}}var i=function(){var e,t=(e=r,(0,tr.__call__)(e.latex_verbatim,e));return(0,tr.__call__)(t.strip,t)}();i=function(){var e=Ll;return(0,tr.__call__)(e.sub,e,"[^A-Za-z0-9_-]+","-",i)}(),i="sec--{}".format(i),i=(0,tr.__getslice__)(i,0,32,1);return(0,tr.__t__)((0,tr.__in__)(i,e.target_id_counters))?((0,tr.__setitem__)(e.target_id_counters,i,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(e.target_id_counters,i),1)),"{}-{}".format(i,(0,tr.__getitem__)(e.target_id_counters,i))):((0,tr.__setitem__)(e.target_id_counters,i,1),i)}))}}),SectionCommandInfo:(0,tr.__class__)("SectionCommandInfo",[tr.object],{__module__:Ml,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"cmdname":t=_[a];break;case"inline":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Rl.SectionCommandInfo,"__init__"),null,e),e.cmdname=t,e.inline=r}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"{}(cmdname={}, inline={})".format(e.__class__.__name__,e.cmdname,e.inline)}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"section_commands_by_level":t=n[_]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Rl,"__init__"),null,e),(0,tr.__t__)(null===t))t=(0,tr.dict)({1:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"section")}(),2:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"subsection")}(),3:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"subsubsection")}(),4:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"paragraph",(0,tr.__kwargtrans__)({inline:!0}))}(),5:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"subparagraph",(0,tr.__kwargtrans__)({inline:!0}))}(),6:function(){var t=e;return(0,tr.__call__)(t.SectionCommandInfo,t,"subsubparagraph",(0,tr.__kwargtrans__)({inline:!0}))}()});e.section_commands_by_level=function(){for(var r,n=[],_=(r=(0,tr.__call__)(tr.dict,null,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];!function(){var t,r=n;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._make_section_command_info,t,l))])}()}return(0,tr.dict)(n)}()}))},get _make_section_command_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"x":t=n[_]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,e.SectionCommandInfo))?t:(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str))?function(){var r=e;return(0,tr.__call__)(r.SectionCommandInfo,r,t)}():function(){var r=e;return(0,tr.__call__)(r.SectionCommandInfo,r,(0,tr.__kwargtrans__)(t))}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:function(){for(var t,r=[],n=(t=e.section_commands_by_level,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__call__)(jl,null,(0,tr.__kwargtrans__)({macroname:o.cmdname,heading_level:i,inline_heading:o.inline})))}()}return r}()}))}))}}),Dl=Rl,Fl={};t(Fl,"alphacounter",(()=>ql)),t(Fl,"Alphacounter",(()=>Vl)),t(Fl,"_romancounterchars",(()=>Ul)),t(Fl,"romancounter",(()=>Gl)),t(Fl,"Romancounter",(()=>Wl)),t(Fl,"_fnsymbols",(()=>$l)),t(Fl,"fnsymbolcounter",(()=>Yl)),t(Fl,"_unicodesuperscriptdigits",(()=>Hl)),t(Fl,"_unicodesubscriptdigits",(()=>Xl)),t(Fl,"customdigitscounter",(()=>Zl)),t(Fl,"unicodesuperscriptcounter",(()=>Kl)),t(Fl,"unicodesubscriptcounter",(()=>Jl)),t(Fl,"standard_counter_formatters",(()=>Ql)),t(Fl,"_standard_tag_template_initials_formatters",(()=>es)),t(Fl,"_rx_dollar_template",(()=>ts)),t(Fl,"_replace_dollar_template",(()=>rs)),t(Fl,"_replace_dollar_template_delayed",(()=>ns)),t(Fl,"parse_counter_formatter",(()=>_s)),t(Fl,"_parse_counter_formatter_from_tag_template",(()=>as)),t(Fl,"_default_formatter_join_spec",(()=>is)),t(Fl,"parse_counter_format_num",(()=>os)),t(Fl,"build_counter_formatter",(()=>ls)),t(Fl,"CounterFormatter",(()=>ss)),t(Fl,"_expect_int",(()=>cs)),t(Fl,"Counter",(()=>us)),t(Fl,"CounterAlias",(()=>fs));tr=a("hoVWB");var Bl={};(0,tr.__nest__)(Bl,"",Vn);var zl="flm.counter",ql=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"n":e=n[_];break;case"lower":t=n[_]}}}e=(0,tr.__call__)(tr.__isub__,null,e,1);var a=(0,tr.__add__)(1,(0,tr.__floordiv__)(e,26)),i=(0,tr.__mod__)(e,26),o=(0,tr.__mul__)((0,tr.__call__)(tr.chr,null,(0,tr.__add__)(97,i)),a);return(0,tr.__t__)(t)?o:function(){var e=o;return(0,tr.__call__)(e.upper,e)}()},Vl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(ql,null,e,(0,tr.__kwargtrans__)({lower:!1}))},Ul=(0,tr.tuple)([(0,tr.tuple)([1e3,"M"]),(0,tr.tuple)([900,"CM"]),(0,tr.tuple)([500,"D"]),(0,tr.tuple)([400,"CD"]),(0,tr.tuple)([100,"C"]),(0,tr.tuple)([90,"XC"]),(0,tr.tuple)([50,"L"]),(0,tr.tuple)([40,"XL"]),(0,tr.tuple)([10,"X"]),(0,tr.tuple)([9,"IX"]),(0,tr.tuple)([5,"V"]),(0,tr.tuple)([4,"IV"]),(0,tr.tuple)([1,"I"])]),Gl=function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"n":e=_[a];break;case"lower":t=_[a];break;case"zero":r=_[a]}}}var i="";if((0,tr.__t__)((0,tr.__eq__)(e,0)))return r;for(var o=Ul,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__mul__)(u,(0,tr.__floordiv__)(e,c))),e=(0,tr.__mod__)(e,c)}return(0,tr.__t__)(t)?function(){var e=i;return(0,tr.__call__)(e.lower,e)}():i},Wl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(Gl,null,e,(0,tr.__kwargtrans__)({lower:!1}))},$l=["*","†","‡","§","¶","‖"],Yl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=$l;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"n":e=n[_];break;case"symbols":t=n[_]}}}e=(0,tr.__call__)(tr.__isub__,null,e,1);var a=(0,tr.__call__)(tr.len,null,t),i=(0,tr.__add__)(1,(0,tr.__floordiv__)(e,a)),o=(0,tr.__mod__)(e,a);return(0,tr.__mul__)((0,tr.__getitem__)(t,o),i)},Hl=[(0,tr.__call__)(tr.chr,null,8304),(0,tr.__call__)(tr.chr,null,185),(0,tr.__call__)(tr.chr,null,178),(0,tr.__call__)(tr.chr,null,179),(0,tr.__call__)(tr.chr,null,8308),(0,tr.__call__)(tr.chr,null,8309),(0,tr.__call__)(tr.chr,null,8310),(0,tr.__call__)(tr.chr,null,8311),(0,tr.__call__)(tr.chr,null,8312),(0,tr.__call__)(tr.chr,null,8313)],Xl=function(){for(var e,t=[],r=0;r<10;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)(8320,r)));return t}(),Zl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="0123456789";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"n":e=n[_];break;case"digits":t=n[_]}}}for(var a=(0,tr.__call__)(tr.len,null,t),i="";(0,tr.__t__)(e);){var o=(0,tr.tuple)([(0,tr.__floordiv__)(e,a),(0,tr.__mod__)(e,a)]),l=o[0],s=o[1];i=(0,tr.__add__)((0,tr.__getitem__)(t,s),i),e=l}return i},Kl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(Zl,null,e,(0,tr.__kwargtrans__)({digits:Hl}))},Jl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(Zl,null,e,(0,tr.__kwargtrans__)({digits:Xl}))},Ql=(0,tr.dict)({alph:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(ql,null,e,(0,tr.__kwargtrans__)({lower:!0}))},Alph:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(ql,null,e,(0,tr.__kwargtrans__)({lower:!1}))},roman:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(Gl,null,e,(0,tr.__kwargtrans__)({lower:!0}))},Roman:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__call__)(Gl,null,e,(0,tr.__kwargtrans__)({lower:!1}))},arabic:tr.str,fnsymbol:Yl,unicodesuperscript:Kl,unicodesubscript:Jl}),es=(0,tr.dict)({a:ql,A:Vl,i:Gl,I:Wl,1:tr.str}),ts=function(){var e=Bl;return(0,tr.__call__)(e.compile,e,"\\$\\{([a-zA-Z0-9_.]+)\\}")}(),rs=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"x":e=n[_];break;case"vrs":t=n[_]}}}return function(){var r=ts;return(0,tr.__call__)(r.sub,r,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("m"===_)e=n[_]}}return(0,tr.__getitem__)(t,(a=e,(0,tr.__call__)(a.group,a,1)));var a}),e)}()},ns=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"x":e=n[_];break;case"vrs":t=n[_]}}}return function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)if("arg"===a)r=_[a]}}return function(){var n=ts;return(0,tr.__call__)(n.sub,n,(function(e){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)if("m"===a)e=_[a]}}return(0,tr.__call__)((0,tr.__getitem__)(t,(i=e,(0,tr.__call__)(i.group,i,1))),null,r);var i}),e)}()}},_s=function(e,t,r,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Ql;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=es;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"counter_formatter":e=a[i];break;case"named_counter_formatters":t=a[i];break;case"str_use_tag_template":r=a[i];break;case"tag_template_initials_counters":n=a[i]}}}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,e)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str))){if((0,tr.__t__)((0,tr.__in__)(e,t)))return(0,tr.__getitem__)(t,e);if((0,tr.__t__)(r))return(0,tr.__call__)(as,null,e,n)}var o=null;try{o=(0,tr.__getitem__)(e,"template")}catch(s){}if((0,tr.__t__)(o)){var l=(0,tr.__getitem__)(e,"template");return(0,tr.__call__)(ns,null,l,t)}var s=(0,tr.__call__)(tr.ValueError,null,"Invalid counter_formatter: ‘{}’".format((0,tr.__call__)(tr.repr,null,e)));throw s.__cause__=null,s},as=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=es;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"tag_template":e=n[_];break;case"tag_template_initials_counters":t=n[_]}}}var a=function(){var e,r=Bl;return(0,tr.__call__)(r.compile,r,(0,tr.__add__)((0,tr.__add__)("[",(0,tr.__call__)("".join,"",(e=t,(0,tr.__call__)(e.py_keys,e)))),"]"))}(),i=function(){var t=a;return(0,tr.__call__)(t.search,t,e)}();if((0,tr.__t__)(null!==i)){var o=(0,tr.__getslice__)(e,0,function(){var e=i;return(0,tr.__call__)(e.start,e)}(),1),l=(0,tr.__getslice__)(e,function(){var e=i;return(0,tr.__call__)(e.end,e)}(),null,1),s=(0,tr.__getitem__)(t,function(){var e=i;return(0,tr.__call__)(e.group,e)}());return function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)(o,(0,tr.__call__)(s,null,e)),l)}}return function(t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("n"===_)t=n[_]}}return e}},is=(0,tr.dict)({default:(0,tr.dict)({one_pre:"",one_post:"",pair_pre:"",pair_mid:" ${and} ",pair_post:"",range_pre:"",range_mid:"${endash}",range_pairmid:"${sep}",range_post:"",list_pre:"",list_mid:"${sep} ",list_midlast:"${sep} ${and} ",list_post:"",and:"and",sep:",",endash:"–",empty:"(empty)"}),compact:(0,tr.dict)({pair_mid:",",range_mid:"–",range_pairmid:",",list_mid:",",list_midlast:",",empty:"(empty)"})}),os=_s,ls=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"counter_formatter":e=n[_];break;case"default_counter_formatter_spec":t=n[_];break;case"counter_formatter_id":var a=n[_]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,ss)))return e;if((0,tr.__t__)(null===e))return(0,tr.__call__)(ss,null,(0,tr.__kwargtrans__)(t));t=(0,tr.__call__)(tr.dict,null,t);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str))){var i=t;return(0,tr.__setitem__)(i,"format_num",e),(0,tr.__setitem__)(i,"counter_formatter_id",a),(0,tr.__call__)(ss,null,(0,tr.__kwargtrans__)(i))}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.dict))){if((0,tr.__t__)((0,tr.__in__)("template",e))){i=t;return(0,tr.__setitem__)(i,"format_num",e),(0,tr.__setitem__)(i,"counter_formatter_id",a),(0,tr.__call__)(ss,null,(0,tr.__kwargtrans__)(i))}i=t;return(0,tr.__setitem__)(i,"counter_formatter_id",a),function(){var t=i;(0,tr.__call__)(t.py_update,t,e)}(),(0,tr.__call__)(ss,null,(0,tr.__kwargtrans__)(i))}var o=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid counter_formatter specification: ",(0,tr.__call__)(tr.repr,null,e)));throw o.__cause__=null,o},ss=(0,tr.__class__)("CounterFormatter",[tr.object],{__module__:zl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"format_num":t=l[s];break;case"prefix_display":r=l[s];break;case"delimiters":n=l[s];break;case"join_spec":_=l[s];break;case"name_in_link":a=l[s];break;case"counter_formatter_id":i=l[s]}}}if(e._format_num_fn=(0,tr.__call__)(_s,null,t),(0,tr.__t__)(null===r))r=(0,tr.dict)({singular:"",plural:""});else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,tr.str)))r=(0,tr.dict)({singular:r,plural:r});e.prefix_display=r,e.delimiters=(0,tr.__t__)(null!==n)?n:(0,tr.tuple)(["",""]);var c=(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(is,"default"));(0,tr.__t__)(null!==_)&&((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,_,tr.str))?function(){var e=c;(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(is,_))}():function(){var e=c;(0,tr.__call__)(e.py_update,e,_)}()),e.join_spec=function(){for(var e,t=[],r=(e=c,(0,tr.__call__)(e.py_items,e)),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),a=_[0],i=_[1];!function(){var e=t;(0,tr.__call__)(e.append,e,[a,(0,tr.__call__)(rs,null,i,c)])}()}return(0,tr.dict)(t)}(),e.name_in_link=a,e.counter_formatter_id=i,e._fields=(0,tr.tuple)(["format_num","prefix_display","delimiters","join_spec","name_in_link","counter_formatter_id"])}))},get format_num(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"n":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r._format_num_fn,r,t)}()}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),")")}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"value":t=l[s];break;case"prefix_variant":r=l[s];break;case"with_delimiters":n=l[s];break;case"with_prefix":_=l[s];break;case"wrap_format_num":a=l[s];break;case"wrap_link_fn":i=l[s]}}}var c=function(){var t=e;return(0,tr.__call__)(t._get_format_pre_post,t,n,_,1,r)}(),u=c[0],f=c[1],d=c[2],h=function(){var r=e;return(0,tr.__call__)(r.format_num,r,t)}();if((0,tr.__t__)(null!==a))h=(0,tr.__call__)(a,null,h);var p=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(u,f),h),d);return(0,tr.__t__)(null!==i)?(0,tr.__call__)(i,null,t,p):p}))},get _get_format_pre_post(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"with_delimiters":t=i[o];break;case"with_prefix":r=i[o];break;case"num_values":n=i[o];break;case"prefix_variant":_=i[o]}}}var l=(0,tr.tuple)(["","",""]),s=l[0],c=l[1],u=l[2];if((0,tr.__t__)(t))c=(0,tr.__getitem__)(e.delimiters,0),u=(0,tr.__getitem__)(e.delimiters,1);if((0,tr.__t__)(r)){var f=e.prefix_display;if((0,tr.__t__)((0,tr.__t__)(null!==_)&&(0,tr.__in__)(_,e.prefix_display)))f=(0,tr.__getitem__)(e.prefix_display,_);if((0,tr.__t__)((0,tr.__eq__)(n,1)))s=(0,tr.__getitem__)(f,"singular");else if((0,tr.__t__)((0,tr.__in__)(n,f)))s=(0,tr.__getitem__)(f,n);else s=(0,tr.__getitem__)(f,"plural")}return(0,tr.tuple)([s,c,u])}))},get format_many_flm(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var c=arguments[s--];for(var u in c)switch(u){case"self":e=c[u];break;case"py_values":t=c[u];break;case"prefix_variant":r=c[u];break;case"with_delimiters":n=c[u];break;case"with_prefix":_=c[u];break;case"wrap_link_fn":a=c[u];break;case"wrap_format_num":i=c[u];break;case"get_raw_s_items":o=c[u];break;case"s_items_join":l=c[u]}}}var f=e.join_spec,d=e.name_in_link;if((0,tr.__t__)(null===l))l=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"a":e=n[_];break;case"b":t=n[_]}}}return(0,tr.__add__)(e,t)};if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return(0,tr.__getitem__)(f,"empty");t=function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(cs,null,a))}return r}(),t=(0,tr.__call__)(tr.sorted,null,t,(0,tr.__kwargtrans__)({key:tr.int}));var h=(0,tr.__call__)(tr.len,null,t),p=!1;if((0,tr.__t__)((0,tr.__eq__)(h,1)))p=!0;for(var g=[],v=null,m=t,y=0;y<(0,tr.len)(m);y++){var w=(0,tr.__getitem__)(m,y);if((0,tr.__t__)(!(0,tr.__t__)(v)))v=(0,tr.tuple)([w,w]);else if((0,tr.__t__)((0,tr.__eq__)(w,(0,tr.__add__)((0,tr.__getitem__)(v,1),1))))v=(0,tr.tuple)([(0,tr.__getitem__)(v,0),w]);else{!function(){var e=g;(0,tr.__call__)(e.append,e,v)}();v=(0,tr.tuple)([w,w])}}if(function(){var e=g;(0,tr.__call__)(e.append,e,v)}(),(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),1))&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__add__)((0,tr.__getitem__)((0,tr.__getitem__)(g,0),0),1),(0,tr.__getitem__)((0,tr.__getitem__)(g,0),1))))g=[(0,tr.tuple)([(0,tr.__getitem__)((0,tr.__getitem__)(g,0),0),(0,tr.__getitem__)((0,tr.__getitem__)(g,0),0)]),(0,tr.tuple)([(0,tr.__getitem__)((0,tr.__getitem__)(g,0),1),(0,tr.__getitem__)((0,tr.__getitem__)(g,0),1)])];var b=function(t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("n"===_)t=n[_]}}return(0,tr.__t__)(null!==i)?(0,tr.__call__)(i,null,function(){var r=e;return(0,tr.__call__)(r.format_num,r,t)}()):function(){var r=e;return(0,tr.__call__)(r.format_num,r,t)}()},k=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"a":e=n[_];break;case"b":t=n[_]}}}if((0,tr.__t__)((0,tr.__eq__)(e,t)))return[(0,tr.dict)({s:(0,tr.__call__)(b,null,e),n:e})];var a=(0,tr.__call__)(b,null,e),i=(0,tr.__call__)(b,null,t);if((0,tr.__t__)((0,tr.__eq__)(t,(0,tr.__add__)(e,1))))var o=(0,tr.__getitem__)(f,"range_pairmid");else o=(0,tr.__getitem__)(f,"range_mid");return[(0,tr.dict)({s:(0,tr.__getitem__)(f,"range_pre"),n:!1}),(0,tr.dict)({s:a,n:e}),(0,tr.dict)({s:o,n:!1}),(0,tr.dict)({s:i,n:t}),(0,tr.dict)({s:(0,tr.__getitem__)(f,"range_post"),n:!1})]};if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),1)))var x=(0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"one_pre"),n:null})],(0,tr.__call__)(k,null,...(0,tr.__getitem__)(g,0))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"one_post"),n:null})]);else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),2)))x=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_pre"),n:!1})],(0,tr.__call__)(k,null,...(0,tr.__getitem__)(g,0))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_mid"),n:!1})]),(0,tr.__call__)(k,null,...(0,tr.__getitem__)(g,1))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_post"),n:!1})]);else{for(x=[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_pre"),n:!1})],m=(0,tr.__call__)(tr.enumerate,null,(0,tr.__getslice__)(g,0,(0,tr.__neg__)(1),1)),y=0;y<(0,tr.len)(m);y++){var P=(E=(0,tr.__getitem__)(m,y))[0],O=E[1];if((0,tr.__t__)((0,tr.__gt__)(P,0)))x=(0,tr.__call__)(tr.__iadd__,null,x,[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_mid"),n:!1})]);x=(0,tr.__call__)(tr.__iadd__,null,x,(0,tr.__call__)(k,null,...O))}x=(0,tr.__call__)(tr.__iadd__,null,x,(0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_midlast"),n:!1})],(0,tr.__call__)(k,null,...(0,tr.__getitem__)(g,(0,tr.__neg__)(1)))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_post"),n:!1})]))}var E=function(){var t=e;return(0,tr.__call__)(t._get_format_pre_post,t,n,_,h,r)}(),A=E[0],C=E[1],S=E[2],T=null;if((0,tr.__t__)(!(0,tr.__t__)(d)))T=!1;else for(m=x,y=0;y<(0,tr.len)(m);y++){var N=(0,tr.__getitem__)(m,y),L=function(){var e=N;return(0,tr.__call__)(e.py_get,e,"n",null)}();if((0,tr.__t__)((0,tr.__t__)(null!==L)&&!1!==L)){T=L;break}}var M=[];(0,tr.__t__)((0,tr.__call__)(tr.len,null,A))&&function(){var e=M;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:A,n:T}))}(),function(){var e=M;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:C,n:!!(0,tr.__t__)((0,tr.__t__)(d)&&p)&&null}))}();x=(0,tr.__add__)((0,tr.__add__)(M,x),[(0,tr.dict)({s:S,n:!!(0,tr.__t__)(p)&&null})]);if((0,tr.__t__)((0,tr.__t__)(null!==a)||o)){var I=[],j=null,R=!1;for(m=x,y=0;y<(0,tr.len)(m);y++){var D=(0,tr.__getitem__)(m,y),F=(N=(0,tr.__getitem__)(D,"s"),function(){var e=D;return(0,tr.__call__)(e.py_get,e,"n",null)}());if((0,tr.__t__)((0,tr.__t__)(!1===F)&&(0,tr.__t__)(!1===R)&&null!==j))j=(0,tr.__call__)(l,null,j,N);else if((0,tr.__t__)((0,tr.__t__)(!1!==R)&&((0,tr.__t__)(null===F)||(0,tr.__t__)(null===R)||(0,tr.__eq__)(F,R)))){if((0,tr.__t__)((0,tr.__t__)(null!==F)&&null===R))R=F;if((0,tr.__t__)(null===j))j=N;else j=(0,tr.__call__)(l,null,j,N)}else{(0,tr.__t__)(null!==j)&&function(){var e=I;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:j,n:R}))}();j=N,R=F}}(0,tr.__t__)(null!==j)&&function(){var e=I;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:j,n:R}))}();x=I}if((0,tr.__t__)(o))return x;if((0,tr.__t__)(null!==a))var B=(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=x,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__t__)((0,tr.__t__)(null!==(0,tr.__getitem__)(_,"n"))&&!1!==(0,tr.__getitem__)(_,"n"))?(0,tr.__call__)(a,null,(0,tr.__getitem__)(_,"n"),(0,tr.__getitem__)(_,"s")):(0,tr.__getitem__)(_,"s"))}return t}());else B=(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=x,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(_,"s"))}return t}());return B}))}}),cs=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("v"===n)e=r[n]}}try{return(0,tr.__call__)(tr.int,null,e)}catch(t){if((0,tr.isinstance)(t,tr.py_TypeError)){var _=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid value, expected integer: ",(0,tr.__call__)(tr.repr,null,e)));throw _.__cause__=null,_}throw t}},us=(0,tr.__class__)("Counter",[tr.object],{__module__:zl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"counter_formatter":t=_[a];break;case"initial_value":r=_[a]}}}e.formatter=t,e.value=r}))},get set_value(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"value":t=n[_]}}}return e.value=t,e.value}))},get step(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.value=(0,tr.__call__)(tr.__iadd__,null,e.value,1),e.value}))},get reset(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.value=e.initial_value,e.value}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}if((0,tr.__t__)(null===t))t=e.value;var i=(0,tr.dict)({with_prefix:!1});return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),function(){var r=e.formatter;return(0,tr.__call__)(r.format_flm,r,t,(0,tr.__kwargtrans__)(i))}()}))},get step_and_format_flm(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e;return(0,tr.__call__)(t.step,t)}();return(0,tr.tuple)([_,function(){var t=e;return(0,tr.__call__)(t.format_flm,t,_)}()])}))}}),fs=(0,tr.__class__)("CounterAlias",[tr.object],{__module__:zl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"counter_formatter":t=_[a];break;case"alias_counter":r=_[a]}}}e.formatter=t,e.alias_counter=r}))},get _get_value(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.alias_counter.value}))},get step(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e.alias_counter;return(0,tr.__call__)(t.step,t)}()}))},get reset(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t=e.alias_counter;return(0,tr.__call__)(t.reset,t)}()}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}if((0,tr.__t__)(null===t))t=e.value;var i=(0,tr.dict)({with_prefix:!1});return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),function(){var r=e.formatter;return(0,tr.__call__)(r.format_flm,r,t,(0,tr.__kwargtrans__)(i))}()}))},get step_and_format_flm(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){var t=e;return(0,tr.__call__)(t.step,t)}();return(0,tr.tuple)([_,function(){var t=e;return(0,tr.__call__)(t.format_flm,t,_)}()])}))}});Object.defineProperty(fs,"value",tr.property.call(fs,fs._get_value));var ds="flm.feature.theorems",hs=(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"[",argname:"thmtitle",flm_doc:"An optional theorem environment title"})),ps=(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:(0,tr.__call__)(Ha,null,["label","noproofref"],(0,tr.__kwargtrans__)({allow_multiple:!0,macro_arg_parsers:(0,tr.dict)({noproofref:null})})),argname:"thmlabel",flm_doc:"A following \\verbcode+\\label{…}+ macro attaches a label to this macro call; a following \\noproofref indicates that there is no corresponding {proof} environment to look for in the document."})),gs=(0,tr.__class__)("TheoremEnvironment",[Ro.FLMEnvironmentSpecBase],{__module__:ds,is_block_level:!0,body_contents_is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"theorem_spec":r=i[o];break;case"theorem_type_spec":n=i[o];break;case"allowed_ref_label_prefixes":_=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,gs,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[hs,ps]})),e.theorem_spec=r,e.theorem_type_spec=n,e.allowed_ref_label_prefixes=_}))},_fields:(0,tr.tuple)(["environmentname","theorem_spec","theorem_type_spec","allowed_ref_label_prefixes"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}return function(){var e=ii;return(0,tr.__call__)(e.LatexEnvironmentBodyContentsParser,e,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.dict)({is_block_level:!0})}))}))}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["thmtitle","thmlabel"]))}(),i=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"thmtitle");return(0,tr.__call__)(e.was_provided,e)}()))i=function(){var e=(0,tr.__getitem__)(a,"thmtitle");return(0,tr.__call__)(e.get_content_nodelist,e)}();var o=null,l=!1;if((0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"title_enable_relation_ref"))&&(0,tr.__t__)((0,tr.__t__)(null!==i)&&(0,tr.__gt__)((0,tr.__call__)(tr.len,null,i),0))){var s=(0,tr.__getitem__)(i,0);if((0,tr.__t__)((0,tr.__t__)(null!==s)&&(0,tr.__t__)(function(){var e=s;return(0,tr.__call__)(e.isNodeType,e,Kr)}())&&function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"*")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,i),1))){var c=(0,tr.__call__)(LatexWalkerLocatedError,null,"When specifying a proof-ref target as optional argument (‘[*thm:xyz]’), the entire argument must consist of regular characters with no special meaning in FLM.  Got: ‘{}’".format(function(){var e=i;return(0,tr.__call__)(e.latex_verbatim,e)}()),(0,tr.__kwargtrans__)({pos:s.pos}));throw c.__cause__=null,c}if((0,tr.__t__)(function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"**")}()))o=(0,tr.__getslice__)(s.chars,2,null,1),l=!1;else if((0,tr.__t__)(function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"*")}()))o=(0,tr.__getslice__)(s.chars,1,null,1),l=!0}}if((0,tr.__t__)(null!==o))if((0,tr.__t__)((0,tr.__in__)(":",o)))o=function(){var e=o;return(0,tr.__call__)(e.py_split,e,":",(0,tr.__kwargtrans__)({maxsplit:1}))}();else o=(0,tr.tuple)([null,o]);t.flmarg_thmtitle=(0,tr.dict)({nodelist:i,has_relation_ref:!!(0,tr.__t__)(null!==o),relation_ref_target:o,relation_ref_show_ref:l});var u=null,f=(0,tr.__getitem__)(a,"thmlabel");if((0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.was_provided,e)}()))for(var d=function(){var e=f;return(0,tr.__call__)(e.get_content_nodelist,e)}(),h=d,p=0;p<(0,tr.len)(h);p++){var g=(0,tr.__getitem__)(h,p);if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(g.delimiters,0),"\\label"))){if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(g.delimiters,0),"\\noproofref")))throw(c=(0,tr.__call__)(LatexWalkerParseError,null,"Bad information field macro ‘{}’".format((0,tr.__getitem__)(g.delimiters,0)),(0,tr.__kwargtrans__)({pos:g.pos}))).__cause__=null,c;u=!0}}return t.flmarg_has_noproofref=u,t.flmarg_labels=function(){var t=Ro;return(0,tr.__call__)(t.helper_collect_labels,t,f,e.allowed_ref_label_prefixes,(0,tr.__kwargtrans__)({allow_unknown_macros:!0}))}(),t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=r.fragment_renderer,o=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"theorems")}(),l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),s=t.flmarg_thmtitle,c=t.flmarg_labels;if((0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"numbered")))for(var u=(0,tr.__getitem__)(o.counters,e.environmentname),f=function(){var r=l;return(0,tr.__call__)(r.register_reference_step_counter,r,(0,tr.__kwargtrans__)({node:t,counter:u,target_href_fn:function(t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("n"===_)t=n[_]}}return"#{}-{}".format(e.environmentname,t)},counter_with_prefix:!0,counter_prefix_variant:"capital"}))}(),d=f.counter_value,h=f.formatted_ref_flm_text,p="{}-{}".format(e.environmentname,d),g=function(){var e=r;return(0,tr.__call__)(e.make_standalone_fragment,e,h,(0,tr.__kwargtrans__)({what:"Theorem heading"}))}(),v=g.nodes,m=c,y=0;y<(0,tr.len)(m);y++){var w=(O=(0,tr.__getitem__)(m,y))[0],b=O[1];!function(){var e=l;(0,tr.__call__)(e.register_reference,e,w,b,(0,tr.__kwargtrans__)({node:t,formatted_ref_flm_text:g,target_href:(0,tr.__add__)("#",p),counter_value:d,counter_formatter_id:u.formatter.counter_formatter_id}))}()}else{var k=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.theorem_spec,"title"),"capital"),"singular");p=null,v=function(){var e,r=t.latex_walker;return(0,tr.__call__)(r.make_nodelist,r,[(e=t.latex_walker,(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({chars:k,pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state})))],(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}();if((0,tr.__t__)((0,tr.__call__)(tr.len,null,c))){var x=(0,tr.__call__)(LatexWalkerLocatedError,null,(0,tr.__add__)((0,tr.__add__)("You cannot use \\label{} in unnumbered theorem environment ‘",e.environmentname),"’"),(0,tr.__kwargtrans__)({pos:t.pos}));throw x.__cause__=null,x}}var P=null;if((0,tr.__t__)((0,tr.__getitem__)(s,"has_relation_ref"))){if((0,tr.__t__)((0,tr.__getitem__)(s,"relation_ref_show_ref"))){w=(O=(0,tr.__getitem__)(s,"relation_ref_target"))[0],b=O[1];var O,E=function(){var e=l;return(0,tr.__call__)(e.get_ref,e,w,b,t.latex_walker.resource_info)}(),A=E.formatted_ref_flm_text,C=function(){var e=r;return(0,tr.__call__)(e.make_standalone_fragment,e,A,(0,tr.__kwargtrans__)({what:"Thm relation ref"}))}();P=C.nodes}}else if((0,tr.__t__)(null!==(0,tr.__getitem__)(s,"nodelist")))P=(0,tr.__getitem__)(s,"nodelist");if((0,tr.__t__)(null!==P))var S=function(){var r,n=t.latex_walker;return(0,tr.__call__)(n.make_nodelist,n,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(tr.list,null,v),[(r=t.latex_walker,(0,tr.__call__)(r.make_node,r,Kr,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"heading_title_pre"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state})))]),(0,tr.__call__)(tr.list,null,P)),[function(){var r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,Kr,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"heading_title_post"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state}))}()]),(0,tr.__kwargtrans__)({parsing_state:t.parsing_state,pos:t.pos}))}();else S=v;var T=(0,tr.__call__)(jo,null,en,(0,tr.__kwargtrans__)({flm_spec:function(){var t=hl;return(0,tr.__call__)(t.HeadingMacro,t,(0,tr.__kwargtrans__)({macroname:null,heading_level:(0,tr.__getitem__)(e.theorem_type_spec,"theorem_heading_level"),inline_heading:!0}))}(),args:(0,tr.dict)({text:S}),latex_walker:t.latex_walker,parsing_state:t.parsing_state}));T.flm_heading_target_id=p;var N=function(){var r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,Kr,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"body_final_content"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state}))}();if(N.flm_strip_preceding_whitespace=!0,(0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"body_final_content")))var L=(0,tr.__add__)((0,tr.__add__)([T],(0,tr.__call__)(tr.list,null,t.nodelist)),[N]);else L=(0,tr.__add__)([T],(0,tr.__call__)(tr.list,null,t.nodelist));L=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,L,(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}();var M=function(){var e=i;return(0,tr.__call__)(e.render_nodelist,e,L,r)}();return function(){var t=i;return(0,tr.__call__)(t.render_semantic_block,t,M,(0,tr.__getitem__)(e.theorem_spec,"theorem_type"),r,(0,tr.__kwargtrans__)({annotations:[e.environmentname,"p-block"]}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}");if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(t.flmarg_thmtitle,"has_relation_ref")))){if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.flmarg_thmtitle,"nodelist")))i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("[{",function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.flmarg_thmtitle,"nodelist"))}()),"}]"))}else{var o=(f=(0,tr.__getitem__)(t.flmarg_thmtitle,"relation_ref_target"))[0],l=f[1],s=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",o,l,t.latex_walker.resource_info)}();i=(0,tr.__call__)(tr.__iadd__,null,i,"[*");if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(t.flmarg_thmtitle,"relation_ref_show_ref"))))i=(0,tr.__call__)(tr.__iadd__,null,i,"*");i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__getitem__)(s,"safe_label")),i=(0,tr.__call__)(tr.__iadd__,null,i,"]")}if((0,tr.__t__)(t.flmarg_has_noproofref))i=(0,tr.__call__)(tr.__iadd__,null,i,"\\noproofref ");for(var c=t.flmarg_labels,u=0;u<(0,tr.len)(c);u++){var f,d=(f=(0,tr.__getitem__)(c,u))[0],h=f[1];s=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",d,h,t.latex_walker.resource_info)}(),i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(s,"safe_label")),"}"))}i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.recompose_nodelist,e,t.nodelist,t)}());return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),vs=(0,tr.dict)({theoremlike:(0,tr.dict)({theorem:(0,tr.dict)({title:(0,tr.dict)({lowercase:"theorem",abbreviated:(0,tr.dict)({singular:"Thm.",plural:"Thms."})})}),proposition:(0,tr.dict)({title:(0,tr.dict)({lowercase:"proposition",abbreviated:(0,tr.dict)({singular:"Prop.",plural:"Props."})})}),lemma:(0,tr.dict)({title:(0,tr.dict)({lowercase:"lemma",abbreviated:(0,tr.dict)({singular:"Lem.",plural:"Lems."})})}),corollary:(0,tr.dict)({title:(0,tr.dict)({lowercase:"corollary",abbreviated:(0,tr.dict)({singular:"Cor.",plural:"Cors."})})})}),definitionlike:(0,tr.dict)({definition:(0,tr.dict)({title:(0,tr.dict)({lowercase:"definition",abbreviated:(0,tr.dict)({singular:"Def.",plural:"Defs."})})})}),prooflike:(0,tr.dict)({proof:(0,tr.dict)({title:(0,tr.dict)({lowercase:"proof",abbreviated:(0,tr.dict)({singular:"Proof",plural:"Proofs"})})})})}),ms=(0,tr.dict)({theoremlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(vs,"theoremlike"),(0,tr.__kwargtrans__)((0,tr.dict)({conjecture:(0,tr.dict)({title:(0,tr.dict)({lowercase:"conjecture",abbreviated:(0,tr.dict)({singular:"Conj.",plural:"Conjs."})})})}))),definitionlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(vs,"definitionlike"),(0,tr.__kwargtrans__)((0,tr.dict)({remark:(0,tr.dict)({title:(0,tr.dict)({lowercase:"remark",abbreviated:(0,tr.dict)({singular:"Rem.",plural:"Rems."})})})}))),prooflike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(vs,"prooflike"))}),ys=(0,tr.dict)({theoremlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(ms,"theoremlike")),definitionlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(ms,"definitionlike"),(0,tr.__kwargtrans__)((0,tr.dict)({idea:(0,tr.dict)({title:(0,tr.dict)({lowercase:"idea",abbreviated:(0,tr.dict)({singular:"Idea",plural:"Ideas"})})}),question:(0,tr.dict)({title:(0,tr.dict)({lowercase:"question",abbreviated:(0,tr.dict)({singular:"Qtn.",plural:"Qtns."})})}),claim:(0,tr.dict)({title:(0,tr.dict)({lowercase:"claim",abbreviated:(0,tr.dict)({singular:"Clm.",plural:"Clms."})})}),observation:(0,tr.dict)({title:(0,tr.dict)({lowercase:"observation",abbreviated:(0,tr.dict)({singular:"Obs.",plural:"Obs."})})}),problem:(0,tr.dict)({title:(0,tr.dict)({lowercase:"problem",abbreviated:(0,tr.dict)({singular:"Prob.",plural:"Probs."})})})}))),prooflike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(ms,"prooflike"))}),ws=(0,tr.dict)({simpleset:vs,defaultset:ms,richset:ys}),bs=(0,tr.dict)({theoremlike:(0,tr.dict)({numbered:!0,shared_numbering:!0,counter_formatter:null,theorem_heading_level:"theorem",heading_title_pre:" (",heading_title_post:")",title_enable_relation_ref:!1,body_final_content:""}),definitionlike:(0,tr.dict)({numbered:!0,shared_numbering:!0,counter_formatter:null,theorem_heading_level:"theorem",heading_title_pre:" (",heading_title_post:")",title_enable_relation_ref:!1}),prooflike:(0,tr.dict)({numbered:!1,title_enable_relation_ref:!0,body_final_content:" □"})}),ks=(0,tr.dict)({format_num:"arabic",delimiters:(0,tr.tuple)(["",""]),join_spec:"default"}),xs=["thm","prop","cor","lem","rem","def","dfn","x","topic"],Ps=(0,tr.__class__)("FeatureTheorems",[sr],{__module__:ds,feature_name:"theorems",feature_dependencies:["refs"],feature_default_config:(0,tr.dict)({environments:(0,tr.__getitem__)(ws,"defaultset"),theorem_types:bs,shared_counter_formatter:"arabic",allowed_ref_label_prefixes:xs}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:ds,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.shared_counter=(0,tr.__call__)(us,null,e.feature.shared_counter_formatter);var _=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();e.counters=(0,tr.dict)({});for(var a=function(){var t=e.feature.thm_counter_formatters;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1],c=(0,tr.__getitem__)(e.feature.environments,l),u=(0,tr.__getitem__)(e.feature.theorem_types,(0,tr.__getitem__)(c,"theorem_type"));(0,tr.__t__)((0,tr.__getitem__)(u,"shared_numbering"))?(0,tr.__setitem__)(e.counters,l,(0,tr.__call__)(fs,null,(0,tr.__kwargtrans__)({counter_formatter:s,alias_counter:e.shared_counter}))):(0,tr.__setitem__)(e.counters,l,(0,tr.__call__)(us,null,(0,tr.__kwargtrans__)({counter_formatter:s}))),function(){var e=_;(0,tr.__call__)(e.register_counter_formatter,e,(0,tr.__kwargtrans__)({counter_formatter:s}))}()}}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environments":t=i[o];break;case"theorem_types":r=i[o];break;case"shared_counter_formatter":n=i[o];break;case"allowed_ref_label_prefixes":_=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ps,"__init__"),null,e),(0,tr.__t__)(null===t))t=(0,tr.__getitem__)(ws,"defaultset");if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))t=(0,tr.__getitem__)(ws,t);if((0,tr.__t__)(null===r))r=bs;e.theorem_types=function(){for(var t,n=[],_=(t=(0,tr.__call__)(tr.dict,null,r),(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var t,r=n;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._standardize_type_spec,t,o,l))])}()}return(0,tr.dict)(n)}(),e.environments=(0,tr.dict)({});for(var l=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++)for(var c=(m=(0,tr.__getitem__)(l,s))[0],u=m[1],f=function(){var e=u;return(0,tr.__call__)(e.py_items,e)}(),d=0;d<(0,tr.len)(f);d++){var h=(m=(0,tr.__getitem__)(f,d))[0],p=m[1];if((0,tr.__t__)((0,tr.__in__)("env_name",e.environments))){var g=(0,tr.__call__)(tr.ValueError,null,"Duplicate definition of theorem environment ‘{}’".format(h));throw g.__cause__=null,g}(0,tr.__setitem__)(e.environments,h,function(){var t=e;return(0,tr.__call__)(t._standardize_thm_spec,t,c,h,p)}())}e.shared_counter_formatter=(0,tr.__call__)(ls,null,n,ks,(0,tr.__kwargtrans__)({counter_formatter_id:"_theorems_shared"}));var v=function(){var t=e.shared_counter_formatter;return(0,tr.__call__)(t.asdict,t)}();e.thm_counter_formatters=(0,tr.dict)({});for(l=function(){var t=e.environments;return(0,tr.__call__)(t.py_items,t)}(),s=0;s<(0,tr.len)(l);s++){h=(m=(0,tr.__getitem__)(l,s))[0],p=m[1];var m,y=(0,tr.__getitem__)(e.theorem_types,(0,tr.__getitem__)(p,"theorem_type"));if(!(0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(y,"numbered")))){var w=function(){var e=y;return(0,tr.__call__)(e.py_get,e,"counter_formatter",null)}();if((0,tr.__t__)(null===w))w=(0,tr.dict)({});else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,w,tr.str)))w=(0,tr.dict)({format_num:w});else w=(0,tr.__call__)(tr.dict,null,w);(0,tr.__setitem__)(w,"prefix_display",function(){var t=e;return(0,tr.__call__)(t._make_counter_formatter_prefix_for_thm,t,h,p)}()),(0,tr.__setitem__)(e.thm_counter_formatters,h,(0,tr.__call__)(ls,null,w,v,(0,tr.__kwargtrans__)({counter_formatter_id:h})))}}e.allowed_ref_label_prefixes=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==_)?_:xs)}))},get _standardize_type_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"thm_type":t=_[a];break;case"thm_type_spec":r=_[a]}}}var i=(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(bs,"theoremlike"));return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),i}))},get _standardize_thm_spec(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"thm_type":t=a[i];break;case"env_name":r=a[i];break;case"thm_spec":n=a[i]}}}if((0,tr.__t__)(!0===n))n=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,n,tr.str)))n=(0,tr.dict)({title:n});else n=(0,tr.__call__)(tr.dict,null,n);(0,tr.__setitem__)(n,"theorem_type",t);var o=(0,tr.dict)({}),l=function(){var e=n;return(0,tr.__call__)(e.py_get,e,"title",null)}();if((0,tr.__t__)(null===l))l=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,tr.str)))l=(0,tr.dict)({lowercase:(0,tr.dict)({singular:l,plural:(0,tr.__add__)(l,"s")})});if((0,tr.__t__)((0,tr.__in__)("lowercase",l))){var s=(0,tr.__getitem__)(l,"lowercase");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,s,tr.str))?(0,tr.__setitem__)(o,"lowercase",(0,tr.dict)({singular:s,plural:(0,tr.__add__)(s,"s")})):(0,tr.__setitem__)(o,"lowercase",s)}else(0,tr.__setitem__)(o,"lowercase",(0,tr.dict)({singular:"??",plural:"???"}));if((0,tr.__t__)((0,tr.__in__)("capital",l))){var c=(0,tr.__getitem__)(l,"capital");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,c,tr.str))?(0,tr.__setitem__)(o,"capital",(0,tr.dict)({singular:c,plural:(0,tr.__add__)(c,"s")})):(0,tr.__setitem__)(o,"capital",c)}else(0,tr.__setitem__)(o,"capital",(0,tr.dict)({singular:function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,"lowercase"),"singular");return(0,tr.__call__)(e.capitalize,e)}(),plural:function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,"lowercase"),"plural");return(0,tr.__call__)(e.capitalize,e)}()}));if((0,tr.__t__)((0,tr.__in__)("abbreviated",l))){var u=(0,tr.__getitem__)(l,"abbreviated");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,u,tr.str))?(0,tr.__setitem__)(o,"abbreviated",(0,tr.dict)({singular:u,plural:(0,tr.__add__)(u,"s")})):(0,tr.__setitem__)(o,"abbreviated",u)}else(0,tr.__setitem__)(o,"abbreviated",(0,tr.dict)({singular:(0,tr.__add__)((0,tr.__getslice__)((0,tr.__getitem__)((0,tr.__getitem__)(o,"capital"),"singular"),0,3,1),"."),plural:(0,tr.__add__)(function(){var e=(0,tr.__getslice__)((0,tr.__getitem__)((0,tr.__getitem__)(o,"capital"),"plural"),0,3,1);return(0,tr.__call__)(e.rstrip,e,"s")}(),"s.")}));return(0,tr.__setitem__)(n,"title",o),n}))},get _make_counter_formatter_prefix_for_thm(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"env_name":t=_[a];break;case"thm_spec":r=_[a]}}}var i=(0,tr.dict)({}),o=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return function(){for(var t,r=[],n=(t=e,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,[i,(0,tr.__add__)(o,"~")])}()}return(0,tr.dict)(r)}()};return(0,tr.__setitem__)(i,"lowercase",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"lowercase"))),(0,tr.__setitem__)(i,"capital",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"capital"))),(0,tr.__setitem__)(i,"abbreviated",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"abbreviated"))),function(){var e=i;(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(i,"capital"))}(),i}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=[],a=function(){var t=e.environments;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1];!function(){var t=_;(0,tr.__call__)(t.append,t,(0,tr.__call__)(gs,null,(0,tr.__kwargtrans__)({environmentname:l,theorem_spec:s,theorem_type_spec:(0,tr.__getitem__)(e.theorem_types,(0,tr.__getitem__)(s,"theorem_type")),allowed_ref_label_prefixes:e.allowed_ref_label_prefixes})))}()}return(0,tr.dict)({environments:_})}))}}),Os=Ps,Es={};t(Es,"logger",(()=>Ts)),t(Es,"_default_math_environment_names",(()=>Ns)),t(Es,"eq_default_counter_formatter_spec",(()=>Ls)),t(Es,"FeatureMath",(()=>Ms)),t(Es,"MathEnvironment",(()=>Rs)),t(Es,"MathEqrefMacro",(()=>Fs)),t(Es,"_EmptyClass",(()=>Is)),t(Es,"_ProxyNodeWithRecomposedLatex",(()=>js)),t(Es,"_rx_newline_spaces",(()=>Ds)),t(Es,"FeatureClass",(()=>Bs)),t(Es,"LatexEnvironmentBodyContentsParser",(()=>mi)),t(Es,"Counter",(()=>us)),t(Es,"FLMEnvironmentSpecBase",(()=>Vo)),t(Es,"ParsedArgumentsInfo",(()=>wn)),t(Es,"ParsingStateDeltaExtendLatexContextDb",(()=>$i)),t(Es,"LatexWalkerLocatedError",(()=>Dr)),t(Es,"build_counter_formatter",(()=>ls)),t(Es,"latexnodes_parsers",(()=>oa)),t(Es,"Feature",(()=>sr)),t(Es,"FLMArgumentSpec",(()=>ko)),t(Es,"MacroSpec",(()=>eo)),t(Es,"ParsingStateDeltaEnterMathMode",(()=>Cn)),t(Es,"FLMMacroSpecBase",(()=>qo)),t(Es,"latexnodes_nodes",(()=>Or));tr=a("hoVWB");var As={},Cs={};(0,tr.__nest__)(As,"",dr),(0,tr.__nest__)(Cs,"",Vn);var Ss="flm.feature.math",Ts=function(){var e=As;return(0,tr.__call__)(e.getLogger,e,Ss)}(),Ns=(0,tr.tuple)(["equation","equation*","align","align*","gather","gather*"]),Ls=(0,tr.dict)({format_num:(0,tr.dict)({template:"(${arabic})"}),prefix_display:(0,tr.dict)({singular:"Eq.~",plural:"Eqs.~",capital:(0,tr.dict)({singular:"Equation",plural:"Equations"})}),delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"}),Ms=(0,tr.__class__)("FeatureMath",[sr],{__module__:Ss,feature_name:"math",feature_title:"Mathematical typesetting: equations and equation references",get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("\n            You can use the following environments and macros to typeset pretty display\n            math equations, create labels, and refer to them at other places in your\n            document.\n\n            Note that all equation labels must begin with the prefix \\verbcode{",e.eqref_ref_type),":}.")}))},feature_optional_dependencies:["refs"],feature_default_config:(0,tr.dict)({counter_formatter:Ls}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="eqref";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_="eq";if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"counter_formatter":t=i[o];break;case"math_environment_names":r=i[o];break;case"eqref_macro_name":n=i[o];break;case"eqref_ref_type":_=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ms,"__init__"),null,e),(0,tr.__t__)(null===t))t=(0,tr.__getitem__)(e.feature_default_config,"counter_formatter");if(e.counter_formatter=(0,tr.__call__)(ls,null,t,Ls,(0,tr.__kwargtrans__)({counter_formatter_id:"eq"})),(0,tr.__t__)(null===r))r=Ns;e.math_environment_names=r,e.eqref_macro_name=n,e.eqref_ref_type=_}))},DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:Ss,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Ss,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if(e.equation_counter=(0,tr.__call__)(us,null,e.feature.counter_formatter),e.equation_info_by_node=(0,tr.dict)({}),(0,tr.__t__)(function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}())){var _=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();!function(){var t=_;(0,tr.__call__)(t.register_counter_formatter,t,(0,tr.__kwargtrans__)({counter_formatter:e.feature.counter_formatter}))}()}}))},get new_numbered_display_math(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"lineno":r=a[i];break;case"custom_tag_flm_text":n=a[i]}}}var o=(0,tr.tuple)([function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}(),r]);if((0,tr.__t__)((0,tr.__in__)(o,e.equation_info_by_node)))return(0,tr.__getitem__)(e.equation_info_by_node,o);if((0,tr.__t__)(null!==n)){var l=n,s="_{}".format((0,tr.__getitem__)(o,0));if((0,tr.__t__)(r))s=(0,tr.__call__)(tr.__iadd__,null,s,"-{}".format(r));var c=null}else{var u=function(){var t=e.equation_counter;return(0,tr.__call__)(t.step_and_format_flm,t)}();s=u[0],l=u[1],c=s}var f=(0,tr.tuple)([s,l,c]);return(0,tr.__setitem__)(e.equation_info_by_node,o,f),f}))}}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=function(){for(var t,r=[],n=e.math_environment_names,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(Rs,null,a))}return r}(),a=[];return(0,tr.__t__)(null!==e.eqref_macro_name)&&function(){var t=a;(0,tr.__call__)(t.append,t,(0,tr.__call__)(Fs,null,(0,tr.__kwargtrans__)({macroname:e.eqref_macro_name,ref_type:e.eqref_ref_type})))}(),(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:a,environments:_}))}))}}),Is=(0,tr.__class__)("_EmptyClass",[tr.object],{__module__:Ss}),js=(0,tr.__class__)("_ProxyNodeWithRecomposedLatex",[tr.object],{__module__:Ss,pos:null,pos_end:null,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"verbatim":t=n[_]}}}e._verbatim=t,e.flm_specinfo=(0,tr.__call__)(Is,null),e.flm_specinfo.recompose_flm_text=function(t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"node":t=_[a];break;case"recomposer":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n.recompose_flm_text,n,t,(0,tr.__kwargtrans__)({recomposer:r}))}()}}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"visitor":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.visit_unknown_node,r,e)}()}))},get recompose_flm_text(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}return e._verbatim}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e._verbatim}))}}),Rs=(0,tr.__class__)("MathEnvironment",[Vo],{__module__:Ss,get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Display equation typeset as the corresponding LaTeX environment."}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"environmentname":t=_[a];break;case"is_numbered":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Rs,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t})),(0,tr.__t__)(null!==r)?e.is_numbered=r:e.is_numbered=(0,tr.__ne__)((0,tr.__getslice__)(t,(0,tr.__neg__)(1),null,1),"*"),(0,tr.__t__)(!(0,tr.__t__)(e.is_numbered))&&(e.allowed_in_standalone_mode=!0)}))},_fields:(0,tr.tuple)(["environmentname","is_numbered"]),get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"token":t=o[l];break;case"nodeargd":r=o[l];break;case"arg_parsing_state_delta":n=o[l];break;case"latex_walker":_=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__call__)(Cn,null)}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}return(0,tr.__call__)(mi,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)($i,null,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(eo,null,"label",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"label"}))]})),(0,tr.__call__)(eo,null,"tag",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"*",argname:"tag_star"})),(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"text"}))]})),(0,tr.__call__)(eo,null,"\\",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:!1}))}(),argname:"vertical_spacing"}))]}))]}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}if(t.flm_equation_lines_labels_infos=[],(0,tr.__t__)(!(0,tr.__t__)(e.is_numbered)))return t;for(var a=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}}return(0,tr.dict)({labels_info:[],custom_tag_flm_text:null,nonumber:!1,line_nodelist:[]})},i=(0,tr.__call__)(tr.dict,null,(0,tr.__call__)(a,null)),o=function(e){if(void 0===e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("newline_node"===_)e=n[_]}}!function(){var r=t.flm_equation_lines_labels_infos;(0,tr.__call__)(r.append,r,(0,tr.dict)({labels:(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(i,"labels_info")),custom_tag_flm_text:(0,tr.__getitem__)(i,"custom_tag_flm_text"),nonumber:(0,tr.__getitem__)(i,"nonumber"),line_nodelist:(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(i,"line_nodelist")),newline_node:e}))}(),function(){var e=i;(0,tr.__call__)(e.py_update,e,(0,tr.__call__)(a,null))}()},l=!1,s=t.nodelist,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"label"))){var f=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:u}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["label"]))}(),d=function(){var e=(0,tr.__getitem__)(f,"label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",d)))var h=function(){var e=d;return(0,tr.__call__)(e.py_split,e,":",1)}(),p=h[0],g=h[1];else p=(h=(0,tr.tuple)([null,d]))[0],g=h[1];var v=(0,tr.dict)({node:u,label:(0,tr.tuple)([p,g])});!function(){var e=(0,tr.__getitem__)(i,"labels_info");(0,tr.__call__)(e.append,e,v)}()}else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"tag"))){var m=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:u}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["tag_star","text"]))}(),y=function(){var e,t=(e=(0,tr.__getitem__)(m,"text"),(0,tr.__call__)(e.get_content_nodelist,e));return(0,tr.__call__)(t.latex_verbatim,t)}();if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(m,"tag_star");return(0,tr.__call__)(e.was_provided,e)}())))y="({})".format(y);(0,tr.__setitem__)(i,"custom_tag_flm_text",y)}else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"nonumber")))(0,tr.__setitem__)(i,"nonumber",!0);else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"\\"))){(0,tr.__call__)(o,null,u);l=!0}else if(function(){var e=(0,tr.__getitem__)(i,"line_nodelist");(0,tr.__call__)(e.append,e,u)}(),(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCommentNode)}()))&&!(0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,Or.LatexCharsNode)}())&&!(0,tr.__t__)(function(){var e=u.chars;return(0,tr.__call__)(e.strip,e)}()))))l=!1}(0,tr.__t__)(!(0,tr.__t__)(l))&&(0,tr.__call__)(o,null);for(s=(0,tr.__call__)(tr.enumerate,null,t.flm_equation_lines_labels_infos),c=0;c<(0,tr.len)(s);c++){(h=(0,tr.__getitem__)(s,c))[0];var w=h[1];if((0,tr.__t__)((0,tr.__t__)((0,tr.__getitem__)(w,"nonumber"))&&((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(w,"labels")))||(0,tr.__getitem__)(w,"custom_tag_flm_text")))){var b=[];if((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(w,"labels")))){var k=function(){for(var e,t=[],r=(0,tr.__getitem__)(w,"labels"),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(_,"label"))}return t}(),x=(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=k,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("‘",_),"’"))}return t}());!function(){var e=b;(0,tr.__call__)(e.append,e,"\\label label(s) {}".format(x))}()}(0,tr.__t__)((0,tr.__getitem__)(w,"custom_tag_flm_text"))&&function(){var e=b;(0,tr.__call__)(e.append,e,"custom \\tag “{}”".format((0,tr.__getitem__)(w,"custom_tag_flm_text")))}();var P=function(){var e=" and ";return(0,tr.__call__)(e.join,e,b)}(),O=(0,tr.__call__)(LatexWalkerParseError,null,"You can't have \\nonumber and \\label/\\tag on the same equation line, found {}".format(P),(0,tr.__kwargtrans__)({pos:((0,tr.__t__)((0,tr.__getitem__)(w,"newline_node"))||t).pos}));throw O.__cause__=null,O}}return t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=t.environmentname;if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"math")}()))){var o=(0,tr.__call__)(tr.ValueError,null,"Feature 'math' is not enabled, cannot render math environment");throw o.__cause__=null,o}var l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"math")}(),s=null;if((0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}()))s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}();for(var c=(0,tr.__call__)(tr.list,null,t.nodelist),u=null,f=0,d=t.flm_equation_lines_labels_infos,h=0;h<(0,tr.len)(d);h++){var p=(0,tr.__getitem__)(d,h),g=(0,tr.__getitem__)(p,"nonumber");if(!(0,tr.__t__)(g)){var v=(0,tr.__getitem__)(p,"custom_tag_flm_text"),m=function(){var e=l;return(0,tr.__call__)(e.new_numbered_display_math,e,t,f,v)}(),y=m[0],w=m[1],b=m[2],k="equation-{}".format(y);if((0,tr.__t__)(null===u))u=k;if((0,tr.__t__)(!(0,tr.__t__)(v))){var x=(0,tr.__getitem__)(p,"newline_node");if((0,tr.__t__)(null!==x))var P=function(){var e=c;return(0,tr.__call__)(e.index,e,x)}();else P=(0,tr.__call__)(tr.len,null,c);!function(){var e=c;(0,tr.__call__)(e.insert,e,P,(0,tr.__call__)(js,null,(0,tr.__add__)((0,tr.__add__)("\\tag*{",w),"}")))}()}k=u;if((0,tr.__t__)((0,tr.__t__)(null!==s)&&r.is_first_pass))for(var O=(0,tr.__getitem__)(p,"labels"),E=0;E<(0,tr.len)(O);E++){var A=(0,tr.__getitem__)(O,E),C=(m=(0,tr.__getitem__)(A,"label"))[0],S=m[1],T=l.feature.counter_formatter.counter_formatter_id;!function(){var e=s;(0,tr.__call__)(e.register_reference,e,C,S,(0,tr.__kwargtrans__)({node:t,formatted_ref_flm_text:w,target_href:"#{}".format(k),counter_value:b,counter_formatter_id:T}))}()}f=(0,tr.__call__)(tr.__iadd__,null,f,1)}}return function(){var e,t=r.fragment_renderer;return(0,tr.__call__)(t.render_math_content,t,(0,tr.tuple)(["",""]),(e=Or,(0,tr.__call__)(e.LatexNodeList,e,c)),r,"display",(0,tr.__kwargtrans__)({environmentname:i,target_id:u}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}for(var i=(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}"),o=(i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),[]),l=!1,s=t.flm_equation_lines_labels_infos,c=0;c<(0,tr.len)(s);c++){for(var u=(0,tr.__getitem__)(s,c),f="",d=(0,tr.__getitem__)(u,"line_nodelist"),h=0;h<(0,tr.len)(d);h++){var p=(0,tr.__getitem__)(d,h);f=(0,tr.__call__)(tr.__iadd__,null,f,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,p)}())}var g=(0,tr.dict)({initial:"",final:""}),v=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}var _=(0,tr.__add__)("\n",function(){var t=e;return(0,tr.__call__)(t.group,t,"indent")}());return(0,tr.__t__)((0,tr.__eq__)(function(){var t=e;return(0,tr.__call__)(t.start,t)}(),0))?(0,tr.__t__)(l)?((0,tr.__setitem__)(g,"initial",_),""):_:(0,tr.__t__)((0,tr.__eq__)(function(){var t=e;return(0,tr.__call__)(t.end,t)}(),(0,tr.__call__)(tr.len,null,f)))?((0,tr.__setitem__)(g,"final",_),""):_};f=function(){var e=Ds;return(0,tr.__call__)(e.sub,e,v,f)}();if((0,tr.__t__)(null!==(0,tr.__getitem__)(u,"custom_tag_flm_text")))f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)("\\tag*{",function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(u,"custom_tag_flm_text"))}()),"}"));for(d=(0,tr.__getitem__)(u,"labels"),h=0;h<(0,tr.len)(d);h++){var m=(0,tr.__getitem__)(d,h),y=(0,tr.__getitem__)(m,"label"),w=y[0],b=y[1],k=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",w,b,t.latex_walker.resource_info)}();f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(k,"safe_label")),"}"))}if((0,tr.__t__)((0,tr.__getitem__)(u,"nonumber")))f=(0,tr.__call__)(tr.__iadd__,null,f,"\\nonumber ");if((0,tr.__t__)((0,tr.__getitem__)(u,"newline_node")))f=(0,tr.__call__)(tr.__iadd__,null,f,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(u,"newline_node"))}());var x=(0,tr.__getitem__)(g,"final");f=(0,tr.__call__)(tr.__iadd__,null,f,x);!function(){var e=o;(0,tr.__call__)(e.append,e,f)}();l=!!(0,tr.__t__)((0,tr.__call__)(tr.len,null,x))}i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__call__)("".join,"",o));return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),Ds=function(){var e=Cs;return(0,tr.__call__)(e.compile,e,"([ \\t]*?\\n)+(?P<indent>[ \\t]*)")}(),Fs=(0,tr.__class__)("MathEqrefMacro",[qo],{__module__:Ss,delayed_render:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="eqref";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="eq";var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"ref_type":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fs,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(ko,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e)}(),(0,tr.__kwargtrans__)({argname:"ref_label",flm_doc:(0,tr.__add__)((0,tr.__add__)("Equation label.  Must begin with the prefix ‘\\verbtext+",r),":+’")}))]})),e.ref_type=r}))},_fields:(0,tr.tuple)(["macroname","ref_type"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("Refer to an equation by its label.  The argument must be\n            a valid equation label which starts with \\verbcode+",e.ref_type),":+.  You can place labels in display equations using the\n            \\verbcode+\\label{…}+ macro.")}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["ref_label"]))}(),i=null,o=function(){var e=(0,tr.__getitem__)(a,"ref_label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",o))){var l=function(){var e=o;return(0,tr.__call__)(e.py_split,e,":",1)}();i=l[0],o=l[1]}if((0,tr.__t__)((0,tr.__ne__)(i,e.ref_type))){var s=(0,tr.__call__)(Dr,null,"Equation labels must begin with “{}:” (error in ‘\\{}’)".format(e.ref_type,t.macroname),(0,tr.__kwargtrans__)({pos:t.pos}));throw s.__cause__=null,s}t.flmarg_ref=(0,tr.tuple)([i,o]),t.flm_ref_info=(0,tr.dict)({ref_list:[t.flmarg_ref],display_content_nodelist:null})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=t.flmarg_ref,o=i[0],l=i[1],s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),c=t.latex_walker.resource_info;try{return function(){var e=s;return(0,tr.__call__)(e.render_ref,e,o,l,null,c,(0,tr.__kwargtrans__)({counter_with_prefix:!1}))}()}catch(e){if((0,tr.isinstance)(e,tr.Exception)){var u=e;!function(){var e,r=Ts;(0,tr.__call__)(r.error,r,"Failed to resolve reference to ‘{}:{}’: {} in ‘{}’ @ {}".format(o,l,u,(e=t,(0,tr.__call__)(e.latex_verbatim,e)),function(){var e=t;return(0,tr.__call__)(e.format_pos,e)}()))}();var f=(0,tr.__call__)(Dr,null,"Unable to resolve reference to ‘{}:{}’. {}".format(o,l,u),(0,tr.__kwargtrans__)({pos:t.pos}));throw f.__cause__=null,f}throw e}}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",(0,tr.__getitem__)(t.flmarg_ref,0),(0,tr.__getitem__)(t.flmarg_ref,1),t.latex_walker.resource_info)}();return(0,tr.__add__)((0,tr.__add__)("\\eqref{",(0,tr.__getitem__)(i,"safe_label")),"}")}))}}),Bs=Ms,zs={};t(zs,"logger",(()=>Gs)),t(zs,"_href_arg_specs",(()=>Ws)),t(zs,"_rx_url_unsafe",(()=>$s)),t(zs,"HrefHyperlinkMacro",(()=>Ys)),t(zs,"FeatureHref",(()=>Hs)),t(zs,"FeatureClass",(()=>Xs)),t(zs,"SimpleLatexDefinitionsFeature",(()=>cr)),t(zs,"ParsedArgumentsInfo",(()=>wn)),t(zs,"latexnodes_parsers",(()=>oa)),t(zs,"FLMArgumentSpec",(()=>ko)),t(zs,"FLMMacroSpecBase",(()=>qo)),t(zs,"latexnodes_nodes",(()=>Or));tr=a("hoVWB");var qs={},Vs={};(0,tr.__nest__)(qs,"",dr),(0,tr.__nest__)(Vs,"",Vn);var Us="flm.feature.href",Gs=function(){var e=qs;return(0,tr.__call__)(e.getLogger,e,Us)}(),Ws=(0,tr.dict)({target_href:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.tuple)(["{","}"]))}(),argname:"target_href"})),target_email:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.tuple)(["{","}"]))}(),argname:"target_email"})),display_text:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"display_text"})),target_Xhref:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"target_href"})),target_Xemail:(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"target_email"}))}),$s=function(){var e=Vs;return(0,tr.__call__)(e.compile,e,"[#%{}\\\\]")}(),Ys=(0,tr.__class__)("HrefHyperlinkMacro",[qo],{__module__:Us,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.tuple)(["target_href","target_email","display_text"]),n="href";if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"command_arguments":r=a[i];break;case"ref_type":n=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t._get_arguments_spec_list,t,r)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ys,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:o})),e.command_arguments=r,e.ref_type=n,e.command_argnames=function(){for(var e,t=[],r=o,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,_.argname)}return t}(),(0,tr.__t__)((0,tr.__in__)("display_text",e.command_argnames))&&(e._flm_main_text_argument="display_text")}))},_fields:(0,tr.tuple)(["macroname","command_arguments","ref_type"]),get _get_arguments_spec_list(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"cls":e=n[_];break;case"command_arguments":t=n[_]}}}return function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(Ws,a))}return r}()}))},get pretty_url(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"cls":e=n[_];break;case"target_href":t=n[_]}}}for(var a=(0,tr.__call__)(tr.str,null,t),i=(0,tr.tuple)(["http://","https://","mailto:"]),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,l)}())){a=(0,tr.__getslice__)(a,(0,tr.__call__)(tr.len,null,l),null,1);break}}a=function(){var e=a;return(0,tr.__call__)(e.rstrip,e,"/#?")}();return a}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(r.get_all_arguments_info,r,e.command_argnames)}(),i=null,o=null;if((0,tr.__t__)((0,tr.__in__)("target_href",a)))i=function(){var e=(0,tr.__getitem__)(a,"target_href");return(0,tr.__call__)(e.get_content_as_chars,e)}();else{if(!(0,tr.__t__)((0,tr.__in__)("target_email",a))){var l=(0,tr.__call__)(tr.ValueError,null,"FLM Internal Error: no URL or hyper reference provided to href-like macro");throw l.__cause__=null,l}i=(0,tr.__add__)("mailto:",function(){var e=(0,tr.__getitem__)(a,"target_email");return(0,tr.__call__)(e.get_content_as_chars,e)}())}if((0,tr.__t__)((0,tr.__in__)("display_text",a)))o=function(){var e=(0,tr.__getitem__)(a,"display_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();t.flm_href_info=(0,tr.dict)({target_href:i,display_text_nodelist:o})}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__getitem__)(t.flm_href_info,"target_href"),o=(0,tr.__getitem__)(t.flm_href_info,"display_text_nodelist");if((0,tr.__t__)(null===o)){var l=function(){var e=t.parsing_state;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({is_block_level:!1}))}();o=function(){var r,n,_=t.latex_walker;return(0,tr.__call__)(_.make_nodelist,_,[(n=t.latex_walker,(0,tr.__call__)(n.make_node,n,Kr,(0,tr.__kwargtrans__)({parsing_state:l,chars:(r=e,(0,tr.__call__)(r.pretty_url,r,i)),pos:t.pos,pos_end:t.pos})))],(0,tr.__kwargtrans__)({parsing_state:l}))}()}return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_link,t,e.ref_type,i,o,r)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=(0,tr.__add__)("\\",t.macroname),o=[];if((0,tr.__t__)(null!==t.nodeargd))for(var l=(0,tr.__call__)(tr.zip,null,e.command_argnames,t.nodeargd.argnlist),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1],d=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,f)}();if((0,tr.__t__)((0,tr.__in__)(u,(0,tr.tuple)(["target_href","target_email"])))){var h=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,d),1);!function(){var e,t=o;(0,tr.__call__)(t.append,t,(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(d,0),(e=$s,(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)"m"===n&&(e=r[n])}}return(0,tr.__add__)("\\",(_=e,(0,tr.__call__)(_.group,_,0)));var _}),(0,tr.__getslice__)(d,1,h,1)))),(0,tr.__getitem__)(d,h)))}()}else!function(){var e=o;(0,tr.__call__)(e.append,e,d)}()}return(0,tr.__add__)(i,(0,tr.__call__)("".join,"",o))}))}}),Hs=(0,tr.__class__)("FeatureHref",[cr],{__module__:Us,feature_name:"href",feature_title:"Hyperlinks",latex_definitions:(0,tr.dict)({macros:[(0,tr.__call__)(Ys,null,(0,tr.__kwargtrans__)({macroname:"href",command_arguments:(0,tr.tuple)(["target_href","display_text"])})),(0,tr.__call__)(Ys,null,(0,tr.__kwargtrans__)({macroname:"url",command_arguments:(0,tr.tuple)(["target_href"])})),(0,tr.__call__)(Ys,null,(0,tr.__kwargtrans__)({macroname:"email",command_arguments:(0,tr.tuple)(["target_email"])}))]}),HrefHyperlinkMacroClass:Ys}),Xs=Hs,Zs={};t(Zs,"logger",(()=>Qs)),t(Zs,"GraphicsResource",(()=>ec)),t(Zs,"SimpleIncludeGraphicsMacro",(()=>tc)),t(Zs,"FeatureSimplePathGraphicsResourceProvider",(()=>rc)),t(Zs,"FeatureClass",(()=>nc)),t(Zs,"ParsedArgumentsInfo",(()=>wn)),t(Zs,"LatexWalkerLocatedError",(()=>Dr)),t(Zs,"latexnodes_parsers",(()=>oa)),t(Zs,"Feature",(()=>sr)),t(Zs,"FLMArgumentSpec",(()=>ko)),t(Zs,"FLMMacroSpecBase",(()=>qo));tr=a("hoVWB");var Ks={};(0,tr.__nest__)(Ks,"",dr);var Js="flm.feature.graphics",Qs=function(){var e=Ks;return(0,tr.__call__)(e.getLogger,e,Js)}(),ec=(0,tr.__class__)("GraphicsResource",[tr.object],{__module__:Js,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=null,_=null,a=null,i=null,o=null;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"src_url":t=s[c];break;case"srcset":r=s[c];break;case"graphics_type":n=s[c];break;case"dpi":_=s[c];break;case"pixel_dimensions":a=s[c];break;case"physical_dimensions":i=s[c];break;case"source_info":o=s[c]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ec,"__init__"),null,e),e.src_url=t,e.srcset=r,e.graphics_type=n,e.dpi=_,e.pixel_dimensions=a,e.physical_dimensions=i,e.source_info=o,e._fields=(0,tr.tuple)(["src_url","srcset","graphics_type","dpi","pixel_dimensions","physical_dimensions","source_info"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),tc=(0,tr.__class__)("SimpleIncludeGraphicsMacro",[qo],{__module__:Js,is_block_level:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tc,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:"includegraphics",arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),argname:"graphics_options"})),(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"graphics_path"}))]},r)))}))},_fields:(0,tr.tuple)(["macroname"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Insert an external graphics object."}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["graphics_options","graphics_path"]))}();if(t.flmarg_graphics_options_value=function(){var e=(0,tr.__getitem__)(a,"graphics_options");return(0,tr.__call__)(e.get_content_as_chars,e)}(),t.flmarg_graphics_path=function(){var e=(0,tr.__getitem__)(a,"graphics_path");return(0,tr.__call__)(e.get_content_as_chars,e)}(),(0,tr.__t__)(t.flmarg_graphics_options_value)){var i=(0,tr.__call__)(Dr,null,(0,tr.__add__)("Graphics options are not supported for now: ".format(),"‘{}’".format(t.flmarg_graphics_options_value)),(0,tr.__kwargtrans__)({pos:(0,tr.__getitem__)(a,"graphics_options").nodelist.pos}));throw i.__cause__=null,i}return t.flm_resources=[(0,tr.dict)({resource_type:"graphics_path",resource_source_type:"file",resource_source:t.flmarg_graphics_path})],t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=r.fragment_renderer,o=(t.flmarg_graphics_options_value,t.flmarg_graphics_path);if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"graphics_resource_provider")}()))){var l=(0,tr.__call__)(RuntimeError,null,"FLM's ‘SimpleIncludeGraphicsSpecInfo’ (‘\\includegraphics’) requires a ‘graphics_resource_provider’ feature to be installed in the render context");throw l.__cause__=null,l}var s=t.latex_walker.resource_info,c=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"graphics_resource_provider")}(),u=function(){var e=c;return(0,tr.__call__)(e.get_graphics_resource,e,o,s)}();return function(){var e=i;return(0,tr.__call__)(e.render_graphics_block,e,u,r)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=null;if((0,tr.__t__)(null!==r.render_context)){var o=function(){var e=r.render_context;return(0,tr.__call__)(e.feature_render_manager,e,"graphics_resource_provider")}(),l=function(){var e=o;return(0,tr.__call__)(e.get_graphics_resource,e,t.flmarg_graphics_path,(0,tr.__kwargtrans__)({resource_info:t.latex_walker.resource_info}))}(),s=r.render_context.fragment_renderer;if((0,tr.__t__)(null!==s))if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(l.graphics_type,"raster"))&&(0,tr.__call__)(tr.hasattr,null,s,"graphics_raster_magnification")))i=s.graphics_raster_magnification;else if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,s,"graphics_vector_magnification")))i=s.graphics_vector_magnification}else{!function(){var e=Qs;(0,tr.__call__)(e.warning,e,"Recomposing pure latex: we have no access to a graphics resource provider (need a render_context in the pure latex recomposer for that). Graphics resource information will not be available.".format())}();l=(0,tr.__call__)(ec,null,(0,tr.__kwargtrans__)({src_url:t.flmarg_graphics_path}))}var c=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"graphics")}(),u=function(){var e=c;return(0,tr.__call__)(e.py_get,e,"width_scale",null)}(),f=function(){var e=c;return(0,tr.__call__)(e.py_get,e,"set_max_width","\\linewidth")}();if((0,tr.__t__)((0,tr.__t__)(null!==i)&&null!==u)){!function(){var e=Qs;(0,tr.__call__)(e.warning,e,"Applying graphics magnification both from magnification=%f from fragment_renderer option as well as from width_scale recomposer option.")}();i=(0,tr.__mul__)(i,u)}else if((0,tr.__t__)(null!==u))i=u;else if((0,tr.__t__)(null===i))i=1;var d=[];if((0,tr.__t__)(null!==l.physical_dimensions)){var h=l.physical_dimensions,p=h[0];h[1];if((0,tr.__t__)(null!==p)){p=(0,tr.__mul__)((0,tr.__call__)(tr.float,null,p),i);!function(){var e=d;(0,tr.__call__)(e.append,e,"width={}bp".format(p))}()}}return(0,tr.__t__)((0,tr.__t__)(null!==f)&&!1!==f)&&(function(){var e=r;(0,tr.__call__)(e.ensure_latex_package,e,"adjustbox",(0,tr.__kwargtrans__)({options:"export"}))}(),function(){var e=d;(0,tr.__call__)(e.append,e,"max width={}".format(f))}()),(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\includegraphics",(0,tr.__t__)(d)?(0,tr.__add__)((0,tr.__add__)("[",(0,tr.__call__)(",".join,",",function(){for(var e,t=[],r=d,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,_)}return t}())),"]"):""),"{"),(0,tr.__call__)(tr.str,null,l.src_url)),"}")}))}}),rc=(0,tr.__class__)("FeatureSimplePathGraphicsResourceProvider",[sr],{__module__:Js,feature_name:"graphics_resource_provider",feature_title:"Include external graphics",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Js,get get_graphics_resource(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"graphics_path":t=_[a];break;case"resource_info":r=_[a]}}}return(0,tr.__call__)(ec,null,(0,tr.__kwargtrans__)({src_url:t}))}))}})}),nc=rc,_c={};t(_c,"logger",(()=>Cc)),t(_c,"FloatContentHandlerBase",(()=>Sc)),t(_c,"FloatContentAnyContent",(()=>Tc)),t(_c,"FloatContentIncludeGraphics",(()=>Nc)),t(_c,"FloatContentCells",(()=>Lc)),t(_c,"available_content_handlers",(()=>Mc)),t(_c,"_make_content_handler",(()=>Ic)),t(_c,"float_label_arg",(()=>jc)),t(_c,"float_caption_arg",(()=>Rc)),t(_c,"FloatEnvironment",(()=>Dc)),t(_c,"FloatInstance",(()=>Fc)),t(_c,"_float_default_counter_formatter_spec",(()=>Bc)),t(_c,"FloatType",(()=>zc)),t(_c,"_default_float_types",(()=>qc)),t(_c,"FeatureFloats",(()=>Vc)),t(_c,"_whatname",(()=>Uc)),t(_c,"_extend_mdef_flm_doc",(()=>Gc)),t(_c,"FeatureClass",(()=>Wc)),t(_c,"LatexEnvironmentBodyContentsParser",(()=>mi)),t(_c,"Counter",(()=>us)),t(_c,"FLMEnvironmentSpecBase",(()=>Vo)),t(_c,"SimpleIncludeGraphicsMacro",(()=>tc)),t(_c,"ParsingStateDeltaExtendLatexContextDb",(()=>$i)),t(_c,"CellsEnvironment",(()=>xc)),t(_c,"LatexWalkerLocatedError",(()=>Dr)),t(_c,"build_counter_formatter",(()=>ls)),t(_c,"make_verb_argument",(()=>Go)),t(_c,"Feature",(()=>sr)),t(_c,"FLMArgumentSpec",(()=>ko)),t(_c,"MacroSpec",(()=>eo)),t(_c,"latexnodes_parsers",(()=>oa)),t(_c,"latexnodes_nodes",(()=>Or)),t(_c,"ParsedArgumentsInfo",(()=>wn));tr=a("hoVWB");var ac={};t(ac,"logger",(()=>sc)),t(ac,"_NotSpecified",(()=>cc)),t(ac,"LatexTabularRowSeparatorSpec",(()=>uc)),t(ac,"LatexTabularColumnSeparatorSpec",(()=>fc)),t(ac,"_macro_args",(()=>dc)),t(ac,"MergeMacroSpec",(()=>hc)),t(ac,"CellMacro",(()=>pc)),t(ac,"CelldataMacroSpec",(()=>gc)),t(ac,"CellIndexRangeModel",(()=>vc)),t(ac,"CellPlacementModel",(()=>mc)),t(ac,"CellModel",(()=>yc)),t(ac,"_splfysidews",(()=>wc)),t(ac,"CellPlacementsMappingModel",(()=>bc)),t(ac,"CellsModel",(()=>kc)),t(ac,"CellsEnvironment",(()=>xc)),t(ac,"FeatureProvideCells",(()=>Pc)),t(ac,"FeatureClass",(()=>Oc)),t(ac,"LatexArgumentSpec",(()=>Ar)),t(ac,"ParsingStateDelta",(()=>Pn)),t(ac,"FLMEnvironmentSpecBase",(()=>Vo)),t(ac,"ParsedArgumentsInfo",(()=>wn)),t(ac,"LatexWalkerLocatedError",(()=>Dr)),t(ac,"latexnodes_parsers",(()=>oa)),t(ac,"Feature",(()=>sr)),t(ac,"FLMArgumentSpec",(()=>ko)),t(ac,"macrospec",(()=>ii)),t(ac,"latexnodes_nodes",(()=>Or)),t(ac,"FLMMacroSpecError",(()=>nl));tr=a("hoVWB");var ic={},oc={};(0,tr.__nest__)(ic,"",dr),(0,tr.__nest__)(oc,"",Vn);var lc="flm.feature.cells",sc=function(){var e=ic;return(0,tr.__call__)(e.getLogger,e,lc)}(),cc=(0,tr.__class__)("_NotSpecified",[tr.object],{__module__:lc}),uc=(0,tr.__class__)("LatexTabularRowSeparatorSpec",[ii.MacroSpec],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uc,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:"\\",arguments_spec_list:[]}))}))}}),fc=(0,tr.__class__)("LatexTabularColumnSeparatorSpec",[ii.SpecialsSpec],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fc,"__init__"),null,e,(0,tr.__kwargtrans__)({specials_chars:"&",arguments_spec_list:[]}))}))}}),dc=(0,tr.dict)({mergespec:(0,tr.__call__)(Ar,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({enable_groups:!1}))}(),(0,tr.__kwargtrans__)({argname:"mergespec"})),styles:(0,tr.__call__)(Ar,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["<",">"]),enable_groups:!1,optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"styles"})),styles_mapping:(0,tr.__call__)(Ar,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["<",">"]),enable_groups:!1,optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"styles_mapping"})),cellcontents:(0,tr.__call__)(ko,null,"{",(0,tr.__kwargtrans__)({argname:"cellcontents",is_block_level:!0}))}),hc=(0,tr.__class__)("MergeMacroSpec",[ii.MacroSpec],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="merge";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,hc,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__getitem__)(dc,"mergespec")]}))}))}});(0,tr.__setitem__)(dc,"placement",(0,tr.__call__)(Ar,null,function(){var e=oa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"placement",parsing_state_delta:function(){var e=ii;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(hc,null)]}))}))}()}))),(0,tr.__setitem__)(dc,"placement_mapping",(0,tr.__call__)(Ar,null,function(){var e=oa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"placement_mapping",parsing_state_delta:function(){var e=ii;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(hc,null)]}))}))}()})));var pc=(0,tr.__class__)("CellMacro",[nl],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="cell";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,pc,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__getitem__)(dc,"styles"),(0,tr.__getitem__)(dc,"placement"),(0,tr.__getitem__)(dc,"cellcontents")]}))}))}});(0,tr.__setitem__)(dc,"celldata_contents",(0,tr.__call__)(Ar,null,"{",(0,tr.__kwargtrans__)({argname:"celldata_contents",parsing_state_delta:function(){var e=ii;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(pc,null),(0,tr.__call__)(uc,null)],specials:[(0,tr.__call__)(fc,null)]}))}))}()})));var gc=(0,tr.__class__)("CelldataMacroSpec",[ii.MacroSpec],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="celldata";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,gc,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__getitem__)(dc,"styles_mapping"),(0,tr.__getitem__)(dc,"placement_mapping"),(0,tr.__getitem__)(dc,"celldata_contents")]}))}))}}),vc=(0,tr.__class__)("CellIndexRangeModel",[tr.object],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"start":t=_[a];break;case"end":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,vc,"__init__"),null,e),e.start=t,e.end=r}))},_fields:(0,tr.tuple)(["start","end"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__eq__)(e.end,(0,tr.__add__)(e.start,1)))?"{}".format((0,tr.__add__)(e.start,1)):"[{}-{}]".format((0,tr.__add__)(e.start,1),e.end)}))}}),mc=(0,tr.__class__)("CellPlacementModel",[tr.object],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"row_range":t=_[a];break;case"col_range":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,mc,"__init__"),null,e),e.row_range=t,e.col_range=r}))},_fields:(0,tr.tuple)(["row_range","col_range"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"{},{}".format((0,tr.__call__)(tr.repr,null,e.row_range),(0,tr.__call__)(tr.repr,null,e.col_range))}))}}),yc=(0,tr.__class__)("CellModel",[tr.object],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement":t=a[i];break;case"styles":r=a[i];break;case"content_nodes":n=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,yc,"__init__"),null,e),e.placement=t,e.styles=r,e.content_nodes=n}))},_fields:(0,tr.tuple)(["placement","styles","content_nodes"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"<Cell @{} <{}> (‘{}’)>".format((0,tr.__call__)(tr.repr,null,e.placement),(0,tr.__call__)(" ".join," ",e.styles),(0,tr.__call__)(wc,null,function(){var t=e.content_nodes;return(0,tr.__call__)(t.latex_verbatim,t)}()))}))}}),wc=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return function(){var t=oc;return(0,tr.__call__)(t.sub,t,"(^\\s+|\\s+$)"," ",e)}()},bc=(0,tr.__class__)("CellPlacementsMappingModel",[tr.object],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"row_placements":t=_[a];break;case"col_placements":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bc,"__init__"),null,e),e.row_placements=t,e.col_placements=r}))},_fields:(0,tr.tuple)(["row_placements","col_placements"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)("".join,"",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"\n    {}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),"\n)".format())}))},get _get_index_range(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"placements":t=a[i];break;case"j":r=a[i];break;case"current":n=a[i]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return(0,tr.__call__)(vc,null,n,(0,tr.__add__)(n,1));if((0,tr.__t__)((0,tr.__lt__)(r,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,t),1))))return(0,tr.__getitem__)(t,r);var o=(0,tr.__getitem__)(t,(0,tr.__neg__)(1));if((0,tr.__t__)(null===o.end)){var l=(0,tr.__add__)(o.start,(0,tr.__add__)((0,tr.__sub__)(r,(0,tr.__call__)(tr.len,null,t)),1));return(0,tr.__call__)(vc,null,l,(0,tr.__add__)(l,1))}return o}))},get get_row_index_range(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"row_j":t=_[a];break;case"current_row":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n._get_index_range,n,e.row_placements,t,r)}()}))},get get_col_index_range(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"col_j":t=_[a];break;case"current_col":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n._get_index_range,n,e.col_placements,t,r)}()}))},get start_row_col(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"current_row":t=_[a];break;case"current_col":r=_[a]}}}return(0,tr.tuple)([function(){var r=e;return(0,tr.__call__)(r.get_row_index_range,r,0,t)}().start,function(){var t=e;return(0,tr.__call__)(t.get_col_index_range,t,0,r)}().start])}))}}),kc=(0,tr.__class__)("CellsModel",[tr.object],{__module__:lc,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,kc,"__init__"),null,e),e.current_row=0,e.current_col=0,e.row_names=(0,tr.dict)({}),e.column_names=(0,tr.dict)({}),(0,tr.__t__)(t))return e.cells_size=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"cells_size")}(),e.cells_data=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"cells_data")}(),void function(){var t=e;(0,tr.__call__)(t.finalize,t)}();e.cells_size=[null,null],e.cells_data=[],e.grid_data=null}))},_fields:(0,tr.tuple)(["cells_size","cells_data"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}var _=(0,tr.__call__)("".join,"",function(){for(var t,r=[],n=e.cells_data,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__add__)("\n        ",(0,tr.__call__)(tr.repr,null,a)))}return r}());return"{}(\n    cells_size={},\n    cells_data=[{}\n    ])".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.cells_size),_)}))},get add_cell_node(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cell_node":t=a[i];break;case"default_placement":r=a[i];break;case"default_styles":n=a[i]}}}var o=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["styles","placement","cellcontents"]))}();if((0,tr.__t__)(null===n))n=[];if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(o,"styles");return(0,tr.__call__)(e.was_provided,e)}()))var l=(0,tr.__add__)(function(){var e,t=(e=(0,tr.__getitem__)(o,"styles"),(0,tr.__call__)(e.get_content_as_chars,e));return(0,tr.__call__)(t.py_split,t," ")}(),n);else l=n;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(o,"placement");return(0,tr.__call__)(e.was_provided,e)}()))var s=function(){var e=(0,tr.__getitem__)(o,"placement");return(0,tr.__call__)(e.get_content_nodelist,e)}();else s=r;var c=function(){var e=(0,tr.__getitem__)(o,"cellcontents");return(0,tr.__call__)(e.get_content_nodelist,e)}();return function(){var t=e;return(0,tr.__call__)(t.add_cell,t,s,l,c)}()}))},get add_cell(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement_spec":t=a[i];break;case"styles":r=a[i];break;case"content_nodes":n=a[i]}}}var o=function(){var r=e;return(0,tr.__call__)(r.parse_placement_spec,r,t)}(),l=(0,tr.__call__)(yc,null,(0,tr.__kwargtrans__)({placement:o,styles:r,content_nodes:n}));return function(){var t=e.cells_data;(0,tr.__call__)(t.append,t,l)}(),(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(e.cells_size,0))||(0,tr.__ge__)(l.placement.row_range.end,(0,tr.__getitem__)(e.cells_size,0)))&&(0,tr.__setitem__)(e.cells_size,0,l.placement.row_range.end),(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(e.cells_size,1))||(0,tr.__ge__)(l.placement.col_range.end,(0,tr.__getitem__)(e.cells_size,1)))&&(0,tr.__setitem__)(e.cells_size,1,l.placement.col_range.end),function(){var t=e;(0,tr.__call__)(t.move_to_col,t,l.placement.col_range.end)}(),l}))},get move_to_col(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"col":t=n[_]}}}e.current_col=t}))},get move_next_row(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.current_row=(0,tr.__call__)(tr.__iadd__,null,e.current_row,1),e.current_col=0}))},get finalize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.grid_data=function(){for(var t,r=[],n=0;n<(0,tr.__getitem__)(e.cells_size,0);n++)t=void 0,t=r,(0,tr.__call__)(t.append,t,function(){for(var t,r=[],n=0;n<(0,tr.__getitem__)(e.cells_size,1);n++)t=void 0,t=r,(0,tr.__call__)(t.append,t,null);return r}());return r}();for(var _=e.cells_data,a=0;a<(0,tr.len)(_);a++)for(var i=(0,tr.__getitem__)(_,a),o=!0,l=i.placement.row_range.start;l<i.placement.row_range.end;l++)for(var s=i.placement.col_range.start;s<i.placement.col_range.end;s++){if((0,tr.__t__)(null!==(0,tr.__getitem__)((0,tr.__getitem__)(e.grid_data,l),s))){var c=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.grid_data,l),s),"cell"),u=(0,tr.__call__)(tr.ValueError,null,"‘{}’ overlaps with ‘{}’".format((0,tr.__call__)(tr.repr,null,i),(0,tr.__call__)(tr.repr,null,c)));throw u.__cause__=null,u}(0,tr.__setitem__)((0,tr.__getitem__)(e.grid_data,l),s,(0,tr.dict)({cell:i,is_topleft:o}));o=!1}}))},get add_celldata_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"celldata_node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["styles_mapping","placement_mapping","celldata_contents"]))}(),i=function(){for(var e,t,r=[],n=(e=(0,tr.__getitem__)(a,"styles_mapping"),t=(0,tr.__call__)(e.get_content_as_chars,e),(0,tr.__call__)(t.py_split,t,",")),_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_);!function(){var e=r;(0,tr.__call__)(e.append,e,function(){var e=i;return(0,tr.__call__)(e.py_split,e)}())}()}return r}(),o=function(){var e=(0,tr.__getitem__)(a,"placement_mapping");return(0,tr.__call__)(e.get_content_nodelist,e)}(),l=function(){var e=(0,tr.__getitem__)(a,"celldata_contents");return(0,tr.__call__)(e.get_content_nodelist,e)}(),s=function(){var e=l;return(0,tr.__call__)(e.split_at_node,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("node"===n)e=r[n]}}return(0,tr.__t__)((_=e,(0,tr.__call__)(_.isNodeType,_,en)))&&(0,tr.__eq__)(e.macroname,"\\");var _}))}(),c=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("node"===n)e=r[n]}}return!!(0,tr.__t__)((0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,rn)}())&&(0,tr.__eq__)(e.specials_chars,"&"))},u=function(){for(var e,t,r=[],n=s,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,t=void 0,t=r,(0,tr.__call__)(t.append,t,(e=a,(0,tr.__call__)(e.split_at_node,e,c)))}return r}();!function(){var t=e;(0,tr.__call__)(t.add_celldata,t,o,i,u)}()}))},get add_celldata(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement_mapping_spec":t=a[i];break;case"styles_mapping":r=a[i];break;case"data_content_nodes":n=a[i]}}}var o=function(){var r=e;return(0,tr.__call__)(r.parse_placement_mapping_spec,r,t)}(),l=function(){var t=o;return(0,tr.__call__)(t.start_row_col,t,(0,tr.__kwargtrans__)({current_row:e.current_row,current_col:e.current_col}))}();e.current_row=l[0],e.current_col=l[1];for(var s=0,c=n,u=0;u<(0,tr.len)(c);u++){for(var f=(0,tr.__getitem__)(c,u),d=0,h=f,p=0;p<(0,tr.len)(h);p++){var g=(0,tr.__getitem__)(h,p),v=function(){var t=o;return(0,tr.__call__)(t.get_row_index_range,t,s,(0,tr.__kwargtrans__)({current_row:e.current_row}))}(),m=function(){var t=o;return(0,tr.__call__)(t.get_col_index_range,t,d,(0,tr.__kwargtrans__)({current_col:e.current_col}))}(),y=(0,tr.__call__)(mc,null,(0,tr.__kwargtrans__)({row_range:v,col_range:m}));if((0,tr.__t__)((0,tr.__lt__)(d,(0,tr.__call__)(tr.len,null,r))))var w=(0,tr.__getitem__)(r,d);else w=(0,tr.__getitem__)(r,(0,tr.__neg__)(1));var b=function(){var e=g.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,g)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,b),1))&&(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(b,0);return(0,tr.__call__)(e.isNodeType,e,en)}())&&(0,tr.__eq__)((0,tr.__getitem__)(b,0).macroname,"cell"))){var k=function(){var t=e;return(0,tr.__call__)(t.add_cell_node,t,(0,tr.__getitem__)(b,0),(0,tr.__kwargtrans__)({default_placement:y,default_styles:w}))}();d=(0,tr.__call__)(tr.__iadd__,null,d,(0,tr.__sub__)(k.placement.col_range.end,k.placement.col_range.start))}else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,b),0))){e.current_col=m.end;d=(0,tr.__call__)(tr.__iadd__,null,d,1)}else{!function(){var t=e;(0,tr.__call__)(t.add_cell,t,y,w,g)}();d=(0,tr.__call__)(tr.__iadd__,null,d,1)}}!function(){var t=e;(0,tr.__call__)(t.move_next_row,t)}();s=(0,tr.__call__)(tr.__iadd__,null,s,1),d=0}}))},_rx_int:function(){var e=oc;return(0,tr.__call__)(e.compile,e,"^\\d+$")}(),get parse_cell_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=cc;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"index_spec":t=i[o];break;case"is_row":r=i[o];break;case"is_col":n=i[o];break;case"py_default":_=i[o]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))var l=t;else l=function(){var e=t;return(0,tr.__call__)(e.get_content_as_chars,e)}();l=function(){var e=l;return(0,tr.__call__)(e.strip,e)}();if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(l))||(0,tr.__eq__)(l,"."))){if((0,tr.__t__)(_!==cc))return _;if((0,tr.__t__)(r))return e.current_row;if((0,tr.__t__)(n))return e.current_col;var s;throw(s=(0,tr.__call__)(RuntimeError,null,"Internal error: Neither is_row nor is_col is set!")).__cause__=null,s}if((0,tr.__t__)(function(){var t=e._rx_int;return(0,tr.__call__)(t.match,t,l)}()))return(0,tr.__sub__)((0,tr.__call__)(tr.int,null,l),1);if((0,tr.__t__)((0,tr.__t__)(r)&&(0,tr.__in__)(l,e.row_names)))return(0,tr.__getitem__)(e.row_names,l);if((0,tr.__t__)((0,tr.__t__)(n)&&(0,tr.__in__)(l,e.col_names)))return(0,tr.__getitem__)(e.col_names,l);throw(s=(0,tr.__call__)(tr.ValueError,null,"Invalid cell index: ‘{}’, expected number or valid alias name".format(l))).__cause__=null,s}))},get parse_cell_index_range_spec(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=cc;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"range_spec_s":t=l[s];break;case"is_row":r=l[s];break;case"is_col":n=l[s];break;case"py_default":_=l[s];break;case"default_start":a=l[s];break;case"default_end":i=l[s]}}}if((0,tr.__t__)((0,tr.__in__)(",",t))){for(var c=function(){var e=t;return(0,tr.__call__)(e.py_split,e,",")}(),u=[],f=null,d=null,h=c,p=0;p<(0,tr.len)(h);p++){for(var g=(0,tr.__getitem__)(h,p),v=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,g,(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:_}))}(),m=v[0],y=v[1],w=m;w<y;w++){if((0,tr.__t__)((0,tr.__ge__)(w,(0,tr.__call__)(tr.len,null,u))))u=(0,tr.__call__)(tr.__iadd__,null,u,function(){for(var e,t=[],r=0;r<(0,tr.__add__)((0,tr.__sub__)(y,(0,tr.__call__)(tr.len,null,u)),1);r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,!1);return t}());(0,tr.__setitem__)(u,w,!0)}if((0,tr.__t__)((0,tr.__t__)(null===f)||(0,tr.__gt__)(f,m)))f=m;if((0,tr.__t__)((0,tr.__t__)(null===d)||(0,tr.__lt__)(d,y)))d=y}for(w=f;w<d;w++)if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(u,w)))){throw(P=(0,tr.__call__)(tr.ValueError,null,"Specified range ‘{}’ is not contiguous".format(t))).__cause__=null,P}return(0,tr.tuple)([f,d])}if((0,tr.__t__)((0,tr.__in__)("-",t))){v=function(){var e=t;return(0,tr.__call__)(e.py_split,e,"-",1)}();var b=v[0],k=v[1],x=(m=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,b,(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:a}))}(),function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,k,(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:null}))}());if((0,tr.__t__)(null===x))y=i;else y=(0,tr.__add__)(x,1);return(0,tr.tuple)([m,y])}if((0,tr.__t__)((0,tr.__in__)("+",t))){v=function(){var e=t;return(0,tr.__call__)(e.py_split,e,"+",1)}(),b=v[0];var P,O=v[1];m=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,b,(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:_}))}();if((0,tr.__t__)(!(0,tr.__t__)(function(){var t=e._rx_int;return(0,tr.__call__)(t.match,t,O)}())))throw(P=(0,tr.__call__)(tr.ValueError,null,"Invalid number in ‘START+N’ cell index range specification: ‘{}’".format(O))).__cause__=null,P;var E=(0,tr.__call__)(tr.int,null,O);y=(0,tr.__add__)(m,E);return(0,tr.tuple)([m,y])}w=function(){var a=e;return(0,tr.__call__)(a.parse_cell_index_spec,a,t,(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:_}))}();return(0,tr.tuple)([w,(0,tr.__add__)(w,1)])}))},get parse_placement_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=cc;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=cc;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"placement_index_spec":t=l[s];break;case"is_row":r=l[s];break;case"is_col":n=l[s];break;case"py_default":_=l[s];break;case"default_start":a=l[s];break;case"default_end":i=l[s]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0))){if((0,tr.__t__)(r))return(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:e.current_row,end:(0,tr.__add__)(e.current_row,1)}));if((0,tr.__t__)(n))return(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:e.current_col,end:(0,tr.__add__)(e.current_col,1)}));throw(f=(0,tr.__call__)(RuntimeError,null,"Internal error, neither is_row nor is_col was set here.")).__cause__=null,f}var c=function(){var e=t.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,t)}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,c),1))){if((0,tr.__t__)(r))var u="ROW";else if((0,tr.__t__)(n))u="COL";else u=null;var f;throw(f=(0,tr.__call__)(Dr,null,"Bad cell index or merge range specification, expected ‘{}’ or ‘\\merge{}{}-RANGE{}’, got {} ({} nodes)".format(u,"{",u,"}",(0,tr.__call__)(tr.repr,null,t),(0,tr.__call__)(tr.len,null,c)),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,f}var d=(0,tr.__getitem__)(c,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,en)}())&&(0,tr.__eq__)(d.macroname,"merge"))){var h=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:d}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["mergespec"]))}(),p=function(){var e=(0,tr.__getitem__)(h,"mergespec");return(0,tr.__call__)(e.get_content_as_chars,e)}(),g=i;if((0,tr.__t__)(g===cc)){if((0,tr.__t__)(r))g=(0,tr.__getitem__)(e.cells_size,0);if((0,tr.__t__)(n))g=(0,tr.__getitem__)(e.cells_size,1)}var v=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,p,(0,tr.__kwargtrans__)({is_row:r,is_col:n,default_start:a,default_end:g}))}(),m=v[0],y=v[1];return(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:m,end:y}))}var w=function(){var t,a=e;return(0,tr.__call__)(a.parse_cell_index_spec,a,(t=c,(0,tr.__call__)(t.get_content_as_chars,t)),(0,tr.__kwargtrans__)({is_row:r,is_col:n,py_default:_}))}();return(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:w,end:(0,tr.__add__)(w,1)}))}))},get parse_placement_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"placement_spec":t=n[_]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,mc)))return t;var a=(l=(0,tr.tuple)([[],[]]))[0],i=l[1];if((0,tr.__t__)(null!==t)){var o=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,";",(0,tr.__kwargtrans__)({keep_empty:!0}))}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),2)))a=(l=o)[0],i=l[1];else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),1))){var l;i=(l=o)[0]}else if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),0))){var s=(0,tr.__call__)(Dr,null,"Bad cell placement specification, expected ‘ROW;COL’ or ‘COL’, got ‘{}’".format((0,tr.__call__)(wc,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}())),(0,tr.__kwargtrans__)({pos:t.pos}));throw s.__cause__=null,s}}var c=function(){var t=e;return(0,tr.__call__)(t.parse_placement_index_spec,t,a,(0,tr.__kwargtrans__)({is_row:!0}))}(),u=function(){var t=e;return(0,tr.__call__)(t.parse_placement_index_spec,t,i,(0,tr.__kwargtrans__)({is_col:!0}))}();return(0,tr.__call__)(mc,null,(0,tr.__kwargtrans__)({row_range:c,col_range:u}))}))},get parse_placement_mapping_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placement_mapping_index_spec":t=i[o];break;case"index_end":r=i[o];break;case"is_row":n=i[o];break;case"is_col":_=i[o]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return[];for(var l=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,",",(0,tr.__kwargtrans__)({keep_empty:!0}))}(),s=0,c=[],u=l,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),h=function(){var e=d.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,d)}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,h),1))){if((0,tr.__t__)(n))var p="ROW-RANGE";else if((0,tr.__t__)(_))p="COL-RANGE";else p=null;var g=(0,tr.__call__)(Dr,null,"Bad cell index or range or merge range specification, expected ‘{}’ or ‘\\merge{}{}-RANGE{}’, got {} ({} nodes)".format(p,"{",p,"}",(0,tr.__call__)(tr.repr,null,placement_index_spec),(0,tr.__call__)(tr.len,null,h)),(0,tr.__kwargtrans__)({pos:h.pos}));throw g.__cause__=null,g}var v=(0,tr.__getitem__)(h,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=v;return(0,tr.__call__)(e.isNodeType,e,en)}())&&(0,tr.__eq__)(v.macroname,"merge"))){var m=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:v}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["mergespec"]))}(),y=function(){var e=(0,tr.__getitem__)(m,"mergespec");return(0,tr.__call__)(e.get_content_as_chars,e)}(),w=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,y,(0,tr.__kwargtrans__)({is_row:n,is_col:_,py_default:s,default_start:s,default_end:null}))}(),b=w[0],k=w[1];!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:b,end:k})))}();s=k}else{w=function(){var t,r=e;return(0,tr.__call__)(r.parse_cell_index_range_spec,r,(t=h,(0,tr.__call__)(t.get_content_as_chars,t)),(0,tr.__kwargtrans__)({is_row:n,is_col:_,py_default:s,default_start:s,default_end:null}))}();var x=w[0],P=w[1];if((0,tr.__t__)(null===P)){!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:x,end:null})))}();s=null}else for(var O=x;O<P;O++){!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(vc,null,(0,tr.__kwargtrans__)({start:O,end:(0,tr.__add__)(O,1)})))}();s=(0,tr.__add__)(O,1)}}}return c}))},get parse_placement_mapping_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"placement_mapping_spec":t=n[_]}}}var a=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,";",(0,tr.__kwargtrans__)({keep_empty:!0}))}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),2)))var i=(s=a)[0],o=s[1];else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),1)))i=[],o=(s=a)[0];else{if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),0))){var l=(0,tr.__call__)(Dr,null,"Expected ‘ROWS;COLS’ or ‘COLS’ or ‘’ for placement argument, got ‘{}’".format((0,tr.__call__)(wc,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}())),(0,tr.__kwargtrans__)({pos:t.pos}));throw l.__cause__=null,l}var s;i=(s=(0,tr.tuple)([[],[]]))[0],o=s[1]}var c=function(){var t=e;return(0,tr.__call__)(t.parse_placement_mapping_index_spec,t,i,(0,tr.__kwargtrans__)({index_end:null,is_row:!0}))}(),u=function(){var t=e;return(0,tr.__call__)(t.parse_placement_mapping_index_spec,t,o,(0,tr.__kwargtrans__)({index_end:null,is_col:!0}))}();return(0,tr.__call__)(bc,null,(0,tr.__kwargtrans__)({row_placements:c,col_placements:u}))}))}}),xc=(0,tr.__class__)("CellsEnvironment",[Vo],{__module__:lc,is_block_level:!0,allowed_in_standalone_mode:!0,body_contents_is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="cells";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"environmentname":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,xc,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t}))}))},_fields:(0,tr.tuple)(["environmentname"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}return function(){var e,r=ii;return(0,tr.__call__)(r.LatexEnvironmentBodyContentsParser,r,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(e=ii,(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(pc,null),(0,tr.__call__)(gc,null),(0,tr.__call__)(uc,null)]}))}))),child_parsing_state_delta:(0,tr.__call__)(Pn,null)}))}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}for(var a=(0,tr.__call__)(kc,null),i=t.nodelist,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,en)}())){if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"cell"))){!function(){var e=a;(0,tr.__call__)(e.add_cell_node,e,l)}();continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"celldata"))){!function(){var e=a;(0,tr.__call__)(e.add_celldata_node,e,l)}();continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"\\"))){!function(){var e=a;(0,tr.__call__)(e.move_next_row,e)}();continue}}if(!(0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,Qr)}())&&!(0,tr.__t__)((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,Kr)}())&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var e=l.chars;return(0,tr.__call__)(e.strip,e)}()),0))){var s=(0,tr.__call__)(Dr,null,"You cannot place ‘{}’ here.  Expected: \\cell, \\celldata, \\\\.".format((0,tr.__call__)(wc,null,function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}())));throw s.__cause__=null,s}}!function(){var e=a;(0,tr.__call__)(e.finalize,e)}(),t.flm_cells_model=a}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_cells,e,(0,tr.__kwargtrans__)({cells_model:t.flm_cells_model,render_context:r}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"cells")}();if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.py_get,e,"keep_as_is",!1)}()))return!1;if((0,tr.__t__)((0,tr.__t__)(null===r.render_context)||(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,r.render_context,"fragment_renderer")))||null===r.render_context.fragment_renderer)){var o=(0,tr.__call__)(tr.ValueError,null,"Recomposing cells while compiling them into a tabularray requires a render_context in the pure latex recomposer with a LatexFragmentRenderer instance.");throw o.__cause__=null,o}var l=r.render_context,s=l.fragment_renderer;return function(){var e=s;return(0,tr.__call__)(e.render_cells,e,(0,tr.__kwargtrans__)({cells_model:t.flm_cells_model,render_context:l,render_cell_nodelist_contents_fn:function(e,t){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"nodelist":e=_[a];break;case"render_context":t=_[a]}}}return i=r,(0,tr.__call__)(i.subrecompose,i,e);var i}}))}()}))}}),Pc=(0,tr.__class__)("FeatureProvideCells",[sr],{__module__:lc,feature_name:"cells",feature_title:"Typesetting data tables",DocumentManager:null,RenderManager:null,get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:[(0,tr.__call__)(xc,null)]}))}))},get add_flm_doc_latex_context_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"base_feature_definitions":t=n[_]}}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(pc,null),(0,tr.__call__)(gc,null),(0,tr.__call__)(hc,null),(0,tr.__call__)(uc,null)],specials:[(0,tr.__call__)(fc,null)]}))}))}}),Oc=Pc,Ec={};(0,tr.__nest__)(Ec,"",dr);var Ac="flm.feature.floats",Cc=function(){var e=Ec;return(0,tr.__call__)(e.getLogger,e,Ac)}(),Sc=(0,tr.__class__)("FloatContentHandlerBase",[tr.object],{__module__:Ac,get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"extend_latex_context":t=n[_]}}}}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_node":t=_[a];break;case"content_nodes":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This method needs to be reimplemented in subclasses!".format());throw i.__cause__=null,i}))}}),Tc=(0,tr.__class__)("FloatContentAnyContent",[Sc],{__module__:Ac,_fields:(0,tr.tuple)([]),get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_node":t=_[a];break;case"content_nodes":r=_[a]}}}return r}))}}),Nc=(0,tr.__class__)("FloatContentIncludeGraphics",[Sc],{__module__:Ac,_fields:(0,tr.tuple)([]),get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"extend_latex_context":t=n[_]}}}!function(){var e=(0,tr.__getitem__)(t,"macros");(0,tr.__call__)(e.append,e,(0,tr.__call__)(tc,null,(0,tr.__kwargtrans__)({macroname:"includegraphics"})))}()}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_node":t=_[a];break;case"content_nodes":r=_[a]}}}r=function(){var e=r.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,r)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,r),1))){var i=(0,tr.__getitem__)(r,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,en)}())&&(0,tr.__eq__)(i.macroname,"includegraphics")))return r}var o=(0,tr.__call__)(Dr,null,"expected exactly one \\includegraphics command".format(),(0,tr.__kwargtrans__)({pos:r.pos}));throw o.__cause__=null,o}))}}),Lc=(0,tr.__class__)("FloatContentCells",[Sc],{__module__:Ac,_fields:(0,tr.tuple)([]),get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"extend_latex_context":t=n[_]}}}!function(){var e=(0,tr.__getitem__)(t,"environments");(0,tr.__call__)(e.append,e,(0,tr.__call__)(xc,null))}()}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_node":t=_[a];break;case"content_nodes":r=_[a]}}}r=function(){var e=r.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,r)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,r),1))){var i=(0,tr.__getitem__)(r,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,tn)}())&&(0,tr.__eq__)(i.environmentname,"cells")))return r}var o=(0,tr.__call__)(Dr,null,"expected exactly one \\begin{}cells{}...\\end{}cells{} environment".format("{","}","{","}"),(0,tr.__kwargtrans__)({pos:r.pos}));throw o.__cause__=null,o}))}}),Mc=(0,tr.dict)({any:Tc,includegraphics:Nc,cells:Lc}),Ic=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("c"===n)e=r[n]}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,Sc)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str)))e=(0,tr.dict)({name:e});if((0,tr.__t__)((0,tr.__in__)((0,tr.__getitem__)(e,"name"),Mc)))return(0,tr.__call__)((0,tr.__getitem__)(Mc,(0,tr.__getitem__)(e,"name")),null,(0,tr.__kwargtrans__)(function(){var t=e;return(0,tr.__call__)(t.py_get,t,"config",(0,tr.dict)({}))}()));var _=(0,tr.__call__)(tr.ValueError,null,"Invalid float handler specification: {}".format((0,tr.__call__)(tr.repr,null,e)));throw _.__cause__=null,_},jc=(0,tr.__call__)(eo,null,"label",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"label"}))]})),Rc=(0,tr.__call__)(eo,null,"caption",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,"{",(0,tr.__kwargtrans__)({argname:"captiontext"}))]})),Dc=(0,tr.__class__)("FloatEnvironment",[Vo],{__module__:Ac,is_block_level:!0,float_content_is_block_level:!0,float_content_render_at_environment_node_location:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_type":t=_[a];break;case"content_handlers":r=_[a]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Dc,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t,arguments_spec_list:[]})),(0,tr.__t__)(null===r))r=["includegraphics","cells"];r=function(){for(var e,t=[],n=r,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(Ic,null,a))}return t}();e.float_type=t,e.content_handlers=r}))},_fields:(0,tr.tuple)(["float_type","content_handlers"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}for(var o=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[jc,Rc],environments:[],specials:[]})),l=e.content_handlers,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);!function(){var e=c;(0,tr.__call__)(e.float_content_set_extra_definitions,e,o)}()}return(0,tr.__call__)(mi,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)($i,null,(0,tr.__kwargtrans__)({extend_latex_context:o,set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({is_block_level:e.float_content_is_block_level}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}t.flm_float_label=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({ref_label_prefix:null,ref_label:null,label_node:null})),t.flm_float_caption=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({caption_nodelist:null,caption_node:null}));for(var a=[],i=t.nodelist,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,en)}())){if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"label"))){(0,tr.__setitem__)(t.flm_float_label,"label_node",l);var s,c=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:l}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["label"]))}(),u=function(){var e=(0,tr.__getitem__)(c,"label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",u)))var f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,":",1)}(),d=f[0],h=f[1];else d=(f=(0,tr.tuple)([null,u]))[0],h=f[1];if((0,tr.__t__)((0,tr.__ne__)(d,e.float_type)))throw(s=(0,tr.__call__)(Dr,null,"{} label must start with the prefix ‘{}:...’ (got ‘{}’)".format(e.float_type,e.float_type,u),(0,tr.__kwargtrans__)({pos:l.pos}))).__cause__=null,s;if((0,tr.__setitem__)(t.flm_float_label,"ref_label_prefix",d),(0,tr.__setitem__)(t.flm_float_label,"ref_label",h),(0,tr.__t__)((0,tr.__ne__)(d,e.float_type)))throw(s=(0,tr.__call__)(Dr,null,"Float's \\label{}...{} must have the prefix ‘{}:’".format("{","}",e.float_type),(0,tr.__kwargtrans__)({pos:l.pos}))).__cause__=null,s;continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"caption"))){(0,tr.__setitem__)(t.flm_float_caption,"caption_node",l);var p=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:l}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["captiontext"]))}(),g=function(){var e=(0,tr.__getitem__)(p,"captiontext");return(0,tr.__call__)(e.get_content_nodelist,e)}();(0,tr.__setitem__)(t.flm_float_caption,"caption_nodelist",g);continue}}!function(){var e=a;(0,tr.__call__)(e.append,e,l)}()}a=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,a,(0,tr.__kwargtrans__)({parsing_state:t.nodelist.parsing_state}))}();var v=[],m=null;for(i=e.content_handlers,o=0;o<(0,tr.len)(i);o++){var y=(0,tr.__getitem__)(i,o);try{m=function(){var e=y;return(0,tr.__call__)(e.float_handle_content_nodes,e,t,a)}()}catch(s){if(!(0,tr.isinstance)(s,Dr))throw s;var w=s;!function(){var e=v;(0,tr.__call__)(e.append,e,"*** {} error: {}".format(y.__class__.__name__,(0,tr.__call__)(tr.str,null,w)))}()}}if((0,tr.__t__)(null===m)){var b=(0,tr.__call__)(Dr,null,(0,tr.__add__)("Invalid {} contents! The following content handler(s) were unable to parse the float's content [other than possible \\caption and \\label commands]:\n".format(e.float_type),(0,tr.__call__)("\n".join,"\n",v)),(0,tr.__kwargtrans__)({pos:t.pos}));throw b.__cause__=null,b}return t.flm_float_content_nodelist=m,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"floats")}(),o=(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"),l=(0,tr.__getitem__)(t.flm_float_label,"ref_label"),s=!0;if((0,tr.__t__)((0,tr.__t__)(null===o)&&null===l))s=!1;var c=function(){var r=i;return(0,tr.__call__)(r.register_float,r,(0,tr.__kwargtrans__)({node:t,float_type:e.float_type,numbered:s,ref_label_prefix:o,ref_label:l,caption_nodelist:(0,tr.__getitem__)(t.flm_float_caption,"caption_nodelist"),content_nodelist:t.flm_float_content_nodelist}))}();return(0,tr.__t__)(e.float_content_render_at_environment_node_location)?function(){var n=e;return(0,tr.__call__)(n.render_float,n,c,t,r)}():function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_nothing,t,(0,tr.__kwargtrans__)({annotations:["float-placeholder","float-{}-placeholder".format(e.float_type)],render_context:r}))}()}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_instance":t=a[i];break;case"node":r=a[i];break;case"render_context":n=a[i]}}}var o=n.fragment_renderer;return function(){var e=o;return(0,tr.__call__)(e.render_float,e,t,n)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"floats")}();if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.py_get,e,"keep_as_is",!1)}()))return!1;var o=(0,tr.__t__)(null!==(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"))||null!==(0,tr.__getitem__)(t.flm_float_label,"ref_label"),l=o,s=null!==(0,tr.__getitem__)(t.flm_float_caption,"caption_nodelist"),c="flmFloat",u=(0,tr.__add__)((0,tr.__add__)("{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}");if((0,tr.__t__)(l))if((0,tr.__t__)(s))u=(0,tr.__call__)(tr.__iadd__,null,u,"{NumCap}");else u=(0,tr.__call__)(tr.__iadd__,null,u,"{NumOnly}");else if((0,tr.__t__)(s))u=(0,tr.__call__)(tr.__iadd__,null,u,"{CapOnly}");else u=(0,tr.__call__)(tr.__iadd__,null,u,"{Bare}");var f=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\begin{",c),"}"),u);f=(0,tr.__call__)(tr.__iadd__,null,f,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),f=(0,tr.__call__)(tr.__iadd__,null,f,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flm_float_content_nodelist)}());if((0,tr.__t__)(s))var f=(0,tr.__call__)(tr.__iadd__,null,f,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.flm_float_caption,"caption_node"))}());if((0,tr.__t__)(o)){var d=(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"),h=(0,tr.__getitem__)(t.flm_float_label,"ref_label"),p=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",d,h,t.latex_walker.resource_info)}();f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(p,"safe_label")),"}"))}return f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)("\\end{",c),"}"))}))}}),Fc=(0,tr.__class__)("FloatInstance",[tr.object],{__module__:Ac,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=null,n=null,_=null,a=null,i=null,o=null,l=null,s=null;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"float_type":t=u[f];break;case"float_type_info":r=u[f];break;case"number":n=u[f];break;case"formatted_counter_value_flm":_=u[f];break;case"ref_label_prefix":a=u[f];break;case"ref_label":i=u[f];break;case"target_id":o=u[f];break;case"caption_nodelist":l=u[f];break;case"content_nodelist":s=u[f]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fc,"__init__"),null,e),e.float_type=t,e.float_type_info=r,e.number=n,e.formatted_counter_value_flm=_,e.ref_label_prefix=a,e.ref_label=i,e.target_id=o,e.caption_nodelist=l,e.content_nodelist=s,e._fields=(0,tr.tuple)(["float_type","float_type_info","number","formatted_counter_value_flm","ref_label_prefix","ref_label","target_id","caption_nodelist","content_nodelist"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),Bc=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("float_type"===n)e=r[n]}}if((0,tr.__t__)((0,tr.__eq__)(e,"figure")))var _=(0,tr.dict)({singular:"Fig.~",plural:"Figs.~",capital:(0,tr.dict)({singular:"Figure~",plural:"Figures~"})});else if((0,tr.__t__)((0,tr.__eq__)(e,"table")))_=(0,tr.dict)({singular:"Tab.~",plural:"Tabs.~",capital:(0,tr.dict)({singular:"Table~",plural:"Tables~"})});else{var a=function(){var t=e;return(0,tr.__call__)(t.capitalize,t)}();_=(0,tr.tuple)([(0,tr.dict)({singular:(0,tr.__add__)(a,"~"),plural:(0,tr.__add__)(a,"s~")})])}return(0,tr.dict)({format_num:(0,tr.dict)({template:"${Roman}"}),prefix_display:_,delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"})},zc=(0,tr.__class__)("FloatType",[tr.object],{__module__:Ac,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"float_type":t=i[o];break;case"float_caption_name":r=i[o];break;case"counter_formatter":n=i[o];break;case"content_handlers":_=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,zc,"__init__"),null,e),e.float_type=t,(0,tr.__t__)(null===r))r=t;if(e.float_caption_name=r,(0,tr.__t__)(null===n))n=(0,tr.dict)({format_num:"arabic"});e.counter_formatter=(0,tr.__call__)(ls,null,n,(0,tr.__call__)(Bc,null,t),(0,tr.__kwargtrans__)({counter_formatter_id:t})),e.content_handlers=_,e._fields=(0,tr.tuple)(["float_type","float_caption_name","counter_formatter","content_handlers"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return r}()))}()}))}}),qc=[(0,tr.__call__)(zc,null,"figure","Figure",(0,tr.dict)({format_num:"arabic"}),["includegraphics"]),(0,tr.__call__)(zc,null,"table","Table",(0,tr.dict)({format_num:"arabic"}),["cells","includegraphics"])],Vc=(0,tr.__class__)("FeatureFloats",[sr],{__module__:Ac,feature_name:"floats",feature_title:"Floating elements (figures & tables)",feature_optional_dependencies:["refs"],get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"float_types":t=n[_]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Vc,"__init__"),null,e),(0,tr.__t__)(null===t))t=qc;var a=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,zc))?e:(0,tr.__call__)(zc,null,(0,tr.__kwargtrans__)(e))};e.float_types_list=function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var i=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(a,null,i))}return r}(),e.float_types=function(){for(var t,r=[],n=e.float_types_list,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.float_type,a])}return(0,tr.dict)(r)}()}))},get make_float_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"float_type":t=n[_]}}}return(0,tr.__call__)(Dc,null,t,(0,tr.__kwargtrans__)({content_handlers:(0,tr.__getitem__)(e.float_types,t).content_handlers}))}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=[],a=function(){var t=e.float_types;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0];o[1];!function(){var t,r=_;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.make_float_environment_spec,t,l)))}()}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:_}))}))},RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Ac,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}if(e.floats=function(){for(var t,r=[],n=(t=e.feature.float_types,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0];a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,[i,[]])}()}return(0,tr.dict)(r)}(),e.float_counters=function(){for(var t,r=[],n=(t=e.feature.float_types,(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0];a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,[i,0])}()}return(0,tr.dict)(r)}(),e.float_instances=(0,tr.dict)({}),(0,tr.__t__)(function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}()))for(var _=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}(),a=function(){var t=e.feature.float_types;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(o[0],o[1]);!function(){var e=_;(0,tr.__call__)(e.register_counter_formatter,e,(0,tr.__kwargtrans__)({counter_formatter:l.counter_formatter}))}()}}))},get register_float(){return(0,tr.__get__)(this,(function(e,t){var r=!0,n=null,_=null,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"float_type":t=l[s];break;case"node":var c=l[s];break;case"numbered":r=l[s];break;case"ref_label_prefix":n=l[s];break;case"ref_label":_=l[s];break;case"caption_nodelist":a=l[s];break;case"content_nodelist":i=l[s]}}}var u=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,c)}();if((0,tr.__t__)((0,tr.__in__)(u,e.float_instances)))return(0,tr.__getitem__)(e.float_instances,u);var f=(0,tr.__getitem__)(e.feature.float_types,t);if((0,tr.__t__)(r)){var d=f.counter_formatter;(0,tr.__setitem__)(e.float_counters,t,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(e.float_counters,t),1));var h=(0,tr.__getitem__)(e.float_counters,t),p=function(){var e=d;return(0,tr.__call__)(e.format_flm,e,h,(0,tr.__kwargtrans__)({with_prefix:!1}))}(),g=function(){var r=e.render_context.doc.environment;return(0,tr.__call__)(r.make_fragment,r,p,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} {} counter value".format(t,h)}))}(),v=d.counter_formatter_id}else h=null,g=null,v=null;var m=null;if((0,tr.__t__)(null!==h))m="{}-{}".format(t,h);var y=(0,tr.__call__)(Fc,null,(0,tr.__kwargtrans__)({float_type:t,float_type_info:f,number:h,formatted_counter_value_flm:g,ref_label_prefix:n,ref_label:_,target_id:m,caption_nodelist:a,content_nodelist:i}));if(function(){var r=(0,tr.__getitem__)(e.floats,t);(0,tr.__call__)(r.append,r,y)}(),(0,tr.__t__)((0,tr.__t__)(null!==h)&&function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}())){var w=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();if((0,tr.__t__)((0,tr.__t__)(null!==n)&&null!==_)){(0,tr.assert)((0,tr.__eq__)(n,t));var b=function(){var t=e;return(0,tr.__call__)(t.get_formatted_ref_flm_text,t,y)}();!function(){var e=w;(0,tr.__call__)(e.register_reference,e,n,_,(0,tr.__kwargtrans__)({node:c,formatted_ref_flm_text:b,target_href:"#{}".format(m),counter_value:h,counter_formatter_id:v}))}()}}return(0,tr.__setitem__)(e.float_instances,u,y),y}))},get get_formatted_ref_flm_text(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"float_instance":t=n[_]}}}return(0,tr.__add__)((0,tr.__add__)(t.float_type_info.float_caption_name,"~"),t.formatted_counter_value_flm.flm_text)}))}}),get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Floating items, such as figures and tables, along with\n        captions, are supported by the environments described here."}))},get add_flm_doc_latex_context_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"base_feature_definitions":t=n[_]}}}for(var a=(0,tr.dict)({macros:[jc,Rc],environments:[],specials:[]}),i=(0,tr.dict)({macros:[],environments:[],specials:[]}),o=(0,tr.dict)({macros:(0,tr.dict)({}),environments:(0,tr.dict)({}),specials:(0,tr.dict)({})}),l=(0,tr.__getitem__)(t,"environments"),s=0;s<(0,tr.len)(l);s++)for(var c=(0,tr.__getitem__)(l,s),u=c.environmentname,f=c.content_handlers,d=0;d<(0,tr.len)(f);d++){var h=(0,tr.__getitem__)(f,d),p=(0,tr.dict)({macros:[],environments:[],specials:[]});!function(){var e=h;(0,tr.__call__)(e.float_content_set_extra_definitions,e,p)}();for(var g=(0,tr.tuple)(["macros","environments","specials"]),v=0;v<(0,tr.len)(g);v++){var m=(0,tr.__getitem__)(g,v);if((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(p,m))))for(var y=(0,tr.__getitem__)(p,m),w=0;w<(0,tr.len)(y);w++){var b=(0,tr.__getitem__)(y,w),k=(x=(0,tr.__call__)(Uc,null,b,m))[0];x[1];(0,tr.__t__)(!(0,tr.__in__)(k,(0,tr.__getitem__)(o,m)))?(!function(){var e=(0,tr.__getitem__)(i,m);(0,tr.__call__)(e.append,e,b)}(),(0,tr.__setitem__)((0,tr.__getitem__)(o,m),k,[u])):function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,m),k);(0,tr.__call__)(e.append,e,u)}()}}}for(l=(0,tr.tuple)(["macros","environments","specials"]),s=0;s<(0,tr.len)(l);s++)for(m=(0,tr.__getitem__)(l,s),f=(0,tr.__getitem__)(i,m),d=0;d<(0,tr.len)(f);d++){var x,P=(0,tr.__getitem__)(f,d),O=(k=(x=(0,tr.__call__)(Uc,null,P,m))[0],x[1]);(0,tr.__call__)(Gc,null,P,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("The ",O)," is made available in the "),"following float environment(s): "),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=(0,tr.__getitem__)((0,tr.__getitem__)(o,m),k),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("‘\\verbcode+",_),"+’"))}return t}()))),function(){var e=(0,tr.__getitem__)(a,m);(0,tr.__call__)(e.append,e,P)}()}return a}))}}),Uc=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"m":e=n[_];break;case"which":t=n[_]}}}if((0,tr.__t__)((0,tr.__eq__)(t,"macros")))var a=e.macroname,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode",(0,tr.__call__)(Go,null,e.macroname))," macro");else if((0,tr.__t__)((0,tr.__eq__)(t,"environments")))a=e.environmentname,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode|{",e.environmentname),"}| environment");else{if(!(0,tr.__t__)((0,tr.__eq__)(t,"specials"))){var o=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("invalid which = ",(0,tr.__call__)(tr.repr,null,t)));throw o.__cause__=null,o}a=e.specials_chars,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode",(0,tr.__call__)(Go,null,e.specials_chars))," specials")}return(0,tr.tuple)([a,i])},Gc=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"mdef":e=n[_];break;case"add_flm_doc":t=n[_]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"get_flm_doc"))))return e.get_flm_doc=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}}return t},e;var a=e.get_flm_doc;return e.get_flm_doc=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var n in r);}}return function(){var e=(0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(a,null),"\n\n"),t);return(0,tr.__call__)(e.strip,e)}()},e},Wc=Vc,$c={};t($c,"logger",(()=>Xc)),t($c,"_default_enumeration_counter_formatter",(()=>Zc)),t($c,"Enumeration",(()=>Kc)),t($c,"FeatureEnumeration",(()=>Jc)),t($c,"FeatureClass",(()=>Qc)),t($c,"get_safe_target_id",(()=>Ol)),t($c,"LatexEnvironmentBodyContentsParser",(()=>mi)),t($c,"FLMEnvironmentSpecBase",(()=>Vo)),t($c,"ParsedArgumentsInfo",(()=>wn)),t($c,"ParsingStateDeltaExtendLatexContextDb",(()=>$i)),t($c,"LatexWalkerLocatedError",(()=>Dr)),t($c,"helper_collect_labels",(()=>Zo)),t($c,"latexnodes_parsers",(()=>oa)),t($c,"Feature",(()=>sr)),t($c,"FLMArgumentSpec",(()=>ko)),t($c,"label_arg",(()=>Xo)),t($c,"MacroSpec",(()=>eo)),t($c,"latexnodes_nodes",(()=>Or)),t($c,"counter",(()=>Fl));tr=a("hoVWB");var Yc={};(0,tr.__nest__)(Yc,"",dr);var Hc="flm.feature.enumeration",Xc=function(){var e=Yc;return(0,tr.__call__)(e.getLogger,e,Hc)}(),Zc=[(0,tr.dict)({template:"${arabic}."}),(0,tr.dict)({template:"(${roman})"}),(0,tr.dict)({template:"${alph}-"})],Kc=(0,tr.__class__)("Enumeration",[Vo],{__module__:Hc,is_block_level:!0,body_contents_is_block_level:!0,allowed_in_standalone_mode:!0,allowed_item_label_prefixes:(0,tr.tuple)(["item"]),get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=null,_=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"counter_formatter":r=i[o];break;case"annotations":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Kc,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,arguments_spec_list:[(0,tr.__call__)(ko,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"tag_template"}))]},_))),(0,tr.__t__)(null===r))r=Zc;e.counter_formatter=r,e.annotations=n}))},_fields:(0,tr.tuple)(["environmentname","counter_formatter","annotations"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":n=a[i]}}}return(0,tr.__call__)(mi,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)($i,null,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(eo,null,"item",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(ko,null,"[",(0,tr.__kwargtrans__)({argname:"custom_tag"})),Xo]}))]}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_enumeration_items")))return t;for(var a=function(){var e=t.nodelist;return(0,tr.__call__)(e.split_at_node,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__t__)((_=e,(0,tr.__call__)(_.isNodeType,_,en)))&&(0,tr.__eq__)(e.macroname,"item");var _}),(0,tr.__kwargtrans__)({keep_separators:!0,call_make_nodelist:!1}))}(),i=[],o=(0,tr.__call__)(tr.enumerate,null,a),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];if(!(0,tr.__t__)(!(0,tr.__t__)(u))){var f=(0,tr.__getitem__)(u,0);if(!(0,tr.__t__)(null===f)&&!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(c,0))&&((0,tr.__t__)((0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,Kr)}())&&(0,tr.__eq__)(function(){var e=f.chars;return(0,tr.__call__)(e.strip,e)}(),""))||(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&f.spec.is_paragraph_break_marker))){if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,en)}()))||(0,tr.__ne__)(f.macroname,"item"))){var d=(0,tr.__call__)(Dr,null,(0,tr.__kwargtrans__)({msg:"Expected ‘\\item’ in enumeration environment: {}".format(f),pos:f.pos}));throw d.__cause__=null,d}var h=function(){var e=f.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,(0,tr.__getslice__)(u.nodelist,1,null,1),(0,tr.__kwargtrans__)({parsing_state:f.parsing_state}))}();!function(){var e=i;(0,tr.__call__)(e.append,e,(0,tr.tuple)([f,h]))}()}}}return t.flm_enumeration_items=i,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=r.fragment_renderer,o=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["tag_template"]))}(),l=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"enumeration")}(),s=function(){var e=l;return(0,tr.__call__)(e.py_get,e,"nested_depth",0)}(),c=e.counter_formatter;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,c,(0,tr.tuple)([tr.list,tr.tuple]))))if((0,tr.__t__)((0,tr.__ge__)(s,(0,tr.__call__)(tr.len,null,c))))c=(0,tr.__getitem__)(c,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,c),1));else c=(0,tr.__getitem__)(c,s);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("tag_template",o))&&function(){var e=(0,tr.__getitem__)(o,"tag_template");return(0,tr.__call__)(e.was_provided,e)}())){var u=function(){var e=(0,tr.__getitem__)(o,"tag_template");return(0,tr.__call__)(e.get_content_as_chars,e)}();c=u}for(var f=function(){var e=Fl;return(0,tr.__call__)(e.parse_counter_formatter,e,c,(0,tr.__kwargtrans__)({str_use_tag_template:!0}))}(),d=(0,tr.dict)({}),h=(0,tr.dict)({}),p=[],g=(0,tr.__call__)(tr.enumerate,null,t.flm_enumeration_items),v=0;v<(0,tr.len)(g);v++){var m=(I=(0,tr.__getitem__)(g,v))[0],y=(I=I[1])[0],w=I[1];!function(){var e=p;(0,tr.__call__)(e.append,e,w)}();var b=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:y}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["custom_tag","label"]))}();(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("custom_tag",b))&&function(){var e=(0,tr.__getitem__)(b,"custom_tag");return(0,tr.__call__)(e.was_provided,e)}())&&(0,tr.__setitem__)(d,(0,tr.__add__)(1,m),function(){var e=(0,tr.__getitem__)(b,"custom_tag");return(0,tr.__call__)(e.get_content_nodelist,e)}()),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("label",b))&&function(){var e=(0,tr.__getitem__)(b,"label");return(0,tr.__call__)(e.was_provided,e)}())&&(0,tr.__setitem__)(h,(0,tr.__add__)(1,m),(0,tr.__call__)(Zo,null,(0,tr.__getitem__)(b,"label"),e.allowed_item_label_prefixes))}var k=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__in__)(e,d))?(0,tr.__getitem__)(d,e):(0,tr.__call__)(f,null,e)},x=(0,tr.dict)({});if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,h))&&function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}())){(function(){var e=r;(0,tr.__call__)(e.feature_render_manager,e,"enumeration")})();var P=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}();for(g=function(){var e=h;return(0,tr.__call__)(e.py_items,e)}(),v=0;v<(0,tr.len)(g);v++){var O=(I=(0,tr.__getitem__)(g,v))[0],E=I[1];if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,E),0))){if((0,tr.__t__)((0,tr.__in__)(O,d)))var A=(0,tr.__getitem__)(item_custom_tags,O);else A=(0,tr.__call__)(k,null,O);var C=(I=(0,tr.__getitem__)(E,0))[0],S=I[1],T=(0,tr.__call__)(Ol,null,C,S),N=(0,tr.__add__)("#",T);(0,tr.__setitem__)(x,O,T);for(var L=E,M=0;M<(0,tr.len)(L);M++){var I,j=(I=(0,tr.__getitem__)(L,M))[0],R=I[1];!function(){var e=P;(0,tr.__call__)(e.register_reference,e,j,R,(0,tr.__kwargtrans__)({formatted_ref_flm_text:A,node:t,target_href:N}))}()}}}}var D=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("n"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__in__)(e,x))?(0,tr.__getitem__)(x,e):null},F=function(){var e=r;return(0,tr.__call__)(e.push_logical_state,e,"enumeration","nested_depth",(0,tr.__add__)(s,1))}();try{F.__enter__();var B=function(){var t=i;return(0,tr.__call__)(t.render_enumeration,t,p,k,(0,tr.__kwargtrans__)({render_context:r,annotations:e.annotations,nested_depth:s,target_id_generator:D}))}();F.__exit__()}catch(e){if(!F.__exit__(e.name,e,e.stack))throw e}return B}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}for(var i=(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}"),o=(i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),t.flm_enumeration_items),l=0;l<(0,tr.len)(o);l++){var s=(h=(0,tr.__getitem__)(o,l))[0],c=h[1],u=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:s}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["custom_tag","label"]))}();i=(0,tr.__call__)(tr.__iadd__,null,i,"\\item ");if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("custom_tag",u))&&function(){var e=(0,tr.__getitem__)(u,"custom_tag");return(0,tr.__call__)(e.was_provided,e)}()))i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e,t=r;return(0,tr.__call__)(t.subrecompose,t,(e=(0,tr.__getitem__)(u,"custom_tag"),(0,tr.__call__)(e.get_content_nodelist,e)))}());if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("label",u))&&function(){var e=(0,tr.__getitem__)(u,"label");return(0,tr.__call__)(e.was_provided,e)}()))for(var f=(0,tr.__call__)(Zo,null,(0,tr.__getitem__)(u,"label"),e.allowed_item_label_prefixes),d=0;d<(0,tr.len)(f);d++){var h,p=(h=(0,tr.__getitem__)(f,d))[0],g=h[1],v=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",p,g,t.latex_walker.resource_info)}();i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(v,"safe_label")),"}"))}i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,c)}())}return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),Jc=(0,tr.__class__)("FeatureEnumeration",[sr],{__module__:Hc,feature_name:"enumeration",feature_title:"Enumeration and itemization lists",feature_default_config:(0,tr.dict)({enumeration_environments:(0,tr.dict)({itemize:(0,tr.dict)({counter_formatter:["•","-","▸"]}),enumerate:(0,tr.dict)({counter_formatter:null})})}),DocumentManager:null,RenderManager:null,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"enumeration_environments":t=n[_]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Jc,"__init__"),null,e),(0,tr.__t__)(null===t))t=function(){var t=e.feature_default_config;return(0,tr.__call__)(t.py_get,t,"enumeration_environments",(0,tr.dict)({}))}();e.enumeration_environments=t}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:function(){for(var t,r=[],n=(t=(0,tr.__call__)(tr.dict,null,e.enumeration_environments),(0,tr.__call__)(t.py_items,t)),_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Kc,null,(0,tr.__kwargtrans__)({environmentname:i,counter_formatter:(0,tr.__getitem__)(o,"counter_formatter"),annotations:[i]})))}()}return r}()}))}))}}),Qc=Jc,eu={};t(eu,"logger",(()=>nu)),t(eu,"_default_endnote_counter_formatter_spec",(()=>_u)),t(eu,"EndnoteCategory",(()=>au)),t(eu,"EndnoteMacro",(()=>iu)),t(eu,"EndnoteInstance",(()=>ou)),t(eu,"FeatureEndnotes",(()=>lu)),t(eu,"FeatureClass",(()=>su)),t(eu,"Counter",(()=>us)),t(eu,"FLMFragment",(()=>_i)),t(eu,"ParsedArgumentsInfo",(()=>wn)),t(eu,"build_counter_formatter",(()=>ls)),t(eu,"Feature",(()=>sr)),t(eu,"FLMArgumentSpec",(()=>ko)),t(eu,"FLMMacroSpecBase",(()=>qo));tr=a("hoVWB");var tu={};(0,tr.__nest__)(tu,"",dr);var ru="flm.feature.endnotes",nu=function(){var e=tu;return(0,tr.__call__)(e.getLogger,e,ru)}(),_u=(0,tr.dict)({format_num:(0,tr.dict)({template:"${roman}"}),prefix_display:null,delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"}),au=(0,tr.__class__)("EndnoteCategory",[tr.object],{__module__:ru,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"category_name":t=i[o];break;case"counter_formatter":r=i[o];break;case"heading_title":n=i[o];break;case"endnote_command":_=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,au,"__init__"),null,e),e.category_name=t;r=(0,tr.__call__)(ls,null,r,_u,(0,tr.__kwargtrans__)({counter_formatter_id:"endnote"}));e.counter_formatter=r,e.heading_title=n,e.endnote_command=_}))}}),iu=(0,tr.__class__)("EndnoteMacro",[qo],{__module__:ru,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var n=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"endnote_category_name":r=a[i];break;default:n[i]=a[i]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,iu,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:"{",argname:"endnote_content",flm_doc:"The content of the endnote to place (e.g., the text of a footnote)"}))]},n))),e.endnote_category_name=r}))},_fields:(0,tr.tuple)(["macroname","endnote_category_name"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"Place an end note in the category ‘{}’ withthe given content.".format(e.endnote_category_name)}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"endnotes")}();if((0,tr.__t__)(null===i)){var o=(0,tr.__call__)(RuntimeError,null,"You did not set up the feature 'endnotes' in your FLM environment");throw o.__cause__=null,o}var l=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["endnote_content"]))}(),s=function(){var e=(0,tr.__getitem__)(l,"endnote_content");return(0,tr.__call__)(e.get_content_nodelist,e)}(),c=function(){var r=i;return(0,tr.__call__)(r.add_endnote,r,(0,tr.__kwargtrans__)({category_name:e.endnote_category_name,content_nodelist:s,node:t}))}(),u=function(){var e=i;return(0,tr.__call__)(e.render_endnote_mark,e,c)}();return u}))}}),ou=(0,tr.__class__)("EndnoteInstance",[tr.object],{__module__:ru,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"category_name":t=l[s];break;case"number":r=l[s];break;case"formatted_counter_value_flm":n=l[s];break;case"content_nodelist":_=l[s];break;case"ref_label_prefix":a=l[s];break;case"ref_label":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ou,"__init__"),null,e),e.category_name=t,e.number=r,e.formatted_counter_value_flm=n,e.content_nodelist=_,e.ref_label_prefix=a,e.ref_label=i,e._fields=(0,tr.tuple)(["category_name","number","formatted_counter_value_flm","content_nodelist","ref_label_prefix","ref_label"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],n=e._fields,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),lu=(0,tr.__class__)("FeatureEndnotes",[sr],{__module__:ru,feature_name:"endnotes",feature_title:"Endnotes: footnotes, references, etc.",get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__add__)("Add footnotes and support for other endnotes (e.g., citations)\n            at the bottom of your pages or your document.  This environment\n            supports the base category(ies): ",(0,tr.__call__)(",".join,",",function(){for(var t,r=[],n=e.base_categories,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,"‘{}’".format(a.category_name))}return r}()))}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"categories":t=_[a];break;case"render_options":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,lu,"__init__"),null,e);var i=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,au))?e:(0,tr.__call__)(au,null,(0,tr.__kwargtrans__)(e))};if((0,tr.__t__)(!(0,tr.__t__)(t)))t=[];e.base_categories=function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(i,null,a))}return r}(),e.default_render_options=(0,tr.__t__)(r)?r:(0,tr.dict)({})}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}for(var _=[],a=e.base_categories,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);(0,tr.__t__)(o.endnote_command)&&function(){var e=_;(0,tr.__call__)(e.append,e,(0,tr.__call__)(iu,null,o.endnote_command,(0,tr.__kwargtrans__)({endnote_category_name:o.category_name})))}()}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:_}))}))},DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:ru,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.categories=(0,tr.__call__)(tr.list,null,e.feature.base_categories),e.categories_by_name=function(){for(var t,r=[],n=e.categories,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,a])}return(0,tr.dict)(r)}()}))},get add_endnote_category(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"endnote_category":t=n[_]}}}if((0,tr.__t__)((0,tr.__in__)(t.category_name,e.categories_by_name))){var a=(0,tr.__call__)(tr.ValueError,null,"Endnote category ‘{}’ is already a registered endnote category".format(t.category_name));throw a.__cause__=null,a}!function(){var r=e.categories;(0,tr.__call__)(r.append,r,t)}(),(0,tr.__setitem__)(e.categories_by_name,t.category_name,t)}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:ru,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"inhibit_render_endnote_marks":t=n[_]}}}e.endnotes=function(){for(var t,r=[],n=e.feature_document_manager.categories,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,[]])}return(0,tr.dict)(r)}(),e.endnote_counters=function(){for(var t,r=[],n=e.feature_document_manager.categories,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,(0,tr.__call__)(us,null,a.counter_formatter)])}return(0,tr.dict)(r)}(),e.endnote_instances=(0,tr.dict)({}),e.inhibit_render_endnote_marks=t}))},get add_endnote(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"category_name":t=i[o];break;case"content_nodelist":r=i[o];break;case"node":var l=i[o];break;case"ref_label_prefix":n=i[o];break;case"ref_label":_=i[o]}}}var s=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,l)}();if((0,tr.__t__)((0,tr.__in__)(s,e.endnote_instances)))return(0,tr.__getitem__)(e.endnote_instances,s);var c=function(){var r=(0,tr.__getitem__)(e.endnote_counters,t);return(0,tr.__call__)(r.step_and_format_flm,r)}(),u=c[0],f=c[1],d=function(){var r=e.render_context.doc.environment;return(0,tr.__call__)(r.make_fragment,r,f,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} counter".format(t)}))}(),h=(0,tr.__call__)(ou,null,(0,tr.__kwargtrans__)({category_name:t,number:u,formatted_counter_value_flm:d,content_nodelist:r,ref_label_prefix:n,ref_label:_}));return function(){var r=(0,tr.__getitem__)(e.endnotes,t);(0,tr.__call__)(r.append,r,h)}(),(0,tr.__t__)(null!==s)&&(0,tr.__setitem__)(e.endnote_instances,s,h),h}))},get render_endnote_mark(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="endnote-marks";if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"endnote":t=a[i];break;case"display_flm":r=a[i];break;case"wrap_with_semantic_span":n=a[i]}}}if((0,tr.__t__)(e.inhibit_render_endnote_marks))return function(){var t=e.render_context.fragment_renderer;return(0,tr.__call__)(t.render_nothing,t,e.render_context)}();var o="#{}-{}".format(t.category_name,t.number);if((0,tr.__t__)(null===r))var l=t.formatted_counter_value_flm;else l=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,_i)))var s=l.nodes;else s=l;var c=["endnote",t.category_name];(0,tr.__t__)(n)&&function(){var e=c;(0,tr.__call__)(e.append,e,n)}();var u=function(){var t=e.render_context.fragment_renderer;return(0,tr.__call__)(t.render_link,t,"endnote",o,(0,tr.__kwargtrans__)({display_nodelist:s,render_context:e.render_context,annotations:c}))}();return u}))},get render_endnote_mark_many(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=!0,_=!1,a="endnote-marks";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"endnote_list":t=o[l];break;case"counter_prefix_variant":r=o[l];break;case"counter_with_delimiters":n=o[l];break;case"counter_with_prefix":_=o[l];break;case"wrap_with_semantic_span":a=o[l]}}}var s=e.render_context,c=s.fragment_renderer;if((0,tr.__t__)(e.inhibit_render_endnote_marks))return function(){var e=c;return(0,tr.__call__)(e.render_nothing,e,s)}();for(var u=(0,tr.dict)({}),f=t,d=0;d<(0,tr.len)(f);d++){var h=(0,tr.__getitem__)(f,d);(0,tr.__t__)(!(0,tr.__in__)(h.category_name,u))&&(0,tr.__setitem__)(u,h.category_name,[]),function(){var e=(0,tr.__getitem__)(u,h.category_name);(0,tr.__call__)(e.append,e,h)}()}var p=[];for(f=function(){var e=u;return(0,tr.__call__)(e.py_items,e)}(),d=0;d<(0,tr.len)(f);d++){for(var g=(0,tr.__getitem__)(f,d),v=g[0],m=(t=g[1],(0,tr.__getitem__)(e.feature_document_manager.categories_by_name,h.category_name).counter_formatter),y=function(){var e=m;return(0,tr.__call__)(e.format_many_flm,e,function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,a.number)}return r}(),(0,tr.__kwargtrans__)({prefix_variant:r,with_delimiters:n,with_prefix:_,get_raw_s_items:!0}))}(),w="",b=y,k=0;k<(0,tr.len)(b);k++){var x=(0,tr.__getitem__)(b,k),P=function(){var e=s.doc.environment;return(0,tr.__call__)(e.make_fragment,e,(0,tr.__getitem__)(x,"s"),(0,tr.__kwargtrans__)({is_block_level:!1,standalone_mode:!0,what:"Rendered endnote mark(s) bit {}".format((0,tr.__call__)(tr.repr,null,x))}))}();if((0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(x,"n"))||!1===(0,tr.__getitem__)(x,"n")))w=(0,tr.__call__)(tr.__iadd__,null,w,function(){var e=c;return(0,tr.__call__)(e.render_fragment,e,P,s)}());else{var O="#{}-{}".format(v,(0,tr.__getitem__)(x,"n"));w=(0,tr.__call__)(tr.__iadd__,null,w,function(){var e=c;return(0,tr.__call__)(e.render_link,e,"endnote",O,P.nodes,(0,tr.__kwargtrans__)({render_context:s,annotations:["endnote",v]}))}())}}!function(){var e=p;(0,tr.__call__)(e.append,e,w)}()}var E=function(){var e=c;return(0,tr.__call__)(e.render_join,e,p,s)}();return(0,tr.__t__)(a)?function(){var e=c;return(0,tr.__call__)(e.render_semantic_span,e,E,a,s)}():E}))},get render_endnotes_category(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"category_name":t=n[_]}}}var a=e.render_context.fragment_renderer;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"category_name")))t=t.category_name;var i=function(r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)if("n"===a)r=_[a]}}return(0,tr.__getitem__)((0,tr.__getitem__)(e.endnotes,t),(0,tr.__sub__)(r,1)).formatted_counter_value_flm.nodes},o=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("n"===_)e=n[_]}}return"{}-{}".format(t,e)},l=function(){for(var r,n=[],_=(0,tr.__getitem__)(e.endnotes,t),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);r=void 0,r=n,(0,tr.__call__)(r.append,r,i.content_nodelist)}return n}();return function(){var r=a;return(0,tr.__call__)(r.render_enumeration,r,l,(0,tr.__kwargtrans__)({counter_formatter:i,target_id_generator:o,render_context:e.render_context,annotations:[(0,tr.__add__)(t,"-list")]}))}()}))},get render_endnotes(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="endnotes";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"target_id":t=l[s];break;case"annotations":r=l[s];break;case"include_headings_at_level":n=l[s];break;case"set_headings_target_ids":_=l[s];break;case"endnotes_heading_title":a=l[s];break;case"endnotes_heading_level":i=l[s]}}}if((0,tr.__t__)(null===n))n=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"include_headings_at_level",null)}();if((0,tr.__t__)(null===_))_=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"set_headings_target_ids",!1)}();if((0,tr.__t__)(null===a))a=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"endnotes_heading_title",null)}();if((0,tr.__t__)(null===i))i=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"endnotes_heading_level",1)}();for(var c=e.render_context,u=c.fragment_renderer,f=!1,d=[],h=e.feature_document_manager.categories,p=0;p<(0,tr.len)(h);p++){var g=(0,tr.__getitem__)(h,p);if(!(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e.endnotes,g.category_name))))){f=!0;if((0,tr.__t__)((0,tr.__t__)(null!==n)&&!1!==n)){var v=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,g.heading_title,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} heading title".format(g.category_name)}))}(),m=null;if((0,tr.__t__)(_))m="{}-{}".format(t,g.category_name);!function(){var t,r=d;(0,tr.__call__)(r.append,r,(t=u,(0,tr.__call__)(t.render_heading,t,v.nodes,(0,tr.__kwargtrans__)({render_context:e.render_context,heading_level:n,target_id:m}))))}()}!function(){var t,r=d;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.render_endnotes_category,t,g)))}()}}if((0,tr.__t__)(!(0,tr.__t__)(f)))return function(){var e=u;return(0,tr.__call__)(e.render_nothing,e,(0,tr.__kwargtrans__)({annotations:["no-endnotes"],render_context:c}))}();if((0,tr.__t__)(null!==a)){var y=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,a,(0,tr.__kwargtrans__)({is_block_level:!1,what:"endnotes heading title".format()}))}();!function(){var t,r=d;(0,tr.__call__)(r.insert,r,0,(t=u,(0,tr.__call__)(t.render_heading,t,y.nodes,(0,tr.__kwargtrans__)({render_context:e.render_context,heading_level:i}))))}()}return function(){var n,_=u;return(0,tr.__call__)(_.render_semantic_block,_,(n=u,(0,tr.__call__)(n.render_join_blocks,n,d,c)),(0,tr.__kwargtrans__)({role:"endnotes",render_context:e.render_context,annotations:r,target_id:t}))}()}))}})}),su=lu,cu={};t(cu,"logger",(()=>hu)),t(cu,"simplify_trim_whitespace",(()=>pu)),t(cu,"get_term_ref_label_verbatim",(()=>gu)),t(cu,"DefineTermEnvironment",(()=>vu)),t(cu,"RefTermMacro",(()=>mu)),t(cu,"FeatureDefTerm",(()=>yu)),t(cu,"FeatureClass",(()=>wu)),t(cu,"flmspecinfo",(()=>Ro)),t(cu,"ParsedArguments",(()=>Cr)),t(cu,"FLMEnvironmentSpecBase",(()=>Vo)),t(cu,"ParsedArgumentsInfo",(()=>wn)),t(cu,"Feature",(()=>sr)),t(cu,"FLMArgumentSpec",(()=>ko)),t(cu,"TextFormatMacro",(()=>Ko)),t(cu,"FLMParsingStateDeltaSetBlockLevel",(()=>bo)),t(cu,"FLMMacroSpecBase",(()=>qo)),t(cu,"latexnodes_nodes",(()=>Or)),t(cu,"refs",(()=>pl));tr=a("hoVWB");var uu={},fu={};(0,tr.__nest__)(uu,"",dr),(0,tr.__nest__)(fu,"",Vn);var du="flm.feature.defterm",hu=function(){var e=uu;return(0,tr.__call__)(e.getLogger,e,du)}(),pu=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("x"===n)e=r[n]}}return function(){var t,r=fu;return(0,tr.__call__)(r.sub,r,"\\s+"," ",(t=e,(0,tr.__call__)(t.strip,t)))}()},gu=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("node_term_arg_nodelist"===n)e=r[n]}}return(0,tr.__call__)(pu,null,function(){var t=e;return(0,tr.__call__)(t.latex_verbatim,t)}())},vu=(0,tr.__class__)("DefineTermEnvironment",[Vo],{__module__:du,is_block_level:!0,allowed_in_standalone_mode:!1,allowed_ref_label_prefixes:(0,tr.tuple)(["topic"]),defterm_ref_type:"defterm",get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=": ";var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"render_with_term":r=i[o];break;case"render_with_term_suffix":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,vu,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,arguments_spec_list:[(0,tr.__call__)(ko,null,"{",(0,tr.__kwargtrans__)({argname:"term"})),Ro.label_arg],body_parsing_state_delta:(0,tr.__call__)(bo,null,(0,tr.__kwargtrans__)({is_block_level:e.is_block_level}))},_))),e.render_with_term=r,e.render_with_term_suffix=n,(0,tr.__t__)(e.render_with_term)){var l=(0,tr.__call__)(Ko,null,"",(0,tr.__kwargtrans__)({text_formats:["defterm-term"]}));l.is_block_heading=!0,e.render_term_text_format_spec=l}}))},_fields:(0,tr.tuple)(["environmentname","render_with_term","render_with_term_suffix"]),get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["term","label"]))}();t.flmarg_term=function(){var e=(0,tr.__getitem__)(a,"term");return(0,tr.__call__)(e.get_content_nodelist,e)}();var i=(0,tr.__call__)(gu,null,t.flmarg_term);return t.flmarg_term_flm_ref_label_verbatim=i,t.flmarg_labels=function(){var t=Ro;return(0,tr.__call__)(t.helper_collect_labels,t,(0,tr.__getitem__)(a,"label"),e.allowed_ref_label_prefixes)}(),t.flm_referenceable_infos=[function(){var r=pl;return(0,tr.__call__)(r.ReferenceableInfo,r,(0,tr.__kwargtrans__)({kind:"defterm",formatted_ref_flm_text:t.flmarg_term_flm_ref_label_verbatim,labels:(0,tr.__add__)([(0,tr.tuple)([e.defterm_ref_type,t.flmarg_term_flm_ref_label_verbatim])],(0,tr.__call__)(tr.list,null,t.flmarg_labels))}))}()],t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=t.flmarg_term_flm_ref_label_verbatim,o=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"feature.defterm")}();(0,tr.__t__)(!(0,tr.__in__)("currently_defining_terms",o))&&(0,tr.__setitem__)(o,"currently_defining_terms",[]);var l=(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(o,"currently_defining_terms"));!function(){var e=l;(0,tr.__call__)(e.append,e,i)}();var s=function(){var e=r;return(0,tr.__call__)(e.push_logical_state,e,"feature.defterm","currently_defining_terms",l)}();try{if(s.__enter__(),(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}()))for(var c=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),u=t.flm_referenceable_infos,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);!function(){var e=c;(0,tr.__call__)(e.register_reference_referenceable,e,(0,tr.__kwargtrans__)({node:t,referenceable_info:d}))}()}var h=t.nodelist;if((0,tr.__t__)(e.render_with_term)){var p=r.doc.environment,g=function(){var t=p;return(0,tr.__call__)(t.make_fragment,t,(0,tr.__add__)(i,e.render_with_term_suffix),(0,tr.__kwargtrans__)({standalone_mode:!0}))}(),v=function(){var r=g.latex_walker;return(0,tr.__call__)(r.make_node,r,en,(0,tr.__kwargtrans__)({macroname:"",spec:e.render_term_text_format_spec,macro_post_space:"",parsing_state:g.nodes.parsing_state,nodeargd:(0,tr.__call__)(Cr,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.render_term_text_format_spec.arguments_spec_list,argnlist:[g.nodes]})),pos:t.pos,pos_end:t.pos_end}))}();!function(){var t=e.render_term_text_format_spec;(0,tr.__call__)(t.finalize_node,t,v)}();h=function(){var e=g.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,(0,tr.__add__)([v],(0,tr.__call__)(tr.list,null,h)),(0,tr.__kwargtrans__)({parsing_state:t.nodelist.parsing_state}))}()}var m=function(){var e,n=r.fragment_renderer;return(0,tr.__call__)(n.render_semantic_block,n,(0,tr.__kwargtrans__)({content:(e=r.fragment_renderer,(0,tr.__call__)(e.render_nodelist,e,h,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))),role:"defterm",render_context:r,target_id:function(){var e=(0,tr.__getitem__)(t.flm_referenceable_infos,0);return(0,tr.__call__)(e.get_target_id,e)}(),annotations:["p-block"]}))}();s.__exit__()}catch(e){if(!s.__exit__(e.name,e,e.stack))throw e}return m}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}if((0,tr.__t__)(null===t.flm_referenceable_infos)){var i=(0,tr.__call__)(LatexWalkerLocatedError,null,(0,tr.__add__)("Recomposing pure LaTeX: Invalid referenceable info in defterm node ",(0,tr.__call__)(tr.repr,null,t)),(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}for(var o=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flmarg_term)}(),l=(0,tr.__add__)((0,tr.__add__)("\\begin{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}"),s=(l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("{",o),"}")),t.flm_referenceable_infos),c=0;c<(0,tr.len)(s);c++)for(var u=(0,tr.__getitem__)(s,c).labels,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),h=d[0],p=d[1],g=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",h,p,t.latex_walker.resource_info)}(),v=(0,tr.__getitem__)(g,"safe_label");l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__call__)(tr.str,null,v)),"}"))}l=(0,tr.__call__)(tr.__iadd__,null,l,function(){var e=r;return(0,tr.__call__)(e.recompose_nodelist,e,t.nodelist,t)}());return l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("\\end{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}"))}))}}),mu=(0,tr.__class__)("RefTermMacro",[qo],{__module__:du,allowed_in_standalone_mode:!1,delayed_render:!0,defterm_ref_type:"defterm",get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"macroname":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,mu,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(ko,null,"[",(0,tr.__kwargtrans__)({argname:"ref_term",flm_doc:"The term that is being referenced.  May be omitted if it coincides with \\verba{term}"})),(0,tr.__call__)(ko,null,"{",(0,tr.__kwargtrans__)({argname:"term",flm_doc:"The term the exact way it should be typeset at this point"}))]},r)))}))},_fields:(0,tr.tuple)(["macroname"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return" Reference a term defined somewhere else in a\n        \\verbcode+\\begin{defterm}…\\end{defterm}+ environment.  This will\n        typically produce a link in HTML output for instance to the location\n        where this term is defined.  In case you need to typeset the term\n        differently than when you defined it (e.g., because of a plural,\n        capital/lower case, other declination), use the optional argument to\n        give the term exactly as defined and specify the term as it should\n        appear in the main argument.  E.g.\n        \\verbcode+These are \\term[Markov chain]{Markov chains}+"}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["ref_term","term"]))}(),i=function(){var e=(0,tr.__getitem__)(a,"term");return(0,tr.__call__)(e.get_content_nodelist,e)}();(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"ref_term");return(0,tr.__call__)(e.was_provided,e)}())?(t.flmarg_ref_term=function(){var e=(0,tr.__getitem__)(a,"ref_term");return(0,tr.__call__)(e.get_content_nodelist,e)}(),t.flm_term_flm_show_term_nodelist=i,t.flm_term_flm_ref_label_verbatim=(0,tr.__call__)(gu,null,t.flmarg_ref_term)):(t.flmarg_ref_term=null,t.flm_term_flm_show_term_nodelist=i,t.flm_term_flm_ref_label_verbatim=(0,tr.__call__)(gu,null,i)),t.flmarg_ref=(0,tr.tuple)([e.defterm_ref_type,t.flm_term_flm_ref_label_verbatim]),t.flm_ref_info=(0,tr.dict)({ref_list:[t.flmarg_ref],display_content_nodelist:t.flm_term_flm_show_term_nodelist})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=!1,o=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"feature.defterm")}();if((0,tr.__t__)((0,tr.__in__)("currently_defining_terms",o))&&(0,tr.__t__)((0,tr.__in__)(t.flm_term_flm_ref_label_verbatim,(0,tr.__getitem__)(o,"currently_defining_terms"))))i=!0;var l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"defterm")}();!function(){var e=l;(0,tr.__call__)(e.register_term_node_info,e,t,(0,tr.__kwargtrans__)({is_currently_defining_term:i}))}()}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=t.flm_term_flm_show_term_nodelist,o=t.flm_term_flm_ref_label_verbatim;if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}())))return function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nodelist,e,i,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!1}))}();var l=t.latex_walker.resource_info,s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),c=function(){var t=s;return(0,tr.__call__)(t.get_ref,t,e.defterm_ref_type,o,l)}(),u=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"defterm")}(),f=function(){var e=u;return(0,tr.__call__)(e.get_term_node_info,e,t)}(),d=(0,tr.__getitem__)(f,"is_currently_defining_term");return(0,tr.__t__)(d)?function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_text_format,e,["defterm-term","term-in-defining-defterm"],(0,tr.__kwargtrans__)({nodelist:i,render_context:r}))}():function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_link,e,"term",(0,tr.__kwargtrans__)({href:c.target_href,display_nodelist:i,render_context:r,annotations:[]}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=e.defterm_ref_type,o=t.flm_term_flm_ref_label_verbatim,l=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",i,o,t.latex_walker.resource_info)}(),s=(0,tr.__getitem__)(l,"safe_label"),c=t.flm_term_flm_show_term_nodelist,u=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,c)}(),f=null;if((0,tr.__t__)(null!==t.flmarg_ref_term))f=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flmarg_ref_term)}();t.flm_term_flm_ref_label_verbatim;return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\flmTerm{",t.macroname),"}{"),s),"}"),(0,tr.__t__)(f)?(0,tr.__add__)((0,tr.__add__)("{",f),"}"):"{}"),"{"),u),"}")}))}}),yu=(0,tr.__class__)("FeatureDefTerm",[sr],{__module__:du,feature_name:"defterm",feature_title:"Definition terms",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:du,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.registered_term_node_infos=(0,tr.dict)({})}))},get register_term_node_info(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}(0,tr.__setitem__)(e.registered_term_node_infos,function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}(),r)}))},get get_term_node_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return(0,tr.__getitem__)(e.registered_term_node_infos,function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}())}))}}),render_defterm_with_term:!0,render_defterm_with_term_suffix:": ",get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_defterm_with_term":t=_[a];break;case"render_defterm_with_term_suffix":r=_[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,yu,"__init__"),null,e),(0,tr.__t__)(null!==t)&&(e.render_defterm_with_term=t),(0,tr.__t__)(null!==r)&&(e.render_defterm_with_term_suffix=r)}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(mu,null,"term")],environments:[(0,tr.__call__)(vu,null,"defterm",(0,tr.__kwargtrans__)({render_with_term:e.render_defterm_with_term,render_with_term_suffix:e.render_defterm_with_term_suffix}))]}))}))}}),wu=yu,bu={};t(bu,"logger",(()=>Pu)),t(bu,"_cite_default_counter_formatter_spec",(()=>Ou)),t(bu,"FeatureExternalPrefixedCitations",(()=>Eu)),t(bu,"CiteMacro",(()=>Tu)),t(bu,"cite_macro_arguments",(()=>Au)),t(bu,"CiteMoreArgsParser",(()=>Cu)),t(bu,"TackOnMultipleCiteCommandsMacroParser",(()=>Su)),t(bu,"FLMFragment",(()=>_i)),t(bu,"ParsedArgumentsInfo",(()=>wn)),t(bu,"EndnoteCategory",(()=>au)),t(bu,"build_counter_formatter",(()=>ls)),t(bu,"Feature",(()=>sr)),t(bu,"FLMArgumentSpec",(()=>ko)),t(bu,"latexnodes_parsers",(()=>oa)),t(bu,"macrospec",(()=>ii)),t(bu,"FLMMacroSpecBase",(()=>qo)),t(bu,"latexnodes_nodes",(()=>Or));tr=a("hoVWB");var ku={};(0,tr.__nest__)(ku,"",dr);var xu="flm.feature.cite",Pu=function(){var e=ku;return(0,tr.__call__)(e.getLogger,e,xu)}(),Ou=(0,tr.dict)({format_num:"arabic",prefix_display:null,delimiters:(0,tr.tuple)(["[","]"]),join_spec:"compact"}),Eu=(0,tr.__class__)("FeatureExternalPrefixedCitations",[sr],{__module__:xu,feature_name:"citations",feature_title:"Citations",feature_optional_dependencies:["endnotes"],use_endnotes:!0,DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:xu,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"use_endnotes":t=n[_]}}}if((0,tr.__t__)(null!==t)?e.use_endnotes=t:e.use_endnotes=e.feature.use_endnotes,(0,tr.__t__)(e.use_endnotes)){var a=function(){var t=e.doc;return(0,tr.__call__)(t.feature_document_manager,t,"endnotes")}();e.endnote_category=(0,tr.__call__)(au,null,"citation",(0,tr.__kwargtrans__)({counter_formatter:e.feature.counter_formatter,heading_title:e.feature.references_heading_title})),function(){var t=a;(0,tr.__call__)(t.add_endnote_category,t,e.endnote_category)}()}}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:xu,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"sort_and_compress":t=n[_]}}}e.citation_endnotes=(0,tr.dict)({}),e.use_endnotes=e.feature_document_manager.use_endnotes,e.external_citations_providers=e.feature.external_citations_providers,(0,tr.__t__)(null!==t)?e.sort_and_compress=t:e.sort_and_compress=e.feature.sort_and_compress}))},get get_citation_content_flm(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cite_prefix":t=a[i];break;case"cite_key":r=a[i];break;case"resource_info":n=a[i]}}}if((0,tr.__t__)(null===e.external_citations_providers))throw(o=(0,tr.__call__)(tr.ValueError,null,"No external citations providers are set!")).__cause__=null,o;for(var o,l=null,s=e.external_citations_providers,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);l=function(){var e=u;return(0,tr.__call__)(e.get_citation_full_text_flm,e,t,r,n)}();if((0,tr.__t__)(l))break}if((0,tr.__t__)(null===l))throw(o=(0,tr.__call__)(tr.ValueError,null,"Citation not found: ‘{}:{}’".format(t,r))).__cause__=null,o;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,_i)))var f=l;else f=function(){var n=e.render_context;return(0,tr.__call__)(n.make_standalone_fragment,n,l,(0,tr.__kwargtrans__)({is_block_level:!1,what:"Citation text for {}:{}".format(t,r)}))}();return f}))},get get_citation_endnote(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cite_prefix":t=a[i];break;case"cite_key":r=a[i];break;case"resource_info":n=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.use_endnotes)))return null;var o=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"endnotes")}();if((0,tr.__t__)((0,tr.__in__)((0,tr.tuple)([t,r]),e.citation_endnotes)))return e.citation_endnotes.__getitem__([t,r]);var l=function(){var _=e;return(0,tr.__call__)(_.get_citation_content_flm,_,t,r,n)}(),s=function(){var e=o;return(0,tr.__call__)(e.add_endnote,e,(0,tr.__kwargtrans__)({category_name:"citation",content_nodelist:l.nodes,ref_label_prefix:t,ref_label:r,node:(0,tr.tuple)([t,r])}))}();return s.formatted_inner_counter_value_flm=function(){var t,r=e.render_context;return(0,tr.__call__)(r.make_standalone_fragment,r,(t=e.feature_document_manager.endnote_category.counter_formatter,(0,tr.__call__)(t.format_flm,t,s.number,(0,tr.__kwargtrans__)({with_delimiters:!1}))),(0,tr.__kwargtrans__)({is_block_level:!1,what:"citation counter (inner)".format()}))}(),e.citation_endnotes.__setitem__([t,r],s),s}))},get render_citation_marks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"cite_items":t=_[a];break;case"node":r=_[a]}}}var i=e.render_context,o=i.fragment_renderer,l=null;if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.supports_feature,e,"endnotes")}()))l=function(){var e=i;return(0,tr.__call__)(e.feature_render_manager,e,"endnotes")}();if((0,tr.__t__)((0,tr.__t__)(e.use_endnotes)&&(0,tr.__t__)(null!==l)&&l.inhibit_render_endnote_marks))return function(){var e=o;return(0,tr.__call__)(e.render_nothing,e,i)}();for(var s=r.latex_walker.resource_info,c=[],u=[],f=t,d=0;d<(0,tr.len)(f);d++){var h=(0,tr.__getitem__)(f,d),p=(P=(0,tr.tuple)([(0,tr.__getitem__)(h,"prefix"),(0,tr.__getitem__)(h,"key"),(0,tr.__getitem__)(h,"extra")]))[0],g=P[1],v=P[2],m=null;if((0,tr.__t__)(e.use_endnotes))m=function(){var t=e;return(0,tr.__call__)(t.get_citation_endnote,t,p,g,s)}();(0,tr.__t__)(null===v)&&function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.tuple)([p,g,v,m]))}(),(0,tr.__t__)(null!==v)&&function(){var e=u;(0,tr.__call__)(e.append,e,(0,tr.tuple)([p,g,v,m]))}()}var y=[],w=!0;if((0,tr.__t__)((0,tr.__t__)(e.use_endnotes)&&e.sort_and_compress)){var b=function(){for(var e,t=[],r=c,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),a=(_[0],_[1],_[2],_[3]);e=void 0,e=t,(0,tr.__call__)(e.append,e,a)}return t}();if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,b),1)))w=!1;var k=function(){var e=l;return(0,tr.__call__)(e.render_endnote_mark_many,e,b,(0,tr.__kwargtrans__)({wrap_with_semantic_span:!1}))}();!function(){var e=y;(0,tr.__call__)(e.append,e,k)}()}else u=(0,tr.__add__)(c,u);var x=e.feature.counter_formatter.delimiters;for(f=u,d=0;d<(0,tr.len)(f);d++){p=(P=(0,tr.__getitem__)(f,d))[0],g=P[1];var P,O=P[2],E=(m=P[3],null),A=null;if((0,tr.__t__)(e.use_endnotes))A=m.formatted_inner_counter_value_flm;else E=function(){var t=e;return(0,tr.__call__)(t.get_citation_content_flm,t,p,g,s)}(),A=E;var C=[];(0,tr.__t__)((0,tr.__t__)(w)&&null!==(0,tr.__getitem__)(x,0))&&function(){var e,t=C;(0,tr.__call__)(t.append,t,(e=r.latex_walker,(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(x,0),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}(),function(){var e=C;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(tr.list,null,A.nodes))}(),(0,tr.__t__)(null!==O)&&(function(){var t,n=C;(0,tr.__call__)(n.append,n,(t=r.latex_walker,(0,tr.__call__)(t.make_node,t,Kr,(0,tr.__kwargtrans__)({chars:e.feature.citation_optional_text_separator,pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}(),function(){var e=C;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(tr.list,null,O))}()),(0,tr.__t__)((0,tr.__t__)(w)&&null!==(0,tr.__getitem__)(x,1))&&function(){var e,t=C;(0,tr.__call__)(t.append,t,(e=r.latex_walker,(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(x,1),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}();var S=function(){var e=r.parsing_state;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({is_block_level:!1}))}(),T=function(){var e=r.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,C,(0,tr.__kwargtrans__)({parsing_state:S}))}();if((0,tr.__t__)(e.use_endnotes)){var N=function(){var e=l;return(0,tr.__call__)(e.render_endnote_mark,e,m,T,(0,tr.__kwargtrans__)({wrap_with_semantic_span:!1}))}();if((0,tr.__t__)(!(0,tr.__t__)(w)))N=(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(x,0),N),(0,tr.__getitem__)(x,1));!function(){var e=y;(0,tr.__call__)(e.append,e,N)}()}else{var L=function(){var e=o;return(0,tr.__call__)(e.render_nodelist,e,T,i)}();if((0,tr.__t__)(!(0,tr.__t__)(w)))L=(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(x,0),L),(0,tr.__getitem__)(x,1));!function(){var e=y;(0,tr.__call__)(e.append,e,L)}()}}return function(){var e,t=o;return(0,tr.__call__)(t.render_semantic_span,t,(e=o,(0,tr.__call__)(e.render_join,e,y,i)),"citation-marks",i)}()}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="arabic";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_="; ";if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="References";if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"external_citations_providers":t=l[s];break;case"counter_formatter":r=l[s];break;case"citation_delimiters":n=l[s];break;case"citation_optional_text_separator":_=l[s];break;case"references_heading_title":a=l[s];break;case"sort_and_compress":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Eu,"__init__"),null,e),e.external_citations_providers=t;var c=(0,tr.__call__)(tr.dict,null,Ou);(0,tr.__t__)(null!==n)&&(0,tr.__setitem__)(c,"delimiters",n),e.counter_formatter=(0,tr.__call__)(ls,null,r,c,(0,tr.__kwargtrans__)({counter_formatter_id:"citation"})),e.citation_optional_text_separator=_,e.references_heading_title=a,e.sort_and_compress=i}))},get set_external_citations_providers(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"external_citations_providers":t=n[_]}}}(0,tr.__t__)(null!==e.external_citations_providers)&&function(){var e=Pu;(0,tr.__call__)(e.warning,e,"FeatureExternalPrefixedCitations.set_external_citations_providers(): There are already external citation providers set.  They will be replaced.")}(),e.external_citations_providers=t}))},get add_external_citations_provider(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"external_citations_provider":t=n[_]}}}(0,tr.__t__)(null===e.external_citations_providers)&&(!function(){var e=Pu;(0,tr.__call__)(e.warning,e,"FeatureExternalPrefixedCitations.add_external_citations_provider(): External citations provider list was not initialized, creating an empty list.")}(),e.external_citations_providers=[]),function(){var r=e.external_citations_providers;(0,tr.__call__)(r.append,r,t)}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.dict)({macros:[(0,tr.__call__)(Tu,null,"cite")]})}))}}),Au=[(0,tr.__call__)(ko,null,"[",(0,tr.__kwargtrans__)({argname:"cite_pre_text"})),(0,tr.__call__)(ko,null,function(){var e=oa;return(0,tr.__call__)(e.LatexCharsCommaSeparatedListParser,e,(0,tr.__kwargtrans__)({enable_comments:!1}))}(),(0,tr.__kwargtrans__)({argname:"citekey"}))],Cu=(0,tr.__class__)("CiteMoreArgsParser",[Pi],{__module__:xu,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cu,"__init__"),null,e,(0,tr.__kwargtrans__)({arguments_spec_list:Au}))}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":n=i[o];break;default:_[o]=i[o]}delete _.__kwargtrans__}}var l=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cu,"parse"),null,e,t,r,n,(0,tr.__kwargtrans__)(_)),s=l[0],c=(l[1],function(){var e=t;return(0,tr.__call__)(e.make_node,e,Kr,(0,tr.__kwargtrans__)({chars:"(MORE CITATION KEYS)",parsing_state:n,pos:null,pos_end:null}))}());return c.cite_more_parsed_arguments=s,(0,tr.tuple)([c,null])}))}}),Su=(0,tr.__class__)("TackOnMultipleCiteCommandsMacroParser",[oa.LatexTackOnInformationFieldMacrosParser],{__module__:xu,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"citemacronames":t=n[_]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Su,"__init__"),null,e,t,(0,tr.__kwargtrans__)({allow_multiple:!0}))}))},get get_macro_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}return(0,tr.__call__)(Cu,null)}))}}),Tu=(0,tr.__class__)("CiteMacro",[qo],{__module__:xu,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"macroname":t=n[_]}}}var a=(0,tr.__add__)((0,tr.__add__)([],Au),[(0,tr.__call__)(ko,null,(0,tr.__kwargtrans__)({parser:(0,tr.__call__)(Su,null,["cite"]),argname:"cite_more",flm_doc:"An immediately following \\verbcode+\\cite{…}+ macro call gets appended to the current batch of citations"}))]);(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Tu,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:a}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["cite_pre_text","citekey","cite_more"]))}(),i=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"cite_pre_text");return(0,tr.__call__)(e.was_provided,e)}()))i=function(){var e=(0,tr.__getitem__)(a,"cite_pre_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();var o=function(){var e=(0,tr.__getitem__)(a,"citekey");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}(),l=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"citekeylist_nodelist":e=n[_];break;case"optional_cite_extra_nodelist":t=n[_]}}}for(var a=[],i=e,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if(!(0,tr.__t__)(!(0,tr.__t__)(l))){var s=function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}();if((0,tr.__t__)((0,tr.__getitem__)(l.delimiters,0)))s=(0,tr.__getslice__)(s,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.delimiters,0)),null,1);if((0,tr.__t__)((0,tr.__getitem__)(l.delimiters,1)))s=(0,tr.__getslice__)(s,0,(0,tr.__neg__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.delimiters,1))),1);if((0,tr.__t__)((0,tr.__in__)(":",s))){var c=function(){var e=s;return(0,tr.__call__)(e.py_split,e,":",1)}(),u=c[0],f=c[1];u=function(){var e,t=(e=u,(0,tr.__call__)(e.strip,e));return(0,tr.__call__)(t.lower,t)}()}else u=(c=(0,tr.tuple)([null,s]))[0],f=c[1];!function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.dict)({prefix:u,key:f,extra:t}))}()}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__gt__)((0,tr.__call__)(tr.len,null,a),1))){var d=(0,tr.__call__)(tr.ValueError,null,"When using the syntax \\cite[extra]{citekey}, you can only specify a single citation key.");throw d.__cause__=null,d}return a},s=(0,tr.__call__)(l,null,o,i),c=function(){var e=(0,tr.__getitem__)(a,"cite_more");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}();if((0,tr.__t__)(null!==c))for(var u=c,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);(0,tr.assert)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,Jr)}()),(0,tr.assert)((0,tr.__eq__)((0,tr.__getitem__)(d.delimiters,0),(0,tr.__add__)("\\",e.macroname)));var h=(0,tr.__getitem__)(d.nodelist,0).cite_more_parsed_arguments;(0,tr.assert)(null!==h);var p=function(){var e=(0,tr.__call__)(wn,null,(0,tr.__kwargtrans__)({parsed_arguments:h}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["cite_pre_text","citekey"]))}(),g=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(p,"cite_pre_text");return(0,tr.__call__)(e.was_provided,e)}()))g=function(){var e=(0,tr.__getitem__)(p,"cite_pre_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();var v=function(){var e=(0,tr.__getitem__)(p,"citekey");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}(),m=(0,tr.__call__)(l,null,v,g);!function(){var e=s;(0,tr.__call__)(e.extend,e,m)}()}return t.flmarg_cite_items=s,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"citations")}();return function(){var e=i;return(0,tr.__call__)(e.render_citation_marks,e,t.flmarg_cite_items,t)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"recomposer":r=_[a]}}}var i=t.flmarg_cite_items;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,i))))return"";for(var o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"cite")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"safe_labels",!1)}(),s=[],c=[],u=i,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),h=(0,tr.__getitem__)(d,"extra"),p=(0,tr.__getitem__)(d,"prefix"),g=(0,tr.__getitem__)(d,"key"),v="{}:{}".format(p,g);if((0,tr.__t__)(l)){var m=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"cite",p,g,t.latex_walker.resource_info)}();v=(0,tr.__getitem__)(m,"safe_label")}(0,tr.__t__)((0,tr.__t__)(null!==h)&&(0,tr.__t__)(h)&&(0,tr.__t__)(null!==h.nodelist)&&(0,tr.__call__)(tr.len,null,h.nodelist))?function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.tuple)([v,h]))}():function(){var e=s;(0,tr.__call__)(e.append,e,v)}()}var y="\\NoCaseChange{";if((0,tr.__t__)((0,tr.__call__)(tr.len,null,s)))var y=(0,tr.__call__)(tr.__iadd__,null,y,(0,tr.__add__)((0,tr.__add__)("\\protect\\cite{",(0,tr.__call__)(",".join,",",s)),"}"));if((0,tr.__t__)((0,tr.__call__)(tr.len,null,c)))for(u=c,f=0;f<(0,tr.len)(u);f++){var w=(0,tr.__getitem__)(u,f),b=w[0],k=(h=w[1],function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,h)}());y=(0,tr.__call__)(tr.__iadd__,null,y,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\protect\\cite[{",k),"}]{"),b),"}"))}return y=(0,tr.__call__)(tr.__iadd__,null,y,"}")}))}}),Nu={};(0,tr.__nest__)(Nu,"feature.verbatim",or),(0,tr.__nest__)(Nu,"feature.theorems",dl),(0,tr.__nest__)(Nu,"feature.refs",pl),(0,tr.__nest__)(Nu,"feature.math",Es),(0,tr.__nest__)(Nu,"feature.href",zs),(0,tr.__nest__)(Nu,"feature.headings",hl),(0,tr.__nest__)(Nu,"feature.graphics",Zs),(0,tr.__nest__)(Nu,"feature.floats",_c),(0,tr.__nest__)(Nu,"feature.enumeration",$c),(0,tr.__nest__)(Nu,"feature.endnotes",eu),(0,tr.__nest__)(Nu,"feature.defterm",cu),(0,tr.__nest__)(Nu,"feature.cite",bu),(0,tr.__nest__)(Nu,"feature.cells",ac),(0,tr.__nest__)(Nu,"flmspecinfo",Ro),(0,tr.__nest__)(Nu,"counter",Fl);var Lu=(0,tr.dict)({"":(0,tr.dict)({"flm.counter:CounterFormatter":Nu.counter.CounterFormatter,"flm.feature.cells:CellIndexRangeModel":Nu.feature.cells.CellIndexRangeModel,"flm.feature.cells:CellPlacementModel":Nu.feature.cells.CellPlacementModel,"flm.feature.cells:CellModel":Nu.feature.cells.CellModel,"flm.feature.cells:CellPlacementsMappingModel":Nu.feature.cells.CellPlacementsMappingModel,"flm.feature.cells:CellsModel":Nu.feature.cells.CellsModel,"flm.feature.endnotes:EndnoteInstance":Nu.feature.endnotes.EndnoteInstance,"flm.feature.floats:FloatContentAnyContent":Nu.feature.floats.FloatContentAnyContent,"flm.feature.floats:FloatContentIncludeGraphics":Nu.feature.floats.FloatContentIncludeGraphics,"flm.feature.floats:FloatContentCells":Nu.feature.floats.FloatContentCells,"flm.feature.floats:FloatInstance":Nu.feature.floats.FloatInstance,"flm.feature.floats:FloatType":Nu.feature.floats.FloatType,"flm.feature.graphics:GraphicsResource":Nu.feature.graphics.GraphicsResource,"flm.feature.refs:ReferenceableInfo":Nu.feature.refs.ReferenceableInfo,"flm.feature.refs:RefInstance":Nu.feature.refs.RefInstance}),FLMSpecInfo:(0,tr.dict)({"flm.flmspecinfo:ConstantValueMacro":Nu.flmspecinfo.ConstantValueMacro,"flm.flmspecinfo:ConstantValueSpecials":Nu.flmspecinfo.ConstantValueSpecials,"flm.flmspecinfo:TextFormatMacro":Nu.flmspecinfo.TextFormatMacro,"flm.flmspecinfo:SemanticBlockEnvironment":Nu.flmspecinfo.SemanticBlockEnvironment,"flm.flmspecinfo:ParagraphBreakSpecials":Nu.flmspecinfo.ParagraphBreakSpecials,"flm.flmspecinfo:ParagraphBreakMacro":Nu.flmspecinfo.ParagraphBreakMacro,"flm.flmspecinfo:FLMMacroSpecError":Nu.flmspecinfo.FLMMacroSpecError,"flm.flmspecinfo:FLMEnvironmentSpecError":Nu.flmspecinfo.FLMEnvironmentSpecError,"flm.flmspecinfo:FLMSpecialsSpecError":Nu.flmspecinfo.FLMSpecialsSpecError,"flm.feature.cells:LatexTabularRowSeparatorSpec":Nu.feature.cells.LatexTabularRowSeparatorSpec,"flm.feature.cells:LatexTabularColumnSeparatorSpec":Nu.feature.cells.LatexTabularColumnSeparatorSpec,"flm.feature.cells:MergeMacroSpec":Nu.feature.cells.MergeMacroSpec,"flm.feature.cells:CellMacro":Nu.feature.cells.CellMacro,"flm.feature.cells:CelldataMacroSpec":Nu.feature.cells.CelldataMacroSpec,"flm.feature.cells:CellsEnvironment":Nu.feature.cells.CellsEnvironment,"flm.feature.cells:CiteMacro":Nu.feature.cells.CiteMacro,"flm.feature.defterm:DefineTermEnvironment":Nu.feature.defterm.DefineTermEnvironment,"flm.feature.defterm:RefTermMacro":Nu.feature.defterm.RefTermMacro,"flm.feature.endnotes:EndnoteMacro":Nu.feature.endnotes.EndnoteMacro,"flm.feature.enumeration:Enumeration":Nu.feature.enumeration.Enumeration,"flm.feature.floats:FloatEnvironment":Nu.feature.floats.FloatEnvironment,"flm.feature.graphics:SimpleIncludeGraphicsMacro":Nu.feature.graphics.SimpleIncludeGraphicsMacro,"flm.feature.headings:HeadingMacro":Nu.feature.headings.HeadingMacro,"flm.feature.href:HrefHyperlinkMacro":Nu.feature.href.HrefHyperlinkMacro,"flm.feature.math:MathEnvironment":Nu.feature.math.MathEnvironment,"flm.feature.math:MathEqrefMacro":Nu.feature.math.MathEqrefMacro,"flm.feature.refs:RefMacro":Nu.feature.refs.RefMacro,"flm.feature.theorems:TheoremEnvironment":Nu.feature.theorems.TheoremEnvironment,"flm.feature.verbatim:VerbatimSpecInfo":Nu.feature.verbatim.VerbatimSpecInfo,"flm.feature.verbatim:VerbatimMacro":Nu.feature.verbatim.VerbatimMacro,"flm.feature.verbatim:VerbatimEnvironment":Nu.feature.verbatim.VerbatimEnvironment})}),Mu={},Iu={},ju={};(0,tr.__nest__)(Mu,"",ir),(0,tr.__nest__)(ju,"",ur),(0,tr.__nest__)(Iu,"",dr);var Ru="flm.flmdump",Du=(function(){var e=Iu;(0,tr.__call__)(e.getLogger,e,Ru)}(),ju.fn_unique_object_id),Fu=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"fullclsname":e=n[_];break;case"restype":t=n[_]}}}var a=Mu.serializable;if((0,tr.__t__)(null===t))t="";if((0,tr.__t__)(!(0,tr.__in__)(t,a)))throw(i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid restype: ",(0,tr.__call__)(tr.repr,null,t)))).__cause__=null,i;var i,o=(0,tr.__getitem__)(a,t);if((0,tr.__t__)(!(0,tr.__in__)(e,o)))throw(i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Invalid class name: ",(0,tr.__call__)(tr.repr,null,e))," ["),(0,tr.__call__)(tr.repr,null,t)),"]"))).__cause__=null,i;return(0,tr.__getitem__)(o,e)},Bu=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("clsobj"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)(e.__module__,":"),e.__name__)},zu=(0,tr.__class__)("_FakeDataLoadedFLMLatexWalker",[tr.object],{__module__:Ru,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"latex_walker":t=n[_]}}}e.flm_text=t.s,e.standalone_mode=t.standalone_mode,e.is_block_level=t.default_parsing_state.is_block_level,e.parsing_mode=t.parsing_mode,e.resource_info=t.resource_info,e.tolerant_parsing=t.tolerant_parsing,e.what=t.what,e.input_lineno_colno_offsets=t.input_lineno_colno_offsets}))},_fields:(0,tr.tuple)(["flm_text","standalone_mode","is_block_level","parsing_mode","resource_info","tolerant_parsing","what","input_lineno_colno_offsets"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return"{}(**{})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.__dict__))}))}}),qu=function(){for(var e,t=[],r=cn,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,[_.__name__,_])}return(0,tr.dict)(t)}(),Vu=function(){for(var e,t=[],r=[_i,wo,Cr,Ar,Pn,bo],n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,[_.__name__,_])}return(0,tr.dict)(t)}(),Uu=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("typename"===n)e=r[n]}}return(0,tr.__t__)((0,tr.__in__)(e,qu))||(0,tr.__t__)((0,tr.__in__)(e,Vu))||(0,tr.__eq__)(e,"LatexNodeList")},Gu=(0,tr.__class__)("_Skip",[tr.object],{__module__:Ru}),Wu=(0,tr.tuple)([Wi,la,eo,to,ro]),$u=((0,tr.__class__)("FLMDataDumper",[tr.object],{__module__:Ru,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)switch(n){case"self":e=r[n];break;case"environment":var _=r[n]}}}e.environment=_,function(){var t=e;(0,tr.__call__)(t.py_clear,t)}()}))},get py_clear(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}e.data=(0,tr.dict)({dumps:(0,tr.dict)({}),resources:(0,tr.dict)({}),_dump:(0,tr.dict)({version:2})})}))},get get_data(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return e.data}))},get add_object_dump(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"key":t=_[a];break;case"obj":r=_[a]}}}var i=function(){var t=e;return(0,tr.__call__)(t._make_object_dump,t,r,(0,tr.__kwargtrans__)({dumping_state:(0,tr.dict)({object:r})}))}();(0,tr.__setitem__)((0,tr.__getitem__)(e.data,"dumps"),t,i)}))},get _make_object_dump(){return(0,tr.__get__)(this,(function(e,t){var r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"obj":t=_[a];break;case"dumping_state":var i=_[a];break;case"type_name":r=_[a]}}}for(var o=(0,tr.__call__)(tr.set,null,t._fields),l=(0,tr.__call__)(tr.dir,null,t),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);(0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.startswith,e,"flm")}())&&function(){var e=o;(0,tr.__call__)(e.add,e,c)}()}if((0,tr.__t__)(null===r)){var u=t.__class__,f=u.__name__;if((0,tr.__t__)((0,tr.__call__)(Uu,null,f)))r=f;else r=(0,tr.__call__)(Bu,null,u)}var d=(0,tr.dict)({$type:r}),h=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("fieldname"===_)e=n[_]}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,e)))return(0,tr.__call__)(tr.getattr,null,t,e);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"_proxy_object"))&&(0,tr.__call__)(tr.hasattr,null,t._proxy_object,e)))return(0,tr.__call__)(tr.getattr,null,t._proxy_object,e);var a=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Invalid object field: ",(0,tr.__call__)(tr.repr,null,e))," in "),(0,tr.__call__)(tr.repr,null,t)));throw a.__cause__=null,a};for(l=(0,tr.__call__)(tr.sorted,null,o),s=0;s<(0,tr.len)(l);s++){var p=(0,tr.__getitem__)(l,s),g=function(){var t=e;return(0,tr.__call__)(t._make_dump,t,(0,tr.__call__)(h,null,p),(0,tr.__kwargtrans__)({dumping_state:i}))}();if((0,tr.__t__)(g===Gu))g=(0,tr.dict)({$skip:!0});(0,tr.__setitem__)(d,p,g)}return d}))},get _make_dump(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"x":t=n[_];break;case"dumping_state":var a=n[_]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.tuple,tr.list])))){for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=function(){var t=e;return(0,tr.__call__)(t._make_dump,t,s,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)(c===Gu))c=null;!function(){var e=i;(0,tr.__call__)(e.append,e,c)}()}return i}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.dict)))return function(){for(var r,n=[],_=(r=t,(0,tr.__call__)(r.py_items,r)),i=0;i<(0,tr.len)(_);i++){var o=(0,tr.__getitem__)(_,i),l=o[0],s=o[1];!function(){var t,r=n;(0,tr.__call__)(r.append,r,[l,(t=e,(0,tr.__call__)(t._make_dump,t,s,(0,tr.__kwargtrans__)({dumping_state:a})))])}()}return(0,tr.dict)(n)}();if((0,tr.__t__)(t===e.environment))return(0,tr.dict)({$flmenv:"environment"});if((0,tr.__t__)(t===e.environment.parsing_state))return(0,tr.dict)({$flmenv:"parsing_state"});if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Eo)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMLatexWalker",t,(0,tr.__call__)(zu,null,t),(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,zo)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMSpecInfo",t,t,(0,tr.__kwargtrans__)({dumping_state:a,restype_dumptype:(0,tr.__call__)(Bu,null,t.__class__)}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,wo)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMParsingState",t,t,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,cn)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"LatexNode",t,t,(0,tr.__kwargtrans__)({dumping_state:a,restype_dumptype:t.__class__.__name__}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Wu)))return Gu;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"_fields")))return function(){var r=e;return(0,tr.__call__)(r._make_object_dump,r,t,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.str,tr.bool,tr.int,tr.float]))))return t;if((0,tr.__t__)(null===t))return null;if((0,tr.__t__)(!(0,tr.__t__)(t)))return null;var u=(0,tr.__call__)(tr.ValueError,null,"Cannot dump value {} of unsupported type".format((0,tr.__call__)(tr.repr,null,t)));throw u.__cause__=null,u}))},get _make_resource(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"restype":t=i[o];break;case"y":r=i[o];break;case"ydata":n=i[o];break;case"restype_dumptype":_=i[o];break;case"dumping_state":var l=i[o]}}}(0,tr.__t__)(!(0,tr.__in__)(t,(0,tr.__getitem__)(e.data,"resources")))&&(0,tr.__setitem__)((0,tr.__getitem__)(e.data,"resources"),t,(0,tr.dict)({}));var s=(0,tr.__call__)(tr.str,null,(0,tr.__call__)(Du,null,r));if((0,tr.__t__)(!(0,tr.__in__)(s,(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t)))){(0,tr.__setitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),s,"$currently-dumping");var c=function(){var r=e;return(0,tr.__call__)(r._make_object_dump,r,n,(0,tr.__kwargtrans__)({dumping_state:l,type_name:(0,tr.__t__)(null!==_)?_:t}))}();(0,tr.__setitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),s,c)}return(0,tr.dict)({$restype:t,$reskey:s})}))}}),(0,tr.__class__)("FLMDataLoadNotSupported",[tr.object],{__module__:Ru}));(0,tr.__class__)("FLMDataLoader",[tr.object],{__module__:Ru,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"data":t=n[_];break;case"environment":var a=n[_]}}}if(e.data=t,e.environment=a,(0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"_dump"),"version"),2))){var i=(0,tr.__call__)(RuntimeError,null,"Dump version mismatch: {}, expected {}".format((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"_dump"),"version"),2));throw i.__cause__=null,i}if(e._loaded_resources=(0,tr.dict)({}),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("resources",e.data))&&(0,tr.__getitem__)(e.data,"resources")))for(var o=(0,tr.__getitem__)(e.data,"resources"),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);(0,tr.__setitem__)(e._loaded_resources,s,(0,tr.dict)({}))}}))},get get_keys(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("self"===n)e=r[n]}}return(0,tr.__call__)(tr.list,null,function(){var t=(0,tr.__getitem__)(e.data,"dumps");return(0,tr.__call__)(t.py_keys,t)}())}))},get get_object_dump(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"key":t=n[_]}}}var a=(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"dumps"),t);return function(){var t=e;return(0,tr.__call__)(t._load_from_data,t,a)}()}))},get _load_from_data(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"data":t=n[_]}}}if((0,tr.__t__)(null===t))return null;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.list)))return function(){for(var r,n,_=[],a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);r=void 0,n=void 0,n=_,(0,tr.__call__)(n.append,n,(r=e,(0,tr.__call__)(r._load_from_data,r,o)))}return _}();var a=null;try{a=(0,tr.__getitem__)(t,"$flmenv")}catch(e){}if((0,tr.__t__)(a))return function(){var r=e;return(0,tr.__call__)(r._flmenv_object,r,(0,tr.__getitem__)(t,"$flmenv"),t)}();a=null;try{a=(0,tr.__getitem__)(t,"$skip")}catch(e){}if((0,tr.__t__)(a))return $u;a=null;try{a=(0,tr.__getitem__)(t,"$restype")}catch(e){}if((0,tr.__t__)(a))return function(){var r=e;return(0,tr.__call__)(r._load_resource,r,a,(0,tr.__getitem__)(t,"$reskey"))}();a=null;try{a=(0,tr.__getitem__)(t,"$type")}catch(e){}if((0,tr.__t__)(a)){var i=(0,tr.__call__)(tr.dict,null,t),o=function(){var e=i;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var t=e;return(0,tr.__call__)(t._load_object,t,o,i)}()}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.str,tr.int,tr.bool])))?t:(0,tr.__t__)(t===$u)?null:function(){for(var r,n=[],_=(r=(0,tr.__call__)(tr.dict,null,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];!function(){var t,r=n;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._load_from_data,t,l))])}()}return(0,tr.dict)(n)}()}))},get _flmenv_object(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"flmenv_what":t=_[a];break;case"data":r=_[a]}}}if((0,tr.__t__)((0,tr.__eq__)(t,"")))return e.environment;if((0,tr.__t__)((0,tr.__eq__)(t,"parsing_state")))return e.environment.parsing_state;var i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unknown/invalid flmenv: ",(0,tr.__call__)(tr.repr,null,r)));throw i.__cause__=null,i}))},get _load_resource(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"restype":t=_[a];break;case"reskey":r=_[a]}}}return(0,tr.__t__)(!(0,tr.__in__)(t,e._loaded_resources))&&(0,tr.__setitem__)(e._loaded_resources,t,(0,tr.dict)({})),(0,tr.__t__)(!(0,tr.__in__)(r,(0,tr.__getitem__)(e._loaded_resources,t)))&&(0,tr.__setitem__)((0,tr.__getitem__)(e._loaded_resources,t),r,function(){var n=e;return(0,tr.__call__)(n._load_resource_from_data,n,t,r)}()),(0,tr.__getitem__)((0,tr.__getitem__)(e._loaded_resources,t),r)}))},get _load_resource_from_data(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"restype":t=_[a];break;case"reskey":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__in__)(t,(0,tr.__getitem__)(e.data,"resources"))))throw(o=(0,tr.__call__)(tr.ValueError,null,"Invalid internal resource reference type {}".format(t))).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__in__)(r,(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t))))throw(o=(0,tr.__call__)(tr.ValueError,null,"Invalid internal resource reference key {}/{}".format(t,r))).__cause__=null,o;var i=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),r);if((0,tr.__t__)((0,tr.__eq__)(t,"FLMLatexWalker"))){var o,l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();if((0,tr.__t__)((0,tr.__ne__)(s,"FLMLatexWalker")))throw(o=(0,tr.__call__)(tr.ValueError,null,"flmdump: Can't create LatexWalker instances other than FLMLatexWalker")).__cause__=null,o;return function(){var t=e.environment;return(0,tr.__call__)(t.make_latex_walker,t,(0,tr.__kwargtrans__)(l))}()}if((0,tr.__t__)((0,tr.__eq__)(t,"FLMParsingState")))return function(){var r=e;return(0,tr.__call__)(r._load_object,r,t,(0,tr.__call__)(tr.dict,null,i,(0,tr.__kwargtrans__)({latex_context:$u})))}();if((0,tr.__t__)((0,tr.__eq__)(t,"FLMSpecInfo"))){l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var r=e;return(0,tr.__call__)(r._load_object,r,s,l,(0,tr.__kwargtrans__)({restype:t}))}()}if((0,tr.__t__)((0,tr.__eq__)(t,"LatexNode"))){l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var t=e;return(0,tr.__call__)(t._load_object,t,s,l)}()}throw(o=(0,tr.__call__)(tr.ValueError,null,"Unknown data resource type to load: {}".format(t))).__cause__=null,o}))},get _load_object(){return(0,tr.__get__)(this,(function(e,t,r){var n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"objtype":t=a[i];break;case"data":r=a[i];break;case"restype":n=a[i]}}}r=(0,tr.__call__)(tr.dict,null,r);var o=function(){for(var t,n=[],_=(t=r,(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.startswith,e,"$")}()))&&function(){var t,r=n;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._load_from_data,t,l))])}()}return(0,tr.dict)(n)}();if((0,tr.__t__)((0,tr.__eq__)(t,"FLMFragment")))var l=e._make_fragment;else if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(t,qu))||(0,tr.__eq__)(t,"LatexNodeList")))l=function(){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)r[a]=_[a];delete r.__kwargtrans__}}return function(){var n=e;return(0,tr.__call__)(n._make_node_instance,n,t,r)}()};else if((0,tr.__t__)((0,tr.__in__)(t,Vu)))l=(0,tr.__getitem__)(Vu,t);else{if(!(0,tr.__t__)((0,tr.__in__)(":",t))){var s=(0,tr.__call__)(tr.ValueError,null,"Unknown object type ‘{}’ for data loading".format(t));throw s.__cause__=null,s}l=(0,tr.__call__)(Fu,null,t,(0,tr.__kwargtrans__)({restype:n}))}return(0,tr.__call__)(l,null,(0,tr.__kwargtrans__)(o))}))},get _make_node_instance(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodetype":t=_[a];break;case"kwargs":r=_[a]}}}for(var i=(0,tr.dict)({}),o=(0,tr.dict)({}),l=function(){var e=r;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var c=(p=(0,tr.__getitem__)(l,s))[0],u=p[1];(0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.startswith,e,"flm")}())?(0,tr.__setitem__)(o,c,u):(0,tr.__setitem__)(i,c,u)}if((0,tr.__t__)((0,tr.__eq__)(t,"LatexNodeList")))var f=_n,d=e.environment.finalize_nodelist;else f=(0,tr.__getitem__)(qu,t),d=e.environment.finalize_node;var h=(0,tr.__call__)(f,null,(0,tr.__kwargtrans__)(i));for(l=function(){var e=o;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var p;c=(p=(0,tr.__getitem__)(l,s))[0],u=p[1];(0,tr.__call__)(tr.setattr,null,h,c,u)}return h=(0,tr.__call__)(d,null,h)}))},get _make_fragment(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)if("self"===_)e=n[_];else t[_]=n[_];delete t.__kwargtrans__}}var a=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"nodes")}(),i=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"flm_text")}();return(0,tr.__call__)(_i,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:a,environment:e.environment,_flm_text_if_loading_nodes:i},t)))}))}});Vu.ZooFLMResourceInfo=class{constructor(e,t,r){this.object_type=e,this.object_id=t,this.source_path=r,this._fields=["object_type","object_id","source_path"],this.__class__={__name__:"ZooFLMResourceInfo"}}get_source_directory(e=""){return r(ar).join(e,r(ar).dirname(this.source_path))}toString(){return`[${this.object_type} ‘${this.object_id}’ in ‘${this.source_path}’]`}toJSON(){return{object_type:this.object_type,object_id:this.object_id,source_path:this.source_path}}};s=a("3krpC"),ar=a("2R1eR"),tr=a("hoVWB");a("hoVWB");var Yu="flm.feature.baseformatting",Hu=(0,(tr=a("hoVWB")).__class__)("NoExtraSpaceAfterDotMacro",[qo],{__module__:Yu,get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,r.fragment_renderer,"latex_macro_no_extra_space_after_dot"))?r.fragment_renderer.latex_macro_no_extra_space_after_dot:""}))}}),Xu=(0,tr.__class__)("FeatureBaseFormatting",[cr],{__module__:Yu,feature_name:"baseformatting",feature_title:"Basic formatting",feature_flm_doc:"\n    You can produce basic formatting, including emphasis/italics and\n    boldface using the following macros.  Several macros also provide a way to\n    typeset literal characters that would otherwise have a special meaning in\n    your FLM environment.\n\n    Input accents, special characters, etc., directly as Unicode:\n    \\verbcode+éàààé😅Á+. Note that source files should always be encoded using\n    the UTF-8 encoding. You can use pretty quotes \\verbcode+‘+ \\verbcode+’+\n    \\verbcode+“+ \\verbcode+”+; dashes \\verbcode|—| (em dash), \\verbcode|–| (en\n    dash, for ranges); spaces \\verbcode| | (non-breaking space), \\verbcode| |\n    (em space), \\verbcode| | (thin space), etc.\n    ",latex_definitions:(0,tr.dict)({macros:[(0,tr.__call__)($o,null,"textbackslash",(0,tr.__kwargtrans__)({value:"\\"})),(0,tr.__call__)($o,null,"%",(0,tr.__kwargtrans__)({value:"%"})),(0,tr.__call__)($o,null,"#",(0,tr.__kwargtrans__)({value:"#"})),(0,tr.__call__)($o,null,"&",(0,tr.__kwargtrans__)({value:"&"})),(0,tr.__call__)($o,null,"$",(0,tr.__kwargtrans__)({value:"$"})),(0,tr.__call__)($o,null," ",(0,tr.__kwargtrans__)({value:" "})),(0,tr.__call__)($o,null,"{",(0,tr.__kwargtrans__)({value:"{"})),(0,tr.__call__)($o,null,"}",(0,tr.__kwargtrans__)({value:"}"})),(0,tr.__call__)(Ko,null,"emph",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textit"])})),(0,tr.__call__)(Ko,null,"textit",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textit"])})),(0,tr.__call__)(Ko,null,"textbf",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textbf"])})),(0,tr.__call__)(Hu,null,"@")],specials:[(0,tr.__call__)(Yo,null,"~",(0,tr.__kwargtrans__)({value:" "})),(0,tr.__call__)(el,null,"\n\n")]})});const Zu=r(s)("zoodb.zooflm._environment"),Ku=Rl.SectionCommandInfo,Ju=au,Qu=wl,ef=bl,tf=zc,rf=ec;for(const e of[Ku,Ju,Qu,ef,tf,rf])e.toJSON=function(){return this.asdict()};function nf(e){return(0,tr.isinstance)(e,_i)}class _f{constructor(e){this.options=e??{},this.clear_all_refs(),this.target_href_resolver=null}clear_all_refs(){this.ref_instance_database={},this.options.ref_types&&this.options.ref_types.forEach((e=>{this.ref_instance_database[e]={}}))}add_ref(e){const{ref_type:t,ref_label:r}=e;if(null==t)throw new Error(`Invalid ref_type:ref_label pair ‘${t}:${r}’`);if(!Object.hasOwn(this.ref_instance_database,t)){if(void 0!==this.options.ref_types)throw new Error(`Invalid ref prefix ‘${t}’ in ‘${t}:${r}’, expected one of ${this.options.ref_types}`);this.ref_instance_database[t]={}}if(Object.hasOwn(this.ref_instance_database[t],r))throw new Error(`Ref target ‘${t}:${r}’ already exists in ref instance database, found ${JSON.stringify(this.ref_instance_database[t][r])}`);this.ref_instance_database[t][r]=e}get_ref(e,t,r,n){const _=this.ref_instance_database?.[e]?.[t];return null==_?(Zu(`No such reference in ref instance database — ${e}:${t}`),null):null!=this.target_href_resolver?new ef(er(Object.assign({},_.asdict(),{target_href:this.target_href_resolver(_,n)}))):_}dump_database(){const e={};if(this.ref_instance_database)for(const[t,r]of Object.entries(this.ref_instance_database)){if(!r)continue;let n={};for(const[e,t]of Object.entries(r)){let r=null;r=nf(t.formatted_ref_flm_text)?Object.assign({},t.asdict(),{formatted_ref_flm_text:t.formatted_ref_flm_text.flm_text}):t.asdict(),n[e]=r}e[t]=n}return{ref_instance_database:e}}load_database(e){let t={};for(const[r,n]of Object.entries(e.ref_instance_database)){t[r]={};for(const[e,_]of Object.entries(n))t[r][e]=new ef(er(_))}this.ref_instance_database=t}}class af{constructor(){this.clear_citations()}clear_citations(){this.citations_database={}}add_citation(e,t,r,n){const{overwrite:_}=n??{};if(Object.hasOwn(this.citations_database,e)||(this.citations_database[e]={}),!_&&Object.hasOwn(this.citations_database[e],t))throw new Error(`There is already a citation registered for ‘${e}:${t}’`);this.citations_database[e][t]=r}set_citations(e){this.clear_citations(),this.update_citations(e)}update_citations(e){for(const{cite_prefix:t,cite_key:r,citation_text:n}of e)this.add_citation(t,r,n,{overwrite:!0})}has_citation({cite_prefix:e,cite_key:t}){return!(!this.citations_database||!this.citations_database[e]||null==this.citations_database[e][t])}get_citation_full_text_flm(e,t,r){return Object.hasOwn(this.citations_database,e)?Object.hasOwn(this.citations_database[e],t)?this.citations_database[e][t]:this.handle_unresolved_citation({cite_prefix:e,cite_key:t,resource_info:r,message:`There is no citation registered for key ‘${e}:${t}’ in ${r}`}):this.handle_unresolved_citation({cite_prefix:e,cite_key:t,resource_info:r,message:`There is no citation registered for prefix ‘${e}’ for ‘${e}:${t}’ in ${r}`})}handle_unresolved_citation({cite_prefix:e,cite_key:t,message:r}){return Zu(`Can't find citation ‘${e}:${t}’: ${r}`),null}dump_database(){let e={};for(const[t,r]of Object.entries(this.citations_database)){e[t]={};for(let[n,_]of Object.entries(r))nf(_)&&(_=_.flm_text),e[t][n]=_}return{citations_database:e}}load_database(e){this.citations_database=e.citations_database}}const of=(0,tr.__class__)("FeatureZooGraphicsCollection",[sr],{__module__:"zoodb.zooflm._environment",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{get initialize(){return(0,tr.__get__)(this,(function(e,t){let r=null;null!=t&&(function(e){return e&&Object.hasOwn(e,"__kwargtrans__")}(t)||console.error("FeatureZooGraphicsCollection.initialize() - invalid argument kwargs=",t),r=t.override_get_graphics_resource),r?(e.override_get_graphics_resource=r,Zu("FeatureZooGraphicsCollection: Set custom render-time override_get_graphics_resource")):e.override_get_graphics_resource=null}))},get get_graphics_resource(){return(0,tr.__get__)(this,(function(e,...t){const[r,n]=rr(t,["graphics_path","resource_info"]);return e.feature.get_graphics_resource_base(r,n,e.render_context,e.override_get_graphics_resource)}))}}),get __init__(){return(0,tr.__get__)(this,(function(e){(0,tr.__super__)(of,"__init__")(e),e.graphics_collection={},e.feature_name="graphics_resource_provider",e.src_url_resolver_fn=null,e.export_graphics_resource_url_fn=e=>null}))},get add_graphics(){return(0,tr.__get__)(this,(function(e,...t){const[r,n]=rr(t,["source_path","graphics_resource"]);if(Object.hasOwn(e.graphics_collection,r))throw new Error(`Graphics collection already has a graphics resource registered  for path ‘${r}’ (registered target ‘${e.graphics_collection[r].src_url}’, new target ‘${n.src_url}’)`);e.graphics_collection[r]=n}))},get set_collection(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["collection"]);Object.entries(r).forEach((t=>{const[r,n]=t;e.add_graphics(r,n)}))}))},get has_graphics_for(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["source_path"]);return Object.hasOwn(e.graphics_collection,r)}))},get get_graphics_resource_base(){return(0,tr.__get__)(this,(function(e,...t){const[n,_,a,i]=rr(t,["graphics_path","resource_info","render_context","override_get_graphics_resource"]),o=r(ar).join(_.get_source_directory(),n);if(i){let e=i({feature:feature,graphics_path:n,resource_info:_,source_path:o});if(null!=e)return e}if(!e.has_graphics_for(o))throw new Error(`No such graphics ‘${o}’ (‘${n}’ relative to ${_})`);const l=e.graphics_collection[o];if(null!=e.src_url_resolver_fn){const{src_url:t,srcset:r}=e.src_url_resolver_fn({graphics_resource:l,render_context:a,source_path:o});if(void 0===t)throw new Error("src_url_resolver_fn() did not return { src_url }.");return new rf(er(Object.assign({},l.asdict(),{src_url:t,srcset:r})))}return l}))},get dump_database(){return(0,tr.__get__)(this,(function(e){return{graphics_collection:Object.fromEntries(Object.entries(e.graphics_collection).map((([t,r])=>{let n=r.asdict();return n.src_url=e.export_graphics_resource_url_fn(r),[t,n]})))}}))},get load_database(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["data"]);for(const[t,n]of Object.entries(r.graphics_collection))e.add_graphics(t,new rf(er(n)))}))}});var lf=(0,tr.__class__)("ZooFLMEnvironment",[So],{get __init__(){return(0,tr.__get__)(this,(function(e,t){t=Object.assign({},function(e="alph"){return{heading_section_commands_by_level:{2:Ku("section",er({inline:!1})),3:Ku("subsection",er({inline:!1})),4:Ku("paragraph",er({inline:!0}))},enumeration_environments:{itemize:{counter_formatter:["•","-","▸"]},enumerate:{counter_formatter:null}},endnote_categories:[Ju("footnote",er({counter_formatter:e,heading_title:"Footnotes",endnote_command:"footnote"}))],citation_counter_formatter:"arabic",citation_delimiters:["[","]"],figure_filename_extensions:["",".svg",".png",".jpg",".jpeg"],float_types:[tf("figure","Figure",er({counter_formatter:"Roman",content_handlers:["includegraphics"]})),tf("table","Table",er({counter_formatter:"Roman",content_handlers:["cells","includegraphics"]}))],defterm_render_defterm_with_term:!0,defterm_render_defterm_with_term_suffix:": "}}(),t);const r=To(er(t.parsing_state_options??{})),n=function(e,t){return e.citations_provider=t.citations_provider??new af,e.ref_resolver=t.ref_resolver??new _f(t.ref_resolver_options),e.graphics_collection=t.graphics_collection??new of,Zu("install_standard_features: creating feature class instances ..."),e.feature_baseformatting=new Xu,e.feature_href=new Hs,e.feature_verbatim=new ul,e.feature_math=new Ms,e.feature_enumeration=new Jc(er({enumeration_environments:t.enumeration_environments})),e.feature_headings=new Rl(er({section_commands_by_level:t.heading_section_commands_by_level})),e.feature_refs=new Sl([e.ref_resolver]),e.feature_endnotes=new lu(er({categories:t.endnote_categories})),e.feature_citations=new Eu(er({external_citations_providers:[e.citations_provider],counter_formatter:t.citation_counter_formatter,citation_delimiters:t.citation_delimiters})),e.feature_floats=new Vc(er({float_types:t.float_types})),e.feature_defterm=new yu,e.feature_defterm.render_defterm_with_term=t.defterm_render_defterm_with_term,e.feature_defterm.render_defterm_with_term_suffix=t.defterm_render_defterm_with_term_suffix,[e.feature_baseformatting,e.feature_href,e.feature_verbatim,e.feature_math,e.feature_enumeration,e.feature_headings,e.feature_refs,e.feature_endnotes,e.feature_citations,e.feature_floats,e.feature_defterm,e.graphics_collection]}(e,t);Zu("ZooFLMEnvironment.__init__(): calling super constructor ..."),(0,tr.__super__)(lf,"__init__")(e,n,r,new Wi,er({...t.flm_environment_options??{}}));const _=new No;e.parsing_state_event_handler=_,e.environment_get_located_error_message=Lo}))}});tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB");a("hoVWB");tr=a("hoVWB");var sf={};(0,tr.__nest__)(sf,"",dr);var cf="flm.flmrecomposer._recomposer",uf=(function(){var e=sf;(0,tr.__call__)(e.getLogger,e,cf)}(),(0,tr.__class__)("FLMNodesFlmRecomposer",[hn],{__module__:cf,recompose_specinfo_method:"recompose_flm_text",get recompose_flm_text(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=e;return(0,tr.__call__)(r.start,r,t)}()}))},rx_escape_chars_text:null,recompose_escape_chars_if_specials_disabled:!1,get escape_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"chars":t=_[a];break;case"parsing_state":r=_[a]}}}return(0,tr.__t__)(null===e.rx_escape_chars_text)||(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r.enable_specials))&&!(0,tr.__t__)(e.recompose_escape_chars_if_specials_disabled))||(0,tr.__t__)(r.in_math_mode)?t:function(){var r=e.rx_escape_chars_text;return(0,tr.__call__)(r.sub,r,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}return(0,tr.__add__)("\\",(_=e,(0,tr.__call__)(_.group,_)));var _}),t)}()}))},get subrecompose(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}return function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get _attempt_node_specinfo_recompose(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_specinfo"))&&(0,tr.__call__)(tr.hasattr,null,t.flm_specinfo,e.recompose_specinfo_method))&&(0,tr.__call__)((0,tr.__call__)(tr.getattr,null,t.flm_specinfo,e.recompose_specinfo_method),null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({node:t,recomposer:e},r)))}))},get recompose_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"chars":t=_[a];break;case"n":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";t=(0,tr.__call__)(tr.str,null,t);return function(){var n=e;return(0,tr.__call__)(n.escape_chars,n,t,r.parsing_state)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uf,"node_standard_process_macro"),null,e,t)}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uf,"node_standard_process_environment"),null,e,t)}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uf,"node_standard_process_specials"),null,e,t)}))},get visit_unknown_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;default:r[a]=_[a]}delete r.__kwargtrans__}}var i=function(){var n=e;return(0,tr.__call__)(n._attempt_node_specinfo_recompose,n,t,(0,tr.__kwargtrans__)(r))}();return(0,tr.__t__)(!1!==i)?i:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,uf,"visit_unknown_node"),null,e,t,(0,tr.__kwargtrans__)(r))}))}})),ff={};(0,tr.__nest__)(ff,"",dr);var df="flm.fragmentrenderer._base",hf=(function(){var e=ff;(0,tr.__call__)(e.getLogger,e,df)}(),(0,tr.__class__)("FragmentRenderer",[tr.object],{__module__:df,supports_delayed_render_markers:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"config":t=n[_]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,hf,"__init__"),null,e),(0,tr.__t__)(null!==t))for(var a=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1];(0,tr.__call__)(tr.setattr,null,e,l,s)}}))},get document_render_start(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"render_context":t=n[_]}}}}))},get document_render_finish(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"render_context":t=n[_]}}}}))},get render_fragment(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"flm_fragment":t=a[i];break;case"render_context":r=a[i];break;case"is_block_level":n=a[i]}}}try{return function(){var _,a=e;return(0,tr.__call__)(a.render_nodelist,a,t.nodes,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)),(0,tr.__kwargtrans__)({is_block_level:n}))}()}catch(e){if((0,tr.isinstance)(e,Dr)){var o=e;!function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t.nodes,(0,tr.__kwargtrans__)({what:t.what}))}();var l=o;throw l.__cause__=null,l}if((0,tr.isinstance)(e,tr.Exception)){o=e;throw e.__cause__=null,e}throw e}}))},get render_nodelist(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;case"render_context":r=a[i];break;case"is_block_level":n=a[i]}}}var o;if((0,tr.__t__)(null===t))throw(o=(0,tr.__call__)(tr.ValueError,null,"render_nodelist(): nodelist should not be None")).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_block_level"))))throw(o=(0,tr.__call__)(Dr,null,"The given node list was not parsed & produced by FLM; missing .flm_is_block_level attribute: {}".format((0,tr.__getslice__)((0,tr.__call__)(tr.repr,null,t),0,100,1)),(0,tr.__kwargtrans__)({pos:(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"pos"))?(0,tr.__call__)(tr.getattr,null,t,"pos"):null}))).__cause__=null,o;if((0,tr.__t__)(null===n))n=t.flm_is_block_level;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(n))&&t.flm_is_block_level))throw(o=(0,tr.__call__)(tr.ValueError,null,"Cannot render node list ‘{}’ in inline mode (not block level mode) as it contains block-level elements.".format(t))).__cause__=null,o;if((0,tr.__t__)(n)){if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_blocks")))var l=t.flm_blocks;else l=[t];return function(){var t=e;return(0,tr.__call__)(t.render_blocks,t,l,r)}()}return function(){var n=e;return(0,tr.__call__)(n.render_inline_content,n,t,r)}()}))},get render_node(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}r=function(){var t=e;return(0,tr.__call__)(t.ensure_render_context,t,r)}();try{if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_replace_by_node"))&&null!==t.flm_replace_by_node))return function(){var n=e;return(0,tr.__call__)(n.render_node,n,t.flm_replace_by_node,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Kr)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_chars,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Qr)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_comment,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,Jr)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_group,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,en)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_macro,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,tn)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_environment,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,rn)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_specials,n,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,nn)}()))return function(){var n=e;return(0,tr.__call__)(n.render_node_math,n,t,r)}();var i=(0,tr.__call__)(tr.ValueError,null,"Invalid node type: {}".format(t));throw i.__cause__=null,i}catch(i){if((0,tr.isinstance)(i,Dr)){var o=i;throw function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=o).__cause__=null,l}if((0,tr.isinstance)(i,tr.Exception)){o=i;var l,s=(0,tr.__call__)(Dr,null,(0,tr.__call__)(tr.str,null,o));throw function(){var e=s;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=s).__cause__=null,l}throw i}}))},get render_node_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_chars_value")))var i=t.flm_chars_value;else i=null;if((0,tr.__t__)(null===i))i=t.chars;return function(){var t=e;return(0,tr.__call__)(t.render_value,t,i,r)}()}))},get render_node_comment(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return""}))},get render_node_group(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n,_=e;return(0,tr.__call__)(_.render_nodelist,_,t.nodelist,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)))}()}))},get render_node_macro(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n,_=e;return(0,tr.__call__)(_.render_invocable_node,_,t,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)))}()}))},get render_node_environment(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n,_=e;return(0,tr.__call__)(_.render_invocable_node,_,t,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)))}()}))},get render_node_specials(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n,_=e;return(0,tr.__call__)(_.render_invocable_node,_,t,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)))}()}))},get render_invocable_node(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_specinfo")))||null===t.flm_specinfo))throw(i=(0,tr.__call__)(RuntimeError,null,"Node {} does not have the `flm_specinfo` attribute set".format(t))).__cause__=null,i;if((0,tr.__t__)(r.is_standalone_mode)&&(0,tr.__t__)(!(0,tr.__t__)(t.flm_specinfo.allowed_in_standalone_mode))){var i=(0,tr.__call__)(tr.ValueError,null,"Cannot render ‘{}’ in standalone mode.".format(function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()));throw i.__cause__=null,i}return function(){var n,_=e;return(0,tr.__call__)(_.render_invocable_node_call_render,_,t,t.flm_specinfo,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)))}()}))},get render_invocable_node_call_render(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"flm_specinfo":r=a[i];break;case"render_context":n=a[i]}}}if((0,tr.assert)(null!==n),(0,tr.__t__)(null===r)){var o=(0,tr.__call__)(tr.ValueError,null,"Cannot render node={} because specinfo is None!".format(t));throw o.__cause__=null,o}var l=function(){var e=n;return(0,tr.__call__)(e.get_is_delayed_render,e,t)}();if((0,tr.__t__)(l)){var s=n.is_first_pass,c=null;if((0,tr.__t__)(s)){!function(){var e=r;(0,tr.__call__)(e.prepare_delayed_render,e,t,n)}();c=function(){var r=n;return(0,tr.__call__)(r.register_delayed_render,r,t,e)}()}return(0,tr.__t__)(e.supports_delayed_render_markers)?function(){var r=e;return(0,tr.__call__)(r.render_delayed_marker,r,t,c,n)}():(0,tr.__t__)(s)?(function(){var e=r;(0,tr.__call__)(e.prepare_delayed_render,e,t,n)}(),function(){var r=e;return(0,tr.__call__)(r.render_delayed_dummy_placeholder,r,t,c,n)}()):((0,tr.assert)(!(0,tr.__t__)(n.is_first_pass)),function(){var e=n;return(0,tr.__call__)(e.get_delayed_render_content,e,t)}())}var u=function(){var e=r;return(0,tr.__call__)(e.render,e,t,n)}();return u}))},get render_node_math(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n,_=e;return(0,tr.__call__)(_.render_math_content,_,t.delimiters,t.nodelist,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)),(0,tr.__kwargtrans__)({displaytype:t.displaytype,target_id:null}))}()}))},get render_math_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_){var a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"nodelist":r=l[s];break;case"render_context":n=l[s];break;case"displaytype":_=l[s];break;case"environmentname":a=l[s];break;case"target_id":i=l[s]}}}var c=t,u=c[0],f=c[1];if((0,tr.__t__)(a))u="\\begin{}{}{}".format("{",a,"}"),f="\\end{}{}{}".format("{",a,"}");var d=function(){var t,a=e;return(0,tr.__call__)(a.render_verbatim,a,(0,tr.__add__)((0,tr.__add__)(u,(t=e,(0,tr.__call__)(t.recompose_latex,t,r))),f),(0,tr.__kwargtrans__)({render_context:n,annotations:["{}-math".format(_)],target_id:i,is_block_level:(0,tr.__eq__)(_,"display")}))}();return d}))},get recompose_latex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"node":t=n[_]}}}var a=function(){var e=(0,tr.__call__)(uf,null);return(0,tr.__call__)(e.recompose_flm_text,e,t)}();return a}))},get render_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"node_blocks":t=_[a];break;case"render_context":r=_[a]}}}for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,s,_n)))var c=function(){var t=e;return(0,tr.__call__)(t.render_build_paragraph,t,s,r)}();else c=function(){var t=e;return(0,tr.__call__)(t.render_node,t,s,r)}();!function(){var e=i;(0,tr.__call__)(e.append,e,c)}()}return function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,i,r)}()}))},get render_build_paragraph(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n.render_inline_content,n,t,r)}()}))},get render_inline_content(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n.render_join,n,function(){for(var n,_,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);n=void 0,_=void 0,_=a,(0,tr.__call__)(_.append,_,(n=e,(0,tr.__call__)(n.render_node,n,l,r)))}return a}(),r)}()}))},get render_join(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content_list":t=_[a];break;case"render_context":r=_[a]}}}return(0,tr.__call__)("".join,"",t)}))},get render_join_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content_list":t=_[a];break;case"render_context":r=_[a]}}}return(0,tr.__call__)("\n\n".join,"\n\n",function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)((0,tr.__t__)(null!==a)&&(0,tr.__call__)(tr.len,null,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,a))}return r}())}))},get render_semantic_span(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":t=a[i];break;case"role":r=a[i];break;case"render_context":n=a[i];break;case"annotations":a[i];break;case"target_id":a[i]}}}return t}))},get render_semantic_block(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":t=a[i];break;case"role":r=a[i];break;case"render_context":n=a[i];break;case"annotations":a[i];break;case"target_id":a[i]}}}return t}))},get replace_delayed_markers_with_final_values(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content":t=_[a];break;case"delayed_values":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Reimplement me!");throw i.__cause__=null,i}))},get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_context":t=_[a];break;case"annotations":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"debug_str":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"iter_items_nodelists":t=a[i];break;case"counter_formatter":r=a[i];break;case"render_context":n=a[i];break;case"target_id_generator":a[i];break;case"annotations":a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"heading_nodelist":t=_[a];break;case"render_context":r=_[a];break;case"heading_level":_[a];break;case"inline_heading":_[a];break;case"target_id":_[a];break;case"annotations":_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;case"render_context":r=_[a];break;case"is_block_level":_[a];break;case"annotations":_[a];break;case"target_id":_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":n=o[l];break;case"render_context":_=o[l];break;case"annotations":a=o[l]}}}var s=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_instance":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw i.__cause__=null,i}))},get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"graphics_resource":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw i.__cause__=null,i}))},get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":n=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw o.__cause__=null,o}))},get ensure_render_context(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"render_context":t=n[_]}}}return(0,tr.__t__)(t)||(0,tr.__call__)(br,null,(0,tr.__kwargtrans__)({fragment_renderer:e}))}))}})),pf={};t(pf,"__all__",(()=>Of)),t(pf,"escape",(()=>Ef)),t(pf,"_invalid_charrefs",(()=>Af)),t(pf,"_invalid_codepoints",(()=>Cf)),t(pf,"_replace_charref",(()=>Sf)),t(pf,"_charref",(()=>Tf)),t(pf,"unescape",(()=>Nf)),t(pf,"_html5",(()=>vf)),t(pf,"_re",(()=>Vn));tr=a("hoVWB");for(var gf=(0,(tr=a("hoVWB")).dict)({AElig:198,Aacute:193,Acirc:194,Agrave:192,Alpha:913,Aring:197,Atilde:195,Auml:196,Beta:914,Ccedil:199,Chi:935,Dagger:8225,Delta:916,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Epsilon:917,Eta:919,Euml:203,Gamma:915,Iacute:205,Icirc:206,Igrave:204,Iota:921,Iuml:207,Kappa:922,Lambda:923,Mu:924,Ntilde:209,Nu:925,OElig:338,Oacute:211,Ocirc:212,Ograve:210,Omega:937,Omicron:927,Oslash:216,Otilde:213,Ouml:214,Phi:934,Pi:928,Prime:8243,Psi:936,Rho:929,Scaron:352,Sigma:931,THORN:222,Tau:932,Theta:920,Uacute:218,Ucirc:219,Ugrave:217,Upsilon:933,Uuml:220,Xi:926,Yacute:221,Yuml:376,Zeta:918,aacute:225,acirc:226,acute:180,aelig:230,agrave:224,alefsym:8501,alpha:945,amp:38,and:8743,ang:8736,aring:229,asymp:8776,atilde:227,auml:228,bdquo:8222,beta:946,brvbar:166,bull:8226,cap:8745,ccedil:231,cedil:184,cent:162,chi:967,circ:710,clubs:9827,cong:8773,copy:169,crarr:8629,cup:8746,curren:164,dArr:8659,dagger:8224,darr:8595,deg:176,delta:948,diams:9830,divide:247,eacute:233,ecirc:234,egrave:232,empty:8709,emsp:8195,ensp:8194,epsilon:949,equiv:8801,eta:951,eth:240,euml:235,euro:8364,exist:8707,fnof:402,forall:8704,frac12:189,frac14:188,frac34:190,frasl:8260,gamma:947,ge:8805,gt:62,hArr:8660,harr:8596,hearts:9829,hellip:8230,iacute:237,icirc:238,iexcl:161,igrave:236,image:8465,infin:8734,int:8747,iota:953,iquest:191,isin:8712,iuml:239,kappa:954,lArr:8656,lambda:955,lang:9001,laquo:171,larr:8592,lceil:8968,ldquo:8220,le:8804,lfloor:8970,lowast:8727,loz:9674,lrm:8206,lsaquo:8249,lsquo:8216,lt:60,macr:175,mdash:8212,micro:181,middot:183,minus:8722,mu:956,nabla:8711,nbsp:160,ndash:8211,ne:8800,ni:8715,not:172,notin:8713,nsub:8836,ntilde:241,nu:957,oacute:243,ocirc:244,oelig:339,ograve:242,oline:8254,omega:969,omicron:959,oplus:8853,or:8744,ordf:170,ordm:186,oslash:248,otilde:245,otimes:8855,ouml:246,para:182,part:8706,permil:8240,perp:8869,phi:966,pi:960,piv:982,plusmn:177,pound:163,prime:8242,prod:8719,prop:8733,psi:968,quot:34,rArr:8658,radic:8730,rang:9002,raquo:187,rarr:8594,rceil:8969,rdquo:8221,real:8476,reg:174,rfloor:8971,rho:961,rlm:8207,rsaquo:8250,rsquo:8217,sbquo:8218,scaron:353,sdot:8901,sect:167,shy:173,sigma:963,sigmaf:962,sim:8764,spades:9824,sub:8834,sube:8838,sum:8721,sup:8835,sup1:185,sup2:178,sup3:179,supe:8839,szlig:223,tau:964,there4:8756,theta:952,thetasym:977,thinsp:8201,thorn:254,tilde:732,times:215,trade:8482,uArr:8657,uacute:250,uarr:8593,ucirc:251,ugrave:249,uml:168,upsih:978,upsilon:965,uuml:252,weierp:8472,xi:958,yacute:253,yen:165,yuml:255,zeta:950,zwj:8205,zwnj:8204}),vf=(0,tr.dict)({Aacute:"Á",aacute:"á","Aacute;":"Á","aacute;":"á","Abreve;":"Ă","abreve;":"ă","ac;":"∾","acd;":"∿","acE;":"∾̳",Acirc:"Â",acirc:"â","Acirc;":"Â","acirc;":"â",acute:"´","acute;":"´","Acy;":"А","acy;":"а",AElig:"Æ",aelig:"æ","AElig;":"Æ","aelig;":"æ","af;":"⁡","Afr;":"𝔄","afr;":"𝔞",Agrave:"À",agrave:"à","Agrave;":"À","agrave;":"à","alefsym;":"ℵ","aleph;":"ℵ","Alpha;":"Α","alpha;":"α","Amacr;":"Ā","amacr;":"ā","amalg;":"⨿",AMP:"&",amp:"&","AMP;":"&","amp;":"&","And;":"⩓","and;":"∧","andand;":"⩕","andd;":"⩜","andslope;":"⩘","andv;":"⩚","ang;":"∠","ange;":"⦤","angle;":"∠","angmsd;":"∡","angmsdaa;":"⦨","angmsdab;":"⦩","angmsdac;":"⦪","angmsdad;":"⦫","angmsdae;":"⦬","angmsdaf;":"⦭","angmsdag;":"⦮","angmsdah;":"⦯","angrt;":"∟","angrtvb;":"⊾","angrtvbd;":"⦝","angsph;":"∢","angst;":"Å","angzarr;":"⍼","Aogon;":"Ą","aogon;":"ą","Aopf;":"𝔸","aopf;":"𝕒","ap;":"≈","apacir;":"⩯","apE;":"⩰","ape;":"≊","apid;":"≋","apos;":"'","ApplyFunction;":"⁡","approx;":"≈","approxeq;":"≊",Aring:"Å",aring:"å","Aring;":"Å","aring;":"å","Ascr;":"𝒜","ascr;":"𝒶","Assign;":"≔","ast;":"*","asymp;":"≈","asympeq;":"≍",Atilde:"Ã",atilde:"ã","Atilde;":"Ã","atilde;":"ã",Auml:"Ä",auml:"ä","Auml;":"Ä","auml;":"ä","awconint;":"∳","awint;":"⨑","backcong;":"≌","backepsilon;":"϶","backprime;":"‵","backsim;":"∽","backsimeq;":"⋍","Backslash;":"∖","Barv;":"⫧","barvee;":"⊽","Barwed;":"⌆","barwed;":"⌅","barwedge;":"⌅","bbrk;":"⎵","bbrktbrk;":"⎶","bcong;":"≌","Bcy;":"Б","bcy;":"б","bdquo;":"„","becaus;":"∵","Because;":"∵","because;":"∵","bemptyv;":"⦰","bepsi;":"϶","bernou;":"ℬ","Bernoullis;":"ℬ","Beta;":"Β","beta;":"β","beth;":"ℶ","between;":"≬","Bfr;":"𝔅","bfr;":"𝔟","bigcap;":"⋂","bigcirc;":"◯","bigcup;":"⋃","bigodot;":"⨀","bigoplus;":"⨁","bigotimes;":"⨂","bigsqcup;":"⨆","bigstar;":"★","bigtriangledown;":"▽","bigtriangleup;":"△","biguplus;":"⨄","bigvee;":"⋁","bigwedge;":"⋀","bkarow;":"⤍","blacklozenge;":"⧫","blacksquare;":"▪","blacktriangle;":"▴","blacktriangledown;":"▾","blacktriangleleft;":"◂","blacktriangleright;":"▸","blank;":"␣","blk12;":"▒","blk14;":"░","blk34;":"▓","block;":"█","bne;":"=⃥","bnequiv;":"≡⃥","bNot;":"⫭","bnot;":"⌐","Bopf;":"𝔹","bopf;":"𝕓","bot;":"⊥","bottom;":"⊥","bowtie;":"⋈","boxbox;":"⧉","boxDL;":"╗","boxDl;":"╖","boxdL;":"╕","boxdl;":"┐","boxDR;":"╔","boxDr;":"╓","boxdR;":"╒","boxdr;":"┌","boxH;":"═","boxh;":"─","boxHD;":"╦","boxHd;":"╤","boxhD;":"╥","boxhd;":"┬","boxHU;":"╩","boxHu;":"╧","boxhU;":"╨","boxhu;":"┴","boxminus;":"⊟","boxplus;":"⊞","boxtimes;":"⊠","boxUL;":"╝","boxUl;":"╜","boxuL;":"╛","boxul;":"┘","boxUR;":"╚","boxUr;":"╙","boxuR;":"╘","boxur;":"└","boxV;":"║","boxv;":"│","boxVH;":"╬","boxVh;":"╫","boxvH;":"╪","boxvh;":"┼","boxVL;":"╣","boxVl;":"╢","boxvL;":"╡","boxvl;":"┤","boxVR;":"╠","boxVr;":"╟","boxvR;":"╞","boxvr;":"├","bprime;":"‵","Breve;":"˘","breve;":"˘",brvbar:"¦","brvbar;":"¦","Bscr;":"ℬ","bscr;":"𝒷","bsemi;":"⁏","bsim;":"∽","bsime;":"⋍","bsol;":"\\","bsolb;":"⧅","bsolhsub;":"⟈","bull;":"•","bullet;":"•","bump;":"≎","bumpE;":"⪮","bumpe;":"≏","Bumpeq;":"≎","bumpeq;":"≏","Cacute;":"Ć","cacute;":"ć","Cap;":"⋒","cap;":"∩","capand;":"⩄","capbrcup;":"⩉","capcap;":"⩋","capcup;":"⩇","capdot;":"⩀","CapitalDifferentialD;":"ⅅ","caps;":"∩︀","caret;":"⁁","caron;":"ˇ","Cayleys;":"ℭ","ccaps;":"⩍","Ccaron;":"Č","ccaron;":"č",Ccedil:"Ç",ccedil:"ç","Ccedil;":"Ç","ccedil;":"ç","Ccirc;":"Ĉ","ccirc;":"ĉ","Cconint;":"∰","ccups;":"⩌","ccupssm;":"⩐","Cdot;":"Ċ","cdot;":"ċ",cedil:"¸","cedil;":"¸","Cedilla;":"¸","cemptyv;":"⦲",cent:"¢","cent;":"¢","CenterDot;":"·","centerdot;":"·","Cfr;":"ℭ","cfr;":"𝔠","CHcy;":"Ч","chcy;":"ч","check;":"✓","checkmark;":"✓","Chi;":"Χ","chi;":"χ","cir;":"○","circ;":"ˆ","circeq;":"≗","circlearrowleft;":"↺","circlearrowright;":"↻","circledast;":"⊛","circledcirc;":"⊚","circleddash;":"⊝","CircleDot;":"⊙","circledR;":"®","circledS;":"Ⓢ","CircleMinus;":"⊖","CirclePlus;":"⊕","CircleTimes;":"⊗","cirE;":"⧃","cire;":"≗","cirfnint;":"⨐","cirmid;":"⫯","cirscir;":"⧂","ClockwiseContourIntegral;":"∲","CloseCurlyDoubleQuote;":"”","CloseCurlyQuote;":"’","clubs;":"♣","clubsuit;":"♣","Colon;":"∷","colon;":":","Colone;":"⩴","colone;":"≔","coloneq;":"≔","comma;":",","commat;":"@","comp;":"∁","compfn;":"∘","complement;":"∁","complexes;":"ℂ","cong;":"≅","congdot;":"⩭","Congruent;":"≡","Conint;":"∯","conint;":"∮","ContourIntegral;":"∮","Copf;":"ℂ","copf;":"𝕔","coprod;":"∐","Coproduct;":"∐",COPY:"©",copy:"©","COPY;":"©","copy;":"©","copysr;":"℗","CounterClockwiseContourIntegral;":"∳","crarr;":"↵","Cross;":"⨯","cross;":"✗","Cscr;":"𝒞","cscr;":"𝒸","csub;":"⫏","csube;":"⫑","csup;":"⫐","csupe;":"⫒","ctdot;":"⋯","cudarrl;":"⤸","cudarrr;":"⤵","cuepr;":"⋞","cuesc;":"⋟","cularr;":"↶","cularrp;":"⤽","Cup;":"⋓","cup;":"∪","cupbrcap;":"⩈","CupCap;":"≍","cupcap;":"⩆","cupcup;":"⩊","cupdot;":"⊍","cupor;":"⩅","cups;":"∪︀","curarr;":"↷","curarrm;":"⤼","curlyeqprec;":"⋞","curlyeqsucc;":"⋟","curlyvee;":"⋎","curlywedge;":"⋏",curren:"¤","curren;":"¤","curvearrowleft;":"↶","curvearrowright;":"↷","cuvee;":"⋎","cuwed;":"⋏","cwconint;":"∲","cwint;":"∱","cylcty;":"⌭","Dagger;":"‡","dagger;":"†","daleth;":"ℸ","Darr;":"↡","dArr;":"⇓","darr;":"↓","dash;":"‐","Dashv;":"⫤","dashv;":"⊣","dbkarow;":"⤏","dblac;":"˝","Dcaron;":"Ď","dcaron;":"ď","Dcy;":"Д","dcy;":"д","DD;":"ⅅ","dd;":"ⅆ","ddagger;":"‡","ddarr;":"⇊","DDotrahd;":"⤑","ddotseq;":"⩷",deg:"°","deg;":"°","Del;":"∇","Delta;":"Δ","delta;":"δ","demptyv;":"⦱","dfisht;":"⥿","Dfr;":"𝔇","dfr;":"𝔡","dHar;":"⥥","dharl;":"⇃","dharr;":"⇂","DiacriticalAcute;":"´","DiacriticalDot;":"˙","DiacriticalDoubleAcute;":"˝","DiacriticalGrave;":"`","DiacriticalTilde;":"˜","diam;":"⋄","Diamond;":"⋄","diamond;":"⋄","diamondsuit;":"♦","diams;":"♦","die;":"¨","DifferentialD;":"ⅆ","digamma;":"ϝ","disin;":"⋲","div;":"÷",divide:"÷","divide;":"÷","divideontimes;":"⋇","divonx;":"⋇","DJcy;":"Ђ","djcy;":"ђ","dlcorn;":"⌞","dlcrop;":"⌍","dollar;":"$","Dopf;":"𝔻","dopf;":"𝕕","Dot;":"¨","dot;":"˙","DotDot;":"⃜","doteq;":"≐","doteqdot;":"≑","DotEqual;":"≐","dotminus;":"∸","dotplus;":"∔","dotsquare;":"⊡","doublebarwedge;":"⌆","DoubleContourIntegral;":"∯","DoubleDot;":"¨","DoubleDownArrow;":"⇓","DoubleLeftArrow;":"⇐","DoubleLeftRightArrow;":"⇔","DoubleLeftTee;":"⫤","DoubleLongLeftArrow;":"⟸","DoubleLongLeftRightArrow;":"⟺","DoubleLongRightArrow;":"⟹","DoubleRightArrow;":"⇒","DoubleRightTee;":"⊨","DoubleUpArrow;":"⇑","DoubleUpDownArrow;":"⇕","DoubleVerticalBar;":"∥","DownArrow;":"↓","Downarrow;":"⇓","downarrow;":"↓","DownArrowBar;":"⤓","DownArrowUpArrow;":"⇵","DownBreve;":"̑","downdownarrows;":"⇊","downharpoonleft;":"⇃","downharpoonright;":"⇂","DownLeftRightVector;":"⥐","DownLeftTeeVector;":"⥞","DownLeftVector;":"↽","DownLeftVectorBar;":"⥖","DownRightTeeVector;":"⥟","DownRightVector;":"⇁","DownRightVectorBar;":"⥗","DownTee;":"⊤","DownTeeArrow;":"↧","drbkarow;":"⤐","drcorn;":"⌟","drcrop;":"⌌","Dscr;":"𝒟","dscr;":"𝒹","DScy;":"Ѕ","dscy;":"ѕ","dsol;":"⧶","Dstrok;":"Đ","dstrok;":"đ","dtdot;":"⋱","dtri;":"▿","dtrif;":"▾","duarr;":"⇵","duhar;":"⥯","dwangle;":"⦦","DZcy;":"Џ","dzcy;":"џ","dzigrarr;":"⟿",Eacute:"É",eacute:"é","Eacute;":"É","eacute;":"é","easter;":"⩮","Ecaron;":"Ě","ecaron;":"ě","ecir;":"≖",Ecirc:"Ê",ecirc:"ê","Ecirc;":"Ê","ecirc;":"ê","ecolon;":"≕","Ecy;":"Э","ecy;":"э","eDDot;":"⩷","Edot;":"Ė","eDot;":"≑","edot;":"ė","ee;":"ⅇ","efDot;":"≒","Efr;":"𝔈","efr;":"𝔢","eg;":"⪚",Egrave:"È",egrave:"è","Egrave;":"È","egrave;":"è","egs;":"⪖","egsdot;":"⪘","el;":"⪙","Element;":"∈","elinters;":"⏧","ell;":"ℓ","els;":"⪕","elsdot;":"⪗","Emacr;":"Ē","emacr;":"ē","empty;":"∅","emptyset;":"∅","EmptySmallSquare;":"◻","emptyv;":"∅","EmptyVerySmallSquare;":"▫","emsp13;":" ","emsp14;":" ","emsp;":" ","ENG;":"Ŋ","eng;":"ŋ","ensp;":" ","Eogon;":"Ę","eogon;":"ę","Eopf;":"𝔼","eopf;":"𝕖","epar;":"⋕","eparsl;":"⧣","eplus;":"⩱","epsi;":"ε","Epsilon;":"Ε","epsilon;":"ε","epsiv;":"ϵ","eqcirc;":"≖","eqcolon;":"≕","eqsim;":"≂","eqslantgtr;":"⪖","eqslantless;":"⪕","Equal;":"⩵","equals;":"=","EqualTilde;":"≂","equest;":"≟","Equilibrium;":"⇌","equiv;":"≡","equivDD;":"⩸","eqvparsl;":"⧥","erarr;":"⥱","erDot;":"≓","Escr;":"ℰ","escr;":"ℯ","esdot;":"≐","Esim;":"⩳","esim;":"≂","Eta;":"Η","eta;":"η",ETH:"Ð",eth:"ð","ETH;":"Ð","eth;":"ð",Euml:"Ë",euml:"ë","Euml;":"Ë","euml;":"ë","euro;":"€","excl;":"!","exist;":"∃","Exists;":"∃","expectation;":"ℰ","ExponentialE;":"ⅇ","exponentiale;":"ⅇ","fallingdotseq;":"≒","Fcy;":"Ф","fcy;":"ф","female;":"♀","ffilig;":"ﬃ","fflig;":"ﬀ","ffllig;":"ﬄ","Ffr;":"𝔉","ffr;":"𝔣","filig;":"ﬁ","FilledSmallSquare;":"◼","FilledVerySmallSquare;":"▪","fjlig;":"fj","flat;":"♭","fllig;":"ﬂ","fltns;":"▱","fnof;":"ƒ","Fopf;":"𝔽","fopf;":"𝕗","ForAll;":"∀","forall;":"∀","fork;":"⋔","forkv;":"⫙","Fouriertrf;":"ℱ","fpartint;":"⨍",frac12:"½","frac12;":"½","frac13;":"⅓",frac14:"¼","frac14;":"¼","frac15;":"⅕","frac16;":"⅙","frac18;":"⅛","frac23;":"⅔","frac25;":"⅖",frac34:"¾","frac34;":"¾","frac35;":"⅗","frac38;":"⅜","frac45;":"⅘","frac56;":"⅚","frac58;":"⅝","frac78;":"⅞","frasl;":"⁄","frown;":"⌢","Fscr;":"ℱ","fscr;":"𝒻","gacute;":"ǵ","Gamma;":"Γ","gamma;":"γ","Gammad;":"Ϝ","gammad;":"ϝ","gap;":"⪆","Gbreve;":"Ğ","gbreve;":"ğ","Gcedil;":"Ģ","Gcirc;":"Ĝ","gcirc;":"ĝ","Gcy;":"Г","gcy;":"г","Gdot;":"Ġ","gdot;":"ġ","gE;":"≧","ge;":"≥","gEl;":"⪌","gel;":"⋛","geq;":"≥","geqq;":"≧","geqslant;":"⩾","ges;":"⩾","gescc;":"⪩","gesdot;":"⪀","gesdoto;":"⪂","gesdotol;":"⪄","gesl;":"⋛︀","gesles;":"⪔","Gfr;":"𝔊","gfr;":"𝔤","Gg;":"⋙","gg;":"≫","ggg;":"⋙","gimel;":"ℷ","GJcy;":"Ѓ","gjcy;":"ѓ","gl;":"≷","gla;":"⪥","glE;":"⪒","glj;":"⪤","gnap;":"⪊","gnapprox;":"⪊","gnE;":"≩","gne;":"⪈","gneq;":"⪈","gneqq;":"≩","gnsim;":"⋧","Gopf;":"𝔾","gopf;":"𝕘","grave;":"`","GreaterEqual;":"≥","GreaterEqualLess;":"⋛","GreaterFullEqual;":"≧","GreaterGreater;":"⪢","GreaterLess;":"≷","GreaterSlantEqual;":"⩾","GreaterTilde;":"≳","Gscr;":"𝒢","gscr;":"ℊ","gsim;":"≳","gsime;":"⪎","gsiml;":"⪐",GT:">",gt:">","GT;":">","Gt;":"≫","gt;":">","gtcc;":"⪧","gtcir;":"⩺","gtdot;":"⋗","gtlPar;":"⦕","gtquest;":"⩼","gtrapprox;":"⪆","gtrarr;":"⥸","gtrdot;":"⋗","gtreqless;":"⋛","gtreqqless;":"⪌","gtrless;":"≷","gtrsim;":"≳","gvertneqq;":"≩︀","gvnE;":"≩︀","Hacek;":"ˇ","hairsp;":" ","half;":"½","hamilt;":"ℋ","HARDcy;":"Ъ","hardcy;":"ъ","hArr;":"⇔","harr;":"↔","harrcir;":"⥈","harrw;":"↭","Hat;":"^","hbar;":"ℏ","Hcirc;":"Ĥ","hcirc;":"ĥ","hearts;":"♥","heartsuit;":"♥","hellip;":"…","hercon;":"⊹","Hfr;":"ℌ","hfr;":"𝔥","HilbertSpace;":"ℋ","hksearow;":"⤥","hkswarow;":"⤦","hoarr;":"⇿","homtht;":"∻","hookleftarrow;":"↩","hookrightarrow;":"↪","Hopf;":"ℍ","hopf;":"𝕙","horbar;":"―","HorizontalLine;":"─","Hscr;":"ℋ","hscr;":"𝒽","hslash;":"ℏ","Hstrok;":"Ħ","hstrok;":"ħ","HumpDownHump;":"≎","HumpEqual;":"≏","hybull;":"⁃","hyphen;":"‐",Iacute:"Í",iacute:"í","Iacute;":"Í","iacute;":"í","ic;":"⁣",Icirc:"Î",icirc:"î","Icirc;":"Î","icirc;":"î","Icy;":"И","icy;":"и","Idot;":"İ","IEcy;":"Е","iecy;":"е",iexcl:"¡","iexcl;":"¡","iff;":"⇔","Ifr;":"ℑ","ifr;":"𝔦",Igrave:"Ì",igrave:"ì","Igrave;":"Ì","igrave;":"ì","ii;":"ⅈ","iiiint;":"⨌","iiint;":"∭","iinfin;":"⧜","iiota;":"℩","IJlig;":"Ĳ","ijlig;":"ĳ","Im;":"ℑ","Imacr;":"Ī","imacr;":"ī","image;":"ℑ","ImaginaryI;":"ⅈ","imagline;":"ℐ","imagpart;":"ℑ","imath;":"ı","imof;":"⊷","imped;":"Ƶ","Implies;":"⇒","in;":"∈","incare;":"℅","infin;":"∞","infintie;":"⧝","inodot;":"ı","Int;":"∬","int;":"∫","intcal;":"⊺","integers;":"ℤ","Integral;":"∫","intercal;":"⊺","Intersection;":"⋂","intlarhk;":"⨗","intprod;":"⨼","InvisibleComma;":"⁣","InvisibleTimes;":"⁢","IOcy;":"Ё","iocy;":"ё","Iogon;":"Į","iogon;":"į","Iopf;":"𝕀","iopf;":"𝕚","Iota;":"Ι","iota;":"ι","iprod;":"⨼",iquest:"¿","iquest;":"¿","Iscr;":"ℐ","iscr;":"𝒾","isin;":"∈","isindot;":"⋵","isinE;":"⋹","isins;":"⋴","isinsv;":"⋳","isinv;":"∈","it;":"⁢","Itilde;":"Ĩ","itilde;":"ĩ","Iukcy;":"І","iukcy;":"і",Iuml:"Ï",iuml:"ï","Iuml;":"Ï","iuml;":"ï","Jcirc;":"Ĵ","jcirc;":"ĵ","Jcy;":"Й","jcy;":"й","Jfr;":"𝔍","jfr;":"𝔧","jmath;":"ȷ","Jopf;":"𝕁","jopf;":"𝕛","Jscr;":"𝒥","jscr;":"𝒿","Jsercy;":"Ј","jsercy;":"ј","Jukcy;":"Є","jukcy;":"є","Kappa;":"Κ","kappa;":"κ","kappav;":"ϰ","Kcedil;":"Ķ","kcedil;":"ķ","Kcy;":"К","kcy;":"к","Kfr;":"𝔎","kfr;":"𝔨","kgreen;":"ĸ","KHcy;":"Х","khcy;":"х","KJcy;":"Ќ","kjcy;":"ќ","Kopf;":"𝕂","kopf;":"𝕜","Kscr;":"𝒦","kscr;":"𝓀","lAarr;":"⇚","Lacute;":"Ĺ","lacute;":"ĺ","laemptyv;":"⦴","lagran;":"ℒ","Lambda;":"Λ","lambda;":"λ","Lang;":"⟪","lang;":"⟨","langd;":"⦑","langle;":"⟨","lap;":"⪅","Laplacetrf;":"ℒ",laquo:"«","laquo;":"«","Larr;":"↞","lArr;":"⇐","larr;":"←","larrb;":"⇤","larrbfs;":"⤟","larrfs;":"⤝","larrhk;":"↩","larrlp;":"↫","larrpl;":"⤹","larrsim;":"⥳","larrtl;":"↢","lat;":"⪫","lAtail;":"⤛","latail;":"⤙","late;":"⪭","lates;":"⪭︀","lBarr;":"⤎","lbarr;":"⤌","lbbrk;":"❲","lbrace;":"{","lbrack;":"[","lbrke;":"⦋","lbrksld;":"⦏","lbrkslu;":"⦍","Lcaron;":"Ľ","lcaron;":"ľ","Lcedil;":"Ļ","lcedil;":"ļ","lceil;":"⌈","lcub;":"{","Lcy;":"Л","lcy;":"л","ldca;":"⤶","ldquo;":"“","ldquor;":"„","ldrdhar;":"⥧","ldrushar;":"⥋","ldsh;":"↲","lE;":"≦","le;":"≤","LeftAngleBracket;":"⟨","LeftArrow;":"←","Leftarrow;":"⇐","leftarrow;":"←","LeftArrowBar;":"⇤","LeftArrowRightArrow;":"⇆","leftarrowtail;":"↢","LeftCeiling;":"⌈","LeftDoubleBracket;":"⟦","LeftDownTeeVector;":"⥡","LeftDownVector;":"⇃","LeftDownVectorBar;":"⥙","LeftFloor;":"⌊","leftharpoondown;":"↽","leftharpoonup;":"↼","leftleftarrows;":"⇇","LeftRightArrow;":"↔","Leftrightarrow;":"⇔","leftrightarrow;":"↔","leftrightarrows;":"⇆","leftrightharpoons;":"⇋","leftrightsquigarrow;":"↭","LeftRightVector;":"⥎","LeftTee;":"⊣","LeftTeeArrow;":"↤","LeftTeeVector;":"⥚","leftthreetimes;":"⋋","LeftTriangle;":"⊲","LeftTriangleBar;":"⧏","LeftTriangleEqual;":"⊴","LeftUpDownVector;":"⥑","LeftUpTeeVector;":"⥠","LeftUpVector;":"↿","LeftUpVectorBar;":"⥘","LeftVector;":"↼","LeftVectorBar;":"⥒","lEg;":"⪋","leg;":"⋚","leq;":"≤","leqq;":"≦","leqslant;":"⩽","les;":"⩽","lescc;":"⪨","lesdot;":"⩿","lesdoto;":"⪁","lesdotor;":"⪃","lesg;":"⋚︀","lesges;":"⪓","lessapprox;":"⪅","lessdot;":"⋖","lesseqgtr;":"⋚","lesseqqgtr;":"⪋","LessEqualGreater;":"⋚","LessFullEqual;":"≦","LessGreater;":"≶","lessgtr;":"≶","LessLess;":"⪡","lesssim;":"≲","LessSlantEqual;":"⩽","LessTilde;":"≲","lfisht;":"⥼","lfloor;":"⌊","Lfr;":"𝔏","lfr;":"𝔩","lg;":"≶","lgE;":"⪑","lHar;":"⥢","lhard;":"↽","lharu;":"↼","lharul;":"⥪","lhblk;":"▄","LJcy;":"Љ","ljcy;":"љ","Ll;":"⋘","ll;":"≪","llarr;":"⇇","llcorner;":"⌞","Lleftarrow;":"⇚","llhard;":"⥫","lltri;":"◺","Lmidot;":"Ŀ","lmidot;":"ŀ","lmoust;":"⎰","lmoustache;":"⎰","lnap;":"⪉","lnapprox;":"⪉","lnE;":"≨","lne;":"⪇","lneq;":"⪇","lneqq;":"≨","lnsim;":"⋦","loang;":"⟬","loarr;":"⇽","lobrk;":"⟦","LongLeftArrow;":"⟵","Longleftarrow;":"⟸","longleftarrow;":"⟵","LongLeftRightArrow;":"⟷","Longleftrightarrow;":"⟺","longleftrightarrow;":"⟷","longmapsto;":"⟼","LongRightArrow;":"⟶","Longrightarrow;":"⟹","longrightarrow;":"⟶","looparrowleft;":"↫","looparrowright;":"↬","lopar;":"⦅","Lopf;":"𝕃","lopf;":"𝕝","loplus;":"⨭","lotimes;":"⨴","lowast;":"∗","lowbar;":"_","LowerLeftArrow;":"↙","LowerRightArrow;":"↘","loz;":"◊","lozenge;":"◊","lozf;":"⧫","lpar;":"(","lparlt;":"⦓","lrarr;":"⇆","lrcorner;":"⌟","lrhar;":"⇋","lrhard;":"⥭","lrm;":"‎","lrtri;":"⊿","lsaquo;":"‹","Lscr;":"ℒ","lscr;":"𝓁","Lsh;":"↰","lsh;":"↰","lsim;":"≲","lsime;":"⪍","lsimg;":"⪏","lsqb;":"[","lsquo;":"‘","lsquor;":"‚","Lstrok;":"Ł","lstrok;":"ł",LT:"<",lt:"<","LT;":"<","Lt;":"≪","lt;":"<","ltcc;":"⪦","ltcir;":"⩹","ltdot;":"⋖","lthree;":"⋋","ltimes;":"⋉","ltlarr;":"⥶","ltquest;":"⩻","ltri;":"◃","ltrie;":"⊴","ltrif;":"◂","ltrPar;":"⦖","lurdshar;":"⥊","luruhar;":"⥦","lvertneqq;":"≨︀","lvnE;":"≨︀",macr:"¯","macr;":"¯","male;":"♂","malt;":"✠","maltese;":"✠","Map;":"⤅","map;":"↦","mapsto;":"↦","mapstodown;":"↧","mapstoleft;":"↤","mapstoup;":"↥","marker;":"▮","mcomma;":"⨩","Mcy;":"М","mcy;":"м","mdash;":"—","mDDot;":"∺","measuredangle;":"∡","MediumSpace;":" ","Mellintrf;":"ℳ","Mfr;":"𝔐","mfr;":"𝔪","mho;":"℧",micro:"µ","micro;":"µ","mid;":"∣","midast;":"*","midcir;":"⫰",middot:"·","middot;":"·","minus;":"−","minusb;":"⊟","minusd;":"∸","minusdu;":"⨪","MinusPlus;":"∓","mlcp;":"⫛","mldr;":"…","mnplus;":"∓","models;":"⊧","Mopf;":"𝕄","mopf;":"𝕞","mp;":"∓","Mscr;":"ℳ","mscr;":"𝓂","mstpos;":"∾","Mu;":"Μ","mu;":"μ","multimap;":"⊸","mumap;":"⊸","nabla;":"∇","Nacute;":"Ń","nacute;":"ń","nang;":"∠⃒","nap;":"≉","napE;":"⩰̸","napid;":"≋̸","napos;":"ŉ","napprox;":"≉","natur;":"♮","natural;":"♮","naturals;":"ℕ",nbsp:" ","nbsp;":" ","nbump;":"≎̸","nbumpe;":"≏̸","ncap;":"⩃","Ncaron;":"Ň","ncaron;":"ň","Ncedil;":"Ņ","ncedil;":"ņ","ncong;":"≇","ncongdot;":"⩭̸","ncup;":"⩂","Ncy;":"Н","ncy;":"н","ndash;":"–","ne;":"≠","nearhk;":"⤤","neArr;":"⇗","nearr;":"↗","nearrow;":"↗","nedot;":"≐̸","NegativeMediumSpace;":"​","NegativeThickSpace;":"​","NegativeThinSpace;":"​","NegativeVeryThinSpace;":"​","nequiv;":"≢","nesear;":"⤨","nesim;":"≂̸","NestedGreaterGreater;":"≫","NestedLessLess;":"≪","NewLine;":"\n","nexist;":"∄","nexists;":"∄","Nfr;":"𝔑","nfr;":"𝔫","ngE;":"≧̸","nge;":"≱","ngeq;":"≱","ngeqq;":"≧̸","ngeqslant;":"⩾̸","nges;":"⩾̸","nGg;":"⋙̸","ngsim;":"≵","nGt;":"≫⃒","ngt;":"≯","ngtr;":"≯","nGtv;":"≫̸","nhArr;":"⇎","nharr;":"↮","nhpar;":"⫲","ni;":"∋","nis;":"⋼","nisd;":"⋺","niv;":"∋","NJcy;":"Њ","njcy;":"њ","nlArr;":"⇍","nlarr;":"↚","nldr;":"‥","nlE;":"≦̸","nle;":"≰","nLeftarrow;":"⇍","nleftarrow;":"↚","nLeftrightarrow;":"⇎","nleftrightarrow;":"↮","nleq;":"≰","nleqq;":"≦̸","nleqslant;":"⩽̸","nles;":"⩽̸","nless;":"≮","nLl;":"⋘̸","nlsim;":"≴","nLt;":"≪⃒","nlt;":"≮","nltri;":"⋪","nltrie;":"⋬","nLtv;":"≪̸","nmid;":"∤","NoBreak;":"⁠","NonBreakingSpace;":" ","Nopf;":"ℕ","nopf;":"𝕟",not:"¬","Not;":"⫬","not;":"¬","NotCongruent;":"≢","NotCupCap;":"≭","NotDoubleVerticalBar;":"∦","NotElement;":"∉","NotEqual;":"≠","NotEqualTilde;":"≂̸","NotExists;":"∄","NotGreater;":"≯","NotGreaterEqual;":"≱","NotGreaterFullEqual;":"≧̸","NotGreaterGreater;":"≫̸","NotGreaterLess;":"≹","NotGreaterSlantEqual;":"⩾̸","NotGreaterTilde;":"≵","NotHumpDownHump;":"≎̸","NotHumpEqual;":"≏̸","notin;":"∉","notindot;":"⋵̸","notinE;":"⋹̸","notinva;":"∉","notinvb;":"⋷","notinvc;":"⋶","NotLeftTriangle;":"⋪","NotLeftTriangleBar;":"⧏̸","NotLeftTriangleEqual;":"⋬","NotLess;":"≮","NotLessEqual;":"≰","NotLessGreater;":"≸","NotLessLess;":"≪̸","NotLessSlantEqual;":"⩽̸","NotLessTilde;":"≴","NotNestedGreaterGreater;":"⪢̸","NotNestedLessLess;":"⪡̸","notni;":"∌","notniva;":"∌","notnivb;":"⋾","notnivc;":"⋽","NotPrecedes;":"⊀","NotPrecedesEqual;":"⪯̸","NotPrecedesSlantEqual;":"⋠","NotReverseElement;":"∌","NotRightTriangle;":"⋫","NotRightTriangleBar;":"⧐̸","NotRightTriangleEqual;":"⋭","NotSquareSubset;":"⊏̸","NotSquareSubsetEqual;":"⋢","NotSquareSuperset;":"⊐̸","NotSquareSupersetEqual;":"⋣","NotSubset;":"⊂⃒","NotSubsetEqual;":"⊈","NotSucceeds;":"⊁","NotSucceedsEqual;":"⪰̸","NotSucceedsSlantEqual;":"⋡","NotSucceedsTilde;":"≿̸","NotSuperset;":"⊃⃒","NotSupersetEqual;":"⊉","NotTilde;":"≁","NotTildeEqual;":"≄","NotTildeFullEqual;":"≇","NotTildeTilde;":"≉","NotVerticalBar;":"∤","npar;":"∦","nparallel;":"∦","nparsl;":"⫽⃥","npart;":"∂̸","npolint;":"⨔","npr;":"⊀","nprcue;":"⋠","npre;":"⪯̸","nprec;":"⊀","npreceq;":"⪯̸","nrArr;":"⇏","nrarr;":"↛","nrarrc;":"⤳̸","nrarrw;":"↝̸","nRightarrow;":"⇏","nrightarrow;":"↛","nrtri;":"⋫","nrtrie;":"⋭","nsc;":"⊁","nsccue;":"⋡","nsce;":"⪰̸","Nscr;":"𝒩","nscr;":"𝓃","nshortmid;":"∤","nshortparallel;":"∦","nsim;":"≁","nsime;":"≄","nsimeq;":"≄","nsmid;":"∤","nspar;":"∦","nsqsube;":"⋢","nsqsupe;":"⋣","nsub;":"⊄","nsubE;":"⫅̸","nsube;":"⊈","nsubset;":"⊂⃒","nsubseteq;":"⊈","nsubseteqq;":"⫅̸","nsucc;":"⊁","nsucceq;":"⪰̸","nsup;":"⊅","nsupE;":"⫆̸","nsupe;":"⊉","nsupset;":"⊃⃒","nsupseteq;":"⊉","nsupseteqq;":"⫆̸","ntgl;":"≹",Ntilde:"Ñ",ntilde:"ñ","Ntilde;":"Ñ","ntilde;":"ñ","ntlg;":"≸","ntriangleleft;":"⋪","ntrianglelefteq;":"⋬","ntriangleright;":"⋫","ntrianglerighteq;":"⋭","Nu;":"Ν","nu;":"ν","num;":"#","numero;":"№","numsp;":" ","nvap;":"≍⃒","nVDash;":"⊯","nVdash;":"⊮","nvDash;":"⊭","nvdash;":"⊬","nvge;":"≥⃒","nvgt;":">⃒","nvHarr;":"⤄","nvinfin;":"⧞","nvlArr;":"⤂","nvle;":"≤⃒","nvlt;":"<⃒","nvltrie;":"⊴⃒","nvrArr;":"⤃","nvrtrie;":"⊵⃒","nvsim;":"∼⃒","nwarhk;":"⤣","nwArr;":"⇖","nwarr;":"↖","nwarrow;":"↖","nwnear;":"⤧",Oacute:"Ó",oacute:"ó","Oacute;":"Ó","oacute;":"ó","oast;":"⊛","ocir;":"⊚",Ocirc:"Ô",ocirc:"ô","Ocirc;":"Ô","ocirc;":"ô","Ocy;":"О","ocy;":"о","odash;":"⊝","Odblac;":"Ő","odblac;":"ő","odiv;":"⨸","odot;":"⊙","odsold;":"⦼","OElig;":"Œ","oelig;":"œ","ofcir;":"⦿","Ofr;":"𝔒","ofr;":"𝔬","ogon;":"˛",Ograve:"Ò",ograve:"ò","Ograve;":"Ò","ograve;":"ò","ogt;":"⧁","ohbar;":"⦵","ohm;":"Ω","oint;":"∮","olarr;":"↺","olcir;":"⦾","olcross;":"⦻","oline;":"‾","olt;":"⧀","Omacr;":"Ō","omacr;":"ō","Omega;":"Ω","omega;":"ω","Omicron;":"Ο","omicron;":"ο","omid;":"⦶","ominus;":"⊖","Oopf;":"𝕆","oopf;":"𝕠","opar;":"⦷","OpenCurlyDoubleQuote;":"“","OpenCurlyQuote;":"‘","operp;":"⦹","oplus;":"⊕","Or;":"⩔","or;":"∨","orarr;":"↻","ord;":"⩝","order;":"ℴ","orderof;":"ℴ",ordf:"ª","ordf;":"ª",ordm:"º","ordm;":"º","origof;":"⊶","oror;":"⩖","orslope;":"⩗","orv;":"⩛","oS;":"Ⓢ","Oscr;":"𝒪","oscr;":"ℴ",Oslash:"Ø",oslash:"ø","Oslash;":"Ø","oslash;":"ø","osol;":"⊘",Otilde:"Õ",otilde:"õ","Otilde;":"Õ","otilde;":"õ","Otimes;":"⨷","otimes;":"⊗","otimesas;":"⨶",Ouml:"Ö",ouml:"ö","Ouml;":"Ö","ouml;":"ö","ovbar;":"⌽","OverBar;":"‾","OverBrace;":"⏞","OverBracket;":"⎴","OverParenthesis;":"⏜","par;":"∥",para:"¶","para;":"¶","parallel;":"∥","parsim;":"⫳","parsl;":"⫽","part;":"∂","PartialD;":"∂","Pcy;":"П","pcy;":"п","percnt;":"%","period;":".","permil;":"‰","perp;":"⊥","pertenk;":"‱","Pfr;":"𝔓","pfr;":"𝔭","Phi;":"Φ","phi;":"φ","phiv;":"ϕ","phmmat;":"ℳ","phone;":"☎","Pi;":"Π","pi;":"π","pitchfork;":"⋔","piv;":"ϖ","planck;":"ℏ","planckh;":"ℎ","plankv;":"ℏ","plus;":"+","plusacir;":"⨣","plusb;":"⊞","pluscir;":"⨢","plusdo;":"∔","plusdu;":"⨥","pluse;":"⩲","PlusMinus;":"±",plusmn:"±","plusmn;":"±","plussim;":"⨦","plustwo;":"⨧","pm;":"±","Poincareplane;":"ℌ","pointint;":"⨕","Popf;":"ℙ","popf;":"𝕡",pound:"£","pound;":"£","Pr;":"⪻","pr;":"≺","prap;":"⪷","prcue;":"≼","prE;":"⪳","pre;":"⪯","prec;":"≺","precapprox;":"⪷","preccurlyeq;":"≼","Precedes;":"≺","PrecedesEqual;":"⪯","PrecedesSlantEqual;":"≼","PrecedesTilde;":"≾","preceq;":"⪯","precnapprox;":"⪹","precneqq;":"⪵","precnsim;":"⋨","precsim;":"≾","Prime;":"″","prime;":"′","primes;":"ℙ","prnap;":"⪹","prnE;":"⪵","prnsim;":"⋨","prod;":"∏","Product;":"∏","profalar;":"⌮","profline;":"⌒","profsurf;":"⌓","prop;":"∝","Proportion;":"∷","Proportional;":"∝","propto;":"∝","prsim;":"≾","prurel;":"⊰","Pscr;":"𝒫","pscr;":"𝓅","Psi;":"Ψ","psi;":"ψ","puncsp;":" ","Qfr;":"𝔔","qfr;":"𝔮","qint;":"⨌","Qopf;":"ℚ","qopf;":"𝕢","qprime;":"⁗","Qscr;":"𝒬","qscr;":"𝓆","quaternions;":"ℍ","quatint;":"⨖","quest;":"?","questeq;":"≟",QUOT:'"',quot:'"',"QUOT;":'"',"quot;":'"',"rAarr;":"⇛","race;":"∽̱","Racute;":"Ŕ","racute;":"ŕ","radic;":"√","raemptyv;":"⦳","Rang;":"⟫","rang;":"⟩","rangd;":"⦒","range;":"⦥","rangle;":"⟩",raquo:"»","raquo;":"»","Rarr;":"↠","rArr;":"⇒","rarr;":"→","rarrap;":"⥵","rarrb;":"⇥","rarrbfs;":"⤠","rarrc;":"⤳","rarrfs;":"⤞","rarrhk;":"↪","rarrlp;":"↬","rarrpl;":"⥅","rarrsim;":"⥴","Rarrtl;":"⤖","rarrtl;":"↣","rarrw;":"↝","rAtail;":"⤜","ratail;":"⤚","ratio;":"∶","rationals;":"ℚ","RBarr;":"⤐","rBarr;":"⤏","rbarr;":"⤍","rbbrk;":"❳","rbrace;":"}","rbrack;":"]","rbrke;":"⦌","rbrksld;":"⦎","rbrkslu;":"⦐","Rcaron;":"Ř","rcaron;":"ř","Rcedil;":"Ŗ","rcedil;":"ŗ","rceil;":"⌉","rcub;":"}","Rcy;":"Р","rcy;":"р","rdca;":"⤷","rdldhar;":"⥩","rdquo;":"”","rdquor;":"”","rdsh;":"↳","Re;":"ℜ","real;":"ℜ","realine;":"ℛ","realpart;":"ℜ","reals;":"ℝ","rect;":"▭",REG:"®",reg:"®","REG;":"®","reg;":"®","ReverseElement;":"∋","ReverseEquilibrium;":"⇋","ReverseUpEquilibrium;":"⥯","rfisht;":"⥽","rfloor;":"⌋","Rfr;":"ℜ","rfr;":"𝔯","rHar;":"⥤","rhard;":"⇁","rharu;":"⇀","rharul;":"⥬","Rho;":"Ρ","rho;":"ρ","rhov;":"ϱ","RightAngleBracket;":"⟩","RightArrow;":"→","Rightarrow;":"⇒","rightarrow;":"→","RightArrowBar;":"⇥","RightArrowLeftArrow;":"⇄","rightarrowtail;":"↣","RightCeiling;":"⌉","RightDoubleBracket;":"⟧","RightDownTeeVector;":"⥝","RightDownVector;":"⇂","RightDownVectorBar;":"⥕","RightFloor;":"⌋","rightharpoondown;":"⇁","rightharpoonup;":"⇀","rightleftarrows;":"⇄","rightleftharpoons;":"⇌","rightrightarrows;":"⇉","rightsquigarrow;":"↝","RightTee;":"⊢","RightTeeArrow;":"↦","RightTeeVector;":"⥛","rightthreetimes;":"⋌","RightTriangle;":"⊳","RightTriangleBar;":"⧐","RightTriangleEqual;":"⊵","RightUpDownVector;":"⥏","RightUpTeeVector;":"⥜","RightUpVector;":"↾","RightUpVectorBar;":"⥔","RightVector;":"⇀","RightVectorBar;":"⥓","ring;":"˚","risingdotseq;":"≓","rlarr;":"⇄","rlhar;":"⇌","rlm;":"‏","rmoust;":"⎱","rmoustache;":"⎱","rnmid;":"⫮","roang;":"⟭","roarr;":"⇾","robrk;":"⟧","ropar;":"⦆","Ropf;":"ℝ","ropf;":"𝕣","roplus;":"⨮","rotimes;":"⨵","RoundImplies;":"⥰","rpar;":")","rpargt;":"⦔","rppolint;":"⨒","rrarr;":"⇉","Rrightarrow;":"⇛","rsaquo;":"›","Rscr;":"ℛ","rscr;":"𝓇","Rsh;":"↱","rsh;":"↱","rsqb;":"]","rsquo;":"’","rsquor;":"’","rthree;":"⋌","rtimes;":"⋊","rtri;":"▹","rtrie;":"⊵","rtrif;":"▸","rtriltri;":"⧎","RuleDelayed;":"⧴","ruluhar;":"⥨","rx;":"℞","Sacute;":"Ś","sacute;":"ś","sbquo;":"‚","Sc;":"⪼","sc;":"≻","scap;":"⪸","Scaron;":"Š","scaron;":"š","sccue;":"≽","scE;":"⪴","sce;":"⪰","Scedil;":"Ş","scedil;":"ş","Scirc;":"Ŝ","scirc;":"ŝ","scnap;":"⪺","scnE;":"⪶","scnsim;":"⋩","scpolint;":"⨓","scsim;":"≿","Scy;":"С","scy;":"с","sdot;":"⋅","sdotb;":"⊡","sdote;":"⩦","searhk;":"⤥","seArr;":"⇘","searr;":"↘","searrow;":"↘",sect:"§","sect;":"§","semi;":";","seswar;":"⤩","setminus;":"∖","setmn;":"∖","sext;":"✶","Sfr;":"𝔖","sfr;":"𝔰","sfrown;":"⌢","sharp;":"♯","SHCHcy;":"Щ","shchcy;":"щ","SHcy;":"Ш","shcy;":"ш","ShortDownArrow;":"↓","ShortLeftArrow;":"←","shortmid;":"∣","shortparallel;":"∥","ShortRightArrow;":"→","ShortUpArrow;":"↑",shy:"­","shy;":"­","Sigma;":"Σ","sigma;":"σ","sigmaf;":"ς","sigmav;":"ς","sim;":"∼","simdot;":"⩪","sime;":"≃","simeq;":"≃","simg;":"⪞","simgE;":"⪠","siml;":"⪝","simlE;":"⪟","simne;":"≆","simplus;":"⨤","simrarr;":"⥲","slarr;":"←","SmallCircle;":"∘","smallsetminus;":"∖","smashp;":"⨳","smeparsl;":"⧤","smid;":"∣","smile;":"⌣","smt;":"⪪","smte;":"⪬","smtes;":"⪬︀","SOFTcy;":"Ь","softcy;":"ь","sol;":"/","solb;":"⧄","solbar;":"⌿","Sopf;":"𝕊","sopf;":"𝕤","spades;":"♠","spadesuit;":"♠","spar;":"∥","sqcap;":"⊓","sqcaps;":"⊓︀","sqcup;":"⊔","sqcups;":"⊔︀","Sqrt;":"√","sqsub;":"⊏","sqsube;":"⊑","sqsubset;":"⊏","sqsubseteq;":"⊑","sqsup;":"⊐","sqsupe;":"⊒","sqsupset;":"⊐","sqsupseteq;":"⊒","squ;":"□","Square;":"□","square;":"□","SquareIntersection;":"⊓","SquareSubset;":"⊏","SquareSubsetEqual;":"⊑","SquareSuperset;":"⊐","SquareSupersetEqual;":"⊒","SquareUnion;":"⊔","squarf;":"▪","squf;":"▪","srarr;":"→","Sscr;":"𝒮","sscr;":"𝓈","ssetmn;":"∖","ssmile;":"⌣","sstarf;":"⋆","Star;":"⋆","star;":"☆","starf;":"★","straightepsilon;":"ϵ","straightphi;":"ϕ","strns;":"¯","Sub;":"⋐","sub;":"⊂","subdot;":"⪽","subE;":"⫅","sube;":"⊆","subedot;":"⫃","submult;":"⫁","subnE;":"⫋","subne;":"⊊","subplus;":"⪿","subrarr;":"⥹","Subset;":"⋐","subset;":"⊂","subseteq;":"⊆","subseteqq;":"⫅","SubsetEqual;":"⊆","subsetneq;":"⊊","subsetneqq;":"⫋","subsim;":"⫇","subsub;":"⫕","subsup;":"⫓","succ;":"≻","succapprox;":"⪸","succcurlyeq;":"≽","Succeeds;":"≻","SucceedsEqual;":"⪰","SucceedsSlantEqual;":"≽","SucceedsTilde;":"≿","succeq;":"⪰","succnapprox;":"⪺","succneqq;":"⪶","succnsim;":"⋩","succsim;":"≿","SuchThat;":"∋","Sum;":"∑","sum;":"∑","sung;":"♪",sup1:"¹","sup1;":"¹",sup2:"²","sup2;":"²",sup3:"³","sup3;":"³","Sup;":"⋑","sup;":"⊃","supdot;":"⪾","supdsub;":"⫘","supE;":"⫆","supe;":"⊇","supedot;":"⫄","Superset;":"⊃","SupersetEqual;":"⊇","suphsol;":"⟉","suphsub;":"⫗","suplarr;":"⥻","supmult;":"⫂","supnE;":"⫌","supne;":"⊋","supplus;":"⫀","Supset;":"⋑","supset;":"⊃","supseteq;":"⊇","supseteqq;":"⫆","supsetneq;":"⊋","supsetneqq;":"⫌","supsim;":"⫈","supsub;":"⫔","supsup;":"⫖","swarhk;":"⤦","swArr;":"⇙","swarr;":"↙","swarrow;":"↙","swnwar;":"⤪",szlig:"ß","szlig;":"ß","Tab;":"\t","target;":"⌖","Tau;":"Τ","tau;":"τ","tbrk;":"⎴","Tcaron;":"Ť","tcaron;":"ť","Tcedil;":"Ţ","tcedil;":"ţ","Tcy;":"Т","tcy;":"т","tdot;":"⃛","telrec;":"⌕","Tfr;":"𝔗","tfr;":"𝔱","there4;":"∴","Therefore;":"∴","therefore;":"∴","Theta;":"Θ","theta;":"θ","thetasym;":"ϑ","thetav;":"ϑ","thickapprox;":"≈","thicksim;":"∼","ThickSpace;":"  ","thinsp;":" ","ThinSpace;":" ","thkap;":"≈","thksim;":"∼",THORN:"Þ",thorn:"þ","THORN;":"Þ","thorn;":"þ","Tilde;":"∼","tilde;":"˜","TildeEqual;":"≃","TildeFullEqual;":"≅","TildeTilde;":"≈",times:"×","times;":"×","timesb;":"⊠","timesbar;":"⨱","timesd;":"⨰","tint;":"∭","toea;":"⤨","top;":"⊤","topbot;":"⌶","topcir;":"⫱","Topf;":"𝕋","topf;":"𝕥","topfork;":"⫚","tosa;":"⤩","tprime;":"‴","TRADE;":"™","trade;":"™","triangle;":"▵","triangledown;":"▿","triangleleft;":"◃","trianglelefteq;":"⊴","triangleq;":"≜","triangleright;":"▹","trianglerighteq;":"⊵","tridot;":"◬","trie;":"≜","triminus;":"⨺","TripleDot;":"⃛","triplus;":"⨹","trisb;":"⧍","tritime;":"⨻","trpezium;":"⏢","Tscr;":"𝒯","tscr;":"𝓉","TScy;":"Ц","tscy;":"ц","TSHcy;":"Ћ","tshcy;":"ћ","Tstrok;":"Ŧ","tstrok;":"ŧ","twixt;":"≬","twoheadleftarrow;":"↞","twoheadrightarrow;":"↠",Uacute:"Ú",uacute:"ú","Uacute;":"Ú","uacute;":"ú","Uarr;":"↟","uArr;":"⇑","uarr;":"↑","Uarrocir;":"⥉","Ubrcy;":"Ў","ubrcy;":"ў","Ubreve;":"Ŭ","ubreve;":"ŭ",Ucirc:"Û",ucirc:"û","Ucirc;":"Û","ucirc;":"û","Ucy;":"У","ucy;":"у","udarr;":"⇅","Udblac;":"Ű","udblac;":"ű","udhar;":"⥮","ufisht;":"⥾","Ufr;":"𝔘","ufr;":"𝔲",Ugrave:"Ù",ugrave:"ù","Ugrave;":"Ù","ugrave;":"ù","uHar;":"⥣","uharl;":"↿","uharr;":"↾","uhblk;":"▀","ulcorn;":"⌜","ulcorner;":"⌜","ulcrop;":"⌏","ultri;":"◸","Umacr;":"Ū","umacr;":"ū",uml:"¨","uml;":"¨","UnderBar;":"_","UnderBrace;":"⏟","UnderBracket;":"⎵","UnderParenthesis;":"⏝","Union;":"⋃","UnionPlus;":"⊎","Uogon;":"Ų","uogon;":"ų","Uopf;":"𝕌","uopf;":"𝕦","UpArrow;":"↑","Uparrow;":"⇑","uparrow;":"↑","UpArrowBar;":"⤒","UpArrowDownArrow;":"⇅","UpDownArrow;":"↕","Updownarrow;":"⇕","updownarrow;":"↕","UpEquilibrium;":"⥮","upharpoonleft;":"↿","upharpoonright;":"↾","uplus;":"⊎","UpperLeftArrow;":"↖","UpperRightArrow;":"↗","Upsi;":"ϒ","upsi;":"υ","upsih;":"ϒ","Upsilon;":"Υ","upsilon;":"υ","UpTee;":"⊥","UpTeeArrow;":"↥","upuparrows;":"⇈","urcorn;":"⌝","urcorner;":"⌝","urcrop;":"⌎","Uring;":"Ů","uring;":"ů","urtri;":"◹","Uscr;":"𝒰","uscr;":"𝓊","utdot;":"⋰","Utilde;":"Ũ","utilde;":"ũ","utri;":"▵","utrif;":"▴","uuarr;":"⇈",Uuml:"Ü",uuml:"ü","Uuml;":"Ü","uuml;":"ü","uwangle;":"⦧","vangrt;":"⦜","varepsilon;":"ϵ","varkappa;":"ϰ","varnothing;":"∅","varphi;":"ϕ","varpi;":"ϖ","varpropto;":"∝","vArr;":"⇕","varr;":"↕","varrho;":"ϱ","varsigma;":"ς","varsubsetneq;":"⊊︀","varsubsetneqq;":"⫋︀","varsupsetneq;":"⊋︀","varsupsetneqq;":"⫌︀","vartheta;":"ϑ","vartriangleleft;":"⊲","vartriangleright;":"⊳","Vbar;":"⫫","vBar;":"⫨","vBarv;":"⫩","Vcy;":"В","vcy;":"в","VDash;":"⊫","Vdash;":"⊩","vDash;":"⊨","vdash;":"⊢","Vdashl;":"⫦","Vee;":"⋁","vee;":"∨","veebar;":"⊻","veeeq;":"≚","vellip;":"⋮","Verbar;":"‖","verbar;":"|","Vert;":"‖","vert;":"|","VerticalBar;":"∣","VerticalLine;":"|","VerticalSeparator;":"❘","VerticalTilde;":"≀","VeryThinSpace;":" ","Vfr;":"𝔙","vfr;":"𝔳","vltri;":"⊲","vnsub;":"⊂⃒","vnsup;":"⊃⃒","Vopf;":"𝕍","vopf;":"𝕧","vprop;":"∝","vrtri;":"⊳","Vscr;":"𝒱","vscr;":"𝓋","vsubnE;":"⫋︀","vsubne;":"⊊︀","vsupnE;":"⫌︀","vsupne;":"⊋︀","Vvdash;":"⊪","vzigzag;":"⦚","Wcirc;":"Ŵ","wcirc;":"ŵ","wedbar;":"⩟","Wedge;":"⋀","wedge;":"∧","wedgeq;":"≙","weierp;":"℘","Wfr;":"𝔚","wfr;":"𝔴","Wopf;":"𝕎","wopf;":"𝕨","wp;":"℘","wr;":"≀","wreath;":"≀","Wscr;":"𝒲","wscr;":"𝓌","xcap;":"⋂","xcirc;":"◯","xcup;":"⋃","xdtri;":"▽","Xfr;":"𝔛","xfr;":"𝔵","xhArr;":"⟺","xharr;":"⟷","Xi;":"Ξ","xi;":"ξ","xlArr;":"⟸","xlarr;":"⟵","xmap;":"⟼","xnis;":"⋻","xodot;":"⨀","Xopf;":"𝕏","xopf;":"𝕩","xoplus;":"⨁","xotime;":"⨂","xrArr;":"⟹","xrarr;":"⟶","Xscr;":"𝒳","xscr;":"𝓍","xsqcup;":"⨆","xuplus;":"⨄","xutri;":"△","xvee;":"⋁","xwedge;":"⋀",Yacute:"Ý",yacute:"ý","Yacute;":"Ý","yacute;":"ý","YAcy;":"Я","yacy;":"я","Ycirc;":"Ŷ","ycirc;":"ŷ","Ycy;":"Ы","ycy;":"ы",yen:"¥","yen;":"¥","Yfr;":"𝔜","yfr;":"𝔶","YIcy;":"Ї","yicy;":"ї","Yopf;":"𝕐","yopf;":"𝕪","Yscr;":"𝒴","yscr;":"𝓎","YUcy;":"Ю","yucy;":"ю",yuml:"ÿ","Yuml;":"Ÿ","yuml;":"ÿ","Zacute;":"Ź","zacute;":"ź","Zcaron;":"Ž","zcaron;":"ž","Zcy;":"З","zcy;":"з","Zdot;":"Ż","zdot;":"ż","zeetrf;":"ℨ","ZeroWidthSpace;":"​","Zeta;":"Ζ","zeta;":"ζ","Zfr;":"ℨ","zfr;":"𝔷","ZHcy;":"Ж","zhcy;":"ж","zigrarr;":"⇝","Zopf;":"ℤ","zopf;":"𝕫","Zscr;":"𝒵","zscr;":"𝓏","zwj;":"‍","zwnj;":"‌"}),mf=(0,tr.dict)({}),yf=(0,tr.dict)({}),wf=function(){var e=gf;return(0,tr.__call__)(e.py_items,e)}(),bf=0;bf<(0,tr.len)(wf);bf++){var kf=(0,tr.__getitem__)(wf,bf),xf=kf[0],Pf=kf[1];(0,tr.__setitem__)(mf,Pf,xf),(0,tr.__setitem__)(yf,xf,(0,tr.__call__)(tr.chr,null,Pf))}var Of=["escape","unescape"],Ef=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"s":e=n[_];break;case"quote":t=n[_]}}}e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"&","&amp;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"<","&lt;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,">","&gt;")}();if((0,tr.__t__)(t))e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,'"',"&quot;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"'","&#x27;")}();return e},Af=(0,tr.dict)({0:"�",13:"\r",128:"€",129:"",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",141:"",142:"Ž",143:"",144:"",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",157:"",158:"ž",159:"Ÿ"}),Cf=new(0,tr.set)([1,2,3,4,5,6,7,8,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,11,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Sf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}e=function(){var t=e;return(0,tr.__call__)(t.group,t,1)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,0),"#"))){if((0,tr.__t__)((0,tr.__in__)((0,tr.__getitem__)(e,1),"xX")))var _=(0,tr.__call__)(tr.int,null,function(){var t=(0,tr.__getslice__)(e,2,null,1);return(0,tr.__call__)(t.rstrip,t,";")}(),16);else _=(0,tr.__call__)(tr.int,null,function(){var t=(0,tr.__getslice__)(e,1,null,1);return(0,tr.__call__)(t.rstrip,t,";")}());return(0,tr.__t__)((0,tr.__in__)(_,Af))?(0,tr.__getitem__)(Af,_):(0,tr.__t__)((0,tr.__t__)((0,tr.__le__)(55296,_)&&(0,tr.__le__)(_,57343))||(0,tr.__gt__)(_,1114111))?"�":(0,tr.__t__)((0,tr.__in__)(_,Cf))?"":(0,tr.__call__)(tr.chr,null,_)}if((0,tr.__t__)((0,tr.__in__)(e,vf)))return(0,tr.__getitem__)(vf,e);for(var a=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e),1);a>1;a--)if((0,tr.__t__)((0,tr.__in__)((0,tr.__getslice__)(e,0,a,1),vf)))return(0,tr.__add__)((0,tr.__getitem__)(vf,(0,tr.__getslice__)(e,0,a,1)),(0,tr.__getslice__)(e,a,null,1));return(0,tr.__add__)("&",e)},Tf=function(){var e=Vn;return(0,tr.__call__)(e.compile,e,"&(#[0-9]+;?|#[xX][0-9a-fA-F]+;?|[^\\t\\n\\f <&#;]{1,32};?)")}(),Nf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return(0,tr.__t__)(!(0,tr.__in__)("&",e))?e:function(){var t=Tf;return(0,tr.__call__)(t.sub,t,Sf,e)}()},Lf={},Mf={},If={};(0,tr.__nest__)(Mf,"",dr),(0,tr.__nest__)(If,"",Vn),(0,tr.__nest__)(Lf,"",pf);var jf="flm.fragmentrenderer.html",Rf=function(){var e=Mf;return(0,tr.__call__)(e.getLogger,e,jf)}(),Df=function(){var e=If;return(0,tr.__call__)(e.compile,e,"[&]([a-zA-Z]+|[#][0-9]+|[#]x[0-9a-fA-F]+);")}(),Ff=(0,tr.__class__)("HtmlFragmentRenderer",[hf],{__module__:jf,supports_delayed_render_markers:!0,use_link_target_blank:!1,html_blocks_joiner:"\n",heading_tags_by_level:(0,tr.dict)({1:"h1",2:"h2",3:"h3",4:"span",5:"span",6:"span",theorem:"span"}),inline_heading_add_space:!0,aggressively_escape_html_attributes:!1,render_nothing_as_comment_with_annotations:!0,render_links_with_empty_href:!1,use_mathjax:!0,use_standard_math_delimiters:!0,get htmlescape(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"value":t=n[_]}}}var a=function(){var e=Lf;return(0,tr.__call__)(e.escape,e,t)}();a=function(){var e,t,r,n,_,i,o=(e=a,t=(0,tr.__call__)(e.py_replace,e," ","&nbsp;"),r=(0,tr.__call__)(t.py_replace,t," ","&hairsp;"),n=(0,tr.__call__)(r.py_replace,r," ","&thinsp;"),_=(0,tr.__call__)(n.py_replace,n," ","&puncsp;"),i=(0,tr.__call__)(_.py_replace,_," ","&ensp;"),(0,tr.__call__)(i.py_replace,i," ","&emsp;"));return(0,tr.__call__)(o.py_replace,o," ","&numsp;")}();return a}))},get htmlescape_double_quoted_attribute_value(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"self":e=n[_];break;case"value":t=n[_]}}}if((0,tr.__t__)(e.aggressively_escape_html_attributes))return function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}();t=function(){var e=Df;return(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("m"===n)e=r[n]}}return(0,tr.__add__)((0,tr.__add__)("&amp;",(_=e,(0,tr.__call__)(_.group,_,1))),";");var _}),t)}(),t=function(){var e=t;return(0,tr.__call__)(e.py_replace,e,'"',"&quot;")}();return t}))},get generate_open_tag(){return(0,tr.__get__)(this,(function(e,t){var r=null,n=null,_=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tagname":t=i[o];break;case"attrs":r=i[o];break;case"class_names":n=i[o];break;case"self_close_tag":_=i[o]}}}var l="<{}".format(t);if((0,tr.__t__)(!(0,tr.__t__)(r)))r=(0,tr.dict)({});r=(0,tr.__call__)(tr.dict,null,r);if((0,tr.__t__)((0,tr.__in__)("class",r))){var s=(0,tr.__call__)(tr.ValueError,null,"generate_open_tag(): set HTML 'class' attribute with class_names=, not with attrs=");throw s.__cause__=null,s}if((0,tr.__t__)(n)&&(0,tr.__setitem__)(r,"class",(0,tr.__call__)(" ".join," ",n)),(0,tr.__t__)(r))for(var c=function(){var e=r;return(0,tr.__call__)(e.py_items,e)}(),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],h=f[1];l=(0,tr.__call__)(tr.__iadd__,null,l,' {}="{}"'.format(d,function(){var t=e;return(0,tr.__call__)(t.htmlescape_double_quoted_attribute_value,t,h)}()))}if((0,tr.__t__)(_))l=(0,tr.__call__)(tr.__iadd__,null,l,"/>");else l=(0,tr.__call__)(tr.__iadd__,null,l,">");return l}))},get wrap_in_tag(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tagname":t=i[o];break;case"content_html":r=i[o];break;case"attrs":n=i[o];break;case"class_names":_=i[o]}}}var l=function(){var r=e;return(0,tr.__call__)(r.generate_open_tag,r,t,(0,tr.__kwargtrans__)({attrs:n,class_names:_}))}();l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__call__)(tr.str,null,r));return l=(0,tr.__call__)(tr.__iadd__,null,l,"</{}>".format(t))}))},get wrap_in_link(){return(0,tr.__get__)(this,(function(e,t,r){var n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"display_html":t=a[i];break;case"target_href":r=a[i];break;case"class_names":n=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(r)))r="#";var o=(0,tr.dict)({href:r});return(0,tr.__t__)((0,tr.__call__)(tr.callable,null,e.use_link_target_blank))?(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.use_link_target_blank,t,r)}())&&(0,tr.__setitem__)(o,"target","_blank"):(0,tr.__t__)((0,tr.__t__)(e.use_link_target_blank)&&!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.startswith,e,"#")}()))&&(0,tr.__setitem__)(o,"target","_blank"),function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"a",t,(0,tr.__kwargtrans__)({attrs:o,class_names:n}))}()}))},get render_build_paragraph(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"render_context":r=_[a]}}}return(0,tr.__add__)((0,tr.__add__)("<p>",function(){var n=e;return(0,tr.__call__)(n.render_inline_content,n,t,r)}()),"</p>")}))},get render_inline_content(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"nodelist":t=_[a];break;case"render_context":r=_[a]}}}return function(){var n=e;return(0,tr.__call__)(n.render_join,n,function(){for(var n,_,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);n=void 0,_=void 0,_=a,(0,tr.__call__)(_.append,_,(n=e,(0,tr.__call__)(n.render_node,n,l,r)))}return a}(),r)}()}))},get render_join(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content_list":t=_[a];break;case"render_context":r=_[a]}}}return(0,tr.__call__)("".join,"",function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.str,null,a))}return r}())}))},get render_join_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content_list":t=_[a];break;case"render_context":r=_[a]}}}return function(){var r=e.html_blocks_joiner;return(0,tr.__call__)(r.join,r,function(){for(var e,r=[],n=t,_=0;_<(0,tr.len)(n);_++){var a=(0,tr.__getitem__)(n,_);(0,tr.__t__)((0,tr.__t__)(null!==a)&&(0,tr.__call__)(tr.len,null,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,a))}return r}())}()}))},get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;case"render_context":r=_[a]}}}return function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}()}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"debug_str":t=_[a];break;case"render_context":r=_[a]}}}var i=function(){var e=t;return(0,tr.__call__)(e.py_replace,e,"--","- - ")}();return'<span class="empty-error-placeholder">\x3c!-- {} --\x3e(?)</span>'.format(i)}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_context":t=_[a];break;case"annotations":r=_[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.render_nothing_as_comment_with_annotations)))return"";if((0,tr.__t__)(!(0,tr.__t__)(r)))r=[];r=function(){for(var e,t,n=[],_=r,a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a);e=void 0,t=void 0,t=n,(0,tr.__call__)(t.append,t,(e=i,(0,tr.__call__)(e.py_replace,e,"--","- - ")))}return n}();return function(){var e="\x3c!-- {} --\x3e";return(0,tr.__call__)(e.format,e,(0,tr.__call__)(" ".join," ",r))}()}))},verbatim_highlight_spaces:!1,verbatim_protect_backslashes:!0,get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){var n=null,_=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"value":t=i[o];break;case"render_context":r=i[o];break;case"is_block_level":i[o];break;case"annotations":n=i[o];break;case"target_id":_=i[o]}}}var l=(0,tr.dict)({});(0,tr.__t__)(null!==_)&&(0,tr.__setitem__)(l,"id",_);var s=function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}();if((0,tr.__t__)(e.verbatim_protect_backslashes))s=function(){var e=s;return(0,tr.__call__)(e.py_replace,e,"\\","<span>\\</span>")}();if((0,tr.__t__)(e.verbatim_highlight_spaces))s=function(){var e=s;return(0,tr.__call__)(e.py_replace,e," ",'<span class="verbatimspace">&nbsp;</span>')}();for(var c="span",u=n,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if((0,tr.__t__)((0,tr.__in__)(d,(0,tr.tuple)(["verbatimcode-environment"]))))c="div"}return function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,c,s,(0,tr.__kwargtrans__)({class_names:(0,tr.__t__)(n)?n:["verbatimtext"],attrs:l}))}()}))},get render_math_content(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a,i){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"nodelist":r=l[s];break;case"render_context":n=l[s];break;case"displaytype":_=l[s];break;case"environmentname":a=l[s];break;case"target_id":i=l[s]}}}(0,tr.__t__)(!(0,tr.__t__)(e.use_mathjax))&&function(){var e=Rf;(0,tr.__call__)(e.warning,e,"called HtmlFragmentRenderer.render_math_content() but self.use_mathjax is not set. Your math will probably not render correctly.")}();var c=(0,tr.tuple)([(0,tr.__getitem__)(t,0),(0,tr.__getitem__)(t,1)]);if((0,tr.__t__)(e.use_standard_math_delimiters))if((0,tr.__t__)((0,tr.__eq__)(_,"inline")))c=(0,tr.tuple)(["\\(","\\)"]);else{if(!(0,tr.__t__)((0,tr.__eq__)(_,"display"))){var u=(0,tr.__call__)(tr.ValueError,null,"Invalid displaytype: {}".format((0,tr.__call__)(tr.repr,null,_)));throw u.__cause__=null,u}if((0,tr.__t__)(a))c=(0,tr.tuple)(["\\begin{}{}{}".format("{",a,"}"),"\\end{}{}{}".format("{",a,"}")]);else c=(0,tr.tuple)(["\\[","\\]"])}var f=["{}-math".format(_)];(0,tr.__t__)(null!==a)&&function(){var e,t=f;(0,tr.__call__)(t.append,t,"env-{}".format((e=a,(0,tr.__call__)(e.py_replace,e,"*","-star"))))}();var d=function(){var t,n=e;return(0,tr.__call__)(n.htmlescape,n,(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(c,0),(t=e,(0,tr.__call__)(t.recompose_latex,t,r))),(0,tr.__getitem__)(c,1)))}(),h=(0,tr.dict)({});return(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(h,"id",i),(0,tr.__t__)((0,tr.__eq__)(_,"display"))?function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"span",d,(0,tr.__kwargtrans__)({class_names:f,attrs:h}))}():function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"span",d,(0,tr.__kwargtrans__)({class_names:f,attrs:h}))}()}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,r,n,(0,tr.__kwargtrans__)({is_block_level:!1}))}();return function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"span",o,(0,tr.__kwargtrans__)({class_names:t}))}()}))},get render_semantic_span(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"content":t=o[l];break;case"role":r=o[l];break;case"render_context":n=o[l];break;case"annotations":_=o[l];break;case"target_id":a=o[l]}}}var s=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(s,"id",a);_=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==_)?_:[]);return(0,tr.__t__)((0,tr.__in__)(r,_))&&function(){var e=_;(0,tr.__call__)(e.remove,e,r)}(),function(){var n=e;return(0,tr.__call__)(n.wrap_in_tag,n,"span",t,(0,tr.__kwargtrans__)({attrs:s,class_names:(0,tr.__add__)([r],_)}))}()}))},get render_semantic_block(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"content":t=o[l];break;case"role":r=o[l];break;case"render_context":n=o[l];break;case"annotations":_=o[l];break;case"target_id":a=o[l]}}}var s=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(s,"id",a);_=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==_)?_:[]);return(0,tr.__t__)((0,tr.__in__)(r,_))&&function(){var e=_;(0,tr.__call__)(e.remove,e,r)}(),(0,tr.__t__)((0,tr.__in__)(r,(0,tr.tuple)(["section","main","article"])))?function(){var n=e;return(0,tr.__call__)(n.wrap_in_tag,n,r,t,(0,tr.__kwargtrans__)({attrs:s,class_names:_}))}():function(){var n=e;return(0,tr.__call__)(n.wrap_in_tag,n,"div",t,(0,tr.__kwargtrans__)({attrs:s,class_names:(0,tr.__add__)([r],_)}))}()}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"iter_items_nodelists":t=o[l];break;case"counter_formatter":r=o[l];break;case"render_context":n=o[l];break;case"target_id_generator":_=o[l];break;case"annotations":a=o[l];break;case"nested_depth":o[l]}}}for(var s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],h=f[1],p=!0;if((0,tr.__t__)(!1===h.parsing_state.is_block_level))p=!1;var g=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,h,(0,tr.__kwargtrans__)({render_context:n,is_block_level:p}))}(),v=(0,tr.__add__)(1,d),m=(0,tr.__call__)(r,null,v);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,m,tr.str)))var y=function(){var t=e;return(0,tr.__call__)(t.render_value,t,m,n)}();else y=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,m,(0,tr.__kwargtrans__)({render_context:n,is_block_level:!1}))}();var w=(0,tr.dict)({});if((0,tr.__t__)(null!==_)){var b=(0,tr.__call__)(_,null,v);(0,tr.__t__)(null!==b)&&(0,tr.__setitem__)(w,"id",b)}!function(){var t,r,_=s;(0,tr.__call__)(_.append,_,(r=e,(0,tr.__call__)(r.render_join,r,[(t=e,(0,tr.__call__)(t.wrap_in_tag,t,"dt",y,(0,tr.__kwargtrans__)({attrs:w}))),function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"dd",g)}()],n)))}()}return function(){var t,r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"dl",(t=e,(0,tr.__call__)(t.render_join,t,s,n)),(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["enumeration"],(0,tr.__t__)(a)?a:[])}))}()}))},get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){var n=1,_=!1,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"heading_nodelist":t=l[s];break;case"render_context":r=l[s];break;case"heading_level":n=l[s];break;case"inline_heading":_=l[s];break;case"target_id":a=l[s];break;case"annotations":i=l[s]}}}if((0,tr.__t__)(!(0,tr.__in__)(n,e.heading_tags_by_level))){var c=(0,tr.__call__)(tr.ValueError,null,"HTML renderer: bad heading level ‘{}’,  expected one of {} (or set HTML fragment renderer's ‘heading_tags_by_level’ config".format(n,(0,tr.__call__)(tr.list,null,function(){var t=e.heading_tags_by_level;return(0,tr.__call__)(t.py_keys,t)}())));throw c.__cause__=null,c}var u=(0,tr.__t__)(i)?(0,tr.__call__)(tr.list,null,i):[];!function(){var e=u;(0,tr.__call__)(e.append,e,"heading-level-{}".format(n))}(),(0,tr.__t__)(_)&&function(){var e=u;(0,tr.__call__)(e.append,e,"heading-inline")}();var f=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(f,"id",a);var d=function(){var _,a=e;return(0,tr.__call__)(a.wrap_in_tag,a,(0,tr.__getitem__)(e.heading_tags_by_level,n),(_=e,(0,tr.__call__)(_.render_inline_content,_,t,r)),(0,tr.__kwargtrans__)({class_names:u,attrs:f}))}();if((0,tr.__t__)((0,tr.__t__)(_)&&e.inline_heading_add_space))d=(0,tr.__call__)(tr.__iadd__,null,d," ");return d}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":n=o[l];break;case"render_context":_=o[l];break;case"annotations":a=o[l]}}}var s=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,n,(0,tr.__kwargtrans__)({render_context:_,is_block_level:!1}))}();return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r))&&!(0,tr.__t__)(e.render_links_with_empty_href))?s:function(){var n=e;return(0,tr.__call__)(n.wrap_in_link,n,s,r,(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["href-{}".format(t)],(0,tr.__t__)(a)?a:[])}))}()}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}return"<FLM:DLYD:{}/>".format(r)}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}return"\x3c!-- delayed:{} --\x3e".format(r)}))},get replace_delayed_markers_with_final_values(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"content":t=_[a];break;case"delayed_values":r=_[a]}}}return function(){var e=Bf;return(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var n=arguments[t--];for(var _ in n)if("m"===_)e=n[_]}}return(0,tr.__getitem__)(r,(0,tr.__call__)(tr.int,null,(a=e,(0,tr.__call__)(a.group,a,"key"))));var a}),t)}()}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_instance":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.dict)({});(0,tr.__t__)(null!==t.target_id)&&(0,tr.__setitem__)(i,"id",t.target_id);var o=[];(0,tr.__t__)(null!==t.number)?function(){var n,_,a,i=o;(0,tr.__call__)(i.append,i,(a=e,(0,tr.__call__)(a.wrap_in_tag,a,"span",(_=e,(0,tr.__call__)(_.render_join,_,[(n=e,(0,tr.__call__)(n.render_value,n,t.float_type_info.float_caption_name,r)),"&nbsp;",function(){var n=e;return(0,tr.__call__)(n.render_nodelist,n,t.formatted_counter_value_flm.nodes,(0,tr.__kwargtrans__)({render_context:r}))}()],r)),(0,tr.__kwargtrans__)({class_names:["float-number"]}))))}():(0,tr.__t__)(t.caption_nodelist)&&function(){var n,_,a,i=o;(0,tr.__call__)(i.append,i,(a=e,(0,tr.__call__)(a.wrap_in_tag,a,"span",(_=e,(0,tr.__call__)(_.render_join,_,[(n=e,(0,tr.__call__)(n.render_value,n,t.float_type_info.float_caption_name,r))],r)),(0,tr.__kwargtrans__)({class_names:["float-no-number"]}))))}(),(0,tr.__t__)(t.caption_nodelist)&&(function(){var e=o;(0,tr.__call__)(e.append,e,": ")}(),function(){var n,_=o;(0,tr.__call__)(_.append,_,(n=e,(0,tr.__call__)(n.render_nodelist,n,t.caption_nodelist,(0,tr.__kwargtrans__)({render_context:r}))))}());var l=null;if((0,tr.__t__)(o))l=function(){var t,n,_=e;return(0,tr.__call__)(_.wrap_in_tag,_,"figcaption",(n=e,(0,tr.__call__)(n.wrap_in_tag,n,"span",(t=e,(0,tr.__call__)(t.render_join,t,o,r)))),(0,tr.__kwargtrans__)({class_names:["float-caption-content"]}))}();var s=function(){var n=e;return(0,tr.__call__)(n.render_nodelist,n,t.content_nodelist,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))}(),c=function(){var t=e;return(0,tr.__call__)(t.render_semantic_block,t,s,"float-contents",(0,tr.__kwargtrans__)({render_context:r}))}();if((0,tr.__t__)(null!==l))var u=function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,[c,l],r)}();else u=c;var f=function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"figure",u,(0,tr.__kwargtrans__)({attrs:i,class_names:["float","float-{}".format(t.float_type)]}))}();return f}))},graphics_raster_magnification:1,graphics_vector_magnification:1,get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"graphics_resource":t=_[a];break;case"render_context":r=_[a]}}}var i=(0,tr.dict)({}),o=[];if((0,tr.__t__)(null!==t.physical_dimensions)){var l=t.physical_dimensions,s=l[0],c=l[1];if((0,tr.__t__)((0,tr.__eq__)(t.graphics_type,"raster"))){if((0,tr.__t__)(null!==s))s=(0,tr.__call__)(tr.__imul__,null,s,e.graphics_raster_magnification);if((0,tr.__t__)(null!==c))c=(0,tr.__call__)(tr.__imul__,null,c,e.graphics_raster_magnification)}else if((0,tr.__t__)((0,tr.__eq__)(t.graphics_type,"vector"))){if((0,tr.__t__)(null!==s))s=(0,tr.__call__)(tr.__imul__,null,s,e.graphics_vector_magnification);if((0,tr.__t__)(null!==c))c=(0,tr.__call__)(tr.__imul__,null,c,e.graphics_vector_magnification)}(0,tr.__t__)(null!==s)&&function(){var e=o;(0,tr.__call__)(e.append,e,"width:{}pt".format(s))}(),(0,tr.__t__)(null!==c)&&function(){var e=o;(0,tr.__call__)(e.append,e,"height:{}pt".format(c))}()}(0,tr.__t__)(o)&&(0,tr.__setitem__)(i,"style",(0,tr.__call__)(";".join,";",o));var u=t.src_url;if((0,tr.__setitem__)(i,"src",u),(0,tr.__t__)((0,tr.__t__)(null!==t.srcset)&&(0,tr.__t__)(t.srcset)&&(0,tr.__call__)(tr.len,null,t.srcset))){for(var f=[],d=t.srcset,h=0;h<(0,tr.len)(d);h++){var p=(0,tr.__getitem__)(d,h),g=(0,tr.__getitem__)(p,"source");if((0,tr.__t__)((0,tr.__in__)("pixel_density",p))){var v=(0,tr.__getitem__)(p,"pixel_density");g=(0,tr.__call__)(tr.__iadd__,null,g," {}x".format(v))}!function(){var e=f;(0,tr.__call__)(e.append,e,g)}()}(0,tr.__setitem__)(i,"srcset",(0,tr.__call__)(", ".join,", ",f))}return function(){var t=e;return(0,tr.__call__)(t.generate_open_tag,t,"img",(0,tr.__kwargtrans__)({attrs:i}))}()}))},get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":n=a[i]}}}for(var o=(0,tr.tuple)([(0,tr.__call__)(tr.len,null,t.grid_data),(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(t.grid_data,0))]),l=o[0],s=o[1],c=[],u=0;(0,tr.__t__)((0,tr.__lt__)(u,(0,tr.__call__)(tr.len,null,t.grid_data)));){for(var f=[],d=0;(0,tr.__t__)((0,tr.__lt__)(d,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(t.grid_data,u))));){var h=(0,tr.__getitem__)((0,tr.__getitem__)(t.grid_data,u),d);if((0,tr.__t__)((0,tr.__t__)(null===h)||null===(0,tr.__getitem__)(h,"cell"))){var p=[];(0,tr.__t__)((0,tr.__eq__)(u,0))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-top")}(),(0,tr.__t__)((0,tr.__eq__)(d,0))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-left")}(),(0,tr.__t__)((0,tr.__eq__)(u,(0,tr.__sub__)(l,1)))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-bottom")}(),(0,tr.__t__)((0,tr.__eq__)(d,(0,tr.__sub__)(s,1)))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-right")}(),function(){var t,r=f;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.wrap_in_tag,t,"td","",(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["cell-empty"],p)}))))}();d=(0,tr.__call__)(tr.__iadd__,null,d,1)}else if((0,tr.__t__)((0,tr.__getitem__)(h,"is_topleft"))){var g=(0,tr.__getitem__)(h,"cell"),v=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,g.content_nodes,(0,tr.__kwargtrans__)({render_context:r}))}();p=(0,tr.__add__)(["cell"],function(){for(var e,t=[],r=g.styles,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,"cellstyle-{}".format(_))}return t}());(0,tr.__t__)((0,tr.__eq__)(u,0))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-top")}(),(0,tr.__t__)((0,tr.__eq__)(d,0))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-left")}(),(0,tr.__t__)((0,tr.__eq__)(g.placement.row_range.end,l))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-bottom")}(),(0,tr.__t__)((0,tr.__eq__)(g.placement.col_range.end,s))&&function(){var e=p;(0,tr.__call__)(e.append,e,"celltbledge-right")}();var m="td";if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("H",g.styles))||(0,tr.__in__)("rH",g.styles)))m="th";var y=(0,tr.dict)({}),w=g.placement;(0,tr.__t__)((0,tr.__ne__)(w.col_range.end,(0,tr.__add__)(w.col_range.start,1)))&&(0,tr.__setitem__)(y,"colspan",(0,tr.__call__)(tr.str,null,(0,tr.__sub__)(w.col_range.end,w.col_range.start))),(0,tr.__t__)((0,tr.__ne__)(w.row_range.end,(0,tr.__add__)(w.row_range.start,1)))&&(0,tr.__setitem__)(y,"rowspan",(0,tr.__call__)(tr.str,null,(0,tr.__sub__)(w.row_range.end,w.row_range.start))),function(){var t,r=f;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.wrap_in_tag,t,m,v,(0,tr.__kwargtrans__)({attrs:y,class_names:p}))))}();d=w.col_range.end}else d=(0,tr.__call__)(tr.__iadd__,null,d,1)}!function(){var e=c;(0,tr.__call__)(e.append,e,f)}();u=(0,tr.__call__)(tr.__iadd__,null,u,1)}var b=(0,tr.dict)({});(0,tr.__t__)(null!==n)&&(0,tr.__setitem__)(b,"id",n);var k=function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"table",(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=c,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("<tr>",(0,tr.__call__)("".join,"",_)),"</tr>"))}return t}()),(0,tr.__kwargtrans__)({attrs:b,class_names:["cells"]}))}();return k}))}}),Bf=function(){var e=If;return(0,tr.__call__)(e.compile,e,"<FLM:DLYD:(?P<key>\\d+)\\s*/>")}(),zf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("html_fragment_renderer"===n)e=r[n]}}return"\np, ul, ol, .p-block {\n  margin: 1em 0px;\n}\np:first-child, ul:first-child, ol:first-child, .p-block:first-child {\n  margin-top: 0px;\n}\np:last-child, ul:last-child, ol:last-child, .p-block:last-child {\n  margin-bottom: 0px;\n}\ndd > p, dd > p:first-child, dd > p:last-child {\n  margin: 0.33em 0px;\n}\n\na, a:link, a:hover, a:active, a:visited {\n  color: #3232c8;\n  text-decoration: none;\n}\na:hover {\n  color: #22228a;\n}\n"},qf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("html_fragment_renderer"===n)e=r[n]}}return"\n.emph, .textit {\n  font-style: italic;\n}\n.textbf {\n  font-weight: bold;\n}\n\nh1 {\n  font-size: 1.6rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh2 {\n  font-size: 1.3rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh3 {\n  font-size: 1rem;\n  font-weight: bold;\n  margin: 1em 0px;\n}\n\n.heading-level-4 {\n  font-style: italic;\n  display: inline;\n}\n.heading-level-4::after {\n  display: inline-block;\n  margin: 0px .12em;\n  content: '—';\n}\n\n.heading-level-5 {\n  font-style: italic;\n  font-size: .9em;\n  display: inline;\n}\n.heading-level-5::after {\n  display: inline-block;\n  margin-right: .12em;\n  content: '';\n}\n\n.heading-level-6 {\n  font-style: italic;\n  font-size: .8em;\n  display: inline;\n}\n.heading-level-6::after {\n  display: inline-block;\n  margin-right: .06em;\n  content: '';\n}\n\n\n.heading-level-theorem {\n  font-weight: bold;\n}\n.heading-level-theorem::after {\n  font-weight: bold;\n  display: inline-block;\n  margin: 0px .12em 0px 0px;\n  content: '.';\n}\n\ndiv.prooflike > p > .heading-level-theorem,\ndiv.prooflike > p > .heading-level-theorem::after {\n  font-weight: normal;\n  font-style: italic;\n}\n\n\ndl.enumeration {\n  display: block;\n  margin-left: 2.5em;\n}\ndl.enumeration > dt {\n  float: left;\n  clear: left;\n  display: inline-block;\n  /*margin: 0px; */\n  margin-left: -2.5em;\n  width: 2.0em;\n  min-width: 2.0em;\n  max-width: 2.0em;\n  margin-right: 0.5em;\n  text-align: right;\n}\ndl.enumeration > dd {\n  /*display: inline-block;\n  width: 100%;*/\n  border: 0px;\n  padding: 0px;\n  margin: 0px;\n}\n\nfigure.float {\n  width: 100%;\n  border-width: 1px 0px 1px 0px;\n  border-style: solid none solid none;\n  border-color: rgba(120, 120, 140, 0.15);\n  margin: 0.5rem 0px;\n  padding: 0.5rem 0px;\n}\n\nfigure.float .float-contents {\n  width: 100%;\n  max-width: 100%;\n  overflow-x: auto;\n}\n\nfigure.float .float-contents img {\n  display: block;\n  margin: 0pt auto;\n  padding: 0pt;\n  border: 0pt;\n  margin: 0px auto;\n}\n\nfigure.float figcaption {\n  display: block;\n  margin-top: 0.5em;\n  margin: 0.75em 2em 0px;\n  text-align: center;\n}\n\nfigure.float figcaption > span {\n  display: inline-block;\n  font-style: italic;\n  text-align: left;\n}\n\ntable {\n  margin: 1em 0px 1em 0px;\n  border-collapse: separate;\n  border-spacing: 0px;\n  /*border-top: solid 1pt;\n  border-bottom: solid 1pt;*/\n}\nfigure.float .float-contents table {\n  margin: 0px auto;\n}\ntd {\n  padding: 0.3em 0.5em;\n  border: none 0px;\n}\nth {\n  padding: 0.3em 0.5em;\n  border: none 0px;\n}\n.cellstyle-H {\n  border-bottom: solid .5pt;\n}\n.cellstyle-rH {\n}\n.cellstyle-l {\n  text-align: left;\n}\n.cellstyle-c {\n  text-align: center;\n}\n.cellstyle-r {\n  text-align: right;\n}\n.cellstyle-green {\n  background-color: rgba(69, 255, 69, 0.31); /*rgb(200,255,200);*/\n}\n.cellstyle-blue {\n  background-color: rgba(79, 142, 255, 0.27); /*rgb(200,220,255);*/\n}\n.cellstyle-yellow {\n  background-color: rgba(255, 255, 49, 0.33); /*rgb(255,255,200);*/\n}\n.cellstyle-red {\n  background-color: rgba(255,120,120,0.30);  /*rgb(255,200,200);*/\n}\n.cellstyle-lvert {\n  border-left: solid .5pt;\n}\n.cellstyle-rvert {\n  border-right: solid .5pt;\n}\n\n.celltbledge-top {\n  border-top: solid 1pt;\n}\n.celltbledge-bottom {\n  border-bottom: solid 1pt;\n}\n\n.verbatimcode {\n  font-family: monospace;\n  font-size: 0.9em;\n  background-color: rgba(127,127,127,0.25);\n  border-radius: 2px;\n  padding: 1px 2px;\n  display: inline-block;\n  white-space: pre-wrap;\n}\n.verbatima {\n  font-style: italic;\n}\n.verbatimcode-environment {\n  display: block;\n  margin: 0.75em 0px 1em;\n  white-space: pre;\n}\n\n.defterm {\n  font-style: italic;\n  margin: 1em 0px;\n}\n.defterm:first-child {\n  margin-top: 0px;\n}\n.defterm:last-child {\n  margin-bottom: 0px;\n}\n\n.defterm .defterm-term, .defterm .term-in-defining-defterm {\n  font-style: italic;\n  font-weight: bold;\n}\n\n.display-math {\n  width: 100%;\n  max-width: 100%;\n  display: block;\n  overflow-x: auto;\n}\n\n.endnote {\n}\n.citation {\n}\n.footnote {\n}\n.endnote-marks, .citation-marks {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\ndl.citation-list > dt, dl.footnote-list > dt {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\n"},Vf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("html_fragment_renderer"===n)e=r[n]}}return(0,tr.__t__)(e.use_mathjax)?"\nMathJax = {\n    tex: {\n        inlineMath: [['\\\\(', '\\\\)']],\n        displayMath: [['\\\\[', '\\\\]']],\n        processEnvironments: true,\n        processRefs: true,\n\n        // equation numbering on\n        tags: 'ams'\n    },\n    options: {\n        // all MathJax content is marked with CSS classes\n        // skipHtmlTags: 'body',\n        // processHtmlClass: 'display-math|inline-math',\n    },\n    startup: {\n        pageReady: function() {\n            // override the default \"typeset everything on the page\" behavior to\n            // only typeset whatever we have explicitly marked as math\n            return typesetPageMathPromise();\n        }\n    }\n};\nfunction typesetPageMathPromise()\n{\n    var elements = document.querySelectorAll('.display-math, .inline-math');\n    return MathJax.typesetPromise(elements);\n}\n":""},Uf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("html_fragment_renderer"===n)e=r[n]}}return(0,tr.__t__)(e.use_mathjax)?'\n<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>\n<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>\n':""},Gf=((0,tr.__class__)("FragmentRendererInformation",[tr.object],{__module__:jf,FragmentRendererClass:Ff,get get_style_information(){return function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("fragment_renderer"===n)e=r[n]}}return(0,tr.dict)({css_global:(0,tr.__call__)(zf,null,e),css_content:(0,tr.__call__)(qf,null,e),js:(0,tr.__call__)(Vf,null,e),body_end_js_scripts:(0,tr.__call__)(Uf,null,e)})}},format_name:"html"}),"flm.fragmentrenderer.text"),Wf=(0,(tr=a("hoVWB")).__class__)("TextFragmentRenderer",[hf],{__module__:Gf,display_href_urls:!0,float_separator_top:(0,tr.__mul__)("·",80),float_separator_bottom:(0,tr.__mul__)("·",80),get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;case"render_context":r=_[a]}}}return t}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}return""}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":n=a[i]}}}return"#DELAYED#"}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"render_context":t=_[a];break;case"annotations":r=_[a]}}}return""}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"debug_str":t=_[a];break;case"render_context":r=_[a]}}}return""}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,n){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":n=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,r,n,(0,tr.__kwargtrans__)({is_block_level:!1}))}();return o}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,n){var _=null,a=0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"iter_items_nodelists":t=o[l];break;case"counter_formatter":r=o[l];break;case"render_context":n=o[l];break;case"target_id_generator":o[l];break;case"annotations":_=o[l];break;case"nested_depth":a=o[l]}}}for(var s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],h=f[1],p=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,h,(0,tr.__kwargtrans__)({render_context:n,is_block_level:!0}))}(),g=(0,tr.__call__)(r,null,(0,tr.__add__)(1,d));if((0,tr.__t__)(null===g))var v="?";else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,g,tr.str)))v=function(){var t=e;return(0,tr.__call__)(t.render_value,t,g,n)}();else v=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,g,(0,tr.__kwargtrans__)({render_context:n,is_block_level:!1}))}();if((0,tr.__t__)((0,tr.__gt__)(a,0)))v=(0,tr.__add__)((0,tr.__mul__)(" ",(0,tr.__mul__)(4,a)),v);!function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)([v,p]))}()}if((0,tr.__t__)(!(0,tr.__t__)(s)))return function(){var t=e;return(0,tr.__call__)(t.render_semantic_block,t,"","enumeration",(0,tr.__kwargtrans__)({render_context:n,annotations:_}))}();var m=(0,tr.__call__)(tr.max,null,function(){for(var e,t=[],r=s,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n),a=_[0];_[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.len,null,a))}return t}());return function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,function(){for(var t,r,a,i,o,l=[],c=s,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],h=f[1];t=void 0,r=void 0,a=void 0,i=void 0,o=void 0,o=l,(0,tr.__call__)(o.append,o,(i=e,(0,tr.__call__)(i.render_semantic_block,i,(a=e,(0,tr.__call__)(a.render_join,a,[(r=e,(0,tr.__call__)(r.render_value,r,(0,tr.__add__)((t=d,(0,tr.__call__)(t.rjust,t,(0,tr.__add__)(m,2)," "))," "),n)),h],n)),"enumeration",(0,tr.__kwargtrans__)({render_context:n,annotations:_}))))}return l}(),n)}()}))},heading_level_formatter:(0,tr.dict)({1:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"{}\n{}".format(e,(0,tr.__mul__)("=",(0,tr.__call__)(tr.len,null,e)))},2:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"{}\n{}".format(e,(0,tr.__mul__)("-",(0,tr.__call__)(tr.len,null,e)))},3:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"{}\n{}".format(e,(0,tr.__mul__)("~",(0,tr.__call__)(tr.len,null,e)))},4:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"{}  ".format((0,tr.__call__)($f,null,e,":"))},5:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"    {}  ".format((0,tr.__call__)($f,null,e,":"))},6:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"        {}  ".format((0,tr.__call__)($f,null,e,":"))},theorem:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var n in r)if("s"===n)e=r[n]}}return"{}.  ".format(e)}}),get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){var n=1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"heading_nodelist":t=a[i];break;case"render_context":r=a[i];break;case"heading_level":n=a[i];break;case"inline_heading":a[i];break;case"target_id":a[i];break;case"annotations":a[i]}}}var o=function(){var n=e;return(0,tr.__call__)(n.render_inline_content,n,t,r)}();if((0,tr.__t__)((0,tr.__in__)(n,e.heading_level_formatter))){var l=(0,tr.__getitem__)(e.heading_level_formatter,n);return(0,tr.__call__)(l,null,o)}var s=(0,tr.__call__)(tr.ValueError,null,"Bad heading_level={}, expected 1..6".format(n));throw s.__cause__=null,s}))},get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"value":t=_[a];break;case"render_context":r=_[a];break;case"is_block_level":_[a];break;case"annotations":_[a];break;case"target_id":_[a]}}}return t}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,n,_,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":n=o[l];break;case"render_context":_=o[l];break;case"annotations":a=o[l]}}}var s=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,n,(0,tr.__kwargtrans__)({render_context:_,is_block_level:!1}))}();return(0,tr.__t__)((0,tr.__t__)(e.display_href_urls)&&!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.startswith,e,"#")}()))?"{} <{}>".format(s,r):s}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"float_instance":t=_[a];break;case"render_context":r=_[a]}}}var i=[];(0,tr.__t__)(null!==t.number)?function(){var n,_,a=i;(0,tr.__call__)(a.append,a,(_=e,(0,tr.__call__)(_.render_join,_,[t.float_type_info.float_caption_name," ",(n=e,(0,tr.__call__)(n.render_nodelist,n,t.formatted_counter_value_flm.nodes,(0,tr.__kwargtrans__)({render_context:r})))],r)))}():(0,tr.__t__)(t.caption_nodelist)&&function(){var e=i;(0,tr.__call__)(e.append,e,t.float_type_info.float_caption_name)}(),(0,tr.__t__)(t.caption_nodelist)&&(function(){var e=i;(0,tr.__call__)(e.append,e,": ")}(),function(){var n,_=i;(0,tr.__call__)(_.append,_,(n=e,(0,tr.__call__)(n.render_nodelist,n,t.caption_nodelist,(0,tr.__kwargtrans__)({render_context:r}))))}());var o=null;if((0,tr.__t__)(i))o=function(){var t=e;return(0,tr.__call__)(t.render_join,t,i,r)}();var l=function(){var n=e;return(0,tr.__call__)(n.render_nodelist,n,t.content_nodelist,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))}();if((0,tr.__t__)(null!==o))var s=function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,[l,o],r)}();else s=l;return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.float_separator_top,"\n"),s),"\n"),e.float_separator_bottom)}))},get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var _=arguments[n--];for(var a in _)switch(a){case"self":e=_[a];break;case"graphics_resource":t=_[a];break;case"render_context":r=_[a]}}}return"{}".format((0,tr.__add__)((0,tr.__add__)("[",t.src_url),"]"))}))},cells_column_sep:"   ",get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var a=arguments[_--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":n=a[i]}}}for(var o=[],l=t.cells_data,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,c.content_nodes,(0,tr.__kwargtrans__)({render_context:r}))}(),f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,"\n")}(),d=!1;if((0,tr.__t__)((0,tr.__in__)("H",c.styles)))d=!0;!function(){var e=o;(0,tr.__call__)(e.append,e,(0,tr.dict)({cell:c,rendered_contents_lines:f,width:(0,tr.__call__)(tr.max,null,function(){for(var e,t=[],r=f,n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.len,null,_))}return t}()),is_header:d}))}()}var h=[];for(l=o,s=0;s<(0,tr.len)(l);s++){var p=(0,tr.__getitem__)(l,s);!function(){var e=h;(0,tr.__call__)(e.append,e,(0,tr.__call__)("\n".join,"\n",function(){for(var e,t=[],r=(0,tr.__getitem__)(p,"rendered_contents_lines"),n=0;n<(0,tr.len)(r);n++){var _=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,"    {}".format(_))}return t}()))}()}return(0,tr.__call__)("\n".join,"\n",h)}))}}),$f=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var n=arguments[r--];for(var _ in n)switch(_){case"x":e=n[_];break;case"c":t=n[_]}}}e=(0,tr.__call__)(tr.str,null,e);return(0,tr.__t__)((0,tr.__in__)((0,tr.__getslice__)(function(){var t=e;return(0,tr.__call__)(t.rstrip,t)}(),(0,tr.__neg__)(1),null,1),".,:;?!"))?e:(0,tr.__add__)(e,t)};(0,tr.__class__)("FragmentRendererInformation",[tr.object],{__module__:Gf,FragmentRendererClass:Wf,format_name:"text"});(0,tr.__class__)("ZooHtmlFragmentRenderer",[Ff],{inline_heading_add_space:!1,html_blocks_joiner:"",get use_link_target_blank(){return(0,tr.__get__)(this,(function(e,t){return!function(e){return e.startsWith("#")||e.startsWith("/")&&!e.startsWith("//")||e.startsWith("javascript:")}(t)}))},get render_error_info_message(){return(0,tr.__get__)(this,(function(e,t){if(!t)return"[FLM Error; no information provided]";const r=new Br(t.error_object),n=Object.assign({},t,{error_object:null});return`<pre class="flm-error-message" data-flm-error-info="${JSON.stringify(n)}"><span class="flm-error-message-lead">Error: ${t.msg}</span>\n<span class="flm-error-message-traceback">${r.format_full_traceback()}</pre>`}))}});const Yf=(0,tr.__class__)("ZooTextFragmentRenderer",[Wf],{display_href_urls:!1,float_separator_top:"[figure]",float_separator_bottom:""});function Hf(e){try{const t=new Yf;return e.render_standalone(t)}catch(e){throw Xf(e),e}}function Xf(e){const t=_r(e);console.error("\n🚨🚨🚨 FLM RENDERING ERROR 🚨🚨🚨\n\n"+t,e)}s=a("3krpC");var Zf=/["'&<>]/;tr=a("hoVWB");r(s)("zoodb.zooflm._renderutils");const Kf=r(s)("zoodb.std.use_flm_environment");function Jf(e){const t=e.config.zoo_flm_environment_options??{},r=e.config.flm_options??{},n=new lf(t);return n.ref_resolver.target_href_resolver=(t,r)=>function(e,t,{zoo_object_permalink:r}){const{target_href:n,ref_type:_,ref_label:a}=e??{};if(null!=n){const e=new URL(n);if("zoodbobjectref:"==e.protocol){const t=e.pathname.replace(/^\/+/,""),[n,_]=function(e){const t=e.indexOf(":");return-1==t?[null,e]:[e.slice(0,t),e.slice(t+1)]}(t);return r(n,_)+e.hash}return n}throw new Error(`Cannot resolve link reference to ‘${_}:${a}’`)}(t,0,{zoo_object_permalink:e.zoo_object_permalink}),r.allow_unresolved_references&&n.feature_refs.add_external_ref_resolver({get_ref:(e,t)=>(Kf(`Default ref_resolver called for invalid reference ‘${e}:${t}’`),ef(e,t,"<??>",null))}),r.allow_unresolved_citations&&n.feature_citations.add_external_citations_provider({get_citation_full_text_flm:(e,t)=>(Kf(`Note: unresolved citation ‘${e}:${t}’`),`\\begin{verbatimtext}${e}:${t}\\end{verbatimtext}`)}),n.graphics_collection.src_url_resolver_fn=({graphics_resource:t})=>{const n=e.config.zoo_permalinks.graphics_resource(t);let _;if(r.resources?.graphics_use_srcset_parceljs&&r.resources.graphics_use_srcset_parceljs.enabled){let{pixel_density_list:e,image_max_zoom_factor:a}=r.resources.graphics_use_srcset_parceljs;if("raster"==t.graphics_type){const[r,i]=t.pixel_dimensions;if(!e){let t=Math.floor(a);e=Array(t).fill().map(((e,t)=>t+1))}let o=[];for(const n of e){const e=96*n;if(e>=t.dpi)break;o.push({factor:n,width:Math.round(r*e/t.dpi),height:Math.round(i*e/t.dpi)})}_=o.map((({factor:e,width:t,height:r})=>({source:`${n}?`+new URLSearchParams({as:"webp",width:t,height:r}).toString(),pixel_density:e}))),Kf(`built parceljs-compatible srcset for ${n} → `+_.map((({source:e,pixel_density:t})=>`${e} ${t}x`)).join(", "))}}return{src_url:n,srcset:_}},e.$$kw=er,n}s=a("3krpC");const Qf={object:function(e,t){if("code"===e)return`/c/${t}`;if("domain"===e)return`/domain/${t}`;if("kingdom"===e)return`/kingdom/${t}`;if("user"===e)return`/team#u-${t}`;if("codelist"===e)return"all"===t?"/all":`/list/${t}`;throw new Error(`Unknown object type ‘${e}’`)},graphics_resource:function(e){return`/fig/${e.src_url}`}};s=a("3krpC");var ed,td={},rd={};rd=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e};var nd={},_d={},ad={},id={},od=Ve(Object.keys,Object);id=od;var ld=Object.prototype.hasOwnProperty;ad=function(e){if(!Ge(e))return id(e);var t=[];for(var r in Object(e))ld.call(e,r)&&"constructor"!=r&&t.push(r);return t},_d=function(e){return rt(e)?xt(e):ad(e)},nd=function(e,t){return e&&yt(t,_d(t),e)};var sd={};sd=function(e,t){return e&&yt(t,kt(t),e)};Ne=a("4N7g8");var cd={},ud={},fd={};fd=function(e,t){for(var r=-1,n=null==e?0:e.length,_=0,a=[];++r<n;){var i=e[r];t(i,r,e)&&(a[_++]=i)}return a};var dd;dd=function(){return[]};var hd=Object.prototype.propertyIsEnumerable,pd=Object.getOwnPropertySymbols;ud=pd?function(e){return null==e?[]:(e=Object(e),fd(pd(e),(function(t){return hd.call(e,t)})))}:dd,cd=function(e,t){return yt(e,ud(e),t)};var gd={},vd={},md={};md=function(e,t){for(var r=-1,n=t.length,_=e.length;++r<n;)e[_+r]=t[r];return e};var yd=Object.getOwnPropertySymbols;vd=yd?function(e){for(var t=[];e;)md(t,ud(e)),e=qe(e);return t}:dd,gd=function(e,t){return yt(e,vd(e),t)};var wd={},bd={};bd=function(e,t,r){var n=t(e);return Qe(e)?n:md(n,r(e))},wd=function(e){return bd(e,_d,ud)};var kd;kd=function(e){return bd(e,kt,vd)};var xd={},Pd={};te=a("kLIqa");Pd=C(te,"DataView");var Od={};te=a("kLIqa");Od=C(te,"Promise");var Ed={};te=a("kLIqa");Ed=C(te,"Set");var Ad={};te=a("kLIqa");Ad=C(te,"WeakMap");var Cd="[object Map]",Sd="[object Promise]",Td="[object Set]",Nd="[object WeakMap]",Ld="[object DataView]",Md=$(Pd),Id=$(A),jd=$(Od),Rd=$(Ed),Dd=$(Ad),Fd=N;(Pd&&Fd(new Pd(new ArrayBuffer(1)))!=Ld||A&&Fd(new A)!=Cd||Od&&Fd(Od.resolve())!=Sd||Ed&&Fd(new Ed)!=Td||Ad&&Fd(new Ad)!=Nd)&&(Fd=function(e){var t=N(e),r="[object Object]"==t?e.constructor:void 0,n=r?$(r):"";if(n)switch(n){case Md:return Ld;case Id:return Cd;case jd:return Sd;case Rd:return Td;case Dd:return Nd}return t}),xd=Fd;var Bd={},zd=Object.prototype.hasOwnProperty;Bd=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&zd.call(e,"index")&&(r.index=e.index,r.input=e.input),r};var qd={},Vd={};Vd=function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)};var Ud={},Gd=/\w*$/;Ud=function(e){var t=new e.constructor(e.source,Gd.exec(e));return t.lastIndex=e.lastIndex,t};var Wd={},$d=E?E.prototype:void 0,Yd=$d?$d.valueOf:void 0;Wd=function(e){return Yd?Object(Yd.call(e)):{}};qd=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Me(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Vd(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Le(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Ud(e);case"[object Symbol]":return Wd(e)}};_t=a("4a4bO");var Hd,Xd={};Hd=function(e){return He(e)&&"[object Map]"==xd(e)};var Zd=(eh=a("3tQok"))&&eh.isMap,Kd=Zd?ht(Zd):Hd;Xd=Kd;var Jd,Qd={};Jd=function(e){return He(e)&&"[object Set]"==xd(e)};var eh,th=(eh=a("3tQok"))&&eh.isSet,rh=th?ht(th):Jd;Qd=rh;var nh="[object Arguments]",_h="[object Function]",ah="[object Object]",ih={};ih[nh]=ih["[object Array]"]=ih["[object ArrayBuffer]"]=ih["[object DataView]"]=ih["[object Boolean]"]=ih["[object Date]"]=ih["[object Float32Array]"]=ih["[object Float64Array]"]=ih["[object Int8Array]"]=ih["[object Int16Array]"]=ih["[object Int32Array]"]=ih["[object Map]"]=ih["[object Number]"]=ih[ah]=ih["[object RegExp]"]=ih["[object Set]"]=ih["[object String]"]=ih["[object Symbol]"]=ih["[object Uint8Array]"]=ih["[object Uint8ClampedArray]"]=ih["[object Uint16Array]"]=ih["[object Uint32Array]"]=!0,ih["[object Error]"]=ih[_h]=ih["[object WeakMap]"]=!1,td=function e(t,r,n,_,a,i){var o,l=1&r,s=2&r,c=4&r;if(n&&(o=a?n(t,_,a,i):n(t)),void 0!==o)return o;if(!z(t))return t;var f=Qe(t);if(f){if(o=Bd(t),!l)return Re(t,o)}else{var d=xd(t),h=d==_h||"[object GeneratorFunction]"==d;if(_t(t))return Ne(t,l);if(d==ah||d==nh||h&&!a){if(o=s||h?{}:De(t),!l)return s?gd(t,sd(o,t)):cd(t,nd(o,t))}else{if(!ih[d])return a?t:{};o=qd(t,d,l)}}i||(i=new u);var p=i.get(t);if(p)return p;i.set(t,o),Qd(t)?t.forEach((function(_){o.add(e(_,r,n,_,t,i))})):Xd(t)&&t.forEach((function(_,a){o.set(a,e(_,r,n,a,t,i))}));var g=f?void 0:(c?s?kd:wd:s?kt:_d)(t);return rd(g||t,(function(_,a){g&&(_=t[a=_]),wt(o,a,e(_,r,n,a,t,i))})),o};ed=function(e){return td(e,5)};var oh;oh=function(e,t){return td(e,5,t="function"==typeof t?t:void 0)};var lh,sh=Lt((function(e,t,r,n){yt(t,_d(t),e,n)}));function ch(e,t,r={}){let{only_schema_properties:n,create_object:_,create_array:a}=r;if(n??=!1,_??=()=>({}),a??=()=>[],null==e)return e;if("object"==t.type){let a=_();const i=t.properties??{},o=n?Object.keys(i):Object.keys(e);for(const n of o){const _=i[n]??t.additionalProperties??{},o=e[n];a[n]=ch(o,_,r)}return a}if("array"==t.type){let n=a();const _=t.items??{};for(let t=0;t<e.length;++t)n.push(ch(e[t],_,r));return n}return e}lh=sh;const uh=r(s)("zoodb._zoodb");function fh(e){return r(oh)(e,(e=>{if("object"==typeof e){if(null===e)return null;if(e instanceof Array)return;return r(lh)(Object.create(null),e,((e,t)=>fh(t)))}}))}class dh{constructor({processors:e,schema_validator:t,normalize_id_for_uniqueness_check:r,silent:n}){this.processors=e??[],this.processors_initialized=!1,this.silent=n??!1;for(const e of this.processors)e.install_zoo(this);if(this.raw_data_db={schemas:{},objects:{}},this.schema_validator=t??null,null==this.schema_validator)throw new Error("No schema validator set on this ZooDb to perform schema validation. To suppress this error and proceed without schema validation, use the value ‘false’ for the schema_validator argument.");this.normalize_id_for_uniqueness_check=r??(e=>(""+e).toLowerCase()),this.zoo_loader_handler=null,this.db={},this.scratch={}}schema(e){if(!Object.hasOwn(this.db.schemas,e))throw new Error(`No zoo schema associated with object type ‘${e}’`);return this.db.schemas[e]}get object_types(){return Object.keys(this.db.objects)}get schemas(){return this.db.schemas}get objects(){return this.db.objects}async load_schemas({schemas:e}){this.raw_data_db.schemas=r(ed)(e),this.db.schemas=fh(e),uh(`Loaded db schemas (${Object.keys(this.db.schemas).join(", ")})`)}async load_data(e){if(uh("zoodb load_data"),!e||"object"!=typeof e||null!=e.schemas&&"object"!=typeof e.schemas||null!=e.objects&&"object"!=typeof e.objects||null==e.objects&&null==e.schemas)throw new Error(`Invalid zoo DB data, expected db.schemas and/or db.objects to be objects, got db=${e}`);if(null!=e.schemas&&Object.keys(e.schemas).length>0&&await this.load_schemas({schemas:e.schemas}),null!=e.objects&&0!=Object.keys(e.objects).length){if(null==this.db.schemas)throw new Error("No schemas loaded. It looks like you forgot to load  the schemas before loading the object data");for(const t in e.objects??{})if(null==this.db.schemas[t])throw new Error(`No schema loaded for objects of type ‘${t}’. It looks like you forgot to load schemas for this object type.`);if(this.raw_data_db.objects=r(ed)(e.objects),this.db.objects=fh(e.objects),this._object_types=Object.keys(this.db.objects),this._sanitize_raw_object_db(this.db.objects),!this.processors_initialized){this.processors_initialized=!0;for(const e of this.processors)await e.initialize_zoo()}for(const e of this.processors)await e.process_zoo();uh("zoodb load_data done.")}else uh("No objects to load at this time.")}async validate(){for(const[e,t]of Object.entries(this.db.objects)){let r={},n=this.normalize_id_for_uniqueness_check;for(const[_,a]of Object.entries(t)){const t=n(_),i=r[t];if(void 0!==i)throw new Error(`ID ‘${_}’ was assigned to multiple objects of type  ${e} (duplicate ID), ${this.display_object_source(i)} and ${this.display_object_source(a)}’ [normalized ID ‘${t}’]`);r[t]=a}}}display_object_source(e){const t=e._zoodb;if(t){if(t.source_file_path)return`in file ‘${t.source_file_path}’`;if(t.source_url)return`at ‘${t.source_url}’`;if(t.id)return`with ID ‘${t.id}’`}return"(unknown source)"}async install_zoo_loader_handler(e){if(null!=e){if(null!=this.zoo_loader_handler)throw new Error("There is already a loader handler installed.");this.zoo_loader_handler=e,await this.zoo_loader_handler.initialize(this)}else this.zoo_loader_handler=null}async load(e={}){if(null==this.zoo_loader_handler)throw new Error("No zoo loader installed, use ZooDb.install_zoo_loader_handler() to set one");await this.zoo_loader_handler.load(e)}_sanitize_raw_object({object_type:e,object_id:t,object:r}){const n=Object.assign({},r);delete n._zoodb;const _=this.schemas[e];if(this.schema_validator){const a=this.schema_validator.validate(n,_);if(!a.valid){const _="*** "+a.errors.map((t=>(""+t).replace(/^instance\b/,(()=>`[${e.toUpperCase()}]`)))).join("\n*** ");let i="";t&&(i=` with ID ‘${t}’`),r._zoodb?.source_file_path&&(i=` in ‘${r._zoodb.source_file_path}’`);let o=`Schema validation failed for <${e}> object data${i}:\n\n${_}\n`;this.silent||(console.log("Validation failed for data:",n),console.error(o));let l=new Error(o);throw l.error_info={error_type:"schema_validation_failure",validation_result:a},l}}if(r._zoodb??={},r._zoodb.id||(r._zoodb.id=t),r._zoodb.id!=t)throw new Error(`Detected inconsistency in object ID: database key is ‘${t}’ but internal ID field is ‘${r._zoodb.id}’`)}_sanitize_raw_object_db(e){for(const[t,r]of Object.entries(e))for(const[e,n]of Object.entries(r))this._sanitize_raw_object({object_type:t,object_id:e,object:n})}async update_objects(e){for(const[t,n]of Object.entries(e))for(const[_]of Object.entries(n))this.raw_data_db.objects[t][_]=r(ed)(e[t][_]);for(const t of this.processors)await t.prepare_zoo_update_objects(e);for(const[t,r]of Object.entries(e))for(const[e,n]of Object.entries(r))this.update_object({object_db:this.db.objects[t],object_type:t,object_id:e,new_object:n});for(const t of this.processors)await t.process_zoo_update_objects(e)}update_object({object_db:e,object_type:t,object_id:r,new_object:n}){this._sanitize_raw_object({object_id:r,object_type:t,object:n}),e[r]=n}async data_dump(e={}){let{use_raw_db_data:t,skip_db_processors:n,remove_zoodb_id:_,remove_zoodb_info:a}=e;t??=!1,n??=!1,_??=!1,a??=!1;let i={};if(t)return i.db=this.raw_data_db,i;i.db={objects:{},schemas:r(ed)(this.db.schemas)};for(const[e,t]of Object.entries(this.db.objects)){i.db.objects[e]={};const n=this.db.schemas[e];for(const[_,a]of Object.entries(t)){let t=ch(a,n);t._zoodb=r(ed)(a._zoodb),i.db.objects[e][_]=t}}if(!n)for(const t of Array.from(this.processors).reverse())i=await t.process_data_dump(i,e);if(_)for(const[,e]of Object.entries(i.db.objects))for(const[,t]of Object.entries(e)){delete t._zoodb.id}if(a)for(const[,e]of Object.entries(i.db.objects))for(const[,t]of Object.entries(e))delete t._zoodb;return i}}r(s=a("3krpC"))("zoodb._zoodbloaderhandler");s=a("3krpC");var hh,ph,gh,vh,mh,yh,wh,bh,kh={};t(kh,"Validator",(()=>hh),(e=>hh=e)),t(kh,"ValidatorResult",(()=>ph),(e=>ph=e)),t(kh,"ValidatorResultError",(()=>gh),(e=>gh=e)),t(kh,"ValidationError",(()=>vh),(e=>vh=e)),t(kh,"SchemaError",(()=>mh),(e=>mh=e)),t(kh,"SchemaScanResult",(()=>yh),(e=>yh=e)),t(kh,"scan",(()=>wh),(e=>wh=e)),t(kh,"validate",(()=>bh),(e=>bh=e));var xh=hh=a("lMHab");ph=a("bzZym").ValidatorResult,gh=a("bzZym").ValidatorResultError,vh=a("bzZym").ValidationError,mh=a("bzZym").SchemaError,yh=a("hcZ9I").SchemaScanResult,wh=a("hcZ9I").scan,bh=function(e,t,r){return(new xh).validate(e,t,r)};ar=a("2R1eR");var Ph,Oh={},Eh=a("3M269").Buffer,Ah=Oh&&Oh.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var _=Object.getOwnPropertyDescriptor(t,r);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,_)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),Ch=Oh&&Oh.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Sh=Oh&&Oh.__importStar||(Ph=function(e){return Ph=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},Ph(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Ph(e),n=0;n<r.length;n++)"default"!==r[n]&&Ah(t,e,r[n]);return Ch(t,e),t}),Th=Oh&&Oh.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.getJsonSchemaRefParserDefaultOptions=Oh.jsonSchemaParserNormalizeArgs=Oh.dereferenceInternal=Oh.JSONParserErrorGroup=Oh.isHandledError=Oh.UnmatchedParserError=Oh.ParserError=Oh.ResolverError=Oh.MissingPointerError=Oh.InvalidPointerError=Oh.JSONParserError=Oh.UnmatchedResolverError=Oh.dereference=Oh.bundle=Oh.resolve=Oh.parse=Oh.$RefParser=void 0;const Nh=Th(a("5NijP")),Lh=Th(a("1FCt6")),Mh=Th(a("dlWR1"));Oh.jsonSchemaParserNormalizeArgs=Mh.default;const Ih=Th(a("hBMkZ")),jh=Th(a("7UBq0")),Rh=Th(a("ftePO"));Oh.dereferenceInternal=Rh.default;const Dh=Sh(a("b9BWf"));var Fh=a("l8NiV");Object.defineProperty(Oh,"JSONParserError",{enumerable:!0,get:function(){return Fh.JSONParserError}}),Object.defineProperty(Oh,"InvalidPointerError",{enumerable:!0,get:function(){return Fh.InvalidPointerError}}),Object.defineProperty(Oh,"MissingPointerError",{enumerable:!0,get:function(){return Fh.MissingPointerError}}),Object.defineProperty(Oh,"ResolverError",{enumerable:!0,get:function(){return Fh.ResolverError}}),Object.defineProperty(Oh,"ParserError",{enumerable:!0,get:function(){return Fh.ParserError}}),Object.defineProperty(Oh,"UnmatchedParserError",{enumerable:!0,get:function(){return Fh.UnmatchedParserError}}),Object.defineProperty(Oh,"UnmatchedResolverError",{enumerable:!0,get:function(){return Fh.UnmatchedResolverError}}),Object.defineProperty(Oh,"isHandledError",{enumerable:!0,get:function(){return Fh.isHandledError}}),Object.defineProperty(Oh,"JSONParserErrorGroup",{enumerable:!0,get:function(){return Fh.JSONParserErrorGroup}}),a("58l9B");var Bh=a("jU2th");const zh=Th(a("cfZ0q"));var qh=a("h1anm");Object.defineProperty(Oh,"getJsonSchemaRefParserDefaultOptions",{enumerable:!0,get:function(){return qh.getJsonSchemaRefParserDefaultOptions}});class Vh{constructor(){this.schema=null,this.$refs=new Nh.default}async parse(){const e=(0,Mh.default)(arguments);let t;if(!e.path&&!e.schema){const t=(0,Bh.ono)(`Expected a file path, URL, or object. Got ${e.path||e.schema}`);return(0,zh.default)(e.callback,Promise.reject(t))}this.schema=null,this.$refs=new Nh.default;let r="http";if(Dh.isFileSystemPath(e.path))e.path=Dh.fromFileSystemPath(e.path),r="file";else if(!e.path&&e.schema&&"$id"in e.schema&&e.schema.$id){const t=Dh.parse(e.schema.$id),r="https:"===t.protocol?443:80;e.path=`${t.protocol}//${t.hostname}:${r}`}if(e.path=Dh.resolve(Dh.cwd(),e.path),e.schema&&"object"==typeof e.schema){const n=this.$refs._add(e.path);n.value=e.schema,n.pathType=r,t=Promise.resolve(e.schema)}else t=(0,Lh.default)(e.path,this.$refs,e.options);try{const r=await t;if(null===r||"object"!=typeof r||Eh.isBuffer(r)){if(e.options.continueOnError)return this.schema=null,(0,zh.default)(e.callback,Promise.resolve(this.schema));throw Bh.ono.syntax(`"${this.$refs._root$Ref.path||r}" is not a valid JSON Schema`)}return this.schema=r,(0,zh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return e.options.continueOnError&&(0,Fh.isHandledError)(t)?(this.$refs._$refs[Dh.stripHash(e.path)]&&this.$refs._$refs[Dh.stripHash(e.path)].addError(t),(0,zh.default)(e.callback,Promise.resolve(null))):(0,zh.default)(e.callback,Promise.reject(t))}}static parse(){const e=new Vh;return e.parse.apply(e,arguments)}async resolve(){const e=(0,Mh.default)(arguments);try{return await this.parse(e.path,e.schema,e.options),await(0,Ih.default)(this,e.options),Uh(this),(0,zh.default)(e.callback,Promise.resolve(this.$refs))}catch(t){return(0,zh.default)(e.callback,Promise.reject(t))}}static resolve(){const e=new Vh;return e.resolve.apply(e,arguments)}static bundle(){const e=new Vh;return e.bundle.apply(e,arguments)}async bundle(){const e=(0,Mh.default)(arguments);try{return await this.resolve(e.path,e.schema,e.options),(0,jh.default)(this,e.options),Uh(this),(0,zh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return(0,zh.default)(e.callback,Promise.reject(t))}}static dereference(){const e=new Vh;return e.dereference.apply(e,arguments)}async dereference(){const e=(0,Mh.default)(arguments);try{return await this.resolve(e.path,e.schema,e.options),(0,Rh.default)(this,e.options),Uh(this),(0,zh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return(0,zh.default)(e.callback,Promise.reject(t))}}}function Uh(e){if(Fh.JSONParserErrorGroup.getParserErrors(e).length>0)throw new Fh.JSONParserErrorGroup(e)}Oh.$RefParser=Vh,Oh.default=Vh,Oh.parse=Vh.parse,Oh.resolve=Vh.resolve,Oh.bundle=Vh.bundle,Oh.dereference=Vh.dereference;var Gh=a("94hgF");s=a("3krpC");const Wh=e=>function(...t){return new Promise(((r,n)=>{e(...t,((e,...t)=>{null!=e?n(e):r(...t)}))}))};function $h(e,t=null){let r={};for(const n of t??Object.keys(e))r[n]=e.promises?.[n]||(null!=e[n]?Wh(e[n]):null);return r}ar=a("2R1eR");function Yh(e,{fs_root_path:t}={}){var n;return function(e){return"xyzdummyproto:"!==new URL(e,"xyzdummyproto://example.com/").protocol}(e)||(t&&(e=r(ar).join(t,e)),e=`file:${n=e,n.split("/").map((e=>encodeURIComponent(e))).join("/")}`),new URL(e)}const Hh=r(s)("zoodb.schemaloader");class Xh{constructor(e){if(this.config=Object.assign({},e??{}),this.config.schemas=Object.assign({},this.config.schemas),this.schema_names=e.schema_names,this.fs=this.config.fs,this.fsPromises=this.fs.promises??$h(this.fs,["readFile","readdir"]),!this.config.schemas.schema_root)throw new Error("You did not specify a schema_root: in your config!");this.config.schemas.schema_root=Yh(this.config.schemas.schema_root),this.config.schemas.schema_root=new URL(this.config.schemas.schema_root).href,this.config.schemas.schema_root.endsWith("/")||(this.config.schemas.schema_root+="/"),Hh(`Using schema_root = ${this.config.schemas.schema_root}`),this.schemas_by_name={},this.schema_ref_parser=r(Oh);let t=this.config,n=this.fsPromises;this.schema_refparser_resolver={...r(Gh),order:1,canRead:()=>!0,async read(e){Hh(`schema_refparser_resolver.read(), url ${e.url}`);let _=e.url;try{_=_.replace(/^fspath:/,"file:"),_.startsWith("file://")&&!_.startsWith(t.schemas.schema_root)&&(_=new URL(_).pathname.substring(1));let e=new URL(_,t.schemas.schema_root).href;e.startsWith(t.schemas.schema_root)&&!e.endsWith(t.schemas.schema_add_extension)&&(e+=t.schemas.schema_add_extension);const a={url:e,extension:r(ar).extname(e)},i=new URL(a.url),o=i.protocol;if("file:"==o){const e=decodeURIComponent(i.pathname);Hh(`Resolved schema URL ${_} → ${e} on filesystem`);return await n.readFile(e,{encoding:"utf-8"})}return Hh(`Resolved schema URL ${_} → URL ${a.url} [extension=${a.extension} protocol=${o}]`),await r(Gh).read(a)}catch(e){throw console.error(`Error reading ${_}: ${e}`),e}}}}async load_schemas(){Hh(`Loading schemas in ‘${this.config.schemas.schema_root}’ ...`);let e={},t=this.schema_names;if(null==t){const e=new URL(this.config.schemas.schema_root);if("file:"!==e.protocol)throw new Error("schema_names is not set but schema_root is not a filesystem path");let n=decodeURIComponent(e.pathname);n=r(ar).join(n,this.config.schemas.schema_rel_path);const _=this.config.schemas.schema_add_extension;t=[],Hh(`Listing contents of ‘${n}’ and looking for files ending in ‘${_}’`);for(const e of await this.fs.promises.readdir(n))e.endsWith(_)&&t.push(e.slice(0,-_.length))}Hh(`Loading schema names: ${t.join(", ")}`);for(const r of t)e[r]=await this.load_schema_by_name(r),Hh(`Loaded schema ‘${r}’`);return{schemas:e}}async load_schema_by_name(e){if(Object.hasOwn(this.schemas_by_name,e))return this.schemas_by_name[e];let t=r(ar).posix.join(this.config.schemas.schema_rel_path,e),n=new URL(t,this.config.schemas.schema_root).href;Hh(`Requesting schema for ‘${e}’ → path=‘${n}’`),n.startsWith("file://")&&(n=n.replace(/^file:/,"fspath:"));const _=await this.schema_ref_parser.dereference(n,{resolve:{file:!1,http:!1,myresolver:this.schema_refparser_resolver}});return this.schemas_by_name[e]=_,_}}const Zh=r(s)("zoodb.std.stdzoodb");async function Kh(e){let t={};if(t.config=r(o)({ZooDbClass:dh,SchemaLoaderClass:Xh,continue_with_errors:!1,fs:null,fs_data_dir:null,use_relations_populator:null,use_gitlastmodified_processor:null,use_flm_environment:null,zoo_flm_environment_options:null,use_flm_processor:null,flm_options:{refs:{},citations:{csl_style:null,override_arxiv_dois_file:null,preset_bibliography_files:[],default_user_agent:null},allow_unresolved_references:!1,allow_unresolved_citations:!1,resources:{rename_figure_template:null,figure_filename_extensions:null,graphics_resources_fs_data_dir:null,resource_file_extensions:null,graphics_use_srcset_parceljs:{enabled:!1,pixel_density_list:null,image_max_zoom_factor:4}}},use_searchable_text_processor:null,extra_db_processors:{},custom_zoodb_properties:{},searchable_text_options:{object_types:[]},zoo_permalinks:null,schemas:{schema_root:null,schema_rel_path:null,schema_add_extension:null},schema_names:null},e),Zh("makeStandardZooDb: Using config =",t.config),Zh("StandardZooDb: config's flm_options are =",t.config.flm_options),null==t.config.zoo_permalinks)throw new Error("StandardZooDb: The zoo_permalinks: config property is not set");if(t.zoo_permalinks=Object.assign({},t.config.zoo_permalinks),t.zoo_object_permalink=t.zoo_permalinks.object,t.zoo_flm_environment=null,t.config.use_flm_environment&&(t.zoo_flm_environment=await t.config.use_flm_environment(t)),t.zoodb_processors=[],t.zoodb_named_processors={},t.config.use_relations_populator?(t.zoo_relations_populator=await t.config.use_relations_populator(t),t.zoodb_named_processors.zoo_relations_populator=t.zoo_relations_populator,t.zoodb_processors.push(t.zoo_relations_populator)):t.zoo_relations_populator=null,t.config.use_gitlastmodified_processor?(t.zoo_gitlastmodified_processor=await t.config.use_gitlastmodified_processor(t),t.zoodb_named_processors.zoo_gitlastmodified_processor=t.zoo_gitlastmodified_processor,t.zoodb_processors.push(t.zoo_gitlastmodified_processor)):t.zoo_gitlastmodified_processor=null,t.flm_error_policy=t.config.continue_with_errors?"continue":"abort",Zh(`flm_error_policy = ${t.flm_error_policy}`),t.zoo_flm_processor=null,t.config.use_flm_processor&&(t.zoo_flm_processor=await t.config.use_flm_processor(t),t.zoodb_named_processors.zoo_flm_processor=t.zoo_flm_processor,t.zoodb_processors.push(t.zoo_flm_processor)),t.searchable_text_processor=null,t.config.use_searchable_text_processor&&(t.searchable_text_processor=await t.config.use_searchable_text_processor(t),t.zoodb_named_processors.searchable_text_processor=t.searchable_text_processor,t.zoodb_processors.push(t.searchable_text_processor)),t.config.extra_db_processors&&Object.keys(t.config.extra_db_processors).length>0){let e=Object.entries(t.config.extra_db_processors).filter((([e,t])=>null!=t));e.sort((([e,t],[r,n])=>(t?.priority??50)-(n?.priority??50)));for(const[r,n]of e){const e=n.instance;null!=e&&(t.zoodb_named_processors[r]=e,t.zoodb_processors.push(e))}}let n=t.config.ZooDbClass,_=t.config.SchemaLoaderClass,a=new(r(kh).Validator);Zh("Instantiating ZooDb instance object.",{ZooDbClass:n,db_processors:t.zoodb_processors});let i=new n({processors:t.zoodb_processors,schema_validator:a});for(const[e,r]of Object.entries(t))i[e]=r;if(t.config.custom_zoodb_properties)for(const[e,r]of Object.entries(t.config.custom_zoodb_properties))i[e]=r;if(t.config.schemas&&_){const e=new _({fs:t.config.fs,schemas:t.config.schemas,schema_names:t.config.schema_names});i.schema_loader=e;const r=await e.load_schemas();await i.load_data({schemas:r.schemas}),Zh("Created schema loader and loaded the schemas")}return i}const Jh=r(s=a("3krpC"))("zoodb.dbprocessor.computeddata");class Qh extends Xt{constructor(e){super(),this.config=Object.assign({lazy:!1,create_zoo_methods:!0,object_types:null,keep_computed_data_in_data_dumps:!1,computed_data_fieldset_name:"computed_data_values",create_zoodb_special_method:({zoodb:e,object_type:t,computed_property_name:r,accessor_function:n})=>{e[`${t}_${r}`]=n}},e),this.computed_data_spec=this.config.computed_data,null==this.computed_data_spec&&console.warn("Warning: No computed_data set. This DB processor will do nothing."),this.config.lazy&&!this.config.create_zoo_methods&&console.warn("WARNING: ComputedDataProcessor: config.lazy is set to true but create_zoo_methods is set to false.  You'll need to compute the lazy computed properties' values yourself as you won't be able to trigger automatic computation by accessing them through the zoodb special methods!")}async initialize_zoo(){this.config.object_types??=this.zoodb.object_types;const{computed_data_fieldset_name:e}=this.config;if(this.config.create_zoo_methods)for(const[t,r]of Object.entries(this.computed_data_spec))for(const n of Object.keys(r)){let r=null;if(this.config.lazy){const e=this;r=r=>e._access_lazy_property(t,r,n)}else r=r=>this.zoodb.scratch[e][t][r._zoodb.id][n];this.config.create_zoodb_special_method({zoodb:this.zoodb,object_type:t,computed_property_name:n,accessor_function:r})}}async process_zoo(){if(null==this.zoodb)throw new Error("No zoodb set!");for(const e of this.config.object_types){const t=this.zoodb.objects[e];if(null==t)continue;const r=this.computed_data_spec[e];null!=r&&await this._process_object_db(e,t,r)}}async prepare_zoo_update_objects(){}async process_zoo_update_objects(e){if(null==this.zoodb)throw new Error("No zoodb set!");for(const t of this.config.object_types){const r=e[t];if(null==r)continue;const n=this.computed_data_spec[t];null!=n&&await this._process_object_db(t,r,n)}}async process_data_dump(e,t){let{keep_computed_data:r}=t;if(r??=this.config.keep_computed_data_in_data_dumps,r){const{computed_data_fieldset_name:t}=this.config;for(const r of this.config.object_types){const n=this.computed_data_spec[r],_=e.db.objects[r];if(_&&0!=Object.keys(_).length)for(let[e,a]of Object.entries(_)){let _=this.zoodb.scratch[t][r][e];for(const e of Object.keys(n))a[e]=_[e];Object.assign(a,_)}}}return e}_access_lazy_property(e,t,r){let n=this.zoodb.scratch[this.config.computed_data_fieldset_name][e][t._zoodb.id];if(Object.hasOwn(n,r))return n[r];const _=this.computed_data_spec[e][r].fn.call(this.zoodb,t);return n[r]=_,_}async _process_object_computed_property(e,t,r,n){Jh(`Processing computed property ${e}.${r}`);const{computed_data_fieldset_name:_}=this.config;let a=this.zoodb.scratch[_][e];if(null==n.fn_bulk)if(this.config.lazy)Jh(`skipping computation of ‘${e.computed_property_name}’ (lazy)`);else for(const[e,_]of Object.entries(t)){const t=n.fn.call(this.zoodb,_);a[e][r]=t}else{Jh("Processing computed property ... is bulk!");const e=await n.fn_bulk.call(this.zoodb,t);for(const[n,_]of Object.entries(t)){const t=e[n];a[n][r]=t}}}async _process_object_db(e,t,r){const{computed_data_fieldset_name:n}=this.config;null==this.zoodb.scratch[n]&&(this.zoodb.scratch[n]={});let _=this.zoodb.scratch[n][e];null==_&&(_={},this.zoodb.scratch[n][e]=_);for(const[e,r]of Object.entries(t))_[e]=Object.create(null);for(const[n,_]of Object.entries(r))await this._process_object_computed_property(e,t,n,_)}}const ep={code:{schema_name:"code",data_src_path:"codes/",load_objects:e=>[e]},space:{schema_name:"space",data_src_path:"code_extra/spaces.yml",load_objects:e=>e},domain:{schema_name:"domain",data_src_path:"codetree/domains.yml",load_objects:e=>e},kingdom:{schema_name:"kingdom",data_src_path:"codetree/kingdoms.yml",load_objects:e=>{let t=[];for(const[r,n]of Object.entries(e.kingdoms_by_domain_id))for(const e of n)t.push(Object.assign({parent_domain:{domain_id:r}},e));return t}},codelist:{schema_name:"codelist",data_src_path:"codelists/"},user:{schema_name:"user",data_src_path:"users/users_db.yml",load_objects:e=>e}},tp=r(s)("eczoodb"),rp={continue_with_errors:!1,use_relations_populator:null,use_gitlastmodified_processor:null,use_flm_environment:null,flm_allow_unresolved_references:!1,flm_allow_unresolved_citations:!1,use_flm_processor:null,flm_options:{environment_options:null,refs:{code:{formatted_ref_flm_text_fn:(e,t)=>t.name.flm_text},codelist:{formatted_ref_flm_text_fn:(e,t)=>t.title.flm_text},user:{formatted_ref_flm_text_fn:(e,t)=>t.name}},citations:{csl_style:null,override_arxiv_dois_file:"code_extra/override_arxiv_dois.yml",preset_bibliography_files:["code_extra/bib_preset.yml"],default_user_agent:null},resources:{rename_figure_template:null,figure_filename_extensions:null,graphics_resources_fs_data_dir:null}},use_searchable_text_processor:null,searchable_text_options:{object_types:["code"]},zoo_permalinks:Qf},np={user:{earliest_contribution:{fn:function(e){if(!e.zoo_contributions||!e.zoo_contributions.code)return null;let t=null;for(const r of e.zoo_contributions.code){const e=new Date(r.date);(null===t||e-t<0)&&(t=e)}return t}}},code:{short_name:{fn:function(e){const t=this;if(null!=e.short_name&&""!==e.short_name)return e.short_name;let r=e.name,n=null;return t.config.use_flm_processor&&(r=r.flm_text),r.endsWith(" code")&&(n=r.slice(0,-5)),null!==n?t.config.use_flm_processor?t.zoo_flm_environment.make_fragment(n,t.$$kw({what:`${e.name.what} (short)`,resource_info:e._zoodb.resource_info,standalone_mode:!0})):n:e.name}}}};class _p extends dh{static EcZooDbComputedData=np;constructor(e){super(e)}codelist_compiled_code_id_list(e){return this.codelist_compiled_codes_info(e).code_id_list}codelist_compiled_code_list(e){return this.codelist_compiled_codes_info(e).code_list}codelist_compiled_code_id_set(e){return this.codelist_compiled_codes_info(e).code_id_set}code_visit_relations(e,{relation_properties:t,callback:r,predicate_relation:n}){let _=[{code:e,reached_from_code:null,reached_from_code_info:null,relation_object:null}],a={};for(a[e.code_id]=!0;_.length;){const e=_.shift(),i=e.code;if(!0===r(i,{...e}))return;for(const r of t){if(!i.relations||!i.relations[r])continue;let t=i.relations[r];for(const o of t){if(null!=n&&!n(i,o,r))continue;const t=o.code_id;a[t]||(a[t]=!0,_.push({code:this.objects.code[t],reached_from_code:i,reached_from_code_info:e,relation_object:o}))}}}}code_is_descendant_of(e,t){let r=!1;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{if(e.code_id===t)return r=!0,!0}}),r}code_is_cousin_of(e,t){if(null==e.relations)return!1;for(const r of["cousins","cousin_of"])if(null!=e.relations[r])for(const n of e.relations[r])if(n.code_id===t)return!0;return!1}code_parent_domains(e,{find_domain_id:t,only_primary_parent_relation:r}={}){let n=null;r&&(n=(e,t,r)=>this.code_is_primary_parent(t.code,e));let _=new Set;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{const r=e.relations?.root_for_domain,n=e.relations?.root_for_kingdom;if(r&&r.length)for(const{domain_id:e,domain:n}of r)if(_.add(n),null!=t&&e===t)return!0;if(n&&n.length)for(const{kingdom:e}of n){const{domain_id:r,domain:n}=e.parent_domain;if(null!=n&&(_.add(n),null!=t&&r===t))return!0}},predicate_relation:n}),Array.from(_)}code_parent_kingdoms(e,{find_kingdom_id:t,only_primary_parent_relation:r}={}){let n=null;r&&(n=(e,t,r)=>this.code_is_primary_parent(t.code,e));let _=new Set;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{const r=e.relations?.root_for_kingdom;if(r&&r.length)for(const{kingdom_id:e,kingdom:n}of r)if(_.add(n),null!=t&&e===t)return!0},predicate_relation:n}),Array.from(_)}code_is_property_code(e){let t=this.code_parent_kingdoms(e,{only_primary_parent_relation:!0});return!t||!t.length}code_is_primary_parent(e,t){const r=t.relations;return null!=r&&(!(null!=r.root_for_domain&&r.root_for_domain.length>=1)&&(!(null!=r.root_for_kingdom&&r.root_for_kingdom.length>=1)&&r.parents?.[0]?.code_id===e.code_id))}code_get_primary_parent(e){const t=e.relations;if(null==t)return null;let r=t.root_for_domain;if(null!=r&&r.length>0){if(r.length>1)throw new Error(`Code ${e.code_id} is root code for multiple domains: `+r.map((e=>e.domain_id)).join(", "));return{domain:r[0].domain,relation_object:r[0]}}let n=t.root_for_kingdom;if(null!=n&&n.length>0){if(n.length>1)throw new Error(`Code ${e.code_id} is root for multiple kingdoms: `+n.map((e=>e.kingdom_id)).join(", "));return{kingdom:n[0].kingdom,relation_object:n[0]}}const _=t.parents;return null!=_&&_.length>0?{code:_[0].code,relation_object:_[0]}:null}code_get_secondary_parents(e){const t=e.relations;if(null==t||null==t.parents||0==t.parents.length)return[];let r=t.root_for_domain;if(null!=r&&r.length>0)return t.parents;let n=t.root_for_kingdom;return null!=n&&n.length>0?t.parents:t.parents.slice(1)}code_get_primary_parent_root(e,{include_domain_kingdom_root_info:t}={}){let r=e,n=!0,_=[e.code_id];for(;(null==r.relations?.root_for_kingdom||0==r.relations?.root_for_kingdom?.length)&&(null==r.relations?.root_for_domain||0==r.relations?.root_for_domain?.length)&&r.relations?.parents?.length>0;){r=r.relations.parents[0].code,n=!1;const e=r.code_id;if(_.includes(e)){const t=[].concat(_,[e]).map((e=>{let t=this.objects.code[e];return`‘${t.name.flm_text??t.name}’ (${t.code_id})`}));throw new Error("Detected cycle in primary-parent relationships: "+t.join(" → "))}_.push(e)}let a={primary_parent_root_code:r,primary_parent_chain_code_ids:_,is_root_code:n};if(t){let e=null,t=null,_=!1,i=!1,o=r.relations?.root_for_domain;if(null!=o&&o.length>0){if(o.length>1)throw new Error(`Code ${r.code_id} is root code for multiple domains: `+o.map((e=>e.domain_id)).join(", "));e=o[0].domain,t=null,_=n,i=!1}else{let a=r.relations?.root_for_kingdom;if(null!=a&&a.length>0){if(a.length>1)throw new Error(`Code ${r.code_id} is root for multiple kingdoms: `+a.map((e=>e.kingdom_id)).join(", "));t=a[0].kingdom,e=t?.parent_domain,_=!1,i=n}}a.parent_domain=e,a.parent_kingdom=t,a.is_domain_root_code=_,a.is_kingdom_root_code=i}return a}code_get_parent_domain(e,{primary_parent_root_code:t}={}){null==t&&({primary_parent_root_code:t}=this.code_get_primary_parent_root(e));let r=t.relations?.root_for_domain;if(null!=r&&r.length>0){if(r.length>1)throw new Error(`Code ${t.code_id} is root code for multiple domains: `+r.map((e=>e.domain_id)).join(", "));return r[0].domain}let n=t.relations?.root_for_kingdom;if(null!=n&&n.length>0){if(n.length>1)throw new Error(`Code ${t.code_id} is root for multiple kingdoms: `+n.map((e=>e.kingdom_id)).join(", "));return n[0].kingdom?.parent_domain}return null}code_get_parent_kingdom(e,{primary_parent_root_code:t}={}){null==t&&({primary_parent_root_code:t}=this.code_get_primary_parent_root(e));let r=t.relations?.root_for_kingdom;if(null==r||0===r.length)return null;if(r.length>1)throw new Error(`Code ${t.code_id} is a root code for multiple kingdoms: `+r.map((e=>e.kingdom_id)).join(", "));return r[0].kingdom}code_get_family_tree(e,{parent_child_sort:t,only_primary_parent_relation:r,return_relation_info:n,predicate_relation:_}={}){let a=[];r&&a.push(((e,t,r)=>this.code_is_primary_parent(e,t.code))),_&&a.push(_);let i=null;a.length&&(i=(e,t,r)=>{for(const n of a)if(!n(e,t,r))return!1;return!0});let o=[];if(this.code_visit_relations(e,{relation_properties:["parent_of"],callback:(e,t)=>{n?o.push(t):o.push(e)},predicate_relation:i}),t??1){if(n){const e=o.map((e=>e.code)),t=Object.fromEntries(o.map((e=>[e.code.code_id,e])));return this.code_parent_child_sort(e).map((e=>t[e.code_id]))}return this.code_parent_child_sort(o)}return o}code_get_ancestors(e,{parent_child_sort:t,only_primary_parent_relation:r,skip_first_primary_parent_relation:n,return_relation_info:_,predicate_relation:a}={}){let i=[];r&&i.push(((e,t,r)=>this.code_is_primary_parent(t.code,e))),n&&i.push(((t,r,n)=>t!==e||!this.code_is_primary_parent(r.code,t))),a&&i.push(a);let o=null;i.length&&(o=(e,t,r)=>{for(const n of i)if(!n(e,t,r))return!1;return!0});let l=[];if(this.code_visit_relations(e,{relation_properties:["parents"],callback:(e,t)=>{_?l.push(t):l.push(e)},predicate_relation:o}),t??1){if(_){const e=l.map((e=>e.code)),t=Object.fromEntries(l.map((e=>[e.code.code_id,e])));return this.code_parent_child_sort(e).map((e=>t[e.code_id]))}return this.code_parent_child_sort(l)}return l}code_parent_child_sort(e){let t=[];const r=e.map((e=>e.code_id));let n={},_=Object.fromEntries(e.map((e=>[e.code_id,0])));for(const t of e)if(null!=t.relations&&null!=t.relations.parent_of){let e=t.relations.parent_of.map((e=>[r.indexOf(e.code_id),e.code])).filter((([e,t])=>-1!==e));e.sort(((e,t)=>e[0]-t[0]));const a=e.map((([e,t])=>t));n[t.code_id]=a;for(const e of a)_[e.code_id]+=1}let a=e.filter((e=>0===_[e.code_id]));for(;a.length;){const e=a.shift();t.push(e);let r=[];for(;null!=n[e.code_id]&&n[e.code_id].length;){const t=n[e.code_id].shift();_[t.code_id]-=1,0===_[t.code_id]&&r.push(t)}a=r.concat(a),delete n[e.code_id]}if(-1!==Object.values(n).findIndex((e=>null!=e&&e.length>0))){const e=()=>{for(;;){let e=new Set;if(n=Object.fromEntries(Object.entries(n).map((([t,r])=>{let _=(r??[]).filter((e=>{const t=e.code_id;return!(!Object.hasOwn(n,t)||null==n[t]||0==n[t].length)}));return 0==_.length&&e.add(t),[t,_]}))),!e.size)break;for(const t of e)delete n[t]}};e();let t=[];for(;Object.keys(n).length;){const[r,_]=Object.entries(n)[0];let a=[],i=this.objects.code[r];for(;null!=i&&!a.includes(i.code_id);)a.push(i.code_id),i=n[i.code_id].shift();a.push(r),t.push(a),e()}throw new Error("ERROR: Cycles detected in parent-child relationships:\n"+t.map((e=>"    "+e.map((e=>{const t=this.objects.code[e];return`‘${t.name.flm_text??t.name}’ (${e})`})).join(" → "))).join("\n"))}return t}async validate(){super.validate();this.code_parent_child_sort(Object.values(this.objects.code));let e=[];for(const[t,r]of Object.entries(this.objects.code)){const n=r.relations?.root_for_domain??[],_=r.relations?.root_for_kingdom??[];n.length+_.length>1&&e.push(`Code ‘${t}’ is root code for more than one domain/kingdom: `+[n.length?"Domain(s): "+n.map((e=>e.domain_id)).join(", "):"",_.length?"Kingdom(s): "+_.map((e=>e.kingdom_id)).join(", "):""].join(" and "));const a=e=>[t,e.code_id].sort().join(":");let i=new Set([].concat(r.relations?.parents??[],r.relations?.parent_of??[]).map((e=>a(e)))),o=new Set;const l=r=>{r.code_id===t&&(tp(`Invalid cousin relationship to self: ${t}`),e.push(`Invalid cousin relationship to self: ${t}`));const n=a(r);i.has(n)&&(tp(`Detected same relationship as parent and as cousin: ‘${t}’↔‘${r.code_id}`),e.push(`Detected same relationship as parent and as cousin: ‘${t}’↔‘${r.code_id}`)),o.has(n)&&(tp(`Duplicate cousin relationship detected: ‘${t}’↔‘${r.code_id}’`),e.push(`Duplicate cousin relationship detected: ‘${t}’↔‘${r.code_id}’`)),o.add(n)};for(const e of r.relations?.cousins??[])l(e);for(const e of r.relations?.cousin_of??[])l(e)}if(e.length)throw console.error("🚨 ZOO VALIDATION ERROR(S) 🚨\n"+e.join("\n")),new Error("Zoo validation error(s)!\n"+e.map((e=>"  ▶︎ "+e)).join("\n"))}}async function ap(e={},{use_schemas_loader:t,schema_root:n,schema_add_extension:_}={}){_=_??null,tp("schema_root is ",{schema_root:n=n??null});let a={schema_root:n,schema_rel_path:"schemas/",schema_add_extension:_??".yml"};return(t??1)||(a=!1),e=r(o)({ZooDbClass:_p,extra_db_processors:{computed_data:{priority:10,instance:new Qh({computed_data:_p.EcZooDbComputedData})}},schemas:a,schema_names:Object.entries(ep).map((([e,t])=>t.schema_name??e))},rp,e),await Kh(e)}const ip=r(s)("eczoo_site.jscomponents.codegraph.setup_eczoodb");async function op(e){let t=e.refs_data,r={use_relations_populator:Qt,use_flm_environment:Jf,use_flm_processor:!1,flm_options:{allow_unresolved_references:!0},use_searchable_text_processor:!1,fs:null,continue_with_errors:!0},n=await ap(r,{use_schemas_loader:!1});return ip("Created eczoodb, loading refs & citations ..."),n.zoo_flm_environment.ref_resolver.load_database(t.refs),n.zoo_flm_environment.citations_provider.load_database(t.citations),ip("Loaded refs & citations, loading data ..."),await n.load_data(e.db),n}s=a("3krpC");var lp,sp,cp={},up={},fp={},dp={};sp=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var hp;function pp(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ae;++t<r;)this.add(e[t])}hp=function(e){return this.__data__.has(e)},pp.prototype.add=pp.prototype.push=sp,pp.prototype.has=hp,dp=pp;var gp={};gp=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var vp={};vp=function(e,t){return e.has(t)};fp=function(e,t,r,n,_,a){var i=1&r,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var s=a.get(e),c=a.get(t);if(s&&c)return s==t&&c==e;var u=-1,f=!0,d=2&r?new dp:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var h=e[u],p=t[u];if(n)var g=i?n(p,h,u,t,e,a):n(h,p,u,e,t,a);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!gp(t,(function(e,t){if(!vp(d,t)&&(h===e||_(h,e,r,n,a)))return d.push(t)}))){f=!1;break}}else if(h!==p&&!_(h,p,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f};var mp,yp={};mp=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var wp;wp=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var bp=E?E.prototype:void 0,kp=bp?bp.valueOf:void 0;yp=function(e,t,r,n,_,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Ie(e),new Ie(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=mp;case"[object Set]":var l=1&n;if(o||(o=wp),e.size!=t.size&&!l)return!1;var s=i.get(e);if(s)return s==t;n|=2,i.set(e,t);var c=fp(o(e),o(t),n,_,a,i);return i.delete(e),c;case"[object Symbol]":if(kp)return kp.call(e)==kp.call(t)}return!1};var xp={},Pp=Object.prototype.hasOwnProperty;xp=function(e,t,r,n,_,a){var i=1&r,o=wd(e),l=o.length;if(l!=wd(t).length&&!i)return!1;for(var s=l;s--;){var c=o[s];if(!(i?c in t:Pp.call(t,c)))return!1}var u=a.get(e),f=a.get(t);if(u&&f)return u==t&&f==e;var d=!0;a.set(e,t),a.set(t,e);for(var h=i;++s<l;){var p=e[c=o[s]],g=t[c];if(n)var v=i?n(g,p,c,t,e,a):n(p,g,c,e,t,a);if(!(void 0===v?p===g||_(p,g,r,n,a):v)){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(d=!1)}return a.delete(e),a.delete(t),d};_t=a("4a4bO");var Op="[object Arguments]",Ep="[object Array]",Ap="[object Object]",Cp=Object.prototype.hasOwnProperty;function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Tp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Np(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rp(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Fp(e))||t){r&&(e=r);var n=0,_=function(){};return{s:_,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:_}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw a}}}}function Mp(e,t,r){return(t=Rp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ip(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,_,a,i,o=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){s=!0,_=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw _}}return o}}(e,t)||Fp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jp(e){return function(e){if(Array.isArray(e))return Sp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rp(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Dp(e){return Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(e)}function Fp(e,t){if(e){if("string"==typeof e)return Sp(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sp(e,t):void 0}}up=function(e,t,r,n,_,a){var i=Qe(e),o=Qe(t),l=i?Ep:xd(e),s=o?Ep:xd(t),c=(l=l==Op?Ap:l)==Ap,f=(s=s==Op?Ap:s)==Ap,d=l==s;if(d&&_t(e)){if(!_t(t))return!1;i=!0,c=!1}if(d&&!c)return a||(a=new u),i||ft(e)?fp(e,t,r,n,_,a):yp(e,t,l,r,n,_,a);if(!(1&r)){var h=c&&Cp.call(e,"__wrapped__"),p=f&&Cp.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,v=p?t.value():t;return a||(a=new u),_(g,v,r,n,a)}}return!!d&&(a||(a=new u),xp(e,t,r,n,_,a))},cp=function e(t,r,n,_,a){return t===r||(null==t||null==r||!He(t)&&!He(r)?t!=t&&r!=r:up(t,r,n,_,e,a))},lp=function(e,t){return cp(e,t)};var Bp="undefined"==typeof window?null:window,zp=Bp?Bp.navigator:null;Bp&&Bp.document;var qp,Vp,Up,Gp,Wp,$p,Yp,Hp,Xp,Zp,Kp,Jp,Qp,eg,tg,rg,ng,_g,ag,ig,og,lg,sg,cg,ug,fg,dg,hg,pg=Dp(""),gg=Dp({}),vg=Dp((function(){})),mg="undefined"==typeof HTMLElement?"undefined":Dp(HTMLElement),yg=function(e){return e&&e.instanceString&&bg(e.instanceString)?e.instanceString():null},wg=function(e){return null!=e&&Dp(e)==pg},bg=function(e){return null!=e&&Dp(e)===vg},kg=function(e){return!Eg(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},xg=function(e){return null!=e&&Dp(e)===gg&&!kg(e)&&e.constructor===Object},Pg=function(e){return null!=e&&Dp(e)===Dp(1)&&!isNaN(e)},Og=function(e){return"undefined"===mg?void 0:null!=e&&e instanceof HTMLElement},Eg=function(e){return Ag(e)||Cg(e)},Ag=function(e){return"collection"===yg(e)&&e._private.single},Cg=function(e){return"collection"===yg(e)&&!e._private.single},Sg=function(e){return"core"===yg(e)},Tg=function(e){return"stylesheet"===yg(e)},Ng=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},Lg=function(e){return function(e){return null!=e&&Dp(e)===gg}(e)&&bg(e.then)},Mg=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var r=function(){var n,_=arguments,a=t.apply(this,_),i=r.cache;return(n=i[a])||(n=i[a]=e.apply(this,_)),n};return r.cache={},r},Ig=Mg((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),jg=Mg((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),Rg=Mg((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),Dg=function(e){return Ng(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Fg="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Bg="rgb[a]?\\(("+Fg+"[%]?)\\s*,\\s*("+Fg+"[%]?)\\s*,\\s*("+Fg+"[%]?)(?:\\s*,\\s*("+Fg+"))?\\)",zg="rgb[a]?\\((?:"+Fg+"[%]?)\\s*,\\s*(?:"+Fg+"[%]?)\\s*,\\s*(?:"+Fg+"[%]?)(?:\\s*,\\s*(?:"+Fg+"))?\\)",qg="hsl[a]?\\(("+Fg+")\\s*,\\s*("+Fg+"[%])\\s*,\\s*("+Fg+"[%])(?:\\s*,\\s*("+Fg+"))?\\)",Vg="hsl[a]?\\((?:"+Fg+")\\s*,\\s*(?:"+Fg+"[%])\\s*,\\s*(?:"+Fg+"[%])(?:\\s*,\\s*(?:"+Fg+"))?\\)",Ug=function(e,t){return e<t?-1:e>t?1:0},Gg=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var _=Object.keys(n),a=0;a<_.length;a++){var i=_[a];e[i]=n[i]}}return e},Wg=function(e){return(kg(e)?e:null)||function(e){return $g[e.toLowerCase()]}(e)||function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,_=16;return 4===e.length?(t=parseInt(e[1]+e[1],_),r=parseInt(e[2]+e[2],_),n=parseInt(e[3]+e[3],_)):(t=parseInt(e[1]+e[2],_),r=parseInt(e[3]+e[4],_),n=parseInt(e[5]+e[6],_)),[t,r,n]}}(e)||function(e){var t,r=new RegExp("^"+Bg+"$").exec(e);if(r){t=[];for(var n=[],_=1;_<=3;_++){var a=r[_];if("%"===a[a.length-1]&&(n[_]=!0),a=parseFloat(a),n[_]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var i=n[1]||n[2]||n[3],o=n[1]&&n[2]&&n[3];if(i&&!o)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}(e)||function(e){var t,r,n,_,a,i,o,l;function s(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var c=new RegExp("^"+qg+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(c[2]))<0||n>100)return;if(n/=100,(_=parseFloat(c[3]))<0||_>100)return;if(_/=100,void 0!==(a=c[4])&&((a=parseFloat(a))<0||a>1))return;if(0===n)i=o=l=Math.round(255*_);else{var u=_<.5?_*(1+n):_+n-_*n,f=2*_-u;i=Math.round(255*s(f,u,r+1/3)),o=Math.round(255*s(f,u,r)),l=Math.round(255*s(f,u,r-1/3))}t=[i,o,l,a]}return t}(e)},$g={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yg=function(e){for(var t=e.map,r=e.keys,n=r.length,_=0;_<n;_++){var a=r[_];if(xg(a))throw Error("Tried to set map with object key");_<r.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},Hg=function(e){for(var t=e.map,r=e.keys,n=r.length,_=0;_<n;_++){var a=r[_];if(xg(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))return t}return t},Xg="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function Zg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Kg(){if(Vp)return qp;return Vp=1,qp=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function Jg(){if($p)return Wp;$p=1;var e=function(){if(Gp)return Up;Gp=1;var e="object"==typeof Xg&&Xg&&Xg.Object===Object&&Xg;return Up=e}(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Wp=r}function Qg(){if(Jp)return Kp;Jp=1;var e=function(){if(Zp)return Xp;Zp=1;var e=/\s/;return Xp=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}}(),t=/^\s+/;return Kp=function(r){return r?r.slice(0,e(r)+1).replace(t,""):r}}function ev(){if(eg)return Qp;eg=1;var e=Jg().Symbol;return Qp=e}function tv(){if(ig)return ag;ig=1;var e=ev(),t=function(){if(rg)return tg;rg=1;var e=ev(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,_=e?e.toStringTag:void 0;return tg=function(e){var t=r.call(e,_),a=e[_];try{e[_]=void 0;var i=!0}catch(e){}var o=n.call(e);return i&&(t?e[_]=a:delete e[_]),o}}(),r=function(){if(_g)return ng;_g=1;var e=Object.prototype.toString;return ng=function(t){return e.call(t)}}(),n=e?e.toStringTag:void 0;return ag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function rv(){if(cg)return sg;cg=1;var e=tv(),t=lg?og:(lg=1,og=function(e){return null!=e&&"object"==typeof e});return sg=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}var nv=Zg(function(){if(hg)return dg;hg=1;var e=Kg(),t=function(){if(Hp)return Yp;Hp=1;var e=Jg();return Yp=function(){return e.Date.now()}}(),r=function(){if(fg)return ug;fg=1;var e=Qg(),t=Kg(),r=rv(),n=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt;return ug=function(o){if("number"==typeof o)return o;if(r(o))return NaN;if(t(o)){var l="function"==typeof o.valueOf?o.valueOf():o;o=t(l)?l+"":l}if("string"!=typeof o)return 0===o?o:+o;o=e(o);var s=_.test(o);return s||a.test(o)?i(o.slice(2),s?2:8):n.test(o)?NaN:+o}}(),n=Math.max,_=Math.min;return dg=function(a,i,o){var l,s,c,u,f,d,h=0,p=!1,g=!1,v=!0;if("function"!=typeof a)throw new TypeError("Expected a function");function m(e){var t=l,r=s;return l=s=void 0,h=e,u=a.apply(r,t)}function y(e){var t=e-d;return void 0===d||t>=i||t<0||g&&e-h>=c}function w(){var e=t();if(y(e))return b(e);f=setTimeout(w,function(e){var t=i-(e-d);return g?_(t,c-(e-h)):t}(e))}function b(e){return f=void 0,v&&l?m(e):(l=s=void 0,u)}function k(){var e=t(),r=y(e);if(l=arguments,s=this,d=e,r){if(void 0===f)return function(e){return h=e,f=setTimeout(w,i),p?m(e):u}(d);if(g)return clearTimeout(f),f=setTimeout(w,i),m(d)}return void 0===f&&(f=setTimeout(w,i)),u}return i=r(i)||0,e(o)&&(p=!!o.leading,c=(g="maxWait"in o)?n(r(o.maxWait)||0,i):c,v="trailing"in o?!!o.trailing:v),k.cancel=function(){void 0!==f&&clearTimeout(f),h=0,l=d=s=f=void 0},k.flush=function(){return void 0===f?u:b(t())},k}}()),_v=Bp?Bp.performance:null,av=_v&&_v.now?function(){return _v.now()}:function(){return Date.now()},iv=function(){if(Bp){if(Bp.requestAnimationFrame)return function(e){Bp.requestAnimationFrame(e)};if(Bp.mozRequestAnimationFrame)return function(e){Bp.mozRequestAnimationFrame(e)};if(Bp.webkitRequestAnimationFrame)return function(e){Bp.webkitRequestAnimationFrame(e)};if(Bp.msRequestAnimationFrame)return function(e){Bp.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(av())}),1e3/60)}}(),ov=function(e){return iv(e)},lv=av,sv=9261,cv=5381,uv=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sv;!(t=e.next()).done;)r=65599*r+t.value|0;return r},fv=function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:sv)+e|0},dv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cv;return(t<<5)+t+e|0},hv=function(e){return 2097152*e[0]+e[1]},pv=function(e,t){return[fv(e[0],t[0]),dv(e[1],t[1])]},gv=function(e,t){var r={value:0,done:!1},n=0,_=e.length;return uv({next:function(){return n<_?r.value=e.charCodeAt(n++):r.done=!0,r}},t)},vv=function(){return mv(arguments)},mv=function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?gv(n):gv(n,t)}return t},yv=!0,wv=null!=console.warn,bv=null!=console.trace,kv=Number.MAX_SAFE_INTEGER||9007199254740991,xv=function(){return!0},Pv=function(){return!1},Ov=function(){return 0},Ev=function(){},Av=function(e){throw new Error(e)},Cv=function(e){if(void 0===e)return yv;yv=!!e},Sv=function(e){Cv()&&(wv?console.warn(e):(console.log(e),bv&&console.trace()))},Tv=function(e){return null==e?e:kg(e)?e.slice():xg(e)?function(e){return Gg({},e)}(e):e},Nv=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},Lv={},Mv=function(){return Lv},Iv=function(e){var t=Object.keys(e);return function(r){for(var n={},_=0;_<t.length;_++){var a=t[_],i=null==r?void 0:r[a];n[a]=void 0===i?e[a]:i}return n}},jv=function(e,t,r){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},Rv=function(e){e.splice(0,e.length)},Dv=function(e,t,r){return r&&(t=Rg(r,t)),e[t]},Fv=function(e,t,r,n){r&&(t=Rg(r,t)),e[t]=n},Bv="undefined"!=typeof Map?Map:function(){return Np((function e(){Tp(this,e),this._obj={}}),[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}])}(),zv=function(){return Np((function e(t){if(Tp(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}}),[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}])}(),qv="undefined"!==("undefined"==typeof Set?"undefined":Dp(Set))?Set:zv,Vv=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&Sg(e)){var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===n||"edges"===n){this.length=1,this[0]=this;var _=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new qv,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==_.position.x&&(_.position.x=0),null==_.position.y&&(_.position.y=0),t.renderedPosition){var a=t.renderedPosition,i=e.pan(),o=e.zoom();_.position={x:(a.x-i.x)/o,y:(a.y-i.y)/o}}var l=[];kg(t.classes)?l=t.classes:wg(t.classes)&&(l=t.classes.split(/\s+/));for(var s=0,c=l.length;s<c;s++){var u=l[s];u&&""!==u&&_.classes.add(u)}this.createEmitter(),(void 0===r||r)&&this.restore();var f=t.style||t.css;f&&(Sv("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(f))}else Av("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else Av("An element must have a core reference and parameters set")},Uv=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,n){var _;xg(t)&&!Eg(t)&&(t=(_=t).roots||_.root,r=_.visit,n=_.directed),n=2!==arguments.length||bg(r)?n:r,r=bg(r)?r:function(){};for(var a,i=this._private.cy,o=t=wg(t)?this.filter(t):t,l=[],s=[],c={},u={},f={},d=0,h=this.byGroup(),p=h.nodes,g=h.edges,v=0;v<o.length;v++){var m=o[v],y=m.id();m.isNode()&&(l.unshift(m),e.bfs&&(f[y]=!0,s.push(m)),u[y]=0)}for(var w,b=function(){var t=e.bfs?l.shift():l.pop(),_=t.id();if(e.dfs){if(f[_])return 0;f[_]=!0,s.push(t)}var i,o=u[_],h=c[_],v=null!=h?h.source():null,m=null!=h?h.target():null,y=null==h?void 0:t.same(v)?m[0]:v[0];if(!0===(i=r(t,h,y,d++,o)))return a=t,1;if(!1===i)return 1;for(var w=t.connectedEdges().filter((function(e){return(!n||e.source().same(t))&&g.has(e)})),b=0;b<w.length;b++){var k=w[b],x=k.connectedNodes().filter((function(e){return!e.same(t)&&p.has(e)})),P=x.id();0===x.length||f[P]||(x=x[0],l.push(x),e.bfs&&(f[P]=!0,s.push(x)),c[P]=k,u[P]=u[_]+1)}};0!==l.length&&(0===(w=b())||1!==w););for(var k=i.collection(),x=0;x<s.length;x++){var P=s[x],O=c[P.id()];null!=O&&k.push(O),k.push(P)}return{path:i.collection(k),found:i.collection(a)}}},Gv={breadthFirstSearch:Uv({bfs:!0}),depthFirstSearch:Uv({dfs:!0})};Gv.bfs=Gv.breadthFirstSearch,Gv.dfs=Gv.depthFirstSearch;var Wv,$v,Yv,Hv={exports:{}},Xv=Hv.exports;function Zv(){return Wv||(Wv=1,e=Hv,function(){var t,r,n,_,a,i,o,l,s,c,u,f,d,h,p;n=Math.floor,c=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},s=function(e,t,_,a,i){var o;if(null==_&&(_=0),null==i&&(i=r),_<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);_<a;)i(t,e[o=n((_+a)/2)])<0?a=o:_=o+1;return[].splice.apply(e,[_,_-_].concat(t)),t},i=function(e,t,n){return null==n&&(n=r),e.push(t),h(e,0,e.length-1,n)},a=function(e,t){var n,_;return null==t&&(t=r),n=e.pop(),e.length?(_=e[0],e[0]=n,p(e,0,t)):_=n,_},l=function(e,t,n){var _;return null==n&&(n=r),_=e[0],e[0]=t,p(e,0,n),_},o=function(e,t,n){var _;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(_=[e[0],t])[0],e[0]=_[1],p(e,0,n)),t},_=function(e,t){var _,a,i,o,l,s;for(null==t&&(t=r),l=[],a=0,i=(o=function(){s=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)s.push(t);return s}.apply(this).reverse()).length;a<i;a++)_=o[a],l.push(p(e,_,t));return l},d=function(e,t,n){var _;if(null==n&&(n=r),-1!==(_=e.indexOf(t)))return h(e,0,_,n),p(e,_,n)},u=function(e,t,n){var a,i,l,s,c;if(null==n&&(n=r),!(i=e.slice(0,t)).length)return i;for(_(i,n),l=0,s=(c=e.slice(t)).length;l<s;l++)a=c[l],o(i,a,n);return i.sort(n).reverse()},f=function(e,t,n){var i,o,l,u,f,d,h,p,g;if(null==n&&(n=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(n)).length)return l;for(o=l[l.length-1],u=0,d=(h=e.slice(t)).length;u<d;u++)n(i=h[u],o)<0&&(s(l,i,0,null,n),l.pop(),o=l[l.length-1]);return l}for(_(e,n),g=[],f=0,p=c(t,e.length);0<=p?f<p:f>p;0<=p?++f:--f)g.push(a(e,n));return g},h=function(e,t,n,_){var a,i,o;for(null==_&&(_=r),a=e[n];n>t&&_(a,i=e[o=n-1>>1])<0;)e[n]=i,n=o;return e[n]=a},p=function(e,t,n){var _,a,i,o,l;for(null==n&&(n=r),a=e.length,l=t,i=e[t],_=2*t+1;_<a;)(o=_+1)<a&&!(n(e[_],e[o])<0)&&(_=o),e[t]=e[_],_=2*(t=_)+1;return e[t]=i,h(e,l,t,n)},t=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=i,e.pop=a,e.replace=l,e.pushpop=o,e.heapify=_,e.updateItem=d,e.nlargest=u,e.nsmallest=f,e.prototype.push=function(e){return i(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return _(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e.exports=t}.call(Xv)),Hv.exports;var e}var Kv=Zg(Yv?$v:(Yv=1,$v=Zv())),Jv=Iv({root:null,weight:function(e){return 1},directed:!1}),Qv={dijkstra:function(e){if(!xg(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=Jv(e),n=r.root,_=r.weight,a=r.directed,i=this,o=_,l=wg(n)?this.filter(n)[0]:n[0],s={},c={},u={},f=this.byGroup(),d=f.nodes,h=f.edges;h.unmergeBy((function(e){return e.isLoop()}));for(var p=function(e){return s[e.id()]},g=function(e,t){s[e.id()]=t,v.updateItem(e)},v=new Kv((function(e,t){return p(e)-p(t)})),m=0;m<d.length;m++){var y=d[m];s[y.id()]=y.same(l)?0:1/0,v.push(y)}for(var w=function(e,t){for(var r,n=(a?e.edgesTo(t):e.edgesWith(t)).intersect(h),_=1/0,i=0;i<n.length;i++){var l=n[i],s=o(l);(s<_||!r)&&(_=s,r=l)}return{edge:r,dist:_}};v.size()>0;){var b=v.pop(),k=p(b),x=b.id();if(u[x]=k,k!==1/0)for(var P=b.neighborhood().intersect(d),O=0;O<P.length;O++){var E=P[O],A=E.id(),C=w(b,E),S=k+C.dist;S<p(E)&&(g(E,S),c[A]={node:b,edge:C.edge})}}return{distanceTo:function(e){var t=wg(e)?d.filter(e)[0]:e[0];return u[t.id()]},pathTo:function(e){var t=wg(e)?d.filter(e)[0]:e[0],r=[],n=t,_=n.id();if(t.length>0)for(r.unshift(t);c[_];){var a=c[_];r.unshift(a.edge),r.unshift(a.node),_=(n=a.node).id()}return i.spawn(r)}}}},em={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,_=r.length,a=new Array(_),i=r,o=function(e){for(var t=0;t<a.length;t++){if(a[t].has(e))return t}},l=0;l<_;l++)a[l]=this.spawn(r[l]);for(var s=n.sort((function(t,r){return e(t)-e(r)})),c=0;c<s.length;c++){var u=s[c],f=u.source()[0],d=u.target()[0],h=o(f),p=o(d),g=a[h],v=a[p];h!==p&&(i.merge(u),g.merge(v),a.splice(p,1))}return i}},tm=Iv({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),rm={aStar:function(e){var t=this.cy(),r=tm(e),n=r.root,_=r.goal,a=r.heuristic,i=r.directed,o=r.weight;n=t.collection(n)[0],_=t.collection(_)[0];var l,s,c=n.id(),u=_.id(),f={},d={},h={},p=new Kv((function(e,t){return d[e.id()]-d[t.id()]})),g=new qv,v={},m={},y=function(e,t){p.push(e),g.add(t)};y(n,c),f[c]=0,d[c]=a(n);for(var w,b=0;p.size()>0;){if(l=p.pop(),s=l.id(),g.delete(s),b++,s===u){for(var k=[],x=_,P=u,O=m[P];k.unshift(x),null!=O&&k.unshift(O),null!=(x=v[P]);)O=m[P=x.id()];return{found:!0,distance:f[s],path:this.spawn(k),steps:b}}h[s]=!0;for(var E=l._private.edges,A=0;A<E.length;A++){var C=E[A];if(this.hasElementWithId(C.id())&&(!i||C.data("source")===s)){var S=C.source(),T=C.target(),N=S.id()!==s?S:T,L=N.id();if(this.hasElementWithId(L)&&!h[L]){var M=f[s]+o(C);w=L,g.has(w)?M<f[L]&&(f[L]=M,d[L]=M+a(N),v[L]=l,m[L]=C):(f[L]=M,d[L]=M+a(N),y(N,L),v[L]=l,m[L]=C)}}}}return{found:!1,distance:void 0,path:void 0,steps:b}}},nm=Iv({weight:function(e){return 1},directed:!1}),_m={floydWarshall:function(e){for(var t=this.cy(),r=nm(e),n=r.weight,_=r.directed,a=n,i=this.byGroup(),o=i.nodes,l=i.edges,s=o.length,c=s*s,u=function(e){return o.indexOf(e)},f=function(e){return o[e]},d=new Array(c),h=0;h<c;h++){var p=h%s,g=(h-p)/s;d[h]=g===p?0:1/0}for(var v=new Array(c),m=new Array(c),y=0;y<l.length;y++){var w=l[y],b=w.source()[0],k=w.target()[0];if(b!==k){var x=u(b),P=u(k),O=x*s+P,E=a(w);if(d[O]>E&&(d[O]=E,v[O]=P,m[O]=w),!_){var A=P*s+x;!_&&d[A]>E&&(d[A]=E,v[A]=x,m[A]=w)}}}for(var C=0;C<s;C++)for(var S=0;S<s;S++)for(var T=S*s+C,N=0;N<s;N++){var L=S*s+N,M=C*s+N;d[T]+d[M]<d[L]&&(d[L]=d[T]+d[M],v[L]=v[T])}var I=function(e){return u(function(e){return(wg(e)?t.filter(e):e)[0]}(e))},j={distance:function(e,t){var r=I(e),n=I(t);return d[r*s+n]},path:function(e,r){var n=I(e),_=I(r),a=f(n);if(n===_)return a.collection();if(null==v[n*s+_])return t.collection();var i,o=t.collection(),l=n;for(o.merge(a);n!==_;)l=n,n=v[n*s+_],i=m[l*s+n],o.merge(i),o.merge(f(n));return o}};return j}},am=Iv({weight:function(e){return 1},directed:!1,root:null}),im={bellmanFord:function(e){var t=this,r=am(e),n=r.weight,_=r.directed,a=r.root,i=n,o=this,l=this.cy(),s=this.byGroup(),c=s.edges,u=s.nodes,f=u.length,d=new Bv,h=!1,p=[];a=l.collection(a)[0],c.unmergeBy((function(e){return e.isLoop()}));for(var g=c.length,v=function(e){var t=d.get(e.id());return t||(t={},d.set(e.id(),t)),t},m=function(e){return(wg(e)?l.$(e):e)[0]},y=0;y<f;y++){var w=u[y],b=v(w);w.same(a)?b.dist=0:b.dist=1/0,b.pred=null,b.edge=null}for(var k=!1,x=function(e,t,r,n,_,a){var i=n.dist+a;i<_.dist&&!r.same(n.edge)&&(_.dist=i,_.pred=e,_.edge=r,k=!0)},P=1;P<f;P++){k=!1;for(var O=0;O<g;O++){var E=c[O],A=E.source(),C=E.target(),S=i(E),T=v(A),N=v(C);x(A,0,E,T,N,S),_||x(C,0,E,N,T,S)}if(!k)break}if(k)for(var L=[],M=0;M<g;M++){var I=c[M],j=I.source(),R=I.target(),D=i(I),F=v(j).dist,B=v(R).dist;if(F+D<B||!_&&B+D<F){if(h||(Sv("Graph contains a negative weight cycle for Bellman-Ford"),h=!0),!1===e.findNegativeWeightCycles)break;var z=[];F+D<B&&z.push(j),!_&&B+D<F&&z.push(R);for(var q=z.length,V=0;V<q;V++){var U=z[V],G=[U];G.push(v(U).edge);for(var W=v(U).pred;-1===G.indexOf(W);)G.push(W),G.push(v(W).edge),W=v(W).pred;for(var $=(G=G.slice(G.indexOf(W)))[0].id(),Y=0,H=2;H<G.length;H+=2)G[H].id()<$&&($=G[H].id(),Y=H);(G=G.slice(Y).concat(G.slice(0,Y))).push(G[0]);var X=G.map((function(e){return e.id()})).join(",");-1===L.indexOf(X)&&(p.push(o.spawn(G)),L.push(X))}}}return{distanceTo:function(e){return v(m(e)).dist},pathTo:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=[],_=m(e);;){if(null==_)return t.spawn();var i=v(_),l=i.edge,s=i.pred;if(n.unshift(_[0]),_.same(r)&&n.length>0)break;null!=l&&n.unshift(l),_=s}return o.spawn(n)},hasNegativeWeightCycle:h,negativeWeightCycles:p}}},om=Math.sqrt(2),lm=function(e,t,r){0===r.length&&Av("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],_=n[1],a=n[2],i=t[_],o=t[a],l=r,s=l.length-1;s>=0;s--){var c=l[s],u=c[1],f=c[2];(t[u]===i&&t[f]===o||t[u]===o&&t[f]===i)&&l.splice(s,1)}for(var d=0;d<l.length;d++){var h=l[d];h[1]===o?(l[d]=h.slice(),l[d][1]=i):h[2]===o&&(l[d]=h.slice(),l[d][2]=i)}for(var p=0;p<t.length;p++)t[p]===o&&(t[p]=i);return l},sm=function(e,t,r,n){for(;r>n;){var _=Math.floor(Math.random()*t.length);t=lm(_,e,t),r--}return t},cm={kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy((function(e){return e.isLoop()}));var _=r.length,a=n.length,i=Math.ceil(Math.pow(Math.log(_)/Math.LN2,2)),o=Math.floor(_/om);if(!(_<2)){for(var l=[],s=0;s<a;s++){var c=n[s];l.push([s,r.indexOf(c.source()),r.indexOf(c.target())])}for(var u=1/0,f=[],d=new Array(_),h=new Array(_),p=new Array(_),g=function(e,t){for(var r=0;r<_;r++)t[r]=e[r]},v=0;v<=i;v++){for(var m=0;m<_;m++)h[m]=m;var y=sm(h,l.slice(),_,o),w=y.slice();g(h,p);var b=sm(h,y,o,2),k=sm(p,w,o,2);b.length<=k.length&&b.length<u?(u=b.length,f=b,g(h,d)):k.length<=b.length&&k.length<u&&(u=k.length,f=k,g(p,d))}for(var x=this.spawn(f.map((function(e){return n[e[0]]}))),P=this.spawn(),O=this.spawn(),E=d[0],A=0;A<d.length;A++){var C=d[A],S=r[A];C===E?P.merge(S):O.merge(S)}var T=function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!x.contains(t)&&r.merge(t)}))})),r},N=[T(P),T(O)];return{cut:x,components:N,partition1:P,partition2:O}}Av("At least 2 nodes are required for Karger-Stein algorithm")}},um=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},fm=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},dm=function(e){return{x:e[0],y:e[1]}},hm=function(e,t){return Math.atan2(t,e)-Math.PI/2},pm=Math.log2||function(e){return Math.log(e)/Math.log(2)},gm=function(e){return e>0?1:e<0?-1:0},vm=function(e,t){return Math.sqrt(mm(e,t))},mm=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},ym=function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var _=0;_<t;_++)e[_]=e[_]/r;return e},wm=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r},bm=function(e,t,r,n){return{x:wm(e.x,t.x,r.x,n),y:wm(e.y,t.y,r.y,n)}},km=function(e,t,r){return Math.max(e,Math.min(r,t))},xm=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Pm=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},Om=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},Em=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Am=function(e){var t,r,n,_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=r=n=_=a[0];else if(2===a.length)t=n=a[0],_=r=a[1];else if(4===a.length){var i=Ip(a,4);t=i[0],r=i[1],n=i[2],_=i[3]}return e.x1-=_,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Cm=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Sm=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},Tm=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},Nm=function(e,t){return Tm(e,t.x1,t.y1)&&Tm(e,t.x2,t.y2)},Lm=function(e,t,r,n,_,a,i){var o,l,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===s?Zm(_,a):s,u=_/2,f=a/2,d=(c=Math.min(c,u,f))!==u,h=c!==f;if(d){var p=n-f-i;if((o=Gm(e,t,r,n,r-u+c-i,p,r+u-c+i,p,!1)).length>0)return o}if(h){var g=r+u+i;if((o=Gm(e,t,r,n,g,n-f+c-i,g,n+f-c+i,!1)).length>0)return o}if(d){var v=n+f+i;if((o=Gm(e,t,r,n,r-u+c-i,v,r+u-c+i,v,!1)).length>0)return o}if(h){var m=r-u-i;if((o=Gm(e,t,r,n,m,n-f+c-i,m,n+f-c+i,!1)).length>0)return o}var y=r-u+c,w=n-f+c;if((l=Vm(e,t,r,n,y,w,c+i)).length>0&&l[0]<=y&&l[1]<=w)return[l[0],l[1]];var b=r+u-c,k=n-f+c;if((l=Vm(e,t,r,n,b,k,c+i)).length>0&&l[0]>=b&&l[1]<=k)return[l[0],l[1]];var x=r+u-c,P=n+f-c;if((l=Vm(e,t,r,n,x,P,c+i)).length>0&&l[0]>=x&&l[1]>=P)return[l[0],l[1]];var O=r-u+c,E=n+f-c;return(l=Vm(e,t,r,n,O,E,c+i)).length>0&&l[0]<=O&&l[1]>=E?[l[0],l[1]]:[]},Mm=function(e,t,r,n,_,a,i){var o=i,l=Math.min(r,_),s=Math.max(r,_),c=Math.min(n,a),u=Math.max(n,a);return l-o<=e&&e<=s+o&&c-o<=t&&t<=u+o},Im=function(e,t,r,n,_,a,i,o,l){var s=Math.min(r,i,_)-l,c=Math.max(r,i,_)+l,u=Math.min(n,o,a)-l,f=Math.max(n,o,a)+l;return!(e<s||e>c||t<u||t>f)},jm=function(e,t,r,n,_,a,i,o){var l=[];!function(e,t,r,n,_){var a,i,o,l,s,c,u,f;0===e&&(e=1e-5),o=-27*(n/=e)+(t/=e)*(9*(r/=e)-t*t*2),a=(i=(3*r-t*t)/9)*i*i+(o/=54)*o,_[1]=0,u=t/3,a>0?(s=(s=o+Math.sqrt(a))<0?-Math.pow(-s,1/3):Math.pow(s,1/3),c=(c=o-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),_[0]=-u+s+c,u+=(s+c)/2,_[4]=_[2]=-u,u=Math.sqrt(3)*(-c+s)/2,_[3]=u,_[5]=-u):(_[5]=_[3]=0,0===a?(f=o<0?-Math.pow(-o,1/3):Math.pow(o,1/3),_[0]=2*f-u,_[4]=_[2]=-(f+u)):(l=(i=-i)*i*i,l=Math.acos(o/Math.sqrt(l)),f=2*Math.sqrt(i),_[0]=-u+f*Math.cos(l/3),_[2]=-u+f*Math.cos((l+2*Math.PI)/3),_[4]=-u+f*Math.cos((l+4*Math.PI)/3)))}(1*r*r-4*r*_+2*r*i+4*_*_-4*_*i+i*i+n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o,9*r*_-3*r*r-3*r*i-6*_*_+3*_*i+9*n*a-3*n*n-3*n*o-6*a*a+3*a*o,3*r*r-6*r*_+r*i-r*e+2*_*_+2*_*e-i*e+3*n*n-6*n*a+n*o-n*t+2*a*a+2*a*t-o*t,1*r*_-r*r+r*e-_*e+n*a-n*n+n*t-a*t,l);for(var s=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&s.push(l[c]);s.push(1),s.push(0);for(var u,f,d,h=-1,p=0;p<s.length;p++)u=Math.pow(1-s[p],2)*r+2*(1-s[p])*s[p]*_+s[p]*s[p]*i,f=Math.pow(1-s[p],2)*n+2*(1-s[p])*s[p]*a+s[p]*s[p]*o,d=Math.pow(u-e,2)+Math.pow(f-t,2),h>=0?d<h&&(h=d):h=d;return h},Rm=function(e,t,r,n,_,a){var i=[e-r,t-n],o=[_-r,a-n],l=o[0]*o[0]+o[1]*o[1],s=i[0]*i[0]+i[1]*i[1],c=i[0]*o[0]+i[1]*o[1],u=c*c/l;return c<0?s:u>l?(e-_)*(e-_)+(t-a)*(t-a):s-u},Dm=function(e,t,r){for(var n,_,a,i,o=0,l=0;l<r.length/2;l++)if(n=r[2*l],_=r[2*l+1],l+1<r.length/2?(a=r[2*(l+1)],i=r[2*(l+1)+1]):(a=r[2*(l+1-r.length/2)],i=r[2*(l+1-r.length/2)+1]),n==e&&a==e);else{if(!(n>=e&&e>=a||n<=e&&e<=a))continue;(e-n)/(a-n)*(i-_)+_>t&&o++}return o%2!=0},Fm=function(e,t,r,n,_,a,i,o,l){var s,c=new Array(r.length);null!=o[0]?(s=Math.atan(o[1]/o[0]),o[0]<0?s+=Math.PI/2:s=-s-Math.PI/2):s=o;for(var u,f=Math.cos(-s),d=Math.sin(-s),h=0;h<c.length/2;h++)c[2*h]=a/2*(r[2*h]*f-r[2*h+1]*d),c[2*h+1]=i/2*(r[2*h+1]*f+r[2*h]*d),c[2*h]+=n,c[2*h+1]+=_;if(l>0){var p=zm(c,-l);u=Bm(p)}else u=c;return Dm(e,t,u)},Bm=function(e){for(var t,r,n,_,a,i,o,l,s=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],_=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],i=e[4*(c+1)+1],o=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],i=e[1],o=e[2],l=e[3]);var u=Gm(t,r,n,_,a,i,o,l,!0);s[2*c]=u[0],s[2*c+1]=u[1]}return s},zm=function(e,t){for(var r,n,_,a,i=new Array(2*e.length),o=0;o<e.length/2;o++){r=e[2*o],n=e[2*o+1],o<e.length/2-1?(_=e[2*(o+1)],a=e[2*(o+1)+1]):(_=e[0],a=e[1]);var l=a-n,s=-(_-r),c=Math.sqrt(l*l+s*s),u=l/c,f=s/c;i[4*o]=r+u*t,i[4*o+1]=n+f*t,i[4*o+2]=_+u*t,i[4*o+3]=a+f*t}return i},qm=function(e,t,r,n,_,a,i){return e-=_,t-=a,(e/=r/2+i)*e+(t/=n/2+i)*t<=1},Vm=function(e,t,r,n,_,a,i){var o=[r-e,n-t],l=[e-_,t-a],s=o[0]*o[0]+o[1]*o[1],c=2*(l[0]*o[0]+l[1]*o[1]),u=c*c-4*s*(l[0]*l[0]+l[1]*l[1]-i*i);if(u<0)return[];var f=(-c+Math.sqrt(u))/(2*s),d=(-c-Math.sqrt(u))/(2*s),h=Math.min(f,d),p=Math.max(f,d),g=[];if(h>=0&&h<=1&&g.push(h),p>=0&&p<=1&&g.push(p),0===g.length)return[];var v=g[0]*o[0]+e,m=g[0]*o[1]+t;return g.length>1?g[0]==g[1]?[v,m]:[v,m,g[1]*o[0]+e,g[1]*o[1]+t]:[v,m]},Um=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},Gm=function(e,t,r,n,_,a,i,o,l){var s=e-_,c=r-e,u=i-_,f=t-a,d=n-t,h=o-a,p=u*f-h*s,g=c*f-d*s,v=h*c-u*d;if(0!==v){var m=p/v,y=g/v,w=-.001;return w<=m&&m<=1.001&&w<=y&&y<=1.001||l?[e+m*c,t+m*d]:[]}return 0===p||0===g?Um(e,r,i)===i?[i,o]:Um(e,r,_)===_?[_,a]:Um(_,i,r)===r?[r,n]:[]:[]},Wm=function(e,t,r,n,_,a,i,o){var l,s,c,u,f,d,h=[],p=new Array(r.length),g=!0;if(null==a&&(g=!1),g){for(var v=0;v<p.length/2;v++)p[2*v]=r[2*v]*a+n,p[2*v+1]=r[2*v+1]*i+_;if(o>0){var m=zm(p,-o);s=Bm(m)}else s=p}else s=r;for(var y=0;y<s.length/2;y++)c=s[2*y],u=s[2*y+1],y<s.length/2-1?(f=s[2*(y+1)],d=s[2*(y+1)+1]):(f=s[0],d=s[1]),0!==(l=Gm(e,t,n,_,c,u,f,d)).length&&h.push(l[0],l[1]);return h},$m=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],_=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(_-r)/_;return a<0&&(a=1e-5),[t[0]+a*n[0],t[1]+a*n[1]]},Ym=function(e,t){var r=Xm(e,t);return r=Hm(r)},Hm=function(e){for(var t,r,n=e.length/2,_=1/0,a=1/0,i=-1/0,o=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],_=Math.min(_,t),i=Math.max(i,t),a=Math.min(a,r),o=Math.max(o,r);for(var s=2/(i-_),c=2/(o-a),u=0;u<n;u++)t=e[2*u]=e[2*u]*s,r=e[2*u+1]=e[2*u+1]*c,_=Math.min(_,t),i=Math.max(i,t),a=Math.min(a,r),o=Math.max(o,r);if(a<-1)for(var f=0;f<n;f++)r=e[2*f+1]=e[2*f+1]+(-1-a);return e},Xm=function(e,t){var r=1/e*2*Math.PI,n=e%2==0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var _,a=new Array(2*e),i=0;i<e;i++)_=i*r+n,a[2*i]=Math.cos(_),a[2*i+1]=Math.sin(-_);return a},Zm=function(e,t){return Math.min(e/4,t/4,8)},Km=function(e,t){return Math.min(e/10,t/10,8)},Jm=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Qm=Iv({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),ey={pageRank:function(e){for(var t=Qm(e),r=t.dampingFactor,n=t.precision,_=t.iterations,a=t.weight,i=this._private.cy,o=this.byGroup(),l=o.nodes,s=o.edges,c=l.length,u=c*c,f=s.length,d=new Array(u),h=new Array(c),p=(1-r)/c,g=0;g<c;g++){for(var v=0;v<c;v++){d[g*c+v]=0}h[g]=0}for(var m=0;m<f;m++){var y=s[m],w=y.data("source"),b=y.data("target");if(w!==b){var k=l.indexOfId(w),x=l.indexOfId(b),P=a(y);d[x*c+k]+=P,h[k]+=P}}for(var O=1/c+p,E=0;E<c;E++)if(0===h[E])for(var A=0;A<c;A++){d[A*c+E]=O}else for(var C=0;C<c;C++){var S=C*c+E;d[S]=d[S]/h[E]+p}for(var T,N=new Array(c),L=new Array(c),M=0;M<c;M++)N[M]=1;for(var I=0;I<_;I++){for(var j=0;j<c;j++)L[j]=0;for(var R=0;R<c;R++)for(var D=0;D<c;D++){var F=R*c+D;L[R]+=d[F]*N[D]}ym(L),T=N,N=L,L=T;for(var B=0,z=0;z<c;z++){var q=T[z]-N[z];B+=q*q}if(B<n)break}return{rank:function(e){return e=i.collection(e)[0],N[l.indexOf(e)]}}}},ty=Iv({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ry={degreeCentralityNormalized:function(e){e=ty(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var _={},a={},i=0,o=0,l=0;l<n;l++){var s=r[l],c=s.id();e.root=s;var u=this.degreeCentrality(e);i<u.indegree&&(i=u.indegree),o<u.outdegree&&(o=u.outdegree),_[c]=u.indegree,a[c]=u.outdegree}return{indegree:function(e){return 0==i?0:(wg(e)&&(e=t.filter(e)),_[e.id()]/i)},outdegree:function(e){return 0===o?0:(wg(e)&&(e=t.filter(e)),a[e.id()]/o)}}}for(var f={},d=0,h=0;h<n;h++){var p=r[h];e.root=p;var g=this.degreeCentrality(e);d<g.degree&&(d=g.degree),f[p.id()]=g.degree}return{degree:function(e){return 0===d?0:(wg(e)&&(e=t.filter(e)),f[e.id()]/d)}}},degreeCentrality:function(e){e=ty(e);var t=this.cy(),r=this,n=e,_=n.root,a=n.weight,i=n.directed,o=n.alpha;if(_=t.collection(_)[0],i){for(var l=_.connectedEdges(),s=l.filter((function(e){return e.target().same(_)&&r.has(e)})),c=l.filter((function(e){return e.source().same(_)&&r.has(e)})),u=s.length,f=c.length,d=0,h=0,p=0;p<s.length;p++)d+=a(s[p]);for(var g=0;g<c.length;g++)h+=a(c[g]);return{indegree:Math.pow(u,1-o)*Math.pow(d,o),outdegree:Math.pow(f,1-o)*Math.pow(h,o)}}for(var v=_.connectedEdges().intersection(r),m=v.length,y=0,w=0;w<v.length;w++)y+=a(v[w]);return{degree:Math.pow(m,1-o)*Math.pow(y,o)}}};ry.dc=ry.degreeCentrality,ry.dcn=ry.degreeCentralityNormalised=ry.degreeCentralityNormalized;var ny=Iv({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),_y={closenessCentralityNormalized:function(e){for(var t=ny(e),r=t.harmonic,n=t.weight,_=t.directed,a=this.cy(),i={},o=0,l=this.nodes(),s=this.floydWarshall({weight:n,directed:_}),c=0;c<l.length;c++){for(var u=0,f=l[c],d=0;d<l.length;d++)if(c!==d){var h=s.distance(f,l[d]);u+=r?1/h:h}r||(u=1/u),o<u&&(o=u),i[f.id()]=u}return{closeness:function(e){return 0==o?0:(e=wg(e)?a.filter(e)[0].id():e.id(),i[e]/o)}}},closenessCentrality:function(e){var t=ny(e),r=t.root,n=t.weight,_=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var i=this.dijkstra({root:r,weight:n,directed:_}),o=0,l=this.nodes(),s=0;s<l.length;s++){var c=l[s];if(!c.same(r)){var u=i.distanceTo(c);o+=a?1/u:u}}return a?o:1/o}};_y.cc=_y.closenessCentrality,_y.ccn=_y.closenessCentralityNormalised=_y.closenessCentralityNormalized;var ay=Iv({weight:null,directed:!1}),iy={betweennessCentrality:function(e){for(var t=ay(e),r=t.directed,n=t.weight,_=null!=n,a=this.cy(),i=this.nodes(),o={},l={},s=0,c=function(e,t){l[e]=t,t>s&&(s=t)},u=function(e){return l[e]},f=0;f<i.length;f++){var d=i[f],h=d.id();o[h]=r?d.outgoers().nodes():d.openNeighborhood().nodes(),c(h,0)}for(var p=function(){for(var e=i[g].id(),t=[],r={},l={},s={},f=new Kv((function(e,t){return s[e]-s[t]})),d=0;d<i.length;d++){var h=i[d].id();r[h]=[],l[h]=0,s[h]=1/0}for(l[e]=1,s[e]=0,f.push(e);!f.empty();){var p=f.pop();if(t.push(p),_)for(var v=0;v<o[p].length;v++){var m=o[p][v],y=a.getElementById(p),w=void 0;w=y.edgesTo(m).length>0?y.edgesTo(m)[0]:m.edgesTo(y)[0];var b=n(w);m=m.id(),s[m]>s[p]+b&&(s[m]=s[p]+b,f.nodes.indexOf(m)<0?f.push(m):f.updateItem(m),l[m]=0,r[m]=[]),s[m]==s[p]+b&&(l[m]=l[m]+l[p],r[m].push(p))}else for(var k=0;k<o[p].length;k++){var x=o[p][k].id();s[x]==1/0&&(f.push(x),s[x]=s[p]+1),s[x]==s[p]+1&&(l[x]=l[x]+l[p],r[x].push(p))}}for(var P={},O=0;O<i.length;O++)P[i[O].id()]=0;for(;t.length>0;){for(var E=t.pop(),A=0;A<r[E].length;A++){var C=r[E][A];P[C]=P[C]+l[C]/l[E]*(1+P[E])}E!=i[g].id()&&c(E,u(E)+P[E])}},g=0;g<i.length;g++)p();var v={betweenness:function(e){var t=a.collection(e).id();return u(t)},betweennessNormalized:function(e){if(0==s)return 0;var t=a.collection(e).id();return u(t)/s}};return v.betweennessNormalised=v.betweennessNormalized,v}};iy.bc=iy.betweennessCentrality;var oy=Iv({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),ly=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r},sy=function(e,t){for(var r,n=0;n<t;n++){r=0;for(var _=0;_<t;_++)r+=e[_*t+n];for(var a=0;a<t;a++)e[a*t+n]=e[a*t+n]/r}},uy=function(e,t,r){for(var n=new Array(r*r),_=0;_<r;_++){for(var a=0;a<r;a++)n[_*r+a]=0;for(var i=0;i<r;i++)for(var o=0;o<r;o++)n[_*r+o]+=e[_*r+i]*t[i*r+o]}return n},fy=function(e,t,r){for(var n=e.slice(0),_=1;_<r;_++)e=uy(e,n,t);return e},dy=function(e,t,r){for(var n=new Array(t*t),_=0;_<t*t;_++)n[_]=Math.pow(e[_],r);return sy(n,t),n},hy=function(e,t,r,n){for(var _=0;_<r;_++){if(Math.round(e[_]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(t[_]*Math.pow(10,n))/Math.pow(10,n))return!1}return!0},py=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},gy=function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),_=function(e){return oy(e)}(e),a={},i=0;i<t.length;i++)a[t[i].id()]=i;for(var o,l=t.length,s=l*l,c=new Array(s),u=0;u<s;u++)c[u]=0;for(var f=0;f<r.length;f++){var d=r[f],h=a[d.source().id()],p=a[d.target().id()],g=ly(d,_.attributes);c[h*l+p]+=g,c[p*l+h]+=g}!function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r}(c,l,_.multFactor),sy(c,l);for(var v=!0,m=0;v&&m<_.maxIterations;)v=!1,o=fy(c,l,_.expandFactor),c=dy(o,l,_.inflateFactor),hy(c,o,s,4)||(v=!0),m++;var y=function(e,t,r,n){for(var _=[],a=0;a<t;a++){for(var i=[],o=0;o<t;o++)Math.round(1e3*e[a*t+o])/1e3>0&&i.push(r[o]);0!==i.length&&_.push(n.collection(i))}return _}(c,l,t,n);return y=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&py(e[t],e[r])&&e.splice(r,1);return e}(y),y},vy={markovClustering:gy,mcl:gy},my=function(e){return e},yy=function(e,t){return Math.abs(t-e)},wy=function(e,t,r){return e+yy(t,r)},by=function(e,t,r){return e+Math.pow(r-t,2)},ky=function(e){return Math.sqrt(e)},xy=function(e,t,r){return Math.max(e,yy(t,r))},Py=function(e,t,r,n,_){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:my,i=n,o=0;o<e;o++)i=_(i,t(o),r(o));return a(i)},Oy={euclidean:function(e,t,r){return e>=2?Py(e,t,r,0,by,ky):Py(e,t,r,0,wy)},squaredEuclidean:function(e,t,r){return Py(e,t,r,0,by)},manhattan:function(e,t,r){return Py(e,t,r,0,wy)},max:function(e,t,r){return Py(e,t,r,-1/0,xy)}};function Ey(e,t,r,n,_,a){var i;return i=bg(e)?e:Oy[e]||Oy.euclidean,0===t&&bg(e)?i(_,a):i(t,r,n,_,a)}Oy["squared-euclidean"]=Oy.squaredEuclidean,Oy.squaredeuclidean=Oy.squaredEuclidean;var Ay=Iv({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Cy=function(e){return Ay(e)},Sy=function(e,t,r,n,_){var a="kMedoids"!==_?function(e){return r[e]}:function(e){return n[e](r)},i=r,o=t;return Ey(e,n.length,a,(function(e){return n[e](t)}),i,o)},Ty=function(e,t,r){for(var n=r.length,_=new Array(n),a=new Array(n),i=new Array(t),o=null,l=0;l<n;l++)_[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var s=0;s<t;s++){o=[];for(var c=0;c<n;c++)o[c]=Math.random()*(a[c]-_[c])+_[c];i[s]=o}return i},Ny=function(e,t,r,n,_){for(var a=1/0,i=0,o=0;o<t.length;o++){var l=Sy(r,e,t[o],n,_);l<a&&(a=l,i=o)}return i},Ly=function(e,t,r){for(var n=[],_=null,a=0;a<t.length;a++)r[(_=t[a]).id()]===e&&n.push(_);return n},My=function(e,t,r){for(var n=0;n<e.length;n++)for(var _=0;_<e[n].length;_++){if(Math.abs(e[n][_]-t[n][_])>r)return!1}return!0},Iy=function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1},jy=function(e,t){var r=new Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var _=e[Math.floor(Math.random()*e.length)];Iy(_,r,n);)_=e[Math.floor(Math.random()*e.length)];r[n]=_}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},Ry=function(e,t,r){for(var n=0,_=0;_<t.length;_++)n+=Sy("manhattan",t[_],e,r,"kMedoids");return n},Dy=function(e,t,r,n,_){for(var a,i,o=0;o<t.length;o++)for(var l=0;l<e.length;l++)n[o][l]=Math.pow(r[o][l],_.m);for(var s=0;s<e.length;s++)for(var c=0;c<_.attributes.length;c++){a=0,i=0;for(var u=0;u<t.length;u++)a+=n[u][s]*_.attributes[c](t[u]),i+=n[u][s];e[s][c]=a/i}},Fy=function(e,t,r,n,_){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var i,o,l,s=2/(_.m-1),c=0;c<r.length;c++)for(var u=0;u<n.length;u++){i=0;for(var f=0;f<r.length;f++)o=Sy(_.distance,n[u],r[c],_.attributes,"cmeans"),l=Sy(_.distance,n[u],r[f],_.attributes,"cmeans"),i+=Math.pow(o/l,s);e[u][c]=1/i}},By=function(e){var t,r,n,_,a,i=this.cy(),o=this.nodes(),l=Cy(e);_=new Array(o.length);for(var s=0;s<o.length;s++)_[s]=new Array(l.k);n=new Array(o.length);for(var c=0;c<o.length;c++)n[c]=new Array(l.k);for(var u=0;u<o.length;u++){for(var f=0,d=0;d<l.k;d++)n[u][d]=Math.random(),f+=n[u][d];for(var h=0;h<l.k;h++)n[u][h]=n[u][h]/f}r=new Array(l.k);for(var p=0;p<l.k;p++)r[p]=new Array(l.attributes.length);a=new Array(o.length);for(var g=0;g<o.length;g++)a[g]=new Array(l.k);for(var v=!0,m=0;v&&m<l.maxIterations;)v=!1,Dy(r,o,n,a,l),Fy(n,_,r,o,l),My(n,_,l.sensitivityThreshold)||(v=!0),m++;return t=function(e,t,r,n){for(var _,a,i=new Array(r.k),o=0;o<i.length;o++)i[o]=[];for(var l=0;l<t.length;l++){_=-1/0,a=-1;for(var s=0;s<t[0].length;s++)t[l][s]>_&&(_=t[l][s],a=s);i[a].push(e[l])}for(var c=0;c<i.length;c++)i[c]=n.collection(i[c]);return i}(o,n,l,i),{clusters:t,degreeOfMembership:n}},zy={kMeans:function(e){var t,r=this.cy(),n=this.nodes(),_=null,a=Cy(e),i=new Array(a.k),o={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=Ty(n,a.k,a.attributes)):t="object"===Dp(a.testCentroids)?a.testCentroids:Ty(n,a.k,a.attributes):t=Ty(n,a.k,a.attributes);for(var l,s,c,u=!0,f=0;u&&f<a.maxIterations;){for(var d=0;d<n.length;d++)o[(_=n[d]).id()]=Ny(_,t,a.distance,a.attributes,"kMeans");u=!1;for(var h=0;h<a.k;h++){var p=Ly(h,n,o);if(0!==p.length){for(var g=a.attributes.length,v=t[h],m=new Array(g),y=new Array(g),w=0;w<g;w++){y[w]=0;for(var b=0;b<p.length;b++)_=p[b],y[w]+=a.attributes[w](_);m[w]=y[w]/p.length,l=m[w],s=v[w],c=a.sensitivityThreshold,Math.abs(s-l)<=c||(u=!0)}t[h]=m,i[h]=r.collection(p)}}f++}return i},kMedoids:function(e){var t,r,n=this.cy(),_=this.nodes(),a=null,i=Cy(e),o=new Array(i.k),l={},s=new Array(i.k);i.testMode?"number"==typeof i.testCentroids||(t="object"===Dp(i.testCentroids)?i.testCentroids:jy(_,i.k)):t=jy(_,i.k);for(var c=!0,u=0;c&&u<i.maxIterations;){for(var f=0;f<_.length;f++)l[(a=_[f]).id()]=Ny(a,t,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<t.length;d++){var h=Ly(d,_,l);if(0!==h.length){s[d]=Ry(t[d],h,i.attributes);for(var p=0;p<h.length;p++)(r=Ry(h[p],h,i.attributes))<s[d]&&(s[d]=r,t[d]=h[p],c=!0);o[d]=n.collection(h)}}u++}return o},fuzzyCMeans:By,fcm:By},qy=Iv({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Vy={single:"min",complete:"max"},Uy=function(e,t,r,n,_){for(var a,i=0,o=1/0,l=_.attributes,s=function(e,t){return Ey(_.distance,l.length,(function(t){return l[t](e)}),(function(e){return l[e](t)}),e,t)},c=0;c<e.length;c++){var u=e[c].key,f=r[u][n[u]];f<o&&(i=u,o=f)}if("threshold"===_.mode&&o>=_.threshold||"dendrogram"===_.mode&&1===e.length)return!1;var d,h=t[i],p=t[n[i]];d="dendrogram"===_.mode?{left:h,right:p,key:h.key}:{value:h.value.concat(p.value),key:h.key},e[h.index]=d,e.splice(p.index,1),t[h.key]=d;for(var g=0;g<e.length;g++){var v=e[g];h.key===v.key?a=1/0:"min"===_.linkage?(a=r[h.key][v.key],r[h.key][v.key]>r[p.key][v.key]&&(a=r[p.key][v.key])):"max"===_.linkage?(a=r[h.key][v.key],r[h.key][v.key]<r[p.key][v.key]&&(a=r[p.key][v.key])):a="mean"===_.linkage?(r[h.key][v.key]*h.size+r[p.key][v.key]*p.size)/(h.size+p.size):"dendrogram"===_.mode?s(v.value,h.value):s(v.value[0],h.value[0]),r[h.key][v.key]=r[v.key][h.key]=a}for(var m=0;m<e.length;m++){var y=e[m].key;if(n[y]===h.key||n[y]===p.key){for(var w=y,b=0;b<e.length;b++){var k=e[b].key;r[y][k]<r[y][w]&&(w=k)}n[y]=w}e[m].index=m}return h.key=p.key=h.index=p.index=null,!0},Gy=function(e,t,r){e&&(e.value?t.push(e.value):(e.left&&Gy(e.left,t),e.right&&Gy(e.right,t)))},Wy=function(e,t){if(!e)return"";if(e.left&&e.right){var r=Wy(e.left,t),n=Wy(e.right,t),_=t.add({group:"nodes",data:{id:r+","+n}});return t.add({group:"edges",data:{source:r,target:_.id()}}),t.add({group:"edges",data:{source:n,target:_.id()}}),_.id()}return e.value?e.value.id():void 0},$y=function(e,t,r){if(!e)return[];var n=[],_=[],a=[];return 0===t?(e.left&&Gy(e.left,n),e.right&&Gy(e.right,_),a=n.concat(_),[r.collection(a)]):1===t?e.value?[r.collection(e.value)]:(e.left&&Gy(e.left,n),e.right&&Gy(e.right,_),[r.collection(n),r.collection(_)]):e.value?[r.collection(e.value)]:(e.left&&(n=$y(e.left,t-1,r)),e.right&&(_=$y(e.right,t-1,r)),n.concat(_))},Yy=function(e){for(var t=this.cy(),r=this.nodes(),n=function(e){var t=qy(e),r=Vy[t.linkage];return null!=r&&(t.linkage=r),t}(e),_=n.attributes,a=function(e,t){return Ey(n.distance,_.length,(function(t){return _[t](e)}),(function(e){return _[e](t)}),e,t)},i=[],o=[],l=[],s=[],c=0;c<r.length;c++){var u={value:"dendrogram"===n.mode?r[c]:[r[c]],key:c,index:c};i[c]=u,s[c]=u,o[c]=[],l[c]=0}for(var f=0;f<i.length;f++)for(var d=0;d<=f;d++){var h=void 0;h="dendrogram"===n.mode?f===d?1/0:a(i[f].value,i[d].value):f===d?1/0:a(i[f].value[0],i[d].value[0]),o[f][d]=h,o[d][f]=h,h<o[f][l[f]]&&(l[f]=d)}for(var p,g=Uy(i,s,o,l,n);g;)g=Uy(i,s,o,l,n);return"dendrogram"===n.mode?(p=$y(i[0],n.dendrogramDepth,t),n.addDendrogram&&Wy(i[0],t)):(p=new Array(i.length),i.forEach((function(e,r){e.key=e.index=null,p[r]=t.collection(e.value)}))),p},Hy={hierarchicalClustering:Yy,hca:Yy},Xy=Iv({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Zy=function(e,t,r,n){var _=function(e,t){return n[t](e)};return-Ey(e,n.length,(function(e){return _(t,e)}),(function(e){return _(r,e)}),t,r)},Ky=function(e,t){var r=null;return r="median"===t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],_=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t)):e=e.slice(t,r);for(var a=0,i=e.length-1;i>=0;i--){var o=e[i];_?isFinite(o)||(e[i]=-1/0,a++):e.splice(i,1)}n&&e.sort((function(e,t){return e-t}));var l=e.length,s=Math.floor(l/2);return l%2!=0?e[s+1+a]:(e[s-1+a]+e[s+a])/2}(e):"mean"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,_=0,a=t;a<r;a++){var i=e[a];isFinite(i)&&(n+=i,_++)}return n/_}(e):"min"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,_=t;_<r;_++){var a=e[_];isFinite(a)&&(n=Math.min(a,n))}return n}(e):"max"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,_=t;_<r;_++){var a=e[_];isFinite(a)&&(n=Math.max(a,n))}return n}(e):t,r},Jy=function(e,t,r){for(var n=[],_=0;_<e;_++){for(var a=-1,i=-1/0,o=0;o<r.length;o++){var l=r[o];t[_*e+l]>i&&(a=l,i=t[_*e+l])}a>0&&n.push(a)}for(var s=0;s<r.length;s++)n[r[s]]=r[s];return n},Qy=function(e){for(var t,r,n,_,a,i,o=this.cy(),l=this.nodes(),s=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||Av("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some((function(e){return e===r}))||Pg(r)||Av("Preference must be one of [".concat(n.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),Xy(e)}(e),c={},u=0;u<l.length;u++)c[l[u].id()]=u;r=(t=l.length)*t,n=new Array(r);for(var f=0;f<r;f++)n[f]=-1/0;for(var d=0;d<t;d++)for(var h=0;h<t;h++)d!==h&&(n[d*t+h]=Zy(s.distance,l[d],l[h],s.attributes));_=Ky(n,s.preference);for(var p=0;p<t;p++)n[p*t+p]=_;a=new Array(r);for(var g=0;g<r;g++)a[g]=0;i=new Array(r);for(var v=0;v<r;v++)i[v]=0;for(var m=new Array(t),y=new Array(t),w=new Array(t),b=0;b<t;b++)m[b]=0,y[b]=0,w[b]=0;for(var k,x=new Array(t*s.minIterations),P=0;P<x.length;P++)x[P]=0;for(k=0;k<s.maxIterations;k++){for(var O=0;O<t;O++){for(var E=-1/0,A=-1/0,C=-1,S=0,T=0;T<t;T++)m[T]=a[O*t+T],(S=i[O*t+T]+n[O*t+T])>=E?(A=E,E=S,C=T):S>A&&(A=S);for(var N=0;N<t;N++)a[O*t+N]=(1-s.damping)*(n[O*t+N]-E)+s.damping*m[N];a[O*t+C]=(1-s.damping)*(n[O*t+C]-A)+s.damping*m[C]}for(var L=0;L<t;L++){for(var M=0,I=0;I<t;I++)m[I]=i[I*t+L],y[I]=Math.max(0,a[I*t+L]),M+=y[I];M-=y[L],y[L]=a[L*t+L],M+=y[L];for(var j=0;j<t;j++)i[j*t+L]=(1-s.damping)*Math.min(0,M-y[j])+s.damping*m[j];i[L*t+L]=(1-s.damping)*(M-y[L])+s.damping*m[L]}for(var R=0,D=0;D<t;D++){var F=i[D*t+D]+a[D*t+D]>0?1:0;x[k%s.minIterations*t+D]=F,R+=F}if(R>0&&(k>=s.minIterations-1||k==s.maxIterations-1)){for(var B=0,z=0;z<t;z++){w[z]=0;for(var q=0;q<s.minIterations;q++)w[z]+=x[q*t+z];0!==w[z]&&w[z]!==s.minIterations||B++}if(B===t)break}}for(var V=function(e,t,r){for(var n=[],_=0;_<e;_++)t[_*e+_]+r[_*e+_]>0&&n.push(_);return n}(t,a,i),U=function(e,t,r){for(var n=Jy(e,t,r),_=0;_<r.length;_++){for(var a=[],i=0;i<n.length;i++)n[i]===r[_]&&a.push(i);for(var o=-1,l=-1/0,s=0;s<a.length;s++){for(var c=0,u=0;u<a.length;u++)c+=t[a[u]*e+a[s]];c>l&&(o=s,l=c)}r[_]=a[o]}return Jy(e,t,r)}(t,n,V),G={},W=0;W<V.length;W++)G[V[W]]=[];for(var $=0;$<l.length;$++){var Y=U[c[l[$].id()]];null!=Y&&G[Y].push(l[$])}for(var H=new Array(V.length),X=0;X<V.length;X++)H[X]=o.collection(G[V[X]]);return H},ew={affinityPropagation:Qy,ap:Qy},tw=Iv({root:void 0,directed:!1}),rw=function(){var e=this,t={},r=0,n=0,_=[],a=[],i={},o=function(l,s,c){l===c&&(n+=1),t[s]={id:r,low:r++,cutVertex:!1};var u,f,d,h,p=e.getElementById(s).connectedEdges().intersection(e);0===p.size()?_.push(e.spawn(e.getElementById(s))):p.forEach((function(r){u=r.source().id(),f=r.target().id(),(d=u===s?f:u)!==c&&(h=r.id(),i[h]||(i[h]=!0,a.push({x:s,y:d,edge:r})),d in t?t[s].low=Math.min(t[s].low,t[d].id):(o(l,d,s),t[s].low=Math.min(t[s].low,t[d].low),t[s].id<=t[d].low&&(t[s].cutVertex=!0,function(r,n){for(var i=a.length-1,o=[],l=e.spawn();a[i].x!=r||a[i].y!=n;)o.push(a.pop().edge),i--;o.push(a.pop().edge),o.forEach((function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach((function(r){var n=r.id(),_=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(_.filter((function(e){return e.isLoop()}))):l.merge(_)}))})),_.push(l)}(s,d))))}))};e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(n=0,o(r,r),t[r].cutVertex=n>1)}}));var l=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(l),components:_}},nw=function(){var e=this,t={},r=0,n=[],_=[],a=e.spawn(e),i=function(o){if(_.push(o),t[o]={index:r,low:r++,explored:!1},e.getElementById(o).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==o&&(r in t||i(r),t[r].explored||(t[o].low=Math.min(t[o].low,t[r].low)))})),t[o].index===t[o].low){for(var l=e.spawn();;){var s=_.pop();if(l.merge(e.getElementById(s)),t[s].low=t[o].index,t[s].explored=!0,s===o)break}var c=l.edgesWith(l),u=l.merge(c);n.push(u),a=a.difference(u)}};return e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||i(r)}})),{cut:a,components:n}},_w={};[Gv,Qv,em,rm,_m,im,cm,ey,ry,_y,iy,vy,zy,Hy,ew,{hierholzer:function(e){if(!xg(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,n,_,a=tw(e),i=a.root,o=a.directed,l=this,s=!1;i&&(_=wg(i)?this.filter(i)[0].id():i[0].id());var c={},u={};o?l.forEach((function(e){var t=e.id();if(e.isNode()){var _=e.indegree(!0),a=e.outdegree(!0),i=_-a,o=a-_;1==i?r?s=!0:r=t:1==o?n?s=!0:n=t:(o>1||i>1)&&(s=!0),c[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&c[t].push(e.id())}))}else u[t]=[void 0,e.target().id()]})):l.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?n?s=!0:n=t:r=t),c[t]=[],e.connectedEdges().forEach((function(e){return c[t].push(e.id())}))):u[t]=[e.source().id(),e.target().id()]}));var f={found:!1,trail:void 0};if(s)return f;if(n&&r)if(o){if(_&&n!=_)return f;_=n}else{if(_&&n!=_&&r!=_)return f;_||(_=n)}else _||(_=l[0].id());var d=function(e){for(var t,r,n,_=e,a=[e];c[_].length;)t=c[_].shift(),r=u[t][0],_!=(n=u[t][1])?(c[n]=c[n].filter((function(e){return e!=t})),_=n):o||_==r||(c[r]=c[r].filter((function(e){return e!=t})),_=r),a.unshift(t),a.unshift(_);return a},h=[],p=[];for(p=d(_);1!=p.length;)0==c[p[0]].length?(h.unshift(l.getElementById(p.shift())),h.unshift(l.getElementById(p.shift()))):p=d(p.shift()).concat(p);for(var g in h.unshift(l.getElementById(p.shift())),c)if(c[g].length)return f;return f.found=!0,f.trail=this.spawn(h,!0),f}},{hopcroftTarjanBiconnected:rw,htbc:rw,htb:rw,hopcroftTarjanBiconnectedComponents:rw},{tarjanStronglyConnected:nw,tsc:nw,tscc:nw,tarjanStronglyConnectedComponents:nw}].forEach((function(e){Gg(_w,e)}));
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var aw=function(e){if(!(this instanceof aw))return new aw(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};aw.prototype={fulfill:function(e){return iw(this,1,"fulfillValue",e)},reject:function(e){return iw(this,2,"rejectReason",e)},then:function(e,t){var r=this,n=new aw;return r.onFulfilled.push(sw(e,n,"fulfill")),r.onRejected.push(sw(t,n,"reject")),ow(r),n.proxy}};var iw=function(e,t,r,n){return 0===e.state&&(e.state=t,e[r]=n,ow(e)),e},ow=function(e){1===e.state?lw(e,"onFulfilled",e.fulfillValue):2===e.state&&lw(e,"onRejected",e.rejectReason)},lw=function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var _=function(){for(var e=0;e<n.length;e++)n[e](r)};"function"==typeof setImmediate?setImmediate(_):setTimeout(_,0)}},sw=function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var _;try{_=e(n)}catch(e){return void t.reject(e)}cw(t,_)}}},cw=function(e,t){if(e!==t&&e.proxy!==t){var r;if("object"===Dp(t)&&null!==t||"function"==typeof t)try{r=t.then}catch(t){return void e.reject(t)}if("function"!=typeof r)e.fulfill(t);else{var n=!1;try{r.call(t,(function(r){n||(n=!0,r===t?e.reject(new TypeError("circular thenable chain")):cw(e,r))}),(function(t){n||(n=!0,e.reject(t))}))}catch(t){n||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};aw.all=function(e){return new aw((function(t,r){for(var n=new Array(e.length),_=0,a=function(r,a){n[r]=a,++_===e.length&&t(n)},i=0;i<e.length;i++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then((function(e){a(t,e)}),(function(e){r(e)})):a(t,n)}(i)}))},aw.resolve=function(e){return new aw((function(t,r){t(e)}))},aw.reject=function(e){return new aw((function(t,r){r(e)}))};var uw="undefined"!=typeof Promise?Promise:aw,fw=function(e,t,r){var n=Sg(e),_=!n,a=this._private=Gg({duration:1e3},t,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&bg(a.complete)&&a.completes.push(a.complete),_){var i=e.position();a.startPosition=a.startPosition||{x:i.x,y:i.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(n){var o=e.pan();a.startPan={x:o.x,y:o.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},dw=fw.prototype;Gg(dw,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),Eg(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var _=e.style[n],a=_.name,i=e.startStyle[a];e.startStyle[a]=_,e.style[n]=i}return t&&this.play(),this},promise:function(e){var t,r=this._private;if("frame"===e)t=r.frames;else t=r.completes;return new uw((function(e,r){t.push((function(){e()}))}))}}),dw.complete=dw.completed,dw.run=dw.play,dw.running=dw.playing;var hw,pw,gw,vw,mw,yw,ww,bw,kw,xw,Pw,Ow,Ew,Aw,Cw,Sw,Tw,Nw,Lw,Mw,Iw,jw,Rw,Dw,Fw,Bw,zw,qw,Vw,Uw,Gw,Ww,$w,Yw,Hw,Xw,Zw,Kw,Jw,Qw,eb,tb,rb,nb,_b,ab,ib,ob,lb,sb,cb,ub,fb,db,hb,pb,gb,vb,mb,yb,wb,bb,kb,xb,Pb,Ob,Eb,Ab,Cb,Sb,Tb,Nb,Lb,Mb,Ib,jb,Rb,Db,Fb,Bb,zb,qb,Vb,Ub,Gb,Wb,$b={animated:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++){t[r]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=this,n=void 0!==r.length,_=n?r:[r],a=this._private.cy||this,i=!n,o=!i;if(!a.styleEnabled())return this;var l=a.style();if(e=Gg({},e,t),0===Object.keys(e).length)return new fw(_[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var s=e.renderedPosition,c=a.pan(),u=a.zoom();e.position=fm(s,u,c)}if(i&&null!=e.panBy){var f=e.panBy,d=a.pan();e.pan={x:d.x+f.x,y:d.y+f.y}}var h=e.center||e.centre;if(i&&null!=h){var p=a.getCenterPan(h.eles,e.zoom);null!=p&&(e.pan=p)}if(i&&null!=e.fit){var g=e.fit,v=a.getFitViewport(g.eles||g.boundingBox,g.padding);null!=v&&(e.pan=v.pan,e.zoom=v.zoom)}if(i&&xg(e.zoom)){var m=a.getZoomedViewport(e.zoom);null!=m?(m.zoomed&&(e.zoom=m.zoom),m.panned&&(e.pan=m.pan)):e.zoom=null}return new fw(_[0],e)}},animate:function(){return function(e,t){var r=this,n=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=Gg({},e,t));for(var _=0;_<n.length;_++){var a=n[_],i=a.animated()&&(void 0===e.queue||e.queue);a.animation(e,i?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var r=this,n=void 0!==r.length?r:[r],_=this._private.cy||this;if(!_.styleEnabled())return this;for(var a=0;a<n.length;a++){for(var i=n[a]._private,o=i.animation.current,l=0;l<o.length;l++){var s=o[l]._private;t&&(s.duration=0)}e&&(i.animation.queue=[]),t||(i.animation.current=[])}return _.notify("draw"),this}}};function Yb(){if(pw)return hw;pw=1;var e=Array.isArray;return hw=e}function Hb(){if(xw)return kw;xw=1;var e=function(){if(bw)return ww;bw=1;var e=Jg()["__core-js_shared__"];return ww=e}(),t=function(){var t=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();return kw=function(e){return!!t&&t in e}}function Xb(){if(Aw)return Ew;Aw=1;var e=function(){if(yw)return mw;yw=1;var e=tv(),t=Kg();return mw=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}(),t=Hb(),r=Kg(),n=function(){if(Ow)return Pw;Ow=1;var e=Function.prototype.toString;return Pw=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}(),_=/^\[object .+?Constructor\]$/,a=Function.prototype,i=Object.prototype,o=a.toString,l=i.hasOwnProperty,s=RegExp("^"+o.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Ew=function(a){return!(!r(a)||t(a))&&(e(a)?s:_).test(n(a))}}function Zb(){if(Nw)return Tw;Nw=1;var e=Xb(),t=Sw?Cw:(Sw=1,Cw=function(e,t){return null==e?void 0:e[t]});return Tw=function(r,n){var _=t(r,n);return e(_)?_:void 0}}function Kb(){if(Mw)return Lw;Mw=1;var e=Zb()(Object,"create");return Lw=e}function Jb(){if(Ww)return Gw;Ww=1;var e=function(){if(jw)return Iw;jw=1;var e=Kb();return Iw=function(){this.__data__=e?e(null):{},this.size=0}}(),t=Dw?Rw:(Dw=1,Rw=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),r=function(){if(Bw)return Fw;Bw=1;var e=Kb(),t=Object.prototype.hasOwnProperty;return Fw=function(r){var n=this.__data__;if(e){var _=n[r];return"__lodash_hash_undefined__"===_?void 0:_}return t.call(n,r)?n[r]:void 0}}(),n=function(){if(qw)return zw;qw=1;var e=Kb(),t=Object.prototype.hasOwnProperty;return zw=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)}}(),_=function(){if(Uw)return Vw;Uw=1;var e=Kb();return Vw=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=_,Gw=a}function Qb(){if(Xw)return Hw;return Xw=1,Hw=function(e,t){return e===t||e!=e&&t!=t}}function ek(){if(Kw)return Zw;Kw=1;var e=Qb();return Zw=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1}}function tk(){if(ob)return ib;ob=1;var e=Yw?$w:(Yw=1,$w=function(){this.__data__=[],this.size=0}),t=function(){if(Qw)return Jw;Qw=1;var e=ek(),t=Array.prototype.splice;return Jw=function(r){var n=this.__data__,_=e(n,r);return!(_<0||(_==n.length-1?n.pop():t.call(n,_,1),--this.size,0))}}(),r=function(){if(tb)return eb;tb=1;var e=ek();return eb=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]}}(),n=function(){if(nb)return rb;nb=1;var e=ek();return rb=function(t){return e(this.__data__,t)>-1}}(),_=function(){if(ab)return _b;ab=1;var e=ek();return _b=function(t,r){var n=this.__data__,_=e(n,t);return _<0?(++this.size,n.push([t,r])):n[_][1]=r,this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=_,ib=a}function rk(){if(ub)return cb;ub=1;var e=Jb(),t=tk(),r=function(){if(sb)return lb;sb=1;var e=Zb()(Jg(),"Map");return lb=e}();return cb=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function nk(){if(pb)return hb;pb=1;var e=db?fb:(db=1,fb=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return hb=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map}}function _k(){if(Ob)return Pb;Ob=1;var e=rk(),t=function(){if(vb)return gb;vb=1;var e=nk();return gb=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}}(),r=function(){if(yb)return mb;yb=1;var e=nk();return mb=function(t){return e(this,t).get(t)}}(),n=function(){if(bb)return wb;bb=1;var e=nk();return wb=function(t){return e(this,t).has(t)}}(),_=function(){if(xb)return kb;xb=1;var e=nk();return kb=function(t,r){var n=e(this,t),_=n.size;return n.set(t,r),this.size+=n.size==_?0:1,this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=_,Pb=a}function ak(){if(Sb)return Cb;Sb=1;var e=function(){if(Ab)return Eb;Ab=1;var e=_k();function t(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var _=function(){var e=arguments,t=n?n.apply(this,e):e[0],a=_.cache;if(a.has(t))return a.get(t);var i=r.apply(this,e);return _.cache=a.set(t,i)||a,i};return _.cache=new(t.Cache||e),_}return t.Cache=e,Eb=t}();return Cb=function(t){var r=e(t,(function(e){return 500===n.size&&n.clear(),e})),n=r.cache;return r}}function ik(){if(Nb)return Tb;Nb=1;var e=ak(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,(function(e,t,_,a){n.push(_?a.replace(r,"$1"):t||e)})),n}));return Tb=n}function ok(){if(Mb)return Lb;return Mb=1,Lb=function(e,t){for(var r=-1,n=null==e?0:e.length,_=Array(n);++r<n;)_[r]=t(e[r],r,e);return _}}function lk(){if(Db)return Rb;Db=1;var e=function(){if(jb)return Ib;jb=1;var e=ev(),t=ok(),r=Yb(),n=rv(),_=e?e.prototype:void 0,a=_?_.toString:void 0;return Ib=function e(_){if("string"==typeof _)return _;if(r(_))return t(_,e)+"";if(n(_))return a?a.call(_):"";var i=_+"";return"0"==i&&1/_==-1/0?"-0":i},Ib}();return Rb=function(t){return null==t?"":e(t)}}function sk(){if(Bb)return Fb;Bb=1;var e=Yb(),t=function(){if(vw)return gw;vw=1;var e=Yb(),t=rv(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;return gw=function(_,a){if(e(_))return!1;var i=typeof _;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=_&&!t(_))||n.test(_)||!r.test(_)||null!=a&&_ in Object(a)}}(),r=ik(),n=lk();return Fb=function(_,a){return e(_)?_:t(_,a)?[_]:r(n(_))}}function ck(){if(qb)return zb;qb=1;var e=rv();return zb=function(t){if("string"==typeof t||e(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}}var uk,fk,dk,hk,pk,gk,vk,mk,yk,wk,bk,kk,xk=Zg(function(){if(Wb)return Gb;Wb=1;var e=function(){if(Ub)return Vb;Ub=1;var e=sk(),t=ck();return Vb=function(r,n){for(var _=0,a=(n=e(n,r)).length;null!=r&&_<a;)r=r[t(n[_++])];return _&&_==a?r:void 0}}();return Gb=function(t,r,n){var _=null==t?void 0:e(t,r);return void 0===_?n:_}}());function Pk(){if(hk)return dk;hk=1;var e=function(){if(fk)return uk;fk=1;var e=Zb(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();return uk=t}();return dk=function(t,r,n){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}}function Ok(){if(wk)return yk;wk=1;var e=function(){if(gk)return pk;gk=1;var e=Pk(),t=Qb(),r=Object.prototype.hasOwnProperty;return pk=function(n,_,a){var i=n[_];r.call(n,_)&&t(i,a)&&(void 0!==a||_ in n)||e(n,_,a)}}(),t=sk(),r=function(){if(mk)return vk;mk=1;var e=/^(?:0|[1-9]\d*)$/;return vk=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}(),n=Kg(),_=ck();return yk=function(a,i,o,l){if(!n(a))return a;for(var s=-1,c=(i=t(i,a)).length,u=c-1,f=a;null!=f&&++s<c;){var d=_(i[s]),h=o;if("__proto__"===d||"constructor"===d||"prototype"===d)return a;if(s!=u){var p=f[d];void 0===(h=l?l(p,d,f):void 0)&&(h=n(p)?p:r(i[s+1])?[]:{})}e(f,d,h),f=f[d]}return a}}var Ek,Ak,Ck,Sk,Tk=Zg(function(){if(kk)return bk;kk=1;var e=Ok();return bk=function(t,r,n){return null==t?t:e(t,r,n)}}());var Nk=Zg(function(){if(Sk)return Ck;Sk=1;var e=ok(),t=Ak?Ek:(Ak=1,Ek=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}),r=Yb(),n=rv(),_=ik(),a=ck(),i=lk();return Ck=function(o){return r(o)?e(o,a):n(o)?[o]:t(_(i(o)))}}()),Lk={};[$b,{data:function(e){return e=Gg({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,r){var n=e,_=this,a=void 0!==_.length,i=a?_:[_],o=a?_[0]:_;if(wg(t)){var l,s=-1!==t.indexOf(".")&&Nk(t);if(n.allowGetting&&void 0===r)return o&&(n.beforeGet(o),l=s&&void 0===o._private[n.field][t]?xk(o._private[n.field],s):o._private[n.field][t]),l;if(n.allowSetting&&void 0!==r&&!n.immutableKeys[t]){var c=Mp({},t,r);n.beforeSet(_,c);for(var u=0,f=i.length;u<f;u++){var d=i[u];n.canSet(d)&&(s&&void 0===o._private[n.field][t]?Tk(d._private[n.field],s,r):d._private[n.field][t]=r)}n.updateStyle&&_.updateStyle(),n.onSet(_),n.settingTriggersEvent&&_[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&xg(t)){var h,p,g=t,v=Object.keys(g);n.beforeSet(_,g);for(var m=0;m<v.length;m++){if(p=g[h=v[m]],!n.immutableKeys[h])for(var y=0;y<i.length;y++){var w=i[y];n.canSet(w)&&(w._private[n.field][h]=p)}}n.updateStyle&&_.updateStyle(),n.onSet(_),n.settingTriggersEvent&&_[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&bg(t)){var b=t;_.on(n.bindingEvent,b)}else if(n.allowGetting&&void 0===t){var k;return o&&(n.beforeGet(o),k=o._private[n.field]),k}return _}},removeData:function(e){return e=Gg({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var r=e,n=this,_=void 0!==n.length?n:[n];if(wg(t)){for(var a=t.split(/\s+/),i=a.length,o=0;o<i;o++){var l=a[o];if(!Ng(l))if(!r.immutableKeys[l])for(var s=0,c=_.length;s<c;s++)_[s]._private[r.field][l]=void 0}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(void 0===t){for(var u=0,f=_.length;u<f;u++)for(var d=_[u]._private[r.field],h=Object.keys(d),p=0;p<h.length;p++){var g=h[p];!r.immutableKeys[g]&&(d[g]=void 0)}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}}},{eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new uw((function(e,t){var _=n.concat([function(t){r.off.apply(r,a),e(t)}]),a=_.concat([]);r.on.apply(r,_)}))}}}].forEach((function(e){Gg(Lk,e)}));var Mk={animate:Lk.animate(),animation:Lk.animation(),animated:Lk.animated(),clearQueue:Lk.clearQueue(),delay:Lk.delay(),delayAnimation:Lk.delayAnimation(),stop:Lk.stop()},Ik={classes:function(e){var t=this;if(void 0===e){var r=[];return t[0]._private.classes.forEach((function(e){return r.push(e)})),r}kg(e)||(e=(e||"").match(/\S+/g)||[]);for(var n=[],_=new qv(e),a=0;a<t.length;a++){for(var i=t[a],o=i._private,l=o.classes,s=!1,c=0;c<e.length;c++){var u=e[c];if(!l.has(u)){s=!0;break}}s||(s=l.size!==e.length),s&&(o.classes=_,n.push(i))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){kg(e)||(e=e.match(/\S+/g)||[]);for(var r=this,n=void 0===t,_=[],a=0,i=r.length;a<i;a++)for(var o=r[a],l=o._private.classes,s=!1,c=0;c<e.length;c++){var u=e[c],f=l.has(u),d=!1;t||n&&!f?(l.add(u),d=!0):(!t||n&&f)&&(l.delete(u),d=!0),!s&&d&&(_.push(o),s=!0)}return _.length>0&&this.spawn(_).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}};Ik.className=Ik.classNames=Ik.classes;var jk={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Fg,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};jk.variable="(?:[\\w-.]|(?:\\\\"+jk.metaChar+"))+",jk.className="(?:[\\w-]|(?:\\\\"+jk.metaChar+"))+",jk.value=jk.string+"|"+jk.number,jk.id=jk.variable,function(){var e,t,r;for(e=jk.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],jk.comparatorOp+="|@"+t;for(e=jk.comparatorOp.split("|"),r=0;r<e.length;r++)(t=e[r]).indexOf("!")>=0||"="!==t&&(jk.comparatorOp+="|\\!"+t)}();var Rk=0,Dk=1,Fk=2,Bk=3,zk=4,qk=5,Vk=6,Uk=7,Gk=8,Wk=9,$k=10,Yk=11,Hk=12,Xk=13,Zk=14,Kk=15,Jk=16,Qk=17,ex=18,tx=19,rx=20,nx=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort((function(e,t){return function(e,t){return-1*Ug(e,t)}(e.selector,t.selector)})),_x=function(){for(var e,t={},r=0;r<nx.length;r++)t[(e=nx[r]).selector]=e.matches;return t}(),ax="("+nx.map((function(e){return e.selector})).join("|")+")",ix=function(e){return e.replace(new RegExp("\\\\("+jk.metaChar+")","g"),(function(e,t){return t}))},ox=function(e,t,r){e[e.length-1]=r},lx=[{name:"group",query:!0,regex:"("+jk.group+")",populate:function(e,t,r){var n=Ip(r,1)[0];t.checks.push({type:Rk,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:ax,populate:function(e,t,r){var n=Ip(r,1)[0];t.checks.push({type:Uk,value:n})}},{name:"id",query:!0,regex:"\\#("+jk.id+")",populate:function(e,t,r){var n=Ip(r,1)[0];t.checks.push({type:Gk,value:ix(n)})}},{name:"className",query:!0,regex:"\\.("+jk.className+")",populate:function(e,t,r){var n=Ip(r,1)[0];t.checks.push({type:Wk,value:ix(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+jk.variable+")\\s*\\]",populate:function(e,t,r){var n=Ip(r,1)[0];t.checks.push({type:zk,field:ix(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+jk.variable+")\\s*("+jk.comparatorOp+")\\s*("+jk.value+")\\s*\\]",populate:function(e,t,r){var n=Ip(r,3),_=n[0],a=n[1],i=n[2];i=null!=new RegExp("^"+jk.string+"$").exec(i)?i.substring(1,i.length-1):parseFloat(i),t.checks.push({type:Bk,field:ix(_),operator:a,value:i})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+jk.boolOp+")\\s*("+jk.variable+")\\s*\\]",populate:function(e,t,r){var n=Ip(r,2),_=n[0],a=n[1];t.checks.push({type:qk,field:ix(a),operator:_})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+jk.meta+")\\s*("+jk.comparatorOp+")\\s*("+jk.number+")\\s*\\]\\]",populate:function(e,t,r){var n=Ip(r,3),_=n[0],a=n[1],i=n[2];t.checks.push({type:Vk,field:ix(_),operator:a,value:parseFloat(i)})}},{name:"nextQuery",separator:!0,regex:jk.separator,populate:function(e,t){var r=e.currentSubject,n=e.edgeCount,_=e.compoundCount,a=e[e.length-1];return null!=r&&(a.subject=r,e.currentSubject=null),a.edgeCount=n,a.compoundCount=_,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:jk.directedEdge,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},n=t,_={checks:[]};return r.checks.push({type:Yk,source:n,target:_}),ox(e,0,r),e.edgeCount++,_}var a={checks:[]},i=t,o={checks:[]};return a.checks.push({type:Hk,source:i,target:o}),ox(e,0,a),e.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:jk.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},n=t,_={checks:[]};return r.checks.push({type:$k,nodes:[n,_]}),ox(e,0,r),e.edgeCount++,_}var a={checks:[]},i=t,o={checks:[]};return a.checks.push({type:Zk,node:i,neighbor:o}),ox(e,0,a),o}},{name:"child",separator:!0,regex:jk.child,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},n={checks:[]},_=e[e.length-1];return r.checks.push({type:Kk,parent:_,child:n}),ox(e,0,r),e.compoundCount++,n}if(e.currentSubject===t){var a={checks:[]},i=e[e.length-1],o={checks:[]},l={checks:[]},s={checks:[]},c={checks:[]};return a.checks.push({type:tx,left:i,right:o,subject:l}),l.checks=t.checks,t.checks=[{type:rx}],c.checks.push({type:rx}),o.checks.push({type:Qk,parent:c,child:s}),ox(e,0,a),e.currentSubject=l,e.compoundCount++,s}var u={checks:[]},f={checks:[]},d=[{type:Qk,parent:u,child:f}];return u.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"descendant",separator:!0,regex:jk.descendant,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},n={checks:[]},_=e[e.length-1];return r.checks.push({type:Jk,ancestor:_,descendant:n}),ox(e,0,r),e.compoundCount++,n}if(e.currentSubject===t){var a={checks:[]},i=e[e.length-1],o={checks:[]},l={checks:[]},s={checks:[]},c={checks:[]};return a.checks.push({type:tx,left:i,right:o,subject:l}),l.checks=t.checks,t.checks=[{type:rx}],c.checks.push({type:rx}),o.checks.push({type:ex,ancestor:c,descendant:s}),ox(e,0,a),e.currentSubject=l,e.compoundCount++,s}var u={checks:[]},f={checks:[]},d=[{type:ex,ancestor:u,descendant:f}];return u.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"subject",modifier:!0,regex:jk.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Sv("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;n===Yk?r.type=Xk:n===$k&&(r.type=Zk,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];lx.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var sx=function(e){for(var t,r,n,_=0;_<lx.length;_++){var a=lx[_],i=a.name,o=e.match(a.regexObj);if(null!=o){r=o,t=a,n=i;var l=o[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}},cx={parse:function(e){var t=this,r=t.inputText=e,n=t[0]={checks:[]};for(t.length=1,r=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e}(r);;){var _=sx(r);if(null==_.expr)return Sv("The selector `"+e+"`is invalid"),!1;var a=_.match.slice(1),i=_.expr.populate(t,n,a);if(!1===i)return!1;if(null!=i&&(n=i),(r=_.remaining).match(/^\s*$/))break}var o=t[t.length-1];null!=t.currentSubject&&(o.subject=t.currentSubject),o.edgeCount=t.edgeCount,o.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var s=t[l];if(s.compoundCount>0&&s.edgeCount>0)return Sv("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return Sv("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===s.edgeCount&&Sv("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return wg(t)?'"'+t+'"':e(t)},r=function(e){return" "+e+" "},n=function(n,a){var i=n.type,o=n.value;switch(i){case Rk:var l=e(o);return l.substring(0,l.length-1);case Bk:var s=n.field,c=n.operator;return"["+s+r(e(c))+t(o)+"]";case qk:var u=n.operator,f=n.field;return"["+e(u)+f+"]";case zk:return"["+n.field+"]";case Vk:var d=n.operator;return"[["+n.field+r(e(d))+t(o)+"]]";case Uk:return o;case Gk:return"#"+o;case Wk:return"."+o;case Qk:case Kk:return _(n.parent,a)+r(">")+_(n.child,a);case ex:case Jk:return _(n.ancestor,a)+" "+_(n.descendant,a);case tx:var h=_(n.left,a),p=_(n.subject,a),g=_(n.right,a);return h+(h.length>0?" ":"")+p+g;case rx:return""}},_=function(e,t){return e.checks.reduce((function(r,_,a){return r+(t===e&&0===a?"$":"")+n(_,t)}),"")},a="",i=0;i<this.length;i++){var o=this[i];a+=_(o,o.subject),this.length>1&&i<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},ux=function(e,t,r){var n,_,a,i=wg(e),o=Pg(e),l=wg(r),s=!1,c=!1,u=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),s=!0),(i||l||s)&&(_=i||o?""+e:"",a=""+r),s&&(e=_=_.toLowerCase(),r=a=a.toLowerCase()),t){case"*=":n=_.indexOf(a)>=0;break;case"$=":n=_.indexOf(a,_.length-a.length)>=0;break;case"^=":n=0===_.indexOf(a);break;case"=":n=e===r;break;case">":u=!0,n=e>r;break;case">=":u=!0,n=e>=r;break;case"<":u=!0,n=e<r;break;case"<=":u=!0,n=e<=r;break;default:n=!1}return!c||null==e&&u||(n=!n),n},fx=function(e,t){return e.data(t)},dx=[],hx=function(e,t){return e.checks.every((function(e){return dx[e.type](e,t)}))};dx[Rk]=function(e,t){var r=e.value;return"*"===r||r===t.group()},dx[Uk]=function(e,t){return function(e,t){return _x[e](t)}(e.value,t)},dx[Gk]=function(e,t){var r=e.value;return t.id()===r},dx[Wk]=function(e,t){var r=e.value;return t.hasClass(r)},dx[Vk]=function(e,t){var r=e.field,n=e.operator,_=e.value;return ux(function(e,t){return e[t]()}(t,r),n,_)},dx[Bk]=function(e,t){var r=e.field,n=e.operator,_=e.value;return ux(fx(t,r),n,_)},dx[qk]=function(e,t){var r=e.field,n=e.operator;return function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(fx(t,r),n)},dx[zk]=function(e,t){var r=e.field;return e.operator,void 0!==fx(t,r)},dx[$k]=function(e,t){var r=e.nodes[0],n=e.nodes[1],_=t.source(),a=t.target();return hx(r,_)&&hx(n,a)||hx(n,_)&&hx(r,a)},dx[Zk]=function(e,t){return hx(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&hx(e.neighbor,t)}))},dx[Yk]=function(e,t){return hx(e.source,t.source())&&hx(e.target,t.target())},dx[Hk]=function(e,t){return hx(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&hx(e.target,t)}))},dx[Xk]=function(e,t){return hx(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&hx(e.source,t)}))},dx[Kk]=function(e,t){return hx(e.child,t)&&hx(e.parent,t.parent())},dx[Qk]=function(e,t){return hx(e.parent,t)&&t.children().some((function(t){return hx(e.child,t)}))},dx[Jk]=function(e,t){return hx(e.descendant,t)&&t.ancestors().some((function(t){return hx(e.ancestor,t)}))},dx[ex]=function(e,t){return hx(e.ancestor,t)&&t.descendants().some((function(t){return hx(e.descendant,t)}))},dx[tx]=function(e,t){return hx(e.subject,t)&&hx(e.left,t)&&hx(e.right,t)},dx[rx]=function(){return!0},dx[Dk]=function(e,t){return e.value.has(t)},dx[Fk]=function(e,t){return(0,e.value)(t)};var px=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||wg(e)&&e.match(/^\s*$/)||(Eg(e)?this.addQuery({checks:[{type:Dk,value:e.collection()}]}):bg(e)?this.addQuery({checks:[{type:Fk,value:e}]}):wg(e)?this.parse(e)||(this.invalid=!0):Av("A selector must be created from a string; found "))},gx=px.prototype;[cx,{matches:function(e){for(var t=0;t<this.length;t++){var r=this[t];if(hx(r,e))return!0}return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===Gk)return e.getElementById(t[0].checks[0].value).collection();var r=function(e){for(var r=0;r<t.length;r++){var n=t[r];if(hx(n,e))return!0}return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)}}].forEach((function(e){return Gg(gx,e)})),gx.text=function(){return this.inputText},gx.size=function(){return this.length},gx.eq=function(e){return this[e]},gx.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},gx.addQuery=function(e){this[this.length++]=e},gx.selector=gx.toString;var vx={allAre:function(e){var t=new px(e);return this.every((function(e){return t.matches(e)}))},is:function(e){var t=new px(e);return this.some((function(e){return t.matches(e)}))},some:function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))},anySame:function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))},contains:function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}};vx.allAreNeighbours=vx.allAreNeighbors,vx.has=vx.contains,vx.equal=vx.equals=vx.same;var mx,yx,wx=function(e,t){return function(r,n,_,a){var i,o=r,l=this;if(null==o?i="":Eg(o)&&1===o.length&&(i=o.id()),1===l.length&&i){var s=l[0]._private,c=s.traversalCache=s.traversalCache||{},u=c[t]=c[t]||[],f=gv(i),d=u[f];return d||(u[f]=e.call(l,r,n,_,a))}return e.call(l,r,n,_,a)}},bx={parent:function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var _=this[n]._private.parent;_&&t.push(_)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var _=r[n];t.push(_)}r=r.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)},nonorphans:function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)},children:wx((function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,_=0;_<n.length;_++)t.push(n[_]);return this.spawn(t,!0).filter(e)}),"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(r){for(var n=0;n<r.length;n++){var _=r[n];t.push(_),_.children().nonempty()&&e(_.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function kx(e,t,r,n){for(var _=[],a=new qv,i=e.cy().hasCompoundNodes(),o=0;o<e.length;o++){var l=e[o];r?_.push(l):i&&n(_,a,l)}for(;_.length>0;){var s=_.shift();t(s),a.add(s.id()),i&&n(_,a,s)}return e}function xx(e,t,r){if(r.isParent())for(var n=r._private.children,_=0;_<n.length;_++){var a=n[_];t.has(a.id())||e.push(a)}}function Px(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function Ox(e,t,r){Px(e,t,r),xx(e,t,r)}bx.forEachDown=function(e){return kx(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],xx)},bx.forEachUp=function(e){return kx(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Px)},bx.forEachUpAndDown=function(e){return kx(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ox)},bx.ancestors=bx.parents,(mx=yx={data:Lk.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Lk.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Lk.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Lk.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Lk.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Lk.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=mx.data,mx.removeAttr=mx.removeData;var Ex,Ax,Cx=yx,Sx={};function Tx(e){return function(t){var r=this;if(void 0===t&&(t=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var n=0,_=r[0],a=_._private.edges,i=0;i<a.length;i++){var o=a[i];!t&&o.isLoop()||(n+=e(_,o))}return n}}}function Nx(e,t){return function(r){for(var n,_=this.nodes(),a=0;a<_.length;a++){var i=_[a][e](r);void 0===i||void 0!==n&&!t(i,n)||(n=i)}return n}}Gg(Sx,{degree:Tx((function(e,t){return t.source().same(t.target())?2:1})),indegree:Tx((function(e,t){return t.target().same(e)?1:0})),outdegree:Tx((function(e,t){return t.source().same(e)?1:0}))}),Gg(Sx,{minDegree:Nx("degree",(function(e,t){return e<t})),maxDegree:Nx("degree",(function(e,t){return e>t})),minIndegree:Nx("indegree",(function(e,t){return e<t})),maxIndegree:Nx("indegree",(function(e,t){return e>t})),minOutdegree:Nx("outdegree",(function(e,t){return e<t})),maxOutdegree:Nx("outdegree",(function(e,t){return e>t}))}),Gg(Sx,{totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}});var Lx=function(e,t,r){for(var n=0;n<e.length;n++){var _=e[n];if(!_.locked()){var a=_._private.position,i={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};!_.isParent()||0===i.x&&0===i.y||_.children().shift(i,r),_.dirtyBoundingBoxCache()}}},Mx={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Lx(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(Ex=Ax={position:Lk.data(Mx),silentPosition:Lk.data(Gg({},Mx,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Lx(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(xg(e))t?this.silentPosition(e):this.position(e);else if(bg(e)){var r=e,n=this.cy();n.startBatch();for(var _=0;_<this.length;_++){var a,i=this[_];(a=r(i,_))&&(t?i.silentPosition(a):i.position(a))}n.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var n;if(xg(e)?(n={x:Pg(e.x)?e.x:0,y:Pg(e.y)?e.y:0},r=t):wg(e)&&Pg(t)&&((n={x:0,y:0})[e]=t),null!=n){var _=this.cy();_.startBatch();for(var a=0;a<this.length;a++){var i=this[a];if(!(_.hasCompoundNodes()&&i.isChild()&&i.ancestors().anySame(this))){var o=i.position(),l={x:o.x+n.x,y:o.y+n.y};r?i.silentPosition(l):i.position(l)}}_.endBatch()}return this},silentShift:function(e,t){return xg(e)?this.shift(e,!0):wg(e)&&Pg(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],n=this.cy(),_=n.zoom(),a=n.pan(),i=xg(e)?e:void 0,o=void 0!==i||void 0!==t&&wg(e);if(r&&r.isNode()){if(!o){var l=r.position();return i=um(l,_,a),void 0===e?i:i[e]}for(var s=0;s<this.length;s++){var c=this[s];void 0!==t?c.position(e,(t-a[e])/_):void 0!==i&&c.position(fm(i,_,a))}}else if(!o)return;return this},relativePosition:function(e,t){var r=this[0],n=this.cy(),_=xg(e)?e:void 0,a=void 0!==_||void 0!==t&&wg(e),i=n.hasCompoundNodes();if(r&&r.isNode()){if(!a){var o=r.position(),l=i?r.parent():null,s=l&&l.length>0,c=s;s&&(l=l[0]);var u=c?l.position():{x:0,y:0};return _={x:o.x-u.x,y:o.y-u.y},void 0===e?_:_[e]}for(var f=0;f<this.length;f++){var d=this[f],h=i?d.parent():null,p=h&&h.length>0,g=p;p&&(h=h[0]);var v=g?h.position():{x:0,y:0};void 0!==t?d.position(e,t+v[e]):void 0!==_&&d.position({x:_.x+v.x,y:_.y+v.y})}}else if(!a)return;return this}}).modelPosition=Ex.point=Ex.position,Ex.modelPositions=Ex.points=Ex.positions,Ex.renderedPoint=Ex.renderedPosition,Ex.relativePoint=Ex.relativePosition;var Ix,jx,Rx=Ax;Ix=jx={},jx.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),_=r.pan(),a=t.x1*n+_.x,i=t.x2*n+_.x,o=t.y1*n+_.y,l=t.y2*n+_.y;return{x1:a,x2:i,y1:o,y2:l,w:i-a,h:l-o}},jx.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}})),this):this},jx.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,_={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),i=t.position;0!==a.w&&0!==a.h||((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=i.x-a.w/2,a.x2=i.x+a.w/2,a.y1=i.y-a.h/2,a.y2=i.y+a.h/2);var o=_.width.left.value;"px"===_.width.left.units&&_.width.val>0&&(o=100*o/_.width.val);var l=_.width.right.value;"px"===_.width.right.units&&_.width.val>0&&(l=100*l/_.width.val);var s=_.height.top.value;"px"===_.height.top.units&&_.height.val>0&&(s=100*s/_.height.val);var c=_.height.bottom.value;"px"===_.height.bottom.units&&_.height.val>0&&(c=100*c/_.height.val);var u=v(_.width.val-a.w,o,l),f=u.biasDiff,d=u.biasComplementDiff,h=v(_.height.val-a.h,s,c),p=h.biasDiff,g=h.biasComplementDiff;t.autoPadding=function(e,t,r,n){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,_.width.val),i.x=(-f+a.x1+a.x2+d)/2,t.autoHeight=Math.max(a.h,_.height.val),i.y=(-p+a.y1+a.y2+g)/2}function v(e,t,r){var n=0,_=0,a=t+r;return e>0&&a>0&&(n=t/a*e,_=r/a*e),{biasDiff:n,biasComplementDiff:_}}}for(var n=0;n<this.length;n++){var _=this[n],a=_._private;a.compoundBoundsClean&&!e||(r(_),t.batching()||(a.compoundBoundsClean=!0))}return this};var Dx=function(e){return e===1/0||e===-1/0?0:e},Fx=function(e,t,r,n,_){n-t!=0&&_-r!=0&&null!=t&&null!=r&&null!=n&&null!=_&&(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=_>e.y2?_:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Bx=function(e,t){return null==t?e:Fx(e,t.x1,t.y1,t.x2,t.y2)},zx=function(e,t,r){return Dv(e,t,r)},qx=function(e,t,r){if(!t.cy().headless()){var n,_,a=t._private,i=a.rstyle,o=i.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=i.srcX,_=i.srcY):"target"===r?(n=i.tgtX,_=i.tgtY):(n=i.midX,_=i.midY);var l=a.arrowBounds=a.arrowBounds||{},s=l[r]=l[r]||{};s.x1=n-o,s.y1=_-o,s.x2=n+o,s.y2=_+o,s.w=s.x2-s.x1,s.h=s.y2-s.y1,Em(s,1),Fx(e,s.x1,s.y1,s.x2,s.y2)}}},Vx=function(e,t,r){if(!t.cy().headless()){var n;n=r?r+"-":"";var _=t._private,a=_.rstyle;if(t.pstyle(n+"label").strValue){var i,o,l,s,c=t.pstyle("text-halign"),u=t.pstyle("text-valign"),f=zx(a,"labelWidth",r),d=zx(a,"labelHeight",r),h=zx(a,"labelX",r),p=zx(a,"labelY",r),g=t.pstyle(n+"text-margin-x").pfValue,v=t.pstyle(n+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle(n+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,b=t.pstyle("text-border-width").pfValue/2,k=t.pstyle("text-background-padding").pfValue,x=d,P=f,O=P/2,E=x/2;if(m)i=h-O,o=h+O,l=p-E,s=p+E;else{switch(c.value){case"left":i=h-P,o=h;break;case"center":i=h-O,o=h+O;break;case"right":i=h,o=h+P}switch(u.value){case"top":l=p-x,s=p;break;case"center":l=p-E,s=p+E;break;case"bottom":l=p,s=p+x}}var A=g-Math.max(w,b)-k-2,C=g+Math.max(w,b)+k+2,S=v-Math.max(w,b)-k-2,T=v+Math.max(w,b)+k+2;i+=A,o+=C,l+=S,s+=T;var N=r||"main",L=_.labelBounds,M=L[N]=L[N]||{};M.x1=i,M.y1=l,M.x2=o,M.y2=s,M.w=o-i,M.h=s-l,M.leftPad=A,M.rightPad=C,M.topPad=S,M.botPad=T;var I=m&&"autorotate"===y.strValue,j=null!=y.pfValue&&0!==y.pfValue;if(I||j){var R=I?zx(_.rstyle,"labelAngle",r):y.pfValue,D=Math.cos(R),F=Math.sin(R),B=(i+o)/2,z=(l+s)/2;if(!m){switch(c.value){case"left":B=o;break;case"right":B=i}switch(u.value){case"top":z=s;break;case"bottom":z=l}}var q=function(e,t){return{x:(e-=B)*D-(t-=z)*F+B,y:e*F+t*D+z}},V=q(i,l),U=q(i,s),G=q(o,l),W=q(o,s);i=Math.min(V.x,U.x,G.x,W.x),o=Math.max(V.x,U.x,G.x,W.x),l=Math.min(V.y,U.y,G.y,W.y),s=Math.max(V.y,U.y,G.y,W.y)}var $=N+"Rot",Y=L[$]=L[$]||{};Y.x1=i,Y.y1=l,Y.x2=o,Y.y2=s,Y.w=o-i,Y.h=s-l,Fx(e,i,l,o,s),Fx(_.labelBounds.all,i,l,o,s)}return e}},Ux=function(e,t){var r,n,_,a,i,o,l,s=e._private.cy,c=s.styleEnabled(),u=s.headless(),f=xm(),d=e._private,h=e.isNode(),p=e.isEdge(),g=d.rstyle,v=h&&c?e.pstyle("bounds-expansion").pfValue:[0],m=function(e){return"none"!==e.pstyle("display").value},y=!c||m(e)&&(!p||m(e.source())&&m(e.target()));if(y){var w=0;c&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(w=e.pstyle("overlay-padding").value);var b=0;c&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(b=e.pstyle("underlay-padding").value);var k=Math.max(w,b),x=0;if(c&&(x=e.pstyle("width").pfValue/2),h&&t.includeNodes){var P=e.position();i=P.x,o=P.y;var O=e.outerWidth()/2,E=e.outerHeight()/2;Fx(f,r=i-O,_=o-E,n=i+O,a=o+E),c&&t.includeOutlines&&function(e,t){if(!t.cy().headless()){var r,n,_,a=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(a>0&&i>0){var o=t.pstyle("outline-offset").value,l=t.pstyle("shape").value,s=i+o,c=(e.w+2*s)/e.w,u=(e.h+2*s)/e.h,f=0;["diamond","pentagon","round-triangle"].includes(l)?(c=(e.w+2.4*s)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(l)?c=(e.w+2.4*s)/e.w:"star"===l?(c=(e.w+2.8*s)/e.w,u=(e.h+2.6*s)/e.h,f=-s/3.8):"triangle"===l?(c=(e.w+2.8*s)/e.w,u=(e.h+2.4*s)/e.h,f=-s/1.4):"vee"===l&&(c=(e.w+4.4*s)/e.w,u=(e.h+3.8*s)/e.h,f=.5*-s);var d=e.h*u-e.h,h=e.w*c-e.w;if(Am(e,[Math.ceil(d/2),Math.ceil(h/2)]),0!==f){var p=(n=0,_=f,{x1:(r=e).x1+n,x2:r.x2+n,y1:r.y1+_,y2:r.y2+_,w:r.w,h:r.h});Pm(e,p)}}}}(f,e)}else if(p&&t.includeEdges)if(c&&!u){var A=e.pstyle("curve-style").strValue;if(r=Math.min(g.srcX,g.midX,g.tgtX),n=Math.max(g.srcX,g.midX,g.tgtX),_=Math.min(g.srcY,g.midY,g.tgtY),a=Math.max(g.srcY,g.midY,g.tgtY),Fx(f,r-=x,_-=x,n+=x,a+=x),"haystack"===A){var C=g.haystackPts;if(C&&2===C.length){if(r=C[0].x,_=C[0].y,r>(n=C[1].x)){var S=r;r=n,n=S}if(_>(a=C[1].y)){var T=_;_=a,a=T}Fx(f,r-x,_-x,n+x,a+x)}}else if("bezier"===A||"unbundled-bezier"===A||A.endsWith("segments")||A.endsWith("taxi")){var N;switch(A){case"bezier":case"unbundled-bezier":N=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":N=g.linePts}if(null!=N)for(var L=0;L<N.length;L++){var M=N[L];r=M.x-x,n=M.x+x,_=M.y-x,a=M.y+x,Fx(f,r,_,n,a)}}}else{var I=e.source().position(),j=e.target().position();if((r=I.x)>(n=j.x)){var R=r;r=n,n=R}if((_=I.y)>(a=j.y)){var D=_;_=a,a=D}Fx(f,r-=x,_-=x,n+=x,a+=x)}if(c&&t.includeEdges&&p&&(qx(f,e,"mid-source"),qx(f,e,"mid-target"),qx(f,e,"source"),qx(f,e,"target")),c)if("yes"===e.pstyle("ghost").value){var F=e.pstyle("ghost-offset-x").pfValue,B=e.pstyle("ghost-offset-y").pfValue;Fx(f,f.x1+F,f.y1+B,f.x2+F,f.y2+B)}var z=d.bodyBounds=d.bodyBounds||{};Cm(z,f),Am(z,v),Em(z,1),c&&(r=f.x1,n=f.x2,_=f.y1,a=f.y2,Fx(f,r-k,_-k,n+k,a+k));var q=d.overlayBounds=d.overlayBounds||{};Cm(q,f),Am(q,v),Em(q,1);var V=d.labelBounds=d.labelBounds||{};null!=V.all?((l=V.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):V.all=xm(),c&&t.includeLabels&&(t.includeMainLabels&&Vx(f,e,null),p&&(t.includeSourceLabels&&Vx(f,e,"source"),t.includeTargetLabels&&Vx(f,e,"target")))}return f.x1=Dx(f.x1),f.y1=Dx(f.y1),f.x2=Dx(f.x2),f.y2=Dx(f.y2),f.w=Dx(f.x2-f.x1),f.h=Dx(f.y2-f.y1),f.w>0&&f.h>0&&y&&(Am(f,v),Em(f,1)),f},Gx=function(e){var t=0,r=function(e){return(e?1:0)<<t++},n=0;return n+=r(e.incudeNodes),n+=r(e.includeEdges),n+=r(e.includeLabels),n+=r(e.includeMainLabels),n+=r(e.includeSourceLabels),n+=r(e.includeTargetLabels),n+=r(e.includeOverlays),n+=r(e.includeOutlines)},Wx=function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),n=function(e){return Math.round(e)};return _=[n(t.x),n(t.y),n(r.x),n(r.y)],i={value:0,done:!1},o=0,l=_.length,uv({next:function(){return o<l?i.value=_[o++]:i.done=!0,i}},a)}return 0;var _,a,i,o,l},$x=function(e,t){var r,n=e._private,_=e.isEdge(),a=(null==t?Hx:Gx(t))===Hx,i=Wx(e),o=n.bbCachePosKey===i,l=t.useCache,s=function(e){return null==e._private.bbCache||e._private.styleDirty};if(!l||s(e)||_&&(s(e.source())||s(e.target()))?(o||e.recalculateRenderedStyle(l),r=Ux(e,Yx),n.bbCache=r,n.bbCachePosKey=i):r=n.bbCache,!a){var c=e.isNode();r=xm(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?Bx(r,n.overlayBounds):Bx(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!_||t.includeSourceLabels&&t.includeTargetLabels)?Bx(r,n.labelBounds.all):(t.includeMainLabels&&Bx(r,n.labelBounds.mainRot),t.includeSourceLabels&&Bx(r,n.labelBounds.sourceRot),t.includeTargetLabels&&Bx(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},Yx={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Hx=Gx(Yx),Xx=Iv(Yx);jx.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=xm();var r=Xx(e=e||Yx),n=this;if(n.cy().styleEnabled())for(var _=0;_<n.length;_++){var a=n[_],i=a._private,o=Wx(a),l=i.bbCachePosKey===o,s=r.useCache&&l&&!i.styleDirty;a.recalculateRenderedStyle(s)}this.updateCompoundBounds(!e.useCache);for(var c=0;c<n.length;c++){var u=n[c];Bx(t,$x(u,r))}}else e=void 0===e?Yx:Xx(e),t=$x(this[0],e);return t.x1=Dx(t.x1),t.y1=Dx(t.y1),t.x2=Dx(t.x2),t.y2=Dx(t.y2),t.w=Dx(t.x2-t.x1),t.h=Dx(t.y2-t.y1),t},jx.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},jx.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),_=r.collection();if(n&&(_=t.filter((function(e){return e.isParent()})),t=t.not(_)),xg(e)){var a=e;e=function(){return a}}r.startBatch(),t.forEach((function(t,r){return t._private.bbAtOldPos=e(t,r)})).silentPositions(e),n&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var i=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return t.silentPositions((function(e){return e._private.bbAtOldPos})),n&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),r.endBatch(),i},Ix.boundingbox=Ix.bb=Ix.boundingBox,Ix.renderedBoundingbox=Ix.renderedBoundingBox;var Zx,Kx,Jx=jx;Zx=Kx={};var Qx=function(e){e.uppercaseName=Dg(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Dg(e.outerName),Zx[e.name]=function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t){if(n){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var _=t.pstyle(e.name);return"label"===_.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):_.pfValue}return 1}},Zx["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},Zx["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},Zx["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};Qx({name:"width"}),Qx({name:"height"}),Kx.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Kx.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Kx.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var eP=Kx,tP={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},rP=Object.keys(tP).reduce((function(e,t){var r=tP[t],n=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(t);return e[t]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)}(this,r.get)},r.mult?e[n]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy(),n=r.pan(),_=r.zoom();return t(e).map((function(e){return um(e,_,n)}))}}(this,r.get)}:e[n]=function(){return function(e,t){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy();return um(t(e),r.zoom(),r.pan())}}(this,r.get)},e}),{}),nP=Gg({},Rx,Jx,eP,rP),_P=function(e,t){this.recycle(e,t)};function aP(){return!1}function iP(){return!0}_P.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=aP,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?iP:aP):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),_=this.cy.pan();this.renderedPosition={x:r.x*n+_.x,y:r.y*n+_.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=iP;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=iP;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=iP,this.stopPropagation()},isDefaultPrevented:aP,isPropagationStopped:aP,isImmediatePropagationStopped:aP};var oP=/^([^.]+)(\.(?:[^.]+))?$/,lP={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},sP=Object.keys(lP),cP={};function uP(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cP,t=arguments.length>1?arguments[1]:void 0,r=0;r<sP.length;r++){var n=sP[r];this[n]=e[n]||lP[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}var fP=uP.prototype,dP=function(e,t,r,n,_,a,i){bg(n)&&(_=n,n=null),i&&(a=null==a?i:Gg({},a,i));for(var o=kg(r)?r:r.split(/\s+/),l=0;l<o.length;l++){var s=o[l];if(!Ng(s)){var c=s.match(oP);if(c)if(!1===t(e,s,c[1],c[2]?c[2]:null,n,_,a))break}}},hP=function(e,t){return e.addEventFields(e.context,t),new _P(t.type,t)},pP=function(e,t,r){if(function(e){return"event"===yg(e)}(r))t(e,r);else if(xg(r))t(e,hP(e,r));else for(var n=kg(r)?r:r.split(/\s+/),_=0;_<n.length;_++){var a=n[_];if(!Ng(a)){var i=a.match(oP);if(i){var o=i[1],l=i[2]?i[2]:null;t(e,hP(e,{type:o,namespace:l,target:e.context}))}}}};fP.on=fP.addListener=function(e,t,r,n,_){return dP(this,(function(e,t,r,n,_,a,i){bg(a)&&e.listeners.push({event:t,callback:a,type:r,namespace:n,qualifier:_,conf:i})}),e,t,r,n,_),this},fP.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},fP.removeListener=fP.off=function(e,t,r,n){var _=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,i=function(i){var o=a[i];dP(_,(function(t,r,n,_,l,s){if((o.type===n||"*"===e)&&(!_&&".*"!==o.namespace||o.namespace===_)&&(!l||t.qualifierCompare(o.qualifier,l))&&(!s||o.callback===s))return a.splice(i,1),!1}),e,t,r,n)},o=a.length-1;o>=0;o--)i(o);return this},fP.removeAllListeners=function(){return this.removeListener("*")},fP.emit=fP.trigger=function(e,t,r){var n=this.listeners,_=n.length;return this.emitting++,kg(t)||(t=[t]),pP(this,(function(e,a){null!=r&&(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],_=n.length);for(var i=function(){var r=n[o];if(r.type===a.type&&(!r.namespace||r.namespace===a.namespace||".*"===r.namespace)&&e.eventMatches(e.context,r,a)){var _=[a];null!=t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}}(_,t),e.beforeEmit(e.context,r,a),r.conf&&r.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==r})));var i=e.callbackContext(e.context,r,a),l=r.callback.apply(i,_);e.afterEmit(e.context,r,a),!1===l&&(a.stopPropagation(),a.preventDefault())}},o=0;o<_;o++)i();e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)}),e),this.emitting--,this};var gP={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&Ag(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},vP=function(e){return wg(e)?new px(e):e},mP={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new uP(gP,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var n=vP(t),_=0;_<this.length;_++){this[_].emitter().on(e,n,r)}return this},removeListener:function(e,t,r){for(var n=vP(t),_=0;_<this.length;_++){this[_].emitter().removeListener(e,n,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,r){for(var n=vP(t),_=0;_<this.length;_++){this[_].emitter().one(e,n,r)}return this},once:function(e,t,r){for(var n=vP(t),_=0;_<this.length;_++){this[_].emitter().on(e,n,r,{once:!0,onceCollection:this})}},emit:function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};Lk.eventAliasesOn(mP);var yP={nodes:function(e){return this.filter((function(e){return e.isNode()})).filter(e)},edges:function(e){return this.filter((function(e){return e.isEdge()})).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.push(n):t.push(n)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(wg(e)||Eg(e))return new px(e).filter(this);if(bg(e)){for(var r=this.spawn(),n=this,_=0;_<n.length;_++){var a=n[_];(t?e.apply(t,[a,_,n]):e(a,_,n))&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){wg(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var n=this[r];e.has(n)||t.push(n)}return t}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(wg(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),n=e,_=this.length<e.length,a=_?this:n,i=_?n:this,o=0;o<a.length;o++){var l=a[o];i.has(l)&&r.push(l)}return r},xor:function(e){var t=this._private.cy;wg(e)&&(e=t.$(e));var r=this.spawn(),n=e,_=function(e,t){for(var n=0;n<e.length;n++){var _=e[n],a=_._private.data.id;t.hasElementWithId(a)||r.push(_)}};return _(this,n),_(n,this),r},diff:function(e){var t=this._private.cy;wg(e)&&(e=t.$(e));var r=this.spawn(),n=this.spawn(),_=this.spawn(),a=e,i=function(e,t,r){for(var n=0;n<e.length;n++){var a=e[n],i=a._private.data.id;t.hasElementWithId(i)?_.merge(a):r.push(a)}};return i(this,a,r),i(a,this,n),{left:r,right:n,both:_}},add:function(e){var t=this._private.cy;if(!e)return this;if(wg(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=this.spawnSelf(),_=0;_<e.length;_++){var a=e[_],i=!this.has(a);i&&n.push(a)}return n},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&wg(e)){var n=e;e=r.mutableElements().filter(n)}for(var _=t.map,a=0;a<e.length;a++){var i=e[a],o=i._private.data.id;if(!_.has(o)){var l=this.length++;this[l]=i,_.set(o,{ele:i,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var _=this.length-1,a=this[_],i=a._private.data.id;this[_]=void 0,this[e]=a,r.set(i,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var _=n.index;return this.unmergeAt(_),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&wg(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var r=[],n=this,_=0;_<n.length;_++){var a=n[_],i=t?e.apply(t,[a,_,n]):e(a,_,n);r.push(i)}return r},reduce:function(e,t){for(var r=t,n=this,_=0;_<n.length;_++)r=e(r,n[_],_,n);return r},max:function(e,t){for(var r,n=-1/0,_=this,a=0;a<_.length;a++){var i=_[a],o=t?e.apply(t,[i,a,_]):e(i,a,_);o>n&&(n=o,r=i)}return{value:n,ele:r}},min:function(e,t){for(var r,n=1/0,_=this,a=0;a<_.length;a++){var i=_[a],o=t?e.apply(t,[i,a,_]):e(i,a,_);o<n&&(n=o,r=i)}return{value:n,ele:r}}},wP=yP;wP.u=wP["|"]=wP["+"]=wP.union=wP.or=wP.add,wP["\\"]=wP["!"]=wP["-"]=wP.difference=wP.relativeComplement=wP.subtract=wP.not,wP.n=wP["&"]=wP["."]=wP.and=wP.intersection=wP.intersect,wP["^"]=wP["(+)"]=wP["(-)"]=wP.symmetricDifference=wP.symdiff=wP.xor,wP.fnFilter=wP.filterFn=wP.stdFilter=wP.filter,wP.complement=wP.abscomp=wP.absoluteComplement;var bP=function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?kv:0}var _=n(e)-n(t);if(0!==_)return _;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var i=a(e)-a(t);if(0!==i)return i;var o=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==o?o:e.poolIndex()-t.poolIndex()},kP={forEach:function(e,t){if(bg(e))for(var r=this.length,n=0;n<r;n++){var _=this[n];if(!1===(t?e.apply(t,[_,n,this]):e(_,n,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var _=e;_>=0&&_<t&&_<n;_++)r.push(this[_]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!bg(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(bP)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:kv-1}var n=t.source,_=t.target,a=n.zDepth(),i=_.zDepth();return Math.max(a,i,0)}}};kP.each=kP.forEach;var xP;xP="undefined",("undefined"==typeof Symbol?"undefined":Dp(Symbol))!=xP&&Dp(Symbol.iterator)!=xP&&(kP[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return Mp({next:function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,(function(){return this}))});var PP=Iv({nodeDimensionsIncludeLabels:!1}),OP={layoutDimensions:function(e){var t;if(e=PP(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,r){var n=this.nodes().filter((function(e){return!e.isParent()})),_=this.cy(),a=t.eles,i=function(e){return e.id()},o=Mg(r,i);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,s=function(){if(!l)return null;for(var e=xm(),t=0;t<n.length;t++){var r=n[t],_=o(r,t);Om(e,_.x,_.y)}return e}(),c=Mg((function(e,r){var n=o(e,r);l&&(n=function(e,t,r){var n=t.x1+t.w/2,_=t.y1+t.h/2;return{x:n+(r.x-n)*e,y:_+(r.y-_)*e}}(Math.abs(t.spacingFactor),s,n));return null!=t.transform&&(n=t.transform(e,n)),n}),i);if(t.animate){for(var u=0;u<n.length;u++){var f=n[u],d=c(f,u);if(null==t.animateFilter||t.animateFilter(f,u)){var h=f.animation({position:d,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(h)}else f.position(d)}if(t.fit){var p=_.animation({fit:{boundingBox:a.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else if(void 0!==t.zoom&&void 0!==t.pan){var g=_.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),uw.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else n.positions(c),t.fit&&_.fit(t.eles,t.padding),null!=t.zoom&&_.zoom(t.zoom),t.pan&&_.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(Gg({},e,{eles:this}))}};function EP(e,t,r){var n,_=r._private,a=_.styleCache=_.styleCache||[];return null!=(n=a[e])?n:n=a[e]=t(r)}function AP(e,t){return e=gv(e),function(r){return EP(e,t,r)}}function CP(e,t){e=gv(e);var r=function(e){return t.call(e)};return function(){var t=this[0];if(t)return EP(e,r,t)}}OP.createLayout=OP.makeLayout=OP.layout;var SP={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),r=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=r;return e?n.emitAndNotify("style"):n.emit("style"),r.forEach((function(e){return e._private.styleDirty=!0})),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,n.style().apply(r));var _=r._private.style[e];return null!=_?_:t?n.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,_=r.style();if(xg(e)){var a=e;_.applyBypass(this,a,n),this.emitAndNotify("style")}else if(wg(e)){if(void 0===t){var i=this[0];return i?_.getStylePropertyValue(i,e):void 0}_.applyBypass(this,e,t,n),this.emitAndNotify("style")}else if(void 0===e){var o=this[0];return o?_.getRawStyle(o):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=!1,n=t.style(),_=this;if(void 0===e)for(var a=0;a<_.length;a++){var i=_[a];n.removeAllBypasses(i,r)}else{e=e.split(/\s+/);for(var o=0;o<_.length;o++){var l=_[o];n.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,_=r.pstyle("opacity").value;if(!t)return _;var a=n.data.parent?r.parents():null;if(a)for(var i=0;i<a.length;i++){_*=a[i].pstyle("opacity").value}return _}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function TP(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){if(!t(r[n]))return!1}return!0}function NP(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var _=this[0],a=e.hasCompoundNodes();if(_){var i=_._private;if(!t(_))return!1;if(_.isNode())return!a||TP(_,n);var o=i.source,l=i.target;return r(o)&&(!a||TP(o,r))&&(o===l||r(l)&&(!a||TP(l,r)))}}}var LP=AP("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));SP.takesUpSpace=CP("takesUpSpace",NP({ok:LP}));var MP=AP("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&LP(e)})),IP=AP("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&LP(e)}));SP.interactive=CP("interactive",NP({ok:MP,parentOk:IP,edgeOkViaNode:LP})),SP.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var jP=AP("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&LP(e)})),RP=LP;SP.visible=CP("visible",NP({ok:jP,edgeOkViaNode:RP})),SP.hidden=function(){var e=this[0];if(e)return!e.visible()},SP.isBundledBezier=CP("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),SP.bypass=SP.css=SP.style,SP.renderedCss=SP.renderedStyle,SP.removeBypass=SP.removeCss=SP.removeStyle,SP.pstyle=SP.parsedStyle;var DP={};function FP(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],_=t[1];this.on(e.event,n,_)}else if(1===t.length&&bg(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&kg(t[0])){for(var i=1===t.length?t[0]:null,o=0;o<this.length;o++){var l=this[o],s=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var u=e.overrideAble(l);if(void 0!==u&&(s=u,!u))return this}s&&(l._private[e.field]=e.value,c&&r.push(l))}var f=this.spawn(r);f.updateStyle(),f.emit(e.event),i&&f.emit(i)}return this}}function BP(e){DP[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},DP[e.on]=FP({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),DP[e.off]=FP({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}BP({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),BP({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),BP({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),BP({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),DP.deselect=DP.unselect,DP.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},BP({field:"active",on:"activate",off:"unactivate"}),BP({field:"pannable",on:"panify",off:"unpanify"}),DP.inactive=function(){var e=this[0];if(e)return!e._private.active};var zP={},qP=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var _=this[n];if(_.isNode()){for(var a=!1,i=_.connectedEdges(),o=0;o<i.length;o++){var l=i[o],s=l.source(),c=l.target();if(e.noIncomingEdges&&c===_&&s!==_||e.noOutgoingEdges&&s===_&&c!==_){a=!0;break}}a||r.push(_)}}return this.spawn(r,!0).filter(t)}},VP=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var _=this[n];if(_.isNode())for(var a=_.connectedEdges(),i=0;i<a.length;i++){var o=a[i],l=o.source(),s=o.target();e.outgoing&&l===_?(r.push(o),r.push(s)):e.incoming&&s===_&&(r.push(o),r.push(l))}}return this.spawn(r,!0).filter(t)}},UP=function(e){return function(t){for(var r=this,n=[],_={};;){var a=e.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var i=!1,o=0;o<a.length;o++){var l=a[o],s=l.id();_[s]||(_[s]=!0,n.push(l),i=!0)}if(!i)break;r=a}return this.spawn(n,!0).filter(t)}};function GP(e){return function(t){for(var r=[],n=0;n<this.length;n++){var _=this[n]._private[e.attr];_&&r.push(_)}return this.spawn(r,!0).filter(t)}}function WP(e){return function(t){var r=[],n=this._private.cy,_=e||{};wg(t)&&(t=n.$(t));for(var a=0;a<t.length;a++)for(var i=t[a]._private.edges,o=0;o<i.length;o++){var l=i[o],s=l._private.data,c=this.hasElementWithId(s.source)&&t.hasElementWithId(s.target),u=t.hasElementWithId(s.source)&&this.hasElementWithId(s.target);if(c||u){if(_.thisIsSrc||_.thisIsTgt){if(_.thisIsSrc&&!c)continue;if(_.thisIsTgt&&!u)continue}r.push(l)}}return this.spawn(r,!0)}}function $P(e){return e=Gg({},{codirected:!1},e),function(t){for(var r=[],n=this.edges(),_=e,a=0;a<n.length;a++)for(var i=n[a]._private,o=i.source,l=o._private.data.id,s=i.data.target,c=o._private.edges,u=0;u<c.length;u++){var f=c[u],d=f._private.data,h=d.target,p=d.source,g=h===s&&p===l,v=l===h&&s===p;(_.codirected&&g||!_.codirected&&(g||v))&&r.push(f)}return this.spawn(r,!0).filter(t)}}zP.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},Gg(zP,{roots:qP({noIncomingEdges:!0}),leaves:qP({noOutgoingEdges:!0}),outgoers:wx(VP({outgoing:!0}),"outgoers"),successors:UP({outgoing:!0}),incomers:wx(VP({incoming:!0}),"incomers"),predecessors:UP({})}),Gg(zP,{neighborhood:wx((function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var _=r[n],a=_.connectedEdges(),i=0;i<a.length;i++){var o=a[i],l=o.source(),s=o.target(),c=_===l?s:l;c.length>0&&t.push(c[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)}),"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),zP.neighbourhood=zP.neighborhood,zP.closedNeighbourhood=zP.closedNeighborhood,zP.openNeighbourhood=zP.openNeighborhood,Gg(zP,{source:wx((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"source"),target:wx((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"target"),sources:GP({attr:"source"}),targets:GP({attr:"target"})}),Gg(zP,{edgesWith:wx(WP(),"edgesWith"),edgesTo:wx(WP({thisIsSrc:!0}),"edgesTo")}),Gg(zP,{connectedEdges:wx((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var _=n._private.edges,a=0;a<_.length;a++){var i=_[a];t.push(i)}}return this.spawn(t,!0).filter(e)}),"connectedEdges"),connectedNodes:wx((function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)}),"connectedNodes"),parallelEdges:wx($P(),"parallelEdges"),codirectedEdges:wx($P({codirected:!0}),"codirectedEdges")}),Gg(zP,{components:function(e){var t=this,r=t.cy(),n=r.collection(),_=null==e?t.nodes():e.nodes(),a=[];null!=e&&_.empty()&&(_=e.sources());var i=function(e,t){n.merge(e),_.unmerge(e),t.merge(e)};if(_.empty())return t.spawn();var o=function(){var e=r.collection();a.push(e);var n=_[0];i(n,e),t.bfs({directed:!1,roots:n,visit:function(t){return i(t,e)}}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))};do{o()}while(_.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),zP.componentsOf=zP.components;var YP=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var _=new Bv,a=!1;if(t){if(t.length>0&&xg(t[0])&&!Ag(t[0])){a=!0;for(var i=[],o=new qv,l=0,s=t.length;l<s;l++){var c=t[l];null==c.data&&(c.data={});var u=c.data;if(null==u.id)u.id=Nv();else if(e.hasElementWithId(u.id)||o.has(u.id))continue;var f=new Vv(e,c,!1);i.push(f),o.add(u.id)}t=i}}else t=[];this.length=0;for(var d=0,h=t.length;d<h;d++){var p=t[d][0];if(null!=p){var g=p._private.data.id;r&&_.has(g)||(r&&_.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function(){for(var e=this.lazyMap=new Bv,t=this.eles,r=0;r<t.length;r++){var n=t[r];e.set(n.id(),{index:r,ele:n})}}},r&&(this._private.map=_),a&&!n&&this.restore()}else Av("A collection must have a reference to the core")},HP=Vv.prototype=YP.prototype=Object.create(Array.prototype);HP.instanceString=function(){return"collection"},HP.spawn=function(e,t){return new YP(this.cy(),e,t)},HP.spawnSelf=function(){return this.spawn(this)},HP.cy=function(){return this._private.cy},HP.renderer=function(){return this._private.cy.renderer()},HP.element=function(){return this[0]},HP.collection=function(){return Cg(this)?this:new YP(this._private.cy,[this])},HP.unique=function(){return new YP(this._private.cy,this,!0)},HP.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},HP.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new YP(t)},HP.$id=HP.getElementById,HP.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},HP.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},HP.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},HP.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if(xg(e)){if(r.startBatch(),e.data){t.data(e.data);var _=n.data;if(t.isEdge()){var a=!1,i={},o=e.data.source,l=e.data.target;null!=o&&o!=_.source&&(i.source=""+o,a=!0),null!=l&&l!=_.target&&(i.target=""+l,a=!0),a&&(t=t.move(i))}else{var s="parent"in e.data,c=e.data.parent;!s||null==c&&null==_.parent||c==_.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var u=function(r,_,a){var i=e[r];null!=i&&i!==n[r]&&(i?t[_]():t[a]())};return u("removed","remove","restore"),u("selected","select","unselect"),u("selectable","selectify","unselectify"),u("locked","lock","unlock"),u("grabbable","grabify","ungrabify"),u("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var f={data:Tv(n.data),position:Tv(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};f.classes="";var d=0;return n.classes.forEach((function(e){return f.classes+=0==d++?e:" "+e})),f}}},HP.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},HP.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=this[r].json(),_=new Vv(e,n,!1);t.push(_)}return new YP(e,t)},HP.copy=HP.clone,HP.restore=function(){for(var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=this,a=_.cy(),i=a._private,o=[],l=[],s=0,c=_.length;s<c;s++){var u=_[s];n&&!u.removed()||(u.isNode()?o.push(u):l.push(u))}e=o.concat(l);var f=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var d=e[t],h=d._private,p=h.data;if(d.clearTraversalCache(),n||h.removed)if(void 0===p.id)p.id=Nv();else if(Pg(p.id))p.id=""+p.id;else{if(Ng(p.id)||!wg(p.id)){Av("Can not create element with invalid string ID `"+p.id+"`"),f();continue}if(a.hasElementWithId(p.id)){Av("Can not create second element with ID `"+p.id+"`"),f();continue}}else;var g=p.id;if(d.isNode()){var v=h.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(d.isEdge()){for(var m=d,y=["source","target"],w=y.length,b=!1,k=0;k<w;k++){var x=y[k],P=p[x];Pg(P)&&(P=p[x]=""+p[x]),null==P||""===P?(Av("Can not create edge `"+g+"` with unspecified "+x),b=!0):a.hasElementWithId(P)||(Av("Can not create edge `"+g+"` with nonexistant "+x+" `"+P+"`"),b=!0)}if(b){f();continue}var O=a.getElementById(p.source),E=a.getElementById(p.target);O.same(E)?O._private.edges.push(m):(O._private.edges.push(m),E._private.edges.push(m)),m._private.source=O,m._private.target=E}h.map=new Bv,h.map.set(g,{ele:d,index:0}),h.removed=!1,n&&a.addToPool(d)}for(var A=0;A<o.length;A++){var C=o[A],S=C._private.data;Pg(S.parent)&&(S.parent=""+S.parent);var T=S.parent;if(null!=T||C._private.parent){var N=C._private.parent?a.collection().merge(C._private.parent):a.getElementById(T);if(N.empty())S.parent=void 0;else if(N[0].removed())Sv("Node added with missing parent, reference to parent removed"),S.parent=void 0,C._private.parent=null;else{for(var L=!1,M=N;!M.empty();){if(C.same(M)){L=!0,S.parent=void 0;break}M=M.parent()}L||(N[0]._private.children.push(C),C._private.parent=N[0],i.hasCompoundNodes=!0)}}}if(e.length>0){for(var I=e.length===_.length?_:new YP(a,e),j=0;j<I.length;j++){var R=I[j];R.isNode()||(R.parallelEdges().clearTraversalCache(),R.source().clearTraversalCache(),R.target().clearTraversalCache())}(i.hasCompoundNodes?a.collection().merge(I).merge(I.connectedNodes()).merge(I.parent()):I).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?I.emitAndNotify("add"):n&&I.emit("add")}return _},HP.removed=function(){var e=this[0];return e&&e._private.removed},HP.inside=function(){var e=this[0];return e&&!e._private.removed},HP.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,n=[],_={},a=r._private.cy;function i(e){var r=_[e.id()];t&&e.removed()||r||(_[e.id()]=!0,e.isNode()?(n.push(e),function(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}(e),function(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}(e)):n.unshift(e))}for(var o=0,l=r.length;o<l;o++){i(r[o])}function s(e,t){var r=e._private.edges;jv(r,t),e.clearTraversalCache()}function c(e){e.clearTraversalCache()}var u=[];function f(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();jv(r,t),t._private.parent=null,u.ids[n]||(u.ids[n]=!0,u.push(e))}u.ids={},r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(n);for(var d=0;d<n.length;d++){var h=n[d];if(h.isEdge()){var p=h.source()[0],g=h.target()[0];s(p,h),s(g,h);for(var v=h.parallelEdges(),m=0;m<v.length;m++){var y=v[m];c(y),y.isBundledBezier()&&y.dirtyBoundingBoxCache()}}else{var w=h.parent();0!==w.length&&f(w,h)}t&&(h._private.removed=!0)}var b=a._private.elements;a._private.hasCompoundNodes=!1;for(var k=0;k<b.length;k++){if(b[k].isParent()){a._private.hasCompoundNodes=!0;break}}var x=new YP(this.cy(),n);x.size()>0&&(e?x.emitAndNotify("remove"):t&&x.emit("remove"));for(var P=0;P<u.length;P++){var O=u[P];t&&O.removed()||O.updateStyle()}return x},HP.move=function(e){var t=this._private.cy,r=this,n=!1,_=!1,a=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=a(e.source),o=a(e.target),l=null!=i&&t.hasElementWithId(i),s=null!=o&&t.hasElementWithId(o);(l||s)&&(t.batch((function(){r.remove(n,_),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],a=t._private.data;t.isEdge()&&(l&&(a.source=i),s&&(a.target=o))}r.restore(n,_)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var c=a(e.parent);if(null===c||t.hasElementWithId(c)){var u=null===c?void 0:c;t.batch((function(){var e=r.remove(n,_);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var a=r[t],i=a._private.data;a.isNode()&&(i.parent=u)}e.restore(n,_)})),r.emitAndNotify("move")}}return this},[_w,Mk,Ik,vx,bx,Cx,Sx,nP,mP,yP,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},kP,OP,SP,DP,zP].forEach((function(e){Gg(HP,e)}));var XP={add:function(e){var t,r=this;if(Eg(e)){var n=e;if(n._private.cy===r)t=n.restore();else{for(var _=[],a=0;a<n.length;a++){var i=n[a];_.push(i.json())}t=new YP(r,_)}}else if(kg(e)){t=new YP(r,e)}else if(xg(e)&&(kg(e.nodes)||kg(e.edges))){for(var o=e,l=[],s=["nodes","edges"],c=0,u=s.length;c<u;c++){var f=s[c],d=o[f];if(kg(d))for(var h=0,p=d.length;h<p;h++){var g=Gg({group:f},d[h]);l.push(g)}}t=new YP(r,l)}else{t=new Vv(r,e).collection()}return t},remove:function(e){if(Eg(e));else if(wg(e)){var t=e;e=this.$(t)}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function ZP(e,t,r,n){var _=.1,a="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var i=0;i<4;++i)if("number"!=typeof arguments[i]||isNaN(arguments[i])||!isFinite(arguments[i]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var o=a?new Float32Array(11):new Array(11);function l(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function c(e){return 3*e}function u(e,t,r){return((l(t,r)*e+s(t,r))*e+c(t))*e}function f(e,t,r){return 3*l(t,r)*e*e+2*s(t,r)*e+c(t)}function d(t){for(var n=0,a=1;10!==a&&o[a]<=t;++a)n+=_;--a;var i=n+(t-o[a])/(o[a+1]-o[a])*_,l=f(i,e,r);return l>=.001?function(t,n){for(var _=0;_<4;++_){var a=f(n,e,r);if(0===a)return n;n-=(u(n,e,r)-t)/a}return n}(t,i):0===l?i:function(t,n,_){var a,i,o=0;do{(a=u(i=n+(_-n)/2,e,r)-t)>0?_=i:n=i}while(Math.abs(a)>1e-7&&++o<10);return i}(t,n,n+_)}var h=!1;function p(){h=!0,e===t&&r===n||function(){for(var t=0;t<11;++t)o[t]=u(t*_,e,r)}()}var g=function(_){return h||p(),e===t&&r===n?_:0===_?0:1===_?1:u(d(_),t,n)};g.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var v="generateBezier("+[e,t,r,n]+")";return g.toString=function(){return v},g}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var KP=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var _={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:_.v,dv:e(_)}}function r(r,n){var _={dx:r.v,dv:e(r)},a=t(r,.5*n,_),i=t(r,.5*n,a),o=t(r,n,i),l=1/6*(_.dx+2*(a.dx+i.dx)+o.dx),s=1/6*(_.dv+2*(a.dv+i.dv)+o.dv);return r.x=r.x+l*n,r.v=r.v+s*n,r}return function e(t,n,_){var a,i,o,l={x:-1,v:0,tension:null,friction:null},s=[0],c=0,u=1e-4;for(t=parseFloat(t)||500,n=parseFloat(n)||20,_=_||null,l.tension=t,l.friction=n,i=(a=null!==_)?(c=e(t,n))/_*.016:.016;o=r(o||l,i),s.push(1+o.x),c+=16,Math.abs(o.x)>u&&Math.abs(o.v)>u;);return a?function(e){return s[e*(s.length-1)|0]}:c}}(),JP=function(e,t,r,n){var _=ZP(e,t,r,n);return function(e,t,r){return e+(t-e)*_(r)}},QP={linear:function(e,t,r){return e+(t-e)*r},ease:JP(.25,.1,.25,1),"ease-in":JP(.42,0,1,1),"ease-out":JP(0,0,.58,1),"ease-in-out":JP(.42,0,.58,1),"ease-in-sine":JP(.47,0,.745,.715),"ease-out-sine":JP(.39,.575,.565,1),"ease-in-out-sine":JP(.445,.05,.55,.95),"ease-in-quad":JP(.55,.085,.68,.53),"ease-out-quad":JP(.25,.46,.45,.94),"ease-in-out-quad":JP(.455,.03,.515,.955),"ease-in-cubic":JP(.55,.055,.675,.19),"ease-out-cubic":JP(.215,.61,.355,1),"ease-in-out-cubic":JP(.645,.045,.355,1),"ease-in-quart":JP(.895,.03,.685,.22),"ease-out-quart":JP(.165,.84,.44,1),"ease-in-out-quart":JP(.77,0,.175,1),"ease-in-quint":JP(.755,.05,.855,.06),"ease-out-quint":JP(.23,1,.32,1),"ease-in-out-quint":JP(.86,0,.07,1),"ease-in-expo":JP(.95,.05,.795,.035),"ease-out-expo":JP(.19,1,.22,1),"ease-in-out-expo":JP(1,0,0,1),"ease-in-circ":JP(.6,.04,.98,.335),"ease-out-circ":JP(.075,.82,.165,1),"ease-in-out-circ":JP(.785,.135,.15,.86),spring:function(e,t,r){if(0===r)return QP.linear;var n=KP(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}},"cubic-bezier":JP};function eO(e,t,r,n,_){if(1===n)return r;if(t===r)return r;var a=_(t,r,n);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function tO(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function rO(e,t,r,n,_){var a=null!=_?_.type:null;r<0?r=0:r>1&&(r=1);var i=tO(e,_),o=tO(t,_);if(Pg(i)&&Pg(o))return eO(a,i,o,r,n);if(kg(i)&&kg(o)){for(var l=[],s=0;s<o.length;s++){var c=i[s],u=o[s];if(null!=c&&null!=u){var f=eO(a,c,u,r,n);l.push(f)}else l.push(u)}return l}}function nO(e,t,r,n){var _=!n,a=e._private,i=t._private,o=i.easing,l=i.startTime,s=(n?e:e.cy()).style();if(!i.easingImpl)if(null==o)i.easingImpl=QP.linear;else{var c,u,f;if(wg(o))c=s.parse("transition-timing-function",o).value;else c=o;wg(c)?(u=c,f=[]):(u=c[1],f=c.slice(2).map((function(e){return+e}))),f.length>0?("spring"===u&&f.push(i.duration),i.easingImpl=QP[u].apply(null,f)):i.easingImpl=QP[u]}var d,h=i.easingImpl;if(d=0===i.duration?1:(r-l)/i.duration,i.applying&&(d=i.progress),d<0?d=0:d>1&&(d=1),null==i.delay){var p=i.startPosition,g=i.position;if(g&&_&&!e.locked()){var v={};_O(p.x,g.x)&&(v.x=rO(p.x,g.x,d,h)),_O(p.y,g.y)&&(v.y=rO(p.y,g.y,d,h)),e.position(v)}var m=i.startPan,y=i.pan,w=a.pan,b=null!=y&&n;b&&(_O(m.x,y.x)&&(w.x=rO(m.x,y.x,d,h)),_O(m.y,y.y)&&(w.y=rO(m.y,y.y,d,h)),e.emit("pan"));var k=i.startZoom,x=i.zoom,P=null!=x&&n;P&&(_O(k,x)&&(a.zoom=km(a.minZoom,rO(k,x,d,h),a.maxZoom)),e.emit("zoom")),(b||P)&&e.emit("viewport");var O=i.style;if(O&&O.length>0&&_){for(var E=0;E<O.length;E++){var A=O[E],C=A.name,S=A,T=i.startStyle[C],N=rO(T,S,d,h,s.properties[T.name]);s.overrideBypass(e,C,N)}e.emit("style")}}return i.progress=d,d}function _O(e,t){return null!=e&&null!=t&&(!(!Pg(e)||!Pg(t))||!(!e||!t))}function aO(e,t,r,n){var _=t._private;_.started=!0,_.startTime=r-_.progress*_.duration}function iO(e,t){var r=t._private.aniEles,n=[];function _(t,r){var _=t._private,a=_.animation.current,i=_.animation.queue,o=!1;if(0===a.length){var l=i.shift();l&&a.push(l)}for(var s=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},c=a.length-1;c>=0;c--){var u=a[c],f=u._private;f.stopped?(a.splice(c,1),f.hooked=!1,f.playing=!1,f.started=!1,s(f.frames)):(f.playing||f.applying)&&(f.playing&&f.applying&&(f.applying=!1),f.started||aO(0,u,e),nO(t,u,e,r),f.applying&&(f.applying=!1),s(f.frames),null!=f.step&&f.step(e),u.completed()&&(a.splice(c,1),f.hooked=!1,f.playing=!1,f.started=!1,s(f.completes)),o=!0)}return r||0!==a.length||0!==i.length||n.push(t),o}for(var a=!1,i=0;i<r.length;i++){var o=_(r[i]);a=a||o}var l=_(t,!0);(a||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}var oO={animate:Lk.animate(),animation:Lk.animation(),animated:Lk.animated(),clearQueue:Lk.clearQueue(),delay:Lk.delay(),delayAnimation:Lk.delayAnimation(),stop:Lk.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender((function(t,r){iO(r,e)}),t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&ov((function(r){iO(r,e),t()}))}()}}},lO={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&Ag(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e}},sO=function(e){return wg(e)?new px(e):e},cO={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new uP(lO,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,sO(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,sO(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,sO(t),r),this},once:function(e,t,r){return this.emitter().one(e,sO(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Lk.eventAliasesOn(cO);var uO={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};uO.jpeg=uO.jpg;var fO={layout:function(e){var t=this;if(null!=e)if(null!=e.name){var r=e.name,n=t.extension("layout",r);if(null!=n){var _;_=wg(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var a=new n(Gg({},e,{cy:t,eles:_}));return a}Av("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Av("A `name` must be specified to make a layout");else Av("Layout options must be specified to make a layout")}};fO.createLayout=fO.makeLayout=fO.layout;var dO={notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t)}else if(r.notificationsEnabled){var _=this.renderer();!this.destroyed()&&_&&_.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)}))}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var _=r[n],a=e[_];t.getElementById(_).data(a)}}))}},hO=Iv({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),pO={renderTo:function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,r=t.extension("renderer",e.name);if(null!=r){void 0!==e.wheelSensitivity&&Sv("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=hO(e);n.cy=t,t._private.renderer=new r(n),this.notify("init")}else Av("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};pO.invalidateDimensions=pO.resize;var gO={collection:function(e,t){return wg(e)?this.$(e):Eg(e)?e.collection():kg(e)?(t||(t={}),new YP(this,e,t.unique,t.removed)):new YP(this)},nodes:function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t},edges:function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};gO.elements=gO.filter=gO.$;var vO={},mO="t";vO.apply=function(e){for(var t=this,r=t._private.cy.collection(),n=0;n<e.length;n++){var _=e[n],a=t.getContextMeta(_);if(!a.empty){var i=t.getContextStyle(a),o=t.applyContextStyle(a,i,_);_._private.appliedInitStyle?t.updateTransitions(_,o.diffProps):_._private.appliedInitStyle=!0,t.updateStyleHints(_)&&r.push(_)}}return r},vO.getPropertiesDiff=function(e,t){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},_=e+"-"+t,a=n[_];if(a)return a;for(var i=[],o={},l=0;l<r.length;l++){var s=r[l],c=e[l]===mO,u=t[l]===mO,f=c!==u,d=s.mappedProperties.length>0;if(f||u&&d){var h=void 0;f&&d||f?h=s.properties:d&&(h=s.mappedProperties);for(var p=0;p<h.length;p++){for(var g=h[p],v=g.name,m=!1,y=l+1;y<r.length;y++){var w=r[y];if(t[y]===mO&&(m=null!=w.properties[g.name]))break}o[v]||m||(o[v]=!0,i.push(v))}}}return n[_]=i,i},vO.getContextMeta=function(e){for(var t,r=this,n="",_=e._private.styleCxtKey||"",a=0;a<r.length;a++){var i=r[a];n+=i.selector&&i.selector.matches(e)?mO:"f"}return t=r.getPropertiesDiff(_,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},vO.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},_=0;_<this.length;_++){var a=this[_];if(t[_]===mO)for(var i=0;i<a.properties.length;i++){var o=a.properties[i];n[o.name]=o}}return r[t]=n,n},vO.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,_={},a=this.types,i=0;i<n.length;i++){var o=n[i],l=t[o],s=r.pstyle(o);if(!l){if(!s)continue;l=s.bypass?{name:o,deleteBypassed:!0}:{name:o,delete:!0}}if(s!==l){if(l.mapped===a.fn&&null!=s&&null!=s.mapping&&s.mapping.value===l.value){var c=s.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var u=_[o]={prev:s};this.applyParsedProperty(r,l),u.next=r.pstyle(o),u.next&&u.next.bypass&&(u.next=u.next.bypassed)}}return{diffProps:_}},vO.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,_=r.propertyGroupKeys,a=function(e,t,n){return r.getPropertiesHash(e,t,n)},i=t.styleKey;if(e.removed())return!1;var o="nodes"===t.group,l=e._private.style;n=Object.keys(l);for(var s=0;s<_.length;s++){var c=_[s];t.styleKeys[c]=[sv,cv]}for(var u,f=function(e,r){return t.styleKeys[r][0]=fv(e,t.styleKeys[r][0])},d=function(e,r){return t.styleKeys[r][1]=dv(e,t.styleKeys[r][1])},h=function(e,t){f(e,t),d(e,t)},p=function(e,t){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);f(n,t),d(n,t)}},g=0;g<n.length;g++){var v=n[g],m=l[v];if(null!=m){var y=this.properties[v],w=y.type,b=y.groupKey,k=void 0;null!=y.hashOverride?k=y.hashOverride(e,m):null!=m.pfValue&&(k=m.pfValue);var x=null==y.enums?m.value:null,P=null!=k,O=P||null!=x,E=m.units;if(w.number&&O&&!w.multiple)h(-128<(u=P?k:x)&&u<128&&Math.floor(u)!==u?2e9-(1024*u|0):u,b),P||null==E||p(E,b);else p(m.strValue,b)}}for(var A,C,S=[sv,cv],T=0;T<_.length;T++){var N=_[T],L=t.styleKeys[N];S[0]=fv(L[0],S[0]),S[1]=dv(L[1],S[1])}t.styleKey=(A=S[0],C=S[1],2097152*A+C);var M=t.styleKeys;t.labelDimsKey=hv(M.labelDimensions);var I=a(e,["label"],M.labelDimensions);if(t.labelKey=hv(I),t.labelStyleKey=hv(pv(M.commonLabel,I)),!o){var j=a(e,["source-label"],M.labelDimensions);t.sourceLabelKey=hv(j),t.sourceLabelStyleKey=hv(pv(M.commonLabel,j));var R=a(e,["target-label"],M.labelDimensions);t.targetLabelKey=hv(R),t.targetLabelStyleKey=hv(pv(M.commonLabel,R))}if(o){var D=t.styleKeys,F=D.nodeBody,B=D.nodeBorder,z=D.nodeOutline,q=D.backgroundImage,V=D.compound,U=D.pie,G=[F,B,z,q,V,U].filter((function(e){return null!=e})).reduce(pv,[sv,cv]);t.nodeKey=hv(G),t.hasPie=null!=U&&U[0]!==sv&&U[1]!==cv}return i!==t.styleKey},vO.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},vO.applyParsedProperty=function(e,t){var r,n=this,_=t,a=e._private.style,i=n.types,o=n.properties[_.name].type,l=_.bypass,s=a[_.name],c=s&&s.bypass,u=e._private,f="mapping",d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},h=function(){var t=d(s),r=d(_);n.checkTriggers(e,_.name,t,r)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(_=t=this.parse(t.name,"bezier",l)),_.delete)return a[_.name]=void 0,h(),!0;if(_.deleteBypassed)return s?!!s.bypass&&(s.bypassed=void 0,h(),!0):(h(),!0);if(_.deleteBypass)return s?!!s.bypass&&(a[_.name]=s.bypassed,h(),!0):(h(),!0);var p=function(){Sv("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+_.name+"` with data field `"+_.field+"`); try a `["+_.field+"]` selector to limit scope to elements with `"+_.field+"` defined")};switch(_.mapped){case i.mapData:for(var g,v=_.field.split("."),m=u.data,y=0;y<v.length&&m;y++){m=m[v[y]]}if(null==m)return p(),!1;if(!Pg(m))return Sv("Do not use continuous mappers without specifying numeric data (i.e. `"+_.field+": "+m+"` for `"+e.id()+"` is non-numeric)"),!1;var w=_.fieldMax-_.fieldMin;if((g=0===w?0:(m-_.fieldMin)/w)<0?g=0:g>1&&(g=1),o.color){var b=_.valueMin[0],k=_.valueMax[0],x=_.valueMin[1],P=_.valueMax[1],O=_.valueMin[2],E=_.valueMax[2],A=null==_.valueMin[3]?1:_.valueMin[3],C=null==_.valueMax[3]?1:_.valueMax[3],S=[Math.round(b+(k-b)*g),Math.round(x+(P-x)*g),Math.round(O+(E-O)*g),Math.round(A+(C-A)*g)];r={bypass:_.bypass,name:_.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else{if(!o.number)return!1;var T=_.valueMin+(_.valueMax-_.valueMin)*g;r=this.parse(_.name,T,_.bypass,f)}if(!r)return p(),!1;r.mapping=_,_=r;break;case i.data:for(var N=_.field.split("."),L=u.data,M=0;M<N.length&&L;M++){L=L[N[M]]}if(null!=L&&(r=this.parse(_.name,L,_.bypass,f)),!r)return p(),!1;r.mapping=_,_=r;break;case i.fn:var I=_.value,j=null!=_.fnValue?_.fnValue:I(e);if(_.prevFnValue=j,null==j)return Sv("Custom function mappers may not return null (i.e. `"+_.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(_.name,j,_.bypass,f)))return Sv("Custom function mappers may not return invalid values for the property type (i.e. `"+_.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=Tv(_),_=r;break;case void 0:break;default:return!1}return l?(_.bypassed=c?s.bypassed:s,a[_.name]=_):c?s.bypassed=_:a[_.name]=_,h(),!0},vO.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var _=n._private.style,a=Object.keys(_),i=0;i<a.length;i++){var o=a[i],l=_[o];null!=l&&(l.bypass?l.bypassed=null:_[o]=null)}else n._private.style={}}},vO.update=function(){this._private.cy.mutableElements().updateStyle()},vO.updateTransitions=function(e,t){var r=this,n=e._private,_=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,i=e.pstyle("transition-delay").pfValue;if(_.length>0&&a>0){for(var o={},l=!1,s=0;s<_.length;s++){var c=_[s],u=e.pstyle(c),f=t[c];if(f){var d=f.prev,h=null!=f.next?f.next:u,p=!1,g=void 0,v=1e-6;d&&(Pg(d.pfValue)&&Pg(h.pfValue)?(p=h.pfValue-d.pfValue,g=d.pfValue+v*p):Pg(d.value)&&Pg(h.value)?(p=h.value-d.value,g=d.value+v*p):kg(d.value)&&kg(h.value)&&(p=d.value[0]!==h.value[0]||d.value[1]!==h.value[1]||d.value[2]!==h.value[2],g=d.strValue),p&&(o[c]=h.strValue,this.applyBypass(e,c,g),l=!0))}}if(!l)return;n.transitioning=!0,new uw((function(t){i>0?e.delayAnimation(i).play().promise().then(t):t()})).then((function(){return e.animation({style:o,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,_),e.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(e,_),e.emitAndNotify("style"),n.transitioning=!1)},vO.checkTrigger=function(e,t,r,n,_,a){var i=this.properties[t],o=_(i);e.removed()||null!=o&&o(r,n,e)&&a(i)},vO.checkZOrderTrigger=function(e,t,r,n){var _=this;this.checkTrigger(e,t,r,n,(function(e){return e.triggersZOrder}),(function(){_._private.cy.notify("zorder",e)}))},vO.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBounds}),(function(t){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()}))},vO.checkConnectedEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBoundsOfConnectedEdges}),(function(t){e.connectedEdges().forEach((function(e){e.dirtyBoundingBoxCache()}))}))},vO.checkParallelEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,(function(e){return e.triggersBoundsOfParallelEdges}),(function(t){e.parallelEdges().forEach((function(e){e.dirtyBoundingBoxCache()}))}))},vO.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n),this.checkConnectedEdgesBoundsTrigger(e,t,r,n),this.checkParallelEdgesBoundsTrigger(e,t,r,n)};var yO={applyBypass:function(e,t,r,n){var _=[];if("*"===t||"**"===t){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var i=this.properties[a].name,o=this.parse(i,r,!0);o&&_.push(o)}}else if(wg(t)){var l=this.parse(t,r,!0);l&&_.push(l)}else{if(!xg(t))return!1;var s=t;n=r;for(var c=Object.keys(s),u=0;u<c.length;u++){var f=c[u],d=s[f];if(void 0===d&&(d=s[jg(f)]),void 0!==d){var h=this.parse(f,d,!0);h&&_.push(h)}}}if(0===_.length)return!1;for(var p=!1,g=0;g<e.length;g++){for(var v=e[g],m={},y=void 0,w=0;w<_.length;w++){var b=_[w];if(n){var k=v.pstyle(b.name);y=m[b.name]={prev:k}}p=this.applyParsedProperty(v,Tv(b))||p,n&&(y.next=v.pstyle(b.name))}p&&this.updateStyleHints(v),n&&this.updateTransitions(v,m,true)}return p},overrideBypass:function(e,t,r){t=Ig(t);for(var n=0;n<e.length;n++){var _=e[n],a=_._private.style[t],i=this.properties[t].type,o=i.color,l=i.mutiple,s=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),a.strValue=o?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(_)):this.applyBypass(_,t,r),this.checkTriggers(_,t,s,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var n=0;n<e.length;n++){for(var _=e[n],a={},i=0;i<t.length;i++){var o=t[i],l=this.properties[o],s=_.pstyle(l.name);if(s&&s.bypass){var c=this.parse(o,"",!0),u=a[l.name]={prev:s};this.applyParsedProperty(_,c),u.next=_.pstyle(l.name)}}this.updateStyleHints(_),r&&this.updateTransitions(_,a,true)}}},wO={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),n=t.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(e)}},bO={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var n={},_=0;_<r.properties.length;_++){var a=r.properties[_],i=r.getStylePropertyValue(e,a.name,t);null!=i&&(n[a.name]=i,n[jg(a.name)]=i)}return n}},getIndexedStyle:function(e,t,r,n){var _=e.pstyle(t)[r][n];return null!=_?_:e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var _=n.type,a=e.pstyle(n.name);if(a){var i=a.value,o=a.units,l=a.strValue;if(r&&_.number&&null!=i&&Pg(i)){var s=e.cy().zoom(),c=function(e){return e*s},u=function(e,t){return c(e)+t},f=kg(i);return(f?o.every((function(e){return null!=e})):null!=o)?f?i.map((function(e,t){return u(e,o[t])})).join(" "):u(i,o):f?i.map((function(e){return wg(e)?e:""+c(e)})).join(" "):""+c(i)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var r={},n=0;n<t.length;n++){var _=t[n].name,a=e.pstyle(_);void 0!==a&&(a=xg(a)?this.parse(_,a.strValue):this.parse(_,a)),a&&(r[_]=a)}return r},getPropsList:function(e){var t=[],r=e,n=this.properties;if(r)for(var _=Object.keys(r),a=0;a<_.length;a++){var i=_[a],o=r[i],l=n[i]||n[Ig(i)],s=this.parse(l.name,o);s&&t.push(s)}return t},getNonDefaultPropertiesHash:function(e,t,r){var n,_,a,i,o,l,s=r.slice();for(o=0;o<t.length;o++)if(n=t[o],null!=(_=e.pstyle(n,!1)))if(null!=_.pfValue)s[0]=fv(i,s[0]),s[1]=dv(i,s[1]);else for(a=_.strValue,l=0;l<a.length;l++)i=a.charCodeAt(l),s[0]=fv(i,s[0]),s[1]=dv(i,s[1]);return s}};bO.getPropertiesHash=bO.getNonDefaultPropertiesHash;var kO={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],_=n.selector,a=n.style||n.css,i=Object.keys(a);t.selector(_);for(var o=0;o<i.length;o++){var l=i[o],s=a[l];t.css(l,s)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,_=r.properties,a={},i=0;i<_.length;i++){var o=_[i];a[o.name]=o.strValue}e.push({selector:n?n.toString():"core",style:a})}return e}},xO={appendFromString:function(e){var t,r,n,_=this,a=""+e;function i(){a=a.length>t.length?a.substr(t.length):""}function o(){r=r.length>n.length?r.substr(n.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(a.match(/^\s*$/))break;var l=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){Sv("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}t=l[0];var s=l[1];if("core"!==s)if(new px(s).invalid){Sv("Skipping parsing of block: Invalid selector found in string stylesheet: "+s),i();continue}var c=l[2],u=!1;r=c;for(var f=[];;){if(r.match(/^\s*$/))break;var d=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!d){Sv("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),u=!0;break}n=d[0];var h=d[1],p=d[2];if(this.properties[h])_.parse(h,p)?(f.push({name:h,val:p}),o()):(Sv("Skipping property: Invalid property definition in: "+n),o());else Sv("Skipping property: Invalid property name in: "+n),o()}if(u){i();break}_.selector(s);for(var g=0;g<f.length;g++){var v=f[g];_.css(v.name,v.val)}i()}return _},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},PO={};!function(){var e=Fg,t=zg,r=Vg,n=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},_=function(n){var _=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+n+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+_+")\\s*\\,\\s*("+_+")\\)$"},a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];PO.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:_("mapData")},mapLayoutData:{mapping:!0,regex:_("mapLayoutData")},mapScratch:{mapping:!0,regex:_("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return wg(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var i={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t},emptyNonEmpty:function(e,t){var r=Ng(e),n=Ng(t);return r&&!n||!r&&n}},o=PO.types,l=[{name:"label",type:o.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],c=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:o.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any},{name:"line-height",type:o.positiveNumber,triggersBounds:i.any}],f=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:o.justification}],d=[{name:"events",type:o.bool,triggersZOrder:i.any},{name:"text-events",type:o.bool,triggersZOrder:i.any}],h=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfConnectedEdges:i.any,triggersBoundsOfParallelEdges:function(e,t,r){return e!==t&&"bezier"===r.pstyle("curve-style").value}},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.number,triggersZOrder:i.any}],p=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"overlay-shape",type:o.overlayShape,triggersBounds:i.any},{name:"overlay-corner-radius",type:o.cornerRadius}],g=[{name:"underlay-padding",type:o.size,triggersBounds:i.any},{name:"underlay-color",type:o.color},{name:"underlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"underlay-shape",type:o.overlayShape,triggersBounds:i.any},{name:"underlay-corner-radius",type:o.cornerRadius}],v=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],m=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},y=[{name:"height",type:o.nodeSize,triggersBounds:i.any,hashOverride:m},{name:"width",type:o.nodeSize,triggersBounds:i.any,hashOverride:m},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"corner-radius",type:o.cornerRadius},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.boundsExpansion,triggersBounds:i.any}],w=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle},{name:"border-cap",type:o.lineCap},{name:"border-join",type:o.lineJoin},{name:"border-dash-pattern",type:o.numbers},{name:"border-dash-offset",type:o.number},{name:"border-position",type:o.linePosition}],b=[{name:"outline-color",type:o.color},{name:"outline-opacity",type:o.zeroOneNumber},{name:"outline-width",type:o.size,triggersBounds:i.any},{name:"outline-style",type:o.borderStyle},{name:"outline-offset",type:o.size,triggersBounds:i.any}],k=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-image-containment",type:o.bgContainment},{name:"background-image-smoothing",type:o.bools},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],x=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],P=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-opacity",type:o.zeroOneNumber},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-outline-width",type:o.size},{name:"line-outline-color",type:o.color},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelEdges:function(e,t){return e!==t&&("bezier"===e||"bezier"===t)}},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-radii",type:o.numbers,triggersBounds:i.any},{name:"radius-type",type:o.radiusType,triggersBounds:i.any},{name:"taxi-turn",type:o.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"taxi-radius",type:o.number,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],O=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],E=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],A=[];PO.pieBackgroundN=16,A.push({name:"pie-size",type:o.sizeMaybePercent});for(var C=1;C<=PO.pieBackgroundN;C++)A.push({name:"pie-"+C+"-background-color",type:o.color}),A.push({name:"pie-"+C+"-background-size",type:o.percent}),A.push({name:"pie-"+C+"-background-opacity",type:o.zeroOneNumber});var S=[],T=PO.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill},{name:"arrow-width",type:o.arrowWidth}].forEach((function(e){T.forEach((function(t){var r=t+"-"+e.name,n=e.type,_=e.triggersBounds;S.push({name:r,type:n,triggersBounds:_})}))}),{});var N=PO.properties=[].concat(d,v,h,p,g,O,f,u,l,s,c,y,w,b,k,A,x,P,S,E),L=PO.propertyGroups={behavior:d,transition:v,visibility:h,overlay:p,underlay:g,ghost:O,commonLabel:f,labelDimensions:u,mainLabel:l,sourceLabel:s,targetLabel:c,nodeBody:y,nodeBorder:w,nodeOutline:b,backgroundImage:k,pie:A,compound:x,edgeLine:P,edgeArrow:S,core:E},M=PO.propertyGroupNames={};(PO.propertyGroupKeys=Object.keys(L)).forEach((function(e){M[e]=L[e].map((function(e){return e.name})),L[e].forEach((function(t){return t.groupKey=e}))}));var I=PO.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];PO.propertyNames=N.map((function(e){return e.name}));for(var j=0;j<N.length;j++){var R=N[j];N[R.name]=R}for(var D=0;D<I.length;D++){var F=I[D],B=N[F.pointsTo],z={name:F.name,alias:!0,pointsTo:B};N.push(z),N[F.name]=z}}(),PO.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},PO.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=Gg({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=PO.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),_=t.value;e[n]=_}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(e,t){return PO.arrowPrefixes.forEach((function(r){var n=r+"-"+t.name,_=t.value;e[n]=_})),e}),{})),r={},n=0;n<this.properties.length;n++){var _=this.properties[n];if(!_.pointsTo){var a=_.name,i=t[a],o=this.parse(a,i);r[a]=o}}return e.defaultProperties=r,e.defaultProperties},PO.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var OO={parse:function(e,t,r,n){var _=this;if(bg(t))return _.parseImplWarn(e,t,r,n);var a,i=vv(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),o=_.propCache=_.propCache||[];return(a=o[i])||(a=o[i]=_.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&(a=Tv(a))&&(a.value=Tv(a.value)),a},parseImplWarn:function(e,t,r,n){var _=this.parseImpl(e,t,r,n);return _||null==t||Sv("The style property `".concat(e,": ").concat(t,"` is invalid")),!_||"width"!==_.name&&"height"!==_.name||"label"!==t||Sv("The style value of `label` is deprecated for `"+_.name+"`"),_}};OO.parseImpl=function(e,t,r,n){var _=this;e=Ig(e);var a=_.properties[e],i=t,o=_.types;if(!a)return null;if(void 0===t)return null;a.alias&&(a=a.pointsTo,e=a.name);var l=wg(t);l&&(t=t.trim());var s,c,u=a.type;if(!u)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(bg(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!l||n||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(s=new RegExp(o.data.regex).exec(t))){if(r)return!1;var f=o.data;return{name:e,value:s,strValue:""+t,mapped:f,field:s[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(c=new RegExp(o.mapData.regex).exec(t))){if(r)return!1;if(u.multiple)return!1;var d=o.mapData;if(!u.color&&!u.number)return!1;var h=this.parse(e,c[4]);if(!h||h.mapped)return!1;var p=this.parse(e,c[5]);if(!p||p.mapped)return!1;if(h.pfValue===p.pfValue||h.strValue===p.strValue)return Sv("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+h.strValue+"`"),this.parse(e,h.strValue);if(u.color){var g=h.value,v=p.value;if(!(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3]&&(null!=g[3]&&1!==g[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:c,strValue:""+t,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:p.value,bypass:r}}}if(u.multiple&&"multiple"!==n){var m;if(m=l?t.split(/\s+/):kg(t)?t:[t],u.evenMultiple&&m.length%2!=0)return null;for(var y=[],w=[],b=[],k="",x=!1,P=0;P<m.length;P++){var O=_.parse(e,m[P],r,"multiple");x=x||wg(O.value),y.push(O.value),b.push(null!=O.pfValue?O.pfValue:O.value),w.push(O.units),k+=(P>0?" ":"")+O.strValue}return u.validate&&!u.validate(y,w)?null:u.singleEnum&&x?1===y.length&&wg(y[0])?{name:e,value:y[0],strValue:y[0],bypass:r}:null:{name:e,value:y,pfValue:b,strValue:k,bypass:r,units:w}}var E,A=function(){for(var n=0;n<u.enums.length;n++){if(u.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(u.number){var C,S="px";if(u.units&&(C=u.units),u.implicitUnits&&(S=u.implicitUnits),!u.unitless)if(l){var T="px|em"+(u.allowPercent?"|\\%":"");C&&(T=C);var N=t.match("^("+Fg+")("+T+")?$");N&&(t=N[1],C=N[2]||S)}else C&&!u.implicitUnits||(C=S);if(t=parseFloat(t),isNaN(t)&&void 0===u.enums)return null;if(isNaN(t)&&void 0!==u.enums)return t=i,A();if(u.integer&&!function(e){return Pg(e)&&Math.floor(e)===e}(t))return null;if(void 0!==u.min&&(t<u.min||u.strictMin&&t===u.min)||void 0!==u.max&&(t>u.max||u.strictMax&&t===u.max))return null;var L={name:e,value:t,strValue:""+t+(C||""),units:C,bypass:r};return u.unitless||"px"!==C&&"em"!==C?L.pfValue=t:L.pfValue="px"!==C&&C?this.getEmSizeInPixels()*t:t,"ms"!==C&&"s"!==C||(L.pfValue="ms"===C?t:1e3*t),"deg"!==C&&"rad"!==C||(L.pfValue="rad"===C?t:(E=t,Math.PI*E/180)),"%"===C&&(L.pfValue=t/100),L}if(u.propList){var M=[],I=""+t;if("none"===I);else{for(var j=I.split(/\s*,\s*|\s+/),R=0;R<j.length;R++){var D=j[R].trim();_.properties[D]?M.push(D):Sv("`"+D+"` is not a valid property name")}if(0===M.length)return null}return{name:e,value:M,strValue:0===M.length?"none":M.join(" "),bypass:r}}if(u.color){var F=Wg(t);return F?{name:e,value:F,pfValue:F,strValue:"rgb("+F[0]+","+F[1]+","+F[2]+")",bypass:r}:null}if(u.regex||u.regexes){if(u.enums){var B=A();if(B)return B}for(var z=u.regexes?u.regexes:[u.regex],q=0;q<z.length;q++){var V=new RegExp(z[q]).exec(t);if(V)return{name:e,value:u.singleRegexMatchValue?V[1]:V,strValue:""+t,bypass:r}}return null}return u.string?{name:e,value:""+t,strValue:""+t,bypass:r}:u.enums?A():null};var EO=function(e){if(!(this instanceof EO))return new EO(e);Sg(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):Av("A style must have a core reference")},AO=EO.prototype;AO.instanceString=function(){return"style"},AO.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach((function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1})),this},AO.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},AO.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},AO.selector=function(e){var t="core"===e?null:new px(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},AO.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var n=this.properties[r],_=t[n.name];void 0===_&&(_=t[jg(n.name)]),void 0!==_&&this.cssRule(n.name,_)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},AO.style=AO.css,AO.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},AO.append=function(e){return Tg(e)?e.appendToStyle(this):kg(e)?this.appendFromJson(e):wg(e)&&this.appendFromString(e),this},EO.fromJson=function(e,t){var r=new EO(e);return r.fromJson(t),r},EO.fromString=function(e,t){return new EO(e).fromString(t)},[vO,yO,wO,bO,kO,xO,PO,OO].forEach((function(e){Gg(AO,e)})),EO.types=AO.types,EO.properties=AO.properties,EO.propertyGroups=AO.propertyGroups,EO.propertyGroupNames=AO.propertyGroupNames,EO.propertyGroupKeys=AO.propertyGroupKeys;var CO={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return Tg(e)?t.style=e.generateStyle(this):kg(e)?t.style=EO.fromJson(this,e):wg(e)?t.style=EO.fromString(this,e):t.style=EO(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},SO={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,r,n,_,a=arguments,i=this._private.pan;switch(a.length){case 0:return i;case 1:if(wg(a[0]))return i[e=a[0]];if(xg(a[0])){if(!this._private.panningEnabled)return this;n=(r=a[0]).x,_=r.y,Pg(n)&&(i.x=n),Pg(_)&&(i.y=_),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[1],"x"!==(e=a[0])&&"y"!==e||!Pg(t)||(i[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var r,n,_,a,i,o=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:xg(e)&&(a=(_=o[0]).x,i=_.y,Pg(a)&&(l.x+=a),Pg(i)&&(l.y+=i),this.emit("pan viewport"));break;case 2:n=t,"x"!==(r=e)&&"y"!==r||!Pg(n)||(l[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Pg(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(wg(e)){var n=e;e=this.$(n)}else if(function(e){return xg(e)&&Pg(e.x1)&&Pg(e.x2)&&Pg(e.y1)&&Pg(e.y2)}(e)){var _=e;(r={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else Eg(e)||(e=this.mutableElements());if(!Eg(e)||!e.empty()){r=r||e.boundingBox();var a,i=this.width(),o=this.height();if(t=Pg(t)?t:0,!isNaN(i)&&!isNaN(o)&&i>0&&o>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:a=(a=(a=Math.min((i-2*t)/r.w,(o-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(i-a*(r.x1+r.x2))/2,y:(o-a*(r.y1+r.y2))/2}}}}},zoomRange:function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return Pg(e)&&Pg(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):Pg(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:Pg(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,r,n=this._private,_=n.pan,a=n.zoom,i=!1;if(n.zoomingEnabled||(i=!0),Pg(e)?r=e:xg(e)&&(r=e.level,null!=e.position?t=um(e.position,a,_):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||n.panningEnabled||(i=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,i||!Pg(r)||r===a||null!=t&&(!Pg(t.x)||!Pg(t.y)))return null;if(null!=t){var o=_,l=a,s=r;return{zoomed:!0,panned:!0,zoom:s,pan:{x:-s/l*(t.x-o.x)+t.x,y:-s/l*(t.y-o.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:_}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,r=!0,n=!0,_=[],a=!1,i=!1;if(!e)return this;if(Pg(e.zoom)||(r=!1),xg(e.pan)||(n=!1),!r&&!n)return this;if(r){var o=e.zoom;o<t.minZoom||o>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=o,_.push("zoom"))}if(n&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Pg(l.x)&&(t.pan.x=l.x,i=!1),Pg(l.y)&&(t.pan.y=l.y,i=!1),i||_.push("pan")}return _.length>0&&(_.push("viewport"),this.emit(_.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(wg(e)){var r=e;e=this.mutableElements().filter(r)}else Eg(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),_=this.width(),a=this.height();return{x:(_-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(a-t*(n.y1+n.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,r=this._private,n=r.container,_=this;return r.sizeCache=r.sizeCache||(n?(e=_.window().getComputedStyle(n),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:n.clientWidth-t("padding-left")-t("padding-right"),height:n.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};SO.centre=SO.center,SO.autolockNodes=SO.autolock,SO.autoungrabifyNodes=SO.autoungrabify;var TO={data:Lk.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Lk.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Lk.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Lk.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};TO.attr=TO.data,TO.removeAttr=TO.removeData;var NO=function(e){var t=this,r=(e=Gg({},e)).container;r&&!Og(r)&&Og(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var _=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var a=void 0!==Bp&&void 0!==r&&!e.headless,i=e;i.layout=Gg({name:a?"grid":"null"},i.layout),i.renderer=Gg({name:a?"canvas":"null"},i.renderer);var o=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},l=this._private={container:r,ready:!1,options:i,elements:new YP(this),listeners:[],aniEles:new YP(this),data:i.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:o(!0,i.zoomingEnabled),userZoomingEnabled:o(!0,i.userZoomingEnabled),panningEnabled:o(!0,i.panningEnabled),userPanningEnabled:o(!0,i.userPanningEnabled),boxSelectionEnabled:o(!0,i.boxSelectionEnabled),autolock:o(!1,i.autolock,i.autolockNodes),autoungrabify:o(!1,i.autoungrabify,i.autoungrabifyNodes),autounselectify:o(!1,i.autounselectify),styleEnabled:void 0===i.styleEnabled?a:i.styleEnabled,zoom:Pg(i.zoom)?i.zoom:1,pan:{x:xg(i.pan)&&Pg(i.pan.x)?i.pan.x:0,y:xg(i.pan)&&Pg(i.pan.y)?i.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:o(250,i.multiClickDebounceTime)};this.createEmitter(),this.selectionType(i.selectionType),this.zoomRange({min:i.minZoom,max:i.maxZoom});l.styleEnabled&&t.setStyle([]);var s=Gg({},i,i.renderer);t.initRenderer(s);!function(e,t){if(e.some(Lg))return uw.all(e).then(t);t(e)}([i.style,i.elements],(function(e){var r=e[0],a=e[1];l.styleEnabled&&t.style().append(r),function(e,r,n){t.notifications(!1);var _=t.mutableElements();_.length>0&&_.remove(),null!=e&&(xg(e)||kg(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",n),t.emit("done")}));var a=Gg({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()}(a,(function(){t.startAnimationLoop(),l.ready=!0,bg(i.ready)&&t.on("ready",i.ready);for(var e=0;e<_.length;e++){var r=_[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")}),i.done)}))},LO=NO.prototype;Gg(LO,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return Bp;var e=this._private.container.ownerDocument;return void 0===e||null==e?Bp:e.defaultView||Bp},mount:function(e){if(null!=e){var t=this,r=t._private,n=r.options;return!Og(e)&&Og(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Gg({},n,n.renderer,{name:"null"===n.renderer.name?"canvas":n.renderer.name})),t.startAnimationLoop(),t.style(n.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Tv(this._private.options)},json:function(e){var t=this,r=t._private,n=t.mutableElements();if(xg(e)){if(t.startBatch(),e.elements){var _={},a=function(e,r){for(var n=[],a=[],i=0;i<e.length;i++){var o=e[i];if(o.data.id){var l=""+o.data.id,s=t.getElementById(l);_[l]=!0,0!==s.length?a.push({ele:s,json:o}):r?(o.group=r,n.push(o)):n.push(o)}else Sv("cy.json() cannot handle elements without an ID attribute")}t.add(n);for(var c=0;c<a.length;c++){var u=a[c],f=u.ele,d=u.json;f.json(d)}};if(kg(e.elements))a(e.elements);else for(var i=["nodes","edges"],o=0;o<i.length;o++){var l=i[o],s=e.elements[l];kg(s)&&a(s,l)}var c=t.collection();n.filter((function(e){return!_[e.id()]})).forEach((function(e){e.isParent()?c.merge(e):e.remove()})),c.forEach((function(e){return e.children().move({parent:null})})),c.forEach((function(e){return function(e){return t.getElementById(e.id())}(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===r.pan.x&&e.pan.y===r.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var u=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],f=0;f<u.length;f++){var d=u[f];null!=e[d]&&t[d](e[d])}return t.endBatch(),this}var h={};!!e?h.elements=this.elements().map((function(e){return e.json()})):(h.elements={},n.forEach((function(e){var t=e.group();h.elements[t]||(h.elements[t]=[]),h.elements[t].push(e.json())}))),this._private.styleEnabled&&(h.style=t.style().json()),h.data=Tv(t.data());var p=r.options;return h.zoomingEnabled=r.zoomingEnabled,h.userZoomingEnabled=r.userZoomingEnabled,h.zoom=r.zoom,h.minZoom=r.minZoom,h.maxZoom=r.maxZoom,h.panningEnabled=r.panningEnabled,h.userPanningEnabled=r.userPanningEnabled,h.pan=Tv(r.pan),h.boxSelectionEnabled=r.boxSelectionEnabled,h.renderer=Tv(p.renderer),h.hideEdgesOnViewport=p.hideEdgesOnViewport,h.textureOnViewport=p.textureOnViewport,h.wheelSensitivity=p.wheelSensitivity,h.motionBlur=p.motionBlur,h.multiClickDebounceTime=p.multiClickDebounceTime,h}}),LO.$id=LO.getElementById,[XP,oO,cO,uO,fO,dO,pO,gO,CO,SO,TO].forEach((function(e){Gg(LO,e)}));var MO={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},IO={maximal:!1,acyclic:!1},jO=function(e){return e.scratch("breadthfirst")},RO=function(e,t){return e.scratch("breadthfirst",t)};function DO(e){this.options=Gg({},MO,IO,e)}DO.prototype.run=function(){var e,t=this.options,r=t.cy,n=t.eles,_=n.nodes().filter((function(e){return e.isChildless()})),a=n,i=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,l=!!t.boundingBox,s=r.extent(),c=xm(l?t.boundingBox:{x1:s.x1,y1:s.y1,w:s.w,h:s.h});if(Eg(t.roots))e=t.roots;else if(kg(t.roots)){for(var u=[],f=0;f<t.roots.length;f++){var d=t.roots[f],h=r.getElementById(d);u.push(h)}e=r.collection(u)}else if(wg(t.roots))e=r.$(t.roots);else if(i)e=_.roots();else{var p=n.components();e=r.collection();for(var g=function(){var t=p[v],r=t.maxDegree(!1),n=t.filter((function(e){return e.degree(!1)===r}));e=e.add(n)},v=0;v<p.length;v++)g()}var m=[],y={},w=function(e,t){null==m[t]&&(m[t]=[]);var r=m[t].length;m[t].push(e),RO(e,{index:r,depth:t})};a.bfs({roots:e,directed:t.directed,visit:function(e,t,r,n,_){var a=e[0],i=a.id();a.isChildless()&&w(a,_),y[i]=!0}});for(var b=[],k=0;k<_.length;k++){var x=_[k];y[x.id()]||b.push(x)}var P=function(e){for(var t=m[e],r=0;r<t.length;r++){var n=t[r];null!=n?RO(n,{depth:e,index:r}):(t.splice(r,1),r--)}},O=function(e,r){for(var _=jO(e),a=e.incomers().filter((function(e){return e.isNode()&&n.has(e)})),i=-1,o=e.id(),l=0;l<a.length;l++){var s=a[l],c=jO(s);i=Math.max(i,c.depth)}if(_.depth<=i){if(!t.acyclic&&r[o])return null;var u=i+1;return function(e,t){var r=jO(e),n=r.depth,_=r.index;m[n][_]=null,e.isChildless()&&w(e,t)}(e,u),r[o]=u,!0}return!1};if(i&&o){var E=[],A={},C=function(e){return E.push(e)};for(_.forEach((function(e){return E.push(e)}));E.length>0;){var S=E.shift(),T=O(S,A);if(T)S.outgoers().filter((function(e){return e.isNode()&&n.has(e)})).forEach(C);else if(null===T){Sv("Detected double maximal shift for node `"+S.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var N=0;if(t.avoidOverlap)for(var L=0;L<_.length;L++){var M=_[L].layoutDimensions(t),I=M.w,j=M.h;N=Math.max(N,I,j)}var R={},D=function(e){if(R[e.id()])return R[e.id()];for(var t=jO(e).depth,r=e.neighborhood(),n=0,a=0,i=0;i<r.length;i++){var o=r[i];if(!o.isEdge()&&!o.isParent()&&_.has(o)){var l=jO(o);if(null!=l){var s=l.index,c=l.depth;if(null!=s&&null!=c){var u=m[c].length;c<t&&(n+=s/u,a++)}}}}return n/=a=Math.max(1,a),0===a&&(n=0),R[e.id()]=n,n},F=function(e,t){var r=D(e)-D(t);return 0===r?Ug(e.id(),t.id()):r};void 0!==t.depthSort&&(F=t.depthSort);for(var B=m.length,z=0;z<B;z++)m[z].sort(F),P(z);for(var q=[],V=0;V<b.length;V++)q.push(b[V]);q.length&&(m.unshift(q),B=m.length,function(){for(var e=0;e<B;e++)P(e)}());for(var U=0,G=0;G<B;G++)U=Math.max(m[G].length,U);var W=c.x1+c.w/2,$=c.y1+c.h/2,Y=_.reduce((function(e,r){return n=r.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}),{w:-1===e.w?n.w:(e.w+n.w)/2,h:-1===e.h?n.h:(e.h+n.h)/2};var n}),{w:-1,h:-1}),H=Math.max(1===B?0:l?(c.h-2*t.padding-Y.h)/(B-1):(c.h-2*t.padding-Y.h)/(B+1),N),X=m.reduce((function(e,t){return Math.max(e,t.length)}),0);return n.nodes().layoutPositions(this,t,(function(e){var r=jO(e),n=r.depth,_=r.index;if(t.circle){var a=Math.min(c.w/2/B,c.h/2/B),i=(a=Math.max(a,N))*n+a-(B>0&&m[0].length<=3?a/2:0),o=2*Math.PI/m[n].length*_;return 0===n&&1===m[0].length&&(i=1),{x:W+i*Math.cos(o),y:$+i*Math.sin(o)}}var s=m[n].length,u=Math.max(1===s?0:l?(c.w-2*t.padding-Y.w)/((t.grid?X:s)-1):(c.w-2*t.padding-Y.w)/((t.grid?X:s)+1),N);return{x:W+(_+1-(s+1)/2)*u,y:$+(n+1-(B+1)/2)*H}})),this};var FO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function BO(e){this.options=Gg({},FO,e)}BO.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,_=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=n.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var i,o=xm(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=o.x1+o.w/2,s=o.y1+o.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),u=0,f=0;f<a.length;f++){var d=a[f].layoutDimensions(t),h=d.w,p=d.h;u=Math.max(u,h,p)}if(i=Pg(t.radius)?t.radius:a.length<=1?0:Math.min(o.h,o.w)/2-u,a.length>1&&t.avoidOverlap){u*=1.75;var g=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),m=Math.sqrt(u*u/(g*g+v*v));i=Math.max(m,i)}return n.nodes().layoutPositions(this,t,(function(e,r){var n=t.startAngle+r*c*(_?1:-1),a=i*Math.cos(n),o=i*Math.sin(n);return{x:l+a,y:s+o}})),this};var zO,qO={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function VO(e){this.options=Gg({},qO,e)}VO.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=e.cy,_=t.eles,a=_.nodes().not(":parent"),i=xm(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o=i.x1+i.w/2,l=i.y1+i.h/2,s=[],c=0,u=0;u<a.length;u++){var f,d=a[u];f=t.concentric(d),s.push({value:f,node:d}),d._private.scratch.concentric=f}a.updateStyle();for(var h=0;h<a.length;h++){var p=a[h].layoutDimensions(t);c=Math.max(c,p.w,p.h)}s.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(a),v=[[]],m=v[0],y=0;y<s.length;y++){var w=s[y];if(m.length>0)Math.abs(m[0].value-w.value)>=g&&(m=[],v.push(m));m.push(w)}var b=c+t.minNodeSpacing;if(!t.avoidOverlap){var k=v.length>0&&v[0].length>1,x=(Math.min(i.w,i.h)/2-b)/(v.length+k?1:0);b=Math.min(b,x)}for(var P=0,O=0;O<v.length;O++){var E=v[O],A=void 0===t.sweep?2*Math.PI-2*Math.PI/E.length:t.sweep,C=E.dTheta=A/Math.max(1,E.length-1);if(E.length>1&&t.avoidOverlap){var S=Math.cos(C)-Math.cos(0),T=Math.sin(C)-Math.sin(0),N=Math.sqrt(b*b/(S*S+T*T));P=Math.max(N,P)}E.r=P,P+=b}if(t.equidistant){for(var L=0,M=0,I=0;I<v.length;I++){var j=v[I].r-M;L=Math.max(L,j)}M=0;for(var R=0;R<v.length;R++){var D=v[R];0===R&&(M=D.r),D.r=M,M+=L}}for(var F={},B=0;B<v.length;B++)for(var z=v[B],q=z.dTheta,V=z.r,U=0;U<z.length;U++){var G=z[U],W=t.startAngle+(r?1:-1)*q*U,$={x:o+V*Math.cos(W),y:l+V*Math.sin(W)};F[G.node.id()]=$}return _.nodes().layoutPositions(this,t,(function(e){var t=e.id();return F[t]})),this};var UO={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function GO(e){this.options=Gg({},UO,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(e){var r=e.source().data("id"),n=e.target().data("id"),_=t.some((function(e){return e.data("id")===r})),a=t.some((function(e){return e.data("id")===n}));return!_||!a}));this.options.eles=this.options.eles.not(r)}GO.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,!0!==e.animate&&!1!==e.animate||r.emit({type:"layoutstart",layout:r}),zO=!0===e.debug;var n=WO(t,r,e);zO&&undefined(n),e.randomize&&HO(n);var _=lv(),a=function(){ZO(n,t,e),!0===e.fit&&t.fit(e.padding)},i=function(t){return!(r.stopped||t>=e.numIter)&&(KO(n,e),n.temperature=n.temperature*e.coolingFactor,!(n.temperature<e.minTemp))},o=function(){if(!0===e.animate||!1===e.animate)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),_=XO(n,e,t);t.layoutPositions(r,e,_)}},l=0,s=!0;if(!0===e.animate){var c=function(){for(var t=0;s&&t<e.refresh;)s=i(l),l++,t++;s?(lv()-_>=e.animationThreshold&&a(),ov(c)):(sE(n,e),o())};c()}else{for(;s;)s=i(l),l++;sE(n,e),o()}return this},GO.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},GO.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var WO=function(e,t,r){for(var n=r.eles.edges(),_=r.eles.nodes(),a=xm(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:_.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},o=r.eles.components(),l={},s=0;s<o.length;s++)for(var c=o[s],u=0;u<c.length;u++){l[c[u].id()]=s}for(s=0;s<i.nodeSize;s++){var f=(v=_[s]).layoutDimensions(r);(M={}).isLocked=v.locked(),M.id=v.data("id"),M.parentId=v.data("parent"),M.cmptId=l[v.id()],M.children=[],M.positionX=v.position("x"),M.positionY=v.position("y"),M.offsetX=0,M.offsetY=0,M.height=f.w,M.width=f.h,M.maxX=M.positionX+M.width/2,M.minX=M.positionX-M.width/2,M.maxY=M.positionY+M.height/2,M.minY=M.positionY-M.height/2,M.padLeft=parseFloat(v.style("padding")),M.padRight=parseFloat(v.style("padding")),M.padTop=parseFloat(v.style("padding")),M.padBottom=parseFloat(v.style("padding")),M.nodeRepulsion=bg(r.nodeRepulsion)?r.nodeRepulsion(v):r.nodeRepulsion,i.layoutNodes.push(M),i.idToIndex[M.id]=s}var d=[],h=0,p=-1,g=[];for(s=0;s<i.nodeSize;s++){var v,m=(v=i.layoutNodes[s]).parentId;null!=m?i.layoutNodes[i.idToIndex[m]].children.push(v.id):(d[++p]=v.id,g.push(v.id))}for(i.graphSet.push(g);h<=p;){var y=d[h++],w=i.idToIndex[y],b=i.layoutNodes[w].children;if(b.length>0){i.graphSet.push(b);for(s=0;s<b.length;s++)d[++p]=b[s]}}for(s=0;s<i.graphSet.length;s++){var k=i.graphSet[s];for(u=0;u<k.length;u++){var x=i.idToIndex[k[u]];i.indexToGraph[x]=s}}for(s=0;s<i.edgeSize;s++){var P=n[s],O={};O.id=P.data("id"),O.sourceId=P.data("source"),O.targetId=P.data("target");var E=bg(r.idealEdgeLength)?r.idealEdgeLength(P):r.idealEdgeLength,A=bg(r.edgeElasticity)?r.edgeElasticity(P):r.edgeElasticity,C=i.idToIndex[O.sourceId],S=i.idToIndex[O.targetId];if(i.indexToGraph[C]!=i.indexToGraph[S]){for(var T=$O(O.sourceId,O.targetId,i),N=i.graphSet[T],L=0,M=i.layoutNodes[C];-1===N.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],L++;for(M=i.layoutNodes[S];-1===N.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],L++;E*=L*r.nestingFactor}O.idealLength=E,O.elasticity=A,i.layoutEdges.push(O)}return i},$O=function(e,t,r){var n=YO(e,t,0,r);return 2>n.count?0:n.graph},YO=function(e,t,r,n){var _=n.graphSet[r];if(-1<_.indexOf(e)&&-1<_.indexOf(t))return{count:2,graph:r};for(var a=0,i=0;i<_.length;i++){var o=_[i],l=n.idToIndex[o],s=n.layoutNodes[l].children;if(0!==s.length){var c=n.indexToGraph[n.idToIndex[s[0]]],u=YO(e,t,c,n);if(0!==u.count){if(1!==u.count)return u;if(2===++a)break}}}return{count:a,graph:r}},HO=function(e,t){for(var r=e.clientWidth,n=e.clientHeight,_=0;_<e.nodeSize;_++){var a=e.layoutNodes[_];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*r,a.positionY=Math.random()*n)}},XO=function(e,t,r){var n=e.boundingBox,_={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];_.x1=Math.min(_.x1,r.positionX),_.x2=Math.max(_.x2,r.positionX),_.y1=Math.min(_.y1,r.positionY),_.y2=Math.max(_.y2,r.positionY)})),_.w=_.x2-_.x1,_.h=_.y2-_.y1),function(r,a){var i=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var o=(i.positionX-_.x1)/_.w,l=(i.positionY-_.y1)/_.h;return{x:n.x1+o*n.w,y:n.y1+l*n.h}}return{x:i.positionX,y:i.positionY}}},ZO=function(e,t,r){var n=r.layout,_=r.eles.nodes(),a=XO(e,r,_);_.positions(a),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))},KO=function(e,t,r){JO(e,t),nE(e),_E(e,t),aE(e),iE(e)},JO=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],_=n.length,a=0;a<_;a++)for(var i=e.layoutNodes[e.idToIndex[n[a]]],o=a+1;o<_;o++){var l=e.layoutNodes[e.idToIndex[n[o]]];eE(i,l,e,t)}},QO=function(e){return 2*e*Math.random()-1},eE=function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var _=t.positionX-e.positionX,a=t.positionY-e.positionY;0===_&&0===a&&(_=QO(1),a=QO(1));var i=tE(e,t,_,a);if(i>0)var o=(s=n.nodeOverlap*i)*_/(p=Math.sqrt(_*_+a*a)),l=s*a/p;else{var s,c=rE(e,_,a),u=rE(t,-1*_,-1*a),f=u.x-c.x,d=u.y-c.y,h=f*f+d*d,p=Math.sqrt(h);o=(s=(e.nodeRepulsion+t.nodeRepulsion)/h)*f/p,l=s*d/p}e.isLocked||(e.offsetX-=o,e.offsetY-=l),t.isLocked||(t.offsetX+=o,t.offsetY+=l)}},tE=function(e,t,r,n){if(r>0)var _=e.maxX-t.minX;else _=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else a=t.maxY-e.minY;return _>=0&&a>=0?Math.sqrt(_*_+a*a):0},rE=function(e,t,r){var n=e.positionX,_=e.positionY,a=e.height||1,i=e.width||1,o=r/t,l=a/i,s={};return 0===t&&0<r||0===t&&0>r?(s.x=n,s.y=_+a/2,s):0<t&&-1*l<=o&&o<=l?(s.x=n+i/2,s.y=_+i*r/2/t,s):0>t&&-1*l<=o&&o<=l?(s.x=n-i/2,s.y=_-i*r/2/t,s):0<r&&(o<=-1*l||o>=l)?(s.x=n+a*t/2/r,s.y=_+a/2,s):0>r&&(o<=-1*l||o>=l)?(s.x=n-a*t/2/r,s.y=_-a/2,s):s},nE=function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],_=e.idToIndex[n.sourceId],a=e.layoutNodes[_],i=e.idToIndex[n.targetId],o=e.layoutNodes[i],l=o.positionX-a.positionX,s=o.positionY-a.positionY;if(0!==l||0!==s){var c=rE(a,l,s),u=rE(o,-1*l,-1*s),f=u.x-c.x,d=u.y-c.y,h=Math.sqrt(f*f+d*d),p=Math.pow(n.idealLength-h,2)/n.elasticity;if(0!==h)var g=p*f/h,v=p*d/h;else g=0,v=0;a.isLocked||(a.offsetX+=g,a.offsetY+=v),o.isLocked||(o.offsetX-=g,o.offsetY-=v)}}},_E=function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],_=n.length;if(0===r)var a=e.clientHeight/2,i=e.clientWidth/2;else{var o=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[o.parentId]];a=l.positionX,i=l.positionY}for(var s=0;s<_;s++){var c=e.layoutNodes[e.idToIndex[n[s]]];if(!c.isLocked){var u=a-c.positionX,f=i-c.positionY,d=Math.sqrt(u*u+f*f);if(d>1){var h=t.gravity*u/d,p=t.gravity*f/d;c.offsetX+=h,c.offsetY+=p}}}}},aE=function(e,t){var r=[],n=0,_=-1;for(r.push.apply(r,e.graphSet[0]),_+=e.graphSet[0].length;n<=_;){var a=r[n++],i=e.idToIndex[a],o=e.layoutNodes[i],l=o.children;if(0<l.length&&!o.isLocked){for(var s=o.offsetX,c=o.offsetY,u=0;u<l.length;u++){var f=e.layoutNodes[e.idToIndex[l[u]]];f.offsetX+=s,f.offsetY+=c,r[++_]=l[u]}o.offsetX=0,o.offsetY=0}}},iE=function(e,t){for(var r=0;r<e.nodeSize;r++){0<(_=e.layoutNodes[r]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(_=e.layoutNodes[r]).children.length||_.isLocked)){var n=oE(_.offsetX,_.offsetY,e.temperature);_.positionX+=n.x,_.positionY+=n.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,lE(_,e)}}for(r=0;r<e.nodeSize;r++){var _;0<(_=e.layoutNodes[r]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},oE=function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var _={x:r*e/n,y:r*t/n};else _={x:e,y:t};return _},lE=function(e,t){var r=e.parentId;if(null!=r){var n=t.layoutNodes[t.idToIndex[r]],_=!1;return(null==n.maxX||e.maxX+n.padRight>n.maxX)&&(n.maxX=e.maxX+n.padRight,_=!0),(null==n.minX||e.minX-n.padLeft<n.minX)&&(n.minX=e.minX-n.padLeft,_=!0),(null==n.maxY||e.maxY+n.padBottom>n.maxY)&&(n.maxY=e.maxY+n.padBottom,_=!0),(null==n.minY||e.minY-n.padTop<n.minY)&&(n.minY=e.minY-n.padTop,_=!0),_?lE(n,t):void 0}},sE=function(e,t){for(var r=e.layoutNodes,n=[],_=0;_<r.length;_++){var a=r[_],i=a.cmptId;(n[i]=n[i]||[]).push(a)}var o=0;for(_=0;_<n.length;_++){if(p=n[_]){p.x1=1/0,p.x2=-1/0,p.y1=1/0,p.y2=-1/0;for(var l=0;l<p.length;l++){var s=p[l];p.x1=Math.min(p.x1,s.positionX-s.width/2),p.x2=Math.max(p.x2,s.positionX+s.width/2),p.y1=Math.min(p.y1,s.positionY-s.height/2),p.y2=Math.max(p.y2,s.positionY+s.height/2)}p.w=p.x2-p.x1,p.h=p.y2-p.y1,o+=p.w*p.h}}n.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,u=0,f=0,d=0,h=Math.sqrt(o)*e.clientWidth/e.clientHeight;for(_=0;_<n.length;_++){var p;if(p=n[_]){for(l=0;l<p.length;l++){(s=p[l]).isLocked||(s.positionX+=c-p.x1,s.positionY+=u-p.y1)}c+=p.w+t.componentSpacing,f+=p.w+t.componentSpacing,d=Math.max(d,p.h),f>h&&(u+=d+t.componentSpacing,c=0,f=0,d=0)}}},cE={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function uE(e){this.options=Gg({},cE,e)}uE.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=t.eles,_=n.nodes().not(":parent");t.sort&&(_=_.sort(t.sort));var a=xm(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)n.nodes().layoutPositions(this,t,(function(e){return{x:a.x1,y:a.y1}}));else{var i=_.size(),o=Math.sqrt(i*a.h/a.w),l=Math.round(o),s=Math.round(a.w/a.h*o),c=function(e){if(null==e)return Math.min(l,s);Math.min(l,s)==l?l=e:s=e},u=function(e){if(null==e)return Math.max(l,s);Math.max(l,s)==l?l=e:s=e},f=t.rows,d=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=d)l=f,s=d;else if(null!=f&&null==d)l=f,s=Math.ceil(i/l);else if(null==f&&null!=d)s=d,l=Math.ceil(i/s);else if(s*l>i){var h=c(),p=u();(h-1)*p>=i?c(h-1):(p-1)*h>=i&&u(p-1)}else for(;s*l<i;){var g=c(),v=u();(v+1)*g>=i?u(v+1):c(g+1)}var m=a.w/s,y=a.h/l;if(t.condense&&(m=0,y=0),t.avoidOverlap)for(var w=0;w<_.length;w++){var b=_[w],k=b._private.position;null!=k.x&&null!=k.y||(k.x=0,k.y=0);var x=b.layoutDimensions(t),P=t.avoidOverlapPadding,O=x.w+P,E=x.h+P;m=Math.max(m,O),y=Math.max(y,E)}for(var A={},C=function(e,t){return!!A["c-"+e+"-"+t]},S=function(e,t){A["c-"+e+"-"+t]=!0},T=0,N=0,L=function(){++N>=s&&(N=0,T++)},M={},I=0;I<_.length;I++){var j=_[I],R=t.position(j);if(R&&(void 0!==R.row||void 0!==R.col)){var D={row:R.row,col:R.col};if(void 0===D.col)for(D.col=0;C(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;C(D.row,D.col);)D.row++;M[j.id()]=D,S(D.row,D.col)}}_.layoutPositions(this,t,(function(e,t){var r,n;if(e.locked()||e.isParent())return!1;var _=M[e.id()];if(_)r=_.col*m+m/2+a.x1,n=_.row*y+y/2+a.y1;else{for(;C(T,N);)L();r=N*m+m/2+a.x1,n=T*y+y/2+a.y1,S(T,N),L()}return{x:r,y:n}}))}return this};var fE={ready:function(){},stop:function(){}};function dE(e){this.options=Gg({},fE,e)}dE.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},dE.prototype.stop=function(){return this};var hE={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function pE(e){this.options=Gg({},hE,e)}pE.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=bg(e.positions);return t.layoutPositions(this,e,(function(t,n){var _=function(t){if(null==e.positions)return{x:(n=t.position()).x,y:n.y};var n;if(r)return e.positions(t);var _=e.positions[t._private.data.id];return null==_?null:_}(t);return!t.locked()&&null!=_&&_})),this};var gE={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function vE(e){this.options=Gg({},gE,e)}vE.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=xm(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,(function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}})),this};var mE=[{name:"breadthfirst",impl:DO},{name:"circle",impl:BO},{name:"concentric",impl:VO},{name:"cose",impl:GO},{name:"grid",impl:uE},{name:"null",impl:dE},{name:"preset",impl:pE},{name:"random",impl:vE}];function yE(e){this.options=e,this.notifications=0}var wE=function(){},bE=function(){throw new Error("A headless instance can not render images")};yE.prototype={recalculateRenderedStyle:wE,notify:function(){this.notifications++},init:wE,isHeadless:function(){return!0},png:bE,jpg:bE};var kE={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(e,t,r,n,_,a,i){var o=_.x-r/2-i,l=_.x+r/2+i,s=_.y-r/2-i,c=_.y+r/2+i;return o<=e&&e<=l&&s<=t&&t<=c},n=function(e,t,r,n,_){var a=e*Math.cos(n)-t*Math.sin(n),i=(e*Math.sin(n)+t*Math.cos(n))*r;return{x:a*r+_.x,y:i+_.y}},_=function(e,t,r,_){for(var a=[],i=0;i<e.length;i+=2){var o=e[i],l=e[i+1];a.push(n(o,l,t,r,_))}return a},a=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t},i=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},o=function(n,o){wg(o)&&(o=e[o]),e[n]=Gg({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,r,n,i,o){var l=a(_(this.points,r+2*o,n,i));return Dm(e,t,l)},roughCollide:r,draw:function(e,r,n,a){var i=_(this.points,r,n,a);t.arrowShapeImpl("polygon")(e,i)},spacing:function(e){return 0},gap:i},o)};o("none",{collide:Pv,roughCollide:Pv,draw:Ev,spacing:Ov,gap:Ov}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(e,r,a,i,o){var l=_(this.points,r,a,i),s=this.controlPoint,c=n(s[0],s[1],r,a,i);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*i(e)}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,r,n,i,o,l){var s=a(_(this.points,r+2*l,n,i)),c=a(_(this.pointsTee,r+2*l,n,i));return Dm(e,t,s)||Dm(e,t,c)},draw:function(e,r,n,a,i){var o=_(this.points,r,n,a),l=_(this.pointsTee,r,n,a);t.arrowShapeImpl(this.name)(e,o,l)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,r,n,i,o,l){var s=i,c=Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*l)*this.radius,2),u=a(_(this.points,r+2*l,n,i));return Dm(e,t,u)||c},draw:function(e,r,n,a,i){var o=_(this.pointsTr,r,n,a);t.arrowShapeImpl(this.name)(e,o,a.x,a.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r},collide:function(e,t,r,n,i,o,l){var s=a(_(this.points,r+2*l,n,i)),c=a(_(this.crossLinePts(r,o),r+2*l,n,i));return Dm(e,t,s)||Dm(e,t,c)},draw:function(e,r,n,a,i){var o=_(this.points,r,n,a),l=_(this.crossLinePts(r,i),r,n,a);t.arrowShapeImpl(this.name)(e,o,l)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*i(e)}}),o("circle",{radius:.15,collide:function(e,t,r,n,_,a,i){var o=_;return Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((r+2*i)*this.radius,2)},draw:function(e,r,n,_,a){t.arrowShapeImpl(this.name)(e,_.x,_.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},xE={projectIntoViewport:function(e,t){var r=this.cy,n=this.findContainerClientCoords(),_=n[0],a=n[1],i=n[4],o=r.pan(),l=r.zoom();return[((e-_)/i-o.x)/l,((t-a)/i-o.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),n=function(e){return parseFloat(r.getPropertyValue(e))},_=n("padding-left"),a=n("padding-right"),i=n("padding-top"),o=n("padding-bottom"),l=n("border-left-width"),s=n("border-right-width"),c=n("border-top-width"),u=(n("border-bottom-width"),e.clientWidth),f=e.clientHeight,d=_+a,h=i+o,p=l+s,g=t.width/(u+p),v=u-d,m=f-h,y=t.left+_+l,w=t.top+i+c;return this.containerBB=[y,w,v,m,g]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},findNearestElements:function(e,t,r,n){var _,a,i=this,o=this,l=o.getCachedZSortedEles(),s=[],c=o.cy.zoom(),u=o.cy.hasCompoundNodes(),f=(n?24:8)/c,d=(n?8:2)/c,h=(n?8:2)/c,p=1/0;function g(e,t){if(e.isNode()){if(a)return;a=e,s.push(e)}if(e.isEdge()&&(null==t||t<p))if(_){if(_.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&_.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<s.length;r++)if(s[r].isEdge()){s[r]=e,_=e,p=null!=t?t:p;break}}else s.push(e),_=e,p=null!=t?t:p}function v(r){var n=r.outerWidth()+2*d,_=r.outerHeight()+2*d,a=n/2,l=_/2,s=r.position(),c="auto"===r.pstyle("corner-radius").value?"auto":r.pstyle("corner-radius").pfValue,u=r._private.rscratch;if(s.x-a<=e&&e<=s.x+a&&s.y-l<=t&&t<=s.y+l&&o.nodeShapes[i.getNodeShape(r)].checkPoint(e,t,0,n,_,s.x,s.y,c,u))return g(r,0),!0}function m(r){var n,_=r._private,a=_.rscratch,l=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,d=l/2+f,h=d*d,p=2*d,m=_.source,y=_.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,b=0;b+3<w.length;b+=2)if(Mm(e,t,w[b],w[b+1],w[b+2],w[b+3],p)&&h>(n=Rm(e,t,w[b],w[b+1],w[b+2],w[b+3])))return g(r,n),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(w=a.allpts,b=0;b+5<a.allpts.length;b+=4)if(Im(e,t,w[b],w[b+1],w[b+2],w[b+3],w[b+4],w[b+5],p)&&h>(n=jm(e,t,w[b],w[b+1],w[b+2],w[b+3],w[b+4],w[b+5])))return g(r,n),!0;m=m||_.source,y=y||_.target;var k=i.getArrowWidth(l,c),x=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(b=0;b<x.length;b++){var P=x[b],O=o.arrowShapes[r.pstyle(P.name+"-arrow-shape").value],E=r.pstyle("width").pfValue;if(O.roughCollide(e,t,k,P.angle,{x:P.x,y:P.y},E,f)&&O.collide(e,t,k,P.angle,{x:P.x,y:P.y},E,f))return g(r),!0}u&&s.length>0&&(v(m),v(y))}function y(e,t,r){return Dv(e,t,r)}function w(r,n){var _,a=r._private,i=h;_=n?n+"-":"",r.boundingBox();var o=a.labelBounds[n||"main"],l=r.pstyle(_+"label").value;if("yes"===r.pstyle("text-events").strValue&&l){var s=y(a.rscratch,"labelX",n),c=y(a.rscratch,"labelY",n),u=y(a.rscratch,"labelAngle",n),f=r.pstyle(_+"text-margin-x").pfValue,d=r.pstyle(_+"text-margin-y").pfValue,p=o.x1-i-f,v=o.x2+i-f,m=o.y1-i-d,w=o.y2+i-d;if(u){var b=Math.cos(u),k=Math.sin(u),x=function(e,t){return{x:(e-=s)*b-(t-=c)*k+s,y:e*k+t*b+c}},P=x(p,m),O=x(p,w),E=x(v,m),A=x(v,w),C=[P.x+f,P.y+d,E.x+f,E.y+d,A.x+f,A.y+d,O.x+f,O.y+d];if(Dm(e,t,C))return g(r),!0}else if(Tm(o,e,t))return g(r),!0}}r&&(l=l.interactive);for(var b=l.length-1;b>=0;b--){var k=l[b];k.isNode()?v(k)||w(k):m(k)||w(k)||w(k,"source")||w(k,"target")}return s},getAllInBox:function(e,t,r,n){for(var _,a,i=this.getCachedZSortedEles().interactive,o=[],l=Math.min(e,r),s=Math.max(e,r),c=Math.min(t,n),u=Math.max(t,n),f=xm({x1:e=l,y1:t=c,x2:r=s,y2:n=u}),d=0;d<i.length;d++){var h=i[d];if(h.isNode()){var p=h,g=p.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Sm(f,g)&&!Nm(g,f)&&o.push(p)}else{var v=h,m=v._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!Tm(f,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!Tm(f,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var w=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,b=!0,k=0;k<w.length;k++)if(_=f,a=w[k],!Tm(_,a.x,a.y)){b=!1;break}b&&o.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||o.push(v)}}return o}},PE={calculateArrowAngles:function(e){var t,r,n,_,a,i,o=e._private.rscratch,l="haystack"===o.edgeType,s="bezier"===o.edgeType,c="multibezier"===o.edgeType,u="segments"===o.edgeType,f="compound"===o.edgeType,d="self"===o.edgeType;if(l?(n=o.haystackPts[0],_=o.haystackPts[1],a=o.haystackPts[2],i=o.haystackPts[3]):(n=o.arrowStartX,_=o.arrowStartY,a=o.arrowEndX,i=o.arrowEndY),p=o.midX,g=o.midY,u)t=n-o.segpts[0],r=_-o.segpts[1];else if(c||f||d||s){var h=o.allpts;t=n-wm(h[0],h[2],h[4],.1),r=_-wm(h[1],h[3],h[5],.1)}else t=n-p,r=_-g;o.srcArrowAngle=hm(t,r);var p=o.midX,g=o.midY;if(l&&(p=(n+a)/2,g=(_+i)/2),t=a-n,r=i-_,u)if((h=o.allpts).length/2%2==0){var v=(O=h.length/2)-2;t=h[O]-h[v],r=h[O+1]-h[v+1]}else if(o.isRound)t=o.midVector[1],r=-o.midVector[0];else{v=(O=h.length/2-1)-2;t=h[O]-h[v],r=h[O+1]-h[v+1]}else if(c||f||d){var m,y,w,b,h=o.allpts;if(o.ctrlpts.length/2%2==0){var k=(x=(P=h.length/2-1)+2)+2;m=wm(h[P],h[x],h[k],0),y=wm(h[P+1],h[x+1],h[k+1],0),w=wm(h[P],h[x],h[k],1e-4),b=wm(h[P+1],h[x+1],h[k+1],1e-4)}else{var x,P;k=(x=h.length/2-1)+2;m=wm(h[P=x-2],h[x],h[k],.4999),y=wm(h[P+1],h[x+1],h[k+1],.4999),w=wm(h[P],h[x],h[k],.5),b=wm(h[P+1],h[x+1],h[k+1],.5)}t=w-m,r=b-y}if(o.midtgtArrowAngle=hm(t,r),o.midDispX=t,o.midDispY=r,t*=-1,r*=-1,u)if((h=o.allpts).length/2%2==0);else if(!o.isRound){var O,E=(O=h.length/2-1)+2;t=-(h[E]-h[O]),r=-(h[E+1]-h[O+1])}if(o.midsrcArrowAngle=hm(t,r),u)t=a-o.segpts[o.segpts.length-2],r=i-o.segpts[o.segpts.length-1];else if(c||f||d||s){var A=(h=o.allpts).length;t=a-wm(h[A-6],h[A-4],h[A-2],.9),r=i-wm(h[A-5],h[A-3],h[A-1],.9)}else t=a-p,r=i-g;o.tgtArrowAngle=hm(t,r)}};PE.getArrowWidth=PE.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n,n)};var OE,EE,AE,CE,SE,TE,NE,LE,ME,IE,jE,RE,DE,FE,BE,zE,qE,VE={},UE={},GE=function(e,t,r){r.x=t.x-e.x,r.y=t.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},WE=function(e,t,r,n,_){var a,i;if(e!==qE?GE(t,e,VE):((i=VE).x=-1*(a=UE).x,i.y=-1*a.y,i.nx=-1*a.nx,i.ny=-1*a.ny,i.ang=a.ang>0?-(Math.PI-a.ang):Math.PI+a.ang),GE(t,r,UE),AE=VE.nx*UE.ny-VE.ny*UE.nx,CE=VE.nx*UE.nx-VE.ny*-UE.ny,NE=Math.asin(Math.max(-1,Math.min(1,AE))),Math.abs(NE)<1e-6)return OE=t.x,EE=t.y,void(ME=jE=0);SE=1,TE=!1,CE<0?NE<0?NE=Math.PI+NE:(NE=Math.PI-NE,SE=-1,TE=!0):NE>0&&(SE=-1,TE=!0),jE=void 0!==t.radius?t.radius:n,LE=NE/2,RE=Math.min(VE.len/2,UE.len/2),_?(IE=Math.abs(Math.cos(LE)*jE/Math.sin(LE)))>RE?(IE=RE,ME=Math.abs(IE*Math.sin(LE)/Math.cos(LE))):ME=jE:(IE=Math.min(RE,jE),ME=Math.abs(IE*Math.sin(LE)/Math.cos(LE))),BE=t.x+UE.nx*IE,zE=t.y+UE.ny*IE,OE=BE-UE.ny*ME*SE,EE=zE+UE.nx*ME*SE,DE=t.x+VE.nx*IE,FE=t.y+VE.ny*IE,qE=t};function $E(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function YE(e,t,r,n){var _=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===n||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(WE(e,t,r,n,_),{cx:OE,cy:EE,radius:ME,startX:DE,startY:FE,stopX:BE,stopY:zE,startAngle:VE.ang+Math.PI/2*SE,endAngle:UE.ang-Math.PI/2*SE,counterClockwise:TE})}var HE={};function XE(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],_=e[r+1];t.push({x:n,y:_})}return t}}HE.findMidptPtsEtc=function(e,t){var r,n=t.posPts,_=t.intersectionPts,a=t.vectorNormInverse,i=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),l=null!=i.units&&null!=o.units;switch(e.pstyle("edge-distances").value){case"node-position":r=n;break;case"intersection":r=_;break;case"endpoints":if(l){var s=Ip(this.manualEndptToPx(e.source()[0],i),2),c=s[0],u=s[1],f=Ip(this.manualEndptToPx(e.target()[0],o),2),d=f[0],h=f[1],p={x1:c,y1:u,x2:d,y2:h};a=function(e,t,r,n){var _=n-t,a=r-e,i=Math.sqrt(a*a+_*_);return{x:-_/i,y:a/i}}(c,u,d,h),r=p}else Sv("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=_}return{midptPts:r,vectorNormInverse:a}},HE.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,_=n.rscratch;if(!_.haystack){var a=2*Math.random()*Math.PI;_.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,_.target={x:Math.cos(a),y:Math.sin(a)}}var i=n.source,o=n.target,l=i.position(),s=o.position(),c=i.width(),u=o.width(),f=i.height(),d=o.height(),h=r.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*c*h+l.x,_.source.y*f*h+l.y,_.target.x*u*h+s.x,_.target.y*d*h+s.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},HE.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=e.pstyle("segment-weights"),_=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),i=e.pstyle("radius-type"),o=Math.min(n.pfValue.length,_.pfValue.length),l=a.pfValue[a.pfValue.length-1],s=i.pfValue[i.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<o;c++){var u=n.pfValue[c],f=_.pfValue[c],d=1-u,h=u,p=this.findMidptPtsEtc(e,t),g=p.midptPts,v=p.vectorNormInverse,m={x:g.x1*d+g.x2*h,y:g.y1*d+g.y2*h};r.segpts.push(m.x+v.x*f,m.y+v.y*f),r.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:l),r.isArcRadius.push("arc-radius"===(void 0!==i.pfValue[c]?i.pfValue[c]:s))}},HE.findLoopPoints=function(e,t,r,n){var _=e._private.rscratch,a=t.dirCounts,i=t.srcPos,o=e.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,s=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,u=e.pstyle("control-point-step-size").pfValue;_.edgeType="self";var f=r,d=u;n&&(f=0,d=l);var h=s-Math.PI/2,p=h-c/2,g=h+c/2,v=String(s+"_"+c);f=void 0===a[v]?a[v]=0:++a[v],_.ctrlpts=[i.x+1.4*Math.cos(p)*d*(f/3+1),i.y+1.4*Math.sin(p)*d*(f/3+1),i.x+1.4*Math.cos(g)*d*(f/3+1),i.y+1.4*Math.sin(g)*d*(f/3+1)]},HE.findCompoundLoopPoints=function(e,t,r,n){var _=e._private.rscratch;_.edgeType="compound";var a=t.srcPos,i=t.tgtPos,o=t.srcW,l=t.srcH,s=t.tgtW,c=t.tgtH,u=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),d=f?f.pfValue[0]:void 0,h=r,p=u;n&&(h=0,p=d);var g={x:a.x-o/2,y:a.y-l/2},v={x:i.x-s/2,y:i.y-c/2},m={x:Math.min(g.x,v.x),y:Math.min(g.y,v.y)},y=Math.max(.5,Math.log(.01*o)),w=Math.max(.5,Math.log(.01*s));_.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*p*(h/3+1)*y,m.x-(1+Math.pow(50,1.12)/100)*p*(h/3+1)*w,m.y]},HE.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},HE.findBezierPoints=function(e,t,r,n,_){var a=e._private.rscratch,i=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),s=o&&l?Math.min(o.value.length,l.value.length):1,c=o?o.pfValue[0]:void 0,u=l.value[0],f=n;a.edgeType=f?"multibezier":"bezier",a.ctrlpts=[];for(var d=0;d<s;d++){var h=(.5-t.eles.length/2+r)*i*(_?-1:1),p=void 0,g=gm(h);f&&(c=o?o.pfValue[d]:i,u=l.value[d]);var v=void 0!==(p=n?c:void 0!==c?g*c:void 0)?p:h,m=1-u,y=u,w=this.findMidptPtsEtc(e,t),b=w.midptPts,k=w.vectorNormInverse,x={x:b.x1*m+b.x2*y,y:b.y1*m+b.y2*y};a.ctrlpts.push(x.x+k.x*v,x.y+k.y*v)}},HE.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var n="vertical",_="horizontal",a="leftward",i="rightward",o="downward",l="upward",s=t.posPts,c=t.srcW,u=t.srcH,f=t.tgtW,d=t.tgtH,h="node-position"!==e.pstyle("edge-distances").value,p=e.pstyle("taxi-direction").value,g=p,v=e.pstyle("taxi-turn"),m="%"===v.units,y=v.pfValue,w=y<0,b=e.pstyle("taxi-turn-min-distance").pfValue,k=h?(c+f)/2:0,x=h?(u+d)/2:0,P=s.x2-s.x1,O=s.y2-s.y1,E=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},A=E(P,k),C=E(O,x),S=!1;"auto"===g?p=Math.abs(A)>Math.abs(C)?_:n:g===l||g===o?(p=n,S=!0):g!==a&&g!==i||(p=_,S=!0);var T,N=p===n,L=N?C:A,M=N?O:P,I=gm(M),j=!1;(S&&(m||w)||!(g===o&&M<0||g===l&&M>0||g===a&&M>0||g===i&&M<0)||(L=(I*=-1)*Math.abs(L),j=!0),m)?T=(y<0?1+y:y)*L:T=(y<0?L:0)+y*I;var R=function(e){return Math.abs(e)<b||Math.abs(e)>=Math.abs(L)},D=R(T),F=R(Math.abs(L)-Math.abs(T));if((D||F)&&!j)if(N){var B=Math.abs(M)<=u/2,z=Math.abs(P)<=f/2;if(B){var q=(s.x1+s.x2)/2,V=s.y1,U=s.y2;r.segpts=[q,V,q,U]}else if(z){var G=(s.y1+s.y2)/2,W=s.x1,$=s.x2;r.segpts=[W,G,$,G]}else r.segpts=[s.x1,s.y2]}else{var Y=Math.abs(M)<=c/2,H=Math.abs(O)<=d/2;if(Y){var X=(s.y1+s.y2)/2,Z=s.x1,K=s.x2;r.segpts=[Z,X,K,X]}else if(H){var J=(s.x1+s.x2)/2,Q=s.y1,ee=s.y2;r.segpts=[J,Q,J,ee]}else r.segpts=[s.x2,s.y1]}else if(N){var te=s.y1+T+(h?u/2*I:0),re=s.x1,ne=s.x2;r.segpts=[re,te,ne,te]}else{var _e=s.x1+T+(h?c/2*I:0),ae=s.y1,ie=s.y2;r.segpts=[_e,ae,_e,ie]}if(r.isRound){var oe=e.pstyle("taxi-radius").value,le="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(oe),r.isArcRadius=new Array(r.segpts.length/2).fill(le)}},HE.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,_=t.tgtPos,a=t.srcW,i=t.srcH,o=t.tgtW,l=t.tgtH,s=t.srcShape,c=t.tgtShape,u=t.srcCornerRadius,f=t.tgtCornerRadius,d=t.srcRs,h=t.tgtRs,p=!Pg(r.startX)||!Pg(r.startY),g=!Pg(r.arrowStartX)||!Pg(r.arrowStartY),v=!Pg(r.endX)||!Pg(r.endY),m=!Pg(r.arrowEndX)||!Pg(r.arrowEndY),y=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),w=vm({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),b=w<y,k=vm({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),x=k<y,P=!1;if(p||g||b){P=!0;var O={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},E=Math.sqrt(O.x*O.x+O.y*O.y),A={x:O.x/E,y:O.y/E},C=Math.max(a,i),S={x:r.ctrlpts[0]+2*A.x*C,y:r.ctrlpts[1]+2*A.y*C},T=s.intersectLine(n.x,n.y,a,i,S.x,S.y,0,u,d);b?(r.ctrlpts[0]=r.ctrlpts[0]+A.x*(y-w),r.ctrlpts[1]=r.ctrlpts[1]+A.y*(y-w)):(r.ctrlpts[0]=T[0]+A.x*y,r.ctrlpts[1]=T[1]+A.y*y)}if(v||m||x){P=!0;var N={x:r.ctrlpts[0]-_.x,y:r.ctrlpts[1]-_.y},L=Math.sqrt(N.x*N.x+N.y*N.y),M={x:N.x/L,y:N.y/L},I=Math.max(a,i),j={x:r.ctrlpts[0]+2*M.x*I,y:r.ctrlpts[1]+2*M.y*I},R=c.intersectLine(_.x,_.y,o,l,j.x,j.y,0,f,h);x?(r.ctrlpts[0]=r.ctrlpts[0]+M.x*(y-k),r.ctrlpts[1]=r.ctrlpts[1]+M.y*(y-k)):(r.ctrlpts[0]=R[0]+M.x*y,r.ctrlpts[1]=R[1]+M.y*y)}P&&this.findEndpoints(e)}},HE.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var n;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(n=t.allpts.length/2-1,t.midX=t.allpts[n],t.midY=t.allpts[n+1]):(n=t.allpts.length/2-3,t.midX=wm(t.allpts[n],t.allpts[n+2],t.allpts[n+4],.5),t.midY=wm(t.allpts[n+1],t.allpts[n+3],t.allpts[n+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var _=2;_+3<t.allpts.length;_+=2){var a=t.radii[_/2-1],i=t.isArcRadius[_/2-1];t.roundCorners.push(YE({x:t.allpts[_-2],y:t.allpts[_-1]},{x:t.allpts[_],y:t.allpts[_+1],radius:a},{x:t.allpts[_+2],y:t.allpts[_+3]},a,i))}}if(t.segpts.length%4==0){var o=t.segpts.length/2,l=o-2;t.midX=(t.segpts[l]+t.segpts[o])/2,t.midY=(t.segpts[l+1]+t.segpts[o+1])/2}else{var s=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[s],y:t.segpts[s+1]},u=t.roundCorners[s/2];if(0===u.radius){var f={x:t.segpts[s+2],y:t.segpts[s+3]};t.midX=c.x,t.midY=c.y,t.midVector=[c.y-f.y,f.x-c.x]}else{var d=[c.x-u.cx,c.y-u.cy],h=u.radius/Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2));d=d.map((function(e){return e*h})),t.midX=u.cx+d[0],t.midY=u.cy+d[1],t.midVector=d}}else t.midX=t.segpts[s],t.midY=t.segpts[s+1]}}},HE.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Pg(t.startX)&&Pg(t.startY)&&Pg(t.endX)&&Pg(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Sv("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},HE.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),_=new Bv,a=function(e,t){return[].concat(jp(e),[t?1:0]).join("-")},i=[],o=[],l=0;l<e.length;l++){var s=e[l],c=s._private,u=s.pstyle("curve-style").value;if(!s.removed()&&s.takesUpSpace())if("haystack"!==u){var f="unbundled-bezier"===u||u.endsWith("segments")||"straight"===u||"straight-triangle"===u||u.endsWith("taxi"),d="unbundled-bezier"===u||"bezier"===u,h=c.source,p=c.target,g=[h.poolIndex(),p.poolIndex()].sort(),v=a(g,f),m=_.get(v);null==m&&(m={eles:[]},i.push({pairId:g,edgeIsUnbundled:f}),_.set(v,m)),m.eles.push(s),f&&(m.hasUnbundled=!0),d&&(m.hasBezier=!0)}else o.push(s)}for(var y=function(){var e,o=i[w],l=o.pairId,s=o.edgeIsUnbundled,c=a(l,s),u=_.get(c);if(!u.hasUnbundled){var f=u.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));Rv(u.eles),f.forEach((function(e){return u.eles.push(e)})),u.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var d=u.eles[0],h=d.source(),p=d.target();if(h.poolIndex()>p.poolIndex()){var g=h;h=p,p=g}var v=u.srcPos=h.position(),m=u.tgtPos=p.position(),y=u.srcW=h.outerWidth(),b=u.srcH=h.outerHeight(),k=u.tgtW=p.outerWidth(),x=u.tgtH=p.outerHeight(),P=u.srcShape=r.nodeShapes[t.getNodeShape(h)],O=u.tgtShape=r.nodeShapes[t.getNodeShape(p)],E=u.srcCornerRadius="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,A=u.tgtCornerRadius="auto"===p.pstyle("corner-radius").value?"auto":p.pstyle("corner-radius").pfValue,C=u.tgtRs=p._private.rscratch,S=u.srcRs=h._private.rscratch;u.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var T=0;T<u.eles.length;T++){var N=u.eles[T],L=N[0]._private.rscratch,M=N.pstyle("curve-style").value,I="unbundled-bezier"===M||M.endsWith("segments")||M.endsWith("taxi"),j=!h.same(N.source());if(!u.calculatedIntersection&&h!==p&&(u.hasBezier||u.hasUnbundled)){u.calculatedIntersection=!0;var R=P.intersectLine(v.x,v.y,y,b,m.x,m.y,0,E,S),D=u.srcIntn=R,F=O.intersectLine(m.x,m.y,k,x,v.x,v.y,0,A,C),B=u.tgtIntn=F,z=u.intersectionPts={x1:R[0],x2:F[0],y1:R[1],y2:F[1]},q=u.posPts={x1:v.x,x2:m.x,y1:v.y,y2:m.y},V=F[1]-R[1],U=F[0]-R[0],G=Math.sqrt(U*U+V*V),W=u.vector={x:U,y:V},$=u.vectorNorm={x:W.x/G,y:W.y/G},Y={x:-$.y,y:$.x};u.nodesOverlap=!Pg(G)||O.checkPoint(R[0],R[1],0,k,x,m.x,m.y,A,C)||P.checkPoint(F[0],F[1],0,y,b,v.x,v.y,E,S),u.vectorNormInverse=Y,e={nodesOverlap:u.nodesOverlap,dirCounts:u.dirCounts,calculatedIntersection:!0,hasBezier:u.hasBezier,hasUnbundled:u.hasUnbundled,eles:u.eles,srcPos:m,srcRs:C,tgtPos:v,tgtRs:S,srcW:k,srcH:x,tgtW:y,tgtH:b,srcIntn:B,tgtIntn:D,srcShape:O,tgtShape:P,posPts:{x1:q.x2,y1:q.y2,x2:q.x1,y2:q.y1},intersectionPts:{x1:z.x2,y1:z.y2,x2:z.x1,y2:z.y1},vector:{x:-W.x,y:-W.y},vectorNorm:{x:-$.x,y:-$.y},vectorNormInverse:{x:-Y.x,y:-Y.y}}}var H=j?e:u;L.nodesOverlap=H.nodesOverlap,L.srcIntn=H.srcIntn,L.tgtIntn=H.tgtIntn,L.isRound=M.startsWith("round"),n&&(h.isParent()||h.isChild()||p.isParent()||p.isChild())&&(h.parents().anySame(p)||p.parents().anySame(h)||h.same(p)&&h.isParent())?t.findCompoundLoopPoints(N,H,T,I):h===p?t.findLoopPoints(N,H,T,I):M.endsWith("segments")?t.findSegmentsPoints(N,H):M.endsWith("taxi")?t.findTaxiPoints(N,H):"straight"===M||!I&&u.eles.length%2==1&&T===Math.floor(u.eles.length/2)?t.findStraightEdgePoints(N):t.findBezierPoints(N,H,T,I,j),t.findEndpoints(N),t.tryToCorrectInvalidPoints(N,H),t.checkForInvalidEdgeWarning(N),t.storeAllpts(N),t.storeEdgeProjections(N),t.calculateArrowAngles(N),t.recalculateEdgeLabelProjections(N),t.calculateLabelAngles(N)}},w=0;w<i.length;w++)y();this.findHaystackPoints(o)}},HE.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return XE(t.segpts)},HE.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return XE(t.ctrlpts)},HE.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var ZE={manualEndptToPx:function(e,t){var r=e.position(),n=e.outerWidth(),_=e.outerHeight(),a=e._private.rscratch;if(2===t.value.length){var i=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(i[0]=i[0]*n),"%"===t.units[1]&&(i[1]=i[1]*_),i[0]+=r.x,i[1]+=r.y,i}var o=t.pfValue[0];o=-Math.PI/2+o;var l=2*Math.max(n,_),s=[r.x+Math.cos(o)*l,r.y+Math.sin(o)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,_,s[0],s[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,a)},findEndpoints:function(e){var t,r,n,_,a,i=this,o=e.source()[0],l=e.target()[0],s=o.position(),c=l.position(),u=e.pstyle("target-arrow-shape").value,f=e.pstyle("source-arrow-shape").value,d=e.pstyle("target-distance-from-node").pfValue,h=e.pstyle("source-distance-from-node").pfValue,p=o._private.rscratch,g=l._private.rscratch,v=e.pstyle("curve-style").value,m=e._private.rscratch,y=m.edgeType,w="self"===y||"compound"===y,b="bezier"===y||"multibezier"===y||w,k="bezier"!==y,x="straight"===y||"segments"===y,P="segments"===y,O=b||k||x,E=w||"taxi"===v,A=e.pstyle("source-endpoint"),C=E?"outside-to-node":A.value,S="auto"===o.pstyle("corner-radius").value?"auto":o.pstyle("corner-radius").pfValue,T=e.pstyle("target-endpoint"),N=E?"outside-to-node":T.value,L="auto"===l.pstyle("corner-radius").value?"auto":l.pstyle("corner-radius").pfValue;if(m.srcManEndpt=A,m.tgtManEndpt=T,b){var M=[m.ctrlpts[0],m.ctrlpts[1]];r=k?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:M,n=M}else if(x){var I=P?m.segpts.slice(0,2):[c.x,c.y];r=P?m.segpts.slice(m.segpts.length-2):[s.x,s.y],n=I}if("inside-to-node"===N)t=[c.x,c.y];else if(T.units)t=this.manualEndptToPx(l,T);else if("outside-to-line"===N)t=m.tgtIntn;else if("outside-to-node"===N||"outside-to-node-or-label"===N?_=r:"outside-to-line"!==N&&"outside-to-line-or-label"!==N||(_=[s.x,s.y]),t=i.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),_[0],_[1],0,L,g),"outside-to-node-or-label"===N||"outside-to-line-or-label"===N){var j=l._private.rscratch,R=j.labelWidth,D=j.labelHeight,F=j.labelX,B=j.labelY,z=R/2,q=D/2,V=l.pstyle("text-valign").value;"top"===V?B-=q:"bottom"===V&&(B+=q);var U=l.pstyle("text-halign").value;"left"===U?F-=z:"right"===U&&(F+=z);var G=Wm(_[0],_[1],[F-z,B-q,F+z,B-q,F+z,B+q,F-z,B+q],c.x,c.y);if(G.length>0){var W=s,$=mm(W,dm(t)),Y=mm(W,dm(G)),H=$;if(Y<$&&(t=G,H=Y),G.length>2)mm(W,{x:G[2],y:G[3]})<H&&(t=[G[2],G[3]])}}var X=$m(t,r,i.arrowShapes[u].spacing(e)+d),Z=$m(t,r,i.arrowShapes[u].gap(e)+d);if(m.endX=Z[0],m.endY=Z[1],m.arrowEndX=X[0],m.arrowEndY=X[1],"inside-to-node"===C)t=[s.x,s.y];else if(A.units)t=this.manualEndptToPx(o,A);else if("outside-to-line"===C)t=m.srcIntn;else if("outside-to-node"===C||"outside-to-node-or-label"===C?a=n:"outside-to-line"!==C&&"outside-to-line-or-label"!==C||(a=[c.x,c.y]),t=i.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),a[0],a[1],0,S,p),"outside-to-node-or-label"===C||"outside-to-line-or-label"===C){var K=o._private.rscratch,J=K.labelWidth,Q=K.labelHeight,ee=K.labelX,te=K.labelY,re=J/2,ne=Q/2,_e=o.pstyle("text-valign").value;"top"===_e?te-=ne:"bottom"===_e&&(te+=ne);var ae=o.pstyle("text-halign").value;"left"===ae?ee-=re:"right"===ae&&(ee+=re);var ie=Wm(a[0],a[1],[ee-re,te-ne,ee+re,te-ne,ee+re,te+ne,ee-re,te+ne],s.x,s.y);if(ie.length>0){var oe=c,le=mm(oe,dm(t)),se=mm(oe,dm(ie)),ce=le;if(se<le&&(t=[ie[0],ie[1]],ce=se),ie.length>2)mm(oe,{x:ie[2],y:ie[3]})<ce&&(t=[ie[2],ie[3]])}}var ue=$m(t,n,i.arrowShapes[f].spacing(e)+h),fe=$m(t,n,i.arrowShapes[f].gap(e)+h);m.startX=fe[0],m.startY=fe[1],m.arrowStartX=ue[0],m.arrowStartY=ue[1],O&&(Pg(m.startX)&&Pg(m.startY)&&Pg(m.endX)&&Pg(m.endY)?m.badLine=!1:m.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},KE={};function JE(e,t,r){for(var n=function(e,t,r,n){return wm(e,t,r,n)},_=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var i=e.bezierProjPcts[a];_.push({x:n(r[0],r[2],r[4],i),y:n(r[1],r[3],r[5],i)})}}KE.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var _=0;_+5<r.allpts.length;_+=4)JE(this,e,r.allpts.slice(_,_+6))}else if("segments"===n){var a=t.rstyle.linePts=[];for(_=0;_+1<r.allpts.length;_+=2)a.push({x:r.allpts[_],y:r.allpts[_+1]})}else if("haystack"===n){var i=r.haystackPts;t.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},KE.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var QE={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Ng(t)){var r,n,_=e._private,a=e.width(),i=e.height(),o=e.padding(),l=e.position(),s=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,u=_.rscratch,f=_.rstyle;switch(s){case"left":r=l.x-a/2-o;break;case"right":r=l.x+a/2+o;break;default:r=l.x}switch(c){case"top":n=l.y-i/2-o;break;case"bottom":n=l.y+i/2+o;break;default:n=l.y}u.labelX=r,u.labelY=n,f.labelX=r,f.labelY=n,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},eA=function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r},tA=function(e,t){var r=t.x-e.x,n=t.y-e.y;return eA(r,n)};QE.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,_=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:n.midX,y:n.midY};var i=function(e,t,n){Fv(r.rscratch,e,t,n),Fv(r.rstyle,e,t,n)};i("labelX",null,t.x),i("labelY",null,t.y);var o=eA(n.midDispX,n.midDispY);i("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var e=[],t=0;t+5<n.allpts.length;t+=4){var a={x:n.allpts[t],y:n.allpts[t+1]},i={x:n.allpts[t+2],y:n.allpts[t+3]},o={x:n.allpts[t+4],y:n.allpts[t+5]};e.push({p0:a,p1:i,p2:o,startDist:0,length:0,segments:[]})}var s=r.rstyle.bezierPts,c=_.bezierProjPcts.length;function u(e,t,r,n,_){var a=vm(t,r),i=e.segments[e.segments.length-1],o={p0:t,p1:r,t0:n,t1:_,startDist:i?i.startDist+i.length:0,length:a};e.segments.push(o),e.length+=a}for(var f=0;f<e.length;f++){var d=e[f],h=e[f-1];h&&(d.startDist=h.startDist+h.length),u(d,d.p0,s[f*c],0,_.bezierProjPcts[0]);for(var p=0;p<c-1;p++)u(d,s[f*c+p],s[f*c+p+1],_.bezierProjPcts[p],_.bezierProjPcts[p+1]);u(d,s[f*c+c-1],d.p2,_.bezierProjPcts[c-1],1)}return l.cache=e},s=function(r){var _,o="source"===r;if(a[r]){var s=e.pstyle(r+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,u=l(),f=0,d=0,h=0;h<u.length;h++){for(var p=u[o?h:u.length-1-h],g=0;g<p.segments.length;g++){var v=p.segments[o?g:p.segments.length-1-g],m=h===u.length-1&&g===p.segments.length-1;if(f=d,(d+=v.length)>=s||m){c={cp:p,segment:v};break}}if(c)break}var y=c.cp,w=c.segment,b=(s-f)/w.length,k=w.t1-w.t0,x=o?w.t0+k*b:w.t1-k*b;x=km(0,x,1),t=bm(y.p0,y.p1,y.p2,x),_=function(e,t,r,n){var _=km(0,n-.001,1),a=km(0,n+.001,1),i=bm(e,t,r,_),o=bm(e,t,r,a);return tA(i,o)}(y.p0,y.p1,y.p2,x);break;case"straight":case"segments":case"haystack":for(var P,O,E,A,C=0,S=n.allpts.length,T=0;T+3<S&&(o?(E={x:n.allpts[T],y:n.allpts[T+1]},A={x:n.allpts[T+2],y:n.allpts[T+3]}):(E={x:n.allpts[S-2-T],y:n.allpts[S-1-T]},A={x:n.allpts[S-4-T],y:n.allpts[S-3-T]}),O=C,!((C+=P=vm(E,A))>=s));T+=2);var N=(s-O)/P;N=km(0,N,1),t=function(e,t,r,n){var _=t.x-e.x,a=t.y-e.y,i=vm(e,t),o=_/i,l=a/i;return r=null==r?0:r,n=null!=n?n:r*i,{x:e.x+o*n,y:e.y+l*n}}(E,A,N),_=tA(E,A)}i("labelX",r,t.x),i("labelY",r,t.y),i("labelAutoAngle",r,_)}};s("source"),s("target"),this.applyLabelDimensions(e)}},QE.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},QE.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),_=this.calculateLabelDimensions(e,n),a=e.pstyle("line-height").pfValue,i=e.pstyle("text-wrap").strValue,o=Dv(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==i?1:Math.max(o.length,1),s=_.height/l,c=s*a,u=_.width,f=_.height+(l-1)*(a-1)*s;Fv(r.rstyle,"labelWidth",t,u),Fv(r.rscratch,"labelWidth",t,u),Fv(r.rstyle,"labelHeight",t,f),Fv(r.rscratch,"labelHeight",t,f),Fv(r.rscratch,"labelLineHeight",t,c)},QE.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",_=e.pstyle(n+"label").strValue,a=e.pstyle("text-transform").value,i=function(e,n){return n?(Fv(r.rscratch,e,t,n),n):Dv(r.rscratch,e,t)};if(!_)return"";"none"==a||("uppercase"==a?_=_.toUpperCase():"lowercase"==a&&(_=_.toLowerCase()));var o=e.pstyle("text-wrap").value;if("wrap"===o){var l=i("labelKey");if(null!=l&&i("labelWrapKey")===l)return i("labelWrapCachedText");for(var s=_.split("\n"),c=e.pstyle("text-max-width").pfValue,u="anywhere"===e.pstyle("text-overflow-wrap").value,f=[],d=/[\s\u200b]+|$/g,h=0;h<s.length;h++){var p=s[h],g=this.calculateLabelDimensions(e,p).width;if(u){var v=p.split("").join("​");p=v}if(g>c){var m,y="",w=0,b=Lp(p.matchAll(d));try{for(b.s();!(m=b.n()).done;){var k=m.value,x=k[0],P=p.substring(w,k.index);w=k.index+x.length;var O=0===y.length?P:y+P+x;this.calculateLabelDimensions(e,O).width<=c?y+=P+x:(y&&f.push(y),y=P+x)}}catch(e){b.e(e)}finally{b.f()}y.match(/^[\s\u200b]+$/)||f.push(y)}else f.push(p)}i("labelWrapCachedLines",f),_=i("labelWrapCachedText",f.join("\n")),i("labelWrapKey",l)}else if("ellipsis"===o){var E=e.pstyle("text-max-width").pfValue,A="",C=!1;if(this.calculateLabelDimensions(e,_).width<E)return _;for(var S=0;S<_.length;S++){if(this.calculateLabelDimensions(e,A+_[S]+"…").width>E)break;A+=_[S],S===_.length-1&&(C=!0)}return C||(A+="…"),A}return _},QE.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},QE.calculateLabelDimensions=function(e,t){var r=this,n=r.cy.window().document,_=gv(t,e._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),i=a[_];if(null!=i)return i;var o=e.pstyle("font-style").strValue,l=e.pstyle("font-size").pfValue,s=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=n.createElement("canvas"),f=this.labelCalcCanvasContext=u.getContext("2d");var d=u.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(o," ").concat(c," ").concat(l,"px ").concat(s);for(var h=0,p=0,g=t.split("\n"),v=0;v<g.length;v++){var m=g[v],y=f.measureText(m),w=Math.ceil(y.width),b=l;h=Math.max(w,h),p+=b}return h+=0,p+=0,a[_]={width:h,height:p}},QE.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),_=t?t+"-":"",a=e.pstyle(_+"text-rotation"),i=a.strValue;return"none"===i?0:n&&"autorotate"===i?r.labelAutoAngle:"autorotate"===i?0:a.pfValue},QE.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),n=e._private.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var rA={},nA=!1;rA.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return nA||(Sv("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),nA=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var _A={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,n=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var _=e[n]._private.rstyle;_.clean=!1,_.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",(function(e){var t=e.target;n(t)})).on("style.* background.*",(function(e){var t=e.target;n(t,!1)}));var _=function(_){if(_){var a=r.onUpdateEleCalcsFns;t.cleanStyle();for(var i=0;i<t.length;i++){var o=t[i],l=o._private.rstyle;o.isNode()&&!l.cleanConnected&&(n(o.connectedEdges()),l.cleanConnected=!0)}if(a)for(var s=0;s<a.length;s++){(0,a[s])(_,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){_(!0)},r.beforeRender(_,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(e){return e._private.rstyle.cleanConnected};if(0!==e.length){var n=[],_=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var i=e[a],o=i._private,l=o.rstyle;!i.isEdge()||r(i.source())&&r(i.target())||(l.clean=!1),i.isEdge()&&i.isBundledBezier()&&i.parallelEdges().some((function(e){return!e._private.rstyle.clean&&e.isBundledBezier()}))&&(l.clean=!1),t&&l.clean||i.removed()||"none"!==i.pstyle("display").value&&("nodes"===o.group?_.push(i):n.push(i),l.clean=!0)}for(var s=0;s<_.length;s++){var c=_[s],u=c._private.rstyle,f=c.position();this.recalculateNodeLabelProjection(c),u.nodeX=f.x,u.nodeY=f.y,u.nodeW=c.pstyle("width").pfValue,u.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var h=n[d]._private,p=h.rstyle,g=h.rscratch;p.srcX=g.arrowStartX,p.srcY=g.arrowStartY,p.tgtX=g.arrowEndX,p.tgtY=g.arrowEndY,p.midX=g.midX,p.midY=g.midY,p.labelAngle=g.labelAngle,p.sourceLabelAngle=g.sourceLabelAngle,p.targetLabelAngle=g.targetLabelAngle}}}}},aA={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=(_=e[r])._private.rscratch;_.grabbed()&&!_.isParent()?t.push(_):n.inDragLayer?e.drag.push(_):e.nondrag.push(_)}for(r=0;r<t.length;r++){var _=t[r];e.drag.push(_)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(bP),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},iA={};[xE,PE,HE,ZE,KE,QE,rA,_A,aA].forEach((function(e){Gg(iA,e)}));var oA={getCachedImage:function(e,t,r){var n=this.imageCache=this.imageCache||{},_=n[e];if(_)return _.image.complete||_.image.addEventListener("load",r),_.image;var a=(_=n[e]=n[e]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var i="data:";return e.substring(0,5).toLowerCase()===i||(t="null"===t?null:t,a.crossOrigin=t),a.src=e,a}},lA={registerBinding:function(e,t,r,n){var _=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],i=0;i<e.length;i++){var o=e[i];if(void 0!==o){var l=this.binder(o);a.push(l.on.apply(l,_))}}return a}return(l=this.binder(e)).on.apply(l,_)}};lA.binder=function(e){var t=this,r=t.cy.window(),n=e===r||e===r.document||e===r.document.body||function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}(e);if(null==t.supportsPassiveEvents){var _=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return _=!0,!0}});r.addEventListener("test",null,a)}catch(e){}t.supportsPassiveEvents=_}var i=function(r,_,a){var i=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(i[2]={capture:null!=a&&a,passive:!1,once:!1}),t.bindings.push({target:e,args:i}),(e.addEventListener||e.on).apply(e,i),this};return{on:i,addEventListener:i,addListener:i,bind:i}},lA.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},lA.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},lA.load=function(){var e=this,t=e.cy.window(),r=function(e){return e.selected()},n=function(t,r,n,_){null==t&&(t=e.cy);for(var a=0;a<r.length;a++){var i=r[a];t.emit({originalEvent:n,type:i,position:_})}},_=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},a=function(t,r){var n=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var _=0;r&&_<r.length;_++){if((t=r[_]).isNode()&&t.isParent()&&!t.pannable()){n=!1;break}}else n=!0;return n},i=function(e){e[0]._private.rscratch.inDragLayer=!0},o=function(e){e[0]._private.rscratch.isGrabTarget=!0},l=function(e,t){var r=t.addToList;r.has(e)||!e.grabbable()||e.locked()||(r.merge(e),function(e){e[0]._private.grabbed=!0}(e))},s=function(t,r){r=r||{};var n=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(i),t.neighborhood().stdFilter((function(e){return!n||e.isEdge()})).forEach(i)),r.addToList&&t.forEach((function(e){l(e,r)})),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(i),r.connectedEdges().forEach(i)),t.addToList&&l(r,t)}}(t,r),f(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()},c=s,u=function(t){t&&(e.getCachedZSortedEles().forEach((function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)})),e.updateCachedGrabbedEles())},f=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),_=n.connectedEdges();t.inDragLayer&&(_.forEach(i),n.forEach(i)),t.addToList&&n.forEach((function(e){l(e,t)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},h="undefined"!=typeof MutationObserver,p="undefined"!=typeof ResizeObserver;h?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var n=t[r].removedNodes;if(n)for(var _=0;_<n.length;_++){if(n[_]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var g=nv((function(){e.cy.resize()}),100);h&&(e.styleObserver=new MutationObserver(g),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",g),p&&(e.resizeObserver=new ResizeObserver(g),e.resizeObserver.observe(e.container));var v=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,(function(t){e.registerBinding(t,"transitionend",v),e.registerBinding(t,"animationend",v),e.registerBinding(t,"scroll",v)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var m=function(t){for(var r=e.findContainerClientCoords(),n=r[0],_=r[1],a=r[2],i=r[3],o=t.touches?t.touches:[t],l=!1,s=0;s<o.length;s++){var c=o[s];if(n<=c.clientX&&c.clientX<=n+a&&_<=c.clientY&&c.clientY<=_+i){l=!0;break}}if(!l)return!1;for(var u=e.container,f=t.target.parentNode,d=!1;f;){if(f===u){d=!0;break}f=f.parentNode}return!!d};e.registerBinding(e.container,"mousedown",(function(t){if(m(t)&&(1!==e.hoverData.which||1===t.which)){t.preventDefault(),d(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,_=[t.clientX,t.clientY],a=e.projectIntoViewport(_[0],_[1]),i=e.selection,l=e.findNearestElements(a[0],a[1],!0,!1),u=l[0],f=e.dragData.possibleDragElements;e.hoverData.mdownPos=a,e.hoverData.mdownGPos=_;if(3==t.which){e.hoverData.cxtStarted=!0;var h={originalEvent:t,type:"cxttapstart",position:{x:a[0],y:a[1]}};u?(u.activate(),u.emit(h),e.hoverData.down=u):r.emit(h),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var p=function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}};if(o(u),u.selected()){f=e.dragData.possibleDragElements=r.collection();var g=r.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));s(g,{addToList:f}),u.emit(p("grabon")),g.forEach((function(e){e.emit(p("grab"))}))}else f=e.dragData.possibleDragElements=r.collection(),c(u,{addToList:f}),u.emit(p("grabon")).emit(p("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),n(u,["mousedown","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==u?(i[4]=1,e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()):u.pannable()&&(i[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var n=e.hoverData.down;n?n.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}})}}),e.tapholdDuration)}i[0]=i[2]=a[0],i[1]=i[3]=a[1]}}),!1);var y,w,b,k=function(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}(e.container);e.registerBinding([t,k],"mousemove",(function(t){if(e.hoverData.capture||m(t)){var r=!1,i=e.cy,o=i.zoom(),l=[t.clientX,t.clientY],c=e.projectIntoViewport(l[0],l[1]),f=e.hoverData.mdownPos,d=e.hoverData.mdownGPos,h=e.selection,p=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(p=e.findNearestElement(c[0],c[1],!0,!1));var g,v=e.hoverData.last,y=e.hoverData.down,w=[c[0]-h[2],c[1]-h[3]],b=e.dragData.possibleDragElements;if(d){var k=l[0]-d[0],x=k*k,P=l[1]-d[1],O=x+P*P;e.hoverData.isOverThresholdDrag=g=O>=e.desktopTapThreshold2}var E=_(t);g&&(e.hoverData.tapholdCancelled=!0);r=!0,n(p,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var A=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||i.emit({originalEvent:t,type:"boxstart",position:{x:c[0],y:c[1]}}),h[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(g){var C={originalEvent:t,type:"cxtdrag",position:{x:c[0],y:c[1]}};y?y.emit(C):i.emit(C),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&p===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:c[0],y:c[1]}}),e.hoverData.cxtOver=p,p&&p.emit({originalEvent:t,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(e.hoverData.dragging){if(r=!0,i.panningEnabled()&&i.userPanningEnabled()){var S;if(e.hoverData.justStartedPan){var T=e.hoverData.mdownPos;S={x:(c[0]-T[0])*o,y:(c[1]-T[1])*o},e.hoverData.justStartedPan=!1}else S={x:w[0]*o,y:w[1]*o};i.panBy(S),i.emit("dragpan"),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=h[4]||null!=y&&!y.pannable()){if(y&&y.pannable()&&y.active()&&y.unactivate(),y&&y.grabbed()||p==v||(v&&n(v,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),p&&n(p,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=p),y)if(g){if(i.boxSelectionEnabled()&&E)y&&y.grabbed()&&(u(b),y.emit("freeon"),b.emit("free"),e.dragData.didDrag&&(y.emit("dragfreeon"),b.emit("dragfree"))),A();else if(y&&y.grabbed()&&e.nodeIsDraggable(y)){var N=!e.dragData.didDrag;N&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||s(b,{inDragLayer:!0});var L={x:0,y:0};if(Pg(w[0])&&Pg(w[1])&&(L.x+=w[0],L.y+=w[1],N)){var M=e.hoverData.dragDelta;M&&Pg(M[0])&&Pg(M[1])&&(L.x+=M[0],L.y+=M[1])}e.hoverData.draggingEles=!0,b.silentShift(L).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(w[0]),t.push(w[1])):(t[0]+=w[0],t[1]+=w[1])}();r=!0}else if(g){if(e.hoverData.dragging||!i.boxSelectionEnabled()||!E&&i.panningEnabled()&&i.userPanningEnabled()){if(!e.hoverData.selecting&&i.panningEnabled()&&i.userPanningEnabled()){a(y,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,h[4]=0,e.data.bgActivePosistion=dm(f),e.redrawHint("select",!0),e.redraw())}}else A();y&&y.pannable()&&y.active()&&y.unactivate()}return h[2]=c[0],h[3]=c[1],r?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}}),!1),e.registerBinding(t,"mouseup",(function(t){if((1!==e.hoverData.which||1===t.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var a=e.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=e.selection,l=e.findNearestElement(i[0],i[1],!0,!1),s=e.dragData.possibleDragElements,c=e.hoverData.down,f=_(t);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,c&&c.unactivate(),3===e.hoverData.which){var d={originalEvent:t,type:"cxttapend",position:{x:i[0],y:i[1]}};if(c?c.emit(d):a.emit(d),!e.hoverData.cxtDragged){var h={originalEvent:t,type:"cxttap",position:{x:i[0],y:i[1]}};c?c.emit(h):a.emit(h)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(n(l,["mouseup","tapend","vmouseup"],t,{x:i[0],y:i[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(n(c,["click","tap","vclick"],t,{x:i[0],y:i[1]}),w=!1,t.timeStamp-b<=a.multiClickDebounceTime()?(y&&clearTimeout(y),w=!0,b=null,n(c,["dblclick","dbltap","vdblclick"],t,{x:i[0],y:i[1]})):(y=setTimeout((function(){w||n(c,["oneclick","onetap","voneclick"],t,{x:i[0],y:i[1]})}),a.multiClickDebounceTime()),b=t.timeStamp)),null!=c||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||_(t)||(a.$(r).unselect(["tapunselect"]),s.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=s=a.collection()),l!=c||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===a.selectionType()||f?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):f||(a.$(r).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var p=a.collection(e.getAllInBox(o[0],o[1],o[2],o[3]));e.redrawHint("select",!0),p.length>0&&e.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:t,position:{x:i[0],y:i[1]}});var g=function(e){return e.selectable()&&!e.selected()};"additive"===a.selectionType()||f||a.$(r).unmerge(p).unselect(),p.emit("box").stdFilter(g).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!o[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=c&&c.grabbed();u(s),v&&(c.emit("freeon"),s.emit("free"),e.dragData.didDrag&&(c.emit("dragfreeon"),s.emit("dragfree")))}}o[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}),!1);var x,P,O,E,A,C,S,T,N,L,M,I,j,R=function(t){if(!e.scrollingPage){var r=e.cy,n=r.zoom(),_=r.pan(),a=e.projectIntoViewport(t.clientX,t.clientY),i=[a[0]*n+_.x,a[1]*n+_.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var o;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),o=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,o*=e.wheelSensitivity,1===t.deltaMode&&(o*=33);var l=r.zoom()*Math.pow(10,o);"gesturechange"===t.type&&(l=e.gestureStartZoom*t.scale),r.zoom({level:l,renderedPosition:{x:i[0],y:i[1]}}),r.emit("gesturechange"===t.type?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",R,!0),e.registerBinding(t,"scroll",(function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),!0),e.registerBinding(e.container,"gesturestart",(function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()}),!0),e.registerBinding(e.container,"gesturechange",(function(t){e.hasTouchStarted||R(t)}),!0),e.registerBinding(e.container,"mouseout",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),!1),e.registerBinding(e.container,"mouseover",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),!1);var D,F,B,z,q,V,U,G=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},W=function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)};if(e.registerBinding(e.container,"touchstart",D=function(t){if(e.hasTouchStarted=!0,m(t)){d(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,_=e.touchData.now,a=e.touchData.earlier;if(t.touches[0]){var i=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);_[0]=i[0],_[1]=i[1]}if(t.touches[1]){i=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);_[2]=i[0],_[3]=i[1]}if(t.touches[2]){i=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);_[4]=i[0],_[5]=i[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,u(e.dragData.touchDragEles);var l=e.findContainerClientCoords();N=l[0],L=l[1],M=l[2],I=l[3],x=t.touches[0].clientX-N,P=t.touches[0].clientY-L,O=t.touches[1].clientX-N,E=t.touches[1].clientY-L,j=0<=x&&x<=M&&0<=O&&O<=M&&0<=P&&P<=I&&0<=E&&E<=I;var f=r.pan(),h=r.zoom();A=G(x,P,O,E),C=W(x,P,O,E),T=[((S=[(x+O)/2,(P+E)/2])[0]-f.x)/h,(S[1]-f.y)/h];if(C<4e4&&!t.touches[2]){var p=e.findNearestElement(_[0],_[1],!0,!0),g=e.findNearestElement(_[2],_[3],!0,!0);return p&&p.isNode()?(p.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:_[0],y:_[1]}}),e.touchData.start=p):g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:_[0],y:_[1]}}),e.touchData.start=g):r.emit({originalEvent:t,type:"cxttapstart",position:{x:_[0],y:_[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])r.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var v=e.findNearestElements(_[0],_[1],!0,!0),y=v[0];if(null!=y&&(y.activate(),e.touchData.start=y,e.touchData.starts=v,e.nodeIsGrabbable(y))){var w=e.dragData.touchDragEles=r.collection(),b=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),y.selected()?(b=r.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),s(b,{addToList:w})):c(y,{addToList:w}),o(y);var k=function(e){return{originalEvent:t,type:e,position:{x:_[0],y:_[1]}}};y.emit(k("grabon")),b?b.forEach((function(e){e.emit(k("grab"))})):y.emit(k("grab"))}n(y,["touchstart","tapstart","vmousedown"],t,{x:_[0],y:_[1]}),null==y&&(e.data.bgActivePosistion={x:i[0],y:i[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||n(e.touchData.start,["taphold"],t,{x:_[0],y:_[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var R=e.touchData.startPosition=[null,null,null,null,null,null],D=0;D<_.length;D++)R[D]=a[D]=_[D];var F=t.touches[0];e.touchData.startGPosition=[F.clientX,F.clientY]}}},!1),e.registerBinding(t,"touchmove",F=function(t){var r=e.touchData.capture;if(r||m(t)){var _=e.selection,i=e.cy,o=e.touchData.now,l=e.touchData.earlier,c=i.zoom();if(t.touches[0]){var f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=f[0],o[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=f[0],o[5]=f[1]}var d,h=e.touchData.startGPosition;if(r&&t.touches[0]&&h){for(var p=[],g=0;g<o.length;g++)p[g]=o[g]-l[g];var v=t.touches[0].clientX-h[0],y=v*v,w=t.touches[0].clientY-h[1];d=y+w*w>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var b=t.touches[0].clientX-N,k=t.touches[0].clientY-L,S=t.touches[1].clientX-N,M=t.touches[1].clientY-L,I=W(b,k,S,M);if(I/C>=2.25||I>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var R={originalEvent:t,type:"cxttapend",position:{x:o[0],y:o[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(R),e.touchData.start=null):i.emit(R)}}if(r&&e.touchData.cxt){R={originalEvent:t,type:"cxtdrag",position:{x:o[0],y:o[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(R):i.emit(R),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var D=e.findNearestElement(o[0],o[1],!0,!0);e.touchData.cxtOver&&D===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:o[0],y:o[1]}}),e.touchData.cxtOver=D,D&&D.emit({originalEvent:t,type:"cxtdragover",position:{x:o[0],y:o[1]}}))}else if(r&&t.touches[2]&&i.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||i.emit({originalEvent:t,type:"boxstart",position:{x:o[0],y:o[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,_[4]=1,_&&0!==_.length&&void 0!==_[0]?(_[2]=(o[0]+o[2]+o[4])/3,_[3]=(o[1]+o[3]+o[5])/3):(_[0]=(o[0]+o[2]+o[4])/3,_[1]=(o[1]+o[3]+o[5])/3,_[2]=(o[0]+o[2]+o[4])/3+1,_[3]=(o[1]+o[3]+o[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(r&&t.touches[1]&&!e.touchData.didSelect&&i.zoomingEnabled()&&i.panningEnabled()&&i.userZoomingEnabled()&&i.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),Q=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var F=0;F<Q.length;F++){var B=Q[F]._private;B.grabbed=!1,B.rscratch.inDragLayer=!1}}var z=e.touchData.start,q=(b=t.touches[0].clientX-N,k=t.touches[0].clientY-L,S=t.touches[1].clientX-N,M=t.touches[1].clientY-L,G(b,k,S,M)),V=q/A;if(j){var U=(b-x+(S-O))/2,$=(k-P+(M-E))/2,Y=i.zoom(),H=Y*V,X=i.pan(),Z=T[0]*Y+X.x,K=T[1]*Y+X.y,J={x:-H/Y*(Z-X.x-U)+Z,y:-H/Y*(K-X.y-$)+K};if(z&&z.active()){var Q=e.dragData.touchDragEles;u(Q),e.redrawHint("drag",!0),e.redrawHint("eles",!0),z.unactivate().emit("freeon"),Q.emit("free"),e.dragData.didDrag&&(z.emit("dragfreeon"),Q.emit("dragfree"))}i.viewport({zoom:H,pan:J,cancelOnFailedZoom:!0}),i.emit("pinchzoom"),A=q,x=b,P=k,O=S,E=M,e.pinching=!0}if(t.touches[0]){f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=f[0],o[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=f[0],o[5]=f[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ee=e.touchData.start,te=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(D=e.findNearestElement(o[0],o[1],!0,!0)),r&&null!=ee&&t.preventDefault(),r&&null!=ee&&e.nodeIsDraggable(ee))if(d){Q=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&s(Q,{inDragLayer:!0}),e.dragData.didDrag=!0;var ne={x:0,y:0};if(Pg(p[0])&&Pg(p[1]))if(ne.x+=p[0],ne.y+=p[1],re)e.redrawHint("eles",!0),(_e=e.touchData.dragDelta)&&Pg(_e[0])&&Pg(_e[1])&&(ne.x+=_e[0],ne.y+=_e[1]);e.hoverData.draggingEles=!0,Q.silentShift(ne).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var _e;0===(_e=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(_e.push(p[0]),_e.push(p[1])):(_e[0]+=p[0],_e[1]+=p[1])}if(n(ee||D,["touchmove","tapdrag","vmousemove"],t,{x:o[0],y:o[1]}),ee&&ee.grabbed()||D==te||(te&&te.emit({originalEvent:t,type:"tapdragout",position:{x:o[0],y:o[1]}}),D&&D.emit({originalEvent:t,type:"tapdragover",position:{x:o[0],y:o[1]}})),e.touchData.last=D,r)for(F=0;F<o.length;F++)o[F]&&e.touchData.startPosition[F]&&d&&(e.touchData.singleTouchMoved=!0);if(r&&(null==ee||ee.pannable())&&i.panningEnabled()&&i.userPanningEnabled()){a(ee,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=dm(e.touchData.startPosition)),e.swipePanning?(i.panBy({x:p[0]*c,y:p[1]*c}),i.emit("dragpan")):d&&(e.swipePanning=!0,i.panBy({x:v*c,y:w*c}),i.emit("dragpan"),ee&&(ee.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}}for(g=0;g<o.length;g++)l[g]=o[g];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",B=function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),e.registerBinding(t,"touchend",z=function(t){var _=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var i,o=e.cy,l=o.zoom(),s=e.touchData.now,c=e.touchData.earlier;if(t.touches[0]){var f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=f[0],s[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=f[0],s[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=f[0],s[5]=f[1]}if(_&&_.unactivate(),e.touchData.cxt){if(i={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}},_?_.emit(i):o.emit(i),!e.touchData.cxtDragged){var d={originalEvent:t,type:"cxttap",position:{x:s[0],y:s[1]}};_?_.emit(d):o.emit(d)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&o.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var h=o.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),o.emit({type:"boxend",originalEvent:t,position:{x:s[0],y:s[1]}});h.emit("box").stdFilter((function(e){return e.selectable()&&!e.selected()})).select().emit("boxselect"),h.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=_&&_.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var p=e.dragData.touchDragEles;if(null!=_){var g=_._private.grabbed;u(p),e.redrawHint("drag",!0),e.redrawHint("eles",!0),g&&(_.emit("freeon"),p.emit("free"),e.dragData.didDrag&&(_.emit("dragfreeon"),p.emit("dragfree"))),n(_,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]}),_.unactivate(),e.touchData.start=null}else{var v=e.findNearestElement(s[0],s[1],!0,!0);n(v,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]})}var m=e.touchData.startPosition[0]-s[0],y=m*m,w=e.touchData.startPosition[1]-s[1],b=(y+w*w)*l*l;e.touchData.singleTouchMoved||(_||o.$(":selected").unselect(["tapunselect"]),n(_,["tap","vclick"],t,{x:s[0],y:s[1]}),q=!1,t.timeStamp-U<=o.multiClickDebounceTime()?(V&&clearTimeout(V),q=!0,U=null,n(_,["dbltap","vdblclick"],t,{x:s[0],y:s[1]})):(V=setTimeout((function(){q||n(_,["onetap","voneclick"],t,{x:s[0],y:s[1]})}),o.multiClickDebounceTime()),U=t.timeStamp)),null!=_&&!e.dragData.didDrag&&_._private.selectable&&b<e.touchTapThreshold2&&!e.pinching&&("single"===o.selectionType()?(o.$(r).unmerge(_).unselect(["tapunselect"]),_.select(["tapselect"])):_.selected()?_.unselect(["tapunselect"]):_.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var k=0;k<s.length;k++)c[k]=s[k];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var $=[],Y=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},H=function(e){$.push(function(e){return{event:e,touch:Y(e)}}(e))},X=function(e){for(var t=0;t<$.length;t++){if($[t].event.pointerId===e.pointerId)return void $.splice(t,1)}},Z=function(e){e.touches=$.map((function(e){return e.touch}))},K=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",(function(e){K(e)||(e.preventDefault(),H(e),Z(e),D(e))})),e.registerBinding(e.container,"pointerup",(function(e){K(e)||(X(e),Z(e),z(e))})),e.registerBinding(e.container,"pointercancel",(function(e){K(e)||(X(e),Z(e),B())})),e.registerBinding(e.container,"pointermove",(function(e){K(e)||(e.preventDefault(),function(e){var t=$.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=Y(e)}(e),Z(e),F(e))}))}};var sA={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl("polygon",e,t,r,n,_,this.points)},intersectLine:function(e,t,r,n,_,a,i,o){return Wm(_,a,this.points,e,t,r/2,n/2,i)},checkPoint:function(e,t,r,n,_,a,i,o){return Fm(e,t,this.points,a,i,n,_,[0,-1],r)}}}};sA.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,_)},intersectLine:function(e,t,r,n,_,a,i,o){return function(e,t,r,n,_,a){var i=r-e,o=n-t;i/=_,o/=a;var l=Math.sqrt(i*i+o*o),s=l-1;if(s<0)return[];var c=s/l;return[(r-e)*c+e,(n-t)*c+t]}(_,a,e,t,r/2+i,n/2+i)},checkPoint:function(e,t,r,n,_,a,i,o){return qm(e,t,n,_,a,i,r)}}},sA.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(e,r,n,_,a,i,o){if(void 0!==i[o]&&i[o+"-cx"]===e&&i[o+"-cy"]===r)return i[o];i[o]=new Array(t.length/2),i[o+"-cx"]=e,i[o+"-cy"]=r;var l=n/2,s=_/2;a="auto"===a?Km(n,_):a;for(var c=new Array(t.length/2),u=0;u<t.length/2;u++)c[u]={x:e+l*t[2*u],y:r+s*t[2*u+1]};var f,d,h,p,g=c.length;for(d=c[g-1],f=0;f<g;f++)h=c[f%g],p=c[(f+1)%g],i[o][f]=YE(d,h,p,a),d=h,h=p;return i[o]},draw:function(e,t,r,n,_,a,i){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,_,this.points,this.getOrCreateCorners(t,r,n,_,a,i,"drawCorners"))},intersectLine:function(e,t,r,n,_,a,i,o,l){return function(e,t,r,n,_,a,i,o,l){var s,c=[],u=new Array(2*r.length);l.forEach((function(r,a){0===a?(u[u.length-2]=r.startX,u[u.length-1]=r.startY):(u[4*a-2]=r.startX,u[4*a-1]=r.startY),u[4*a]=r.stopX,u[4*a+1]=r.stopY,0!==(s=Vm(e,t,n,_,r.cx,r.cy,r.radius)).length&&c.push(s[0],s[1])}));for(var f=0;f<u.length/4;f++)0!==(s=Gm(e,t,n,_,u[4*f],u[4*f+1],u[4*f+2],u[4*f+3],!1)).length&&c.push(s[0],s[1]);if(c.length>2){for(var d=[c[0],c[1]],h=Math.pow(d[0]-e,2)+Math.pow(d[1]-t,2),p=1;p<c.length/2;p++){var g=Math.pow(c[2*p]-e,2)+Math.pow(c[2*p+1]-t,2);g<=h&&(d[0]=c[2*p],d[1]=c[2*p+1],h=g)}return d}return c}(_,a,this.points,e,t,0,0,0,this.getOrCreateCorners(e,t,r,n,o,l,"corners"))},checkPoint:function(e,t,r,n,_,a,i,o,l){return function(e,t,r,n,_,a,i,o){for(var l=new Array(2*r.length),s=0;s<o.length;s++){var c=o[s];if(l[4*s+0]=c.startX,l[4*s+1]=c.startY,l[4*s+2]=c.stopX,l[4*s+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return Dm(e,t,l)}(e,t,this.points,0,0,0,0,this.getOrCreateCorners(a,i,n,_,o,l,"corners"))}}},sA.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ym(4,0),draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,_,this.points,a)},intersectLine:function(e,t,r,n,_,a,i,o){return Lm(_,a,e,t,r,n,i,o)},checkPoint:function(e,t,r,n,_,a,i,o){var l=n/2,s=_/2;o="auto"===o?Zm(n,_):o;var c=2*(o=Math.min(l,s,o));return!!Fm(e,t,this.points,a,i,n,_-c,[0,-1],r)||(!!Fm(e,t,this.points,a,i,n-c,_,[0,-1],r)||(!!qm(e,t,c,c,a-l+o,i-s+o,r)||(!!qm(e,t,c,c,a+l-o,i-s+o,r)||(!!qm(e,t,c,c,a+l-o,i+s-o,r)||!!qm(e,t,c,c,a-l+o,i+s-o,r)))))}}},sA.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ym(4,0),draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,_,null,a)},generateCutTrianglePts:function(e,t,r,n,_){var a="auto"===_?this.cornerLength:_,i=t/2,o=e/2,l=r-o,s=r+o,c=n-i,u=n+i;return{topLeft:[l,c+a,l+a,c,l+a,c+a],topRight:[s-a,c,s,c+a,s-a,c+a],bottomRight:[s,u-a,s-a,u,s-a,u-a],bottomLeft:[l+a,u,l,u-a,l+a,u-a]}},intersectLine:function(e,t,r,n,_,a,i,o){var l=this.generateCutTrianglePts(r+2*i,n+2*i,e,t,o),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Wm(_,a,s,e,t)},checkPoint:function(e,t,r,n,_,a,i,o){var l="auto"===o?this.cornerLength:o;if(Fm(e,t,this.points,a,i,n,_-2*l,[0,-1],r))return!0;if(Fm(e,t,this.points,a,i,n-2*l,_,[0,-1],r))return!0;var s=this.generateCutTrianglePts(n,_,a,i);return Dm(e,t,s.topLeft)||Dm(e,t,s.topRight)||Dm(e,t,s.bottomRight)||Dm(e,t,s.bottomLeft)}}},sA.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ym(4,0),draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,_)},intersectLine:function(e,t,r,n,_,a,i,o){var l=this.generateBarrelBezierPts(r+2*i,n+2*i,e,t),s=function(e){var t=bm({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=bm({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=bm({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]},c=[].concat(s(l.topLeft),s(l.topRight),s(l.bottomRight),s(l.bottomLeft));return Wm(_,a,c,e,t)},generateBarrelBezierPts:function(e,t,r,n){var _=t/2,a=e/2,i=r-a,o=r+a,l=n-_,s=n+_,c=Jm(e,t),u=c.heightOffset,f=c.widthOffset,d=c.ctrlPtOffsetPct*e,h={topLeft:[i,l+u,i+d,l,i+f,l],topRight:[o-f,l,o-d,l,o,l+u],bottomRight:[o,s-u,o-d,s,o-f,s],bottomLeft:[i+f,s,i+d,s,i,s-u]};return h.topLeft.isTop=!0,h.topRight.isTop=!0,h.bottomLeft.isBottom=!0,h.bottomRight.isBottom=!0,h},checkPoint:function(e,t,r,n,_,a,i,o){var l=Jm(n,_),s=l.heightOffset,c=l.widthOffset;if(Fm(e,t,this.points,a,i,n,_-2*s,[0,-1],r))return!0;if(Fm(e,t,this.points,a,i,n-2*c,_,[0,-1],r))return!0;for(var u=this.generateBarrelBezierPts(n,_,a,i),f=function(e,t,r){var n,_,a=r[4],i=r[2],o=r[0],l=r[5],s=r[1],c=Math.min(a,o),u=Math.max(a,o),f=Math.min(l,s),d=Math.max(l,s);if(c<=e&&e<=u&&f<=t&&t<=d){var h=[(n=a)-2*(_=i)+o,2*(_-n),n],p=function(e,t,r,n){var _=t*t-4*e*(r-=n);if(_<0)return[];var a=Math.sqrt(_),i=2*e;return[(-t+a)/i,(-t-a)/i]}(h[0],h[1],h[2],e).filter((function(e){return 0<=e&&e<=1}));if(p.length>0)return p[0]}return null},d=Object.keys(u),h=0;h<d.length;h++){var p=u[d[h]],g=f(e,t,p);if(null!=g){var v=p[5],m=p[3],y=p[1],w=wm(v,m,y,g);if(p.isTop&&w<=t)return!0;if(p.isBottom&&t<=w)return!0}}return!1}}},sA.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ym(4,0),draw:function(e,t,r,n,_,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,_,this.points,a)},intersectLine:function(e,t,r,n,_,a,i,o){var l=t-(n/2+i),s=Gm(_,a,e,t,e-(r/2+i),l,e+(r/2+i),l,!1);return s.length>0?s:Lm(_,a,e,t,r,n,i,o)},checkPoint:function(e,t,r,n,_,a,i,o){var l=2*(o="auto"===o?Zm(n,_):o);if(Fm(e,t,this.points,a,i,n,_-l,[0,-1],r))return!0;if(Fm(e,t,this.points,a,i,n-l,_,[0,-1],r))return!0;var s=n/2+2*r,c=_/2+2*r;return!!Dm(e,t,[a-s,i-c,a-s,i,a+s,i,a+s,i-c])||(!!qm(e,t,l,l,a+n/2-o,i+_/2-o,r)||!!qm(e,t,l,l,a-n/2+o,i+_/2-o,r))}}},sA.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Ym(3,0)),this.generateRoundPolygon("round-triangle",Ym(3,0)),this.generatePolygon("rectangle",Ym(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",Ym(5,0)),this.generateRoundPolygon("round-pentagon",Ym(5,0)),this.generatePolygon("hexagon",Ym(6,0)),this.generateRoundPolygon("round-hexagon",Ym(6,0)),this.generatePolygon("heptagon",Ym(7,0)),this.generateRoundPolygon("round-heptagon",Ym(7,0)),this.generatePolygon("octagon",Ym(8,0)),this.generateRoundPolygon("round-octagon",Ym(8,0));var n=new Array(20),_=Xm(5,0),a=Xm(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var o=0;o<a.length/2;o++)a[2*o]*=i,a[2*o+1]*=i;for(o=0;o<5;o++)n[4*o]=_[2*o],n[4*o+1]=_[2*o+1],n[4*o+2]=a[2*o],n[4*o+3]=a[2*o+1];n=Hm(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}};var cA={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Mv();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Av("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},uA=function(e,t,r){for(var n=e.beforeRenderCallbacks,_=0;_<n.length;_++)n[_].fn(t,r)};cA.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(n){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){uA(e,!0,n);var _=lv();e.render(e.renderOptions);var a=e.lastDrawTime=lv();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-_),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var i=a-_;e.redrawTotalTime+=i,e.lastRedrawTime=i,e.averageRedrawTime=e.averageRedrawTime/2+i/2,e.requestedFrame=!1}else uA(e,!1,n);e.skipFrame=!1,ov(r)}};ov(r)}};var fA=function(e){this.init(e)},dA=fA.prototype;dA.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],dA.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),n=t.cy.window();if(n){var _=n.document,a=_.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",l=null!=_.getElementById(i);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var s=_.createElement("style");s.id=i,s.textContent="."+o+" { position: relative; }",a.insertBefore(s,a.children[0])}"static"===n.getComputedStyle(r).getPropertyValue("position")&&Sv("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Pg(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},dA.notify=function(e,t){var r=this,n=r.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&n.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"gc"===e&&r.redrawHint("gc",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},dA.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},dA.isHeadless=function(){return!1},[kE,iA,oA,lA,sA,cA].forEach((function(e){Gg(dA,e)}));var hA=1e3/60,pA=function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=nv((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),_=e.priority||Ev;r.beforeRender((function(_,a){var i=lv(),o=r.averageRedrawTime,l=r.lastRedrawTime,s=[],c=r.cy.extent(),u=r.getPixelRatio();for(_||r.flushRenderedStyleQueue();;){var f=lv(),d=f-i,h=f-a;if(l<hA){var p=hA-(_?o:0);if(h>=e.deqFastCost*p)break}else if(_){if(d>=e.deqCost*l||d>=e.deqAvgCost*o)break}else if(h>=e.deqNoDrawCost*hA)break;var g=e.deq(t,u,c);if(!(g.length>0))break;for(var v=0;v<g.length;v++)s.push(g[v])}s.length>0&&(e.onDeqd(t,s),!_&&e.shouldRedraw(t,s,u,c)&&n())}),_(t))}}},gA=function(){return Np((function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pv;Tp(this,e),this.idsByKey=new Bv,this.keyForId=new Bv,this.cachesByLvl=new Bv,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}),[{key:"getIdsFor",value:function(e){null==e&&Av("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new qv,t.set(e,r)),r}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new Bv,t.set(e,n),r.push(e)),n}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}},{key:"getForCachedKey",value:function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}},{key:"setCache",value:function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}},{key:"set",value:function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}},{key:"invalidate",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}}])}(),vA=7.99,mA={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},yA=Iv({getKey:null,doesEleInvalidateKey:Pv,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:xv,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),wA=function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var n=yA(t);Gg(r,n),r.lookup=new gA(n.getKey,n.doesEleInvalidateKey),r.setupDequeueing()},bA=wA.prototype;bA.reasons=mA,bA.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},bA.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},bA.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Kv((function(e,t){return t.reqs-e.reqs}))},bA.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},bA.getElement=function(e,t,r,n,_){var a=this,i=this.renderer,o=i.cy.zoom(),l=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(pm(o*r))),n<-4)n=-4;else if(o>=7.99||n>3)return null;var s=Math.pow(2,n),c=t.h*s,u=t.w*s,f=i.eleTextBiggerThanMin(e,s);if(!this.isVisible(e,f))return null;var d,h=l.get(e,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;if(d=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||u>1024)return null;var p=a.getTextureQueue(d),g=p[p.length-2],v=function(){return a.recycleTexture(d,u)||a.addTexture(d,u)};g||(g=p[p.length-1]),g||(g=v()),g.width-g.usedWidth<u&&(g=v());for(var m,y=function(e){return e&&e.scaledLabelShown===f},w=_&&_===mA.dequeue,b=_&&_===mA.highQuality,k=_&&_===mA.downscale,x=n+1;x<=3;x++){var P=l.get(e,x);if(P){m=P;break}}var O=m&&m.level===n+1?m:null,E=function(){g.context.drawImage(O.texture.canvas,O.x,0,O.width,O.height,g.usedWidth,0,u,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,u,d),y(O))E();else if(y(m)){if(!b)return a.queueElement(e,m.level-1),m;for(var A=m.level;A>n;A--)O=a.getElement(e,t,r,A,mA.downscale);E()}else{var C;if(!w&&!b&&!k)for(var S=n-1;S>=-4;S--){var T=l.get(e,S);if(T){C=T;break}}if(y(C))return a.queueElement(e,n),C;g.context.translate(g.usedWidth,0),g.context.scale(s,s),this.drawElement(g.context,e,t,f,!1),g.context.scale(1/s,1/s),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:n,scale:s,width:u,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(u+8),g.eleCaches.push(h),l.set(e,n,h),a.checkTextureFullness(g),h},bA.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},bA.invalidateElement=function(e){var t=this,r=t.lookup,n=[];if(r.isInvalid(e)){for(var _=-4;_<=3;_++){var a=r.getForCachedKey(e,_);a&&n.push(a)}if(r.invalidate(e))for(var i=0;i<n.length;i++){var o=n[i],l=o.texture;l.invalidatedWidth+=o.width,o.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},bA.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},bA.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?jv(t,e):e.fullnessChecks++},bA.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;jv(r,e),e.retired=!0;for(var _=e.eleCaches,a=0;a<_.length;a++){var i=_[a];n.deleteCache(i.key,i.level)}Rv(_),this.getRetiredTextureQueue(t).push(e)},bA.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},bA.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),_=0;_<n.length;_++){var a=n[_];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Rv(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),jv(n,a),r.push(a),a}},bA.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),_=this.getKey(e),a=n[_];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var i={eles:e.spawn().merge(e),level:t,reqs:1,key:_};r.push(i),n[_]=i}},bA.dequeue=function(e){for(var t=this,r=t.getElementQueue(),n=t.getElementKeyToQueue(),_=[],a=t.lookup,i=0;i<1&&r.size()>0;i++){var o=r.pop(),l=o.key,s=o.eles[0],c=a.hasCache(s,o.level);if(n[l]=null,!c){_.push(o);var u=t.getBoundingBox(s);t.getElement(s,u,e,o.level,mA.dequeue)}}return _},bA.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),_=r[n];null!=_&&(1===_.eles.length?(_.reqs=kv,t.updateItem(_),t.pop(),r[n]=null):_.eles.unmerge(e))},bA.onDequeue=function(e){this.onDequeues.push(e)},bA.offDequeue=function(e){jv(this.onDequeues,e)},bA.setupDequeueing=pA({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}},shouldRedraw:function(e,t,r,n){for(var _=0;_<t.length;_++)for(var a=t[_].eles,i=0;i<a.length;i++){var o=a[i].boundingBox();if(Sm(o,n))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var kA=function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=lv()-500,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=nv((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),50),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new Kv((function(e,t){return t.reqs-e.reqs})),t.setupDequeueing()},xA=kA.prototype,PA=0,OA=Math.pow(2,53)-1;xA.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),_=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(n,_),i={id:PA=++PA%OA,bb:e,level:t,width:n,height:_,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=i.context,l=-i.bb.x1,s=-i.bb.y1;return o.scale(r,r),o.translate(l,s),i},xA.getLayers=function(e,t,r){var n=this,_=n.renderer.cy.zoom(),a=n.firstGet;if(n.firstGet=!1,null==r)if((r=Math.ceil(pm(_*t)))<-4)r=-4;else if(_>=3.99||r>2)return null;n.validateLayersElesOrdering(r,e);var i,o,l=n.layersByLevel,s=Math.pow(2,r),c=l[r]=l[r]||[];if(n.levelIsComplete(r,e))return c;!function(){var t=function(t){if(n.validateLayersElesOrdering(t,e),n.levelIsComplete(t,e))return o=l[t],!0},_=function(e){if(!o)for(var n=r+e;-4<=n&&n<=2&&!t(n);n+=e);};_(1),_(-1);for(var a=c.length-1;a>=0;a--){var i=c[a];i.invalid&&jv(c,i)}}();var u=function(t){var _=(t=t||{}).after;!function(){if(!i){i=xm();for(var t=0;t<e.length;t++)Pm(i,e[t].boundingBox())}}();var a=Math.ceil(i.w*s),o=Math.ceil(i.h*s);if(a>32767||o>32767)return null;if(a*o>16e6)return null;var l=n.makeLayer(i,r);if(null!=_){var u=c.indexOf(_)+1;c.splice(u,0,l)}else(void 0===t.insert||t.insert)&&c.unshift(l);return l};if(n.skipping&&!a)return null;for(var f=null,d=e.length/1,h=!a,p=0;p<e.length;p++){var g=e[p],v=g._private.rscratch,m=v.imgLayerCaches=v.imgLayerCaches||{},y=m[r];if(y)f=y;else{if((!f||f.eles.length>=d||!Nm(f.bb,g.boundingBox()))&&!(f=u({insert:!0,after:f})))return null;o||h?n.queueLayer(f,g):n.drawEleInLayer(f,g,r,t),f.eles.push(g),m[r]=f}}return o||(h?null:c)},xA.getEleLevelForLayerLevel=function(e,t){return e},xA.drawEleInLayer=function(e,t,r,n){var _=this.renderer,a=e.context,i=t.boundingBox();0!==i.w&&0!==i.h&&t.visible()&&(r=this.getEleLevelForLayerLevel(r,n),_.setImgSmoothing(a,!1),_.drawCachedElement(a,t,null,null,r,true),_.setImgSmoothing(a,!0))},xA.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,_=0;_<r.length;_++){var a=r[_];if(a.reqs>0)return!1;if(a.invalid)return!1;n+=a.eles.length}return n===t.length},xA.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var _=r[n],a=-1,i=0;i<t.length;i++)if(_.eles[0]===t[i]){a=i;break}if(a<0)this.invalidateLayer(_);else{var o=a;for(i=0;i<_.eles.length;i++)if(_.eles[i]!==t[o+i]){this.invalidateLayer(_);break}}}},xA.updateElementsInLayers=function(e,t){for(var r=Ag(e[0]),n=0;n<e.length;n++)for(var _=r?null:e[n],a=r?e[n]:e[n].ele,i=a._private.rscratch,o=i.imgLayerCaches=i.imgLayerCaches||{},l=-4;l<=2;l++){var s=o[l];s&&(_&&this.getEleLevelForLayerLevel(s.level)!==_.level||t(s,a,_))}},xA.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},xA.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=lv(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,(function(e,r,n){t.invalidateLayer(e)})))},xA.invalidateLayer=function(e){if(this.lastInvalidationTime=lv(),!e.invalid){var t=e.level,r=e.eles,n=this.layersByLevel[t];jv(n,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var _=0;_<r.length;_++){var a=r[_]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},xA.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,(function(e,r,n){var _=e.replacement;if(_||((_=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,_.eles=e.eles),!_.reqs)for(var a=0;a<_.eles.length;a++)t.queueLayer(_,_.eles[a])}))},xA.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},xA.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,_=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(_[t.id()])return;n.push(t),_[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},xA.dequeue=function(e){for(var t=this,r=t.layersQueue,n=[],_=0;_<1&&0!==r.size();){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var i=a.elesQueue.shift();i&&(t.drawEleInLayer(a,i,a.level,e),_++),0===n.length&&n.push(!0),0===a.elesQueue.length&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}}return n},xA.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0||r.invalid)){t[n]=e;for(var _=0;_<e.eles.length;_++){var a=e.eles[_]._private,i=a.imgLayerCaches=a.imgLayerCaches||{};i&&(i[e.level]=e)}this.requestRedraw()}},xA.requestRedraw=nv((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),xA.setupDequeueing=pA({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:Ev,shouldRedraw:xv,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var EA,AA={};function CA(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function SA(e,t,r){for(var n,_=0;_<t.length;_++){var a=t[_];0===_&&(n=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function TA(e,t,r){e.beginPath&&e.beginPath();for(var n=t,_=0;_<n.length;_++){var a=n[_];e.lineTo(a.x,a.y)}var i=r,o=r[0];e.moveTo(o.x,o.y);for(_=1;_<i.length;_++){a=i[_];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function NA(e,t,r,n,_){e.beginPath&&e.beginPath(),e.arc(r,n,_,0,2*Math.PI,!1);var a=t,i=a[0];e.moveTo(i.x,i.y);for(var o=0;o<a.length;o++){var l=a[o];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function LA(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}AA.arrowShapeImpl=function(e){return(EA||(EA={polygon:CA,"triangle-backcurve":SA,"triangle-tee":TA,"circle-triangle":NA,"triangle-cross":TA,circle:LA}))[e]};var MA={drawElement:function(e,t,r,n,_,a){t.isNode()?this.drawNode(e,t,r,n,_,a):this.drawEdge(e,t,r,n,_,a)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,n,_,a,i,o){var l=this,s=r.getBoundingBox(t);if(0!==s.w&&0!==s.h){var c=r.getElement(t,s,n,_,a);if(null!=c){var u=o(l,t);if(0===u)return;var f,d,h,p,g,v,m=i(l,t),y=s.x1,w=s.y1,b=s.w,k=s.h;if(0!==m){var x=r.getRotationPoint(t);h=x.x,p=x.y,e.translate(h,p),e.rotate(m),(g=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var P=r.getRotationOffset(t);f=P.x,d=P.y}else f=y,d=w;1!==u&&(v=e.globalAlpha,e.globalAlpha=v*u),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,f,d,b,k),1!==u&&(e.globalAlpha=v),0!==m&&(e.rotate(-m),e.translate(-h,-p),g||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},IA=function(){return 0},jA=function(e,t){return e.getTextAngle(t,null)},RA=function(e,t){return e.getTextAngle(t,"source")},DA=function(e,t){return e.getTextAngle(t,"target")},FA=function(e,t){return t.effectiveOpacity()},BA=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};MA.drawCachedElement=function(e,t,r,n,_,a){var i=this,o=i.data,l=o.eleTxrCache,s=o.lblTxrCache,c=o.slbTxrCache,u=o.tlbTxrCache,f=t.boundingBox(),d=!0===a?l.reasons.highQuality:null;if(0!==f.w&&0!==f.h&&t.visible()&&(!n||Sm(f,n))){var h=t.isEdge(),p=t.element()._private.rscratch.badLine;i.drawElementUnderlay(e,t),i.drawCachedElementPortion(e,t,l,r,_,d,IA,FA),h&&p||i.drawCachedElementPortion(e,t,s,r,_,d,jA,BA),h&&!p&&(i.drawCachedElementPortion(e,t,c,r,_,d,RA,BA),i.drawCachedElementPortion(e,t,u,r,_,d,DA,BA)),i.drawElementOverlay(e,t)}},MA.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},MA.drawCachedElements=function(e,t,r,n){for(var _=0;_<t.length;_++){var a=t[_];this.drawCachedElement(e,a,r,n)}},MA.drawCachedNodes=function(e,t,r,n){for(var _=0;_<t.length;_++){var a=t[_];a.isNode()&&this.drawCachedElement(e,a,r,n)}},MA.drawLayeredElements=function(e,t,r,n){var _=this.data.lyrTxrCache.getLayers(t,r);if(_)for(var a=0;a<_.length;a++){var i=_[a],o=i.bb;0!==o.w&&0!==o.h&&e.drawImage(i.canvas,o.x1,o.y1,o.w,o.h)}else this.drawCachedElements(e,t,r,n)};var zA={drawEdge:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=this,o=t._private.rscratch;if((!a||t.visible())&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var s=a?t.pstyle("opacity").value:1,c=a?t.pstyle("line-opacity").value:1,u=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,d=t.pstyle("width").pfValue,h=t.pstyle("line-cap").value,p=t.pstyle("line-outline-width").value,g=t.pstyle("line-outline-color").value,v=s*c,m=s*c,y=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;"straight-triangle"===u?(i.eleStrokeStyle(e,t,r),i.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=d,e.lineCap=h,i.eleStrokeStyle(e,t,r),i.drawEdgePath(t,e,o.allpts,f),e.lineCap="butt")},w=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;i.drawArrowheads(e,t,r)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var b=t.pstyle("ghost-offset-x").pfValue,k=t.pstyle("ghost-offset-y").pfValue,x=t.pstyle("ghost-opacity").value,P=v*x;e.translate(b,k),y(P),w(P),e.translate(-b,-k)}else!function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;e.lineWidth=d+p,e.lineCap=h,p>0?(i.colorStrokeStyle(e,g[0],g[1],g[2],r),"straight-triangle"===u?i.drawEdgeTrianglePath(t,e,o.allpts):(i.drawEdgePath(t,e,o.allpts,f),e.lineCap="butt")):e.lineCap="butt"}();_&&i.drawEdgeUnderlay(e,t),y(),w(),_&&i.drawEdgeOverlay(e,t),i.drawElementText(e,t,null,n),r&&e.translate(l.x1,l.y1)}}},qA=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var n=r.pstyle("".concat(e,"-opacity")).value;if(0!==n){var _=this,a=_.usePaths(),i=r._private.rscratch,o=2*r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-color")).value;t.lineWidth=o,"self"!==i.edgeType||a?t.lineCap="round":t.lineCap="butt",_.colorStrokeStyle(t,l[0],l[1],l[2],n),_.drawEdgePath(r,t,i.allpts,"solid")}}}};zA.drawEdgeOverlay=qA("overlay"),zA.drawEdgeUnderlay=qA("underlay"),zA.drawEdgePath=function(e,t,r,n){var _,a=e._private.rscratch,i=t,o=!1,l=this.usePaths(),s=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var u=r.join("$");a.pathCacheKey&&a.pathCacheKey===u?(_=t=a.pathCache,o=!0):(_=t=new Path2D,a.pathCacheKey=u,a.pathCache=_)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(s),i.lineDashOffset=c;break;case"solid":i.setLineDash([])}if(!o&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<r.length;f+=4)t.quadraticCurveTo(r[f],r[f+1],r[f+2],r[f+3]);break;case"straight":case"haystack":for(var d=2;d+1<r.length;d+=2)t.lineTo(r[d],r[d+1]);break;case"segments":if(a.isRound){var h,p=Lp(a.roundCorners);try{for(p.s();!(h=p.n()).done;){$E(t,h.value)}}catch(e){p.e(e)}finally{p.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var g=2;g+1<r.length;g+=2)t.lineTo(r[g],r[g+1])}t=i,l?t.stroke(_):t.stroke(),t.setLineDash&&t.setLineDash([])},zA.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,_=0;_+1<r.length;_+=2){var a=[r[_+2]-r[_],r[_+3]-r[_+1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=[a[1]/i,-a[0]/i],l=[o[0]*n/2,o[1]*n/2];t.beginPath(),t.moveTo(r[_]-l[0],r[_+1]-l[1]),t.lineTo(r[_]+l[0],r[_+1]+l[1]),t.lineTo(r[_+2],r[_+3]),t.closePath(),t.fill()}},zA.drawArrowheads=function(e,t,r){var n=t._private.rscratch,_="haystack"===n.edgeType;_||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),_||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},zA.drawArrowhead=function(e,t,r,n,_,a,i){if(!(isNaN(n)||null==n||isNaN(_)||null==_||isNaN(a)||null==a)){var o=this,l=t.pstyle(r+"-arrow-shape").value;if("none"!==l){var s="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",c=t.pstyle(r+"-arrow-fill").value,u=t.pstyle("width").pfValue,f=t.pstyle(r+"-arrow-width"),d="match-line"===f.value?u:f.pfValue;"%"===f.units&&(d*=u);var h=t.pstyle("opacity").value;void 0===i&&(i=h);var p=e.globalCompositeOperation;1===i&&"hollow"!==c||(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,s,u,l,d,n,_,a),e.globalCompositeOperation=p);var g=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,g[0],g[1],g[2],i),o.colorStrokeStyle(e,g[0],g[1],g[2],i),o.drawArrowShape(t,e,c,u,l,d,n,_,a)}}},zA.drawArrowShape=function(e,t,r,n,_,a,i,o,l){var s,c=this,u=this.usePaths()&&"triangle-cross"!==_,f=!1,d=t,h={x:i,y:o},p=e.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),v=c.arrowShapes[_];if(u){var m=c.arrowPathCache=c.arrowPathCache||[],y=gv(_),w=m[y];null!=w?(s=t=w,f=!0):(s=t=new Path2D,m[y]=s)}f||(t.beginPath&&t.beginPath(),u?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,g,l,h,n),t.closePath&&t.closePath()),t=d,u&&(t.translate(i,o),t.rotate(l),t.scale(g,g)),"filled"!==r&&"both"!==r||(u?t.fill(s):t.fill()),"hollow"!==r&&"both"!==r||(t.lineWidth=a/(u?g:1),t.lineJoin="miter",u?t.stroke(s):t.stroke()),u&&(t.scale(1/g,1/g),t.rotate(-l),t.translate(-i,-o))};var VA={safeDrawImage:function(e,t,r,n,_,a,i,o,l,s){if(!(_<=0||a<=0||l<=0||s<=0))try{e.drawImage(t,r,n,_,a,i,o,l,s)}catch(e){Sv(e)}},drawInscribedImage:function(e,t,r,n,_){var a=this,i=r.position(),o=i.x,l=i.y,s=r.cy().style(),c=s.getIndexedStyle.bind(s),u=c(r,"background-fit","value",n),f=c(r,"background-repeat","value",n),d=r.width(),h=r.height(),p=2*r.padding(),g=d+("inner"===c(r,"background-width-relative-to","value",n)?0:p),v=h+("inner"===c(r,"background-height-relative-to","value",n)?0:p),m=r._private.rscratch,y="node"===c(r,"background-clip","value",n),w=c(r,"background-image-opacity","value",n)*_,b=c(r,"background-image-smoothing","value",n),k=r.pstyle("corner-radius").value;"auto"!==k&&(k=r.pstyle("corner-radius").pfValue);var x=t.width||t.cachedW,P=t.height||t.cachedH;null!=x&&null!=P||(document.body.appendChild(t),x=t.cachedW=t.width||t.offsetWidth,P=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var O=x,E=P;if("auto"!==c(r,"background-width","value",n)&&(O="%"===c(r,"background-width","units",n)?c(r,"background-width","pfValue",n)*g:c(r,"background-width","pfValue",n)),"auto"!==c(r,"background-height","value",n)&&(E="%"===c(r,"background-height","units",n)?c(r,"background-height","pfValue",n)*v:c(r,"background-height","pfValue",n)),0!==O&&0!==E){if("contain"===u)O*=A=Math.min(g/O,v/E),E*=A;else if("cover"===u){var A;O*=A=Math.max(g/O,v/E),E*=A}var C=o-g/2,S=c(r,"background-position-x","units",n),T=c(r,"background-position-x","pfValue",n);C+="%"===S?(g-O)*T:T;var N=c(r,"background-offset-x","units",n),L=c(r,"background-offset-x","pfValue",n);C+="%"===N?(g-O)*L:L;var M=l-v/2,I=c(r,"background-position-y","units",n),j=c(r,"background-position-y","pfValue",n);M+="%"===I?(v-E)*j:j;var R=c(r,"background-offset-y","units",n),D=c(r,"background-offset-y","pfValue",n);M+="%"===R?(v-E)*D:D,m.pathCache&&(C-=o,M-=l,o=0,l=0);var F=e.globalAlpha;e.globalAlpha=w;var B=a.getImgSmoothing(e),z=!1;if("no"===b&&B?(a.setImgSmoothing(e,!1),z=!0):"yes"!==b||B||(a.setImgSmoothing(e,!0),z=!0),"no-repeat"===f)y&&(e.save(),m.pathCache?e.clip(m.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,g,v,k,m),e.clip())),a.safeDrawImage(e,t,0,0,x,P,C,M,O,E),y&&e.restore();else{var q=e.createPattern(t,f);e.fillStyle=q,a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,g,v,k,m),e.translate(C,M),e.fill(),e.translate(-C,-M)}e.globalAlpha=F,z&&a.setImgSmoothing(e,B)}}},UA={};function GA(e,t,r,n,_){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,i=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+_-a),e.quadraticCurveTo(t+n,r+_,t+n-a,r+_),e.lineTo(t+a,r+_),e.quadraticCurveTo(t,r+_,t,r+_-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),i?e.stroke():e.fill()}UA.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),n=this.getPixelRatio(),_=Math.ceil(pm(r*n));t=Math.pow(2,_)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},UA.drawElementText=function(e,t,r,n,_){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=this;if(null==n){if(a&&!i.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var l=i.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var s=t.element()._private.rscratch.badLine,c=t.pstyle("label"),u=t.pstyle("source-label"),f=t.pstyle("target-label");if(s||(!c||!c.value)&&(!u||!u.value)&&(!f||!f.value))return;e.textAlign="center",e.textBaseline="bottom"}var d,h=!r;r&&(d=r,e.translate(-d.x1,-d.y1)),null==_?(i.drawText(e,t,null,h,a),t.isEdge()&&(i.drawText(e,t,"source",h,a),i.drawText(e,t,"target",h,a))):i.drawText(e,t,_,h,a),r&&e.translate(d.x1,d.y1)},UA.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},UA.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t.pstyle("font-style").strValue,_=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,i=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*o,s=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+i+" "+_+" "+a,e.lineJoin="round",this.colorFillStyle(e,s[0],s[1],s[2],o),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},UA.getTextAngle=function(e,t){var r,n=e._private.rscratch,_=t?t+"-":"",a=e.pstyle(_+"text-rotation");if("autorotate"===a.strValue){var i=Dv(n,"labelAngle",t);r=e.isEdge()?i:0}else r="none"===a.strValue?0:a.pfValue;return r},UA.drawText=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t._private.rscratch,i=_?t.effectiveOpacity():1;if(!_||0!==i&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var o,l,s=Dv(a,"labelX",r),c=Dv(a,"labelY",r),u=this.getLabelText(t,r);if(null!=u&&""!==u&&!isNaN(s)&&!isNaN(c)){this.setupTextStyle(e,t,_);var f,d=r?r+"-":"",h=Dv(a,"labelWidth",r),p=Dv(a,"labelHeight",r),g=t.pstyle(d+"text-margin-x").pfValue,v=t.pstyle(d+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;switch(m&&(y="center",w="center"),s+=g,c+=v,0!==(f=n?this.getTextAngle(t,r):0)&&(o=s,l=c,e.translate(o,l),e.rotate(f),s=0,c=0),w){case"top":break;case"center":c+=p/2;break;case"bottom":c+=p}var b=t.pstyle("text-background-opacity").value,k=t.pstyle("text-border-opacity").value,x=t.pstyle("text-border-width").pfValue,P=t.pstyle("text-background-padding").pfValue,O=0===t.pstyle("text-background-shape").strValue.indexOf("round");if(b>0||x>0&&k>0){var E=s-P;switch(y){case"left":E-=h;break;case"center":E-=h/2}var A=c-p-P,C=h+2*P,S=p+2*P;if(b>0){var T=e.fillStyle,N=t.pstyle("text-background-color").value;e.fillStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+b*i+")",O?GA(e,E,A,C,S,2):e.fillRect(E,A,C,S),e.fillStyle=T}if(x>0&&k>0){var L=e.strokeStyle,M=e.lineWidth,I=t.pstyle("text-border-color").value,j=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+I[0]+","+I[1]+","+I[2]+","+k*i+")",e.lineWidth=x,e.setLineDash)switch(j){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=x/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(O?GA(e,E,A,C,S,2,"stroke"):e.strokeRect(E,A,C,S),"double"===j){var R=x/2;O?GA(e,E+R,A+R,C-2*R,S-2*R,2,"stroke"):e.strokeRect(E+R,A+R,C-2*R,S-2*R)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=L}}var D=2*t.pstyle("text-outline-width").pfValue;if(D>0&&(e.lineWidth=D),"wrap"===t.pstyle("text-wrap").value){var F=Dv(a,"labelWrapCachedLines",r),B=Dv(a,"labelLineHeight",r),z=h/2,q=this.getLabelJustification(t);switch("auto"===q||("left"===y?"left"===q?s+=-h:"center"===q&&(s+=-z):"center"===y?"left"===q?s+=-z:"right"===q&&(s+=z):"right"===y&&("center"===q?s+=z:"right"===q&&(s+=h))),w){case"top":case"center":case"bottom":c-=(F.length-1)*B}for(var V=0;V<F.length;V++)D>0&&e.strokeText(F[V],s,c),e.fillText(F[V],s,c),c+=B}else D>0&&e.strokeText(u,s,c),e.fillText(u,s,c);0!==f&&(e.rotate(-f),e.translate(-o,-l))}}};var WA={drawNode:function(e,t,r){var n,_,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,s=t._private,c=s.rscratch,u=t.position();if(Pg(u.x)&&Pg(u.y)&&(!o||t.visible())){var f,d,h=o?t.effectiveOpacity():1,p=l.usePaths(),g=!1,v=t.padding();n=t.width()+2*v,_=t.height()+2*v,r&&(d=r,e.translate(-d.x1,-d.y1));for(var m=t.pstyle("background-image").value,y=new Array(m.length),w=new Array(m.length),b=0,k=0;k<m.length;k++){var x=m[k];if(y[k]=null!=x&&"none"!==x){var P=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);b++,w[k]=l.getCachedImage(x,P,(function(){s.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var O=t.pstyle("background-blacken").value,E=t.pstyle("border-width").pfValue,A=t.pstyle("background-opacity").value*h,C=t.pstyle("border-color").value,S=t.pstyle("border-style").value,T=t.pstyle("border-join").value,N=t.pstyle("border-cap").value,L=t.pstyle("border-position").value,M=t.pstyle("border-dash-pattern").pfValue,I=t.pstyle("border-dash-offset").pfValue,j=t.pstyle("border-opacity").value*h,R=t.pstyle("outline-width").pfValue,D=t.pstyle("outline-color").value,F=t.pstyle("outline-style").value,B=t.pstyle("outline-opacity").value*h,z=t.pstyle("outline-offset").value,q=t.pstyle("corner-radius").value;"auto"!==q&&(q=t.pstyle("corner-radius").pfValue);var V=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;l.eleFillStyle(e,t,r)},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;l.colorStrokeStyle(e,C[0],C[1],C[2],t)},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;l.colorStrokeStyle(e,D[0],D[1],D[2],t)},W=function(e,t,r,n){var _,a=l.nodePathCache=l.nodePathCache||[],i=vv("polygon"===r?r+","+n.join(","):r,""+t,""+e,""+q),o=a[i],s=!1;return null!=o?(_=o,s=!0,c.pathCache=_):(_=new Path2D,a[i]=c.pathCache=_),{path:_,cacheHit:s}},$=t.pstyle("shape").strValue,Y=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(u.x,u.y);var H=W(n,_,$,Y);f=H.path,g=H.cacheHit}var X=function(){if(!g){var r=u;p&&(r={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(f||e,r.x,r.y,n,_,q,c)}p?e.fill(f):e.fill()},Z=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],_=s.backgrounding,a=0,i=0;i<w.length;i++){var o=t.cy().style().getIndexedStyle(t,"background-image-containment","value",i);n&&"over"===o||!n&&"inside"===o?a++:y[i]&&w[i].complete&&!w[i].error&&(a++,l.drawInscribedImage(e,w[i],t,i,r))}s.backgrounding=!(a===b),_!==s.backgrounding&&t.updateStyle(!1)},K=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;l.hasPie(t)&&(l.drawPie(e,t,a),r&&(p||l.nodeShapes[l.getNodeShape(t)].draw(e,u.x,u.y,n,_,q,c)))},J=function(){var t=(O>0?O:-O)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:h),r=O>0?0:255;0!==O&&(l.colorFillStyle(e,r,r,r,t),p?e.fill(f):e.fill())},Q=function(){if(E>0){if(e.lineWidth=E,e.lineCap=N,e.lineJoin=T,e.setLineDash)switch(S){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(M),e.lineDashOffset=I;break;case"solid":case"double":e.setLineDash([])}if("center"!==L){if(e.save(),e.lineWidth*=2,"inside"===L)p?e.clip(f):e.clip();else{var t=new Path2D;t.rect(-n/2-E,-_/2-E,n+2*E,_+2*E),t.addPath(f),e.clip(t,"evenodd")}p?e.stroke(f):e.stroke(),e.restore()}else p?e.stroke(f):e.stroke();if("double"===S){e.lineWidth=E/3;var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(f):e.stroke(),e.globalCompositeOperation=r}e.setLineDash&&e.setLineDash([])}},ee=function(){if(R>0){if(e.lineWidth=R,e.lineCap="butt",e.setLineDash)switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var r=u;p&&(r={x:0,y:0});var a=l.getNodeShape(t),i=E;"inside"===L&&(i=0),"outside"===L&&(i*=2);var o,s=(n+i+(R+z))/n,c=(_+i+(R+z))/_,f=n*s,d=_*c,h=l.nodeShapes[a].points;if(p)o=W(f,d,a,h).path;if("ellipse"===a)l.drawEllipsePath(o||e,r.x,r.y,f,d);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var g=0,v=0,m=0;"round-diamond"===a?g=1.4*(i+z+R):"round-heptagon"===a?(g=1.075*(i+z+R),m=-(i/2+z+R)/35):"round-hexagon"===a?g=1.12*(i+z+R):"round-pentagon"===a?(g=1.13*(i+z+R),m=-(i/2+z+R)/15):"round-tag"===a?(g=1.12*(i+z+R),v=.07*(i/2+R+z)):"round-triangle"===a&&(g=(i+z+R)*(Math.PI/2),m=-(i+z/2+R)/Math.PI),0!==g&&(f=n*(s=(n+g)/n),["round-hexagon","round-tag"].includes(a)||(d=_*(c=(_+g)/_)));for(var y=f/2,w=d/2,b=(q="auto"===q?Km(f,d):q)+(i+R+z)/2,k=new Array(h.length/2),x=new Array(h.length/2),P=0;P<h.length/2;P++)k[P]={x:r.x+v+y*h[2*P],y:r.y+m+w*h[2*P+1]};var O,A,C,S,T=k.length;for(A=k[T-1],O=0;O<T;O++)C=k[O%T],S=k[(O+1)%T],x[O]=YE(A,C,S,b),A=C,C=S;l.drawRoundPolygonPath(o||e,r.x+v,r.y+m,n*s,_*c,h,x)}else if(["roundrectangle","round-rectangle"].includes(a))q="auto"===q?Zm(f,d):q,l.drawRoundRectanglePath(o||e,r.x,r.y,f,d,q+(i+R+z)/2);else if(["cutrectangle","cut-rectangle"].includes(a))q="auto"===q?8:q,l.drawCutRectanglePath(o||e,r.x,r.y,f,d,null,q+(i+R+z)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(a))q="auto"===q?Zm(f,d):q,l.drawBottomRoundRectanglePath(o||e,r.x,r.y,f,d,q+(i+R+z)/2);else if("barrel"===a)l.drawBarrelPath(o||e,r.x,r.y,f,d);else if(a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)){h=Bm(zm(h,(i+R+z)/n)),l.drawPolygonPath(o||e,r.x,r.y,n,_,h)}else{h=Bm(zm(h,-((i+R+z)/n))),l.drawPolygonPath(o||e,r.x,r.y,n,_,h)}if(p?e.stroke(o):e.stroke(),"double"===F){e.lineWidth=i/3;var N=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(o):e.stroke(),e.globalCompositeOperation=N}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var te=t.pstyle("ghost-offset-x").pfValue,re=t.pstyle("ghost-offset-y").pfValue,ne=t.pstyle("ghost-opacity").value,_e=ne*h;e.translate(te,re),G(),ee(),V(ne*A),X(),Z(_e,!0),U(ne*j),Q(),K(0!==O||0!==E),Z(_e,!1),J(_e),e.translate(-te,-re)}p&&e.translate(-u.x,-u.y),i&&l.drawNodeUnderlay(e,t,u,n,_),p&&e.translate(u.x,u.y),G(),ee(),V(),X(),Z(h,!0),U(),Q(),K(0!==O||0!==E),Z(h,!1),J(),p&&e.translate(-u.x,-u.y),l.drawElementText(e,t,null,a),i&&l.drawNodeOverlay(e,t,u,n,_),r&&e.translate(d.x1,d.y1)}}},$A=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,n,_,a){if(r.visible()){var i=r.pstyle("".concat(e,"-padding")).pfValue,o=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,s=r.pstyle("".concat(e,"-shape")).value,c=r.pstyle("".concat(e,"-corner-radius")).value;if(o>0){if(n=n||r.position(),null==_||null==a){var u=r.padding();_=r.width()+2*u,a=r.height()+2*u}this.colorFillStyle(t,l[0],l[1],l[2],o),this.nodeShapes[s].draw(t,n.x,n.y,_+2*i,a+2*i,c),t.fill()}}}};WA.drawNodeOverlay=$A("overlay"),WA.drawNodeUnderlay=$A("underlay"),WA.hasPie=function(e){return(e=e[0])._private.hasPie},WA.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var _=t.cy().style(),a=t.pstyle("pie-size"),i=n.x,o=n.y,l=t.width(),s=t.height(),c=Math.min(l,s)/2,u=0;this.usePaths()&&(i=0,o=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var f=1;f<=_.pieBackgroundN;f++){var d=t.pstyle("pie-"+f+"-background-size").value,h=t.pstyle("pie-"+f+"-background-color").value,p=t.pstyle("pie-"+f+"-background-opacity").value*r,g=d/100;g+u>1&&(g=1-u);var v=1.5*Math.PI+2*Math.PI*u,m=v+2*Math.PI*g;0===d||u>=1||u+g>1||(e.beginPath(),e.moveTo(i,o),e.arc(i,o,c,v,m),e.closePath(),this.colorFillStyle(e,h[0],h[1],h[2],p),e.fill(),u+=g)}};var YA,HA={};function XA(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(n));return n}function ZA(e,t,r){void 0===r&&(r=t);var n=e.makeOffscreenCanvas(t,r),_=n.context=n.getContext("2d");return n.clear=function(){return _.clearRect(0,0,n.width,n.height)},n.clear(),n}function KA(e){var t=e.pixelRatio,r=e.cy.zoom(),n=e.cy.pan();return{zoom:r*t,pan:{x:n.x*t,y:n.y*t}}}function JA(e,t,r){var n=e[0]/255,_=e[1]/255,a=e[2]/255,i=t,o=r||new Array(4);return o[0]=n*i,o[1]=_*i,o[2]=a*i,o[3]=i,o}function QA(e,t){var r=t||new Array(4);return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function eC(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function tC(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function rC(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function nC(e,t,r,n,_,a){switch(t){case e.FLOAT:return new Float32Array(r.buffer,a*n,_);case e.INT:return new Int32Array(r.buffer,a*n,_)}}function _C(e,t,r,n){var _=Ip(tC(e,r),3),a=_[0],i=_[1],o=_[2],l=rC(e,i,t*a),s=a*o,c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,t*s,e.DYNAMIC_DRAW),e.enableVertexAttribArray(n),i===e.FLOAT?e.vertexAttribPointer(n,a,i,!1,s,0):i===e.INT&&e.vertexAttribIPointer(n,a,i,s,0),e.vertexAttribDivisor(n,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var u=new Array(t),f=0;f<t;f++)u[f]=nC(e,i,l,s,a,f);return c.dataArray=l,c.stride=s,c.size=a,c.getView=function(e){return u[e]},c.setPoint=function(e,t,r){var n=u[e];n[0]=t,n[1]=r},c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c),t?e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*a):e.bufferSubData(e.ARRAY_BUFFER,0,l)},c}HA.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r},HA.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,_=0;_<r.length;_++)if((t=r[_]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},HA.createGradientStyleFor=function(e,t,r,n,_){var a,i=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var s=r.sourceEndpoint(),c=r.targetEndpoint(),u=r.midpoint(),f=vm(s,u),d=vm(c,u);a=e.createRadialGradient(u.x,u.y,0,u.x,u.y,Math.max(f,d))}else{var h=i?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();a=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(p,g))}else if(r.isEdge()){var v=r.sourceEndpoint(),m=r.targetEndpoint();a=e.createLinearGradient(v.x,v.y,m.x,m.y)}else{var y=i?{x:0,y:0}:r.position(),w=r.paddedWidth()/2,b=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(y.x,y.y-b,y.x,y.y+b);break;case"to-top":a=e.createLinearGradient(y.x,y.y+b,y.x,y.y-b);break;case"to-left":a=e.createLinearGradient(y.x+w,y.y,y.x-w,y.y);break;case"to-right":a=e.createLinearGradient(y.x-w,y.y,y.x+w,y.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(y.x-w,y.y-b,y.x+w,y.y+b);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(y.x-w,y.y+b,y.x+w,y.y-b);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(y.x+w,y.y-b,y.x-w,y.y+b);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(y.x+w,y.y+b,y.x-w,y.y-b)}}if(!a)return null;for(var k=l.length===o.length,x=o.length,P=0;P<x;P++)a.addColorStop(k?l[P]:P/(x-1),"rgba("+o[P][0]+","+o[P][1]+","+o[P][2]+","+_+")");return a},HA.gradientFillStyle=function(e,t,r,n){var _=this.createGradientStyleFor(e,"background",t,r,n);if(!_)return null;e.fillStyle=_},HA.colorFillStyle=function(e,t,r,n,_){e.fillStyle="rgba("+t+","+r+","+n+","+_+")"},HA.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var _=t.pstyle("background-color").value;this.colorFillStyle(e,_[0],_[1],_[2],r)}},HA.gradientStrokeStyle=function(e,t,r,n){var _=this.createGradientStyleFor(e,"line",t,r,n);if(!_)return null;e.strokeStyle=_},HA.colorStrokeStyle=function(e,t,r,n,_){e.strokeStyle="rgba("+t+","+r+","+n+","+_+")"},HA.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var _=t.pstyle("line-color").value;this.colorStrokeStyle(e,_[0],_[1],_[2],r)}},HA.matchCanvasSize=function(e){var t=this,r=t.data,n=t.findContainerClientCoords(),_=n[2],a=n[3],i=t.getPixelRatio(),o=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(i=o);var l,s=_*i,c=a*i;if(s!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var u=r.canvasContainer;u.style.width=_+"px",u.style.height=a+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)(l=r.canvases[f]).width=s,l.height=c,l.style.width=_+"px",l.style.height=a+"px";for(f=0;f<t.BUFFER_COUNT;f++)(l=r.bufferCanvases[f]).width=s,l.height=c,l.style.width=_+"px",l.style.height=a+"px";t.textureMult=1,i<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=s*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=s,t.canvasHeight=c,t.pixelRatio=i}},HA.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},HA.clearCanvas=function(){var e=this,t=e.data;function r(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},HA.render=function(e){var t=this;e=e||Mv();var r=t.cy,n=e.forcedContext,_=e.drawAllLayers,a=e.drawOnlyNodeLayer,i=e.forcedZoom,o=e.forcedPan,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,s=t.data,c=s.canvasNeedsRedraw,u=t.textureOnViewport&&!n&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),f=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,d=t.motionBlurPxRatio,h=r.hasCompoundNodes(),p=t.hoverData.draggingEles,g=!(!t.hoverData.selecting&&!t.touchData.selecting),v=f=f&&!n&&t.motionBlurEnabled&&!g;n||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!n&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),f&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(v=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!u&&(c[t.NODE]=!0,c[t.SELECT_BOX]=!0);var m=r.style(),y=r.zoom(),w=void 0!==i?i:y,b=r.pan(),k={x:b.x,y:b.y},x={zoom:y,pan:{x:b.x,y:b.y}},P=t.prevViewport;void 0===P||x.zoom!==P.zoom||x.pan.x!==P.pan.x||x.pan.y!==P.pan.y||p&&!h||(t.motionBlurPxRatio=1),o&&(k=o),w*=l,k.x*=l,k.y*=l;var O=t.getCachedZSortedEles();function E(e,r,n,_,a){var i=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(r,n,_,a),e.globalCompositeOperation=i}function A(e,r){var a,l,c,u;t.clearingMotionBlur||e!==s.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==s.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(a=k,l=w,c=t.canvasWidth,u=t.canvasHeight):(a={x:b.x*d,y:b.y*d},l=y*d,c=t.canvasWidth*d,u=t.canvasHeight*d),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?E(e,0,0,c,u):n||void 0!==r&&!r||e.clearRect(0,0,c,u),_||(e.translate(a.x,a.y),e.scale(l,l)),o&&e.translate(o.x,o.y),i&&e.scale(i,i)}if(u||(t.textureDrawLastFrame=!1),u){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var C=t.data.bufferContexts[t.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult}),(x=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[t.DRAG]=!1,c[t.NODE]=!1;var S=s.contexts[t.NODE],T=t.textureCache.texture;x=t.textureCache.viewport;S.setTransform(1,0,0,1,0,0),f?E(S,0,0,x.width,x.height):S.clearRect(0,0,x.width,x.height);var N=m.core("outside-texture-bg-color").value,L=m.core("outside-texture-bg-opacity").value;t.colorFillStyle(S,N[0],N[1],N[2],L),S.fillRect(0,0,x.width,x.height);y=r.zoom();A(S,!1),S.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/l,x.height/x.zoom/l),S.drawImage(T,x.mpan.x,x.mpan.y,x.width/x.zoom/l,x.height/x.zoom/l)}else t.textureOnViewport&&!n&&(t.textureCache=null);var M=r.extent(),I=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),j=t.hideEdgesOnViewport&&I,R=[];if(R[t.NODE]=!c[t.NODE]&&f&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,R[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),R[t.DRAG]=!c[t.DRAG]&&f&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,R[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),c[t.NODE]||_||a||R[t.NODE]){var D=f&&!R[t.NODE]&&1!==d;A(S=n||(D?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:s.contexts[t.NODE]),f&&!D?"motionBlur":void 0),j?t.drawCachedNodes(S,O.nondrag,l,M):t.drawLayeredElements(S,O.nondrag,l,M),t.debug&&t.drawDebugPoints(S,O.nondrag),_||f||(c[t.NODE]=!1)}if(!a&&(c[t.DRAG]||_||R[t.DRAG])){D=f&&!R[t.DRAG]&&1!==d;A(S=n||(D?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:s.contexts[t.DRAG]),f&&!D?"motionBlur":void 0),j?t.drawCachedNodes(S,O.drag,l,M):t.drawCachedElements(S,O.drag,l,M),t.debug&&t.drawDebugPoints(S,O.drag),_||f||(c[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,A),f&&1!==d){var F=s.contexts[t.NODE],B=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],z=s.contexts[t.DRAG],q=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],V=function(e,r,n){e.setTransform(1,0,0,1,0,0),n||!v?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):E(e,0,0,t.canvasWidth,t.canvasHeight);var _=d;e.drawImage(r,0,0,t.canvasWidth*_,t.canvasHeight*_,0,0,t.canvasWidth,t.canvasHeight)};(c[t.NODE]||R[t.NODE])&&(V(F,B,R[t.NODE]),c[t.NODE]=!1),(c[t.DRAG]||R[t.DRAG])&&(V(z,q,R[t.DRAG]),c[t.DRAG]=!1)}t.prevViewport=x,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),f&&(t.motionBlurTimeout=setTimeout((function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!u,t.mbFrames=0,c[t.NODE]=!0,c[t.DRAG]=!0,t.redraw()}),100)),n||r.emit("render")},HA.drawSelectionRectangle=function(e,t){var r=this,n=r.cy,_=r.data,a=n.style(),i=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=_.canvasNeedsRedraw,s=e.forcedContext;if(r.showFps||!i&&l[r.SELECT_BOX]&&!o){var c=s||_.contexts[r.SELECT_BOX];if(t(c),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){var u=r.cy.zoom(),f=a.core("selection-box-border-width").value/u;c.lineWidth=f,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),f>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(_.bgActivePosistion&&!r.hoverData.selecting){u=r.cy.zoom();var d=_.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(d.x,d.y,a.core("active-bg-size").pfValue/u,0,2*Math.PI),c.fill()}var h=r.lastRedrawTime;if(r.showFps&&h){h=Math.round(h);var p=Math.round(1e3/h),g="1 frame = "+h+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!YA){var v=c.measureText(g);YA=v.actualBoundingBoxAscent}c.fillText(g,0,YA);c.strokeRect(0,YA+10,250,20),c.fillRect(0,YA+10,250*Math.min(p/60,1),20)}o||(l[r.SELECT_BOX]=!1)}};var aC="undefined"!=typeof Float32Array?Float32Array:Array;function iC(){var e=new aC(9);return aC!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function oC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function lC(e,t,r){var n=t[0],_=t[1],a=t[2],i=t[3],o=t[4],l=t[5],s=t[6],c=t[7],u=t[8],f=r[0],d=r[1];return e[0]=n,e[1]=_,e[2]=a,e[3]=i,e[4]=o,e[5]=l,e[6]=f*n+d*i+s,e[7]=f*_+d*o+c,e[8]=f*a+d*l+u,e}function sC(e,t,r){var n=t[0],_=t[1],a=t[2],i=t[3],o=t[4],l=t[5],s=t[6],c=t[7],u=t[8],f=Math.sin(r),d=Math.cos(r);return e[0]=d*n+f*i,e[1]=d*_+f*o,e[2]=d*a+f*l,e[3]=d*i-f*n,e[4]=d*o-f*_,e[5]=d*l-f*a,e[6]=s,e[7]=c,e[8]=u,e}function cC(e,t,r){var n=r[0],_=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=_*t[3],e[4]=_*t[4],e[5]=_*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var uC={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},fC=Iv({texRows:24}),dC=Iv({collection:"default",getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:function(){return!0},getPadding:0}),hC=function(){return Np((function e(t,r,n,_){Tp(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=_(t,r,r),this.scratch=_(t,r,this.texHeight,"scratch")}),[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(e){var t=e.w,r=e.h,n=this.texHeight,_=this.texSize,a=n/r,i=t*a,o=r*a;return i>_&&(i=t*(a=_/t),o=r*a),{scale:a,texW:i,texH:o}}},{key:"draw",value:function(e,t,r){var n=this;if(this.locked)throw new Error("can't draw, atlas is locked");var _=this.texSize,a=this.texRows,i=this.texHeight,o=this.getScale(t),l=o.scale,s=o.texW,c=o.texH,u=[null,null],f=function(e,n){if(r&&n){var _=n.context,a=e.x,o=e.row,s=a,c=i*o;_.save(),_.translate(s,c),_.scale(l,l),r(_,t),_.restore()}},d=function(){f(n.freePointer,n.canvas),u[0]={x:n.freePointer.x,y:n.freePointer.row*i,w:s,h:c},u[1]={x:n.freePointer.x+s,y:n.freePointer.row*i,w:0,h:c},n.freePointer.x+=s,n.freePointer.x==_&&(n.freePointer.x=0,n.freePointer.row++)},h=function(){n.freePointer.x=0,n.freePointer.row++};if(this.freePointer.x+s<=_)d();else{if(this.freePointer.row>=a-1)return!1;this.freePointer.x===_?(h(),d()):this.enableWrapping?function(){var e=n.scratch,t=n.canvas;e.clear(),f({x:0,row:0},e);var r=_-n.freePointer.x,a=s-r,o=i,l=n.freePointer.x,d=n.freePointer.row*i,h=r;t.context.drawImage(e,0,0,h,o,l,d,h,o),u[0]={x:l,y:d,w:h,h:c};var p=r,g=(n.freePointer.row+1)*i,v=a;t&&t.context.drawImage(e,p,0,v,o,0,g,v,o),u[1]={x:0,y:g,w:v,h:c},n.freePointer.x=a,n.freePointer.row++}():(h(),d())}return this.keyToLocation.set(e,u),this.needsBuffer=!0,u}},{key:"getOffsets",value:function(e){return this.keyToLocation.get(e)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(e){if(this.locked)return!1;var t=this.texSize,r=this.texRows,n=this.getScale(e).texW;return!(this.freePointer.x+n>t)||this.freePointer.row<r-1}},{key:"bufferIfNeeded",value:function(e){this.texture||(this.texture=function(e){var t=e.createTexture();return t.buffer=function(r){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},t.deleteTexture=function(){e.deleteTexture(t)},t}(e,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),pC=function(){return Np((function e(t,r,n,_){Tp(this,e),this.r=t,this.texSize=r,this.texRows=n,this.createTextureCanvas=_,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}),[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var e=this.r,t=this.texSize,r=this.texRows,n=this.createTextureCanvas;return new hC(e,t,r,n)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var e=this.r,t=this.texSize,r=this.texRows,n=this.createTextureCanvas,_=Math.floor(t/r);this.scratch=n(e,t,_,"scratch")}return this.scratch}},{key:"draw",value:function(e,t,r){var n=this.styleKeyToAtlas.get(e);return n||((n=this.atlases[this.atlases.length-1])&&n.canFit(t)||(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(e,t,r),this.styleKeyToAtlas.set(e,n)),n}},{key:"getAtlas",value:function(e){return this.styleKeyToAtlas.get(e)}},{key:"hasAtlas",value:function(e){return this.styleKeyToAtlas.has(e)}},{key:"markKeyForGC",value:function(e){this.markedKeys.add(e)}},{key:"gc",value:function(){var e=this,t=this.markedKeys;if(0!==t.size){var r,n=[],_=new Map,a=null,i=Lp(this.atlases);try{var o=function(){var i,o,l=r.value,s=l.getKeys(),c=(o=s,(i=t).intersection?i.intersection(o):new Set(jp(i).filter((function(e){return o.has(e)}))));if(0===c.size)return n.push(l),s.forEach((function(e){return _.set(e,l)})),1;a||(a=e._createAtlas(),n.push(a));var u,f=Lp(s);try{for(f.s();!(u=f.n()).done;){var d=u.value;if(!c.has(d)){var h=Ip(l.getOffsets(d),2),p=h[0],g=h[1];a.canFit({w:p.w+g.w,h:p.h})||(a.lock(),a=e._createAtlas(),n.push(a)),e._copyTextureToNewAtlas(d,l,a),_.set(d,a)}}}catch(e){f.e(e)}finally{f.f()}l.dispose()};for(i.s();!(r=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}this.atlases=n,this.styleKeyToAtlas=_,this.markedKeys=new Set}else console.log("nothing to garbage collect")}},{key:"_copyTextureToNewAtlas",value:function(e,t,r){var n=Ip(t.getOffsets(e),2),_=n[0],a=n[1];if(0===a.w)r.draw(e,_,(function(e){e.drawImage(t.canvas,_.x,_.y,_.w,_.h,0,0,_.w,_.h)}));else{var i=this._getScratchCanvas();i.clear(),i.context.drawImage(t.canvas,_.x,_.y,_.w,_.h,0,0,_.w,_.h),i.context.drawImage(t.canvas,a.x,a.y,a.w,a.h,_.w,0,a.w,a.h);var o=_.w+a.w,l=_.h;r.draw(e,{w:o,h:l},(function(e){e.drawImage(i,0,0,o,l,0,0,o,l)}))}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();var gC=function(){return Np((function e(t,r){Tp(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map,this.batchAtlases=[]}),[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"addAtlasCollection",value:function(e,t){var r=this.globalOptions,n=r.webglTexSize,_=r.createTextureCanvas,a=t.texRows,i=this._cacheScratchCanvas(_),o=new pC(this.r,n,a,i);this.collections.set(e,o)}},{key:"addRenderType",value:function(e,t){var r=t.collection;if(!this.collections.has(r))throw new Error("invalid atlas collection name '".concat(r,"'"));var n=this.collections.get(r),_=Gg({type:e,atlasCollection:n},t);this.renderTypes.set(e,_)}},{key:"getRenderTypeOpts",value:function(e){return this.renderTypes.get(e)}},{key:"getAtlasCollection",value:function(e){return this.collections.get(e)}},{key:"_cacheScratchCanvas",value:function(e){var t=-1,r=-1,n=null;return function(_,a,i,o){return o?(n&&a==t&&i==r||(t=a,r=i,n=e(_,a,i)),n):e(_,a,i)}}},{key:"_key",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"invalidate",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.forceRedraw,_=void 0!==n&&n,a=r.filterEle,i=void 0===a?function(){return!0}:a,o=r.filterType,l=void 0===o?function(){return!0}:o,s=!1,c=!1,u=Lp(e);try{for(u.s();!(t=u.n()).done;){var f=t.value;if(i(f)){var d,h=Lp(this.renderTypes.values());try{for(h.s();!(d=h.n()).done;){var p=d.value,g=p.type;if(l(g)){var v=p.getKey(f),m=this.collections.get(p.collection);if(_)m.markKeyForGC(v),c=!0;else{var y=p.getID?p.getID(f):f.id(),w=this._key(g,y),b=this.typeAndIdToKey.get(w);void 0!==b&&b!==v&&(this.typeAndIdToKey.delete(w),m.markKeyForGC(b),s=!0)}}}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){u.e(e)}finally{u.f()}return c&&(this.gc(),s=!1),s}},{key:"gc",value:function(){var e,t=Lp(this.collections.values());try{for(t.s();!(e=t.n()).done;){e.value.gc()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(e,t,r){var n=this.renderTypes.get(t),_=n.getKey(e);r||(r=n.getBoundingBox(e));var a=this.collections.get(n.collection),i=!1,o=a.draw(_,r,(function(t){n.drawElement(t,e,r,!0,!0),i=!0}));if(i){var l=n.getID?n.getID(e):e.id(),s=this._key(t,l);this.typeAndIdToKey.set(s,_)}return o}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(e,t){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var r=this.renderTypes.get(t),n=r.getKey(e),_=this.collections.get(r.collection).getAtlas(n);return Boolean(_)&&this.batchAtlases.includes(_)}return!0}},{key:"getAtlasIndexForBatch",value:function(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},(function(e,t){return t}))}},{key:"getAtlasInfo",value:function(e,t){var r=this.renderTypes.get(t),n=r.getBoundingBox(e),_=this.getOrCreateAtlas(e,t,n),a=this.getAtlasIndexForBatch(_);if(void 0!==a){var i=r.getKey(e),o=Ip(_.getOffsets(i),2);return{index:a,tex1:o[0],tex2:o[1],bb:n}}}},{key:"setTransformMatrix",value:function(e,t,r,n){var _=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.getRenderTypeOpts(r),i=a.getPadding?a.getPadding(e):0;if(n){var o=n.bb,l=n.tex1,s=n.tex2,c=l.w/(l.w+s.w);_||(c=1-c);var u=this.getAdjustedBB(o,i,_,c);this._applyTransformMatrix(t,u,a,e)}else{var f=a.getBoundingBox(e),d=this.getAdjustedBB(f,i,!0,1);this._applyTransformMatrix(t,d,a,e)}}},{key:"_applyTransformMatrix",value:function(e,t,r,n){var _,a;oC(e);var i=r.getRotation?r.getRotation(n):0;if(0!==i){var o=r.getRotationPoint(n);lC(e,e,[o.x,o.y]),sC(e,e,i);var l=r.getRotationOffset(n);_=l.x+t.xOffset,a=l.y}else _=t.x1,a=t.y1;lC(e,e,[_,a]),cC(e,e,[t.w,t.h])}},{key:"getAdjustedBB",value:function(e,t,r,n){var _=e.x1,a=e.y1,i=e.w,o=e.h;t&&(_-=t,a-=t,i+=2*t,o+=2*t);var l=0,s=i*n;return r&&n<1?i=s:!r&&n<1&&(_+=l=i-s,i=s),{x1:_,y1:a,w:i,h:o,xOffset:l}}},{key:"getDebugInfo",value:function(){var e,t=[],r=Lp(this.collections);try{for(r.s();!(e=r.n()).done;){var n=Ip(e.value,2),_=n[0],a=n[1].getCounts(),i=a.keyCount,o=a.atlasCount;t.push({type:_,keyCount:i,atlasCount:o})}}catch(e){r.e(e)}finally{r.f()}return t}}])}(),vC=function(){return Np((function e(t,r,n){Tp(this,e),this.r=t,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=ZA,this.atlasManager=new gC(t,n),this.program=this.createShaderProgram(uC.SCREEN),this.pickingProgram=this.createShaderProgram(uC.PICKING),this.vao=this.createVAO()}),[{key:"addAtlasCollection",value:function(e,t){this.atlasManager.addAtlasCollection(e,t)}},{key:"addAtlasRenderType",value:function(e,t){this.atlasManager.addRenderType(e,t)}},{key:"invalidate",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,r=this.atlasManager;return t?r.invalidate(e,{filterType:function(e){return e===t},forceRedraw:!0}):r.invalidate(e)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"createShaderProgram",value:function(e){var t=this.gl,r="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; \n\n      in mat3 aTransform;\n\n      // what are we rendering?\n      in int aVertType;\n\n      // for picking\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in float aLineWidth;\n      in vec4 aColor;\n\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      flat out int vAtlasId;\n      flat out vec4 vIndex;\n      flat out int vVertType;\n\n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition;\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x;\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          int vid = gl_VertexID;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4,") {\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0 = pointA;\n          vec2 p1 = pointB;\n          vec2 p2 = pointC;\n          vec2 pos = position;\n          if(position.x == 1.0) {\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth;\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2( 0.0,   0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vIndex = aIndex;\n        vVertType = aVertType;\n      }\n    "),n=this.atlasManager.getIndexArray(),_="#version 300 es\n      precision highp float;\n\n      // define texture unit for each node in the batch\n      ".concat(n.map((function(e){return"uniform sampler2D uTexture".concat(e,";")})).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n\n      out vec4 outColor;\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          ").concat(n.map((function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")})).join("\n\telse "),"\n        } else if(vVertType == ").concat(3,") {\n          // blend arrow color with background (using premultiplied alpha)\n          outColor.rgb = vColor.rgb + (uBGColor.rgb * (1.0 - vColor.a)); \n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        } else {\n          outColor = vColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "),a=function(e,t,r){var n=XA(e,e.VERTEX_SHADER,t),_=XA(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,n),e.attachShader(a,_),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error("Could not initialize shaders");return a}(t,r,_);a.aPosition=t.getAttribLocation(a,"aPosition"),a.aIndex=t.getAttribLocation(a,"aIndex"),a.aVertType=t.getAttribLocation(a,"aVertType"),a.aTransform=t.getAttribLocation(a,"aTransform"),a.aAtlasId=t.getAttribLocation(a,"aAtlasId"),a.aTex=t.getAttribLocation(a,"aTex"),a.aPointAPointB=t.getAttribLocation(a,"aPointAPointB"),a.aPointCPointD=t.getAttribLocation(a,"aPointCPointD"),a.aLineWidth=t.getAttribLocation(a,"aLineWidth"),a.aColor=t.getAttribLocation(a,"aColor"),a.uPanZoomMatrix=t.getUniformLocation(a,"uPanZoomMatrix"),a.uAtlasSize=t.getUniformLocation(a,"uAtlasSize"),a.uBGColor=t.getUniformLocation(a,"uBGColor"),a.uTextures=[];for(var i=0;i<this.atlasManager.getMaxAtlasesPerBatch();i++)a.uTextures.push(t.getUniformLocation(a,"uTexture".concat(i)));return a}},{key:"createVAO",value:function(){var e=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=e.length/2;var t=this.maxInstances,r=this.gl,n=this.program,_=r.createVertexArray();return r.bindVertexArray(_),function(e,t,r,n){var _=Ip(tC(e,t),2),a=_[0],i=_[1],o=rC(e,i,n),l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,o,e.STATIC_DRAW),i===e.FLOAT?e.vertexAttribPointer(r,a,i,!1,0,0):i===e.INT&&e.vertexAttribIPointer(r,a,i,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null)}(r,"vec2",n.aPosition,e),this.transformBuffer=function(e,t,r){for(var n=new Float32Array(9*t),_=new Array(t),a=0;a<t;a++){var i=9*a*4;_[a]=new Float32Array(n.buffer,i,9)}var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,n.byteLength,e.DYNAMIC_DRAW);for(var l=0;l<3;l++){var s=r+l;e.enableVertexAttribArray(s),e.vertexAttribPointer(s,3,e.FLOAT,!1,36,12*l),e.vertexAttribDivisor(s,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),o.getMatrixView=function(e){return _[e]},o.setData=function(e,t){_[t].set(e,0)},o.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferSubData(e.ARRAY_BUFFER,0,n)},o}(r,t,n.aTransform),this.indexBuffer=_C(r,t,"vec4",n.aIndex),this.vertTypeBuffer=_C(r,t,"int",n.aVertType),this.atlasIdBuffer=_C(r,t,"int",n.aAtlasId),this.texBuffer=_C(r,t,"vec4",n.aTex),this.pointAPointBBuffer=_C(r,t,"vec4",n.aPointAPointB),this.pointCPointDBuffer=_C(r,t,"vec4",n.aPointCPointD),this.lineWidthBuffer=_C(r,t,"float",n.aLineWidth),this.colorBuffer=_C(r,t,"vec4",n.aColor),r.bindVertexArray(null),_}},{key:"buffers",get:function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter((function(e){return e.endsWith("Buffer")})).map((function(t){return e[t]}))),this._buffers}},{key:"startFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uC.SCREEN;this.panZoomMatrix=e,this.renderTarget=t,this.batchDebugInfo=[],this.wrappedCount=0,this.rectangleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.atlasManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"getTempMatrix",value:function(){return this.tempMatrix=this.tempMatrix||iC()}},{key:"drawTexture",value:function(e,t,r){var n=this.atlasManager;if(e.visible()&&n.getRenderTypeOpts(r).isVisible(e)){n.canAddToCurrentBatch(e,r)||this.endBatch(),this.instanceCount+1>=this.maxInstances&&this.endBatch();var _=this.instanceCount;this.vertTypeBuffer.getView(_)[0]=0,QA(t,this.indexBuffer.getView(_));var a=n.getAtlasInfo(e,r),i=a.index,o=a.tex1,l=a.tex2;l.w>0&&this.wrappedCount++;for(var s=!0,c=0,u=[o,l];c<u.length;c++){var f=u[c];if(0!=f.w){var d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=0,QA(t,this.indexBuffer.getView(d)),this.atlasIdBuffer.getView(d)[0]=i;var h=this.texBuffer.getView(d);h[0]=f.x,h[1]=f.y,h[2]=f.w,h[3]=f.h;var p=this.transformBuffer.getMatrixView(d);n.setTransformMatrix(e,p,r,a,s),this.instanceCount++}s=!1}this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawSimpleRectangle",value:function(e,t,r){if(e.visible()){var n=this.atlasManager,_=this.instanceCount;this.vertTypeBuffer.getView(_)[0]=4,QA(t,this.indexBuffer.getView(_)),JA(e.pstyle("background-color").value,e.pstyle("background-opacity").value,this.colorBuffer.getView(_));var a=this.transformBuffer.getMatrixView(_);n.setTransformMatrix(e,a,r),this.rectangleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"drawEdgeArrow",value:function(e,t,r){if(e.visible()){var n,_,a,i=e._private.rscratch;if("source"===r?(n=i.arrowStartX,_=i.arrowStartY,a=i.srcArrowAngle):(n=i.arrowEndX,_=i.arrowEndY,a=i.tgtArrowAngle),!(isNaN(n)||null==n||isNaN(_)||null==_||isNaN(a)||null==a))if("none"!==e.pstyle(r+"-arrow-shape").value){var o=e.pstyle(r+"-arrow-color").value,l=e.pstyle("opacity").value*e.pstyle("line-opacity").value,s=e.pstyle("width").pfValue,c=e.pstyle("arrow-scale").value,u=this.r.getArrowWidth(s,c),f=this.instanceCount,d=this.transformBuffer.getMatrixView(f);oC(d),lC(d,d,[n,_]),cC(d,d,[u,u]),sC(d,d,a),this.vertTypeBuffer.getView(f)[0]=3,QA(t,this.indexBuffer.getView(f)),JA(o,l,this.colorBuffer.getView(f)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(e,t){if(e.visible()){var r=this.getEdgePoints(e);if(r){var n=e.pstyle("opacity").value,_=e.pstyle("line-opacity").value,a=e.pstyle("width").pfValue,i=e.pstyle("line-color").value,o=n*_;if(r.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==r.length){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=1,QA(t,this.indexBuffer.getView(l)),JA(i,o,this.colorBuffer.getView(l)),this.lineWidthBuffer.getView(l)[0]=a;var s=this.pointAPointBBuffer.getView(l);s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var c=0;c<r.length-2;c+=2){var u=this.instanceCount;this.vertTypeBuffer.getView(u)[0]=2,QA(t,this.indexBuffer.getView(u)),JA(i,o,this.colorBuffer.getView(u)),this.lineWidthBuffer.getView(u)[0]=a;var f=r[c-2],d=r[c-1],h=r[c],p=r[c+1],g=r[c+2],v=r[c+3],m=r[c+4],y=r[c+5];0==c&&(f=2*h-g+.001,d=2*p-v+.001),c==r.length-4&&(m=2*g-h+.001,y=2*v-p+.001);var w=this.pointAPointBBuffer.getView(u);w[0]=f,w[1]=d,w[2]=h,w[3]=p;var b=this.pointCPointDBuffer.getView(u);b[0]=g,b[1]=v,b[2]=m,b[3]=y,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"getEdgePoints",value:function(e){var t=e._private.rscratch;if(!t.badLine&&null!=t.allpts&&!isNaN(t.allpts[0])){var r=t.allpts;if(4==r.length)return r;var n=this.getNumSegments(e);return this.getCurveSegmentPoints(r,n)}}},{key:"getNumSegments",value:function(e){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"getCurveSegmentPoints",value:function(e,t){if(4==e.length)return e;for(var r=Array(2*(t+1)),n=0;n<=t;n++)if(0==n)r[0]=e[0],r[1]=e[1];else if(n==t)r[2*n]=e[e.length-2],r[2*n+1]=e[e.length-1];else{var _=n/t;this.setCurvePoint(e,_,r,2*n)}return r}},{key:"setCurvePoint",value:function(e,t,r,n){if(!(e.length<=2)){for(var _=Array(e.length-2),a=0;a<_.length;a+=2){var i=(1-t)*e[a]+t*e[a+2],o=(1-t)*e[a+1]+t*e[a+3];_[a]=i,_[a+1]=o}return this.setCurvePoint(_,t,r,n)}r[n]=e[0],r[n+1]=e[1]}},{key:"endBatch",value:function(){var e=this.gl,t=this.vao,r=this.vertexCount,n=this.instanceCount;if(0!==n){var _=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(_),e.bindVertexArray(t);var a,i=Lp(this.buffers);try{for(i.s();!(a=i.n()).done;){a.value.bufferSubData(n)}}catch(e){i.e(e)}finally{i.f()}for(var o=this.atlasManager.getAtlases(),l=0;l<o.length;l++)o[l].bufferIfNeeded(e);for(var s=0;s<o.length;s++)e.activeTexture(e.TEXTURE0+s),e.bindTexture(e.TEXTURE_2D,o[s].texture),e.uniform1i(_.uTextures[s],s);e.uniformMatrix3fv(_.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(_.uAtlasSize,this.atlasManager.getAtlasSize());var c=JA(this.bgColor,1);e.uniform4fv(_.uBGColor,c),e.drawArraysInstanced(e.TRIANGLES,0,r,n),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:o.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var e=this.atlasManager.getDebugInfo(),t=e.reduce((function(e,t){return e+t.atlasCount}),0),r=this.batchDebugInfo,n=r.reduce((function(e,t){return e+t.count}),0);return{atlasInfo:e,totalAtlases:t,wrappedCount:this.wrappedCount,rectangleCount:this.rectangleCount,batchCount:r.length,batchInfo:r,totalInstances:n}}}])}();function mC(e,t){return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")")}var yC=function(){return Np((function e(t){Tp(this,e),this.r=t}),[{key:"getStyleKey",value:function(e,t){var r=this.getStyle(e,t),n=r.shape,_=r.opacity,a=r.color;if(!n)return null;var i=t.width(),o=t.height(),l=mC(a,_);return gv("".concat(n,"-").concat(i,"-").concat(o,"-").concat(l))}},{key:"isVisible",value:function(e,t){return t.pstyle("".concat(e,"-opacity")).value>0}},{key:"getStyle",value:function(e,t){return{opacity:t.pstyle("".concat(e,"-opacity")).value,color:t.pstyle("".concat(e,"-color")).value,shape:t.pstyle("".concat(e,"-shape")).value}}},{key:"getPadding",value:function(e,t){return t.pstyle("".concat(e,"-padding")).pfValue}},{key:"draw",value:function(e,t,r,n){if(this.isVisible(e,r)){var _=this.r,a=n.w,i=n.h,o=a/2,l=i/2,s=this.getStyle(e,r),c=s.shape,u=s.color,f=s.opacity;t.save(),t.fillStyle=mC(u,f),"round-rectangle"===c||"roundrectangle"===c?_.drawRoundRectanglePath(t,o,l,a,i,"auto"):"ellipse"===c&&_.drawEllipsePath(t,o,l,a,i),t.fill(),t.restore()}}}])}(),wC={};function bC(e,t){var r=e.canvasWidth,n=e.canvasHeight,_=KA(e),a=_.pan,i=_.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,n),t.translate(a.x,a.y),t.scale(i,i)}function kC(e,t,r){var n,_=e.drawing;t+=1,r.isNode()?(_.drawTexture(r,t,"node-underlay"),"rectangle"===(n=r).pstyle("shape").value&&"solid"===n.pstyle("background-fill").value&&0===n.pstyle("border-width").pfValue&&"none"===n.pstyle("background-image").strValue?_.drawSimpleRectangle(r,t,"node-body"):_.drawTexture(r,t,"node-body"),_.drawTexture(r,t,"label"),_.drawTexture(r,t,"node-overlay")):(_.drawEdgeLine(r,t),_.drawEdgeArrow(r,t,"source"),_.drawEdgeArrow(r,t,"target"),_.drawTexture(r,t,"label"),_.drawTexture(r,t,"edge-source-label"),_.drawTexture(r,t,"edge-target-label"))}function xC(e,t,r){var n;e.webglDebug&&(n=performance.now());var _=e.drawing,a=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function(e,t){e.drawSelectionRectangle(t,(function(t){return bC(e,t)}))}(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var i=e.data.contexts[e.WEBGL];r.screen?(i.clearColor(0,0,0,0),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA)):i.disable(i.BLEND),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.viewport(0,0,i.canvas.width,i.canvas.height);var o=function(e){var t=e.canvasWidth,r=e.canvasHeight,n=KA(e),_=n.pan,a=n.zoom,i=iC();lC(i,i,[_.x,_.y]),cC(i,i,[a,a]);var o=iC();!function(e,t,r){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(o,t,r);var l,s,c,u,f,d,h,p,g,v,m,y,w,b,k,x,P,O,E,A,C,S=iC();return l=S,c=i,u=(s=o)[0],f=s[1],d=s[2],h=s[3],p=s[4],g=s[5],v=s[6],m=s[7],y=s[8],w=c[0],b=c[1],k=c[2],x=c[3],P=c[4],O=c[5],E=c[6],A=c[7],C=c[8],l[0]=w*u+b*h+k*v,l[1]=w*f+b*p+k*m,l[2]=w*d+b*g+k*y,l[3]=x*u+P*h+O*v,l[4]=x*f+P*p+O*m,l[5]=x*d+P*g+O*y,l[6]=E*u+A*h+C*v,l[7]=E*f+A*p+C*m,l[8]=E*d+A*g+C*y,S}(e),l=e.getCachedZSortedEles();if(a=l.length,_.startFrame(o,r),r.screen){for(var s=0;s<l.nondrag.length;s++)kC(e,s,l.nondrag[s]);for(var c=0;c<l.drag.length;c++)kC(e,c,l.drag[c])}else if(r.picking)for(var u=0;u<l.length;u++)kC(e,u,l[u]);_.endFrame(),r.screen&&e.webglDebugShowAtlases&&(function(e){var t=e.data.contexts[e.NODE];t.save(),bC(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function(e){var t=function(t,r,n){for(var _=t.atlasManager.getAtlasCollection(r),a=e.data.contexts[e.NODE],i=_.atlases,o=0;o<i.length;o++){var l=i[o].canvas;if(l){var s=l.width,c=l.height,u=s*o,f=l.height*n;a.save(),a.scale(.125,.125),a.drawImage(l,u,f),a.strokeStyle="black",a.rect(u,f,s,c),a.stroke(),a.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var f=performance.now(),d=Math.ceil(f-n),h=_.getDebugInfo(),p=["".concat(a," elements"),"".concat(h.totalInstances," instances"),"".concat(h.batchCount," batches"),"".concat(h.totalAtlases," atlases"),"".concat(h.wrappedCount," wrapped textures"),"".concat(h.rectangleCount," simple rectangles")].join(", ");console.log("WebGL (".concat(r.name,") - frame time ").concat(d,"ms")),console.log("Totals:"),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var g,v=Lp(h.atlasInfo);try{for(v.s();!(g=v.n()).done;){var m=g.value;console.log("  ".concat(m.type,": ").concat(m.keyCount," keys, ").concat(m.atlasCount," atlases"))}}catch(e){v.e(e)}finally{v.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,_.gc())}wC.initWebgl=function(e,t){var r=this,n=r.data.contexts[r.WEBGL];e.bgColor=function(e){var t=e.cy.container(),r=t&&t.style&&t.style.backgroundColor||"white";return Wg(r)}(r),e.webglTexSize=Math.min(e.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=function(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(t,n){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(n),r.pickingFrameBuffer.needsDraw=!0;var _=function(e){return function(t){return r.getTextAngle(t,e)}},a=function(e){return function(t){var r=t.pstyle(e);return r&&r.value}};r.drawing=new vC(r,n,e);var i=new yC(r);r.drawing.addAtlasCollection("node",fC({texRows:e.webglTexRowsNodes})),r.drawing.addAtlasCollection("label",fC({texRows:e.webglTexRows})),r.drawing.addAtlasRenderType("node-body",dC({collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement})),r.drawing.addAtlasRenderType("label",dC({collection:"label",getKey:t.getLabelKey,getBoundingBox:t.getLabelBox,drawElement:t.drawLabel,getRotation:_(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:a("label")})),r.drawing.addAtlasRenderType("node-overlay",dC({collection:"node",getBoundingBox:t.getElementBox,getKey:function(e){return i.getStyleKey("overlay",e)},drawElement:function(e,t,r){return i.draw("overlay",e,t,r)},isVisible:function(e){return i.isVisible("overlay",e)},getPadding:function(e){return i.getPadding("overlay",e)}})),r.drawing.addAtlasRenderType("node-underlay",dC({collection:"node",getBoundingBox:t.getElementBox,getKey:function(e){return i.getStyleKey("underlay",e)},drawElement:function(e,t,r){return i.draw("underlay",e,t,r)},isVisible:function(e){return i.isVisible("underlay",e)},getPadding:function(e){return i.getPadding("underlay",e)}})),r.drawing.addAtlasRenderType("edge-source-label",dC({collection:"label",getKey:t.getSourceLabelKey,getBoundingBox:t.getSourceLabelBox,drawElement:t.drawSourceLabel,getRotation:_("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:a("source-label")})),r.drawing.addAtlasRenderType("edge-target-label",dC({collection:"label",getKey:t.getTargetLabelKey,getBoundingBox:t.getTargetLabelBox,drawElement:t.drawTargetLabel,getRotation:_("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:a("target-label")}));var o=nv((function(){console.log("garbage collect flag set"),r.data.gc=!0}),1e4);r.onUpdateEleCalcs((function(e,t){var n=!1;t&&t.length>0&&(n|=r.drawing.invalidate(t)),n&&o()})),function(e){var t=e.render;e.render=function(r){r=r||{};var n=e.cy;e.webgl&&(n.zoom()>vA?(!function(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,r)):(!function(e){var t=function(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.canvasWidth,e.canvasHeight),t.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),xC(e,r,uC.SCREEN)))};var r=e.matchCanvasSize;e.matchCanvasSize=function(t){r.call(e,t),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(t,r,n,_){return function(e,t,r){var n,_,a,i=function(e,t,r){var n,_,a,i,o=KA(e),l=o.pan,s=o.zoom,c=function(e,t,r,n,_){var a=n*r+t.x,i=_*r+t.y;return[a,i=Math.round(e.canvasHeight-i)]}(e,l,s,t,r),u=Ip(c,2),f=u[0],d=u[1],h=6;if(n=f-h/2,_=d-h/2,i=h,0===(a=h)||0===i)return[];var p=e.data.contexts[e.WEBGL];p.bindFramebuffer(p.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(p.viewport(0,0,p.canvas.width,p.canvas.height),xC(e,null,uC.PICKING),e.pickingFrameBuffer.needsDraw=!1);var g=a*i,v=new Uint8Array(4*g);p.readPixels(n,_,a,i,p.RGBA,p.UNSIGNED_BYTE,v),p.bindFramebuffer(p.FRAMEBUFFER,null);for(var m=new Set,y=0;y<g;y++){var w=eC(v.slice(4*y,4*y+4))-1;w>=0&&m.add(w)}return m}(e,t,r),o=e.getCachedZSortedEles(),l=Lp(i);try{for(l.s();!(a=l.n()).done;){var s=o[a.value];if(!n&&s.isNode()&&(n=s),!_&&s.isEdge()&&(_=s),n&&_)break}}catch(e){l.e(e)}finally{l.f()}return[n,_].filter(Boolean)}(e,t,r)};var n=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){n.call(e),e.pickingFrameBuffer.needsDraw=!0};var _=e.notify;e.notify=function(t,r){_.call(e,t,r),"viewport"===t||"bounds"===t?e.pickingFrameBuffer.needsDraw=!0:"background"===t&&e.drawing.invalidate(r,{type:"node-body"})}}(r)};for(var PC={drawPolygonPath:function(e,t,r,n,_,a){var i=n/2,o=_/2;e.beginPath&&e.beginPath(),e.moveTo(t+i*a[0],r+o*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+i*a[2*l],r+o*a[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,n,_,a,i){i.forEach((function(t){return $E(e,t)})),e.closePath()},drawRoundRectanglePath:function(e,t,r,n,_,a){var i=n/2,o=_/2,l="auto"===a?Zm(n,_):Math.min(a,o,i);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+i,r-o,t+i,r,l),e.arcTo(t+i,r+o,t,r+o,l),e.arcTo(t-i,r+o,t-i,r,l),e.arcTo(t-i,r-o,t,r-o,l),e.lineTo(t,r-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,n,_,a){var i=n/2,o=_/2,l="auto"===a?Zm(n,_):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+i,r-o),e.lineTo(t+i,r),e.arcTo(t+i,r+o,t,r+o,l),e.arcTo(t-i,r+o,t-i,r,l),e.lineTo(t-i,r-o),e.lineTo(t,r-o),e.closePath()},drawCutRectanglePath:function(e,t,r,n,_,a,i){var o=n/2,l=_/2,s="auto"===i?8:i;e.beginPath&&e.beginPath(),e.moveTo(t-o+s,r-l),e.lineTo(t+o-s,r-l),e.lineTo(t+o,r-l+s),e.lineTo(t+o,r+l-s),e.lineTo(t+o-s,r+l),e.lineTo(t-o+s,r+l),e.lineTo(t-o,r+l-s),e.lineTo(t-o,r-l+s),e.closePath()},drawBarrelPath:function(e,t,r,n,_){var a=n/2,i=_/2,o=t-a,l=t+a,s=r-i,c=r+i,u=Jm(n,_),f=u.widthOffset,d=u.heightOffset,h=u.ctrlPtOffsetPct*f;e.beginPath&&e.beginPath(),e.moveTo(o,s+d),e.lineTo(o,c-d),e.quadraticCurveTo(o+h,c,o+f,c),e.lineTo(l-f,c),e.quadraticCurveTo(l-h,c,l,c-d),e.lineTo(l,s+d),e.quadraticCurveTo(l-h,s,l-f,s),e.lineTo(o+f,s),e.quadraticCurveTo(o+h,s,o,s+d),e.closePath()}},OC=Math.sin(0),EC=Math.cos(0),AC={},CC={},SC=Math.PI/40,TC=0*Math.PI;TC<2*Math.PI;TC+=SC)AC[TC]=Math.sin(TC),CC[TC]=Math.cos(TC);PC.drawEllipsePath=function(e,t,r,n,_){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,_/2,0,0,2*Math.PI);else for(var a,i,o=n/2,l=_/2,s=0*Math.PI;s<2*Math.PI;s+=SC)a=t-o*AC[s]*OC+o*CC[s]*EC,i=r+l*CC[s]*OC+l*AC[s]*EC,0===s?e.moveTo(a,i):e.lineTo(a,i);e.closePath()};var NC={};function LC(e){var t=e.indexOf(",");return e.substr(t+1)}function MC(e,t,r){var n=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new uw((function(n,_){try{t.toBlob((function(e){null!=e?n(e):_(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){_(e)}}));case"blob":return function(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),_=new Uint8Array(n),a=0;a<r.length;a++)_[a]=r.charCodeAt(a);return new Blob([n],{type:t})}(LC(n()),r);case"base64":return LC(n());default:return n()}}NC.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},NC.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),_=e.full?Math.ceil(r.w):n[2],a=e.full?Math.ceil(r.h):n[3],i=Pg(e.maxWidth)||Pg(e.maxHeight),o=this.getPixelRatio(),l=1;if(void 0!==e.scale)_*=e.scale,a*=e.scale,l=e.scale;else if(i){var s=1/0,c=1/0;Pg(e.maxWidth)&&(s=l*e.maxWidth/_),Pg(e.maxHeight)&&(c=l*e.maxHeight/a),_*=l=Math.min(s,c),a*=l}i||(_*=o,a*=o,l*=o);var u=document.createElement("canvas");u.width=_,u.height=a,u.style.width=_+"px",u.style.height=a+"px";var f=u.getContext("2d");if(_>0&&a>0){f.clearRect(0,0,_,a),f.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(e.full)f.translate(-r.x1*l,-r.y1*l),f.scale(l,l),this.drawElements(f,d),f.scale(1/l,1/l),f.translate(r.x1*l,r.y1*l);else{var h=t.pan(),p={x:h.x*l,y:h.y*l};l*=t.zoom(),f.translate(p.x,p.y),f.scale(l,l),this.drawElements(f,d),f.scale(1/l,1/l),f.translate(-p.x,-p.y)}e.bg&&(f.globalCompositeOperation="destination-over",f.fillStyle=e.bg,f.rect(0,0,_,a),f.fill())}return u},NC.png=function(e){return MC(e,this.bufferCanvasImage(e),"image/png")},NC.jpg=function(e){return MC(e,this.bufferCanvasImage(e),"image/jpeg")};var IC={nodeShapeImpl:function(e,t,r,n,_,a,i,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,_,a);case"polygon":return this.drawPolygonPath(t,r,n,_,a,i);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,_,a,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,_,a,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,_,a,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,_,a,o);case"barrel":return this.drawBarrelPath(t,r,n,_,a)}}},jC=DC,RC=DC.prototype;function DC(e){var t=this,r=t.cy.window().document;e.webgl&&(RC.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(RC.CANVAS_LAYERS),contexts:new Array(RC.CANVAS_LAYERS),canvasNeedsRedraw:new Array(RC.CANVAS_LAYERS),bufferCanvases:new Array(RC.BUFFER_COUNT),bufferContexts:new Array(RC.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",_="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=_,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=e.cy.container();i.appendChild(t.data.canvasContainer),i.style[n]=_;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};zp&&zp.userAgent.match(/msie|trident|edge/i)&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var l=0;l<RC.CANVAS_LAYERS;l++){var s=t.data.canvases[l]=r.createElement("canvas"),c=RC.CANVAS_TYPES[l];t.data.contexts[l]=s.getContext(c),t.data.contexts[l]||Av("Could not create canvas of type "+c),Object.keys(o).forEach((function(e){s.style[e]=o[e]})),s.style.position="absolute",s.setAttribute("data-id","layer"+l),s.style.zIndex=String(RC.CANVAS_LAYERS-l),t.data.canvasContainer.appendChild(s),t.data.canvasNeedsRedraw[l]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[RC.NODE].setAttribute("data-id","layer"+RC.NODE+"-node"),t.data.canvases[RC.SELECT_BOX].setAttribute("data-id","layer"+RC.SELECT_BOX+"-selectbox"),t.data.canvases[RC.DRAG].setAttribute("data-id","layer"+RC.DRAG+"-drag"),t.data.canvases[RC.WEBGL]&&t.data.canvases[RC.WEBGL].setAttribute("data-id","layer"+RC.WEBGL+"-webgl");for(l=0;l<RC.BUFFER_COUNT;l++)t.data.bufferCanvases[l]=r.createElement("canvas"),t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d"),t.data.bufferCanvases[l].style.position="absolute",t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),t.data.bufferCanvases[l].style.zIndex=String(-l-1),t.data.bufferCanvases[l].style.visibility="hidden";t.pathsEnabled=!0;var u=xm(),f=function(e){return{x:-e.w/2,y:-e.h/2}},d=function(e){return e[0]._private.nodeKey},h=function(e){return e[0]._private.labelStyleKey},p=function(e){return e[0]._private.sourceLabelStyleKey},g=function(e){return e[0]._private.targetLabelStyleKey},v=function(e,r,n,_,a){return t.drawElement(e,r,n,!1,!1,a)},m=function(e,r,n,_,a){return t.drawElementText(e,r,n,_,"main",a)},y=function(e,r,n,_,a){return t.drawElementText(e,r,n,_,"source",a)},w=function(e,r,n,_,a){return t.drawElementText(e,r,n,_,"target",a)},b=function(e){return e.boundingBox(),e[0]._private.bodyBounds},k=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||u},x=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||u},P=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||u},O=function(e,t){return t},E=function(e){return{x:((t=b(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},A=function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}},C=function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}},S=function(e){return A("",C(e,"labelX","labelY"),e)},T=function(e){return A("source",C(e,"sourceLabelX","sourceLabelY"),e)},N=function(e){return A("target",C(e,"targetLabelX","targetLabelY"),e)},L=function(e){return f(b(e))},M=function(e){return f(x(e))},I=function(e){return f(P(e))},j=function(e){var t=k(e),r=f(k(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w-(t.leftPad||0);break;case"right":r.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h-(t.topPad||0);break;case"bottom":r.y=-(t.botPad||0)}}return r},R=t.data.eleTxrCache=new wA(t,{getKey:d,doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:v,getBoundingBox:b,getRotationPoint:E,getRotationOffset:L,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),D=t.data.lblTxrCache=new wA(t,{getKey:h,drawElement:m,getBoundingBox:k,getRotationPoint:S,getRotationOffset:j,isVisible:O}),F=t.data.slbTxrCache=new wA(t,{getKey:p,drawElement:y,getBoundingBox:x,getRotationPoint:T,getRotationOffset:M,isVisible:O}),B=t.data.tlbTxrCache=new wA(t,{getKey:g,drawElement:w,getBoundingBox:P,getRotationPoint:N,getRotationOffset:I,isVisible:O}),z=t.data.lyrTxrCache=new kA(t);t.onUpdateEleCalcs((function(e,t){R.invalidateElements(t),D.invalidateElements(t),F.invalidateElements(t),B.invalidateElements(t),z.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}}));var q=function(e){for(var t=0;t<e.length;t++)z.enqueueElementRefinement(e[t].ele)};R.onDequeue(q),D.onDequeue(q),F.onDequeue(q),B.onDequeue(q),e.webgl&&t.initWebgl(e,{getStyleKey:d,getLabelKey:h,getSourceLabelKey:p,getTargetLabelKey:g,drawElement:v,drawLabel:m,drawSourceLabel:y,drawTargetLabel:w,getElementBox:b,getLabelBox:k,getSourceLabelBox:x,getTargetLabelBox:P,getElementRotationPoint:E,getElementRotationOffset:L,getLabelRotationPoint:S,getSourceLabelRotationPoint:T,getTargetLabelRotationPoint:N,getLabelRotationOffset:j,getSourceLabelRotationOffset:M,getTargetLabelRotationOffset:I})}RC.CANVAS_LAYERS=3,RC.SELECT_BOX=0,RC.DRAG=1,RC.NODE=2,RC.WEBGL=3,RC.CANVAS_TYPES=["2d","2d","2d","webgl2"],RC.BUFFER_COUNT=3,RC.TEXTURE_BUFFER=0,RC.MOTIONBLUR_BUFFER_NODE=1,RC.MOTIONBLUR_BUFFER_DRAG=2,RC.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[RC.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[RC.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[RC.SELECT_BOX]=t;break;case"gc":r.data.gc=!0}};var FC="undefined"!=typeof Path2D;RC.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},RC.usePaths=function(){return FC&&this.pathsEnabled},RC.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},RC.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},RC.makeOffscreenCanvas=function(e,t){var r;"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":Dp(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t);return r},[AA,MA,zA,VA,UA,WA,HA,wC,PC,NC,IC].forEach((function(e){Gg(RC,e)}));var BC=[{type:"layout",extensions:mE},{type:"renderer",extensions:[{name:"null",impl:yE},{name:"base",impl:fA},{name:"canvas",impl:jC}]}],zC={},qC={};function VC(e,t,r){var n=r,_=function(r){Sv("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===e){if(NO.prototype[t])return _(t);NO.prototype[t]=r}else if("collection"===e){if(YP.prototype[t])return _(t);YP.prototype[t]=r}else if("layout"===e){for(var a=function(e){this.options=e,r.call(this,e),xg(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},i=a.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var s=o[l];i[s]=i[s]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var c=r.prototype.stop;i.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var u=function(e){return e._private.cy},f={addEventFields:function(e,t){t.layout=e,t.cy=u(e),t.target=e},bubble:function(){return!0},parent:function(e){return u(e)}};Gg(i,{createEmitter:function(){return this._private.emitter=new uP(f,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),Lk.eventAliasesOn(i),n=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var d=UC("renderer","base"),h=d.prototype,p=r,g=r.prototype,v=function(){d.apply(this,arguments),p.apply(this,arguments)},m=v.prototype;for(var y in h){var w=h[y];if(null!=g[y])return _(y);m[y]=w}for(var b in g)m[b]=g[b];h.clientFunctions.forEach((function(e){m[e]=m[e]||function(){Av("Renderer does not implement `renderer."+e+"()` on its prototype")}})),n=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Av(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Yg({map:zC,keys:[e,t],value:n})}function UC(e,t){return Hg({map:zC,keys:[e,t]})}function GC(e,t,r,n,_){return Yg({map:qC,keys:[e,t,r,n],value:_})}function WC(e,t,r,n){return Hg({map:qC,keys:[e,t,r,n]})}var $C=function(){return 2===arguments.length?UC.apply(null,arguments):3===arguments.length?VC.apply(null,arguments):4===arguments.length?WC.apply(null,arguments):5===arguments.length?GC.apply(null,arguments):void Av("Invalid extension access syntax")};NO.prototype.extension=$C,BC.forEach((function(e){e.extensions.forEach((function(t){VC(e.type,t.name,t.impl)}))}));var YC=function(){if(!(this instanceof YC))return new YC;this.length=0},HC=YC.prototype;HC.instanceString=function(){return"stylesheet"},HC.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},HC.css=function(e,t){var r=this.length-1;if(wg(e))this[r].properties.push({name:e,value:t});else if(xg(e))for(var n=e,_=Object.keys(n),a=0;a<_.length;a++){var i=_[a],o=n[i];if(null!=o){var l=EO.properties[i]||EO.properties[jg(i)];if(null!=l){var s=l.name,c=o;this[r].properties.push({name:s,value:c})}}}return this},HC.style=HC.css,HC.generateStyle=function(e){var t=new EO(e);return this.appendToStyle(t)},HC.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,_=r.properties;e.selector(n);for(var a=0;a<_.length;a++){var i=_[a];e.css(i.name,i.value)}}return e};var XC=function(e){return void 0===e&&(e={}),xg(e)?new NO(e):wg(e)?$C.apply($C,arguments):void 0};XC.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(XC),e.apply(null,t),this},XC.warnings=function(e){return Cv(e)},XC.version="3.31.1",XC.stylesheet=XC.Stylesheet=YC;var ZC={};ZC=(e=>{return t={432:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},602:(e,t,r)=>{var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,_=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){_=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(_)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_=r(625).layoutBase.LinkedList,a={getTopMostNodes:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].id()]=!0;var n=e.filter((function(e,r){"number"==typeof e&&(e=r);for(var n=e.parent()[0];null!=n;){if(t[n.id()])return!1;n=n.parent()[0]}return!0}));return n},connectComponents:function(e,t,r,n){var a=new _,i=new Set,o=[],l=void 0,s=void 0,c=void 0,u=!1,f=1,d=[],h=[],p=function(){var n=e.collection();h.push(n);var _=r[0],p=e.collection();p.merge(_).merge(_.descendants().intersection(t)),o.push(_),p.forEach((function(e){a.push(e),i.add(e),n.merge(e)}));for(var g=function(){_=a.shift();var s=e.collection();_.neighborhood().nodes().forEach((function(e){t.intersection(_.edgesWith(e)).length>0&&s.merge(e)}));for(var c=0;c<s.length;c++){var u=s[c];null==(l=r.intersection(u.union(u.ancestors())))||i.has(l[0])||l.union(l.descendants()).forEach((function(e){a.push(e),i.add(e),n.merge(e),r.has(e)&&o.push(e)}))}};0!=a.length;)g();if(n.forEach((function(e){t.intersection(e.connectedEdges()).forEach((function(e){n.has(e.source())&&n.has(e.target())&&n.merge(e)}))})),o.length==r.length&&(u=!0),!u||u&&f>1){s=o[0],c=s.connectedEdges().length,o.forEach((function(e){e.connectedEdges().length<c&&(c=e.connectedEdges().length,s=e)})),d.push(s.id());var v=e.collection();v.merge(o[0]),o.forEach((function(e){v.merge(e)})),o=[],r=r.difference(v),f++}};do{p()}while(!u);return n&&d.length>0&&n.set("dummy"+(n.size+1),d),h},relocateComponent:function(e,t,r){if(!r.fixedNodeConstraint){var _=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if("draft"==r.quality){var l=!0,s=!1,c=void 0;try{for(var u,f=t.nodeIndexes[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var d=u.value,h=n(d,2),p=h[0],g=h[1],v=r.cy.getElementById(p);if(v){var m=v.boundingBox(),y=t.xCoords[g]-m.w/2,w=t.xCoords[g]+m.w/2,b=t.yCoords[g]-m.h/2,k=t.yCoords[g]+m.h/2;y<_&&(_=y),w>a&&(a=w),b<i&&(i=b),k>o&&(o=k)}}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}var x=e.x-(a+_)/2,P=e.y-(o+i)/2;t.xCoords=t.xCoords.map((function(e){return e+x})),t.yCoords=t.yCoords.map((function(e){return e+P}))}else{Object.keys(t).forEach((function(e){var r=t[e],n=r.getRect().x,l=r.getRect().x+r.getRect().width,s=r.getRect().y,c=r.getRect().y+r.getRect().height;n<_&&(_=n),l>a&&(a=l),s<i&&(i=s),c>o&&(o=c)}));var O=e.x-(a+_)/2,E=e.y-(o+i)/2;Object.keys(t).forEach((function(e){var r=t[e];r.setCenter(r.getCenterX()+O,r.getCenterY()+E)}))}}},calcBoundingBox:function(e,t,r,n){for(var _=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,l=void 0,s=void 0,c=void 0,u=void 0,f=e.descendants().not(":parent"),d=f.length,h=0;h<d;h++){var p=f[h];_>(l=t[n.get(p.id())]-p.width()/2)&&(_=l),a<(s=t[n.get(p.id())]+p.width()/2)&&(a=s),i>(c=r[n.get(p.id())]-p.height()/2)&&(i=c),o<(u=r[n.get(p.id())]+p.height()/2)&&(o=u)}var g={};return g.topLeftX=_,g.topLeftY=i,g.width=a-_,g.height=o-i,g},calcParentsWithoutChildren:function(e,t){var r=e.collection();return t.nodes(":parent").forEach((function(e){var t=!1;e.children().forEach((function(e){"none"!=e.css("display")&&(t=!0)})),t||r.merge(e)})),r}};e.exports=a},455:e=>{function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var r=function(e){for(var r=[],n=!0,_=e.nodes(),a=!0,i=0;i<_.length;i++)_[i].parent().length>0&&(a=!1);if(!a)return r;if(e.nodes().filter((function(e){return e.incomers().edges().length>1})).length>1)return r;var o=new Set,l=[],s=new Map,c=cy.collection(),u=[];c=(c=c.merge(_)).toArray();for(var f=e.nodes().filter((function(e){return 0==e.incomers().length})).toArray();c.length>0&&f.length>0&&n;){l.push([f[0],0]),f.splice(0,1);for(var d=new Map;l.length>0&&n;){var h=l[0][0],p=l[0][1];l.splice(0,1),o.add(h),d.has(p)||d.set(p,[]),d.get(p).push(h.id());var g=h.neighborhood().nodes();for(i=0;i<g.length;i++){var v=g[i];if(s.get(h)!=v){if(o.has(v)){n=!1;break}l.push([v,p+1]),s.set(v,h)}}}if(n){var m=[].concat(t(o));for(r.push(m),u.push(d),i=0;i<m.length;i++){var y=m[i],w=c.indexOf(y);w>-1&&c.splice(w,1)}o=new Set,s=new Map,d=new Map}else r=[]}return{flatForest:r,levelOrders:u}};e.exports={handleTreeConstraint:function(e){e.cy;var t=e.eles,n=e.treeConstraint,_=r(t).levelOrders;if(0!=_.length){var a={};"L-R"==n.direction||"R-L"==n.direction?(a.vertical=[],_.forEach((function(e){e.forEach((function(e,t,r){e.length>1&&a.vertical.push(e)}))}))):(a.horizontal=[],_.forEach((function(e){e.forEach((function(e,t,r){e.length>1&&a.horizontal.push(e)}))})));var i=[];return t.edges().forEach((function(e){"L-R"==n.direction?i.push({left:e.source().id(),right:e.target().id(),gap:n.gap}):"R-L"==n.direction?i.push({left:e.target().id(),right:e.source().id(),gap:n.gap}):"T-B"==n.direction?i.push({top:e.source().id(),bottom:e.target().id(),gap:n.gap}):"B-T"==n.direction?i.push({top:e.target().id(),bottom:e.source().id(),gap:n.gap}):console.log("Invalid direction")})),_.forEach((function(e){e.forEach((function(e,t,r){if(e.length>1)for(var _=0;_<e.length-1;_++)"L-R"==n.direction?i.push({bottom:e[_],top:e[_+1],gap:n.gap}):"R-L"==n.direction?i.push({top:e[_],bottom:e[_+1],gap:n.gap}):"T-B"==n.direction?i.push({left:e[_],right:e[_+1],gap:n.gap}):"B-T"==n.direction?i.push({right:e[_],left:e[_+1],gap:n.gap}):console.log("Invalid direction")}))})),{alignmentConstarint:a,relativePlacementConstraint:i}}console.log("Given graph/component is not a tree/forest!")}}},126:(e,t,r)=>{var n=r(602),_=r(625).CoSELayout,a=r(625).CoSENode,i=r(625).layoutBase.PointD,o=r(625).layoutBase.DimensionD,l=r(625).layoutBase.LayoutConstants,s=r(625).layoutBase.FDLayoutConstants,c=r(625).CoSEConstants;e.exports={coseLayout:function(e,t){var r=e.cy,u=e.eles,f=u.nodes(),d=u.edges(),h=void 0,p=void 0,g=void 0,v={};e.randomize&&(h=t.nodeIndexes,p=t.xCoords,g=t.yCoords);var m=function(e){return"function"==typeof e},y=function(e,t){return m(e)?e(t):e},w=n.calcParentsWithoutChildren(r,u);null!=e.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(c.MAX_ITERATIONS=s.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),null!=e.tilingCompareBy&&(c.TILING_COMPARE_BY=e.tilingCompareBy),"proof"==e.quality?l.QUALITY=2:l.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!e.randomize,c.ANIMATE=s.ANIMATE=l.ANIMATE=e.animate,c.TILE=e.tile,c.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!e.randomize,l.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions,"transformed"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),"enforced"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),"cose"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),"all"==e.step&&(e.randomize?c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint?c.TREE_REDUCTION_ON_INCREMENTAL=!1:c.TREE_REDUCTION_ON_INCREMENTAL=!0;var b=new _,k=b.newGraphManager();return function e(t,r,_,l){for(var s=r.length,c=0;c<s;c++){var u=r[c],f=null;0==u.intersection(w).length&&(f=u.children());var d=void 0,m=u.layoutDimensions({nodeDimensionsIncludeLabels:l.nodeDimensionsIncludeLabels});if(null!=u.outerWidth()&&null!=u.outerHeight())if(l.randomize)if(u.isParent()){var b=n.calcBoundingBox(u,p,g,h);d=0==u.intersection(w).length?t.add(new a(_.graphManager,new i(b.topLeftX,b.topLeftY),new o(b.width,b.height))):t.add(new a(_.graphManager,new i(b.topLeftX,b.topLeftY),new o(parseFloat(m.w),parseFloat(m.h))))}else d=t.add(new a(_.graphManager,new i(p[h.get(u.id())]-m.w/2,g[h.get(u.id())]-m.h/2),new o(parseFloat(m.w),parseFloat(m.h))));else d=t.add(new a(_.graphManager,new i(u.position("x")-m.w/2,u.position("y")-m.h/2),new o(parseFloat(m.w),parseFloat(m.h))));else d=t.add(new a(this.graphManager));d.id=u.data("id"),d.nodeRepulsion=y(l.nodeRepulsion,u),d.paddingLeft=parseInt(u.css("padding")),d.paddingTop=parseInt(u.css("padding")),d.paddingRight=parseInt(u.css("padding")),d.paddingBottom=parseInt(u.css("padding")),l.nodeDimensionsIncludeLabels&&(d.labelWidth=u.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,d.labelHeight=u.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,d.labelPosVertical=u.css("text-valign"),d.labelPosHorizontal=u.css("text-halign")),v[u.data("id")]=d,isNaN(d.rect.x)&&(d.rect.x=0),isNaN(d.rect.y)&&(d.rect.y=0),null!=f&&f.length>0&&e(_.getGraphManager().add(_.newGraph(),d),f,_,l)}}(k.addRoot(),n.getTopMostNodes(f),b,e),function(t,r,n){for(var _=0,a=0,i=0;i<n.length;i++){var o=n[i],l=v[o.data("source")],u=v[o.data("target")];if(l&&u&&l!==u&&0==l.getEdgesBetween(u).length){var f=r.add(t.newEdge(),l,u);f.id=o.id(),f.idealLength=y(e.idealEdgeLength,o),f.edgeElasticity=y(e.edgeElasticity,o),_+=f.idealLength,a++}}null!=e.idealEdgeLength&&(a>0?c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=_/a:m(e.idealEdgeLength)?c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=50:c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,c.MIN_REPULSION_DIST=s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH)}(b,k,d),function(e,t){t.fixedNodeConstraint&&(e.constraints.fixedNodeConstraint=t.fixedNodeConstraint),t.alignmentConstraint&&(e.constraints.alignmentConstraint=t.alignmentConstraint),t.relativePlacementConstraint&&(e.constraints.relativePlacementConstraint=t.relativePlacementConstraint)}(b,e),b.runLayout(),v}}},770:(e,t,r)=>{var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=r(432),a=r(602),i=r(455).handleTreeConstraint,o=r(208).spectralLayout,l=r(126).coseLayout,s=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(e){return 4500},idealEdgeLength:function(e){return 50},edgeElasticity:function(e){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,treeConstraint:void 0,ready:function(){},stop:function(){}}),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=_({},s,t)}return n(e,[{key:"run",value:function(){var e=this.options,t=e.cy,r=e.eles,n=[],_=[],s=void 0,c=[];!e.fixedNodeConstraint||Array.isArray(e.fixedNodeConstraint)&&0!=e.fixedNodeConstraint.length||(e.fixedNodeConstraint=void 0),e.alignmentConstraint&&(!e.alignmentConstraint.vertical||Array.isArray(e.alignmentConstraint.vertical)&&0!=e.alignmentConstraint.vertical.length||(e.alignmentConstraint.vertical=void 0),!e.alignmentConstraint.horizontal||Array.isArray(e.alignmentConstraint.horizontal)&&0!=e.alignmentConstraint.horizontal.length||(e.alignmentConstraint.horizontal=void 0)),!e.relativePlacementConstraint||Array.isArray(e.relativePlacementConstraint)&&0!=e.relativePlacementConstraint.length||(e.relativePlacementConstraint=void 0),(e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint||e.treeConstraint)&&(e.tile=!1,e.packComponents=!1,e.treeConstraint&&(e.fixedNodeConstraint=void 0,e.alignmentConstraint=void 0,e.relativePlacementConstraint=void 0,e.packComponents=!0));var u=void 0,f=!1;if(t.layoutUtilities&&e.packComponents&&((u=t.layoutUtilities("get"))||(u=t.layoutUtilities()),f=!0),r.nodes().length>0)if(f){var d=a.getTopMostNodes(e.eles.nodes());if((s=a.connectComponents(t,e.eles,d)).forEach((function(e){var t=e.boundingBox();c.push({x:t.x1+t.w/2,y:t.y1+t.h/2})})),e.randomize&&s.forEach((function(t){e.eles=t,n.push(o(e))})),"default"==e.quality||"proof"==e.quality){var h=t.collection();if(e.tile){var p=new Map,g=0,v={nodeIndexes:p,xCoords:[],yCoords:[]},m=[];if(s.forEach((function(e,t){0==e.edges().length&&(e.nodes().forEach((function(t,r){h.merge(e.nodes()[r]),t.isParent()||(v.nodeIndexes.set(e.nodes()[r].id(),g++),v.xCoords.push(e.nodes()[0].position().x),v.yCoords.push(e.nodes()[0].position().y))})),m.push(t))})),h.length>1){var y=h.boundingBox();c.push({x:y.x1+y.w/2,y:y.y1+y.h/2}),s.push(h),n.push(v);for(var w=m.length-1;w>=0;w--)s.splice(m[w],1),n.splice(m[w],1),c.splice(m[w],1)}}s.forEach((function(t,r){if(e.eles=t,e.treeConstraint){var o=i(e);o&&(e.alignmentConstraint=o.alignmentConstarint,e.relativePlacementConstraint=o.relativePlacementConstraint)}_.push(l(e,n[r])),a.relocateComponent(c[r],_[r],e)}))}else s.forEach((function(t,r){a.relocateComponent(c[r],n[r],e)}));var b=new Set;if(s.length>1){var k=[],x=r.filter((function(e){return"none"==e.css("display")}));s.forEach((function(t,r){var i=void 0;if("draft"==e.quality&&(i=n[r].nodeIndexes),t.nodes().not(x).length>0){var o={edges:[],nodes:[]},l=void 0;t.nodes().not(x).forEach((function(t){if("draft"==e.quality)if(t.isParent()){var s=a.calcBoundingBox(t,n[r].xCoords,n[r].yCoords,i);o.nodes.push({x:s.topLeftX,y:s.topLeftY,width:s.width,height:s.height})}else l=i.get(t.id()),o.nodes.push({x:n[r].xCoords[l]-t.boundingbox().w/2,y:n[r].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else _[r][t.id()]&&o.nodes.push({x:_[r][t.id()].getLeft(),y:_[r][t.id()].getTop(),width:_[r][t.id()].getWidth(),height:_[r][t.id()].getHeight()})})),t.edges().forEach((function(t){var l=t.source(),s=t.target();if("none"!=l.css("display")&&"none"!=s.css("display"))if("draft"==e.quality){var c=i.get(l.id()),u=i.get(s.id()),f=[],d=[];if(l.isParent()){var h=a.calcBoundingBox(l,n[r].xCoords,n[r].yCoords,i);f.push(h.topLeftX+h.width/2),f.push(h.topLeftY+h.height/2)}else f.push(n[r].xCoords[c]),f.push(n[r].yCoords[c]);if(s.isParent()){var p=a.calcBoundingBox(s,n[r].xCoords,n[r].yCoords,i);d.push(p.topLeftX+p.width/2),d.push(p.topLeftY+p.height/2)}else d.push(n[r].xCoords[u]),d.push(n[r].yCoords[u]);o.edges.push({startX:f[0],startY:f[1],endX:d[0],endY:d[1]})}else _[r][l.id()]&&_[r][s.id()]&&o.edges.push({startX:_[r][l.id()].getCenterX(),startY:_[r][l.id()].getCenterY(),endX:_[r][s.id()].getCenterX(),endY:_[r][s.id()].getCenterY()})})),o.nodes.length>0&&(k.push(o),b.add(r))}}));var P=u.packComponents(k,e.randomize).shifts;if("draft"==e.quality)n.forEach((function(e,t){var r=e.xCoords.map((function(e){return e+P[t].dx})),n=e.yCoords.map((function(e){return e+P[t].dy}));e.xCoords=r,e.yCoords=n}));else{var O=0;b.forEach((function(e){Object.keys(_[e]).forEach((function(t){var r=_[e][t];r.setCenter(r.getCenterX()+P[O].dx,r.getCenterY()+P[O].dy)})),O++}))}}}else{var E=e.eles.boundingBox();if(c.push({x:E.x1+E.w/2,y:E.y1+E.h/2}),e.randomize){var A=o(e);n.push(A)}"default"==e.quality||"proof"==e.quality?(_.push(l(e,n[0])),a.relocateComponent(c[0],_[0],e)):a.relocateComponent(c[0],n[0],e)}var C=function(t,r){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=r);var a=void 0,i=void 0,o=t.data("id");return _.forEach((function(e){o in e&&(a={x:e[o].getRect().getCenterX(),y:e[o].getRect().getCenterY()},i=e[o])})),e.nodeDimensionsIncludeLabels&&(i.labelWidth&&("left"==i.labelPosHorizontal?a.x+=i.labelWidth/2:"right"==i.labelPosHorizontal&&(a.x-=i.labelWidth/2)),i.labelHeight&&("top"==i.labelPosVertical?a.y+=i.labelHeight/2:"bottom"==i.labelPosVertical&&(a.y-=i.labelHeight/2))),null==a&&(a={x:t.position("x"),y:t.position("y")}),{x:a.x,y:a.y}}var l=void 0;return n.forEach((function(e){var r=e.nodeIndexes.get(t.id());null!=r&&(l={x:e.xCoords[r],y:e.yCoords[r]})})),null==l&&(l={x:t.position("x"),y:t.position("y")}),{x:l.x,y:l.y}};if("default"==e.quality||"proof"==e.quality||e.randomize){var S=a.calcParentsWithoutChildren(t,r),T=r.filter((function(e){return"none"==e.css("display")}));e.eles=r.not(T),r.nodes().not(":parent").not(T).layoutPositions(this,e,C),S.length>0&&S.forEach((function(e){e.position(C(e))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),e}();e.exports=c},208:(e,t,r)=>{var n=r(602),_=r(625).layoutBase.Matrix,a=r(625).layoutBase.SVD;e.exports={spectralLayout:function(e){var t=e.cy,r=e.eles,i=r.nodes(),o=r.nodes(":parent"),l=new Map,s=new Map,c=new Map,u=[],f=[],d=[],h=[],p=[],g=[],v=[],m=[],y=void 0,w=1e8,b=1e-9,k=e.piTol,x=e.samplingType,P=e.nodeSeparation,O=void 0,E=function(e,t,r){for(var n=[],_=0,a=0,i=0,o=void 0,l=[],c=0,f=1,d=0;d<y;d++)l[d]=w;for(n[a]=e,l[e]=0;a>=_;){i=n[_++];for(var h=u[i],v=0;v<h.length;v++)l[o=s.get(h[v])]==w&&(l[o]=l[i]+1,n[++a]=o);g[i][t]=l[i]*P}if(r){for(var m=0;m<y;m++)g[m][t]<p[m]&&(p[m]=g[m][t]);for(var b=0;b<y;b++)p[b]>c&&(c=p[b],f=b)}return f};n.connectComponents(t,r,n.getTopMostNodes(i),l),o.forEach((function(e){n.connectComponents(t,r,n.getTopMostNodes(e.descendants().intersection(r)),l)}));for(var A=0,C=0;C<i.length;C++)i[C].isParent()||s.set(i[C].id(),A++);var S=!0,T=!1,N=void 0;try{for(var L,M=l.keys()[Symbol.iterator]();!(S=(L=M.next()).done);S=!0){var I=L.value;s.set(I,A++)}}catch(e){T=!0,N=e}finally{try{!S&&M.return&&M.return()}finally{if(T)throw N}}for(var j=0;j<s.size;j++)u[j]=[];o.forEach((function(e){for(var t=e.children().intersection(r);0==t.nodes(":childless").length;)t=t.nodes()[0].children().intersection(r);var n=0,_=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach((function(e,t){e.connectedEdges().length<_&&(_=e.connectedEdges().length,n=t)})),c.set(e.id(),t.nodes(":childless")[n].id())})),i.forEach((function(e){var t=void 0;t=e.isParent()?s.get(c.get(e.id())):s.get(e.id()),e.neighborhood().nodes().forEach((function(n){r.intersection(e.edgesWith(n)).length>0&&(n.isParent()?u[t].push(c.get(n.id())):u[t].push(n.id()))}))}));var R=function(e){var r=s.get(e),n=void 0;l.get(e).forEach((function(_){n=t.getElementById(_).isParent()?c.get(_):_,u[r].push(n),u[s.get(n)].push(e)}))},D=!0,F=!1,B=void 0;try{for(var z,q=l.keys()[Symbol.iterator]();!(D=(z=q.next()).done);D=!0)R(z.value)}catch(e){F=!0,B=e}finally{try{!D&&q.return&&q.return()}finally{if(F)throw B}}var V=void 0;if((y=s.size)>2){O=y<e.sampleSize?y:e.sampleSize;for(var U=0;U<y;U++)g[U]=[];for(var G=0;G<O;G++)m[G]=[];return"draft"==e.quality||"all"==e.step?(function(e){var t=void 0;if(e){t=Math.floor(Math.random()*y);for(var r=0;r<y;r++)p[r]=w;for(var n=0;n<O;n++)h[n]=t,t=E(t,n,e)}else{!function(){for(var e=0,t=0,r=!1;t<O;){e=Math.floor(Math.random()*y),r=!1;for(var n=0;n<t;n++)if(h[n]==e){r=!0;break}r||(h[t]=e,t++)}}();for(var _=0;_<O;_++)E(h[_],_,e)}for(var a=0;a<y;a++)for(var i=0;i<O;i++)g[a][i]*=g[a][i];for(var o=0;o<O;o++)v[o]=[];for(var l=0;l<O;l++)for(var s=0;s<O;s++)v[l][s]=g[h[s]][l]}(x),function(){for(var e=a.svd(v),t=e.S,r=e.U,n=e.V,i=t[0]*t[0]*t[0],o=[],l=0;l<O;l++){o[l]=[];for(var s=0;s<O;s++)o[l][s]=0,l==s&&(o[l][s]=t[l]/(t[l]*t[l]+i/(t[l]*t[l])))}m=_.multMat(_.multMat(n,o),_.transpose(r))}(),function(){for(var e=void 0,t=void 0,r=[],n=[],a=[],i=[],o=0;o<y;o++)r[o]=Math.random(),n[o]=Math.random();r=_.normalize(r),n=_.normalize(n);for(var l=b,s=b,c=void 0;;){for(var u=0;u<y;u++)a[u]=r[u];if(r=_.multGamma(_.multL(_.multGamma(a),g,m)),e=_.dotProduct(a,r),r=_.normalize(r),l=_.dotProduct(a,r),(c=Math.abs(l/s))<=1+k&&c>=1)break;s=l}for(var h=0;h<y;h++)a[h]=r[h];for(s=b;;){for(var p=0;p<y;p++)i[p]=n[p];if(i=_.minusOp(i,_.multCons(a,_.dotProduct(a,i))),n=_.multGamma(_.multL(_.multGamma(i),g,m)),t=_.dotProduct(i,n),n=_.normalize(n),l=_.dotProduct(i,n),(c=Math.abs(l/s))<=1+k&&c>=1)break;s=l}for(var v=0;v<y;v++)i[v]=n[v];f=_.multCons(a,Math.sqrt(Math.abs(e))),d=_.multCons(i,Math.sqrt(Math.abs(t)))}(),V={nodeIndexes:s,xCoords:f,yCoords:d}):(s.forEach((function(e,r){f.push(t.getElementById(r).position("x")),d.push(t.getElementById(r).position("y"))})),V={nodeIndexes:s,xCoords:f,yCoords:d}),V}var W=s.keys(),$=t.getElementById(W.next().value),Y=$.position(),H=$.outerWidth();if(f.push(Y.x),d.push(Y.y),2==y){var X=t.getElementById(W.next().value).outerWidth();f.push(Y.x+H/2+X/2+e.idealEdgeLength),d.push(Y.y)}return V={nodeIndexes:s,xCoords:f,yCoords:d}}}},497:(e,t,r)=>{var n=r(770),_=function(e){e&&e("layout","fcose",n)};"undefined"!=typeof cytoscape&&_(cytoscape),e.exports=_},625:t=>{t.exports=e}},r={},function e(n){var _=r[n];if(void 0!==_)return _.exports;var a=r[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(497);var t,r})(a("cwOQi"));s=a("3krpC"),_t=a("4a4bO");var KC,JC=Object.prototype.hasOwnProperty;KC=function(e){if(null==e)return!0;if(rt(e)&&(Qe(e)||"string"==typeof e||"function"==typeof e.splice||_t(e)||ft(e)||$e(e)))return!e.length;var t=xd(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ge(e))return!ad(e).length;for(var r in e)if(JC.call(e,r))return!1;return!0};const QC=r(s)("eczoo_jscomponents.codegraph.style"),eS=[{selector:"node",style:{color:"rgb(127, 48, 0)","background-color":"rgb(127, 48, 0)",label:"data(label)",width:15,height:15,"text-outline-color":"#fff","text-outline-width":1,"text-outline-opacity":.5,"min-zoomed-font-size":14}},{selector:"node[_isDomain=1]",style:{shape:"round-rectangle",width:25,height:25}},{selector:"node[_isKingdom=1]",style:{shape:"diamond",width:25,height:25}},{selector:"node[_isKingdomRootCode=1]",style:{shape:"diamond"}},{selector:"node[_hasParentKingdom=0]",style:{shape:"star",color:"rgb(136, 91, 7)","background-color":"rgb(136, 91, 7)",width:20,height:20}},{selector:"node[_isPropertyCode=1]",style:{"font-style":"italic"}},{selector:"node.useDomainColors[_domainColorIndex=0]",style:{color:"rgb(95,69,130)","background-color":"rgb(95,69,130)"}},{selector:"node.useDomainColors[_domainColorIndex=1]",style:{color:"rgb(50,108,110)","background-color":"rgb(50,108,110)"}},{selector:"node.useDomainColors[_domainColorIndex=2]",style:{color:"rgb(111,50,72)","background-color":"rgb(111,50,72)"}},{selector:"edge",style:{width:2,opacity:.667,"target-arrow-shape":"triangle","curve-style":"bezier","font-size":"12px"}},{selector:'edge[_relType="parent"]',style:{width:2,"line-color":"#00307f","target-arrow-color":"#00307f",color:"#00307f"}},{selector:"edge[_primaryParent=0]",style:{width:2}},{selector:'edge[_relType="cousin"]',style:{width:1,"target-arrow-shape":"none","line-style":"dashed","line-color":"#00883f","target-arrow-color":"#00883f",color:"#00883f"}},{selector:".isolationRoot",style:{color:"rgb(230,50,50)","font-weight":"bold","background-color":"rgb(230,50,50)","text-opacity":1,"text-outline-color":"#fff","text-outline-width":1,"text-outline-opacity":1}},{selector:".layoutFadeExtra",style:{opacity:.3}},{selector:"node.layoutFadeExtra",style:{width:10,height:10}},{selector:".hidden, .isolationHidden, .hiddenSecondaryEdge",style:{display:"none"}},{selector:".importantNode",style:{"font-size":32,"font-weight":"bold"}},{selector:".enableHighlightPrimaryParents[_primaryParent=0]",style:{"line-style":"dotted"}},{selector:".isolationRootConnectingEdge.highlightRootConnectingEdge",style:{width:4,opacity:1,"font-size":8,"text-justification":"auto","source-text-offset":150,"target-text-offset":150,"text-opacity":1,"text-background-color":"#ffffff","text-background-opacity":.9,"text-background-shape":"round-rectangle","text-background-padding":"1px","text-max-width":80,"text-wrap":"wrap","source-text-rotation":"autorotate","target-text-rotation":"autorotate"}},{selector:".isolationRootConnectingEdge.highlightRootIncomingEdge",style:{"target-label":"data(source_label)"}},{selector:".isolationRootConnectingEdge.highlightRootOutgoingEdge",style:{"source-label":"data(target_label)"}},{selector:".isolationRootConnectingEdge.highlightRootOutgoingEdge[_primaryParent=1]",style:{width:6}},{selector:".highlight, .searchMatchHighlight",style:{opacity:1,color:"rgb(220,80,0)","background-color":"rgb(220,80,0)",width:40,height:40,"font-size":32}},{selector:".dimmed, .searchNoMatchDimmed",style:{opacity:.3}},{selector:'edge.DEBUG.layoutParent[_relType="parent"], edge.DEBUG.layoutParent[_relType="cousin"]',style:{width:3,"line-color":"rgb(120,0,50)",color:"rgb(120,0,50)"}},{selector:".DEBUG.prelayoutOutOfLayoutTree",style:{color:"rgb(230, 6, 204)","background-color":"rgb(230, 6, 204)"}}];function tS(e){let t={};if(e??={},QC("getCyStyleJson: options are ",JSON.stringify(Object.fromEntries(Object.entries(e).map((([e,t])=>{try{return[e,JSON.parse(JSON.stringify(t))]}catch(t){return QC("[Cannot stringify value for debug message!] - ",t),[e,"<cannot stringify value>"]}}))))),e.matchWebPageFonts){let r=e.window??window,n=r.getComputedStyle(r.document.body);t["font-family"]=n.getPropertyValue("font-family"),t["font-size"]=n.getPropertyValue("font-size"),t["font-weight"]=n.getPropertyValue("font-weight"),t["font-style"]=n.getPropertyValue("font-style")}return null!=e.fontFamily&&(t["font-family"]=e.fontFamily),null!=e.fontSize&&(t["font-size"]=e.fontSize),null!=e.fontWeight&&(t["font-weight"]=e.fontWeight),null!=e.fontStyle&&(t["font-style"]=e.fontStyle),QC("getCyStyleJson: customFontStyle is ",JSON.stringify(t)),r(KC)(t)?eS:[].concat([{selector:"*",style:t}],eS)}s=a("3krpC"),s=a("3krpC");const rS=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.graphtools");function nS(e){return null===e?"null":void 0===e?"undef":e.isNode()?e.id():e.isEdge()?`[${e.source().id()} → ${e.target().id()}]`:`UNKNOWN{${JSON.stringify(e)}}`}function _S(e){return null===e?"null":void 0===e?"undef":e.map(nS).join(" ; ")}function aS({cy:e,visibleElements:t,allElements:r,connectingNodesMaxPathLength:n,connectingNodesMaxNumPaths:_,connectingNodesOnlyKeepPathsWithAdditionalLength:a,edgeLengthFn:i}){n??=3.5,_??=5,a??=0,i??=e=>1,rS(`connectingPathsComponents: visible elements = ${_S(t)}`);let o=t.nodes(),l=[];for(;o.length;){let s=o[0];rS(`New round of identifying a graph component.  Using representative node ${nS(s)}`);let c=oS({allElements:r,rootNode:s,recordShortestPathsTo:t.nodes(),edgeLengthFn:i,maxPathLength:n,maxNumPaths:_,maxAdditionalLength:a}),u=[];for(const[e,r]of Object.entries(c))if(0===r.shortestPathLength){const r=t.getElementById(e);if(null==r){console.error("Internal inconsistency: got a node at distance zero by it I couldn't find it in visibleElements!");continue}u.push(r)}if(0===u.length){console.error("Internal inconsistency: I was not able to identify a new component, even though there are remaining visible nodes to process.");break}const f=e.collection().union(u);o=o.difference(f);const d=f.union(t.edges().filter((e=>f.has(e.source())&&f.has(e.target()))));let h={representativeNode:s,nodes:f,elements:d,shortestPathsTo:c,shortestPathsToComponents:null};l.push(h)}for(let[e,t]of l.entries())t.shortestPathsToComponents=new Array(l.length),t.shortestPathsToComponents[e]={paths:[[]],shortestPath:[],shortestPathLength:0};for(let e=0;e<l.length;++e){let t=l[e];for(let r=e+1;r<l.length;++r){const n=l[r],_=t.shortestPathsTo[n.representativeNode.id()];rS(`Distance between component #${e} and #${r} is ${_.shortestPathLength}. connectingShortestPaths =`,_),t.shortestPathsToComponents[r]=_,n.shortestPathsToComponents[e]={paths:_.paths.map(iS),shortestPath:[..._.shortestPath].reverse(),shortestPathLength:_.shortestPathLength}}}return{componentInfos:l}}const iS=e=>({pathLength:e.pathLength,path:[...e.path].reverse(),stepPath:[...e.stepPath].reverse(),to:e.path.length?e.path[0]:null});function oS({allElements:e,rootNode:t,recordShortestPathsTo:r,edgeLengthFn:n,maxPathLength:_,maxNumPaths:a,maxAdditionalLength:i}){rS("dijkstraMultiShortestPaths()!",{allElements:e,rootNode:t,recordShortestPathsTo:r,edgeLengthFn:n,maxPathLength:_,maxNumPaths:a,maxAdditionalLength:i});const o=e.nodes();let l=[],s={},c={};for(const e of r.nodes())s[e.id()]={paths:[]};for(const e of o)c[e.id()]=0;l=[{pathLength:0,stepPath:[],path:[],to:t}];const u=(e,t)=>{const r=t.connectedNodes().filter((t=>t.id()!==e.to.id()))[0];if(null==r||-1!==e.path.indexOf(r))return;const i=n(t),o=e.pathLength+i;if(null!=a&&o>_)return;const s=[...e.path,e.to,t];let c=[...e.stepPath];if(0!==i)c.push(t);else for(const e of l)if(e.to===r&&e.stepPath.length===c.length&&c.every(((t,r)=>t===e.stepPath[r])))return;const u={pathLength:o,path:s,stepPath:c,to:r};let f=0;for(f=0;f<l.length;++f){if(l[f].pathLength>o)break}l.splice(f,0,u)},f=e=>{const t=e.to.id();if(!r.has(e.to))return;let n=s[t].paths;if(n.length>0&&e.pathLength>n[0].pathLength+i)return;let _=0;for(_=0;_<n.length&&!(n[_].pathLength>e.pathLength);++_);n.splice(_,0,e)};for(;l.length;){const t=l.shift(),r=t.to.id();if(c[r]+=1,f(t),c[r]<=a){const r=t.to.connectedEdges().filter((t=>e.has(t)&&e.has(t.source())&&e.has(t.target())));for(const e of r)u(t,e)}}for(const[e,t]of Object.entries(s))t.paths.length?(t.shortestPath=t.paths[0].path,t.shortestPathLength=t.paths[0].pathLength):(t.shortestPath=[],t.shortestPathLength=1/0);return s}var lS,sS={};sS=function(e,t){for(var r,n=-1,_=e.length;++n<_;){var a=t(e[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r},lS=function(e){return e&&e.length?sS(e,Nt):0};const cS=r(s)("eczoo_jscomponents.codegraph.prelayout"),uS={layoutParentEdgeSelector:".layoutParent",ignoreParentRootEdgeDirection:!1,origin:{position:{x:0,y:0},rootPositioning:"linear",rootPositionXOffset:500,rootPositionYOffset:0,rootPositionCircleRootSpacing:200,rootPositionCircleDirection:Math.PI/2,rootPositionCircleAngularSpread:.8*Math.PI,angularSpread:2*Math.PI,radius:200,direction:Math.PI/2,useWeights:!1},radiusSegmentLevels:[400,400],radiusSegmentLevelFactor:1.1,weightCalcLevels:6,weightCalcSecondaryFactor:.1},fS={linear:({numRootNodes:e,origin:t})=>r=>({position:{x:t.position.x+(r-e/2)*t.rootPositionXOffset,y:t.position.y+(r-e/2)*t.rootPositionYOffset}}),circle:({numRootNodes:e,origin:t})=>{const r=e-1,n=r*t.rootPositionCircleRootSpacing/t.rootPositionCircleAngularSpread,_=0===r?0:t.rootPositionCircleAngularSpread/r;return cS(`Preparing to position ${e} root nodes...`),a=>{const i=a+.5-r/2,o=t.rootPositionCircleDirection+i*_;return cS(`Position #${a}/${e} at phi=${o}; circleRadius=${n}, origin.position=${JSON.stringify(t.position)}`),{position:{x:t.position.x+n*Math.cos(o),y:t.position.y+n*Math.sin(o)},direction:o,angularSpread:t.rootPositionCircleAngularSpread/e}}}};class dS{constructor({cy:e,rootNodeIds:t,rootNodesPrelayoutInfo:n,prelayoutOptions:_}){this.cy=e,this.rootNodeIds=t,this.rootNodesPrelayoutInfo=n,this.prelayoutOptions=r(o)({},uS,_)}run(){let e=[],t={},r={},n=[],_=0;for(const e of this.rootNodeIds){let t=this.rootNodesPrelayoutInfo[e];null!=t?(r[e]=t,++_):n.push(e)}const a=n.length,i=this.prelayoutOptions.origin;if(_>0&&n.length>0)throw new Error("PrelayoutRadialTree.run(): If you position some of the root nodes, you should position all of them (in rootNodesPrelayoutInfo’)");let o=i.rootPositioning,l=fS[o];null!=o&&null!=l||(console.warn("Invalid root node positioning strategy!  Picking linear."),o="linear");const s=l({numRootNodes:a,origin:i});for(const[e,t]of n.entries()){const n=s(e);cS(`Root node ${e} is placed at ${JSON.stringify(n)}`),r[t]={radiusOffset:i.radius,direction:i.direction,angularSpread:i.angularSpread,...n}}for(const[n,_]of Object.entries(r)){cS(`Prelayout - Prepping root node ${n}`,{prelayoutInfo:_}),t[n]={position:_.position,isRoot:!0,relatedAs:"root"};const r=this.cy.getElementById(n);let a=null,o=null;a=r.incomers(this.prelayoutOptions.layoutParentEdgeSelector).edges(".layoutVisible"),o=r.outgoers(this.prelayoutOptions.layoutParentEdgeSelector).edges(".layoutVisible"),this.prelayoutOptions.ignoreParentEdgeDirection&&(a=a.union(o),o=[]),a.length&&e.push(new hS({cy:this.cy,root:{nodeId:n,radius:_.radiusOffset,position:_.position,direction:_.direction,angularSpread:_.angularSpread,propertyCodesSortOrder:_.propertyCodesSortOrder,useWeights:i.useWeights},prelayoutOptions:this.prelayoutOptions,branchOptions:{initialEdges:a},positionedNodesData:t})),o.length&&e.push(new hS({cy:this.cy,root:{nodeId:n,radius:_.radiusOffset,position:_.position,direction:_.direction+Math.PI,angularSpread:_.angularSpread,propertyCodesSortOrder:_.propertyCodesSortOrder,useWeights:i.useWeights},prelayoutOptions:this.prelayoutOptions,branchOptions:{initialEdges:o},positionedNodesData:t}))}for(const t of e)t.positionAndMarkNodesInData();for(const[e,r]of Object.entries(t)){let t=this.cy.getElementById(e);const{position:n,isRoot:_,relatedAs:a}=r;_?t.addClass(["prelayoutPositioned",`prelayoutRelatedAs_${a}`,"prelayoutRoot"]):t.addClass(["prelayoutPositioned",`prelayoutRelatedAs_${a}`]),t.position(n)}}}class hS{constructor({cy:e,root:t,prelayoutOptions:n,branchOptions:_,positionedNodesData:a}){this.cy=e,this.root=t,this.rootNode=this.cy.getElementById(this.root.nodeId),this.prelayoutOptions=n,this.branchOptions=r(o)({initialEdges:null,propertyCodesSortOrder:1},_),this.positionedNodesData=a,this.propertyCodesSortOrder=t.propertyCodesSortOrder,this.nodeOrderingInfoByLevel=null,this.nodeOrderingInfoByParent=null,this.nodePositioningInfo=null}_computeNodeInfos(){let e=[],t={};const r=this.prelayoutOptions.layoutParentEdgeSelector;let n=new Set,_=[{nodeId:this.root.nodeId,nodeConnectingEdge:null,level:0,parentNodeId:null,parentNodeOrderingInfo:null,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],relatedAs:"root"}],a=(e,t)=>{let r=e.source(),n=e.target();return r.id()===t?n:r};e.push({level:0,nodeInfos:_,levelTotalDescendantWeight:null}),t[""]={level:0,nodeInfos:_};let i=0;for(;_.length;){let o=[];i+=1;for(const e of _){const{nodeId:_,nodeConnectingEdge:l,parentNodeOrderingInfo:s}=e;let c=s,u=0;for(;null!=c;){for(c.totalNumDescendants+=1;c.numDescendants.length<=u;)c.numDescendants.push(0);c.numDescendants[u]+=1,c=c.parentNodeOrderingInfo,u+=1}let f=this.cy.getElementById(_),d=null;1===i&&(d=this.branchOptions.initialEdges),null==d&&(d=f.connectedEdges(r).edges(".layoutVisible"));let h=[];for(const t of d){if(t===l)continue;const r=a(t,_),o=r.id();if(Object.hasOwn(this.positionedNodesData,o)||n.has(o))continue;n.add(o);let s={nodeId:o,nodeConnectingEdge:t,level:i,parentNodeId:e.nodeId,parentNodeOrderingInfo:e,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],isPropertyCode:r.data("_isPropertyCode")?1:0};h.push(s)}e.connectedNodesInfos.push(...h),o.push(...h),t[_]={level:i,nodeInfos:h}}e.push({level:i,nodeInfos:o,levelTotalDescendantWeight:null}),_=o}this.nodeOrderingInfoByLevel=e,this.nodeOrderingInfoByParent=t}_computeNodeDescendantWeightsAndSortNodes(){const e=this.propertyCodesSortOrder;for(let e of this.nodeOrderingInfoByLevel){let t=0;for(let n of e.nodeInfos){let e=Math.max(1,r(lS)(n.numDescendants.slice(0,this.prelayoutOptions.weightCalcLevels))??0);"secondary"===n.relatedAs&&(e*=this.prelayoutOptions.weightCalcSecondaryFactor),n._descendantWeight=e,t+=e}e.levelTotalDescendantWeight=t}let t=[""];for(let n of this.nodeOrderingInfoByLevel){let _=[],a=[];for(let n of t){let t=this.nodeOrderingInfoByParent[n];const i=r(lS)(t.nodeInfos.map((e=>e._descendantWeight)));let o=0,l=[...t.nodeInfos],s=[];const c=l.length;for(;l.length;){let t=s.length*i/c,r=null,n=null,_=null;for(let a=0;a<l.length;++a){let i=l[a],s=o+i._descendantWeight-t,c=s*s,u=i.isPropertyCode?e:0;(null==n||u<_||u===_&&c<n)&&(_=u,n=c,r=a)}s.push(l[r]),l.splice(r,1)}t.nodeInfos=s,_.push(...s),a.push(...s.map((e=>e.nodeId)))}t=a,n.nodeInfos=_}}_distributeAngles({items:e,R:t,parentR:n,direction:_,angularSpread:a,isFirstLevel:i}){const o=.8*Math.PI/2,l=_-a/2,s=l+a;if(!(Number.isFinite(_)&&Number.isFinite(a)&&Number.isFinite(t)&&Number.isFinite(n)))throw new Error("Invalid inputs to _distributeAngles()! "+JSON.stringify({direction:_,angularSpread:a,R:t,parentR:n}));let c=2*Math.PI;if(!i){const e=Math.cos(o),r=n/t,_=-r*e+Math.sqrt(1+r*r*(e*e-1));c=Math.acos(r+_*e)}let u=r(lS)(e.map((({weight:e})=>e))),f=1,d=!0,h=[];for(;d;){d=!1,h=[];let t=_-a/2;for(const{weight:r,parentNodeAngleDirection:n}of e){let e=f*r/u*a;const _=Math.max(n-c,l),i=Math.min(n+c,s);if(t>=i){if(f<1e-4)throw new Error("Something's wrong, cannot distribute angles!");f*=.75,cS(`Failure to distribute angles! curAngle=${180*t/Math.PI}deg >= maxAngle=${180*i/Math.PI}deg, trying again with angleSpreadCompressionFactor=${f}`),d=!0;break}const o=Math.max(t,_),p=Math.min(Math.max(o+.3*e,t+e),i);if(t=p,p<=o)throw new Error("Internal error, endAngle <= beginAngle !?!?");h.push({beginAngle:o,endAngle:p,midAngle:(p+o)/2,useAngle:e,minAngle:_,maxAngle:i,angleSpreadCompressionFactor:f})}}return h}positionAndMarkNodesInData(){this._computeNodeInfos(),this._computeNodeDescendantWeightsAndSortNodes();const e=this.branchOptions.flipDirection?-this.root.direction:this.root.direction,t=this.root.angularSpread;this.nodePositioningInfo={},this.nodePositioningInfo[this.root.nodeId]={posRelative:{x:0,y:0},beginAngle:e-t/2,midAngle:e,endAngle:e+t/2,R:0};const{radiusSegmentLevels:r,radiusSegmentLevelFactor:n}=this.prelayoutOptions,_=r.length;let a=this.root.radius;for(const i of this.nodeOrderingInfoByLevel){const{level:o,nodeInfos:l}=i;if(0===o)continue;const s=1===o?0:a,c=o-1;a+=c<_?r[c]:r[_-1]*Math.pow(n,c-_);const u=1===o,f=this.root.useWeights&&!u,d=l.map((e=>{const{_descendantWeight:t,parentNodeId:r}=e;return{weight:f?t:1,parentNodeAngleDirection:this.nodePositioningInfo[r].midAngle,nodeInfo:e}})),h=this._distributeAngles({items:d,R:a,parentR:s,direction:e,angularSpread:t,isFirstLevel:u});for(const[e,t]of l.entries()){const{beginAngle:r,midAngle:n,endAngle:_}=h[e];let i={x:a*Math.cos(n),y:a*Math.sin(n)},o={x:this.root.position.x+i.x,y:this.root.position.y+i.y};const{nodeId:l,relatedAs:s}=t;this._markNodePosition({nodeId:l,isRoot:!1,relatedAs:s,position:o}),this.nodePositioningInfo[l]={posRelative:i,beginAngle:r,midAngle:n,endAngle:_,R:a}}}cS("_PrelayoutRadialTreeBranchSet: branch nodes positioned.")}_debugPrintPrelayoutTreeBranchPositioning(){for(const[e,t]of this.nodeOrderingInfoByLevel.entries()){const{nodeInfos:r}=t;cS(` * LEVEL ${e}:`);for(const e of r){const{nodeId:t,nodeConnectingEdge:r,totalNumDescendants:n,numDescendants:_,isPropertyCode:a}=e;if(cS(`    → ${t} from ${nS(r)} totalNumDescendants=${n} # of descendants by level=[${_.join(", ")}] isPropertyCode=${a}`),t===this.root.nodeId){const{radius:e,position:t,direction:r,angularSpread:n,useWeights:_}=this.root;cS(`      [ROOT] (${t.x},${t.y}) ∡${180*r/Math.PI}deg ± ${180*n/Math.PI} radius=${e} useWeights=${_}`)}const i=this.nodePositioningInfo[t];if(null!=i){const{beginAngle:e,endAngle:t,posRelative:r,R:n}=i;cS(`      @ root+(${r.x},${r.y}) ∡ ${180*e/Math.PI}--${180*t/Math.PI}deg at R=${n})`)}}}}_markNodePosition({nodeId:e,isRoot:t,relatedAs:r,position:n,nodePositioningDebugInfo:_}){if(Object.hasOwn(this.positionedNodesData,e))throw new Error(`Node ${e} is being positioned in two different subtrees!`);this.positionedNodesData[e]={position:n,isRoot:t,relatedAs:r,nodePositioningDebugInfo:_}}}const pS=r(s)("eczoo_jscomponents.codegraph.subgraphselector");class gS{constructor(e,t={}){this.eczCodeGraph=e,this.eczoodb=e.eczoodb,this.cy=e.cy,this.options=t,this.isCurrentlyInstalled=!1,this.radialPrelayoutRootNodesPrelayoutInfo={},this.radialPrelayoutOptions={}}_markSubgraphInstalled(e){this.isCurrentlyInstalled=e}installSubgraph(){this._markSubgraphInstalled(!0);const e=this.cy.elements();e.addClass("layoutVisible"),e.removeClass("layoutParent layoutFadeExtra")}setOptions(e){return r(lp)(e,this.options)?{pendingUpdateLayout:!1}:(pS("EczCodeGraphSubgraphSelector.setOptions(): setting new options",{options:e,thisOptions:this.options}),this.options=Object.assign({},this.options,e),this.isCurrentlyInstalled?this.installSubgraph():null)}uninstallSubgraph(){this._markSubgraphInstalled(!1)}getSubgraphLayoutOptions(){return{reusePreviousLayoutPositions:this.options?.reusePreviousLayoutPositions??!0}}createPrelayoutInstance({rootNodeIds:e}){const t=this.radialPrelayoutRootNodesPrelayoutInfo;let r=this.radialPrelayoutOptions;return new dS({cy:this.cy,rootNodeIds:e,rootNodesPrelayoutInfo:t,prelayoutOptions:r})}static clear(e){e.cy.elements().removeClass("layoutRoot layoutVisible layoutParent layoutFadeExtra")}}class vS extends gS{installSubgraph(){pS("EczCodeGraphSubgraphSelectorAll: installSubgraph()");const e=this.cy.elements();e.addClass("layoutVisible"),e.removeClass("layoutParent layoutFadeExtra"),e.edges("[_primaryParent=1]").addClass("layoutParent");const t=this.eczCodeGraph.globalGraphRootNodesInfo;t.radialPrelayoutRootNodesPrelayoutInfo&&(this.radialPrelayoutRootNodesPrelayoutInfo=t.radialPrelayoutRootNodesPrelayoutInfo);for(const e of t.rootNodeIds){this.cy.getElementById(e).addClass("layoutRoot")}pS("EczCodeGraphSubgraphSelectorAll: installSubgraph() done.")}}const mS=r(s)("eczoo_jscomponents.codegraph.eczcodegraph");function yS(e){return nf(e)?Hf(e):e}function wS(e){let t=yS(e);return t=t.trim(),t=t.replace(/\\\(|\\\)/g,""),t}XC.use(r(ZC));class bS{constructor({eczoodb:e,graphGlobalOptions:t}){mS("EczCodeGraph constructor"),this.getNodeIdCode=bS.getNodeIdCode,this.getNodeIdDomain=bS.getNodeIdDomain,this.getNodeIdKingdom=bS.getNodeIdKingdom,this.eczoodb=e,this.mountedDomNode=null,this.eventTapCallbackFn=null,this.bgColor="rgb(255, 236, 217)",this.subgraphSelector=null,this.graphFilters=[],this.graphGlobalOptions=r(o)({rootPositioning:{rootNodesCircleXRadius:500,rootNodesCircleYRadius:300},customDomainIdsOrder:{classical_domain:-100,quantum_domain:100},useCodeShortNamesForLabels:!1,alwaysSkipCoseLayout:!1,overrideCoseLayoutOptions:null},t),mS(`EczCodeGraph(): using graphGlobalOptions = ${JSON.stringify(this.graphGlobalOptions,void 0,4)}`),this._pendingUpdateLayout=!1,this.globalGraphRootNodesInfo=null}async initialize(){mS("EczCodeGraph initialize()"),await this.initGraph(),mS("EczCodeGraph initialize() done.  Don't forget to install a subgraph selector, for instance, via a EczCodeGraphViewController instance.")}static getNodeIdCode(e){return`c_${e}`}static getNodeIdKingdom(e){return`k_${e}`}static getNodeIdDomain(e){return`d_${e}`}installGraphFilter({graphFilterName:e,graphFilter:t}){this.graphFilters.push({graphFilterName:e,graphFilter:t});const r=this.cy.elements(".layoutVisible");t.applyFilter({eles:r})}setGraphFilterOptions(e,{skipGraphFilterApplyUpdates:t}={}){const n=this.cy.elements(".layoutVisible");for(const{graphFilterName:_,graphFilter:a}of this.graphFilters){if(Object.hasOwn(e,_)){let t=r(o)({},a.filterOptions,e[_]);a.setFilterOptions(t)}t||a.applyFilter({eles:n})}}_unapplyGraphFilters({eles:e}={}){e??=this.cy.elements(".layoutVisible");for(const{graphFilterName_:t,graphFilter:r}of this.graphFilters)mS("removeFilter for",r),r.removeFilter({eles:e})}_applyGraphFilters({eles:e}={}){e??=this.cy.elements(".layoutVisible");for(const{graphFilterName_:t,graphFilter:r}of this.graphFilters)r.applyFilter({eles:e})}installSubgraphSelector(e,{skipGraphFilterUpdates:t}={}){mS("installSubgraphSelector()",{subgraphSelector:e}),t||this._unapplyGraphFilters(),gS.clear(this),null!=this.subgraphSelector&&this.subgraphSelector.uninstallSubgraph(),this.subgraphSelector=e;const r=this.subgraphSelector.installSubgraph(),{pendingUpdateLayout:n}=r??{};mS("installSubgraphSelector(): applied subgraph selection. # of visible nodes = ",this.cy.nodes(".layoutVisible").length),t||this._applyGraphFilters(),(n??1)&&this._setPendingUpdateLayout()}setSubgraphSelectorOptions(e){if(null==this.subgraphSelector)throw new Error("Can't set subgraph selector options, none set");this._unapplyGraphFilters();const t=this.subgraphSelector.setOptions(e),{pendingUpdateLayout:r}=t??{};(r??1)&&this._setPendingUpdateLayout(),this._applyGraphFilters()}updateSubgraphSelectorAndSetGraphFilterOptions(e,t,n){if(mS("updateSubgraphSelectorAndSetGraphFilterOptions()"),e===this.subgraphSelector&&r(lp)(t,this.subgraphSelector.options)&&r(lp)(n,Object.fromEntries(this.graphFilters.map((({graphFilterName:e,graphFilter:t})=>[e,t.filterOptions])))))return void mS("... unchanged options, return early");this._unapplyGraphFilters();let _={pendingUpdateLayout:!1};this.subgraphSelector!==e?(e.setOptions(t),_=this.installSubgraphSelector(e,{skipGraphFilterUpdates:!0})):_=this.subgraphSelector.setOptions(t),_??={},this.setGraphFilterOptions(n,{skipGraphFilterApplyUpdates:!0}),this._applyGraphFilters(),(_.pendingUpdateLayout??1)&&this._setPendingUpdateLayout(),mS("updateSubgraphSelectorAndSetGraphFilterOptions() done.")}isPendingUpdateLayout(){return this._pendingUpdateLayout}_setPendingUpdateLayout(e){e??=!0,this._pendingUpdateLayout=e}mountInDom(e,{bgColor:t,styleOptions:n}={}){this.bgColor=t??this.bgColor,e.style.backgroundColor=this.bgColor,null!=this.mountedDomNode&&(this.cy.unmount(),null!=this.eventTapCallbackFn&&this.cy.removeListener("tap",this.eventTapCallbackFn)),this.cy.mount(e),this.mountedDomNode=e,n=r(o)({},n),n.matchWebPageFonts??=!0;const _=tS(n);mS("Setting style: ",_),this.cy.style().resetToDefault().fromJson(_).update(),null!=this.eventTapCallbackFn&&this.cy.addListener("tap",this.eventTapCallbackFn)}setUserTapCallback(e){null!=this.mountedDomNode&&null!=this.eventTapCallbackFn&&this.cy.removeListener("tap",this.eventTapCallbackFn),this.eventTapCallbackFn=t=>{const r=t.target;try{if(!r||!r.isNode)return mS("Unknown or non-node tap target."),void e({background:!0,event:t,eventTarget:r});if(r.isEdge()){const n=r;return mS(`Tapped edge ${n.id()}`),void e({edgeId:n.id(),event:t,eventTarget:r})}if(r.isNode()){const n=r;return mS(`Tapped node ${n.id()}`),void e({nodeId:n.id(),event:t,eventTarget:r})}return void mS("Unknown tap/click target ??!")}catch(e){return void console.error("Ignoring error while handling cytoscape canvas tap/click: ",e)}},null!=this.mountedDomNode&&this.cy.addListener("tap",this.eventTapCallbackFn)}getOverallRootNodeIds({includeDomains:e}={}){e??=!0;let t=[];e&&(t=Object.keys(this.eczoodb.objects.domain).map((e=>this.getNodeIdDomain(e))));let r=Object.entries(this.eczoodb.objects.code).filter((([,e])=>!(e.relations?.parents?.length||e.relations?.root_for_kingdom||e.relations?.root_for_kingdom?.length||e.relations?.root_for_domain||e.relations?.root_for_domain?.length))).map((([e])=>this.getNodeIdCode(e)));return[].concat(t,r)}async updateLayout({animate:e,forceRelayout:t,skipCoseLayout:r}={}){if(e??=!0,t??=!1,r??=!1,this.graphGlobalOptions.alwaysSkipCoseLayout&&(r=!0),null==this.subgraphSelector)throw new Error('You didn\'t install a subgraph selector, which is needed to lay out the code graph. To install a simple "display all" subgraph selector, use  eczCodeGraph.installSubgraphSelector(new EczCodeGraphSubgraphSelectorAll(eczCodeGraph))  after initialization.');let{reusePreviousLayoutPositions:n}=this.subgraphSelector.getSubgraphLayoutOptions();this.cy.nodes(".layoutVisible").not("._layoutPositioned").length&&(t=!0),t&&(n=!1),mS("in updateLayout()",{animate:e,forceRelayout:t,skipCoseLayout:r,reusePreviousLayoutPositions:n}),this._pendingUpdateLayout=!1,this.cy.elements().forEach((e=>{e.toggleClass("hidden",!e.hasClass("layoutVisible"))}));const _=this.cy.nodes(".layoutVisible").map((e=>e.id())),a=this.cy.nodes(".layoutRoot.layoutVisible").map((e=>e.id()));mS(`updateLayout(): ${_.length} nodes participate in the layout (.layoutVisible):`,_,`; and ${a.length} nodes are listed as 'root' nodes (.layoutRoot.layoutVisible):`,a);let i=!0,o=!0;n&&(i=!1,o=!1),r&&(o=!1),(i||o)&&this.cy.elements().removeClass("_layoutPositioned"),i&&(mS("Running prelayout ..."),await this._runPrelayout({rootNodeIds:a})),o&&(mS("Running fcose layout ..."),await this._runCoseLayout({rootNodeIds:a,animate:e})),this.cy.nodes(".layoutVisible").addClass("_layoutPositioned"),mS("updateLayout() done!")}async _runPrelayout({rootNodeIds:e}){mS("_runPrelayout(): Using rootNodeIds =",e);let t=this.subgraphSelector.createPrelayoutInstance({rootNodeIds:e}),r=this.cy.elements(".layoutVisible");this.cy.batch((()=>{this.cy.elements().removeClass(["prelayoutPositioned","prelayoutOutOfLayoutTree","prelayoutRoot"]);try{t.run()}catch(e){return void console.error(e)}r.edges((e=>e.target().is(".prelayoutPositioned")&&e.source().is(".prelayoutPositioned"))).addClass("prelayoutPositioned"),r.not(".prelayoutPositioned").addClass("prelayoutOutOfLayoutTree")}))}async _runCoseLayout({rootNodeIds:e,animate:t}){let n={name:"fcose",quality:"proof",randomize:!1,animate:t,fit:!0,sampleSize:500,nodeDimensionsIncludeLabels:!0,nodeRepulsion:()=>1e5,idealEdgeLength:e=>50,edgeElasticity:e=>1.5,numIter:5e4,gravity:0,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:[].concat(e.map((e=>({nodeId:e,position:this.cy.getElementById(e).position()}))))};null!=this.graphGlobalOptions.overrideCoseLayoutOptions&&(n=r(o)(n,this.graphGlobalOptions.overrideCoseLayoutOptions));let _=new Promise((e=>{mS("in promise - creating and running layout");let t=this.cy.elements((e=>e.visible()&&(e.isNode()||e.is(".layoutParent")))).layout(n);t.on("layoutstop",(()=>{mS("in promise - layoutstop event received, resolving promise."),e()})),mS("in promise - running layout"),t.run(),mS("in promise - ran layout")}));mS("laying out (fcose) - waiting for promise."),await _,mS("_runCoseLayout() done!")}async initGraph(){mS("EczCodeGraph: initGraph() ...");let e=[],t=[];const r={};for(const[n,_]of Object.entries(this.eczoodb.objects.domain)){const a=this.getNodeIdDomain(n),i=yS(_.name),o=wS(i);e.push({data:{id:a,label:o,_isDomain:1,_domainId:n,_objectName:i}}),r[a]=o;for(const i of _.kingdoms){const _=i.kingdom_id,o=yS(i.kingdom.name),l=wS(o),s=this.getNodeIdKingdom(_);e.push({data:{id:s,label:l,_isKingdom:1,_kingdomId:_,_kingdomName:o,_objectName:o,_parentDomainId:n}}),r[s]=l,t.push({data:{_relType:"parent",_primaryParent:1,source:s,target:a}})}}for(const[n,_]of Object.entries(this.eczoodb.objects.code)){const a=yS(_.name),i=yS(this.eczoodb.code_short_name(_)),o=wS(this.graphGlobalOptions.useCodeShortNamesForLabels?i:a),l=this.getNodeIdCode(n);r[l]=o;let s={id:l,label:o,_codeId:n,_isCode:1,_objectName:a,_codeShortName:i};const c=this.eczoodb.code_get_primary_parent_root(_,{include_domain_kingdom_root_info:!0}),u=c.primary_parent_root_code,f=c.parent_domain,d=c.parent_kingdom,h=c.is_domain_root_code,p=c.is_kingdom_root_code,g=null==d;if(null!=f){const e=f.domain_id;h&&Object.assign(s,{_isDomainRootCode:1}),Object.assign(s,{_parentDomainId:e})}if(null!=d){const e=u.code_id,t=d.kingdom_id;p&&Object.assign(s,{_isKingdomRootCode:1}),Object.assign(s,{_hasParentKingdom:1,_parentKingdomRootCodeId:e,_parentKingdomId:t})}null==d&&Object.assign(s,{_hasParentKingdom:0}),g&&Object.assign(s,{_isPropertyCode:1}),e.push({data:s}),h&&t.push({data:{_relType:"parent",_primaryParent:1,source:l,target:this.getNodeIdDomain(f.domain_id)}}),p&&t.push({data:{_relType:"parent",_primaryParent:1,source:l,target:this.getNodeIdKingdom(d.kingdom_id)}});for(const e of["parent","cousin"]){let r=_.relations?.[e+"s"];if(null!=r)for(let n=0;n<r.length;++n){const _=r[n];let a={_relType:e,source:l,target:this.getNodeIdCode(_.code.code_id)};"parent"===e&&(a._primaryParent=0!==n||h||p?0:1),t.push({data:a})}}}for(const e of t)e.data.source_label=r[e.data.source],e.data.target_label=r[e.data.target];mS("EczCodeGraph: initGraph() setting up cytoscape object");let n={};n.elements={nodes:e,edges:t},n.style=eS,mS(`About to initialize cytoscape graph w/ ${e.length} nodes & ${t.length} edges`),this.cy=XC(n),this._initGlobalGraphRootNodesInfo(),mS("EczCodeGraph: initGraph() done")}_initGlobalGraphRootNodesInfo(){const{rootPositioning:e,customDomainIdsOrder:t}=this.graphGlobalOptions;let r={},n=[...Object.keys(this.eczoodb.objects.domain)];mS(`Domains before custom ordering: ${n}`),n.sort(((e,r)=>(t[e]??0)-(t[r]??0))),mS(`Domains after custom ordering: ${n}`);let _=this.getOverallRootNodeIds({includeDomains:!1});this._positionRootNodes_allAround(r,n,_,e),this.globalGraphRootNodesInfo={radialPrelayoutRootNodesPrelayoutInfo:r,rootNodeIds:Object.keys(r)},mS("globalGraphRootNodesInfo = ",this.globalGraphRootNodesInfo)}_positionRootNodes_allAround(e,t,r,n){const{rootNodesCircleXRadius:_,rootNodesCircleYRadius:a}=n;let i=t.length,o=r.length,l=i+o,s=-Math.PI/2+1*(o-1)/(l-1),c=t.map((e=>this.getNodeIdDomain(e)));c.reverse();let u=[...r,...c];for(const[t,r]of u.entries()){const n=s+2*Math.PI*t/l;e[r]={position:{x:_*Math.cos(n),y:a*Math.sin(n)},radiusOffset:200,direction:n,angularSpread:2*Math.PI/l,propertyCodesSortOrder:Math.cos(n)>0?1:-1}}}}s=a("3krpC");const kS=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.subgraphselectorisolatemode");class xS extends gS{constructor(e,t={}){super(e,t=r(o)({reusePreviousLayoutPositions:!0,nodeIds:[],range:{parents:{primary:5,secondary:5,extra:0},children:{primary:2,secondary:2,extra:0}},extraRelationSelector:"edge"},t))}installSubgraph(){this._markSubgraphInstalled(!0);const{nodeIds:e,range:t,extraRelationSelector:r}=this.options;kS("installSubgraph(). options =",this.options),this.cy.batch((()=>{this.cy.elements().removeClass(["layoutVisible","layoutRoot","layoutParent","layoutFadeExtra","isolationRoot","isolationRootConnectingEdge"]);for(const t of e)this.cy.getElementById(t).addClass(["layoutRoot","layoutVisible","isolationRoot"]);let n=this.cy.nodes(".layoutVisible"),_=n;for(let e=0;e<t.parents.primary;++e){let e=_.outgoers("[_primaryParent=1]");e.addClass("layoutParent"),_=_.union(e).union(e.connectedNodes())}let a=n;for(let e=0;e<t.children.primary;++e){let e=a.incomers("[_primaryParent=1]");e.addClass("layoutParent"),a=a.union(e).union(e.connectedNodes())}let i=new Set;_.forEach((e=>i.add(e.id()))),a.forEach((e=>i.add(e.id())));let o=n;for(let e=0;e<t.parents.secondary;++e){let e=o.outgoers('[_relType="parent"]');e.forEach((e=>{const t=e.target().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),o=o.union(e).union(e.connectedNodes())}let l=n;for(let e=0;e<t.parents.secondary;++e){let e=l.incomers('[_relType="parent"]');e.forEach((e=>{const t=e.source().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),l=l.union(e).union(e.connectedNodes())}let s=_.union(a).union(o).union(l);kS("mainNodes are ",s,"extra relation selector = ",r);let c=s,u=Math.max(t.parents.extra??0,t.children.extra??0);kS("range = ",t,"maxExtra = ",u);for(let e=0;e<u;++e){kS(`Processing extra/neighbor nodes step ${e}. allElements = `,c);let n=[],_=[];if(e<t.parents.extra){let e=c.outgoers(r);e.forEach((e=>{if(!e.isEdge())return;const t=e.target().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),n=e.union(e.connectedNodes()),kS({outEdges:e,outElements:n})}if(e<t.children.extra){let e=c.incomers(r);e.forEach((e=>{if(!e.isEdge())return;const t=e.source().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),_=e.union(e.connectedNodes()),kS({inEdges:e,inElements:_})}c=c.union(_).union(n)}c.addClass("layoutVisible");const f=c.not(s);f.addClass("layoutFadeExtra"),n.connectedEdges("edge.layoutVisible").addClass("isolationRootConnectingEdge"),kS("extraElements are ",f)})),this.radialPrelayoutOptions={origin:{direction:Math.PI/2,angularSpread:.8*Math.PI,useWeights:!0}};const n=this.eczCodeGraph.globalGraphRootNodesInfo;n?.radialPrelayoutRootNodesPrelayoutInfo&&(this.radialPrelayoutRootNodesPrelayoutInfo=n.radialPrelayoutRootNodesPrelayoutInfo)}setOptions(e){if(e??={},r(lp)(e,{})||r(lp)(e,this.options))return{pendingUpdateLayout:!1};let t={};return null!=e.nodeIds&&(t.nodeIds=null),this.options=r(o)({},this.options,t,e),this.installSubgraph()}uninstallSubgraph(){this._markSubgraphInstalled(!1),this.cy.elements().removeClass(["layoutFadeExtra","isolationRoot","isolationRootConnectingEdge"])}}const PS=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.subgraphselectorsubset");class OS extends gS{constructor(e,t={}){super(e,t=r(o)({reusePreviousLayoutPositions:!1,codeIds:[],connectingNodesToDomainsAndKingdoms:!0,connectingNodesToDomainsAndKingdomsMaxLength:2,showIntermediateConnectingNodes:!0,connectingNodesMaxPathLength:null,connectingNodesMaxNumPaths:null,connectingNodesOnlyKeepPathsWithAdditionalLength:null,connectingNodesEdgeLengthsByType:{primaryParent:null,secondaryParent:null,cousin:null},nodeIds:[]},t))}getSelectedElementsWithInternalEdges({codeIds:e,nodeIds:t}){const r=[...e.map((e=>this.eczCodeGraph.getNodeIdCode(e))),...t].map((e=>{const t=this.cy.getElementById(e);return null==t||0==t?.length?(console.warn(`No such node ID: ‘${e}’`),null):t})).filter((e=>null!=e)),n=this.cy.collection().union(r);return n.union(n.connectedEdges().filter((e=>n.has(e.source())&&n.has(e.target()))))}findParentDomainAndKingdomNodes({primaryElements:e,secondaryElements:t,connectingNodesToDomainsAndKingdomsMaxLength:r}){const n=e.union(t);let _=this.cy.collection(),a=e,i=this.cy.collection(),o={},l=0;for(;a.length;){++l,i=i.union(a);let e=a.connectedEdges().filter((e=>{const t=e.data();return"parent"===t._relType&&t._primaryParent&&a.has(e.source())&&!i.has(e.target())})),t=new Set,s=new Set;for(const _ of e){const e=_.source();let a=_.target();l<r&&t.add(a);const i=a.id(),c=e.id();null!=o[c]&&0!==o[c].length||(o[c]=[[]]),null==o[i]&&(o[i]=[]);let u=[_,a].filter((e=>!n.has(e)));for(let t of o[e.id()]){const e=[...t,...u];e.length&&o[i].push(e)}const f=a.data();(f._isDomain||f._isKingdom)&&(s.add(a),t.add(a))}a=this.cy.collection().union([...t]),_=_.union([...s]),PS(`Found ${s.size} kingdoms/domains at this level - ${_S([...s])}; next node set is`,t)}PS(`Finally, domains & kingdom nodes are ${_S(_)} and node chains are:`,o);let s=[];for(const e of _)for(const t of o[e.id()])s.push(...t);const c=this.cy.collection().union(s);return{domainsAndKingdomNodes:_,additionalConnectingElements:c,additionalNodesWithEdges:_.union(c)}}findIntermediateNodesConnectingComponents({primaryElements:e,secondaryElements:t,connectingNodesMaxPathLength:r,connectingNodesMaxNumPaths:n,connectingNodesOnlyKeepPathsWithAdditionalLength:_,connectingNodesEdgeLengthsByType:a}){const i=e.union(t),o=i.edges(),{componentInfos:l}=aS({cy:this.cy,visibleElements:i,allElements:this.cy.elements(),connectingNodesMaxPathLength:r,connectingNodesMaxNumPaths:n,connectingNodesOnlyKeepPathsWithAdditionalLength:_,edgeLengthFn:e=>{if(o.has(e))return 0;const t=e.data();if(t._primaryParent)return a.primaryParent??1;if("parent"===t._relType)return a.secondaryParent??1.3;if("cousin"===t._relType)return a.cousin??2.1;throw new Error(`Unknown edge relationship in graph: ${nS(e)}`)}});let s=this.cy.collection();for(const[e,t]of l.entries())for(let r=e+1;r<l.length;++r){const n=t.shortestPathsToComponents[r];for(const t of n.paths)PS(`Collecting intermediate collecting nodes between components #${e} and #${r}: ${_S(t.path)}`),s=s.union(t.path)}return s=s.filter((r=>!e.has(r)&&!t.has(r))),{intermediateConnectingElements:s}}buildLayoutTree({visibleElements:e}){let t=this.cy.collection(),r=this.cy.collection(),n=this.cy.collection(),_=this.cy.collection();const a=e.nodes();for(const t of a){let r=t.connectedEdges().filter((r=>r.data()._primaryParent&&"parent"===r.data()._relType&&r.source().id()===t.id()&&e.has(r)&&e.has(r.target())));if(0===r.length&&(r=t.connectedEdges().filter((r=>"parent"===r.data()._relType&&r.source().id()===t.id()&&e.has(r)&&e.has(r.target())))),0===r.length){n=n.union(t);continue}const a=r[0];_=_.union(a)}r=n;let i=a.difference(n),o={},l=r;for(;i.length;){PS("Will perform a round of including child nodes in layout tree...",_S(i),"using last-level nodes",_S(l));let e=this.cy.collection();for(const n of l){const a=n.connectedEdges().filter((e=>_.has(e)&&e.target().id()===n.id()&&i.has(e.source())));t=t.union(a);let l=this.cy.collection(a.map((e=>e.source())));r.has(n)&&l.length&&(o[n.id()]=!0),i=i.difference(l),e=e.union(l)}if(l=e,PS(`Positioned nodes ${_S(e)}`),PS(`Still need to position nodes [${_S(i)}]`),0===e.length&&i.length)throw new Error("Was not able to position all nodes in layout!")}PS(`Identified root nodes & edges (but before integrating orphan roots): layoutPrimaryParentEdges=${_S(t)}; layoutRootElements=${_S(r)}`);for(const n of r)if(!o[n.id()]){PS(`Node ${nS(n)} is layout root and alone!`,o);const _=n.connectedEdges().filter((t=>e.has(t)));let a=null;const i=_.filter("[_primaryParent]");if(i.length)a=i[0];else{const e=_.filter('[_relType="parent"]');e.length?a=e[0]:_.length&&(a=_[0])}if(null!=a){const e=a.connectedNodes().filter((e=>e.id()!==n.id()));PS(`Node ${nS(n)} is alone, attaching it via edge ${nS(a)} to ${nS(e)}; before: layoutPrimaryParentEdges=${_S(t)}; layoutRootElements=${_S(r)}`),t=t.union(a),r=r.difference(n),PS(`After attaching: layoutPrimaryParentEdges=${_S(t)}; layoutRootElements=${_S(r)}`),r.has(e)&&(PS(`The attaching node, ${e.id()}, is a layout root node. We must mark it as has having "children" to avoid moving it around on its turn!`),o[e.id()]=!0)}}return{layoutRootElements:r,layoutPrimaryParentEdges:t}}installSubgraph(){this._markSubgraphInstalled(!0);let{codeIds:e,nodeIds:t,connectingNodesToDomainsAndKingdoms:r,connectingNodesToDomainsAndKingdomsMaxLength:n,showIntermediateConnectingNodes:_,connectingNodesMaxPathLength:a,connectingNodesMaxNumPaths:i,connectingNodesOnlyKeepPathsWithAdditionalLength:o,connectingNodesEdgeLengthsByType:l}=this.options;PS(`EczCodeGraphSubgraphSelectorSubset: installSubgraph(), codeIds=${e}`);const s=this.getSelectedElementsWithInternalEdges({codeIds:e,nodeIds:t});let c=this.cy.collection();if(r){const{additionalNodesWithEdges:e}=this.findParentDomainAndKingdomNodes({primaryElements:s,secondaryElements:c,connectingNodesToDomainsAndKingdomsMaxLength:n});c=c.union(e)}if(_){const{intermediateConnectingElements:e}=this.findIntermediateNodesConnectingComponents({primaryElements:s,secondaryElements:c,connectingNodesMaxPathLength:a,connectingNodesMaxNumPaths:i,connectingNodesOnlyKeepPathsWithAdditionalLength:o,connectingNodesEdgeLengthsByType:l});c=c.union(e)}const{layoutPrimaryParentEdges:u,layoutRootElements:f}=this.buildLayoutTree({visibleElements:s.union(c)});PS(`codeIds=${e.join(",")}`),PS(`nodeIds=${e.join(",")}`),PS(`primaryElements=${_S(s)}`),PS(`secondaryElements=${_S(c)}`),PS(`layoutRootElements=${_S(f)}`),PS(`layoutPrimaryParentEdges=${_S(u)}`),this.cy.batch((()=>{this.cy.elements().removeClass(["layoutRoot","layoutVisible","layoutParent"]),s.addClass("layoutVisible"),c.addClass(["layoutVisible","layoutFadeExtra"]),f.addClass("layoutRoot"),u.addClass("layoutParent")})),this.radialPrelayoutOptions={origin:{direction:Math.PI/2,angularSpread:.8*Math.PI,useWeights:!0,rootPositioning:"circle",rootPositionCircleAngularSpread:.8*Math.PI,rootPositionCircleDirection:Math.PI/2},ignoreParentEdgeDirection:!0},PS("EczCodeGraphSubgraphSelectorSubset: installSubgraph() done.")}}s=a("3krpC");class ES{constructor(e,t=null){this.eczCodeGraph=e,this.eczoodb=e.eczoodb,this.cy=e.cy,this.filterOptions=Object.assign({},t)}setFilterOptions(e){this.filterOptions=Object.assign({},this.filterOptions,e)}applyFilter(){}removeFilter(){}}const AS=r(s)("eczoo_jscomponents.codegraph.stdgraphfilters");class CS extends ES{constructor(e,t){super(e,Object.assign({enabled:!0},t??{})),this.domainColorIndexByDomainId={};let r=0;for(const e of Object.keys(this.eczoodb.objects.domain)){const t=r;this.domainColorIndexByDomainId[e]=t,r=parseInt((r+1)%3)}AS("Got domain color indexes for domain id's:",this.domainColorIndexByDomainId)}applyFilter({eles:e}){this.filterOptions.enabled?this.cy.batch((()=>{e.nodes().forEach((e=>{const t=e.data("_domainId"),r=e.data("_parentDomainId");t?(e.data("_domainColorIndex",this.domainColorIndexByDomainId[t]),e.addClass("useDomainColors")):r?(e.data("_domainColorIndex",this.domainColorIndexByDomainId[r]),e.addClass("useDomainColors")):e.removeData("_domainColorIndex")}))})):this.removeFilter({eles:e})}removeFilter({eles:e}){e.removeClass("useDomainColors"),e.removeData("_domainColorId")}}class SS extends ES{constructor(e,t){super(e,Object.assign({cousinEdgesShown:!1,secondaryParentEdgesShown:!1},t??{}))}applyFilter({eles:e}){this.cy.batch((()=>{e.edges().forEach((e=>{const{_primaryParent:t,_relType:r}=e.data(),n=!e.hasClass("layoutParent")&&(0===t&&!this.filterOptions.secondaryParentEdgesShown||"cousin"===r&&!this.filterOptions.cousinEdgesShown);e.toggleClass("hiddenSecondaryEdge",n)}))}))}removeFilter({eles:e}){e.edges().removeClass("hiddenSecondaryEdge")}}class TS extends ES{constructor(e,t){super(e,Object.assign({highlightImportantNodes:!0,degreeThreshold:8,highlightPrimaryParents:!0,highlightRootConnectingEdges:!0},t??{}))}applyFilter({eles:e}){const{highlightImportantNodes:t,degreeThreshold:r,highlightPrimaryParents:n,highlightRootConnectingEdges:_}=this.filterOptions;this.cy.batch((()=>{t&&e.nodes().forEach((e=>{const t=1===e.data("_isKingdom")||1===e.data("_isDomain")||e.degree()>r;e.toggleClass("importantNode",t),e.toggleClass("notImportantNode",!t)})),e.edges().toggleClass("enableHighlightPrimaryParents",n),e.edges().removeClass(["highlightRootConnectingEdge","highlightRootIncomingEdge","highlightRootOutgoingEdge"]);const a=e.nodes(".layoutRoot"),i=a.incomers("edge.layoutVisible"),o=a.outgoers("edge.layoutVisible");_&&(i.addClass(["highlightRootConnectingEdge","highlightRootIncomingEdge"]),o.addClass(["highlightRootConnectingEdge","highlightRootOutgoingEdge"]))}))}removeFilter({eles:e}){e.removeClass(["importantNode","enableHighlightPrimaryParents","highlightRootConnectingEdge","highlightRootIncomingEdge","highlightRootOutgoingEdge"])}}class NS extends ES{applyFilter({eles:e}){const t=this.filterOptions.searchText||"";if(e.removeClass(["searchMatchHighlight","searchNoMatchDimmed"]),""===t)return;const r=JSON.stringify(t),n=e.nodes(`[label @*= ${r}], [_objectName @*= ${r}], [id @*= ${r}]`);AS(`Applying search graph filter for ${JSON.stringify(t)}; matched ${n.length} node elements`),n.addClass("searchMatchHighlight");const _=this.cy;_.stop(),_.animate({fit:{eles:n},duration:80}),e.not(".searchMatchHighlight").addClass("searchNoMatchDimmed")}removeFilter({eles:e}){e.removeClass(["searchMatchHighlight","searchNoMatchDimmed"])}}const LS=r(s)("eczoo_jscomponents.codegraph.eczcodegraphviewcontroller"),MS={displayMode:"all",modeIsolateNodesOptions:{nodeIds:null,range:{parents:{primary:2,secondary:2,extra:1},children:{primary:1,secondary:1,extra:1}},reusePreviousLayoutPositions:!0,extraRelationSelector:"edge"},modeSubsetOptions:{codeIds:[],reusePreviousLayoutPositions:!1,connectingNodesToDomainsAndKingdoms:!0,connectingNodesToDomainsAndKingdomsMaxLength:2,showIntermediateConnectingNodes:!0,connectingNodesMaxPathLength:3.5,connectingNodesMaxNumPaths:5,connectingNodesOnlyKeepPathsWithAdditionalLength:0,connectingNodesEdgeLengthsByType:{primaryParent:1,secondaryParent:1.3,cousin:2.1}},domainColoring:!0,cousinEdgesShown:!1,secondaryParentEdgesShown:!1,highlightImportantNodes:{highlightImportantNodes:!0,degreeThreshold:8,highlightPrimaryParents:!0,highlightRootConnectingEdges:!0},searchHighlightText:null};class IS{constructor(e,t){this.getMergedDisplayOptions=IS.getMergedDisplayOptions,this.eczCodeGraph=e,this.displayOptions=IS.getMergedDisplayOptions(MS,t??{}),this.subgraphSelectorInstances={}}async initialize(){LS("EczCodeGraphViewController.initialize()"),this.subgraphSelectorInstances={all:new vS(this.eczCodeGraph),"isolate-nodes":new xS(this.eczCodeGraph),subset:new OS(this.eczCodeGraph)};const e={domainColors:new CS(this.eczCodeGraph),hideSecondaryEdges:new SS(this.eczCodeGraph),search:new NS(this.eczCodeGraph),highlightImportantNodes:new TS(this.eczCodeGraph)};for(const[t,r]of Object.entries(e))this.eczCodeGraph.installGraphFilter({graphFilterName:t,graphFilter:r});this._setGraph(),LS("EczCodeGraphViewController.initialize() finished!")}_setGraph(){LS("EczCodeGraphViewController._setGraph(); displayOptions =",this.displayOptions);let e=null,t={};if("all"===this.displayOptions.displayMode)e=this.subgraphSelectorInstances.all,t={};else if("isolate-nodes"===this.displayOptions.displayMode)e=this.subgraphSelectorInstances["isolate-nodes"],t=this.displayOptions.modeIsolateNodesOptions;else{if("subset"!==this.displayOptions.displayMode)throw new Error(`Invalid display mode: ${this.displayOptions.displayMode}`);e=this.subgraphSelectorInstances.subset,t=this.displayOptions.modeSubsetOptions}this.eczCodeGraph.updateSubgraphSelectorAndSetGraphFilterOptions(e,t,{domainColors:{enabled:this.displayOptions.domainColoring},hideSecondaryEdges:{cousinEdgesShown:this.displayOptions.cousinEdgesShown,secondaryParentEdgesShown:this.displayOptions.secondaryParentEdgesShown},search:{searchText:this.displayOptions.searchHighlightText},highlightImportantNodes:this.displayOptions.highlightImportantNodes}),LS("EczCodeGraphViewController._setGraph() done.")}static getMergedDisplayOptions(e,t){if(null==t||!t)return e;let n={};return null!=t.modeIsolateNodesOptions?.nodeIds&&(n.modeIsolateNodesOptions={nodeIds:null}),null!=t.modeSubsetOptions?.codeIds&&(n.modeSubsetOptions={codeIds:null}),r(o)({},e,n,t)}setDisplayOptions(e){LS("EczCodeGraphViewController.setDisplayOptions()",e),this.displayOptions=this.getMergedDisplayOptions(this.displayOptions,e),this._setGraph()}}var jS={};if(window,jS=function(e){var t={};function r(n){if(t[n])return t[n].exports;var _=t[n]={i:n,l:!1,exports:{}};return e[n].call(_.exports,_,_.exports,r),_.l=!0,_.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var _ in e)r.d(n,_,function(t){return e[t]}.bind(null,_));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var n=r(1),_=function(e){e&&e("core","svg",n.svg)};"undefined"!=typeof cytoscape&&_(cytoscape),e.exports=_},function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=r(2),a={},i={number:function(e){return null!=e&&(void 0===e?"undefined":n(e))===n(1)&&!isNaN(e)}};a.bufferCanvasImage=function(e,t){var r=t.renderer().usePaths;t.renderer().usePaths=function(){return!1},t.elements().forEach((function(e){e._private.rscratch.pathCacheKey=null,e._private.rscratch.pathCache=null}));var n=t.renderer(),a=t.mutableElements().boundingBox(),o=n.findContainerClientCoords(),l=e.full?Math.ceil(a.w):o[2],s=e.full?Math.ceil(a.h):o[3],c=i.number(e.maxWidth)||i.number(e.maxHeight),u=n.getPixelRatio(),f=1;if(void 0!==e.scale)l*=e.scale,s*=e.scale,f=e.scale;else if(c){var d=1/0,h=1/0;i.number(e.maxWidth)&&(d=f*e.maxWidth/l),i.number(e.maxHeight)&&(h=f*e.maxHeight/s),l*=f=Math.min(d,h),s*=f}c||(l*=u,s*=u,f*=u);var p=null,g=p=new _(l,s);if(l>0&&s>0){p.clearRect(0,0,l,s),e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.fillRect(0,0,l,s)),p.globalCompositeOperation="source-over";var v=n.getCachedZSortedEles();if(e.full)p.translate(-a.x1*f,-a.y1*f),p.scale(f,f),n.drawElements(p,v),p.scale(1/f,1/f),p.translate(a.x1*f,a.y1*f);else{var m=t.pan(),y={x:m.x*f,y:m.y*f};f*=t.zoom(),p.translate(y.x,y.y),p.scale(f,f),n.drawElements(p,v),p.scale(1/f,1/f),p.translate(-y.x,-y.y)}}return t.renderer().usePaths=r,g},a.svg=function(e){return a.bufferCanvasImage(e||{},this).getSerializedSvg()},e.exports=a},function(e,t,r){!function(){var t,r,n,_,a;function i(e,t){var r,n=Object.keys(t);for(r=0;r<n.length;r++)e=e.replace(new RegExp("\\{"+n[r]+"\\}","gi"),t[n[r]]);return e}function o(e){var t,r,n;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",n=0;n<12;n++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function l(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}a=function(e,t){var r,n,_,a={};for(e=e.split(","),t=t||10,r=0;r<e.length;r+=2)n="&"+e[r+1]+";",_=parseInt(e[r],t),a[n]="&#"+_+";";return a["\\xa0"]="&#160;",a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(n=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var r,n=this.__ctx.__createElement("stop");n.setAttribute("offset",e),-1!==t.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),n.setAttribute("stop-color",i("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),n.setAttribute("stop-opacity",r[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)},_=function(e,t){this.__root=e,this.__ctx=t},(r=function(e){var t,n={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((t=n).width=arguments[0],t.height=arguments[1]):t=e||n,!(this instanceof r))return new r(t);this.width=t.width||n.width,this.height=t.height||n.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:n.enableMirroring,this.canvas=this,this.__document=t.document||document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,t,r){void 0===t&&(t={});var n,_,a=this.__document.createElementNS("http://www.w3.org/2000/svg",e),i=Object.keys(t);for(r&&(a.setAttribute("fill","none"),a.setAttribute("stroke","none")),n=0;n<i.length;n++)_=i[n],a.setAttribute(_,t[_]);return a},r.prototype.__setDefaultStyles=function(){var e,r,n=Object.keys(t);for(e=0;e<n.length;e++)this[r=n[e]]=t[r].canvas},r.prototype.__applyStyleState=function(e){if(e){var t,r,n=Object.keys(e);for(t=0;t<n.length;t++)this[r=n[t]]=e[r]}},r.prototype.__getStyleState=function(){var e,r,n={},_=Object.keys(t);for(e=0;e<_.length;e++)n[r=_[e]]=this[r];return n},r.prototype.__applyStyleToCurrentElement=function(e){var r=this.__currentElement;this.__currentElementsToStyle;var a,o,l,s,c,u=Object.keys(t);for(a=0;a<u.length;a++)if(o=t[u[a]],l=this[u[a]],o.apply)if(l instanceof _){if(l.__ctx)for(;l.__ctx.__defs.childNodes.length;)s=l.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[s]=s,this.__defs.appendChild(l.__ctx.__defs.childNodes[0]);r.setAttribute(o.apply,i("url(#{id})",{id:l.__root.getAttribute("id")}))}else if(l instanceof n)r.setAttribute(o.apply,i("url(#{id})",{id:l.__root.getAttribute("id")}));else if(-1!==o.apply.indexOf(e)&&o.svg!==l)if("stroke"!==o.svgAttr&&"fill"!==o.svgAttr||-1===l.indexOf("rgba")){var f=o.svgAttr;if("globalAlpha"===u[a]&&(f=e+"-"+o.svgAttr,r.getAttribute(f)))continue;r.setAttribute(f,l)}else{c=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(l),r.setAttribute(o.svgAttr,i("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var d=c[4],h=this.globalAlpha;null!=h&&(d*=h),r.setAttribute(o.svgAttr+"-opacity",d)}},r.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},r.prototype.getSerializedSvg=function(e){var t,r,n,_,i,o=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(a),r=0;r<t.length;r++)n=t[r],_=a[n],(i=new RegExp(n,"gi")).test(o)&&(o=o.replace(i,_));return o},r.prototype.getSvg=function(){return this.__root},r.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},r.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},r.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");t.appendChild(r),this.__currentElement=r}var n=this.__currentElement.getAttribute("transform");n?n+=" ":n="",n+=e,this.__currentElement.setAttribute("transform",n)},r.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(i("scale({x},{y})",{x:e,y:t}))},r.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(i("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},r.prototype.translate=function(e,t){this.__addTransform(i("translate({x},{y})",{x:e,y:t}))},r.prototype.transform=function(e,t,r,n,_,a){this.__addTransform(i("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:r,d:n,e:_,f:a}))},r.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},r.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},r.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},r.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},r.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},r.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(i("L {x} {y}",{x:e,y:t})):this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},r.prototype.bezierCurveTo=function(e,t,r,n,_,a){this.__currentPosition={x:_,y:a},this.__addPathCommand(i("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:r,cp2y:n,x:_,y:a}))},r.prototype.quadraticCurveTo=function(e,t,r,n){this.__currentPosition={x:r,y:n},this.__addPathCommand(i("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:r,y:n}))};var s=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};r.prototype.arcTo=function(e,t,r,n,_){var a=this.__currentPosition&&this.__currentPosition.x,i=this.__currentPosition&&this.__currentPosition.y;if(void 0!==a&&void 0!==i){if(_<0)throw new Error("IndexSizeError: The radius provided ("+_+") is negative.");if(a===e&&i===t||e===r&&t===n||0===_)this.lineTo(e,t);else{var o=s([a-e,i-t]),l=s([r-e,n-t]);if(o[0]*l[1]!=o[1]*l[0]){var c=o[0]*l[0]+o[1]*l[1],u=Math.acos(Math.abs(c)),f=s([o[0]+l[0],o[1]+l[1]]),d=_/Math.sin(u/2),h=e+d*f[0],p=t+d*f[1],g=[-o[1],o[0]],v=[l[1],-l[0]],m=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},y=m(g),w=m(v);this.lineTo(h+g[0]*_,p+g[1]*_),this.arc(h,p,_,y,w)}else this.lineTo(e,t)}}},r.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},r.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},r.prototype.rect=function(e,t,r,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.closePath()},r.prototype.fillRect=function(e,t,r,n){var _;_=this.__createElement("rect",{x:e,y:t,width:r,height:n},!0),this.__closestGroupOrSvg().appendChild(_),this.__currentElement=_,this.__applyStyleToCurrentElement("fill")},r.prototype.strokeRect=function(e,t,r,n){var _;_=this.__createElement("rect",{x:e,y:t,width:r,height:n},!0),this.__closestGroupOrSvg().appendChild(_),this.__currentElement=_,this.__applyStyleToCurrentElement("stroke")},r.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],r=t.childNodes,n=r.length-1;n>=0;n--)r[n]&&t.removeChild(r[n]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},r.prototype.clearRect=function(e,t,r,n){if(0!==e||0!==t||r!==this.width||n!==this.height){var _,a=this.__closestGroupOrSvg();_=this.__createElement("rect",{x:e,y:t,width:r,height:n,fill:"#FFFFFF"},!0),a.appendChild(_)}else this.__clearCanvas()},r.prototype.createLinearGradient=function(e,t,r,_){var a=this.__createElement("linearGradient",{id:o(this.__ids),x1:e+"px",x2:r+"px",y1:t+"px",y2:_+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new n(a,this)},r.prototype.createRadialGradient=function(e,t,r,_,a,i){var l=this.__createElement("radialGradient",{id:o(this.__ids),cx:_+"px",cy:a+"px",r:i+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new n(l,this)},r.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},r.prototype.__wrapTextLink=function(e,t){if(e.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),r.appendChild(t),r}return t},r.prototype.__applyText=function(e,t,r,n){var _,a,i=this.__parseFont(),o=this.__closestGroupOrSvg(),s=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:t,y:r,"text-anchor":(_=this.textAlign,a={left:"start",right:"end",center:"middle",start:"start",end:"end"},a[_]||a.start),"dominant-baseline":l(this.textBaseline)},!0);s.appendChild(this.__document.createTextNode(e)),this.__currentElement=s,this.__applyStyleToCurrentElement(n),o.appendChild(this.__wrapTextLink(i,s))},r.prototype.fillText=function(e,t,r){this.__applyText(e,t,r,"fill")},r.prototype.strokeText=function(e,t,r){this.__applyText(e,t,r,"stroke")},r.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},r.prototype.arc=function(e,t,r,n,_,a){if(n!==_){(n%=2*Math.PI)==(_%=2*Math.PI)&&(_=(_+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=e+r*Math.cos(_),l=t+r*Math.sin(_),s=e+r*Math.cos(n),c=t+r*Math.sin(n),u=a?0:1,f=0,d=_-n;d<0&&(d+=2*Math.PI),f=a?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(s,c),this.__addPathCommand(i("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:f,sweepFlag:u,endX:o,endY:l})),this.__currentPosition={x:o,y:l}}},r.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),r=o(this.__ids),n=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",r),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",i("url(#{id})",{id:r})),e.appendChild(n),this.__currentElement=n},r.prototype.drawImage=function(){var e,t,n,_,a,i,o,l,s,c,u,f,d,h=Array.prototype.slice.call(arguments),p=h[0],g=0,v=0;if(3===h.length)e=h[1],t=h[2],n=a=p.width,_=i=p.height;else if(5===h.length)e=h[1],t=h[2],n=h[3],_=h[4],a=p.width,i=p.height;else{if(9!==h.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);g=h[1],v=h[2],a=h[3],i=h[4],e=h[5],t=h[6],n=h[7],_=h[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var m="translate("+e+", "+t+")";if(p instanceof r){if((l=p.getSvg().cloneNode(!0)).childNodes&&l.childNodes.length>1){for(s=l.childNodes[0];s.childNodes.length;)d=s.childNodes[0].getAttribute("id"),this.__ids[d]=d,this.__defs.appendChild(s.childNodes[0]);if(c=l.childNodes[1]){var y,w=c.getAttribute("transform");y=w?w+" "+m:m,c.setAttribute("transform",y),o.appendChild(c)}}}else"CANVAS"!==p.nodeName&&"IMG"!==p.nodeName||((u=this.__createElement("image")).setAttribute("width",n),u.setAttribute("height",_),u.setAttribute("opacity",this.globalAlpha),u.setAttribute("preserveAspectRatio","none"),(f=this.__document.createElement("canvas")).width=n,f.height=_,f.getContext("2d").drawImage(p,g,v,a,i,0,0,n,_),p=f,u.setAttribute("transform",m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===p.nodeName?p.toDataURL():p.getAttribute("src")),o.appendChild(u))},r.prototype.createPattern=function(e,t){var n,a=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=o(this.__ids);return a.setAttribute("id",i),a.setAttribute("width",e.width),a.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((n=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),a.appendChild(n),this.__defs.appendChild(a)):e instanceof r&&(a.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(a)),new _(a,this)},r.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},r.prototype.drawFocusRing=function(){},r.prototype.createImageData=function(){},r.prototype.getImageData=function(){},r.prototype.putImageData=function(){},r.prototype.globalCompositeOperation=function(){},r.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=r),"object"==typeof e.exports&&(e.exports=r)}()}]),console.log("Executing in-browser code now"),!function(){return!this}())throw console.error("Not strict mode!"),new Error("Not strict mode!");const RS=r(s)("_headless_exporter_browser_code");async function DS(e,t,r){const n=await op(e);let _=new bS({eczoodb:n,graphGlobalOptions:r});await _.initialize();let a=new IS(_,t);return await a.initialize(),{eczoodb:n,eczCodeGraph:_,eczCodeGraphViewController:a}}async function FS(e,{graphGlobalOptions:t,displayOptions:n,updateLayoutOptions:_,cyStyleOptions:a}){const{eczoodb:i,eczCodeGraph:l,eczCodeGraphViewController:s}=await DS(e,n,t);RS("Code graph loaded.");const c=window.document.createElement("div");window.document.body.appendChild(c),c.style.width=800,c.style.height=600,await l.mountInDom(c,{styleOptions:Object.assign({matchWebPageFonts:!1,window:window},a)}),RS("Mounted in DOM!"),s.setDisplayOptions(n),RS("set display options!"),await l.updateLayout(r(o)({animate:!1},_)),RS("ran updateLayout()!");const u=l.cy;return await u.fit(),RS("fit cy canvas view to graph. Done!"),RS(`There are ${u.nodes().length} nodes in the graph.`),{eczoodb:i,eczCodeGraph:l,eczCodeGraphViewController:s}}XC.use(r(jS)),window.loadCodeGraph=DS,window.prepareCodeGraphAndLayout=FS,window.loadAndCompileCodeGraphToSvgPromise=async function(e,t,r){return RS("prepareOptions = ",JSON.stringify(t)),{svgData:(await FS(e,t)).eczCodeGraph.cy.svg(Object.assign({full:!0},r))}},window.localStorage.debug="*",console.log("Loaded (msg via console.log())"),RS("Loaded (msg via debug())."),console.debug("Loaded (msg via console.debug())"),window.finished_loading=!0;
//# sourceMappingURL=_headless_exporter_browser_page.ae337972.js.map
