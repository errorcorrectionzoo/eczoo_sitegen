"use strict";
var e=globalThis;function t(e,t,r,_){Object.defineProperty(e,t,{get:r,set:_,enumerable:!0,configurable:!0})}function r(e){return e&&e.__esModule?e.default:e}var _={},n={},a=e.parcelRequire94c2;null==a&&((a=function(e){if(e in _)return _[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return _[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire94c2=a);var i=a.register;i("3krpC",(function(e,t){var r=a("4bJEF");t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let _=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(_++,"%c"===e&&(n=_))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e=void 0);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=a("lrRFl")(t);const{formatters:_}=e.exports;_.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),i("4bJEF",(function(e,t){var r,_,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{_="function"==typeof clearTimeout?clearTimeout:i}catch(e){_=i}}();var l,s=[],c=!1,u=-1;function f(){c&&l&&(c=!1,l.length?s=l.concat(s):u=-1,s.length&&d())}function d(){if(!c){var e=o(f);c=!0;for(var t=s.length;t;){for(l=s,s=[];++u<t;)l&&l[u].run();u=-1,t=s.length}l=null,c=!1,function(e){if(_===clearTimeout)return clearTimeout(e);if((_===i||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(e);try{return _(e)}catch(t){try{return _.call(null,e)}catch(t){return _.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new p(e,t)),1!==s.length||c||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}})),i("lrRFl",(function(e,t){e.exports=function(e){function t(e){let _,n,a,i=null;function o(...e){if(!o.enabled)return;const r=o,n=Number(new Date),a=n-(_||n);r.diff=a,r.prev=_,r.curr=n,_=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((_,n)=>{if("%%"===_)return"%";i++;const a=t.formatters[n];if("function"==typeof a){const t=e[i];_=a.call(r,t),e.splice(i,1),i--}return _})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(n!==t.namespaces&&(n=t.namespaces,a=t.enabled(e)),a),set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){const _=t(this.namespace+(void 0===r?":":r)+e);return _.log=this.log,_}function _(e,t){let r=0,_=0,n=-1,a=0;for(;r<e.length;)if(_<t.length&&(t[_]===e[r]||"*"===t[_]))"*"===t[_]?(n=_,a=r,_++):(r++,_++);else{if(-1===n)return!1;_=n+1,a++,r=a}for(;_<t.length&&"*"===t[_];)_++;return _===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(_(e,r))return!1;for(const r of t.names)if(_(e,r))return!0;return!1},t.humanize=a("620kE"),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}})),i("620kE",(function(e,t){var r=1e3,_=6e4,n=36e5,a=864e5,i=6048e5,o=315576e5;function l(e,t,r,_){var n=t>=1.5*r;return Math.round(e/r)+" "+_+(n?"s":"")}e.exports=function(e,t){t=t||{};var s,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*i;case"days":case"day":case"d":return l*a;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*_;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return t.long?(s=e,(c=Math.abs(s))>=a?l(s,c,a,"day"):c>=n?l(s,c,n,"hour"):c>=_?l(s,c,_,"minute"):c>=r?l(s,c,r,"second"):s+" ms"):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=n?Math.round(e/n)+"h":t>=_?Math.round(e/_)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}})),i("4N7g8",(function(e,t){var r=a("kLIqa"),_=t&&!t.nodeType&&t,n=_&&e&&!e.nodeType&&e,i=n&&n.exports===_?r.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,_=o?o(r):new e.constructor(r);return e.copy(_),_}})),i("kLIqa",(function(e,t){var r=a("30lt2"),_="object"==typeof self&&self&&self.Object===Object&&self,n=r||_||Function("return this")();e.exports=n})),i("30lt2",(function(t,r){var _="object"==typeof e&&e&&e.Object===Object&&e;t.exports=_})),i("4a4bO",(function(e,t){var r=a("kLIqa"),_=a("jVrpd"),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n?r.Buffer:void 0,l=(o?o.isBuffer:void 0)||_;e.exports=l})),i("jVrpd",(function(e,t){e.exports=function(){return!1}})),i("3tQok",(function(e,t){var r=a("30lt2"),_=t&&!t.nodeType&&t,n=_&&e&&!e.nodeType&&e,i=n&&n.exports===_&&r.process,o=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),i("hoVWB",(function(e,r){t(e.exports,"__nest__",(()=>o)),t(e.exports,"__get__",(()=>l)),t(e.exports,"__getcm__",(()=>s)),t(e.exports,"object",(()=>u)),t(e.exports,"__class__",(()=>f)),t(e.exports,"__call__",(()=>d)),t(e.exports,"__kwargtrans__",(()=>p)),t(e.exports,"__super__",(()=>h)),t(e.exports,"Exception",(()=>ze)),t(e.exports,"property",(()=>g)),t(e.exports,"assert",(()=>m)),t(e.exports,"__mergekwargtrans__",(()=>y)),t(e.exports,"hasattr",(()=>x)),t(e.exports,"dir",(()=>w)),t(e.exports,"setattr",(()=>b)),t(e.exports,"getattr",(()=>k)),t(e.exports,"__in__",(()=>O)),t(e.exports,"len",(()=>E)),t(e.exports,"py_typeof",(()=>T)),t(e.exports,"dict",(()=>he)),t(e.exports,"IndexError",(()=>We)),t(e.exports,"KeyError",(()=>Ge)),t(e.exports,"__t__",(()=>C)),t(e.exports,"float",(()=>A)),t(e.exports,"ValueError",(()=>Ve)),t(e.exports,"str",(()=>te)),t(e.exports,"int",(()=>S)),t(e.exports,"__mul__",(()=>me)),t(e.exports,"bool",(()=>N)),t(e.exports,"isinstance",(()=>M)),t(e.exports,"callable",(()=>j)),t(e.exports,"repr",(()=>I)),t(e.exports,"chr",(()=>D)),t(e.exports,"ord",(()=>R)),t(e.exports,"max",(()=>z)),t(e.exports,"StopIteration",(()=>qe)),t(e.exports,"py_iter",(()=>V)),t(e.exports,"list",(()=>J)),t(e.exports,"py_next",(()=>G)),t(e.exports,"py_reversed",(()=>W)),t(e.exports,"zip",(()=>H)),t(e.exports,"any",(()=>Y)),t(e.exports,"all",(()=>X)),t(e.exports,"sum",(()=>Z)),t(e.exports,"enumerate",(()=>K)),t(e.exports,"set",(()=>ee)),t(e.exports,"tuple",(()=>Q)),t(e.exports,"py_TypeError",(()=>Ye)),t(e.exports,"__mod__",(()=>ge)),t(e.exports,"__neg__",(()=>ve)),t(e.exports,"__floordiv__",(()=>ye)),t(e.exports,"__add__",(()=>we)),t(e.exports,"__sub__",(()=>be)),t(e.exports,"__lshift__",(()=>ke)),t(e.exports,"__and__",(()=>xe)),t(e.exports,"__eq__",(()=>Oe)),t(e.exports,"__ne__",(()=>Pe)),t(e.exports,"__lt__",(()=>Ee)),t(e.exports,"__le__",(()=>Ce)),t(e.exports,"__gt__",(()=>Ae)),t(e.exports,"__ge__",(()=>Se)),t(e.exports,"__imul__",(()=>Ne)),t(e.exports,"__iadd__",(()=>Te)),t(e.exports,"__isub__",(()=>Le)),t(e.exports,"__ior__",(()=>Me)),t(e.exports,"__getitem__",(()=>je)),t(e.exports,"__setitem__",(()=>Ie)),t(e.exports,"__getslice__",(()=>De)),t(e.exports,"__setslice__",(()=>Re)),t(e.exports,"NotImplementedError",(()=>$e)),t(e.exports,"AttributeError",(()=>He)),t(e.exports,"sorted",(()=>Ke)),t(e.exports,"map",(()=>Qe));var _=a("j49u0"),n="org.transcrypt.__runtime__",i={};function o(e,t,r){var _=e;if(""!=t){for(var n=t.split("."),a=n.length,i=0;i<n.length;i++){if(!_.hasOwnProperty(n[i])){a=i;break}_=_[n[i]]}for(i=a;i<n.length;i++)_[n[i]]={},_=_[n[i]]}for(let e of Object.getOwnPropertyNames(r))Object.defineProperty(_,e,{get:()=>r[e],enumerable:!0,configurable:!0})}function l(e,t,r){return e&&(e.hasOwnProperty("__class__")||"string"==typeof e||e instanceof String)?(r&&Object.defineProperty(e,r,{value:function(){var r=[].slice.apply(arguments);return t.apply(null,[e].concat(r))},writable:!0,enumerable:!0,configurable:!0}),function(){var r=[].slice.apply(arguments);return t.apply(null,[e.__proxy__?e.__proxy__:e].concat(r))}):t}function s(e,t,r){return e.hasOwnProperty("__class__")?function(){var r=[].slice.apply(arguments);return t.apply(null,[e.__class__].concat(r))}:function(){var r=[].slice.apply(arguments);return t.apply(null,[e].concat(r))}}i.interpreter_name="python",i.transpiler_name="transcrypt",i.executor_name=i.transpiler_name,i.transpiler_version="3.9.3";var c={__name__:"type",__bases__:[],__new__:function(e,t,r,_){for(var n=function(){var e=[].slice.apply(arguments);return n.__new__(e)},a=r.length-1;a>=0;a--){var i=r[a];for(var o in i){null!=(l=Object.getOwnPropertyDescriptor(i,o))&&Object.defineProperty(n,o,l)}for(let e of Object.getOwnPropertySymbols(i)){let t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(n,e,t)}}for(var o in n.__metaclass__=e,n.__name__=t.startsWith("py_")?t.slice(3):t,n.__bases__=r,_){var l=Object.getOwnPropertyDescriptor(_,o);Object.defineProperty(n,o,l)}for(let e of Object.getOwnPropertySymbols(_)){let t=Object.getOwnPropertyDescriptor(_,e);Object.defineProperty(n,e,t)}return n}};c.__metaclass__=c;var u={__init__:function(e){},__metaclass__:c,__name__:"object",__bases__:[],__new__:function(e){var t=Object.create(this,{__class__:{value:this,enumerable:!0}});return("__getattr__"in this||"__setattr__"in this)&&(t.__proxy__=new Proxy(t,{get:function(e,t){let r=e[t];return null==r?e.__getattr__(t):r},set:function(e,t,r){try{e.__setattr__(t,r)}catch(_){e[t]=r}return!0}}),t=t.__proxy__),this.__init__.apply(null,[t].concat(e)),t}};function f(e,t,r,_){return void 0===_&&(_=t[0].__metaclass__),_.__new__(_,e,t,r)}function d(){var e=[].slice.apply(arguments);return"object"==typeof e[0]&&"__call__"in e[0]?e[0].__call__.apply(e[1],e.slice(2)):e[0].apply(e[1],e.slice(2))}i.executor_name=i.transpiler_name;function p(e){return e.__kwargtrans__=null,e.constructor=Object,e}function h(e,t){for(let r of e.__bases__)if(t in r)return r[t];throw new ze("Superclass method not found")}function g(e,t){return t||(t=function(){}),{get:function(){return e(this)},set:function(e){t(this,e)},enumerable:!0}}function v(e,t,r){e.hasOwnProperty(t)||Object.defineProperty(e,t,r)}function m(e,t){if(!e)throw Ue(t,new Error)}function y(e,t){var r={};for(var _ in e)r[_]=e[_];for(var _ in t)r[_]=t[_];return r}function w(e){var t=[];for(var r in e)t.push(r.startsWith("py_")?r.slice(3):r);return t.sort(),t}function b(e,t,r){e[t]=r}function k(e,t){return t in e?e[t]:e["py_"+t]}function x(e,t){try{return t in e||"py_"+t in e}catch(e){return!1}}function O(e,t){return null!=t&&(t.__contains__ instanceof Function?t.__contains__(e):t.indexOf?t.indexOf(e)>-1:t.hasOwnProperty(e))}function P(e){return e.startswith("__")&&e.endswith("__")||"constructor"==e||e.startswith("py_")}function E(e){if(null==e)return 0;if(e.__len__ instanceof Function)return e.__len__();if(void 0!==e.length)return e.length;var t=0;for(var r in e)P(r)||t++;return t}function C(e){return null!=e&&(["boolean","number"].indexOf(typeof e)>=0?e:e.__bool__ instanceof Function?!!e.__bool__()&&e:e.__len__ instanceof Function?0!==e.__len__()&&e:(e instanceof Function||0!==E(e))&&e)}function A(e){if("inf"==e)return 1/0;if("-inf"==e)return-1/0;if("nan"==e)return NaN;if(isNaN(parseFloat(e))){if(!1===e)return 0;if(!0===e)return 1;throw Ve("could not convert string to float: '"+te(e)+"'",new Error)}return+e}function S(e){return 0|A(e)}function N(e){return!!C(e)}function T(e){var t=typeof e;if("object"!=t)return"boolean"==t?N:"string"==t?te:"number"==t?e%1==0?S:A:null;try{return"__class__"in e?e.__class__:u}catch(e){return t}}function L(e,t){if(t instanceof Array){for(let r of t)if(L(e,r))return!0;return!1}try{var r=e;if(r==t)return!0;for(var _=[].slice.call(r.__bases__);_.length;){if((r=_.shift())==t)return!0;r.__bases__.length&&(_=[].slice.call(r.__bases__).concat(_))}return!1}catch(r){return e==t||t==u}}function M(e,t){try{return L("__class__"in e?e.__class__:T(e),t)}catch(r){return L(T(e),t)}}function j(e){return!(!e||"object"!=typeof e||!("__call__"in e))||"function"==typeof e}function I(e){try{return e.__repr__()}catch(a){try{return e.__str__()}catch(a){try{if(null==e)return"None";if(e.constructor==Object){var t="{",r=!1;for(var _ in e)if(!P(_)){if(_.isnumeric())var n=_;else n="'"+_+"'";r?t+=", ":r=!0,t+=n+": "+I(e[_])}return t+="}"}return"boolean"==typeof e?e.toString().capitalize():e.toString()}catch(t){return"<object of type: "+typeof e+">"}}}}function D(e){return String.fromCharCode(e)}function R(e){return e.charCodeAt(0)}function F(e,...t){let r;function _(e){return e}if(t.length>0&&t[t.length-1]&&t[t.length-1].hasOwnProperty("__kwargtrans__")){const e=t[t.length-1];if(t=t.slice(0,-1),e.hasOwnProperty("py_default")&&(r=e.py_default),e.hasOwnProperty("key")&&(_=e.key),"[object Function]"!==Object.prototype.toString.call(_))throw TypeError("object is not callable",new Error)}if(0===t.length)throw TypeError("expected at least 1 argument, got 0",new Error);if(t.length>1&&void 0!==r)throw TypeError("Cannot specify a default with multiple positional arguments",new Error);if(1===t.length){if("[object Array]"!==Object.prototype.toString.call(t[0]))throw TypeError("object is not iterable",new Error);t=t[0]}if(0===t.length){if(void 0===r)throw Ve("arg is an empty sequence",new Error);return r}return t.reduce(((t,r)=>e(_(r),_(t))?r:t))}function z(...e){return F((function(e,t){return e>t}),...e)}A.__name__="float",A.__bases__=[u],S.__name__="int",S.__bases__=[u],Number.prototype.__format__=function(e){if(null==e||0==e.strip().length)return this.toString();var t=!1,r=!1,_=0,n=!1,a=!1,i="-",o=">",l=" ",s=void 0,c=void 0,u=this.valueOf(),f=u<0;function d(e,t,r,_){null==r&&(r=" "),null==_&&(_=">");var n="",i="";e.startswith(["+","-"])&&(i=e[0],e=e.substr(1)),a&&e.startswith(["0b","0o","0x"])&&(n=e.slice(0,2),e=e.substr(2));var o=t-(e.length+i.length+n.length);switch(_){case"=":return i+n+me(r,o)+e;case">":return me(r,o)+i+n+e;case"<":return i+n+e+me(r,o);case"^":var l=(o%2+2)%2;return me(r,o=Math.floor(o/2))+i+n+e+me(r,o+l);default:throw Ve("Invalid align type: '"+_+"'",new Error)}}function p(e){if(-1==e.indexOf("e+")&&("g"==c||"G"==c)){for(var t=e.py_split("."),r=t[0],_=t[1];"0"==_[_.length-1];)_=_.slice(0,-1);e=""!=_?".".join([r,_]):r}return a&&-1==e.indexOf(".")&&(e+="."),e}u=Math.abs(u),e.endswith(["b","c","d","e","E","f","F","g","G","n","o","x","X","%"])?(c=e[e.length-1],e=e.slice(0,-1),"n"==c&&(c=Number.isInteger(u)?"d":"f")):(c=Number.isInteger(u)?"d":"g",r=!0);var h=e.split(".");if(e=h[0],null!=(s=h[1])&&(s=parseInt(s)),e.length>0&&","==e[e.length-1]&&(t=!0,e=e.slice(0,-1)),e.length>0){for(var g="";e&&e[e.length-1].isnumeric();)g=e[e.length-1]+g,e=e.slice(0,-1);g.length>0&&("0"==g[0]?(_=parseInt(g.substr(1)),n=!0):_=parseInt(g)),e.length>0&&"#"==e[e.length-1]&&(a=!0,e=e.slice(0,-1)),e.length>0&&e.endswith(["+","-"," "])&&(i=e[e.length-1],e=e.slice(0,-1)),e.length>0&&e.endswith(["<",">","=","^"])&&(o=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(l=e[0])}if(isNaN(u))u="nan";else if(u==1/0)u="inf";else switch(c){case"b":u=Math.floor(u).toString(2),a&&(u="0b"+u);break;case"c":u=String.fromCharCode(Math.floor(u));break;case"d":u=Math.floor(u).toString(),t&&(u=u.replace(/\B(?=(\d{3})+(?!\d))/g,","));break;case"o":u=Math.floor(u).toString(8),a&&(u="0o"+u);break;case"x":case"X":u=Math.floor(u).toString(16),a&&(u="0x"+u);break;case"e":case"E":null==s&&(s=6);var v=(w=u.toExponential(s).split("e+"))[0],m=w[1];u=p(u=v.toString()+"e+"+d(m.toString(),2,"0"));break;case"f":case"F":case"%":null==s&&(s=6),"%"==c&&(u*=100),u=p(u=u.toFixed(s)),"%"==c&&(u+="%");break;case"g":case"G":null==s&&(s=r?1:6),0==s&&(s=1);var y=!1;if(r)(h=u.toString().split("."))[0].length+h[1].length>=s&&(y=!0);var w;v=(w=u.toExponential(s-1).split("e+"))[0];u=p(u=(y|=!(-4<=(m=w[1])&&m<s))?v.toString()+"e+"+d(m.toString(),2,"0"):u.toFixed(s-1-m));break;default:throw Ve("Invalid format type: '"+c+"'",new Error)}return c===c.toUpperCase()&&(u=u.toUpperCase()),"c"!=c&&("-"==i?f&&(u="-"+u):u=f?"-"+u:i+u),n&&(l="0",o="="),_>0&&(u=d(u,_,l,o)),u},N.__name__="bool",N.__bases__=[S];Math.abs;function B(){try{return{value:this.__next__(),done:!1}}catch(e){return{value:void 0,done:!0}}}function q(){var e=this.next();if(e.done)throw qe(new Error);return e.value}function V(e){if("string"==typeof e||"__iter__"in e)(t=e.__iter__()).next=B;else if("selector"in e){(t=J(e).__iter__()).next=B}else if("next"in e){"__next__"in(t=e)||(t.__next__=q)}else{if(!(Symbol.iterator in e))throw Be(new Error);var t;(t=e[Symbol.iterator]()).__next__=q}return t[Symbol.iterator]=function(){return t},t}function G(e){try{var t=e.__next__()}catch(r){if((t=e.next()).done)throw qe(new Error);return t.value}if(null==t)throw qe(new Error);return t}function U(e){this.iterable=e,this.index=0}function $(e){this.iterable=e,this.index=0}function W(e){return(e=e.slice()).reverse(),e}function H(){for(var e=[].slice.call(arguments),t=0;t<e.length;t++)"string"==typeof e[t]?e[t]=e[t].split(""):Array.isArray(e[t])||(e[t]=Array.from(e[t]));return(0==e.length?[]:e.reduce((function(e,t){return e.length<t.length?e:t}))).map((function(t,r){return e.map((function(e){return e[r]}))}))}function Y(e){for(let t of e)if(N(t))return!0;return!1}function X(e){for(let t of e)if(!N(t))return!1;return!0}function Z(e){let t=0;for(let r of e)t+=r;return t}function K(e,t=0){return t.hasOwnProperty("__kwargtrans__")&&(t=t.start),H(function(e,t,r){if(null==t&&(t=e,e=0),null==r&&(r=1),r>0&&e>=t||r<0&&e<=t)return[];for(var _=[],n=e;r>0?n<t:n>t;n+=r)_.push(n);return _}(t,E(e)+t),e)}function J(e){return e?Array.from(e):[]}function Q(e){let t=e?[].slice.apply(e):[];return t.__class__=Q,t}function ee(e){let t=[];if(e)for(let r=0;r<e.length;r++)t.add(e[r]);return t.__class__=ee,t}U.prototype.__next__=function(){if(this.index<this.iterable.length)return this.iterable[this.index++];throw qe(new Error)},$.prototype.next=function(){return this.index<this.iterable.py_keys.length?{value:this.index++,done:!1}:{value:void 0,done:!0}},Array.prototype.__class__=J,J.__name__="list",J.__bases__=[u],Array.prototype.__iter__=function(){return new U(this)},Array.prototype.__getslice__=function(e,t,r){if(e<0&&(e=this.length+e),null==t?t=this.length:t<0?t=this.length+t:t>this.length&&(t=this.length),1==r)return Array.prototype.slice.call(this,e,t);let _=J([]);for(let n=e;n<t;n+=r)_.push(this[n]);return _},Array.prototype.__setslice__=function(e,t,r,_){if(e<0&&(e=this.length+e),null==t?t=this.length:t<0&&(t=this.length+t),null==r)Array.prototype.splice.apply(this,[e,t-e].concat(_));else{let n=0;for(let a=e;a<t;a+=r)this[a]=_[n++]}},Array.prototype.__repr__=function(){if(this.__class__==ee&&!this.length)return"set()";let e=this.__class__&&this.__class__!=J?this.__class__==Q?"(":"{":"[";for(let t=0;t<this.length;t++)t&&(e+=", "),e+=I(this[t]);return this.__class__==Q&&1==this.length&&(e+=","),e+=this.__class__&&this.__class__!=J?this.__class__==Q?")":"}":"]",e},Array.prototype.__str__=Array.prototype.__repr__,Array.prototype.append=function(e){this.push(e)},Array.prototype.py_clear=function(){this.length=0},Array.prototype.extend=function(e){this.push.apply(this,e)},Array.prototype.insert=function(e,t){this.splice(e,0,t)},Array.prototype.remove=function(e){let t=this.indexOf(e);if(-1==t)throw Ve("list.remove(x): x not in list",new Error);this.splice(t,1)},Array.prototype.index=function(e){return this.indexOf(e)},Array.prototype.py_pop=function(e){return null==e?this.pop():this.splice(e,1)[0]},Array.prototype.py_sort=function(){Je.apply(null,[this].concat([].slice.apply(arguments)))},Array.prototype.__add__=function(e){return J(this.concat(e))},Array.prototype.__mul__=function(e){let t=this;for(let r=1;r<e;r++)t=t.concat(this);return t},Array.prototype.__rmul__=Array.prototype.__mul__,Q.__name__="tuple",Q.__bases__=[u],ee.__name__="set",ee.__bases__=[u],Array.prototype.__bindexOf__=function(e){e+="";let t=0,r=this.length-1;for(;t<=r;){let _=(t+r)/2|0,n=this[_]+"";if(n<e)t=_+1;else{if(!(n>e))return _;r=_-1}}return-1},Array.prototype.add=function(e){-1==this.indexOf(e)&&this.push(e)},Array.prototype.discard=function(e){var t=this.indexOf(e);-1!=t&&this.splice(t,1)},Array.prototype.isdisjoint=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1!=this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issuperset=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1==this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issubset=function(e){return ee(e.slice()).issuperset(this)},Array.prototype.union=function(e){let t=ee(this.slice().sort());for(let r=0;r<e.length;r++)-1==t.__bindexOf__(e[r])&&t.push(e[r]);return t},Array.prototype.intersection=function(e){this.sort();let t=ee();for(let r=0;r<e.length;r++)-1!=this.__bindexOf__(e[r])&&t.push(e[r]);return t},Array.prototype.difference=function(e){let t=ee(e.slice().sort()),r=ee();for(let e=0;e<this.length;e++)-1==t.__bindexOf__(this[e])&&r.push(this[e]);return r},Array.prototype.symmetric_difference=function(e){return this.union(e).difference(this.intersection(e))},Array.prototype.py_update=function(){let e=[].concat.apply(this.slice(),arguments).sort();this.py_clear();for(let t=0;t<e.length;t++)e[t]!=e[t-1]&&this.push(e[t])},Array.prototype.__eq__=function(e){if(this.length!=e.length)return!1;this.__class__==ee&&(this.sort(),e.sort());for(let t=0;t<this.length;t++)if(this[t]!=e[t])return!1;return!0},Array.prototype.__ne__=function(e){return!this.__eq__(e)},Array.prototype.__le__=function(e){if(this.__class__==ee)return this.issubset(e);for(let t=0;t<this.length;t++){if(this[t]>e[t])return!1;if(this[t]<e[t])return!0}return!0},Array.prototype.__ge__=function(e){if(this.__class__==ee)return this.issuperset(e);for(let t=0;t<this.length;t++){if(this[t]<e[t])return!1;if(this[t]>e[t])return!0}return!0},Array.prototype.__lt__=function(e){return this.__class__==ee?this.issubset(e)&&!this.issuperset(e):!this.__ge__(e)},Array.prototype.__gt__=function(e){return this.__class__==ee?this.issuperset(e)&&!this.issubset(e):!this.__le__(e)};function te(e){if("number"==typeof e)return e.toString();try{return e.__str__()}catch(t){try{return I(e)}catch(t){return String(e)}}}function re(e){return this.hasOwnProperty(e)}function _e(){var e=[];for(var t in this)P(t)||e.push(t);return e}function ne(){var e=[];for(var t in this)P(t)||e.push([t,this[t]]);return e}function ae(e){delete this[e]}function ie(){for(var e in this)delete this[e]}function oe(e,t){var r=this[e];return null==r&&(r=this["py_"+e]),null==r?null==t?null:t:r}function le(e,t){var r=this[e];if(null!=r)return r;var _=null==t?null:t;return this[e]=_,_}function se(e,t){var r=this[e];if(null!=r)return delete this[e],r;if(void 0===t)throw Ge(e,new Error);return t}function ce(){var e=Object.keys(this)[0];if(null==e)throw Ge("popitem(): dictionary is empty",new Error);var t=Q([e,this[e]]);return delete this[e],t}function ue(e){for(var t in e)this[t]=e[t]}function fe(){var e=[];for(var t in this)P(t)||e.push(this[t]);return e}function de(e){return this[e]}function pe(e,t){this[e]=t}function he(e){var t={};if(!e||e instanceof Array){if(e)for(var r=0;r<e.length;r++){var _=e[r];if(!(_ instanceof Array)||2!=_.length)throw Ve("dict update sequence element #"+r+" has length "+_.length+"; 2 is required",new Error);var n=_[0],a=_[1];!(e instanceof Array)&&e instanceof Object&&(M(e,he)||(a=he(a))),t[n]=a}}else if(M(e,he)){var i=e.py_keys();for(r=0;r<i.length;r++){t[n=i[r]]=e[n]}}else{if(!(e instanceof Object))throw Ve("Invalid type of object for dict creation",new Error);t=e}return v(t,"__class__",{value:he,enumerable:!1,writable:!0}),v(t,"__contains__",{value:re,enumerable:!1}),v(t,"py_keys",{value:_e,enumerable:!1}),v(t,"__iter__",{value:function(){new U(this.py_keys())},enumerable:!1}),v(t,Symbol.iterator,{value:function(){new $(this.py_keys())},enumerable:!1}),v(t,"py_items",{value:ne,enumerable:!1}),v(t,"py_del",{value:ae,enumerable:!1}),v(t,"py_clear",{value:ie,enumerable:!1}),v(t,"py_get",{value:oe,enumerable:!1}),v(t,"py_setdefault",{value:le,enumerable:!1}),v(t,"py_pop",{value:se,enumerable:!1}),v(t,"py_popitem",{value:ce,enumerable:!1}),v(t,"py_update",{value:ue,enumerable:!1}),v(t,"py_values",{value:fe,enumerable:!1}),v(t,"__getitem__",{value:de,enumerable:!1}),v(t,"__setitem__",{value:pe,enumerable:!1}),t}function ge(e,t){return"object"==typeof e&&"__mod__"in e?e.__mod__(t):"object"==typeof t&&"__rmod__"in t?t.__rmod__(e):(e%t+t)%t}Uint8Array.prototype.__add__=function(e){let t=new Uint8Array(this.length+e.length);return t.set(this),t.set(e,this.length),t},Uint8Array.prototype.__mul__=function(e){let t=new Uint8Array(e*this.length);for(let r=0;r<e;r++)t.set(this,r*this.length);return t},Uint8Array.prototype.__rmul__=Uint8Array.prototype.__mul__,String.prototype.__class__=te,te.__name__="str",te.__bases__=[u],String.prototype.__iter__=function(){new U(this)},String.prototype.__repr__=function(){return(-1==this.indexOf("'")?"'"+this+"'":'"'+this+'"').py_replace("\t","\\t").py_replace("\n","\\n")},String.prototype.__str__=function(){return this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endswith=function(e,t=0,r){void 0===r&&(r=this.length);const _=this.slice(t,r);if(!(e instanceof Array))return""===e||_.slice(-e.length)===e;for(var n=0;n<e.length;n++)if(_.slice(-e[n].length)===e[n])return!0;return!1},String.prototype.find=function(e,t){return this.indexOf(e,t)},String.prototype.__getslice__=function(e,t,r){e<0&&(e=this.length+e),null==t?t=this.length:t<0&&(t=this.length+t);var _="";if(1==r)_=this.substring(e,t);else for(var n=e;n<t;n+=r)_=_.concat(this.charAt(n));return _},String.prototype.__format__=function(e){if(null==e||0==e.strip().length)return this.valueOf();var t=0,r="<",_=" ",n=this.valueOf();if("s"==e[e.length-1]&&(e=e.slice(0,-1)),e.length>0){for(var a="";e&&e[e.length-1].isnumeric();)a=e[e.length-1]+a,e=e.slice(0,-1);a.length>0&&(t=parseInt(a)),e.length>0&&e.endswith(["<",">","^"])&&(r=e[e.length-1],e=e.slice(0,-1)),e.length>0&&(_=e[0])}return t>0&&(n=function(e,t,r,_){var n=t-e.length;switch(_){case">":return me(r,n)+e;case"<":return e+me(r,n);case"^":var a=(n%2+2)%2;return me(r,n=Math.floor(n/2))+e+me(r,n+a);default:return e}}(n,t,_,r)),n},v(String.prototype,"format",{get:function(){return l(this,(function(e){var t=Q([].slice.apply(arguments).slice(1)),r=0;return e.replace(/\{([^\{]*)\}/g,(function(e,_){var n=_.split(":");_=n[0];var a=n[1];n=_.split("!"),_=n[0];var i=n[1],o=void 0;if(""==_&&(_=r++),_==+_&&void 0!==t[_])o=t[_];else{var l=void 0,s=(""+_).indexOf(".");if(-1!=s?(l=_.substring(s+1),_=_.substring(0,s)):-1!=(s=(""+_).indexOf("["))&&(l=_.substring(s+1).slice(0,-1),_=_.substring(0,s)),_==+_&&l&&void 0!==t[_])o=t[_][l];else for(var c=0;c<t.length;c++)if("object"==typeof t[c]&&null!=t[c]&&void 0!==t[c][_]){o=l?t[c][_][l]:t[c][_];break}}if(void 0===o)return e;if("r"==i)o=I(o);else if("s"==i)o=te(o);else if("a"==i)throw Ve("Conversion to ascii not yet supported: '"+e+"'",new Error);return function(e,t){if(null==e)return"None";switch(t=t||"",typeof e){case"number":case"string":return e.__format__(t);case"boolean":return t?(e?1:0).__format__(t):te(e);case"object":return"__format__"in e?e.__format__(t):te(e).__format__(t);default:return te(e).__format__(t)}}(o,a)}))}))},enumerable:!0}),String.prototype.isalnum=function(){return/^[0-9a-zA-Z]{1,}$/.test(this)},String.prototype.isalpha=function(){return/^[a-zA-Z]{1,}$/.test(this)},String.prototype.isdecimal=function(){return/^[0-9]{1,}$/.test(this)},String.prototype.isdigit=function(){return this.isdecimal()},String.prototype.islower=function(){return/^[a-z]{1,}$/.test(this)},String.prototype.isupper=function(){return/^[A-Z]{1,}$/.test(this)},String.prototype.isspace=function(){return/^[\s]{1,}$/.test(this)},String.prototype.isnumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},String.prototype.join=function(e){return(e=Array.from(e)).join(this)},String.prototype.lower=function(){return this.toLowerCase()},String.prototype.py_replace=function(e,t,r){if(void 0===r||r<0)return this.split(e).join(t);if(0===r)return this;{const _=this.split(e,r).join(t),n=this.slice(this.split(e,r).join(e).length+1);return _.concat(n.length>0?t:"",n)}},String.prototype.lstrip=function(){return this.replace(/^\s*/g,"")},String.prototype.rfind=function(e,t){return this.lastIndexOf(e,t)},String.prototype.rsplit=function(e,t){if(null==e||null==e){e=/\s+/;var r=this.strip()}else r=this;if(null==t||-1==t)return r.split(e);var _=r.split(e);if(t<_.length){var n=_.length-t;return[_.slice(0,n).join(e)].concat(_.slice(n))}return _},String.prototype.rstrip=function(){return this.replace(/\s*$/g,"")},String.prototype.py_split=function(e,t){if(null==e||null==e){e=/\s+/;var r=this.strip()}else r=this;if(null==t||-1==t)return r.split(e);var _=r.split(e);return t<_.length?_.slice(0,t).concat([_.slice(t).join(e)]):_},String.prototype.startswith=function(e,t=0,r){void 0===r&&(r=this.length);const _=this.slice(t,r);if(!(e instanceof Array))return 0===_.indexOf(e);for(let t=0;t<e.length;t++)if(0===_.indexOf(e[t]))return!0;return!1},String.prototype.strip=function(){return this.trim()},String.prototype.upper=function(){return this.toUpperCase()},String.prototype.__mul__=function(e){for(var t="",r=0;r<e;r++)t+=this;return t},String.prototype.__rmul__=String.prototype.__mul__,he.__name__="dict",he.__bases__=[u],v(Function.prototype,"__setdoc__",{value:function(e){return this.__doc__=e,this},enumerable:!1});function ve(e){return"object"==typeof e&&"__neg__"in e?e.__neg__():-e}function me(e,t){return"object"==typeof e&&"__mul__"in e?e.__mul__(t):"object"==typeof t&&"__rmul__"in t?t.__rmul__(e):"string"==typeof e?e.__mul__(t):"string"==typeof t?t.__rmul__(e):e*t}function ye(e,t){return"object"==typeof e&&"__floordiv__"in e?e.__floordiv__(t):"object"==typeof t&&"__rfloordiv__"in t?t.__rfloordiv__(e):"object"==typeof e&&"__div__"in e?e.__div__(t):"object"==typeof t&&"__rdiv__"in t?t.__rdiv__(e):Math.floor(e/t)}function we(e,t){return"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function be(e,t){return"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function ke(e,t){return"object"==typeof e&&"__lshift__"in e?e.__lshift__(t):"object"==typeof t&&"__rlshift__"in t?t.__rlshift__(e):e<<t}function xe(e,t){return"object"==typeof e&&"__and__"in e?e.__and__(t):"object"==typeof t&&"__rand__"in t?t.__rand__(e):e&t}function Oe(e,t){return"object"==typeof e&&"__eq__"in e?e.__eq__(t):e==t}function Pe(e,t){return"object"==typeof e&&"__ne__"in e?e.__ne__(t):e!=t}function Ee(e,t){return"object"==typeof e&&"__lt__"in e?e.__lt__(t):e<t}function Ce(e,t){return"object"==typeof e&&"__le__"in e?e.__le__(t):e<=t}function Ae(e,t){return"object"==typeof e&&"__gt__"in e?e.__gt__(t):e>t}function Se(e,t){return"object"==typeof e&&"__ge__"in e?e.__ge__(t):e>=t}function Ne(e,t){return"object"==typeof e&&"__imul__"in e?e.__imul__(t):"object"==typeof e&&"__mul__"in e?e.__mul__(t):"object"==typeof t&&"__rmul__"in t?t.__rmul__(e):"string"==typeof e?e.__mul__(t):"string"==typeof t?t.__rmul__(e):e*t}function Te(e,t){return"object"==typeof e&&"__iadd__"in e?e.__iadd__(t):"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function Le(e,t){return"object"==typeof e&&"__isub__"in e?e.__isub__(t):"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function Me(e,t){return"object"==typeof e&&"__ior__"in e?e.__ior__(t):"object"==typeof e&&"__or__"in e?e.__or__(t):"object"==typeof t&&"__ror__"in t?t.__ror__(e):e|t}function je(e,t){return"object"==typeof e&&"__getitem__"in e?e.__getitem__(t):("string"==typeof e||e instanceof Array)&&t<0?e[e.length+t]:e[t]}function Ie(e,t,r){"object"==typeof e&&"__setitem__"in e?e.__setitem__(t,r):("string"==typeof e||e instanceof Array)&&t<0?e[e.length+t]=r:e[t]=r}function De(e,t,r,_){return"object"==typeof e&&"__getitem__"in e?e.__getitem__([t,r,_]):e.__getslice__(t,r,_)}function Re(e,t,r,_,n){"object"==typeof e&&"__setitem__"in e?e.__setitem__([t,r,_],n):e.__setslice__(t,r,_,n)}var Fe=f("BaseException",[u],{__module__:n}),ze=f("Exception",[Fe],{__module__:n,get __init__(){return l(this,(function(e){var t=he();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}var a=Q([].slice.apply(arguments).slice(1,r+1))}else a=Q();e.__args__=a,Pe(t.error,null)?e.stack=t.error.stack:Error?e.stack=new d(Error,null).stack:e.stack="No stack trace available"}))},get __repr__(){return l(this,(function(e){return Ae(d(E,null,e.__args__),1)?d((t="{}{}").format,t,e.__class__.__name__,d(I,null,d(Q,null,e.__args__))):d(E,null,e.__args__)?function(){var t="{}({})";return d(t.format,t,e.__class__.__name__,d(I,null,je(e.__args__,0)))}():function(){var t="{}()";return d(t.format,t,e.__class__.__name__)}();var t}))},get __str__(){return l(this,(function(e){return Ae(d(E,null,e.__args__),1)?d(te,null,d(Q,null,e.__args__)):d(E,null,e.__args__)?d(te,null,je(e.__args__,0)):""}))}}),Be=f("IterableError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t){var r;d((r=ze).__init__,r,e,"Can't iterate over non-iterable",p({error:t}))}))}}),qe=f("StopIteration",[ze],{__module__:n,get __init__(){return l(this,(function(e,t){var r;d((r=ze).__init__,r,e,"Iterator exhausted",p({error:t}))}))}}),Ve=f("ValueError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),Ge=f("KeyError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),Ue=f("AssertionError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;t?d((_=ze).__init__,_,e,t,p({error:r})):function(){var t=ze;d(t.__init__,t,e,p({error:r}))}()}))}}),$e=f("NotImplementedError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),We=f("IndexError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),He=f("AttributeError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),Ye=f("py_TypeError",[ze],{__module__:n,get __init__(){return l(this,(function(e,t,r){var _;d((_=ze).__init__,_,e,t,p({error:r}))}))}}),Xe=f("Warning",[ze],{__module__:n}),Ze=(f("UserWarning",[Xe],{__module__:n}),f("DeprecationWarning",[Xe],{__module__:n}),f("RuntimeWarning",[Xe],{__module__:n}),function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"iterable":e=n[a];break;case"key":t=n[a];break;case"reverse":r=n[a]}}}var i;t?d((i=e).sort,i,(function(e,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"a":e=n[a];break;case"b":r=n[a]}}}return Ae(d(t,null,e),d(t,null,r))?1:ve(1)})):function(){var t=e;d(t.sort,t,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"a":e=_[n];break;case"b":t=_[n]}}}return Ae(e,t)?1:ve(1)}))}(),r&&function(){var t=e;d(t.reverse,t)}()}),Ke=function(e){var t,r=null,n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"iterable":e=i[o];break;case"key":r=i[o];break;case"reverse":n=i[o]}}}if(Oe(T(e),he))var l=d(_.copy,null,d((t=e).py_keys,t));else l=d(_.copy,null,e);return d(Ze,null,l,r,n),l},Je=function(e){var t=null,r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"iterable":e=n[a];break;case"key":t=n[a];break;case"reverse":r=n[a]}}}d(Ze,null,e,t,r)},Qe=function(e){var t=Q([].slice.apply(arguments).slice(1));return function(){for(var r=[],_=d(H,null,...t),n=0;n<E(_);n++){var a=je(_,n);d(r.append,r,d(e,null,...a))}return r}()},et=f("__Terminal__",[u],{__module__:n,get __init__(){return l(this,(function(e){e.buffer="";try{e.element=d((t=document).getElementById,t,"__terminal__")}catch(t){e.element=null}var t;e.element&&(e.element.style.overflowX="auto",e.element.style.boxSizing="border-box",e.element.style.padding="5px",e.element.innerHTML="_")}))},get print(){return l(this,(function(e){var t,r,_=" ",n="\n";if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"sep":_=i[o];break;case"end":n=i[o]}}var l=Q([].slice.apply(arguments).slice(1,a+1))}else l=Q();e.buffer=De(d((r="{}{}{}").format,r,e.buffer,d((t=_).join,t,function(){for(var e=[],t=l,r=0;r<E(t);r++){var _=je(t,r);d(e.append,e,d(te,null,_))}return e}()),n),ve(4096),null,1),e.element?(e.element.innerHTML=function(){var t=function(){var t=e.buffer;return d(t.py_replace,t,"\n","<br>")}();return d(t.py_replace,t," ","&nbsp")}(),e.element.scrollTop=e.element.scrollHeight):function(){var e=console;d(e.log,e,function(){var e=_;return d(e.join,e,function(){for(var e=[],t=l,r=0;r<E(t);r++){var _=je(t,r);d(e.append,e,d(te,null,_))}return e}())}())}()}))},get input(){return l(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"question":t=_[n]}}}var a;d((a=e).print,a,d("{}".format,"{}",t),p({end:""}));var i=function(){var t,r=window;return d(r.prompt,r,d("\n".join,"\n",De(d((t=e.buffer).py_split,t,"\n"),ve(8),null,1)))}();return function(){var t=e;d(t.print,t,i)}(),i}))}}),tt=d(et,null);tt.print,tt.input;String.prototype.startswith=function(e,t){var r=void 0===t?0:t;if(!(e instanceof Array))return this.substring(r,r+e.length)===e;for(var _=0;_<e.length;_++)if(this.substring(r,r+e[_].length)===e[_])return!0;return!1},String.prototype.count=function(e){for(var t=0,r=0;t<this.length;++t)e==this[t]&&++r;return r},String.prototype.rjust=function(e,t){return this.length>=e?this:t.repeat(e-this.length)+this},String.prototype.rstrip=function(e){if(void 0===e)return this.replace(/\s*$/g,"");for(var t=this;t.length&&-1!==e.indexOf(t.slice(-1));)t=t.slice(0,-1);return t},se=function(e,t){var r=this[e];if(void 0!==r)return delete this[e],r;if(void 0===t)throw Ge(e,new Error);return t},Oe=function(e,t){return"object"==typeof e&&null!=e&&"__eq__"in e?e.__eq__(t):"object"==typeof t&&null!=t&&"__eq__"in t?t.__eq__(e):e==t}})),i("j49u0",(function(e,r){function _(e,t){let r;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){r=[];for(let n=0,a=t.length;n<a;n++)r[n]=e?_(e,t[n]):t[n];return r}if(t instanceof Object){r={};for(let n in t)t.hasOwnProperty(n)&&(r[n]=e?_(e,t[n]):t[n]);return r}throw new Error("Copy not implemented for type ".concat(Object.prototype.toString.call(t)))}function n(e){return _(!1,e)}t(e.exports,"copy",(()=>n))})),i("2R1eR",(function(e,t){var r=a("4bJEF");function _(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var r,_="",n=0,a=-1,i=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else{if(47===r)break;r=47}if(47===r){if(a===o-1||1===i);else if(a!==o-1&&2===i){if(_.length<2||2!==n||46!==_.charCodeAt(_.length-1)||46!==_.charCodeAt(_.length-2))if(_.length>2){var l=_.lastIndexOf("/");if(l!==_.length-1){-1===l?(_="",n=0):n=(_=_.slice(0,l)).length-1-_.lastIndexOf("/"),a=o,i=0;continue}}else if(2===_.length||1===_.length){_="",n=0,a=o,i=0;continue}t&&(_.length>0?_+="/..":_="..",n=2)}else _.length>0?_+="/"+e.slice(a+1,o):_=e.slice(a+1,o),n=o-a-1;a=o,i=0}else 46===r&&-1!==i?++i:i=-1}return _}var i={resolve:function(){for(var e,t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o;i>=0?o=arguments[i]:(void 0===e&&(e=r.cwd()),o=e),_(o),0!==o.length&&(t=o+"/"+t,a=47===o.charCodeAt(0))}return t=n(t,!a),a?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(_(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return _(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];_(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,t){if(_(e),_(t),e===t)return"";if((e=i.resolve(e))===(t=i.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,a=n-r,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var l=t.length-o,s=a<l?a:l,c=-1,u=0;u<=s;++u){if(u===s){if(l>s){if(47===t.charCodeAt(o+u))return t.slice(o+u+1);if(0===u)return t.slice(o+u)}else a>s&&(47===e.charCodeAt(r+u)?c=u:0===u&&(c=0));break}var f=e.charCodeAt(r+u);if(f!==t.charCodeAt(o+u))break;47===f&&(c=u)}var d="";for(u=r+c+1;u<=n;++u)u!==n&&47!==e.charCodeAt(u)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(o+c):(o+=c,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(_(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){n=i;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');_(e);var r,n=0,a=-1,i=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,l=-1;for(r=e.length-1;r>=0;--r){var s=e.charCodeAt(r);if(47===s){if(!i){n=r+1;break}}else-1===l&&(i=!1,l=r+1),o>=0&&(s===t.charCodeAt(o)?-1==--o&&(a=r):(o=-1,a=l))}return n===a?a=l:-1===a&&(a=e.length),e.slice(n,a)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!i){n=r+1;break}}else-1===a&&(i=!1,a=r+1);return-1===a?"":e.slice(n,a)},extname:function(e){_(e);for(var t=-1,r=0,n=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47!==l)-1===n&&(a=!1,n=o+1),46===l?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){r=o+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,_=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+_:r+e+_:_}("/",e)},parse:function(e){_(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,n=e.charCodeAt(0),a=47===n;a?(t.root="/",r=1):r=0;for(var i=-1,o=0,l=-1,s=!0,c=e.length-1,u=0;c>=r;--c)if(47!==(n=e.charCodeAt(c)))-1===l&&(s=!1,l=c+1),46===n?-1===i?i=c:1!==u&&(u=1):-1!==i&&(u=-1);else if(!s){o=c+1;break}return-1===i||-1===l||0===u||1===u&&i===l-1&&i===o+1?-1!==l&&(t.base=t.name=0===o&&a?e.slice(1,l):e.slice(o,l)):(0===o&&a?(t.name=e.slice(1,i),t.base=e.slice(1,l)):(t.name=e.slice(o,i),t.base=e.slice(o,l)),t.ext=e.slice(i,l)),o>0?t.dir=e.slice(0,o-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i})),i("lMHab",(function(e,t){var r=a("iXQi0"),_=a("1FSpw"),n=a("bzZym"),i=a("hcZ9I").scan,o=n.ValidatorResult,l=n.ValidatorResultError,s=n.SchemaError,c=n.SchemaContext,u=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(d),this.attributes=Object.create(_.validators)};function f(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}u.prototype.customFormats={},u.prototype.schemas=null,u.prototype.types=null,u.prototype.attributes=null,u.prototype.unresolvedRefs=null,u.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var _=i(t||"/",e),n=t||e.$id||e.id;for(var a in _.id)this.schemas[a]=_.id[a];for(var a in _.ref)this.unresolvedRefs.push(a);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[n]},u.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},u.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},u.prototype.setSchemas=function(e){this.schemas=e},u.prototype.getSchema=function(e){return this.schemas[e]},u.prototype.validate=function(e,t,_,n){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new s("Expected `schema` to be an object or boolean");_||(_={});var a,u=t.$id||t.id,f=r.resolve(_.base||"/",u||"");if(!n){(n=new c(t,_,[],f,Object.create(this.schemas))).schemas[f]||(n.schemas[f]=t);var d=i(f,t);for(var p in d.id){var h=d.id[p];n.schemas[p]=h}}if(_.required&&void 0===e)return(a=new o(e,t,_,n)).addError("is required, but is undefined"),a;if(!(a=this.validateSchema(e,t,_,n)))throw new Error("Result undefined");if(_.throwAll&&a.errors.length)throw new l(a);return a},u.prototype.validateSchema=function(e,t,r,a){var i=new o(e,t,r,a);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var l={schema:t,ctx:a};t.extends.forEach(this.schemaTraverser.bind(this,l)),t=l.schema,l.schema=null,l.ctx=null,l=null}else t=n.deepMerge(t,this.superResolve(t.extends,a));var u=f(t);if(u){var d=this.resolve(t,u,a),p=new c(d.subschema,r,a.path,d.switchSchema,a.schemas);return this.validateSchema(e,d.subschema,r,p)}var h=r&&r.skipAttributes||[];for(var g in t)if(!_.ignoreProperties[g]&&h.indexOf(g)<0){var v=null,m=this.attributes[g];if(m)v=m.call(this,e,t,r,a);else if(!1===r.allowUnknownAttributes)throw new s("Unsupported attribute: "+g,t);v&&i.importErrors(v)}if("function"==typeof r.rewrite){var y=r.rewrite.call(this,e,t,r,a);i.instance=y}return i},u.prototype.schemaTraverser=function(e,t){e.schema=n.deepMerge(e.schema,this.superResolve(t,e.ctx))},u.prototype.superResolve=function(e,t){var r=f(e);return r?this.resolve(e,r,t).subschema:e},u.prototype.resolve=function(e,t,_){if(t=_.resolve(t),_.schemas[t])return{subschema:_.schemas[t],switchSchema:t};var a=r.parse(t),i=a&&a.hash,o=i&&i.length&&t.substr(0,t.length-i.length);if(!o||!_.schemas[o])throw new s("no such schema <"+t+">",e);var l=n.objectGetPath(_.schemas[o],i.substr(1));if(void 0===l)throw new s("no such schema "+i+" located in <"+o+">",e);return{subschema:l,switchSchema:t}},u.prototype.testType=function(e,t,r,_,n){if(void 0!==n){if(null===n)throw new s('Unexpected null in "type" keyword');if("function"==typeof this.types[n])return this.types[n].call(this,e);if(n&&"object"==typeof n){var a=this.validateSchema(e,n,r,_);return void 0===a||!(a&&a.errors.length)}return!0}};var d=u.prototype.types={};d.string=function(e){return"string"==typeof e},d.number=function(e){return"number"==typeof e&&isFinite(e)},d.integer=function(e){return"number"==typeof e&&e%1==0},d.boolean=function(e){return"boolean"==typeof e},d.array=function(e){return Array.isArray(e)},d.null=function(e){return null===e},d.date=function(e){return e instanceof Date},d.any=function(e){return!0},d.object=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)},e.exports=u})),i("iXQi0",(function(e,t){var r=a("8QgzN");function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var n=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(l),c=["%","/","?",";","#"].concat(s),u=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=a("b22N0");function m(e,t,r){if(e&&"object"==typeof e&&e instanceof _)return e;var n=new _;return n.parse(e,t,r),n}_.prototype.parse=function(e,t,_){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),i=-1!==a&&a<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var m=e=l.join(i);if(m=m.trim(),!_&&1===e.split("#").length){var y=o.exec(m);if(y)return this.path=m,this.href=m,this.pathname=y[1],y[2]?(this.search=y[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=n.exec(m);if(w){var b=(w=w[0]).toLowerCase();this.protocol=b,m=m.substr(w.length)}if(_||w||m.match(/^\/\/[^@/]+@[^@/]+/)){var k="//"===m.substr(0,2);!k||w&&h[w]||(m=m.substr(2),this.slashes=!0)}if(!h[w]&&(k||w&&!g[w])){for(var x,O,P=-1,E=0;E<u.length;E++){-1!==(C=m.indexOf(u[E]))&&(-1===P||C<P)&&(P=C)}-1!==(O=-1===P?m.lastIndexOf("@"):m.lastIndexOf("@",P))&&(x=m.slice(0,O),m=m.slice(O+1),this.auth=decodeURIComponent(x)),P=-1;for(E=0;E<c.length;E++){var C;-1!==(C=m.indexOf(c[E]))&&(-1===P||C<P)&&(P=C)}-1===P&&(P=m.length),this.host=m.slice(0,P),m=m.slice(P),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var S=this.hostname.split(/\./),N=(E=0,S.length);E<N;E++){var T=S[E];if(T&&!T.match(f)){for(var L="",M=0,j=T.length;M<j;M++)T.charCodeAt(M)>127?L+="x":L+=T[M];if(!L.match(f)){var I=S.slice(0,E),D=S.slice(E+1),R=T.match(d);R&&(I.push(R[1]),D.unshift(R[2])),D.length&&(m="/"+D.join(".")+m),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!p[b])for(E=0,N=s.length;E<N;E++){var B=s[E];if(-1!==m.indexOf(B)){var q=encodeURIComponent(B);q===B&&(q=escape(B)),m=m.split(B).join(q)}}var V=m.indexOf("#");-1!==V&&(this.hash=m.substr(V),m=m.slice(0,V));var G=m.indexOf("?");if(-1!==G?(this.search=m.substr(G),this.query=m.substr(G+1),t&&(this.query=v.parse(this.query)),m=m.slice(0,G)):t&&(this.search="",this.query={}),m&&(this.pathname=m),g[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var U=this.search||"";this.path=F+U}return this.href=this.format(),this},_.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",_=this.hash||"",n=!1,a="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),_&&"#"!==_.charAt(0)&&(_="#"+_),i&&"?"!==i.charAt(0)&&(i="?"+i),t+n+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(i=i.replace("#","%23"))+_},_.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},_.prototype.resolveObject=function(e){if("string"==typeof e){var t=new _;t.parse(e,!1,!0),e=t}for(var r=new _,n=Object.keys(this),a=0;a<n.length;a++){var i=n[a];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),l=0;l<o.length;l++){var s=o[l];"protocol"!==s&&(r[s]=e[s])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!g[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var f=c[u];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||h[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",v=r.search||"";r.path=p+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=y||m||r.host&&e.pathname,b=w,k=r.pathname&&r.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),w=w&&(""===d[0]||""===k[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),r.search=e.search,r.query=e.query;else if(null!=e.search){if(x)r.host=k.shift(),r.hostname=r.host,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname);return r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=k.slice(-1)[0],P=(r.host||e.host||k.length>1)&&("."===O||".."===O)||""===O,E=0,C=k.length;C>=0;C--)"."===(O=k[C])?k.splice(C,1):".."===O?(k.splice(C,1),E++):E&&(k.splice(C,1),E--);if(!w&&!b)for(;E--;E)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),P&&"/"!==k.join("/").substr(-1)&&k.push("");var A,S=""===k[0]||k[0]&&"/"===k[0].charAt(0);x&&(r.hostname=S?"":k.length?k.shift():"",r.host=r.hostname,(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.hostname=A.shift(),r.host=r.hostname));return(w=w||r.host&&k.length)&&!S&&k.unshift(""),k.length>0?r.pathname=k.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},_.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.parse=m,t.resolve=function(e,t){return m(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},t.format=function(e){return"string"==typeof e&&(e=m(e)),e instanceof _?e.format():_.prototype.format.call(e)},t.Url=_})),i("8QgzN",(function(t,r){!function(_){var n=r&&!r.nodeType&&r,a=t&&!t.nodeType&&t,i="object"==typeof e&&e;i.global!==i&&i.window!==i&&i.self!==i||(_=i);var o,l,s=2147483647,c=36,u=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function m(e,t){for(var r=e.length,_=[];r--;)_[r]=t(e[r]);return _}function y(e,t){var r=e.split("@"),_="";return r.length>1&&(_=r[0]+"@",e=r[1]),_+m((e=e.replace(d,".")).split("."),t).join(".")}function w(e){for(var t,r,_=[],n=0,a=e.length;n<a;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a?56320==(64512&(r=e.charCodeAt(n++)))?_.push(((1023&t)<<10)+(1023&r)+65536):(_.push(t),n--):_.push(t);return _}function b(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var _=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;_+=c)e=h(e/35);return h(_+36*e/(e+38))}function O(e){var t,r,_,n,a,i,o,l,u,f,d,p=[],g=e.length,m=0,y=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),_=0;_<r;++_)e.charCodeAt(_)>=128&&v("not-basic"),p.push(e.charCodeAt(_));for(n=r>0?r+1:0;n<g;){for(a=m,i=1,o=c;n>=g&&v("invalid-input"),((l=(d=e.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:c)>=c||l>h((s-m)/i))&&v("overflow"),m+=l*i,!(l<(u=o<=w?1:o>=w+26?26:o-w));o+=c)i>h(s/(f=c-u))&&v("overflow"),i*=f;w=x(m-a,t=p.length+1,0==a),h(m/t)>s-y&&v("overflow"),y+=h(m/t),m%=t,p.splice(m++,0,y)}return b(p)}function P(e){var t,r,_,n,a,i,o,l,u,f,d,p,m,y,b,O=[];for(p=(e=w(e)).length,t=128,r=0,a=72,i=0;i<p;++i)(d=e[i])<128&&O.push(g(d));for(_=n=O.length,n&&O.push("-");_<p;){for(o=s,i=0;i<p;++i)(d=e[i])>=t&&d<o&&(o=d);for(o-t>h((s-r)/(m=_+1))&&v("overflow"),r+=(o-t)*m,t=o,i=0;i<p;++i)if((d=e[i])<t&&++r>s&&v("overflow"),d==t){for(l=r,u=c;!(l<(f=u<=a?1:u>=a+26?26:u-a));u+=c)b=l-f,y=c-f,O.push(g(k(f+b%y,0))),l=h(b/y);O.push(g(k(l,0))),a=x(r,m,_==n),r=0,++_}++r,++t}return O.join("")}if(o={version:"1.4.1",ucs2:{decode:w,encode:b},decode:O,encode:P,toASCII:function(e){return y(e,(function(e){return f.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return y(e,(function(e){return u.test(e)?O(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return o}));else if(n&&a)if(t.exports==n)a.exports=o;else for(l in o)o.hasOwnProperty(l)&&(n[l]=o[l]);else _.punycode=o}(this)})),i("b22N0",(function(e,t){var r=a("3cLhU"),_=a("kxU7n"),n=a("2AcSp");e.exports={formats:n,parse:_,stringify:r}})),i("3cLhU",(function(e,t){var r=a("6INNj"),_=a("4ovd2"),n=a("2AcSp"),i=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,s=Array.prototype.push,c=function(e,t){s.apply(e,l(t)?t:[t])},u=Date.prototype.toISOString,f=n.default,d={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_.encode,encodeValuesOnly:!1,filter:void 0,format:f,formatter:n.formatters[f],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},p={},h=function e(t,n,a,i,o,s,u,f,h,g,v,m,y,w,b,k,x,O){for(var P,E=t,C=O,A=0,S=!1;void 0!==(C=C.get(p))&&!S;){var N=C.get(t);if(A+=1,void 0!==N){if(N===A)throw new RangeError("Cyclic object value");S=!0}void 0===C.get(p)&&(A=0)}if("function"==typeof g?E=g(n,E):E instanceof Date?E=y(E):"comma"===a&&l(E)&&(E=_.maybeMap(E,(function(e){return e instanceof Date?y(e):e}))),null===E){if(s)return h&&!k?h(n,d.encoder,x,"key",w):n;E=""}if("string"==typeof(P=E)||"number"==typeof P||"boolean"==typeof P||"symbol"==typeof P||"bigint"==typeof P||_.isBuffer(E))return h?[b(k?n:h(n,d.encoder,x,"key",w))+"="+b(h(E,d.encoder,x,"value",w))]:[b(n)+"="+b(String(E))];var T,L=[];if(void 0===E)return L;if("comma"===a&&l(E))k&&h&&(E=_.maybeMap(E,h)),T=[{value:E.length>0?E.join(",")||null:void 0}];else if(l(g))T=g;else{var M=Object.keys(E);T=v?M.sort(v):M}var j=f?String(n).replace(/\./g,"%2E"):String(n),I=i&&l(E)&&1===E.length?j+"[]":j;if(o&&l(E)&&0===E.length)return I+"[]";for(var D=0;D<T.length;++D){var R=T[D],F="object"==typeof R&&R&&void 0!==R.value?R.value:E[R];if(!u||null!==F){var z=m&&f?String(R).replace(/\./g,"%2E"):String(R),B=l(E)?"function"==typeof a?a(I,z):I:I+(m?"."+z:"["+z+"]");O.set(t,A);var q=r();q.set(p,O),c(L,e(F,B,a,i,o,s,u,f,"comma"===a&&k&&l(E)?null:h,g,v,m,y,w,b,k,x,q))}}return L};e.exports=function(e,t){var _,a=e,s=function(e){if(!e)return d;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=n.default;if(void 0!==e.format){if(!i.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var _,a=n.formatters[r],s=d.filter;if(("function"==typeof e.filter||l(e.filter))&&(s=e.filter),_=e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":d.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=void 0===e.allowDots?!0===e.encodeDotInKeys||d.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:d.allowEmptyArrays,arrayFormat:_,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:d.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:s,format:r,formatter:a,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof s.filter?a=(0,s.filter)("",a):l(s.filter)&&(_=s.filter);var u=[];if("object"!=typeof a||null===a)return"";var f=o[s.arrayFormat],p="comma"===f&&s.commaRoundTrip;_||(_=Object.keys(a)),s.sort&&_.sort(s.sort);for(var g=r(),v=0;v<_.length;++v){var m=_[v],y=a[m];s.skipNulls&&null===y||c(u,h(y,m,f,p,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,g))}var w=u.join(s.delimiter),b=!0===s.addQueryPrefix?"?":"";return s.charsetSentinel&&("iso-8859-1"===s.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),w.length>0?b+w:""}})),i("6INNj",(function(e,t){var r=a("gxVBT"),_=a("5Wvo6"),n=a("bsTf1"),i=a("cfvit"),o=a("5hTFZ")||i||n;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new r("Side channel does not contain "+_(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=o()),e.set(t,r)}};return t}})),i("gxVBT",(function(e,t){e.exports=TypeError})),i("5Wvo6",(function(t,r){var _="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=_&&n&&"function"==typeof n.get?n.get:null,o=_&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=l&&s&&"function"==typeof s.get?s.get:null,u=l&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,g=Object.prototype.toString,v=Function.prototype.toString,m=String.prototype.match,y=String.prototype.slice,w=String.prototype.replace,b=String.prototype.toUpperCase,k=String.prototype.toLowerCase,x=RegExp.prototype.test,O=Array.prototype.concat,P=Array.prototype.join,E=Array.prototype.slice,C=Math.floor,A="function"==typeof BigInt?BigInt.prototype.valueOf:null,S=Object.getOwnPropertySymbols,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,T="function"==typeof Symbol&&"object"==typeof Symbol.iterator,L="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===T||"symbol")?Symbol.toStringTag:null,M=Object.prototype.propertyIsEnumerable,j=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function I(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||x.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var _=e<0?-C(-e):C(e);if(_!==e){var n=String(_),a=y.call(t,n.length+1);return w.call(n,r,"$&_")+"."+w.call(w.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(t,r,"$&_")}var D=a("9wa3L"),R=D.custom,F=$(R)?R:null,z={__proto__:null,double:'"',single:"'"},B={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function q(e,t,r){var _=r.quoteStyle||t,n=z[_];return n+e+n}function V(e){return w.call(String(e),/"/g,"&quot;")}function G(e){return!("[object Array]"!==Y(e)||L&&"object"==typeof e&&L in e)}function U(e){return!("[object RegExp]"!==Y(e)||L&&"object"==typeof e&&L in e)}function $(e){if(T)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!N)return!1;try{return N.call(e),!0}catch(e){}return!1}t.exports=function t(r,_,n,a){var l=_||{};if(H(l,"quoteStyle")&&!H(z,l.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(H(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!H(l,"customInspect")||l.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(H(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(H(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var g=l.numericSeparator;if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return Z(r,l);if("number"==typeof r){if(0===r)return 1/0/r>0?"0":"-0";var b=String(r);return g?I(r,b):b}if("bigint"==typeof r){var x=String(r)+"n";return g?I(r,x):x}var C=void 0===l.depth?5:l.depth;if(void 0===n&&(n=0),n>=C&&C>0&&"object"==typeof r)return G(r)?"[Array]":"[Object]";var S,R=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=P.call(Array(e.indent+1)," ")}return{base:r,prev:P.call(Array(t+1),r)}}(l,n);if(void 0===a)a=[];else if(X(a,r)>=0)return"[Circular]";function B(e,r,_){if(r&&(a=E.call(a)).push(r),_){var i={depth:l.depth};return H(l,"quoteStyle")&&(i.quoteStyle=l.quoteStyle),t(e,i,n+1,a)}return t(e,l,n+1,a)}if("function"==typeof r&&!U(r)){var W=function(e){if(e.name)return e.name;var t=m.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(r),K=re(r,B);return"[Function"+(W?": "+W:" (anonymous)")+"]"+(K.length>0?" { "+P.call(K,", ")+" }":"")}if($(r)){var _e=T?w.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):N.call(r);return"object"!=typeof r||T?_e:J(_e)}if((S=r)&&"object"==typeof S&&("undefined"!=typeof HTMLElement&&S instanceof HTMLElement||"string"==typeof S.nodeName&&"function"==typeof S.getAttribute)){for(var ne="<"+k.call(String(r.nodeName)),ae=r.attributes||[],ie=0;ie<ae.length;ie++)ne+=" "+ae[ie].name+"="+q(V(ae[ie].value),"double",l);return ne+=">",r.childNodes&&r.childNodes.length&&(ne+="..."),ne+="</"+k.call(String(r.nodeName))+">"}if(G(r)){if(0===r.length)return"[]";var oe=re(r,B);return R&&!function(e){for(var t=0;t<e.length;t++)if(X(e[t],"\n")>=0)return!1;return!0}(oe)?"["+te(oe,R)+"]":"[ "+P.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==Y(e)||L&&"object"==typeof e&&L in e)}(r)){var le=re(r,B);return"cause"in Error.prototype||!("cause"in r)||M.call(r,"cause")?0===le.length?"["+String(r)+"]":"{ ["+String(r)+"] "+P.call(le,", ")+" }":"{ ["+String(r)+"] "+P.call(O.call("[cause]: "+B(r.cause),le),", ")+" }"}if("object"==typeof r&&s){if(F&&"function"==typeof r[F]&&D)return D(r,{depth:C-n});if("symbol"!==s&&"function"==typeof r.inspect)return r.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(r)){var se=[];return o&&o.call(r,(function(e,t){se.push(B(t,r,!0)+" => "+B(e,r))})),ee("Map",i.call(r),se,R)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(r)){var ce=[];return u&&u.call(r,(function(e){ce.push(B(e,r))})),ee("Set",c.call(r),ce,R)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(r))return Q("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(r))return Q("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(r))return Q("WeakRef");if(function(e){return!("[object Number]"!==Y(e)||L&&"object"==typeof e&&L in e)}(r))return J(B(Number(r)));if(function(e){if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch(e){}return!1}(r))return J(B(A.call(r)));if(function(e){return!("[object Boolean]"!==Y(e)||L&&"object"==typeof e&&L in e)}(r))return J(h.call(r));if(function(e){return!("[object String]"!==Y(e)||L&&"object"==typeof e&&L in e)}(r))return J(B(String(r)));if("undefined"!=typeof window&&r===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&r===globalThis||void 0!==e&&r===e)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==Y(e)||L&&"object"==typeof e&&L in e)}(r)&&!U(r)){var ue=re(r,B),fe=j?j(r)===Object.prototype:r instanceof Object||r.constructor===Object,de=r instanceof Object?"":"null prototype",pe=!fe&&L&&Object(r)===r&&L in r?y.call(Y(r),8,-1):de?"Object":"",he=(fe||"function"!=typeof r.constructor?"":r.constructor.name?r.constructor.name+" ":"")+(pe||de?"["+P.call(O.call([],pe||[],de||[]),": ")+"] ":"");return 0===ue.length?he+"{}":R?he+"{"+te(ue,R)+"}":he+"{ "+P.call(ue,", ")+" }"}return String(r)};var W=Object.prototype.hasOwnProperty||function(e){return e in this};function H(e,t){return W.call(e,t)}function Y(e){return g.call(e)}function X(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,_=e.length;r<_;r++)if(e[r]===t)return r;return-1}function Z(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,_="... "+r+" more character"+(r>1?"s":"");return Z(y.call(e,0,t.maxStringLength),t)+_}var n=B[t.quoteStyle||"single"];return n.lastIndex=0,q(w.call(w.call(e,n,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function J(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function ee(e,t,r,_){return e+" ("+t+") {"+(_?te(r,_):P.call(r,", "))+"}"}function te(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+P.call(e,","+r)+"\n"+t.prev}function re(e,t){var r=G(e),_=[];if(r){_.length=e.length;for(var n=0;n<e.length;n++)_[n]=H(e,n)?t(e[n],e):""}var a,i="function"==typeof S?S(e):[];if(T){a={};for(var o=0;o<i.length;o++)a["$"+i[o]]=i[o]}for(var l in e)H(e,l)&&(r&&String(Number(l))===l&&l<e.length||T&&a["$"+l]instanceof Symbol||(x.call(/[^\w$]/,l)?_.push(t(l,e)+": "+t(e[l],e)):_.push(l+": "+t(e[l],e))));if("function"==typeof S)for(var s=0;s<i.length;s++)M.call(e,i[s])&&_.push("["+t(i[s])+"]: "+t(e[i[s]],e));return _}})),i("9wa3L",(function(e,t){})),i("bsTf1",(function(e,t){var r=a("5Wvo6"),_=a("gxVBT"),n=function(e,t,r){for(var _,n=e;null!=(_=n.next);n=_)if(_.key===t)return n.next=_.next,r||(_.next=e.next,e.next=_),_};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new _("Side channel does not contain "+r(e))},delete:function(t){var r=e&&e.next,_=function(e,t){if(e)return n(e,t,!0)}(e,t);return _&&r&&r===_&&(e=void 0),!!_},get:function(t){return function(e,t){if(e){var r=n(e,t);return r&&r.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!n(e,t)}(e,t)},set:function(t,r){e||(e={next:void 0}),function(e,t,r){var _=n(e,t);_?_.value=r:e.next={key:t,next:e.next,value:r}}(e,t,r)}};return t}})),i("cfvit",(function(e,t){var r=a("1GFyc"),_=a("b6GwZ"),n=a("5Wvo6"),i=a("gxVBT"),o=r("%Map%",!0),l=_("Map.prototype.get",!0),s=_("Map.prototype.set",!0),c=_("Map.prototype.has",!0),u=_("Map.prototype.delete",!0),f=_("Map.prototype.size",!0);e.exports=!!o&&function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+n(e))},delete:function(t){if(e){var r=u(e,t);return 0===f(e)&&(e=void 0),r}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&c(e,t)},set:function(t,r){e||(e=new o),s(e,t,r)}};return t}})),i("1GFyc",(function(e,t){var r=a("j4VYl"),_=a("boiKR"),n=a("eYX1V"),i=a("eXXqq"),o=a("bAv8V"),l=a("c9Bks"),s=a("gxVBT"),c=a("bvmhk"),u=a("jBJDK"),f=a("32JIt"),d=a("loBbq"),p=a("5FrKq"),h=a("lVmB9"),g=Function,v=function(e){try{return g('"use strict"; return ('+e+").constructor;")()}catch(e){}},m=a("fd0O5"),y=a("3hXiA"),w=function(){throw new s},b=m?function(){try{return w}catch(e){try{return m(arguments,"callee").get}catch(e){return w}}}():w,k=a("87X5j")(),x=a("3Zf2S"),O="function"==typeof Reflect&&Reflect.getPrototypeOf||r.getPrototypeOf||x,P=a("juxzH"),E=a("iz78u"),C={},A="undefined"!=typeof Uint8Array&&O?O(Uint8Array):void 0,S={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":k&&O?O([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":C,"%AsyncGenerator%":C,"%AsyncGeneratorFunction%":C,"%AsyncIteratorPrototype%":C,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_,"%eval%":eval,"%EvalError%":n,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":g,"%GeneratorFunction%":C,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&O?O(O([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&k&&O?O((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":m,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&k&&O?O((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&O?O(""[Symbol.iterator]()):void 0,"%Symbol%":k?Symbol:void 0,"%SyntaxError%":l,"%ThrowTypeError%":b,"%TypedArray%":A,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":E,"%Function.prototype.apply%":P,"%Object.defineProperty%":y,"%Math.abs%":u,"%Math.floor%":f,"%Math.max%":d,"%Math.min%":p,"%Math.pow%":h};if(O)try{null.error}catch(e){var N=O(O(e));S["%Error.prototype%"]=N}var T=function e(t){var r;if("%AsyncFunction%"===t)r=v("async function () {}");else if("%GeneratorFunction%"===t)r=v("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=v("async function* () {}");else if("%AsyncGenerator%"===t){var _=e("%AsyncGeneratorFunction%");_&&(r=_.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&O&&(r=O(n.prototype))}return S[t]=r,r},L={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=a("42afd"),j=a("jLlR8"),I=M.call(E,Array.prototype.concat),D=M.call(P,Array.prototype.splice),R=M.call(E,String.prototype.replace),F=M.call(E,String.prototype.slice),z=M.call(E,RegExp.prototype.exec),B=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,V=function(e,t){var r,_=e;if(j(L,_)&&(_="%"+(r=L[_])[0]+"%"),j(S,_)){var n=S[_];if(n===C&&(n=T(_)),void 0===n&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:_,value:n}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===z(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=F(e,0,1),r=F(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var _=[];return R(e,B,(function(e,t,r,n){_[_.length]=r?R(n,q,"$1"):t||e})),_}(e),_=r.length>0?r[0]:"",n=V("%"+_+"%",t),a=n.name,i=n.value,o=!1,c=n.alias;c&&(_=c[0],D(r,I([0,1],c)));for(var u=1,f=!0;u<r.length;u+=1){var d=r[u],p=F(d,0,1),h=F(d,-1);if(('"'===p||"'"===p||"`"===p||'"'===h||"'"===h||"`"===h)&&p!==h)throw new l("property names with quotes must have matching quotes");if("constructor"!==d&&f||(o=!0),j(S,a="%"+(_+="."+d)+"%"))i=S[a];else if(null!=i){if(!(d in i)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(m&&u+1>=r.length){var g=m(i,d);i=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:i[d]}else f=j(i,d),i=i[d];f&&!o&&(S[a]=i)}}return i}})),i("j4VYl",(function(e,t){e.exports=Object})),i("boiKR",(function(e,t){e.exports=Error})),i("eYX1V",(function(e,t){e.exports=EvalError})),i("eXXqq",(function(e,t){e.exports=RangeError})),i("bAv8V",(function(e,t){e.exports=ReferenceError})),i("c9Bks",(function(e,t){e.exports=SyntaxError})),i("bvmhk",(function(e,t){e.exports=URIError})),i("jBJDK",(function(e,t){e.exports=Math.abs})),i("32JIt",(function(e,t){e.exports=Math.floor})),i("loBbq",(function(e,t){e.exports=Math.max})),i("5FrKq",(function(e,t){e.exports=Math.min})),i("lVmB9",(function(e,t){e.exports=Math.pow})),i("fd0O5",(function(e,t){var r=a("hfKS7");if(r)try{r([],"length")}catch(e){r=null}e.exports=r})),i("hfKS7",(function(e,t){e.exports=Object.getOwnPropertyDescriptor})),i("3hXiA",(function(e,t){var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch(e){r=!1}e.exports=r})),i("87X5j",(function(e,t){var r="undefined"!=typeof Symbol&&Symbol,_=a("j9k2R");e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&_())))}})),i("j9k2R",(function(e,t){e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var _ in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}})),i("3Zf2S",(function(e,t){var r=a("3xylx"),_=a("fd0O5"),n=[].__proto__===Array.prototype&&_&&_(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;e.exports=n&&"function"==typeof n.get?r([n.get]):"function"==typeof o&&function(e){return o(null==e?e:i(e))}})),i("3xylx",(function(e,t){var r=a("42afd"),_=a("gxVBT"),n=a("iz78u"),i=a("38Jb7");e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new _("a function is required");return i(r,n,e)}})),i("42afd",(function(e,t){var r=a("fRh0r");e.exports=Function.prototype.bind||r})),i("fRh0r",(function(e,t){var r=Object.prototype.toString,_=Math.max,n=function(e,t){for(var r=[],_=0;_<e.length;_+=1)r[_]=e[_];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r};e.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==r.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a,i=function(e,t){for(var r=[],_=t||0,n=0;_<e.length;_+=1,n+=1)r[n]=e[_];return r}(arguments,1),o=_(0,t.length-i.length),l=[],s=0;s<o;s++)l[s]="$"+s;if(a=Function("binder","return function ("+function(e,t){for(var r="",_=0;_<e.length;_+=1)r+=e[_],_+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var r=t.apply(this,n(i,arguments));return Object(r)===r?r:this}return t.apply(e,n(i,arguments))})),t.prototype){var c=function(){};c.prototype=t.prototype,a.prototype=new c,c.prototype=null}return a}})),i("iz78u",(function(e,t){e.exports=Function.prototype.call})),i("38Jb7",(function(e,t){var r=a("42afd"),_=a("juxzH"),n=a("iz78u"),i=a("bD6Br");e.exports=i||r.call(n,_)})),i("juxzH",(function(e,t){e.exports=Function.prototype.apply})),i("bD6Br",(function(e,t){e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply})),i("jLlR8",(function(e,t){var r=Function.prototype.call,_=Object.prototype.hasOwnProperty,n=a("42afd");e.exports=n.call(r,_)})),i("b6GwZ",(function(e,t){var r=a("1GFyc"),_=a("lJ4PN"),n=_(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&n(e,".prototype.")>-1?_(a):a}})),i("lJ4PN",(function(e,t){var r=a("2pCE9"),_=a("3hXiA"),n=a("3xylx"),i=a("chw8T");e.exports=function(e){var t=n(arguments),_=e.length-(arguments.length-1);return r(t,1+(_>0?_:0),!0)},_?_(e.exports,"apply",{value:i}):e.exports.apply=i})),i("2pCE9",(function(e,t){var r=a("1GFyc"),_=a("dJ3xt"),n=a("ivLm9")(),i=a("fd0O5"),o=a("gxVBT"),l=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new o("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new o("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],a=!0,s=!0;if("length"in e&&i){var c=i(e,"length");c&&!c.configurable&&(a=!1),c&&!c.writable&&(s=!1)}return(a||s||!r)&&(n?_(e,"length",t,!0,!0):_(e,"length",t)),e}})),i("dJ3xt",(function(e,t){var r=a("3hXiA"),_=a("c9Bks"),n=a("gxVBT"),i=a("fd0O5");e.exports=function(e,t,a){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new n("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new n("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],u=!!i&&i(e,t);if(r)r(e,t,{configurable:null===s&&u?u.configurable:!s,enumerable:null===o&&u?u.enumerable:!o,value:a,writable:null===l&&u?u.writable:!l});else{if(!c&&(o||l||s))throw new _("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=a}}})),i("ivLm9",(function(e,t){var r=a("3hXiA"),_=function(){return!!r};_.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=_})),i("chw8T",(function(e,t){var r=a("42afd"),_=a("juxzH"),n=a("38Jb7");e.exports=function(){return n(r,_,arguments)}})),i("5hTFZ",(function(e,t){var r=a("1GFyc"),_=a("ig0zj"),n=a("5Wvo6"),i=a("cfvit"),o=a("gxVBT"),l=r("%WeakMap%",!0),s=_("WeakMap.prototype.get",!0),c=_("WeakMap.prototype.set",!0),u=_("WeakMap.prototype.has",!0),f=_("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new o("Side channel does not contain "+n(e))},delete:function(r){if(l&&r&&("object"==typeof r||"function"==typeof r)){if(e)return f(e,r)}else if(i&&t)return t.delete(r);return!1},get:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?s(e,r):t&&t.get(r)},has:function(r){return l&&r&&("object"==typeof r||"function"==typeof r)&&e?u(e,r):!!t&&t.has(r)},set:function(r,_){l&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new l),c(e,r,_)):i&&(t||(t=i()),t.set(r,_))}};return r}:i})),i("ig0zj",(function(e,t){var r=a("1GFyc"),_=a("lJ4PN"),n=_(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&n(e,".prototype.")>-1?_(a):a}})),i("4ovd2",(function(e,t){var r=a("2AcSp"),_=Object.prototype.hasOwnProperty,n=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},_=0;_<e.length;++_)void 0!==e[_]&&(r[_]=e[_]);return r},l=1024;e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],_=0;_<t.length;++_)for(var a=t[_],i=a.obj[a.prop],o=Object.keys(i),l=0;l<o.length;++l){var s=o[l],c=i[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:i,prop:s}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(n(r)){for(var _=[],a=0;a<r.length;++a)void 0!==r[a]&&_.push(r[a]);t.obj[t.prop]=_}}}(t),e},decode:function(e,t,r){var _=e.replace(/\+/g," ");if("iso-8859-1"===r)return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch(e){return _}},encode:function(e,t,_,n,a){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===_)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var s="",c=0;c<o.length;c+=l){for(var u=o.length>=l?o.slice(c,c+l):o,f=[],d=0;d<u.length;++d){var p=u.charCodeAt(d);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||a===r.RFC1738&&(40===p||41===p)?f[f.length]=u.charAt(d):p<128?f[f.length]=i[p]:p<2048?f[f.length]=i[192|p>>6]+i[128|63&p]:p<55296||p>=57344?f[f.length]=i[224|p>>12]+i[128|p>>6&63]+i[128|63&p]:(d+=1,p=65536+((1023&p)<<10|1023&u.charCodeAt(d)),f[f.length]=i[240|p>>18]+i[128|p>>12&63]+i[128|p>>6&63]+i[128|63&p])}s+=f.join("")}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(n(e)){for(var r=[],_=0;_<e.length;_+=1)r.push(t(e[_]));return r}return t(e)},merge:function e(t,r,a){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(n(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!_.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return n(t)&&!n(r)&&(i=o(t,a)),n(t)&&n(r)?(r.forEach((function(r,n){if(_.call(t,n)){var i=t[n];i&&"object"==typeof i&&r&&"object"==typeof r?t[n]=e(i,r,a):t.push(r)}else t[n]=r})),t):Object.keys(r).reduce((function(t,n){var i=r[n];return _.call(t,n)?t[n]=e(t[n],i,a):t[n]=i,t}),i)}}})),i("2AcSp",(function(e,t){var r=String.prototype.replace,_=/%20/g,n="RFC1738",a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return r.call(e,_,"+")},RFC3986:function(e){return String(e)}},RFC1738:n,RFC3986:a}})),i("kxU7n",(function(e,t){var r=a("4ovd2"),_=Object.prototype.hasOwnProperty,n=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:r.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},s=function(e,t,r,n){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=r.depth>0&&/(\[[^[\]]*])/.exec(a),s=o?a.slice(0,o.index):a,c=[];if(s){if(!r.plainObjects&&_.call(Object.prototype,s)&&!r.allowPrototypes)return;c.push(s)}for(var u=0;r.depth>0&&null!==(o=i.exec(a))&&u<r.depth;){if(u+=1,!r.plainObjects&&_.call(Object.prototype,o[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(o[1])}if(o){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");c.push("["+a.slice(o.index)+"]")}return function(e,t,r,_){for(var n=_?t:l(t,r),a=e.length-1;a>=0;--a){var i,o=e[a];if("[]"===o&&r.parseArrays)i=r.allowEmptyArrays&&(""===n||r.strictNullHandling&&null===n)?[]:[].concat(n);else{i=r.plainObjects?{__proto__:null}:{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=r.decodeDotInKeys?s.replace(/%2E/g,"."):s,u=parseInt(c,10);r.parseArrays||""!==c?!isNaN(u)&&o!==c&&String(u)===c&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(i=[])[u]=n:"__proto__"!==c&&(i[c]=n):i={0:n}}n=i}return n}(c,t,r,n)}};e.exports=function(e,t){var a=function(e){if(!e)return i;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset,_=void 0===e.duplicates?i.duplicates:e.duplicates;if("combine"!==_&&"first"!==_&&"last"!==_)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||i.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:i.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,duplicates:_,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:i.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return a.plainObjects?{__proto__:null}:{};for(var c="string"==typeof e?function(e,t){var a={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c,u=t.parameterLimit===1/0?void 0:t.parameterLimit,f=s.split(t.delimiter,u),d=-1,p=t.charset;if(t.charsetSentinel)for(c=0;c<f.length;++c)0===f[c].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[c]?p="utf-8":"utf8=%26%2310003%3B"===f[c]&&(p="iso-8859-1"),d=c,c=f.length);for(c=0;c<f.length;++c)if(c!==d){var h,g,v=f[c],m=v.indexOf("]="),y=-1===m?v.indexOf("="):m+1;-1===y?(h=t.decoder(v,i.decoder,p,"key"),g=t.strictNullHandling?null:""):(h=t.decoder(v.slice(0,y),i.decoder,p,"key"),g=r.maybeMap(l(v.slice(y+1),t),(function(e){return t.decoder(e,i.decoder,p,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===p&&(g=o(String(g))),v.indexOf("[]=")>-1&&(g=n(g)?[g]:g);var w=_.call(a,h);w&&"combine"===t.duplicates?a[h]=r.combine(a[h],g):w&&"last"!==t.duplicates||(a[h]=g)}return a}(e,a):e,u=a.plainObjects?{__proto__:null}:{},f=Object.keys(c),d=0;d<f.length;++d){var p=f[d],h=s(p,c[p],a,"string"==typeof e);u=r.merge(u,h,a)}return!0===a.allowSparse?u:r.compact(u)}})),i("1FSpw",(function(e,t){var r=a("bzZym"),_=r.ValidatorResult,n=r.SchemaError,i={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},o=i.validators={};function l(e,t,r,_,n){var a=t.throwError,i=t.throwAll;t.throwError=!1,t.throwAll=!1;var o=this.validateSchema(e,n,t,r);return t.throwError=a,t.throwAll=i,!o.valid&&_ instanceof Function&&_(o),o.valid}function s(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function c(e,t,r,_,n,a){if(this.types.object(e)&&(!t.properties||void 0===t.properties[n]))if(!1===t.additionalProperties)a.addError({name:"additionalProperties",argument:n,message:"is not allowed to have the additional property "+JSON.stringify(n)});else{var i=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,n,i,r,_);var o=this.validateSchema(e[n],i,r,_.makeChild(i,n));o.instance!==a.instance[n]&&(a.instance[n]=o.instance),a.importErrors(o)}}o.type=function(e,t,r,n){if(void 0===e)return null;var a=new _(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var o=i.map((function(e){if(e){var t=e.$id||e.id;return t?"<"+t+">":e+""}}));a.addError({name:"type",argument:o,message:"is not of a type(s) "+o})}return a},o.anyOf=function(e,t,r,a){if(void 0===e)return null;var i=new _(e,t,r,a),o=new _(e,t,r,a);if(!Array.isArray(t.anyOf))throw new n("anyOf must be an array");if(!t.anyOf.some(l.bind(this,e,r,a,(function(e){o.importErrors(e)})))){var s=t.anyOf.map((function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&i.importErrors(o),i.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return i},o.allOf=function(e,t,r,a){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new n("allOf must be an array");var i=new _(e,t,r,a),o=this;return t.allOf.forEach((function(t,_){var n=o.validateSchema(e,t,r,a);if(!n.valid){var l=t.$id||t.id||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+_+"]";i.addError({name:"allOf",argument:{id:l,length:n.errors.length,valid:n},message:"does not match allOf schema "+l+" with "+n.errors.length+" error[s]:"}),i.importErrors(n)}})),i},o.oneOf=function(e,t,r,a){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new n("oneOf must be an array");var i=new _(e,t,r,a),o=new _(e,t,r,a),s=t.oneOf.filter(l.bind(this,e,r,a,(function(e){o.importErrors(e)}))).length,c=t.oneOf.map((function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==s&&(r.nestedErrors&&i.importErrors(o),i.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")})),i},o.if=function(e,t,n,a){if(void 0===e)return null;if(!r.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var i,o=l.call(this,e,n,a,null,t.if),s=new _(e,t,n,a);if(o){if(void 0===t.then)return;if(!r.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');i=this.validateSchema(e,t.then,n,a.makeChild(t.then)),s.importErrors(i)}else{if(void 0===t.else)return;if(!r.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');i=this.validateSchema(e,t.else,n,a.makeChild(t.else)),s.importErrors(i)}return s},o.propertyNames=function(e,t,a,i){if(this.types.object(e)){var o=new _(e,t,a,i),l=void 0!==t.propertyNames?t.propertyNames:{};if(!r.isSchema(l))throw new n('Expected "propertyNames" to be a schema (object or boolean)');for(var c in e)if(void 0!==s(e,c)){var u=this.validateSchema(c,l,a,i.makeChild(l));o.importErrors(u)}return o}},o.properties=function(e,t,r,a){if(this.types.object(e)){var i=new _(e,t,r,a),o=t.properties||{};for(var l in o){var c=o[l];if(void 0!==c){if(null===c)throw new n('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,l,c,r,a);var u=s(e,l),f=this.validateSchema(u,c,r,a.makeChild(c,l));f.instance!==i.instance[l]&&(i.instance[l]=f.instance),i.importErrors(f)}}return i}},o.patternProperties=function(e,t,r,a){if(this.types.object(e)){var i=new _(e,t,r,a),o=t.patternProperties||{};for(var l in e){var s=!0;for(var u in o){var f=o[u];if(void 0!==f){if(null===f)throw new n('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(u,"u")}catch(e){d=new RegExp(u)}if(d.test(l)){s=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,l,f,r,a);var p=this.validateSchema(e[l],f,r,a.makeChild(f,l));p.instance!==i.instance[l]&&(i.instance[l]=p.instance),i.importErrors(p)}}}s&&c.call(this,e,t,r,a,l,i)}return i}},o.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var a=new _(e,t,r,n);for(var i in e)c.call(this,e,t,r,n,i,a);return a}},o.minProperties=function(e,t,r,n){if(this.types.object(e)){var a=new _(e,t,r,n);return Object.keys(e).length>=t.minProperties||a.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),a}},o.maxProperties=function(e,t,r,n){if(this.types.object(e)){var a=new _(e,t,r,n);return Object.keys(e).length<=t.maxProperties||a.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),a}},o.items=function(e,t,r,n){var a=this;if(this.types.array(e)&&void 0!==t.items){var i=new _(e,t,r,n);return e.every((function(e,_){if(Array.isArray(t.items))var o=void 0===t.items[_]?t.additionalItems:t.items[_];else o=t.items;if(void 0===o)return!0;if(!1===o)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var l=a.validateSchema(e,o,r,n.makeChild(o,_));return l.instance!==i.instance[_]&&(i.instance[_]=l.instance),i.importErrors(l),!0})),i}},o.contains=function(e,t,n,a){var i=this;if(this.types.array(e)&&void 0!==t.contains){if(!r.isSchema(t.contains))throw new Error('Expected "contains" keyword to be a schema');var o=new _(e,t,n,a);return!1===e.some((function(e,r){return 0===i.validateSchema(e,t.contains,n,a.makeChild(t.contains,r)).errors.length}))&&o.addError({name:"contains",argument:t.contains,message:"must contain an item matching given schema"}),o}},o.minimum=function(e,t,r,n){if(this.types.number(e)){var a=new _(e,t,r,n);return t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),a}},o.maximum=function(e,t,r,n){if(this.types.number(e)){var a=new _(e,t,r,n);return t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),a}},o.exclusiveMinimum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMinimum&&this.types.number(e)){var a=new _(e,t,r,n);return e>t.exclusiveMinimum||a.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),a}},o.exclusiveMaximum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e)){var a=new _(e,t,r,n);return e<t.exclusiveMaximum||a.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),a}};var u=function(e,t,a,i,o,l){if(this.types.number(e)){var s=t[o];if(0==s)throw new n(o+" cannot be zero");var c=new _(e,t,a,i),u=r.getDecimalPlaces(e),f=r.getDecimalPlaces(s),d=Math.max(u,f),p=Math.pow(10,d);return Math.round(e*p)%Math.round(s*p)!=0&&c.addError({name:o,argument:s,message:l+JSON.stringify(s)}),c}};function f(e,t,_){var n,a=_.length;for(n=t+1;n<a;n++)if(r.deepCompareStrict(e,_[n]))return!1;return!0}o.multipleOf=function(e,t,r,_){return u.call(this,e,t,r,_,"multipleOf","is not a multiple of (divisible by) ")},o.divisibleBy=function(e,t,r,_){return u.call(this,e,t,r,_,"divisibleBy","is not divisible by (multiple of) ")},o.required=function(e,t,r,n){var a=new _(e,t,r,n);return void 0===e&&!0===t.required?a.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){void 0===s(e,t)&&a.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),a},o.pattern=function(e,t,r,n){if(this.types.string(e)){var a=new _(e,t,r,n),i=t.pattern;try{var o=new RegExp(i,"u")}catch(e){o=new RegExp(i)}return e.match(o)||a.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),a}},o.format=function(e,t,n,a){if(void 0!==e){var i=new _(e,t,n,a);return i.disableFormat||r.isFormat(e,t.format,this)||i.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),i}},o.minLength=function(e,t,r,n){if(this.types.string(e)){var a=new _(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)>=t.minLength||a.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),a}},o.maxLength=function(e,t,r,n){if(this.types.string(e)){var a=new _(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)<=t.maxLength||a.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),a}},o.minItems=function(e,t,r,n){if(this.types.array(e)){var a=new _(e,t,r,n);return e.length>=t.minItems||a.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),a}},o.maxItems=function(e,t,r,n){if(this.types.array(e)){var a=new _(e,t,r,n);return e.length<=t.maxItems||a.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),a}},o.uniqueItems=function(e,t,r,n){if(!0===t.uniqueItems&&this.types.array(e)){var a=new _(e,t,r,n);return e.every(f)||a.addError({name:"uniqueItems",message:"contains duplicate item"}),a}},o.dependencies=function(e,t,r,n){if(this.types.object(e)){var a=new _(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i],l=n.makeChild(o,i);if("string"==typeof o&&(o=[o]),Array.isArray(o))o.forEach((function(t){void 0===e[t]&&a.addError({name:"dependencies",argument:l.propertyPath,message:"property "+t+" not found, required by "+l.propertyPath})}));else{var s=this.validateSchema(e,o,r,l);a.instance!==s.instance&&(a.instance=s.instance),s&&s.errors.length&&(a.addError({name:"dependencies",argument:l.propertyPath,message:"does not meet dependency required by "+l.propertyPath}),a.importErrors(s))}}return a}},o.enum=function(e,t,a,i){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new n("enum expects an array",t);var o=new _(e,t,a,i);return t.enum.some(r.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o},o.const=function(e,t,n,a){if(void 0===e)return null;var i=new _(e,t,n,a);return r.deepCompareStrict(t.const,e)||i.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),i},o.not=o.disallow=function(e,t,r,n){var a=this;if(void 0===e)return null;var i=new _(e,t,r,n),o=t.not||t.disallow;return o?(Array.isArray(o)||(o=[o]),o.forEach((function(_){if(a.testType(e,t,r,n,_)){var o=_&&(_.$id||_.id)||_;i.addError({name:"not",argument:o,message:"is of prohibited type "+o})}})),i):null},e.exports=i})),i("bzZym",(function(e,r){var _,n,i,o,l,s,c,u,f,d,p;t(e.exports,"ValidationError",(()=>_),(e=>_=e)),t(e.exports,"ValidatorResult",(()=>n),(e=>n=e)),t(e.exports,"ValidatorResultError",(()=>i),(e=>i=e)),t(e.exports,"SchemaError",(()=>o),(e=>o=e)),t(e.exports,"SchemaContext",(()=>l),(e=>l=e)),t(e.exports,"isFormat",(()=>s),(e=>s=e)),t(e.exports,"deepCompareStrict",(()=>c),(e=>c=e)),t(e.exports,"deepMerge",(()=>u),(e=>u=e)),t(e.exports,"objectGetPath",(()=>f),(e=>f=e)),t(e.exports,"getDecimalPlaces",(()=>d),(e=>d=e)),t(e.exports,"isSchema",(()=>p),(e=>p=e));var h=a("iXQi0"),g=_=function(e,t,r,_,n,a){if(Array.isArray(_)?(this.path=_,this.property=_.reduce((function(e,t){return e+x(t)}),"instance")):void 0!==_&&(this.property=_),e&&(this.message=e),r){var i=r.$id||r.id;this.schema=i||r}void 0!==t&&(this.instance=t),this.name=n,this.argument=a,this.stack=this.toString()};g.prototype.toString=function(){return this.property+" "+this.message};var v=n=function(e,t,r,_){this.instance=e,this.schema=t,this.options=r,this.path=_.path,this.propertyPath=_.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat};function m(e,t){return t+": "+e.toString()+"\n"}function y(e){Error.captureStackTrace&&Error.captureStackTrace(this,y),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}v.prototype.addError=function(e){var t;if("string"==typeof e)t=new g(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new g(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new y(this);if(this.throwError)throw t;return t},v.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))},v.prototype.toString=function(e){return this.errors.map(m).join("")},Object.defineProperty(v.prototype,"valid",{get:function(){return!this.errors.length}}),i=y,y.prototype=new Error,y.prototype.constructor=y,y.prototype.name="Validation Error";var w=o=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};w.prototype=Object.create(Error.prototype,{constructor:{value:w,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var b=l=function(e,t,r,_,n){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce((function(e,t){return e+x(t)}),"instance")):this.propertyPath=r,this.base=_,this.schemas=n};b.prototype.resolve=function(e){return h.resolve(this.base,e)},b.prototype.makeChild=function(e,t){var r=void 0===t?this.path:this.path.concat([t]),_=e.$id||e.id,n=h.resolve(this.base,_||""),a=new b(e,this.options,r,n,Object.create(this.schemas));return _&&!a.schemas[n]&&(a.schemas[n]=e),a};var k={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};k.regexp=k.regex,k.pattern=k.regex,k.ipv4=k["ip-address"],s=function(e,t,r){if("string"==typeof e&&void 0!==k[t]){if(k[t]instanceof RegExp)return k[t].test(e);if("function"==typeof k[t])return k[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var x=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function O(e,t,r,_){"object"==typeof r?t[_]=C(e[_],r):-1===e.indexOf(r)&&t.push(r)}function P(e,t,r){t[r]=e[r]}function E(e,t,r,_){"object"==typeof t[_]&&t[_]&&e[_]?r[_]=C(e[_],t[_]):r[_]=t[_]}function C(e,t){var r=Array.isArray(t),_=r&&[]||{};return r?(e=e||[],_=_.concat(e),t.forEach(O.bind(null,e,_))):(e&&"object"==typeof e&&Object.keys(e).forEach(P.bind(null,e,_)),Object.keys(t).forEach(E.bind(null,e,t,_))),_}function A(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}c=function e(t,r){if(typeof t!=typeof r)return!1;if(Array.isArray(t))return!!Array.isArray(r)&&(t.length===r.length&&t.every((function(_,n){return e(t[n],r[n])})));if("object"==typeof t){if(!t||!r)return t===r;var _=Object.keys(t),n=Object.keys(r);return _.length===n.length&&_.every((function(_){return e(t[_],r[_])}))}return t===r},u=C,f=function(e,t){for(var r,_=t.split("/").slice(1);"string"==typeof(r=_.shift());){var n=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(n in e))return;e=e[n]}return e},d=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var _=r[0].split(".");return 2===_.length&&(t+=_[1].length),t},p=function(e){return"object"==typeof e&&e||"boolean"==typeof e}})),i("hcZ9I",(function(e,r){var _,n;t(e.exports,"SchemaScanResult",(()=>_),(e=>_=e)),t(e.exports,"scan",(()=>n),(e=>n=e));var i=a("iXQi0"),o=a("bzZym");function l(e,t){this.id=e,this.ref=t}_=l,n=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var l=i.resolve(e,t.$ref);s[l]=s[l]?s[l]+1:0}else{var c=t.$id||t.id,u=c?i.resolve(e,c):e;if(u){if(u.indexOf("#")<0&&(u+="#"),a[u]){if(!o.deepCompareStrict(a[u],t))throw new Error("Schema <"+u+"> already exists with different definition");return a[u]}a[u]=t,"#"==u[u.length-1]&&(a[u.substring(0,u.length-1)]=t)}_(u+"/items",Array.isArray(t.items)?t.items:[t.items]),_(u+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),r(u+"/additionalItems",t.additionalItems),n(u+"/properties",t.properties),r(u+"/additionalProperties",t.additionalProperties),n(u+"/definitions",t.definitions),n(u+"/patternProperties",t.patternProperties),n(u+"/dependencies",t.dependencies),_(u+"/disallow",t.disallow),_(u+"/allOf",t.allOf),_(u+"/anyOf",t.anyOf),_(u+"/oneOf",t.oneOf),r(u+"/not",t.not)}}function _(e,t){if(Array.isArray(t))for(var _=0;_<t.length;_++)r(e+"/"+_,t[_])}function n(e,t){if(t&&"object"==typeof t)for(var _ in t)r(e+"/"+_,t[_])}var a={},s={};return r(e,t),new l(a,s)}})),i("5NijP",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("8DvLW")),c=i(a("b9BWf")),u=o(a("2vOVV"));function f(e,t){let r=Object.keys(e);return(t=Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t)).length>0&&t[0]&&(r=r.filter((r=>t.includes(e[r].pathType)))),r.map((t=>({encoded:t,decoded:"file"===e[t].pathType?c.toFileSystemPath(t,!0):t})))}e.exports.default=class{paths(...e){return f(this._$refs,e.flat()).map((e=>(0,u.default)(e.decoded)))}values(...e){const t=this._$refs;return f(t,e.flat()).reduce(((e,r)=>(e[(0,u.default)(r.decoded)]=t[r.encoded].value,e)),{})}exists(e,t){try{return this._resolve(e,"",t),!0}catch{return!1}}get(e,t){return this._resolve(e,"",t).value}set(e,t){const r=c.resolve(this._root$Ref.path,e),_=c.stripHash(r),n=this._$refs[_];if(!n)throw(0,l.ono)(`Error resolving $ref pointer "${e}". \n"${_}" not found.`);n.set(r,t)}_get$Ref(e){e=c.resolve(this._root$Ref.path,e);const t=c.stripHash(e);return this._$refs[t]}_add(e){const t=c.stripHash(e),r=new s.default(this);return r.path=t,this._$refs[t]=r,this._root$Ref=this._root$Ref||r,r}_resolve(e,t,r){const _=c.resolve(this._root$Ref.path,e),n=c.stripHash(_),a=this._$refs[n];if(!a)throw(0,l.ono)(`Error resolving $ref pointer "${e}". \n"${n}" not found.`);return a.resolve(_,r,e,t)}constructor(){this._$refs={},this.toJSON=this.values,this.circular=!1,this._$refs={},this._root$Ref=null}}})),i("58l9B",(function(e,r){var _;_=e.exports,Object.defineProperty(_,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",(()=>s),(e=>s=e)),t(e.exports,"Ono",(()=>a("iZAwj").Ono),(e=>a("iZAwj").Ono=e)),t(e.exports,"ono",(()=>a("jU2th").ono),(e=>a("jU2th").ono=e));var n,i,o=a("jU2th"),l=(a("iZAwj"),a("5esnK")),s=o.ono;"object"==typeof e.exports&&(e.exports=Object.assign(e.exports.default,e.exports)),n=e.exports,i=l,Object.keys(i).forEach((function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})}))})),i("jU2th",(function(e,r){t(e.exports,"ono",(()=>n));var _=a("iZAwj");const n=o;o.error=new(0,_.Ono)(Error),o.eval=new(0,_.Ono)(EvalError),o.range=new(0,_.Ono)(RangeError),o.reference=new(0,_.Ono)(ReferenceError),o.syntax=new(0,_.Ono)(SyntaxError),o.type=new(0,_.Ono)(TypeError),o.uri=new(0,_.Ono)(URIError);const i=o;function o(...e){let t=e[0];if("object"==typeof t&&"string"==typeof t.name)for(let r of Object.values(i))if("function"==typeof r&&"ono"===r.name){let _=r[Symbol.species];if(_&&_!==Error&&(t instanceof _||t.name===_.name))return r.apply(void 0,e)}return o.error.apply(void 0,e)}})),i("iZAwj",(function(e,r){t(e.exports,"Ono",(()=>o));var _=a("6bu4B"),n=a("bmR24"),i=a("eQmnA");const o=l;function l(e,t){function r(...r){let{originalError:a,props:i,message:o}=(0,n.normalizeArgs)(r,t),l=new e(o);return(0,_.extendError)(l,a,i)}return t=(0,n.normalizeOptions)(t),r[Symbol.species]=e,r}l.toJSON=function(e){return i.toJSON.call(e)},l.extend=function(e,t,r){return r||t instanceof Error?(0,_.extendError)(e,t,r):t?(0,_.extendError)(e,void 0,t):(0,_.extendError)(e)}})),i("6bu4B",(function(e,r){t(e.exports,"extendError",(()=>l));var _=a("fcXXE"),n=a("gcc2a"),i=a("eQmnA");const o=["name","message","stack"];function l(e,t,r){let a=e;return function(e,t){let r=Object.getOwnPropertyDescriptor(e,"stack");(0,n.isLazyStack)(r)?(0,n.lazyJoinStacks)(r,e,t):(0,n.isWritableStack)(r)&&(e.stack=(0,n.joinStacks)(e,t))}(a,t),t&&"object"==typeof t&&function(e,t){let r=(0,i.getDeepKeys)(t,o),_=e,n=t;for(let e of r)if(void 0===_[e])try{_[e]=n[e]}catch(e){}}(a,t),a.toJSON=i.toJSON,_.addInspectMethod&&(0,_.addInspectMethod)(a),r&&"object"==typeof r&&Object.assign(a,r),a}})),i("fcXXE",(function(e,r){t(e.exports,"format",(()=>_)),t(e.exports,"addInspectMethod",(()=>n));const _=!1,n=!1})),i("gcc2a",(function(e,r){t(e.exports,"isLazyStack",(()=>a)),t(e.exports,"isWritableStack",(()=>i)),t(e.exports,"joinStacks",(()=>o)),t(e.exports,"lazyJoinStacks",(()=>l));const _=/\r?\n/,n=/\bono[ @]/;function a(e){return Boolean(e&&e.configurable&&"function"==typeof e.get)}function i(e){return Boolean(!e||e.writable||"function"==typeof e.set)}function o(e,t){let r=s(e.stack),_=t?t.stack:void 0;return r&&_?r+"\n\n"+_:r||_}function l(e,t,r){r?Object.defineProperty(t,"stack",{get:()=>o({stack:e.get.apply(t)},r),enumerable:!1,configurable:!0}):function(e,t){Object.defineProperty(e,"stack",{get:()=>s(t.get.apply(e)),enumerable:!1,configurable:!0})}(t,e)}function s(e){if(e){let t,r=e.split(_);for(let e=0;e<r.length;e++){let _=r[e];if(n.test(_))void 0===t&&(t=e);else if(void 0!==t){r.splice(t,e-t);break}}if(r.length>0)return r.join("\n")}return e}})),i("eQmnA",(function(e,r){t(e.exports,"toJSON",(()=>i)),t(e.exports,"getDeepKeys",(()=>o));const _=["function","symbol","undefined"],n=["constructor","prototype","__proto__"],a=Object.getPrototypeOf({});function i(){let e={},t=this;for(let r of o(t))if("string"==typeof r){let n=t[r],a=typeof n;_.includes(a)||(e[r]=n)}return e}function o(e,t=[]){let r=[];for(;e&&e!==a;)r=r.concat(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e)),e=Object.getPrototypeOf(e);let _=new Set(r);for(let e of t.concat(n))_.delete(e);return _}})),i("bmR24",(function(e,r){t(e.exports,"normalizeOptions",(()=>n)),t(e.exports,"normalizeArgs",(()=>i));var _=a("fcXXE");function n(e){return{concatMessages:void 0===(e=e||{}).concatMessages||Boolean(e.concatMessages),format:void 0===e.format?_.format:"function"==typeof e.format&&e.format}}function i(e,t){let r,_,n,a="";return"string"==typeof e[0]?n=e:"string"==typeof e[1]?(e[0]instanceof Error?r=e[0]:_=e[0],n=e.slice(1)):(r=e[0],_=e[1],n=e.slice(2)),n.length>0&&(a=t.format?t.format.apply(void 0,n):n.join(" ")),t.concatMessages&&r&&r.message&&(a+=(a?" \n":"")+r.message),{originalError:r,props:_,message:a}}})),i("5esnK",(function(e,t){a("buJLX")})),i("buJLX",(function(e,t){var r=a("4bJEF"),_=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},_=0;_<t.length;_++)r[t[_]]=Object.getOwnPropertyDescriptor(e,t[_]);return r},n=/%[sdj%]/g;e.exports.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var _=arguments,a=_.length,i=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(_[r++]);case"%d":return Number(_[r++]);case"%j":try{return JSON.stringify(_[r++])}catch(e){return"[Circular]"}default:return e}})),o=_[r];r<a;o=_[++r])g(o)||!b(o)?i+=" "+o:i+=" "+l(o);return i},e.exports.deprecate=function(t,_){if(void 0!==r&&!0===r.noDeprecation)return t;if(void 0===r)return function(){return e.exports.deprecate(t,_).apply(this,arguments)};var n=!1;return function(){if(!n){if(r.throwDeprecation)throw new Error(_);r.traceDeprecation?console.trace(_):console.error(_),n=!0}return t.apply(this,arguments)}};var i={},o=/^$/;function l(t,r){var _={seen:[],stylize:c};return arguments.length>=3&&(_.depth=arguments[2]),arguments.length>=4&&(_.colors=arguments[3]),h(r)?_.showHidden=r:r&&e.exports._extend(_,r),y(_.showHidden)&&(_.showHidden=!1),y(_.depth)&&(_.depth=2),y(_.colors)&&(_.colors=!1),y(_.customInspect)&&(_.customInspect=!0),_.colors&&(_.stylize=s),u(_,t,_.depth)}function s(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function c(e,t){return e}function u(t,r,_){if(t.customInspect&&r&&O(r.inspect)&&r.inspect!==e.exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(_,t);return m(n)||(n=u(t,n,_)),n}var a=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(v(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(t,r);if(a)return a;var i=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(r)),x(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(r);if(0===i.length){if(O(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(w(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(k(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return f(r)}var s,c="",b=!1,P=["{","}"];(p(r)&&(b=!0,P=["[","]"]),O(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(c=" "+RegExp.prototype.toString.call(r)),k(r)&&(c=" "+Date.prototype.toUTCString.call(r)),x(r)&&(c=" "+f(r)),0!==i.length||b&&0!=r.length?_<0?w(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),s=b?function(e,t,r,_,n){for(var a=[],i=0,o=t.length;i<o;++i)A(t,String(i))?a.push(d(e,t,r,_,String(i),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(d(e,t,r,_,n,!0))})),a}(t,r,_,o,i):i.map((function(e){return d(t,r,_,o,e,b)})),t.seen.pop(),function(e,t,r){var _=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return _>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(s,c,P)):P[0]+c+P[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,_,n,a){var i,o,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(o=e.stylize("[Setter]","special")),A(_,n)||(i="["+n+"]"),o||(e.seen.indexOf(l.value)<0?(o=g(r)?u(e,l.value,null):u(e,l.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(i)){if(a&&n.match(/^\d+$/))return o;(i=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.slice(1,-1),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+o}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function w(e){return b(e)&&"[object RegExp]"===P(e)}function b(e){return"object"==typeof e&&null!==e}function k(e){return b(e)&&"[object Date]"===P(e)}function x(e){return b(e)&&("[object Error]"===P(e)||e instanceof Error)}function O(e){return"function"==typeof e}function P(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}e.exports.debuglog=function(t){if(t=t.toUpperCase(),!i[t])if(o.test(t)){var _=r.pid;i[t]=function(){var r=e.exports.format.apply(e.exports,arguments);console.error("%s %d: %s",t,_,r)}}else i[t]=function(){};return i[t]},e.exports.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.exports.types=a("l5y9f"),e.exports.isArray=p,e.exports.isBoolean=h,e.exports.isNull=g,e.exports.isNullOrUndefined=function(e){return null==e},e.exports.isNumber=v,e.exports.isString=m,e.exports.isSymbol=function(e){return"symbol"==typeof e},e.exports.isUndefined=y,e.exports.isRegExp=w,e.exports.types.isRegExp=w,e.exports.isObject=b,e.exports.isDate=k,e.exports.types.isDate=k,e.exports.isError=x,e.exports.types.isNativeError=x,e.exports.isFunction=O,e.exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.exports.isBuffer=a("535KJ");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":"),[t.getDate(),C[t.getMonth()],r].join(" ")),e.exports.format.apply(e.exports,arguments))},e.exports.inherits=a("kIEeu"),e.exports._extend=function(e,t){if(!t||!b(t))return e;for(var r=Object.keys(t),_=r.length;_--;)e[r[_]]=t[r[_]];return e};var S="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(S&&e[S]){var t;if("function"!=typeof(t=e[S]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,_=new Promise((function(e,_){t=e,r=_})),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push((function(e,_){e?r(e):t(_)}));try{e.apply(this,n)}catch(e){r(e)}return _}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),S&&Object.defineProperty(t,S,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,_(e))},e.exports.promisify.custom=S,e.exports.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],_=0;_<arguments.length;_++)t.push(arguments[_]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var a=this,i=function(){return n.apply(a,arguments)};e.apply(this,t).then((function(e){r.nextTick(i.bind(null,null,e))}),(function(e){r.nextTick(N.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,_(e)),t}})),i("l5y9f",(function(e,t){var r=a("7UCbU"),_=a("8VyzH"),n=a("8FbLp"),i=a("8JlaR");function o(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,s="undefined"!=typeof Symbol,c=o(Object.prototype.toString),u=o(Number.prototype.valueOf),f=o(String.prototype.valueOf),d=o(Boolean.prototype.valueOf);if(l)var p=o(BigInt.prototype.valueOf);if(s)var h=o(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===c(e)}function m(e){return"[object Set]"===c(e)}function y(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function b(e){return"[object ArrayBuffer]"===c(e)}function k(e){return"undefined"!=typeof ArrayBuffer&&(b.working?b(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===c(e)}function O(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}e.exports.isArgumentsObject=r,e.exports.isGeneratorFunction=_,e.exports.isTypedArray=i,e.exports.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.exports.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||O(e)},e.exports.isUint8Array=function(e){return"Uint8Array"===n(e)},e.exports.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===n(e)},e.exports.isUint16Array=function(e){return"Uint16Array"===n(e)},e.exports.isUint32Array=function(e){return"Uint32Array"===n(e)},e.exports.isInt8Array=function(e){return"Int8Array"===n(e)},e.exports.isInt16Array=function(e){return"Int16Array"===n(e)},e.exports.isInt32Array=function(e){return"Int32Array"===n(e)},e.exports.isFloat32Array=function(e){return"Float32Array"===n(e)},e.exports.isFloat64Array=function(e){return"Float64Array"===n(e)},e.exports.isBigInt64Array=function(e){return"BigInt64Array"===n(e)},e.exports.isBigUint64Array=function(e){return"BigUint64Array"===n(e)},v.working="undefined"!=typeof Map&&v(new Map),e.exports.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),e.exports.isSet=function(e){return"undefined"!=typeof Set&&(m.working?m(e):e instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),e.exports.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.exports.isWeakSet=function(e){return w(e)},b.working="undefined"!=typeof ArrayBuffer&&b(new ArrayBuffer),e.exports.isArrayBuffer=k,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),e.exports.isDataView=O;var P="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function C(e){return void 0!==P&&(void 0===E.working&&(E.working=E(new P)),E.working?E(e):e instanceof P)}function A(e){return g(e,u)}function S(e){return g(e,f)}function N(e){return g(e,d)}function T(e){return l&&g(e,p)}function L(e){return s&&g(e,h)}e.exports.isSharedArrayBuffer=C,e.exports.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},e.exports.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},e.exports.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},e.exports.isGeneratorObject=function(e){return"[object Generator]"===c(e)},e.exports.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},e.exports.isNumberObject=A,e.exports.isStringObject=S,e.exports.isBooleanObject=N,e.exports.isBigIntObject=T,e.exports.isSymbolObject=L,e.exports.isBoxedPrimitive=function(e){return A(e)||S(e)||N(e)||T(e)||L(e)},e.exports.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(k(e)||C(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e.exports,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),i("7UCbU",(function(e,t){var r=a("fMbqd")(),_=a("cOGba")("Object.prototype.toString"),n=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===_(e)},i=function(e){return!!n(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==_(e)&&"callee"in e&&"[object Function]"===_(e.callee)},o=function(){return n(arguments)}();n.isLegacyArguments=i,e.exports=o?n:i})),i("fMbqd",(function(e,t){var r=a("j9k2R");e.exports=function(){return r()&&!!Symbol.toStringTag}})),i("cOGba",(function(e,t){var r=a("1GFyc"),_=a("lJ4PN"),n=_(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&n(e,".prototype.")>-1?_(a):a}})),i("8VyzH",(function(e,t){var r,_=Object.prototype.toString,n=Function.prototype.toString,i=/^\s*(?:function)?\*/,o=a("fMbqd")(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(i.test(n.call(e)))return!0;if(!o)return"[object GeneratorFunction]"===_.call(e);if(!l)return!1;if(void 0===r){var t=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&l(t)}return l(e)===r}})),i("8FbLp",(function(t,r){var _=a("3gMM1"),n=a("9uJfP"),i=a("lJ4PN"),o=a("iiYVQ"),l=a("fd0O5"),s=o("Object.prototype.toString"),c=a("fMbqd")(),u="undefined"==typeof globalThis?e:globalThis,f=n(),d=o("String.prototype.slice"),p=Object.getPrototypeOf,h=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},g={__proto__:null};_(f,c&&l&&p?function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=p(t),_=l(r,Symbol.toStringTag);if(!_){var n=p(r);_=l(n,Symbol.toStringTag)}g["$"+e]=i(_.get)}}:function(e){var t=new u[e],r=t.slice||t.set;r&&(g["$"+e]=i(r))});t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=d(s(e),8,-1);return h(f,t)>-1?t:"Object"===t&&function(e){var t=!1;return _(g,(function(r,_){if(!t)try{r(e),t=d(_,1)}catch(e){}})),t}(e)}return l?function(e){var t=!1;return _(g,(function(r,_){if(!t)try{"$"+r(e)===_&&(t=d(_,1))}catch(e){}})),t}(e):null}})),i("3gMM1",(function(e,t){var r=a("guTVa"),_=Object.prototype.toString,n=Object.prototype.hasOwnProperty;e.exports=function(e,t,a){if(!r(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=a),"[object Array]"===_.call(e)?function(e,t,r){for(var _=0,a=e.length;_<a;_++)n.call(e,_)&&(null==r?t(e[_],_,e):t.call(r,e[_],_,e))}(e,t,i):"string"==typeof e?function(e,t,r){for(var _=0,n=e.length;_<n;_++)null==r?t(e.charAt(_),_,e):t.call(r,e.charAt(_),_,e)}(e,t,i):function(e,t,r){for(var _ in e)n.call(e,_)&&(null==r?t(e[_],_,e):t.call(r,e[_],_,e))}(e,t,i)}})),i("guTVa",(function(e,t){var r,_,n=Function.prototype.toString,a="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw _}}),_={},a((function(){throw 42}),null,r)}catch(e){e!==_&&(a=null)}else a=null;var i=/^\s*class\b/,o=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},l=function(e){try{return!o(e)&&(n.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var d=document.all;s.call(d)===s.call(document.all)&&(f=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=s.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=a?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{a(e,null,r)}catch(e){if(e!==_)return!1}return!o(e)&&l(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return l(e);if(o(e))return!1;var t=s.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&l(e)}})),i("9uJfP",(function(t,r){var _=a("lAymU"),n="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var e=[],t=0;t<_.length;t++)"function"==typeof n[_[t]]&&(e[e.length]=_[t]);return e}})),i("lAymU",(function(e,t){e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]})),i("iiYVQ",(function(e,t){var r=a("1GFyc"),_=a("lJ4PN"),n=_(r("String.prototype.indexOf"));e.exports=function(e,t){var a=r(e,!!t);return"function"==typeof a&&n(e,".prototype.")>-1?_(a):a}})),i("8JlaR",(function(e,t){var r=a("8FbLp");e.exports=function(e){return!!r(e)}})),i("535KJ",(function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}})),i("kIEeu",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),i("8DvLW",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const _=r(a("kXcQo"));var n=a("l8NiV"),i=a("b9BWf");class o{constructor(e){this.errors=[],this.$refs=e}addError(e){void 0===this.errors&&(this.errors=[]);const t=this.errors.map((({footprint:e})=>e));"errors"in e&&Array.isArray(e.errors)?this.errors.push(...e.errors.map(n.normalizeError).filter((({footprint:e})=>!t.includes(e)))):"footprint"in e&&t.includes(e.footprint)||this.errors.push((0,n.normalizeError)(e))}exists(e,t){try{return this.resolve(e,t),!0}catch{return!1}}get(e,t){return this.resolve(e,t)?.value}resolve(e,t,r,a){const o=new _.default(this,e,r);try{return o.resolve(this.value,t,a)}catch(e){if(!t||!t.continueOnError||!(0,n.isHandledError)(e))throw e;return null===e.path&&(e.path=(0,i.safePointerToPath)((0,i.getHash)(a))),e instanceof n.InvalidPointerError&&(e.source=decodeURI((0,i.stripHash)(a))),this.addError(e),null}}set(e,t){const r=new _.default(this,e);this.value=r.set(this.value,t)}static is$Ref(e){return Boolean(e)&&"object"==typeof e&&null!==e&&"$ref"in e&&"string"==typeof e.$ref&&e.$ref.length>0}static isExternal$Ref(e){return o.is$Ref(e)&&"#"!==e.$ref[0]}static isAllowed$Ref(e,t){if(this.is$Ref(e)){if("#/"===e.$ref.substring(0,2)||"#"===e.$ref)return!0;if("#"!==e.$ref[0]&&(!t||t.resolve?.external))return!0}}static isExtended$Ref(e){return o.is$Ref(e)&&Object.keys(e).length>1}static dereference(e,t){if(t&&"object"==typeof t&&o.isExtended$Ref(e)){const r={};for(const t of Object.keys(e))"$ref"!==t&&(r[t]=e[t]);for(const e of Object.keys(t))e in r||(r[e]=t[e]);return r}return t}}e.exports.default=o})),i("kXcQo",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=i(a("b9BWf"));var c=a("l8NiV");const u=/\//g,f=/~/g,d=/~1/g,p=/~0/g,h=e=>{try{return decodeURIComponent(e)}catch{return e}};class g{constructor(e,t,r){this.$ref=e,this.path=t,this.originalPath=r||t,this.value=void 0,this.circular=!1,this.indirections=0}resolve(e,t,r){const _=g.parse(this.path,this.originalPath);this.value=y(e);for(let e=0;e<_.length;e++){if(v(this,t,r)&&(this.path=g.join(this.path,_.slice(e))),"object"==typeof this.value&&null!==this.value&&!w(r)&&"$ref"in this.value)return this;const n=_[e];if(void 0===this.value[n]||null===this.value[n]&&e===_.length-1){let t=!1;for(let r=_.length-1;r>e;r--){const n=_.slice(e,r+1).join("/");if(void 0!==this.value[n]){this.value=this.value[n],e=r,t=!0;break}}if(t)continue;throw this.value=null,new c.MissingPointerError(n,decodeURI(this.originalPath))}this.value=this.value[n]}return(!this.value||this.value.$ref&&s.resolve(this.path,this.value.$ref)!==r)&&v(this,t,r),this}set(e,t,r){const _=g.parse(this.path);let n;if(0===_.length)return this.value=t,t;this.value=y(e);for(let e=0;e<_.length-1;e++)v(this,r),n=_[e],this.value&&void 0!==this.value[n]?this.value=this.value[n]:this.value=m(this,n,{});return v(this,r),n=_[_.length-1],m(this,n,t),e}static parse(e,t){const r=s.getHash(e).substring(1);if(!r)return[];const _=r.split("/");for(let e=0;e<_.length;e++)_[e]=h(_[e].replace(d,"/").replace(p,"~"));if(""!==_[0])throw new c.InvalidPointerError(r,void 0===t?e:t);return _.slice(1)}static join(e,t){-1===e.indexOf("#")&&(e+="#"),t=Array.isArray(t)?t:[t];for(let r=0;r<t.length;r++){const _=t[r];e+="/"+encodeURIComponent(_.replace(f,"~0").replace(u,"~1"))}return e}}function v(e,t,r){if(l.default.isAllowed$Ref(e.value,t)){const _=s.resolve(e.path,e.value.$ref);if(_!==e.path||w(r)){const r=e.$ref.$refs._resolve(_,e.path,t);return null!==r&&(e.indirections+=r.indirections+1,l.default.isExtended$Ref(e.value)?(e.value=l.default.dereference(e.value,r.value),!1):(e.$ref=r.$ref,e.path=r.path,e.value=r.value,!0))}e.circular=!0}}function m(e,t,r){if(!e.value||"object"!=typeof e.value)throw new c.JSONParserError(`Error assigning $ref pointer "${e.path}". \nCannot set "${t}" of a non-object.`);return"-"===t&&Array.isArray(e.value)?e.value.push(r):e.value[t]=r,r}function y(e){if((0,c.isHandledError)(e))throw e;return e}function w(e){return"string"==typeof e&&0==g.parse(e).length}e.exports.default=g})),i("b9BWf",(function(e,t){var r,_=a("4bJEF"),n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var _=r(e),a=0;a<_.length;a++)"default"!==_[a]&&n(t,e,_[a]);return i(t,e),t}),l=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.parse=void 0,e.exports.resolve=m,e.exports.cwd=y,e.exports.getProtocol=w,e.exports.getExtension=function(e){const t=e.lastIndexOf(".");return t>=0?b(e.substr(t).toLowerCase()):""},e.exports.stripQuery=b,e.exports.getHash=k,e.exports.stripHash=x,e.exports.isHttp=function(e){const t=w(e);return"http"===t||"https"===t||void 0===t&&"undefined"!=typeof window},e.exports.isFileSystemPath=O,e.exports.fromFileSystemPath=function(e){if((0,h.isWindows)()){const t=y(),r=e.toUpperCase(),_=(0,s.default)(t).toUpperCase(),n=r.includes(_),i=r.includes(_),o=c.win32?.isAbsolute(e)||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("file://");n||i||o||t.startsWith("http")||(e=(0,a("2R1eR").join)(t,e)),e=(0,s.default)(e)}e=encodeURI(e);for(const t of g)e=e.replace(t[0],t[1]);return e},e.exports.toFileSystemPath=function(e,t){e=decodeURI(e);for(let t=0;t<v.length;t+=2)e=e.replace(v[t],v[t+1]);let r="file://"===e.substr(0,7).toLowerCase();r&&(e="/"===e[7]?e.substr(8):e.substr(7),(0,h.isWindows)()&&"/"===e[1]&&(e=e[0]+":"+e.substr(1)),t?e="file:///"+e:(r=!1,e=(0,h.isWindows)()?e:"/"+e));(0,h.isWindows)()&&!r&&":\\"===(e=e.replace(u,"\\")).substr(1,2)&&(e=e[0].toUpperCase()+e.substr(1));return e},e.exports.safePointerToPath=function(e){return e.length<=1||"#"!==e[0]||"/"!==e[1]?[]:e.slice(2).split("/").map((e=>decodeURIComponent(e).replace(d,"/").replace(p,"~")))},e.exports.relative=function(e,t){if(!O(e)||!O(t))return m(e,t);const r=c.default.dirname(x(e)),_=x(t);return c.default.relative(r,_)+k(t)};const s=l(a("2vOVV")),c=o(a("2R1eR")),u=/\//g,f=/^(\w{2,}):\/\//i,d=/~1/g,p=/~0/g;var h=a("8crO1");const g=[[/\?/g,"%3F"],[/#/g,"%23"]],v=[/%23/g,"#",/%24/g,"$",/%26/g,"&",/%2C/g,",",/%40/g,"@"];function m(e,t){const r=new URL((0,s.default)(e),"resolve://"),_=new URL((0,s.default)(t),r),n=t.match(/(\s*)$/)?.[1]||"";if("resolve:"===_.protocol){const{pathname:e,search:t,hash:r}=_;return e+t+r+n}return _.toString()+n}function y(){if("undefined"!=typeof window)return location.href;const e=_.cwd(),t=e.slice(-1);return"/"===t||"\\"===t?e:e+"/"}function w(e){const t=f.exec(e||"");if(t)return t[1].toLowerCase()}function b(e){const t=e.indexOf("?");return t>=0&&(e=e.substr(0,t)),e}function k(e){if(!e)return"#";const t=e.indexOf("#");return t>=0?e.substring(t):"#"}function x(e){if(!e)return"";const t=e.indexOf("#");return t>=0&&(e=e.substring(0,t)),e}function O(e){if("undefined"!=typeof window||void 0!==_)return!1;const t=w(e);return void 0===t||"file"===t}e.exports.parse=e=>new URL(e)})),i("2vOVV",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e.startsWith("\\\\?\\")?e:e.split(_.default?.win32?.sep).join(_.default?.posix?.sep??"/")};const _=r(a("2R1eR"))})),i("8crO1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isWindows=void 0;const r=/^win/.test(globalThis.process?globalThis.process.platform:"");e.exports.isWindows=()=>r})),i("l8NiV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.InvalidPointerError=e.exports.TimeoutError=e.exports.MissingPointerError=e.exports.UnmatchedResolverError=e.exports.ResolverError=e.exports.UnmatchedParserError=e.exports.ParserError=e.exports.JSONParserErrorGroup=e.exports.JSONParserError=void 0,e.exports.isHandledError=function(e){return e instanceof n||e instanceof i},e.exports.normalizeError=function(e){null===e.path&&(e.path=[]);return e},a("58l9B");var r=a("iZAwj"),_=a("b9BWf");class n extends Error{constructor(e,t){super(),this.code="EUNKNOWN",this.name="JSONParserError",this.message=e,this.source=t,this.path=null,r.Ono.extend(this)}get footprint(){return`${this.path}+${this.source}+${this.code}+${this.message}`}}e.exports.JSONParserError=n;class i extends Error{constructor(e){super(),this.files=e,this.name="JSONParserErrorGroup",this.message=`${this.errors.length} error${this.errors.length>1?"s":""} occurred while reading '${(0,_.toFileSystemPath)(e.$refs._root$Ref.path)}'`,r.Ono.extend(this)}static getParserErrors(e){const t=[];for(const r of Object.values(e.$refs._$refs))r.errors&&t.push(...r.errors);return t}get errors(){return i.getParserErrors(this.files)}}e.exports.JSONParserErrorGroup=i;e.exports.ParserError=class extends n{constructor(e,t){super(`Error parsing ${t}: ${e}`,t),this.code="EPARSER",this.name="ParserError"}};e.exports.UnmatchedParserError=class extends n{constructor(e){super(`Could not find parser for "${e}"`,e),this.code="EUNMATCHEDPARSER",this.name="UnmatchedParserError"}};e.exports.ResolverError=class extends n{constructor(e,t){super(e.message||`Error reading file "${t}"`,t),this.code="ERESOLVER",this.name="ResolverError","code"in e&&(this.ioErrorCode=String(e.code))}};e.exports.UnmatchedResolverError=class extends n{constructor(e){super(`Could not find resolver for "${e}"`,e),this.code="EUNMATCHEDRESOLVER",this.name="UnmatchedResolverError"}};e.exports.MissingPointerError=class extends n{constructor(e,t){super(`Missing $ref pointer "${(0,_.getHash)(t)}". Token "${e}" does not exist.`,(0,_.stripHash)(t)),this.code="EMISSINGPOINTER",this.name="MissingPointerError"}};e.exports.TimeoutError=class extends n{constructor(e){super(`Dereferencing timeout reached: ${e}ms`),this.code="ETIMEOUT",this.name="TimeoutError"}};e.exports.InvalidPointerError=class extends n{constructor(e,t){super(`Invalid $ref pointer "${e}". Pointers must begin with "#/"`,(0,_.stripHash)(t)),this.code="EUNMATCHEDRESOLVER",this.name="InvalidPointerError"}}})),i("1FCt6",(function(e,t){var r,_=a("3M269").Buffer,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var _=r(e),a=0;a<_.length;a++)"default"!==_[a]&&n(t,e,_[a]);return i(t,e),t});Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("b9BWf")),c=o(a("02Yrw"));var u=a("l8NiV");e.exports.default=async function(e,t,r){const n=e.indexOf("#");let a="";n>=0&&(a=e.substring(n),e=e.substring(0,n));const i=t._add(e),o={url:e,hash:a,extension:s.getExtension(e)};try{const e=await async function(e,t,r){let _=c.all(t.resolve);_=c.filter(_,"canRead",e),c.sort(_);try{return await c.run(_,"read",e,r)}catch(r){throw!r&&t.continueOnError?new u.UnmatchedResolverError(e.url):r&&"error"in r?r.error instanceof u.ResolverError?r.error:new u.ResolverError(r,e.url):l.ono.syntax(`Unable to resolve $ref pointer "${e.url}"`)}}(o,r,t);i.pathType=e.plugin.name,o.data=e.result;const n=await async function(e,t,r){const n=c.all(t.parse),a=c.filter(n,"canParse",e),i=a.length>0?a:n;c.sort(i);try{const t=await c.run(i,"parse",e,r);if(!t.plugin.allowEmpty&&(void 0===(o=t.result)||"object"==typeof o&&0===Object.keys(o).length||"string"==typeof o&&0===o.trim().length||_.isBuffer(o)&&0===o.length))throw l.ono.syntax(`Error parsing "${e.url}" as ${t.plugin.name}. \nParsed value is empty`);return t}catch(r){throw!r&&t.continueOnError?new u.UnmatchedParserError(e.url):r&&r.message&&r.message.startsWith("Error parsing")?r:r&&"error"in r?r.error instanceof u.ParserError?r.error:new u.ParserError(r.error.message,e.url):l.ono.syntax(`Unable to parse ${e.url}`)}var o}(o,r,t);return i.value=n.result,n.result}catch(e){throw(0,u.isHandledError)(e)&&(i.value=e),e}}})),i("3M269",(function(e,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _,n;t(e.exports,"Buffer",(()=>_),(e=>_=e)),t(e.exports,"INSPECT_MAX_BYTES",(()=>n),(e=>n=e));var i=a("fVvVb"),o=a("js4oQ"),l="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_=u,n=50;var s=2147483647;function c(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return f(e,t,r)}function f(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|m(e,t),_=c(r),n=_.write(e,t);n!==r&&(_=_.slice(0,n));return _}(e,t);if(ArrayBuffer.isView(e))return function(e){if(U(e,Uint8Array)){var t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer))return g(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(U(e,SharedArrayBuffer)||e&&U(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var _=e.valueOf&&e.valueOf();if(null!=_&&_!==e)return u.from(_,t,r);var n=function(e){if(u.isBuffer(e)){var t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||$(e.length)?c(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return d(e),c(e<0?0:0|v(e))}function h(e){for(var t=e.length<0?0:0|v(e.length),r=c(t),_=0;_<t;_+=1)r[_]=255&e[_];return r}function g(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var _;return _=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(_,u.prototype),_}function v(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,_=arguments.length>2&&!0===arguments[2];if(!_&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(n)return _?-1:q(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var _=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,r);default:if(_)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),_=!0}}function w(e,t,r){var _=e[t];e[t]=e[r],e[r]=_}function b(e,t,r,_,n){if(0===e.length)return-1;if("string"==typeof r?(_=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,_)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,_,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,_,n);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,_,n){var a,i=1,o=e.length,l=t.length;if(void 0!==_&&("ucs2"===(_=String(_).toLowerCase())||"ucs-2"===_||"utf16le"===_||"utf-16le"===_)){if(e.length<2||t.length<2)return-1;i=2,o/=2,l/=2,r/=2}function s(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var c=-1;for(a=r;a<o;a++)if(s(e,a)===s(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*i}else-1!==c&&(a-=a-c),c=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var u=!0,f=0;f<l;f++)if(s(e,a+f)!==s(t,f)){u=!1;break}if(u)return a}return-1}function x(e,t,r,_){r=Number(r)||0;var n=e.length-r;_?(_=Number(_))>n&&(_=n):_=n;var a=t.length;_>a/2&&(_=a/2);for(var i=0;i<_;++i){var o=parseInt(t.substr(2*i,2),16);if($(o))return i;e[r+i]=o}return i}function O(e,t,r,_){return G(q(t,e.length-r),e,r,_)}function P(e,t,r,_){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,_)}function E(e,t,r,_){return G(V(t),e,r,_)}function C(e,t,r,_){return G(function(e,t){for(var r,_,n,a=[],i=0;i<e.length&&!((t-=2)<0);++i)_=(r=e.charCodeAt(i))>>8,n=r%256,a.push(n),a.push(_);return a}(t,e.length-r),e,r,_)}function A(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var _=[],n=t;n<r;){var a,i,o,l,s=e[n],c=null,u=s>239?4:s>223?3:s>191?2:1;if(n+u<=r)switch(u){case 1:s<128&&(c=s);break;case 2:128==(192&(a=e[n+1]))&&(l=(31&s)<<6|63&a)>127&&(c=l);break;case 3:a=e[n+1],i=e[n+2],128==(192&a)&&128==(192&i)&&(l=(15&s)<<12|(63&a)<<6|63&i)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[n+1],i=e[n+2],o=e[n+3],128==(192&a)&&128==(192&i)&&128==(192&o)&&(l=(15&s)<<18|(63&a)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,_.push(c>>>10&1023|55296),c=56320|1023&c),_.push(c),n+=u}return function(e){var t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);var r="",_=0;for(;_<t;)r+=String.fromCharCode.apply(String,e.slice(_,_+=N));return r}(_)}u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return f(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return p(e)},u.allocUnsafeSlow=function(e){return p(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(U(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),U(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,_=t.length,n=0,a=Math.min(r,_);n<a;++n)if(e[n]!==t[n]){r=e[n],_=t[n];break}return r<_?-1:_<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var _=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var a=e[r];if(U(a,Uint8Array))n+a.length>_.length?u.from(a).copy(_,n):Uint8Array.prototype.set.call(_,a,n);else{if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(_,n)}n+=a.length}return _},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=n;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l&&(u.prototype[l]=u.prototype.inspect),u.prototype.compare=function(e,t,r,_,n){if(U(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===_&&(_=0),void 0===n&&(n=this.length),t<0||r>e.length||_<0||n>this.length)throw new RangeError("out of range index");if(_>=n&&t>=r)return 0;if(_>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(_>>>=0),i=(r>>>=0)-(t>>>=0),o=Math.min(a,i),l=this.slice(_,n),s=e.slice(t,r),c=0;c<o;++c)if(l[c]!==s[c]){a=l[c],i=s[c];break}return a<i?-1:i<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,_){if(void 0===t)_="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)_=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===_&&(_="utf8")):(_=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var a=!1;;)switch(_){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return O(this,e,t,r);case"ascii":case"latin1":case"binary":return P(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function T(e,t,r){var _="";r=Math.min(e.length,r);for(var n=t;n<r;++n)_+=String.fromCharCode(127&e[n]);return _}function L(e,t,r){var _="";r=Math.min(e.length,r);for(var n=t;n<r;++n)_+=String.fromCharCode(e[n]);return _}function M(e,t,r){var _=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>_)&&(r=_);for(var n="",a=t;a<r;++a)n+=W[e[a]];return n}function j(e,t,r){for(var _=e.slice(t,r),n="",a=0;a<_.length-1;a+=2)n+=String.fromCharCode(_[a]+256*_[a+1]);return n}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,_,n,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+_>e.length)throw new RangeError("Index out of range")}function R(e,t,r,_,n,a){if(r+_>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,_,n){return t=+t,r>>>=0,n||R(e,0,r,4),o.write(e,t,r,_,23,4),r+4}function z(e,t,r,_,n){return t=+t,r>>>=0,n||R(e,0,r,8),o.write(e,t,r,_,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var _=this.subarray(e,t);return Object.setPrototypeOf(_,u.prototype),_},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var _=this[e],n=1,a=0;++a<t&&(n*=256);)_+=this[e+a]*n;return _},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var _=this[e+--t],n=1;t>0&&(n*=256);)_+=this[e+--t]*n;return _},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var _=this[e],n=1,a=0;++a<t&&(n*=256);)_+=this[e+a]*n;return _>=(n*=128)&&(_-=Math.pow(2,8*t)),_},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var _=t,n=1,a=this[e+--_];_>0&&(n*=256);)a+=this[e+--_]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,_){(e=+e,t>>>=0,r>>>=0,_)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,_){(e=+e,t>>>=0,r>>>=0,_)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,_){if(e=+e,t>>>=0,!_){var n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}var a=0,i=1,o=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,_){if(e=+e,t>>>=0,!_){var n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}var a=r-1,i=1,o=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i|0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return z(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return z(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,_){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),_||0===_||(_=this.length),t>=e.length&&(t=e.length),t||(t=0),_>0&&_<r&&(_=r),_===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),e.length-t<_-r&&(_=e.length-t+r);var n=_-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,_):Uint8Array.prototype.set.call(e,this.subarray(r,_),t),n},u.prototype.fill=function(e,t,r,_){if("string"==typeof e){if("string"==typeof t?(_=t,t=0,r=this.length):"string"==typeof r&&(_=r,r=this.length),void 0!==_&&"string"!=typeof _)throw new TypeError("encoding must be a string");if("string"==typeof _&&!u.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(1===e.length){var n=e.charCodeAt(0);("utf8"===_&&n<128||"latin1"===_)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=u.isBuffer(e)?e:u.from(e,_),o=i.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%o]}return this};var B=/[^+/0-9A-Za-z-_]/g;function q(e,t){var r;t=t||1/0;for(var _=e.length,n=null,a=[],i=0;i<_;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===_){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function V(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,_){for(var n=0;n<_&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}var W=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var _=16*r,n=0;n<16;++n)t[_+n]=e[r]+e[n];return t}()})),i("fVvVb",(function(e,r){var _,n;t(e.exports,"toByteArray",(()=>_),(e=>_=e)),t(e.exports,"fromByteArray",(()=>n),(e=>n=e)),_=function(e){var t,r,_=c(e),n=_[0],a=_[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,a)),s=0,u=a>0?n-4:n;for(r=0;r<u;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[s++]=t>>16&255,l[s++]=t>>8&255,l[s++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[s++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[s++]=t>>8&255,l[s++]=255&t);return l},n=function(e){for(var t,r=e.length,_=r%3,n=[],i=16383,o=0,l=r-_;o<l;o+=i)n.push(u(e,o,o+i>l?l:o+i));1===_?(t=e[r-1],n.push(a[t>>2]+a[t<<4&63]+"==")):2===_&&(t=(e[r-2]<<8)+e[r-1],n.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return n.join("")};for(var a=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)a[s]=l[s],i[l.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,r){for(var _,n,i=[],o=t;o<r;o+=3)_=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(a[(n=_)>>18&63]+a[n>>12&63]+a[n>>6&63]+a[63&n]);return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63})),i("js4oQ",(function(e,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var _,n;t(e.exports,"read",(()=>_),(e=>_=e)),t(e.exports,"write",(()=>n),(e=>n=e)),_=function(e,t,r,_,n){var a,i,o=8*n-_-1,l=(1<<o)-1,s=l>>1,c=-7,u=r?n-1:0,f=r?-1:1,d=e[t+u];for(u+=f,a=d&(1<<-c)-1,d>>=-c,c+=o;c>0;a=256*a+e[t+u],u+=f,c-=8);for(i=a&(1<<-c)-1,a>>=-c,c+=_;c>0;i=256*i+e[t+u],u+=f,c-=8);if(0===a)a=1-s;else{if(a===l)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,_),a-=s}return(d?-1:1)*i*Math.pow(2,a-_)},n=function(e,t,r,_,n,a){var i,o,l,s=8*a-n-1,c=(1<<s)-1,u=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=_?0:a-1,p=_?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(i++,l/=2),i+u>=c?(o=0,i=c):i+u>=1?(o=(t*l-1)*Math.pow(2,n),i+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,n),i=0));n>=8;e[r+d]=255&o,d+=p,o/=256,n-=8);for(i=i<<n|o,s+=n;s>0;e[r+d]=255&i,d+=p,i/=256,s-=8);e[r+d-p]|=128*h}})),i("02Yrw",(function(e,t){function r(e,t,r,_,n){const a=e[t];if("function"==typeof a)return a.apply(e,[r,_,n]);if(!_){if(a instanceof RegExp)return a.test(r.url);if("string"==typeof a)return a===r.extension;if(Array.isArray(a))return-1!==a.indexOf(r.extension)}return a}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.all=function(e){return Object.keys(e||{}).filter((t=>"object"==typeof e[t])).map((t=>(e[t].name=t,e[t])))},e.exports.filter=function(e,t,_){return e.filter((e=>!!r(e,t,_)))},e.exports.sort=function(e){for(const t of e)t.order=t.order||Number.MAX_SAFE_INTEGER;return e.sort(((e,t)=>e.order-t.order))},e.exports.run=async function(e,t,_,n){let a,i,o=0;return new Promise(((l,s)=>{function c(){if(a=e[o++],!a)return s(i);try{const i=r(a,t,_,u,n);if(i&&"function"==typeof i.then)i.then(f,d);else if(void 0!==i)f(i);else if(o===e.length)throw new Error("No promise has been returned or callback has been called.")}catch(e){d(e)}}function u(e,t){e?d(e):f(t)}function f(e){l({plugin:a,result:e})}function d(e){i={plugin:a,error:e},c()}c()}))}})),i("dlWR1",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.normalizeArgs=_;var r=a("h1anm");function _(e){let t,_,n,a;const i=Array.prototype.slice.call(e);"function"==typeof i[i.length-1]&&(a=i.pop()),"string"==typeof i[0]?(t=i[0],"object"==typeof i[2]?(_=i[1],n=i[2]):(_=void 0,n=i[1])):(t="",_=i[0],n=i[1]);try{n=(0,r.getNewOptions)(n)}catch(e){console.error(`JSON Schema Ref Parser: Error normalizing options: ${e}`)}return n.mutateInputSchema||"object"!=typeof _||(_=JSON.parse(JSON.stringify(_))),{path:t,schema:_,options:n,callback:a}}e.exports.default=_})),i("h1anm",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getNewOptions=e.exports.getJsonSchemaRefParserDefaultOptions=void 0;const _=r(a("bBkmn")),n=r(a("8vevj")),i=r(a("bftfD")),o=r(a("e0bcV")),l=r(a("bAdDM")),s=r(a("94hgF"));e.exports.getJsonSchemaRefParserDefaultOptions=()=>({parse:{json:{..._.default},yaml:{...n.default},text:{...i.default},binary:{...o.default}},resolve:{file:{...l.default},http:{...s.default},external:!0},continueOnError:!1,dereference:{circular:!0,excludedPathMatcher:()=>!1,referenceResolution:"relative"},mutateInputSchema:!0});function c(e,t){if(u(t)){const r=Object.keys(t).filter((e=>!["__proto__","constructor","prototype"].includes(e)));for(let _=0;_<r.length;_++){const n=r[_],a=t[n],i=e[n];u(a)?e[n]=c(i||{},a):void 0!==a&&(e[n]=a)}}return e}function u(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}e.exports.getNewOptions=t=>{const r=(0,e.exports.getJsonSchemaRefParserDefaultOptions)();return t&&c(r,t),r}})),i("bBkmn",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var _=a("l8NiV");e.exports.default={order:100,allowEmpty:!0,canParse:".json",allowBOM:!0,async parse(e){let t=e.data;if(r.isBuffer(t)&&(t=t.toString()),"string"!=typeof t)return t;if(0!==t.trim().length)try{return JSON.parse(t)}catch(r){if(this.allowBOM)try{const e=t.indexOf("{");return t=t.slice(e),JSON.parse(t)}catch(t){throw new _.ParserError(t.message,e.url)}throw new _.ParserError(r.message,e.url)}}}})),i("8vevj",(function(e,t){var r=a("3M269").Buffer,_=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var n=a("l8NiV");const i=_(a("9EoL2"));e.exports.default={order:200,allowEmpty:!0,canParse:[".yaml",".yml",".json"],async parse(e){let t=e.data;if(r.isBuffer(t)&&(t=t.toString()),"string"!=typeof t)return t;try{return i.default.load(t,{schema:a("9EoL2").JSON_SCHEMA})}catch(t){throw new n.ParserError(t?.message||"Parser Error",e.url)}}}})),i("9EoL2",(function(e,r){var _,n,i,o,l,s,c,u,f,d,p,h,g,v;t(e.exports,"Type",(()=>_),(e=>_=e)),t(e.exports,"Schema",(()=>n),(e=>n=e)),t(e.exports,"FAILSAFE_SCHEMA",(()=>i),(e=>i=e)),t(e.exports,"JSON_SCHEMA",(()=>o),(e=>o=e)),t(e.exports,"CORE_SCHEMA",(()=>l),(e=>l=e)),t(e.exports,"DEFAULT_SCHEMA",(()=>s),(e=>s=e)),t(e.exports,"load",(()=>c),(e=>c=e)),t(e.exports,"loadAll",(()=>u),(e=>u=e)),t(e.exports,"dump",(()=>f),(e=>f=e)),t(e.exports,"YAMLException",(()=>d),(e=>d=e)),t(e.exports,"types",(()=>p),(e=>p=e)),t(e.exports,"safeLoad",(()=>h),(e=>h=e)),t(e.exports,"safeLoadAll",(()=>g),(e=>g=e)),t(e.exports,"safeDump",(()=>v),(e=>v=e));var m=a("9jn82"),y=a("bWYPR");function w(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}_=a("ltPw1"),n=a("b1A7U"),i=a("inVvI"),o=a("apZ10"),l=a("aBiEO"),s=a("39QRs"),c=m.load,u=m.loadAll,f=y.dump,d=a("bd00D"),p={binary:a("XPkKA"),float:a("1XPxO"),map:a("fMFQD"),null:a("8QhUm"),pairs:a("iKor8"),set:a("2LZcQ"),timestamp:a("jSxhT"),bool:a("e939J"),int:a("1YR4t"),merge:a("d0wzf"),omap:a("2NLsz"),seq:a("7SckX"),str:a("c670G")},h=w("safeLoad","load"),g=w("safeLoadAll","loadAll"),v=w("safeDump","dump")})),i("9jn82",(function(e,r){var _,n;t(e.exports,"loadAll",(()=>_),(e=>_=e)),t(e.exports,"load",(()=>n),(e=>n=e));var i=a("aOfT7"),o=a("bd00D"),l=a("69qlB"),s=a("39QRs"),c=Object.prototype.hasOwnProperty,u=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,d=/[,\[\]\{\}]/,p=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function g(e){return Object.prototype.toString.call(e)}function v(e){return 10===e||13===e}function m(e){return 9===e||32===e}function y(e){return 9===e||32===e||10===e||13===e}function w(e){return 44===e||91===e||93===e||123===e||125===e}function b(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function k(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function x(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var O=new Array(256),P=new Array(256),E=0;E<256;E++)O[E]=k(E)?1:0,P[E]=k(E);function C(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||s,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function A(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=l(r),new o(t,r)}function S(e,t){throw A(e,t)}function N(e,t){e.onWarning&&e.onWarning.call(null,A(e,t))}var T={YAML:function(e,t,r){var _,n,a;null!==e.version&&S(e,"duplication of %YAML directive"),1!==r.length&&S(e,"YAML directive accepts exactly one argument"),null===(_=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&S(e,"ill-formed argument of the YAML directive"),n=parseInt(_[1],10),a=parseInt(_[2],10),1!==n&&S(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&N(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var _,n;2!==r.length&&S(e,"TAG directive accepts exactly two arguments"),_=r[0],n=r[1],p.test(_)||S(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,_)&&S(e,'there is a previously declared suffix for "'+_+'" tag handle'),h.test(n)||S(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(t){S(e,"tag prefix is malformed: "+n)}e.tagMap[_]=n}};function L(e,t,r,_){var n,a,i,o;if(t<r){if(o=e.input.slice(t,r),_)for(n=0,a=o.length;n<a;n+=1)9===(i=o.charCodeAt(n))||32<=i&&i<=1114111||S(e,"expected valid JSON character");else u.test(o)&&S(e,"the stream contains non-printable characters");e.result+=o}}function M(e,t,r,_){var n,a,o,l;for(i.isObject(r)||S(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,l=(n=Object.keys(r)).length;o<l;o+=1)a=n[o],c.call(t,a)||(t[a]=r[a],_[a]=!0)}function j(e,t,r,_,n,a,i,o,l){var s,u;if(Array.isArray(n))for(s=0,u=(n=Array.prototype.slice.call(n)).length;s<u;s+=1)Array.isArray(n[s])&&S(e,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===g(n[s])&&(n[s]="[object Object]");if("object"==typeof n&&"[object Object]"===g(n)&&(n="[object Object]"),n=String(n),null===t&&(t={}),"tag:yaml.org,2002:merge"===_)if(Array.isArray(a))for(s=0,u=a.length;s<u;s+=1)M(e,t,a[s],r);else M(e,t,a,r);else e.json||c.call(r,n)||!c.call(t,n)||(e.line=i||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,S(e,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[n]=a,delete r[n];return t}function I(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function D(e,t,r){for(var _=0,n=e.input.charCodeAt(e.position);0!==n;){for(;m(n);)9===n&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&35===n)do{n=e.input.charCodeAt(++e.position)}while(10!==n&&13!==n&&0!==n);if(!v(n))break;for(I(e),n=e.input.charCodeAt(e.position),_++,e.lineIndent=0;32===n;)e.lineIndent++,n=e.input.charCodeAt(++e.position)}return-1!==r&&0!==_&&e.lineIndent<r&&N(e,"deficient indentation"),_}function R(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!y(t)))}function F(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function z(e,t){var r,_,n=e.tag,a=e.anchor,i=[],o=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),_=e.input.charCodeAt(e.position);0!==_&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),45===_)&&y(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,D(e,!0,-1)&&e.lineIndent<=t)i.push(null),_=e.input.charCodeAt(e.position);else if(r=e.line,V(e,t,3,!1,!0),i.push(e.result),D(e,!0,-1),_=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==_)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=n,e.anchor=a,e.kind="sequence",e.result=i,!0)}function B(e){var t,r,_,n,a=!1,i=!1;if(33!==(n=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&S(e,"duplication of a tag property"),60===(n=e.input.charCodeAt(++e.position))?(a=!0,n=e.input.charCodeAt(++e.position)):33===n?(i=!0,r="!!",n=e.input.charCodeAt(++e.position)):r="!",t=e.position,a){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&62!==n);e.position<e.length?(_=e.input.slice(t,e.position),n=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!y(n);)33===n&&(i?S(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),p.test(r)||S(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),n=e.input.charCodeAt(++e.position);_=e.input.slice(t,e.position),d.test(_)&&S(e,"tag suffix cannot contain flow indicator characters")}_&&!h.test(_)&&S(e,"tag name cannot contain such characters: "+_);try{_=decodeURIComponent(_)}catch(t){S(e,"tag name is malformed: "+_)}return a?e.tag=_:c.call(e.tagMap,r)?e.tag=e.tagMap[r]+_:"!"===r?e.tag="!"+_:"!!"===r?e.tag="tag:yaml.org,2002:"+_:S(e,'undeclared tag handle "'+r+'"'),!0}function q(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&S(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!y(r)&&!w(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function V(e,t,r,_,n){var a,o,l,s,u,f,d,p,h,g=1,k=!1,E=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=o=l=4===r||3===r,_&&D(e,!0,-1)&&(k=!0,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)),1===g)for(;B(e)||q(e);)D(e,!0,-1)?(k=!0,l=a,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)):l=!1;if(l&&(l=k||n),1!==g&&4!==r||(p=1===r||2===r?t:t+1,h=e.position-e.lineStart,1===g?l&&(z(e,h)||function(e,t,r){var _,n,a,i,o,l,s,c=e.tag,u=e.anchor,f={},d=Object.create(null),p=null,h=null,g=null,v=!1,w=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=f),s=e.input.charCodeAt(e.position);0!==s;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),_=e.input.charCodeAt(e.position+1),a=e.line,63!==s&&58!==s||!y(_)){if(i=e.line,o=e.lineStart,l=e.position,!V(e,r,2,!1,!0))break;if(e.line===a){for(s=e.input.charCodeAt(e.position);m(s);)s=e.input.charCodeAt(++e.position);if(58===s)y(s=e.input.charCodeAt(++e.position))||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(j(e,f,d,p,h,null,i,o,l),p=h=g=null),w=!0,v=!1,n=!1,p=e.tag,h=e.result;else{if(!w)return e.tag=c,e.anchor=u,!0;S(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!w)return e.tag=c,e.anchor=u,!0;S(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(v&&(j(e,f,d,p,h,null,i,o,l),p=h=g=null),w=!0,v=!0,n=!0):v?(v=!1,n=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,s=_;if((e.line===a||e.lineIndent>t)&&(v&&(i=e.line,o=e.lineStart,l=e.position),V(e,t,4,!0,n)&&(v?h=e.result:g=e.result),v||(j(e,f,d,p,h,g,i,o,l),p=h=g=null),D(e,!0,-1),s=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&0!==s)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&j(e,f,d,p,h,null,i,o,l),w&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=f),w}(e,h,p))||function(e,t){var r,_,n,a,i,o,l,s,c,u,f,d,p=!0,h=e.tag,g=e.anchor,v=Object.create(null);if(91===(d=e.input.charCodeAt(e.position)))i=93,s=!1,a=[];else{if(123!==d)return!1;i=125,s=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),d=e.input.charCodeAt(++e.position);0!==d;){if(D(e,!0,t),(d=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=h,e.anchor=g,e.kind=s?"mapping":"sequence",e.result=a,!0;p?44===d&&S(e,"expected the node content, but found ','"):S(e,"missed comma between flow collection entries"),f=null,o=l=!1,63===d&&y(e.input.charCodeAt(e.position+1))&&(o=l=!0,e.position++,D(e,!0,t)),r=e.line,_=e.lineStart,n=e.position,V(e,t,1,!1,!0),u=e.tag,c=e.result,D(e,!0,t),d=e.input.charCodeAt(e.position),!l&&e.line!==r||58!==d||(o=!0,d=e.input.charCodeAt(++e.position),D(e,!0,t),V(e,t,1,!1,!0),f=e.result),s?j(e,a,v,u,c,f,r,_,n):o?a.push(j(e,null,v,u,c,f,r,_,n)):a.push(c),D(e,!0,t),44===(d=e.input.charCodeAt(e.position))?(p=!0,d=e.input.charCodeAt(++e.position)):p=!1}S(e,"unexpected end of the stream within a flow collection")}(e,p)?E=!0:(o&&function(e,t){var r,_,n,a,o,l=1,s=!1,c=!1,u=t,f=0,d=!1;if(124===(a=e.input.charCodeAt(e.position)))_=!1;else{if(62!==a)return!1;_=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===l?l=43===a?3:2:S(e,"repeat of a chomping mode identifier");else{if(!((n=48<=(o=a)&&o<=57?o-48:-1)>=0))break;0===n?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?S(e,"repeat of an indentation width identifier"):(u=t+n-1,c=!0)}if(m(a)){do{a=e.input.charCodeAt(++e.position)}while(m(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!v(a)&&0!==a)}for(;0!==a;){for(I(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),v(a))f++;else{if(e.lineIndent<u){3===l?e.result+=i.repeat("\n",s?1+f:f):1===l&&s&&(e.result+="\n");break}for(_?m(a)?(d=!0,e.result+=i.repeat("\n",s?1+f:f)):d?(d=!1,e.result+=i.repeat("\n",f+1)):0===f?s&&(e.result+=" "):e.result+=i.repeat("\n",f):e.result+=i.repeat("\n",s?1+f:f),s=!0,c=!0,f=0,r=e.position;!v(a)&&0!==a;)a=e.input.charCodeAt(++e.position);L(e,r,e.position,!1)}}return!0}(e,p)||function(e,t){var r,_,n;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,_=n=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(L(e,_,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;_=e.position,e.position++,n=e.position}else v(r)?(L(e,_,n,!0),F(e,D(e,!1,t)),_=n=e.position):e.position===e.lineStart&&R(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}(e,p)||function(e,t){var r,_,n,a,i,o,l;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=_=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return L(e,r,e.position,!0),e.position++,!0;if(92===o){if(L(e,r,e.position,!0),v(o=e.input.charCodeAt(++e.position)))D(e,!1,t);else if(o<256&&O[o])e.result+=P[o],e.position++;else if((i=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(n=i,a=0;n>0;n--)(i=b(o=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+i:S(e,"expected hexadecimal character");e.result+=x(a),e.position++}else S(e,"unknown escape sequence");r=_=e.position}else v(o)?(L(e,r,_,!0),F(e,D(e,!1,t)),r=_=e.position):e.position===e.lineStart&&R(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,_=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}(e,p)?E=!0:!function(e){var t,r,_;if(42!==(_=e.input.charCodeAt(e.position)))return!1;for(_=e.input.charCodeAt(++e.position),t=e.position;0!==_&&!y(_)&&!w(_);)_=e.input.charCodeAt(++e.position);return e.position===t&&S(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),c.call(e.anchorMap,r)||S(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],D(e,!0,-1),!0}(e)?function(e,t,r){var _,n,a,i,o,l,s,c,u=e.kind,f=e.result;if(y(c=e.input.charCodeAt(e.position))||w(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(y(_=e.input.charCodeAt(e.position+1))||r&&w(_)))return!1;for(e.kind="scalar",e.result="",n=a=e.position,i=!1;0!==c;){if(58===c){if(y(_=e.input.charCodeAt(e.position+1))||r&&w(_))break}else if(35===c){if(y(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&R(e)||r&&w(c))break;if(v(c)){if(o=e.line,l=e.lineStart,s=e.lineIndent,D(e,!1,-1),e.lineIndent>=t){i=!0,c=e.input.charCodeAt(e.position);continue}e.position=a,e.line=o,e.lineStart=l,e.lineIndent=s;break}}i&&(L(e,n,a,!1),F(e,e.line-o),n=a=e.position,i=!1),m(c)||(a=e.position+1),c=e.input.charCodeAt(++e.position)}return L(e,n,a,!1),!!e.result||(e.kind=u,e.result=f,!1)}(e,p,1===r)&&(E=!0,null===e.tag&&(e.tag="?")):(E=!0,null===e.tag&&null===e.anchor||S(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===g&&(E=l&&z(e,h))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&S(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),s=0,u=e.implicitTypes.length;s<u;s+=1)if((d=e.implicitTypes[s]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(c.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,s=0,u=(f=e.typeMap.multi[e.kind||"fallback"]).length;s<u;s+=1)if(e.tag.slice(0,f[s].tag.length)===f[s].tag){d=f[s];break}d||S(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||E}function G(e){var t,r,_,n,a=e.position,i=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(n=e.input.charCodeAt(e.position))&&(D(e,!0,-1),n=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==n));){for(i=!0,n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!y(n);)n=e.input.charCodeAt(++e.position);for(_=[],(r=e.input.slice(t,e.position)).length<1&&S(e,"directive name must not be less than one character in length");0!==n;){for(;m(n);)n=e.input.charCodeAt(++e.position);if(35===n){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&!v(n));break}if(v(n))break;for(t=e.position;0!==n&&!y(n);)n=e.input.charCodeAt(++e.position);_.push(e.input.slice(t,e.position))}0!==n&&I(e),c.call(T,r)?T[r](e,r,_):N(e,'unknown document directive "'+r+'"')}D(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,D(e,!0,-1)):i&&S(e,"directives end mark is expected"),V(e,e.lineIndent-1,4,!1,!0),D(e,!0,-1),e.checkLineBreaks&&f.test(e.input.slice(a,e.position))&&N(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&R(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,D(e,!0,-1)):e.position<e.length-1&&S(e,"end of the stream or a document separator is expected")}function U(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new C(e,t),_=e.indexOf("\0");for(-1!==_&&(r.position=_,S(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)G(r);return r.documents}_=function(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var _=U(e,r);if("function"!=typeof t)return _;for(var n=0,a=_.length;n<a;n+=1)t(_[n])},n=function(e,t){var r=U(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new o("expected a single document in the stream, but found more")}}})),i("aOfT7",(function(e,r){var _,n,a,i;function o(e){return null==e}t(e.exports,"isNothing",(()=>_),(e=>_=e)),t(e.exports,"isObject",(()=>n),(e=>n=e)),t(e.exports,"repeat",(()=>a),(e=>a=e)),t(e.exports,"isNegativeZero",(()=>i),(e=>i=e)),_=o,n=function(e){return"object"==typeof e&&null!==e},a=function(e,t){var r,_="";for(r=0;r<t;r+=1)_+=e;return _},i=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}})),i("bd00D",(function(e,t){function r(e,t){var r="",_=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+="\n\n"+e.mark.snippet),_+" "+r):_}function _(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=r(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}_.prototype=Object.create(Error.prototype),_.prototype.constructor=_,_.prototype.toString=function(e){return this.name+": "+r(this,e)},e.exports=_})),i("69qlB",(function(e,t){var r=a("aOfT7");function _(e,t,r,_,n){var a="",i="",o=Math.floor(n/2)-1;return _-t>o&&(t=_-o+(a=" ... ").length),r-_>o&&(r=_+o-(i=" ...").length),{str:a+e.slice(t,r).replace(/\t/g,"")+i,pos:_-t+a.length}}function n(e,t){return r.repeat(" ",t-e.length)+e}e.exports=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var a,i=/\r?\n|\r|\0/g,o=[0],l=[],s=-1;a=i.exec(e.buffer);)l.push(a.index),o.push(a.index+a[0].length),e.position<=a.index&&s<0&&(s=o.length-2);s<0&&(s=o.length-1);var c,u,f="",d=Math.min(e.line+t.linesAfter,l.length).toString().length,p=t.maxLength-(t.indent+d+3);for(c=1;c<=t.linesBefore&&!(s-c<0);c++)u=_(e.buffer,o[s-c],l[s-c],e.position-(o[s]-o[s-c]),p),f=r.repeat(" ",t.indent)+n((e.line-c+1).toString(),d)+" | "+u.str+"\n"+f;for(u=_(e.buffer,o[s],l[s],e.position,p),f+=r.repeat(" ",t.indent)+n((e.line+1).toString(),d)+" | "+u.str+"\n",f+=r.repeat("-",t.indent+d+3+u.pos)+"^\n",c=1;c<=t.linesAfter&&!(s+c>=l.length);c++)u=_(e.buffer,o[s+c],l[s+c],e.position-(o[s]-o[s+c]),p),f+=r.repeat(" ",t.indent)+n((e.line+c+1).toString(),d)+" | "+u.str+"\n";return f.replace(/\n$/,"")}})),i("39QRs",(function(e,t){e.exports=a("aBiEO").extend({implicit:[a("jSxhT"),a("d0wzf")],explicit:[a("XPkKA"),a("2NLsz"),a("iKor8"),a("2LZcQ")]})})),i("aBiEO",(function(e,t){e.exports=a("apZ10")})),i("apZ10",(function(e,t){e.exports=a("inVvI").extend({implicit:[a("8QhUm"),a("e939J"),a("1YR4t"),a("1XPxO")]})})),i("inVvI",(function(e,t){var r=a("b1A7U");e.exports=new r({explicit:[a("c670G"),a("7SckX"),a("fMFQD")]})})),i("b1A7U",(function(e,t){var r=a("bd00D"),_=a("ltPw1");function n(e,t){var r=[];return e[t].forEach((function(e){var t=r.length;r.forEach((function(r,_){r.tag===e.tag&&r.kind===e.kind&&r.multi===e.multi&&(t=_)})),r[t]=e})),r}function i(e){return this.extend(e)}i.prototype.extend=function(e){var t=[],a=[];if(e instanceof _)a.push(e);else if(Array.isArray(e))a=a.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof _))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),a.forEach((function(e){if(!(e instanceof _))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var o=Object.create(i.prototype);return o.implicit=(this.implicit||[]).concat(t),o.explicit=(this.explicit||[]).concat(a),o.compiledImplicit=n(o,"implicit"),o.compiledExplicit=n(o,"explicit"),o.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function _(e){e.multi?(r.multi[e.kind].push(e),r.multi.fallback.push(e)):r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(_);return r}(o.compiledImplicit,o.compiledExplicit),o},e.exports=i})),i("ltPw1",(function(e,t){var r=a("bd00D"),_=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],n=["scalar","sequence","mapping"];e.exports=function(e,t){var a,i;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===_.indexOf(t))throw new r('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(a=t.styleAliases||null,i={},null!==a&&Object.keys(a).forEach((function(e){a[e].forEach((function(t){i[String(t)]=e}))})),i),-1===n.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}})),i("c670G",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})})),i("7SckX",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})})),i("fMFQD",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})})),i("8QhUm",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})})),i("e939J",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})})),i("1YR4t",(function(e,t){var r=a("aOfT7"),_=a("ltPw1");function n(e){return 48<=e&&e<=55}function i(e){return 48<=e&&e<=57}e.exports=new _("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,_=e.length,a=0,o=!1;if(!_)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===_)return!0;if("b"===(t=e[++a])){for(a++;a<_;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(a++;a<_;a++)if("_"!==(t=e[a])){if(!(48<=(r=e.charCodeAt(a))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(a++;a<_;a++)if("_"!==(t=e[a])){if(!n(e.charCodeAt(a)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;a<_;a++)if("_"!==(t=e[a])){if(!i(e.charCodeAt(a)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,r=e,_=1;if(-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(_=-1),t=(r=r.slice(1))[0]),"0"===r)return 0;if("0"===t){if("b"===r[1])return _*parseInt(r.slice(2),2);if("x"===r[1])return _*parseInt(r.slice(2),16);if("o"===r[1])return _*parseInt(r.slice(2),8)}return _*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!r.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})})),i("1XPxO",(function(e,t){var r=a("aOfT7"),_=a("ltPw1"),n=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var i=/^[-+]?[0-9]+e/;e.exports=new _("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!n.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||r.isNegativeZero(e))},represent:function(e,t){var _;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(e))return"-0.0";return _=e.toString(10),i.test(_)?_.replace("e",".e"):_},defaultStyle:"lowercase"})})),i("jSxhT",(function(e,t){var r=a("ltPw1"),_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),n=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==_.exec(e)||null!==n.exec(e))},construct:function(e){var t,r,a,i,o,l,s,c,u=0,f=null;if(null===(t=_.exec(e))&&(t=n.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,a,i));if(o=+t[4],l=+t[5],s=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(f=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(f=-f)),c=new Date(Date.UTC(r,a,i,o,l,s,u)),f&&c.setTime(c.getTime()-f),c},instanceOf:Date,represent:function(e){return e.toISOString()}})})),i("d0wzf",(function(e,t){var r=a("ltPw1");e.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})})),i("XPkKA",(function(e,t){var r=a("ltPw1"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,a=e.length,i=_;for(r=0;r<a;r++)if(!((t=i.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,i=_,o=0,l=[];for(t=0;t<a;t++)t%4==0&&t&&(l.push(o>>16&255),l.push(o>>8&255),l.push(255&o)),o=o<<6|i.indexOf(n.charAt(t));return 0===(r=a%4*6)?(l.push(o>>16&255),l.push(o>>8&255),l.push(255&o)):18===r?(l.push(o>>10&255),l.push(o>>2&255)):12===r&&l.push(o>>4&255),new Uint8Array(l)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,r,n="",a=0,i=e.length,o=_;for(t=0;t<i;t++)t%3==0&&t&&(n+=o[a>>18&63],n+=o[a>>12&63],n+=o[a>>6&63],n+=o[63&a]),a=(a<<8)+e[t];return 0===(r=i%3)?(n+=o[a>>18&63],n+=o[a>>12&63],n+=o[a>>6&63],n+=o[63&a]):2===r?(n+=o[a>>10&63],n+=o[a>>4&63],n+=o[a<<2&63],n+=o[64]):1===r&&(n+=o[a>>2&63],n+=o[a<<4&63],n+=o[64],n+=o[64]),n}})})),i("2NLsz",(function(e,t){var r=a("ltPw1"),_=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,a,i,o,l=[],s=e;for(t=0,r=s.length;t<r;t+=1){if(a=s[t],o=!1,"[object Object]"!==n.call(a))return!1;for(i in a)if(_.call(a,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(i))return!1;l.push(i)}return!0},construct:function(e){return null!==e?e:[]}})})),i("iKor8",(function(e,t){var r=a("ltPw1"),_=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,a,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],"[object Object]"!==_.call(n))return!1;if(1!==(a=Object.keys(n)).length)return!1;i[t]=[a[0],n[a[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,_,n,a,i=e;for(a=new Array(i.length),t=0,r=i.length;t<r;t+=1)_=i[t],n=Object.keys(_),a[t]=[n[0],_[n[0]]];return a}})})),i("2LZcQ",(function(e,t){var r=a("ltPw1"),_=Object.prototype.hasOwnProperty;e.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(_.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})})),i("bWYPR",(function(e,r){var _;t(e.exports,"dump",(()=>_),(e=>_=e));var n=a("aOfT7"),i=a("bd00D"),o=a("39QRs"),l=Object.prototype.toString,s=Object.prototype.hasOwnProperty,c=65279,u={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},f=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],d=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function p(e){var t,r,_;if(t=e.toString(16).toUpperCase(),e<=255)r="x",_=2;else if(e<=65535)r="u",_=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");r="U",_=8}return"\\"+r+n.repeat("0",_-t.length)+t}function h(e){this.schema=e.schema||o,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=n.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,_,n,a,i,o,l;if(null===t)return{};for(r={},n=0,a=(_=Object.keys(t)).length;n<a;n+=1)i=_[n],o=String(t[i]),"!!"===i.slice(0,2)&&(i="tag:yaml.org,2002:"+i.slice(2)),(l=e.compiledTypeMap.fallback[i])&&s.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[i]=o;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function g(e,t){for(var r,_=n.repeat(" ",t),a=0,i=-1,o="",l=e.length;a<l;)-1===(i=e.indexOf("\n",a))?(r=e.slice(a),a=l):(r=e.slice(a,i+1),a=i+1),r.length&&"\n"!==r&&(o+=_),o+=r;return o}function v(e,t){return"\n"+n.repeat(" ",e.indent*t)}function m(e){return 32===e||9===e}function y(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==c||65536<=e&&e<=1114111}function w(e){return y(e)&&e!==c&&13!==e&&10!==e}function b(e,t,r){var _=w(e),n=_&&!m(e);return(r?_:_&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!n)||w(t)&&!m(t)&&35===e||58===t&&n}function k(e,t){var r,_=e.charCodeAt(t);return _>=55296&&_<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1))>=56320&&r<=57343?1024*(_-55296)+r-56320+65536:_}function x(e){return/^\n* /.test(e)}function O(e,t,r,_,n,a,i,o){var l,s,u=0,f=null,d=!1,p=!1,h=-1!==_,g=-1,v=y(s=k(e,0))&&s!==c&&!m(s)&&45!==s&&63!==s&&58!==s&&44!==s&&91!==s&&93!==s&&123!==s&&125!==s&&35!==s&&38!==s&&42!==s&&33!==s&&124!==s&&61!==s&&62!==s&&39!==s&&34!==s&&37!==s&&64!==s&&96!==s&&function(e){return!m(e)&&58!==e}(k(e,e.length-1));if(t||i)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!y(u=k(e,l)))return 5;v=v&&b(u,f,o),f=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=k(e,l)))d=!0,h&&(p=p||l-g-1>_&&" "!==e[g+1],g=l);else if(!y(u))return 5;v=v&&b(u,f,o),f=u}p=p||h&&l-g-1>_&&" "!==e[g+1]}return d||p?r>9&&x(e)?5:i?2===a?5:2:p?4:3:!v||i||n(e)?2===a?5:2:1}function P(e,t,r,_,n){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==f.indexOf(t)||d.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,r),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),l=_||e.flowLevel>-1&&r>=e.flowLevel;switch(O(t,l,e.indent,o,(function(t){return function(e,t){var r,_;for(r=0,_=e.implicitTypes.length;r<_;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!_,n)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+E(t,e.indent)+C(g(t,a));case 4:return">"+E(t,e.indent)+C(g(function(e,t){var r,_,n=/(\n+)([^\n]*)/g,a=(o=e.indexOf("\n"),o=-1!==o?o:e.length,n.lastIndex=o,A(e.slice(0,o),t)),i="\n"===e[0]||" "===e[0];var o;for(;_=n.exec(e);){var l=_[1],s=_[2];r=" "===s[0],a+=l+(i||r||""===s?"":"\n")+A(s,t),i=r}return a}(t,o),a));case 5:return'"'+function(e){for(var t,r="",_=0,n=0;n<e.length;_>=65536?n+=2:n++)_=k(e,n),!(t=u[_])&&y(_)?(r+=e[n],_>=65536&&(r+=e[n+1])):r+=t||p(_);return r}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function E(e,t){var r=x(e)?String(t):"",_="\n"===e[e.length-1];return r+(_&&("\n"===e[e.length-2]||"\n"===e)?"+":_?"":"-")+"\n"}function C(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function A(e,t){if(""===e||" "===e[0])return e;for(var r,_,n=/ [^ ]/g,a=0,i=0,o=0,l="";r=n.exec(e);)(o=r.index)-a>t&&(_=i>a?i:o,l+="\n"+e.slice(a,_),a=_+1),i=o;return l+="\n",e.length-a>t&&i>a?l+=e.slice(a,i)+"\n"+e.slice(i+1):l+=e.slice(a),l.slice(1)}function S(e,t,r,_){var n,a,i,o="",l=e.tag;for(n=0,a=r.length;n<a;n+=1)i=r[n],e.replacer&&(i=e.replacer.call(r,String(n),i)),(T(e,t+1,i,!0,!0,!1,!0)||void 0===i&&T(e,t+1,null,!0,!0,!1,!0))&&(_&&""===o||(o+=v(e,t)),e.dump&&10===e.dump.charCodeAt(0)?o+="-":o+="- ",o+=e.dump);e.tag=l,e.dump=o||"[]"}function N(e,t,r){var _,n,a,o,c,u;for(a=0,o=(n=r?e.explicitTypes:e.implicitTypes).length;a<o;a+=1)if(((c=n[a]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(r?c.multi&&c.representName?e.tag=c.representName(t):e.tag=c.tag:e.tag="?",c.represent){if(u=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===l.call(c.represent))_=c.represent(t,u);else{if(!s.call(c.represent,u))throw new i("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');_=c.represent[u](t,u)}e.dump=_}return!0}return!1}function T(e,t,r,_,n,a,o){e.tag=null,e.dump=r,N(e,r,!1)||N(e,r,!0);var s,c=l.call(e.dump),u=_;_&&(_=e.flowLevel<0||e.flowLevel>t);var f,d,p="[object Object]"===c||"[object Array]"===c;if(p&&(d=-1!==(f=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(n=!1),d&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(p&&d&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),"[object Object]"===c)_&&0!==Object.keys(e.dump).length?(!function(e,t,r,_){var n,a,o,l,s,c,u="",f=e.tag,d=Object.keys(r);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(n=0,a=d.length;n<a;n+=1)c="",_&&""===u||(c+=v(e,t)),l=r[o=d[n]],e.replacer&&(l=e.replacer.call(r,o,l)),T(e,t+1,o,!0,!0,!0)&&((s=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,s&&(c+=v(e,t)),T(e,t+1,l,!0,s)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=f,e.dump=u||"{}"}(e,t,e.dump,n),d&&(e.dump="&ref_"+f+e.dump)):(!function(e,t,r){var _,n,a,i,o,l="",s=e.tag,c=Object.keys(r);for(_=0,n=c.length;_<n;_+=1)o="",""!==l&&(o+=", "),e.condenseFlow&&(o+='"'),i=r[a=c[_]],e.replacer&&(i=e.replacer.call(r,a,i)),T(e,t,a,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),T(e,t,i,!1,!1)&&(l+=o+=e.dump));e.tag=s,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else if("[object Array]"===c)_&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?S(e,t-1,e.dump,n):S(e,t,e.dump,n),d&&(e.dump="&ref_"+f+e.dump)):(!function(e,t,r){var _,n,a,i="",o=e.tag;for(_=0,n=r.length;_<n;_+=1)a=r[_],e.replacer&&(a=e.replacer.call(r,String(_),a)),(T(e,t,a,!1,!1)||void 0===a&&T(e,t,null,!1,!1))&&(""!==i&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=o,e.dump="["+i+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+f+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&P(e,e.dump,t,a,u)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function L(e,t){var r,_,n=[],a=[];for(M(e,n,a),r=0,_=a.length;r<_;r+=1)t.duplicates.push(n[a[r]]);t.usedDuplicates=new Array(_)}function M(e,t,r){var _,n,a;if(null!==e&&"object"==typeof e)if(-1!==(n=t.indexOf(e)))-1===r.indexOf(n)&&r.push(n);else if(t.push(e),Array.isArray(e))for(n=0,a=e.length;n<a;n+=1)M(e[n],t,r);else for(n=0,a=(_=Object.keys(e)).length;n<a;n+=1)M(e[_[n]],t,r)}_=function(e,t){var r=new h(t=t||{});r.noRefs||L(e,r);var _=e;return r.replacer&&(_=r.replacer.call({"":_},"",_)),T(r,0,_,!0,!0)?r.dump+"\n":""}})),i("bftfD",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var _=a("l8NiV");const n=/\.(txt|htm|html|md|xml|js|min|map|css|scss|less|svg)$/i;e.exports.default={order:300,allowEmpty:!0,encoding:"utf8",canParse:e=>("string"==typeof e.data||r.isBuffer(e.data))&&n.test(e.url),parse(e){if("string"==typeof e.data)return e.data;if(r.isBuffer(e.data))return e.data.toString(this.encoding);throw new _.ParserError("data is not text",e.url)}}})),i("e0bcV",(function(e,t){var r=a("3M269").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});const _=/\.(jpeg|jpg|gif|png|bmp|ico)$/i;e.exports.default={order:400,allowEmpty:!0,canParse:e=>r.isBuffer(e.data)&&_.test(e.url),parse:e=>r.isBuffer(e.data)?e.data:r.from(e.data)}})),i("bAdDM",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("9wa3L"));a("58l9B");var s=a("jU2th");const c=i(a("b9BWf"));var u=a("l8NiV");e.exports.default={order:100,canRead:e=>c.isFileSystemPath(e.url),async read(e){let t;try{t=c.toFileSystemPath(e.url)}catch(t){throw new u.ResolverError(s.ono.uri(t,`Malformed URI: ${e.url}`),e.url)}try{return await l.default.promises.readFile(t)}catch(e){throw new u.ResolverError((0,s.ono)(e,`Error opening file "${t}"`),t)}}}})),i("94hgF",(function(e,t){var r,_=a("3M269").Buffer,n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var _=r(e),a=0;a<_.length;a++)"default"!==_[a]&&n(t,e,_[a]);return i(t,e),t});Object.defineProperty(e.exports,"__esModule",{value:!0}),a("58l9B");var l=a("jU2th");const s=o(a("b9BWf"));var c=a("l8NiV");async function u(e,t,r){e=s.parse(e);const n=r||[];n.push(e.href);try{const r=await async function(e,t){let r,_;t.timeout&&(r=new AbortController,_=setTimeout((()=>r.abort()),t.timeout));const n=await fetch(e,{method:"GET",headers:t.headers||{},credentials:t.withCredentials?"include":"same-origin",signal:r?r.signal:null});_&&clearTimeout(_);return n}(e,t);if(r.status>=400)throw(0,l.ono)({status:r.status},`HTTP ERROR ${r.status}`);if(r.status>=300){if(!Number.isNaN(t.redirects)&&n.length>t.redirects)throw new c.ResolverError((0,l.ono)({status:r.status},`Error downloading ${n[0]}. \nToo many redirects: \n  ${n.join(" \n  ")}`));if("location"in r.headers&&r.headers.location){return u(s.resolve(e.href,r.headers.location),t,n)}throw(0,l.ono)({status:r.status},`HTTP ${r.status} redirect with no location header`)}if(r.body){const e=await r.arrayBuffer();return _.from(e)}return _.alloc(0)}catch(t){throw new c.ResolverError((0,l.ono)(t,`Error downloading ${e.href}`),e.href)}}e.exports.default={order:200,headers:null,timeout:6e4,redirects:5,withCredentials:!1,canRead:e=>s.isHttp(e.url),read(e){const t=s.parse(e.url);return"undefined"==typeof window||t.protocol||(t.protocol=s.parse(location.href).protocol),u(t,this)}}})),i("hBMkZ",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo")),c=o(a("1FCt6")),u=i(a("b9BWf"));var f=a("l8NiV");function d(e,t,r,_,n,a){n||(n=new Set);let i=[];if(e&&"object"==typeof e&&!ArrayBuffer.isView(e)&&!n.has(e)){n.add(e),l.default.isExternal$Ref(e)&&i.push(async function(e,t,r,_){const n="root"===_.dereference?.externalReferenceResolution,a=u.resolve(n?u.cwd():t,e.$ref),i=u.stripHash(a),o=r._$refs[i];if(o)return Promise.resolve(o.value);try{const e=d(await(0,c.default)(a,r,_),i+"#",r,_,new Set,!0);return Promise.all(e)}catch(e){if(!_?.continueOnError||!(0,f.isHandledError)(e))throw e;return r._$refs[i]&&(e.source=decodeURI(u.stripHash(t)),e.path=u.safePointerToPath(u.getHash(t))),[]}}(e,t,r,_));const o=Object.keys(e);for(const l of o){const o=s.default.join(t,l),c=e[l];i=i.concat(d(c,o,r,_,n,a))}}return i}e.exports.default=function(e,t){if(!t.resolve?.external)return Promise.resolve();try{const r=d(e.schema,e.$refs._root$Ref.path+"#",e.$refs,t);return Promise.all(r)}catch(e){return Promise.reject(e)}}})),i("7UBq0",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo")),c=i(a("b9BWf"));function u(e,t,r,_,n,a,i,o){const c=null===t?e:e[t];if(c&&"object"==typeof c&&!ArrayBuffer.isView(c))if(l.default.isAllowed$Ref(c))f(e,t,r,_,n,a,i,o);else{const e=Object.keys(c).sort(((e,t)=>"definitions"===e?-1:"definitions"===t?1:e.length-t.length));for(const t of e){const e=s.default.join(r,t),d=s.default.join(_,t),p=c[t];l.default.isAllowed$Ref(p)?f(c,t,r,d,n,a,i,o):u(c,t,e,d,n,a,i,o)}}}function f(e,t,r,_,n,a,i,o){const f=null===t?e:e[t],d=c.resolve(r,f.$ref),p=i._resolve(d,_,o);if(null===p)return;const h=s.default.parse(_).length,g=c.stripHash(p.path),v=c.getHash(p.path),m=g!==i._root$Ref.path,y=l.default.isExtended$Ref(f);n+=p.indirections;const w=function(e,t,r){for(const _ of e)if(_&&_.parent===t&&_.key===r)return _;return}(a,e,t);if(w){if(!(h<w.depth||n<w.indirections))return;!function(e,t){const r=e.indexOf(t);e.splice(r,1)}(a,w)}a.push({$ref:f,parent:e,key:t,pathFromRoot:_,depth:h,file:g,hash:v,value:p.value,circular:p.circular,extended:y,external:m,indirections:n}),w&&!m||u(p.value,null,p.path,_,n+1,a,i,o)}e.exports.default=function(e,t){const r=[];u(e,"schema",e.$refs._root$Ref.path+"#","#",0,r,e.$refs,t),function(e){let t,r,_;e.sort(((e,t)=>{if(e.file!==t.file)return e.file<t.file?-1:1;if(e.hash!==t.hash)return e.hash<t.hash?-1:1;if(e.circular!==t.circular)return e.circular?-1:1;if(e.extended!==t.extended)return e.extended?1:-1;if(e.indirections!==t.indirections)return e.indirections-t.indirections;if(e.depth!==t.depth)return e.depth-t.depth;{const r=e.pathFromRoot.lastIndexOf("/definitions"),_=t.pathFromRoot.lastIndexOf("/definitions");return r!==_?_-r:e.pathFromRoot.length-t.pathFromRoot.length}}));for(const n of e)n.external?n.file===t&&n.hash===r?n.$ref.$ref=_:n.file===t&&0===n.hash.indexOf(r+"/")?n.$ref.$ref=s.default.join(_,s.default.parse(n.hash.replace(r,"#"))):(t=n.file,r=n.hash,_=n.pathFromRoot,n.$ref=n.parent[n.key]=l.default.dereference(n.$ref,n.value),n.circular&&(n.$ref.$ref=n.pathFromRoot)):n.$ref.$ref=n.hash}(r)}})),i("ftePO",(function(e,t){var r,_=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a=r(e),i=0;i<a.length;i++)"default"!==a[i]&&_(t,e,a[i]);return n(t,e),t}),o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});const l=o(a("8DvLW")),s=o(a("kXcQo"));a("58l9B");var c=a("jU2th");const u=i(a("b9BWf"));var f=a("l8NiV");function d(e,t,r,_,n,a,i,o,c){let u;const g={value:e,circular:!1};if(o&&o.timeoutMs&&Date.now()-c>o.timeoutMs)throw new f.TimeoutError(o.timeoutMs);const v=o.dereference||{},m=v.excludedPathMatcher||(()=>!1);if(("ignore"===v?.circular||!n.has(e))&&e&&"object"==typeof e&&!ArrayBuffer.isView(e)&&!m(r)){if(_.add(e),n.add(e),l.default.isAllowed$Ref(e,o))u=p(e,t,r,_,n,a,i,o,c),g.circular=u.circular,g.value=u.value;else for(const f of Object.keys(e)){const y=s.default.join(t,f),w=s.default.join(r,f);if(m(w))continue;const b=e[f];let k=!1;l.default.isAllowed$Ref(b,o)?(u=p(b,y,w,_,n,a,i,o,c),k=u.circular,e[f]!==u.value&&(e[f]=u.value,v?.onDereference?.(b.$ref,e[f],e,f))):_.has(b)?k=h(y,i,o):(u=d(b,y,w,_,n,a,i,o,c),k=u.circular,e[f]!==u.value&&(e[f]=u.value)),g.circular=g.circular||k}_.delete(e)}return g}function p(e,t,r,_,n,a,i,o,s){const c=l.default.isExternal$Ref(e)&&"root"===o?.dereference?.externalReferenceResolution,f=u.resolve(c?u.cwd():t,e.$ref),p=a.get(f);if(p&&!p.circular){const t=Object.keys(e);if(t.length>1){const r={};for(const _ of t)"$ref"===_||_ in p.value||(r[_]=e[_]);return{circular:p.circular,value:Object.assign({},p.value,r)}}return p}const g=i._resolve(f,t,o);if(null===g)return{circular:!1,value:null};const v=g.circular;let m=v||_.has(g.value);m&&h(t,i,o);let y=l.default.dereference(e,g.value);if(!m){const e=d(y,g.path,r,_,n,a,i,o,s);m=e.circular,y=e.value}m&&!v&&"ignore"===o.dereference?.circular&&(y=e),v&&(y.$ref=r);const w={circular:m,value:y};return 1===Object.keys(e).length&&a.set(f,w),w}function h(e,t,r){if(t.circular=!0,!r.dereference.circular)throw c.ono.reference(`Circular $ref pointer found at ${e}`);return!0}e.exports.default=function(e,t){const r=Date.now(),_=d(e.schema,e.$refs._root$Ref.path,"#",new Set,new Set,new Map,e.$refs,t,r);e.$refs.circular=_.circular,e.schema=_.value}})),i("cfZ0q",(function(e,t){var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return e?void t.then((function(t){(0,_.default)((function(){e(null,t)}))}),(function(t){(0,_.default)((function(){e(t)}))})):t};const _=r(a("eJL19"))})),i("eJL19",(function(e,t){var r=a("4bJEF");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default="object"==typeof r&&"function"==typeof r.nextTick?r.nextTick:"function"==typeof setImmediate?setImmediate:function(e){setTimeout(e,0)}})),i("5VzDB",(function(e,t){(function(){var t,r,_,n,a,i,o,l,s,c,u,f,d,p,h,g;_=Math.floor,c=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},s=function(e,t,n,a,i){var o;if(null==n&&(n=0),null==i&&(i=r),n<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);n<a;)i(t,e[o=_((n+a)/2)])<0?a=o:n=o+1;return[].splice.apply(e,[n,n-n].concat(t)),t},i=function(e,t,_){return null==_&&(_=r),e.push(t),p(e,0,e.length-1,_)},a=function(e,t){var _,n;return null==t&&(t=r),_=e.pop(),e.length?(n=e[0],e[0]=_,h(e,0,t)):n=_,n},l=function(e,t,_){var n;return null==_&&(_=r),n=e[0],e[0]=t,h(e,0,_),n},o=function(e,t,_){var n;return null==_&&(_=r),e.length&&_(e[0],t)<0&&(t=(n=[e[0],t])[0],e[0]=n[1],h(e,0,_)),t},n=function(e,t){var n,a,i,o,l,s;for(null==t&&(t=r),o=function(){s=[];for(var t=0,r=_(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)s.push(t);return s}.apply(this).reverse(),l=[],a=0,i=o.length;a<i;a++)n=o[a],l.push(h(e,n,t));return l},d=function(e,t,_){var n;if(null==_&&(_=r),-1!==(n=e.indexOf(t)))return p(e,0,n,_),h(e,n,_)},u=function(e,t,_){var a,i,l,s,c;if(null==_&&(_=r),!(i=e.slice(0,t)).length)return i;for(n(i,_),l=0,s=(c=e.slice(t)).length;l<s;l++)a=c[l],o(i,a,_);return i.sort(_).reverse()},f=function(e,t,_){var i,o,l,u,f,d,p,h,g;if(null==_&&(_=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(_)).length)return l;for(o=l[l.length-1],u=0,d=(p=e.slice(t)).length;u<d;u++)_(i=p[u],o)<0&&(s(l,i,0,null,_),l.pop(),o=l[l.length-1]);return l}for(n(e,_),g=[],f=0,h=c(t,e.length);0<=h?f<h:f>h;0<=h?++f:--f)g.push(a(e,_));return g},p=function(e,t,_,n){var a,i,o;for(null==n&&(n=r),a=e[_];_>t&&n(a,i=e[o=_-1>>1])<0;)e[_]=i,_=o;return e[_]=a},h=function(e,t,_){var n,a,i,o,l;for(null==_&&(_=r),a=e.length,l=t,i=e[t],n=2*t+1;n<a;)(o=n+1)<a&&!(_(e[n],e[o])<0)&&(n=o),e[t]=e[n],n=2*(t=n)+1;return e[t]=i,p(e,l,t,_)},t=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=i,e.pop=a,e.replace=l,e.pushpop=o,e.heapify=n,e.updateItem=d,e.nlargest=u,e.nsmallest=f,e.prototype.push=function(e){return i(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return n(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),g=function(){return t},"function"==typeof define&&define.amd?define([],g):e.exports=g()}).call(e.exports)})),i("cwOQi",(function(e,t){var r;e.exports,r=function(e){return t={45:(e,t,r)=>{var _={};_.layoutBase=r(551),_.CoSEConstants=r(806),_.CoSEEdge=r(767),_.CoSEGraph=r(880),_.CoSEGraphManager=r(578),_.CoSELayout=r(765),_.CoSENode=r(991),_.ConstraintHandler=r(902),e.exports=_},806:(e,t,r)=>{var _=r(551).FDLayoutConstants;function n(){}for(var a in _)n[a]=_[a];n.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,n.DEFAULT_RADIAL_SEPARATION=_.DEFAULT_EDGE_LENGTH,n.DEFAULT_COMPONENT_SEPERATION=60,n.TILE=!0,n.TILING_PADDING_VERTICAL=10,n.TILING_PADDING_HORIZONTAL=10,n.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,n.ENFORCE_CONSTRAINTS=!0,n.APPLY_LAYOUT=!0,n.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,n.TREE_REDUCTION_ON_INCREMENTAL=!0,n.PURE_INCREMENTAL=n.DEFAULT_INCREMENTAL,e.exports=n},767:(e,t,r)=>{var _=r(551).FDLayoutEdge;function n(e,t,r){_.call(this,e,t,r)}for(var a in n.prototype=Object.create(_.prototype),_)n[a]=_[a];e.exports=n},880:(e,t,r)=>{var _=r(551).LGraph;function n(e,t,r){_.call(this,e,t,r)}for(var a in n.prototype=Object.create(_.prototype),_)n[a]=_[a];e.exports=n},578:(e,t,r)=>{var _=r(551).LGraphManager;function n(e){_.call(this,e)}for(var a in n.prototype=Object.create(_.prototype),_)n[a]=_[a];e.exports=n},765:(e,t,r)=>{var _=r(551).FDLayout,n=r(578),a=r(880),i=r(991),o=r(767),l=r(806),s=r(902),c=r(551).FDLayoutConstants,u=r(551).LayoutConstants,f=r(551).Point,d=r(551).PointD,p=r(551).DimensionD,h=r(551).Layout,g=r(551).Integer,v=r(551).IGeometry,m=r(551).LGraph,y=r(551).Transform,w=r(551).LinkedList;function b(){_.call(this),this.toBeTiled={},this.constraints={}}for(var k in b.prototype=Object.create(_.prototype),_)b[k]=_[k];b.prototype.newGraphManager=function(){var e=new n(this);return this.graphManager=e,e},b.prototype.newGraph=function(e){return new a(null,this.graphManager,e)},b.prototype.newNode=function(e){return new i(this.graphManager,e)},b.prototype.newEdge=function(e){return new o(null,null,e)},b.prototype.initParameters=function(){_.prototype.initParameters.call(this,arguments),this.isSubLayout||(l.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=l.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=l.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},b.prototype.initSpringEmbedder=function(){_.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},b.prototype.layout=function(){return u.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},b.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)l.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter((function(e){return t.has(e)})),this.graphManager.setAllNodesToApplyGravitation(r));else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),r=this.nodesWithGravity.filter((function(e){return t.has(e)}));this.graphManager.setAllNodesToApplyGravitation(r),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(s.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),l.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},b.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter((function(t){return e.has(t)}));this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),l.PURE_INCREMENTAL?this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var r=!this.isTreeGrowing&&!this.isGrowthFinished,_=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(r,_),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},b.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},r=0;r<e.length;r++){var _=e[r].rect,n=e[r].id;t[n]={id:n,x:_.getCenterX(),y:_.getCenterY(),w:_.width,h:_.height}}return t},b.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},b.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),t=0;t<e.length;t++)e[t].move()},b.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var t=this.graphManager.getAllNodes(),r=0;r<t.length;r++){var _=t[r];this.idToNodeMap.set(_.id,_)}var n=function t(r){for(var _,n=r.getChild().getNodes(),a=0,i=0;i<n.length;i++)null==(_=n[i]).getChild()?e.fixedNodeSet.has(_.id)&&(a+=100):a+=t(_);return a};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach((function(t){e.fixedNodeSet.add(t.nodeId)})),t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)if(null!=(_=t[r]).getChild()){var a=n(_);a>0&&(_.fixedNodeWeight=a)}if(this.constraints.relativePlacementConstraint){var i=new Map,o=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(t){e.fixedNodesOnHorizontal.add(t),e.fixedNodesOnVertical.add(t)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var s=this.constraints.alignmentConstraint.vertical;for(r=0;r<s.length;r++)this.dummyToNodeForVerticalAlignment.set("dummy"+r,[]),s[r].forEach((function(t){i.set(t,"dummy"+r),e.dummyToNodeForVerticalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnHorizontal.add("dummy"+r)}))}if(this.constraints.alignmentConstraint.horizontal){var c=this.constraints.alignmentConstraint.horizontal;for(r=0;r<c.length;r++)this.dummyToNodeForHorizontalAlignment.set("dummy"+r,[]),c[r].forEach((function(t){o.set(t,"dummy"+r),e.dummyToNodeForHorizontalAlignment.get("dummy"+r).push(t),e.fixedNodeSet.has(t)&&e.fixedNodesOnVertical.add("dummy"+r)}))}}if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(e){var t,r,_;for(_=e.length-1;_>=2*e.length/3;_--)t=Math.floor(Math.random()*(_+1)),r=e[_],e[_]=e[t],e[t]=r;return e},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(t){if(t.left){var r=i.has(t.left)?i.get(t.left):t.left,_=i.has(t.right)?i.get(t.right):t.right;e.nodesInRelativeHorizontal.includes(r)||(e.nodesInRelativeHorizontal.push(r),e.nodeToRelativeConstraintMapHorizontal.set(r,[]),e.dummyToNodeForVerticalAlignment.has(r)?e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(r)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(r,e.idToNodeMap.get(r).getCenterX())),e.nodesInRelativeHorizontal.includes(_)||(e.nodesInRelativeHorizontal.push(_),e.nodeToRelativeConstraintMapHorizontal.set(_,[]),e.dummyToNodeForVerticalAlignment.has(_)?e.nodeToTempPositionMapHorizontal.set(_,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(_)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(_,e.idToNodeMap.get(_).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(r).push({right:_,gap:t.gap}),e.nodeToRelativeConstraintMapHorizontal.get(_).push({left:r,gap:t.gap})}else{var n=o.has(t.top)?o.get(t.top):t.top,a=o.has(t.bottom)?o.get(t.bottom):t.bottom;e.nodesInRelativeVertical.includes(n)||(e.nodesInRelativeVertical.push(n),e.nodeToRelativeConstraintMapVertical.set(n,[]),e.dummyToNodeForHorizontalAlignment.has(n)?e.nodeToTempPositionMapVertical.set(n,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(n)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(n,e.idToNodeMap.get(n).getCenterY())),e.nodesInRelativeVertical.includes(a)||(e.nodesInRelativeVertical.push(a),e.nodeToRelativeConstraintMapVertical.set(a,[]),e.dummyToNodeForHorizontalAlignment.has(a)?e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(a)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(a,e.idToNodeMap.get(a).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(n).push({bottom:a,gap:t.gap}),e.nodeToRelativeConstraintMapVertical.get(a).push({top:n,gap:t.gap})}}));else{var u=new Map,f=new Map;this.constraints.relativePlacementConstraint.forEach((function(e){if(e.left){var t=i.has(e.left)?i.get(e.left):e.left,r=i.has(e.right)?i.get(e.right):e.right;u.has(t)?u.get(t).push(r):u.set(t,[r]),u.has(r)?u.get(r).push(t):u.set(r,[t])}else{var _=o.has(e.top)?o.get(e.top):e.top,n=o.has(e.bottom)?o.get(e.bottom):e.bottom;f.has(_)?f.get(_).push(n):f.set(_,[n]),f.has(n)?f.get(n).push(_):f.set(n,[_])}}));var d=function(e,t){var r=[],_=[],n=new w,a=new Set,i=0;return e.forEach((function(o,l){if(!a.has(l)){r[i]=[],_[i]=!1;var s=l;for(n.push(s),a.add(s),r[i].push(s);0!=n.length;)s=n.shift(),t.has(s)&&(_[i]=!0),e.get(s).forEach((function(e){a.has(e)||(n.push(e),a.add(e),r[i].push(e))}));i++}})),{components:r,isFixed:_}},p=d(u,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=p.components,this.fixedComponentsOnHorizontal=p.isFixed;var h=d(f,e.fixedNodesOnVertical);this.componentsOnVertical=h.components,this.fixedComponentsOnVertical=h.isFixed}}},b.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(t){var r=e.idToNodeMap.get(t.nodeId);r.displacementX=0,r.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var t=this.constraints.alignmentConstraint.vertical,r=0;r<t.length;r++){for(var _=0,n=0;n<t[r].length;n++){if(this.fixedNodeSet.has(t[r][n])){_=0;break}_+=this.idToNodeMap.get(t[r][n]).displacementX}var a=_/t[r].length;for(n=0;n<t[r].length;n++)this.idToNodeMap.get(t[r][n]).displacementX=a}if(this.constraints.alignmentConstraint.horizontal){var i=this.constraints.alignmentConstraint.horizontal;for(r=0;r<i.length;r++){var o=0;for(n=0;n<i[r].length;n++){if(this.fixedNodeSet.has(i[r][n])){o=0;break}o+=this.idToNodeMap.get(i[r][n]).displacementY}var s=o/i[r].length;for(n=0;n<i[r].length;n++)this.idToNodeMap.get(i[r][n]).displacementY=s}}}if(this.constraints.relativePlacementConstraint)if(l.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForVerticalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(t)[0]).displacementX:e.idToNodeMap.get(t).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(t).forEach((function(_){var n;_.right?(n=e.nodeToTempPositionMapHorizontal.get(_.right)-e.nodeToTempPositionMapHorizontal.get(t)-r)<_.gap&&(r-=_.gap-n):(n=e.nodeToTempPositionMapHorizontal.get(t)-e.nodeToTempPositionMapHorizontal.get(_.left)+r)<_.gap&&(r+=_.gap-n)})),e.nodeToTempPositionMapHorizontal.set(t,e.nodeToTempPositionMapHorizontal.get(t)+r),e.dummyToNodeForVerticalAlignment.has(t)?e.dummyToNodeForVerticalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementX=r})):e.idToNodeMap.get(t).displacementX=r}})),this.nodesInRelativeVertical.forEach((function(t){if(!e.fixedNodesOnHorizontal.has(t)){var r=0;r=e.dummyToNodeForHorizontalAlignment.has(t)?e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(t)[0]).displacementY:e.idToNodeMap.get(t).displacementY,e.nodeToRelativeConstraintMapVertical.get(t).forEach((function(_){var n;_.bottom?(n=e.nodeToTempPositionMapVertical.get(_.bottom)-e.nodeToTempPositionMapVertical.get(t)-r)<_.gap&&(r-=_.gap-n):(n=e.nodeToTempPositionMapVertical.get(t)-e.nodeToTempPositionMapVertical.get(_.top)+r)<_.gap&&(r+=_.gap-n)})),e.nodeToTempPositionMapVertical.set(t,e.nodeToTempPositionMapVertical.get(t)+r),e.dummyToNodeForHorizontalAlignment.has(t)?e.dummyToNodeForHorizontalAlignment.get(t).forEach((function(t){e.idToNodeMap.get(t).displacementY=r})):e.idToNodeMap.get(t).displacementY=r}}));else{for(r=0;r<this.componentsOnHorizontal.length;r++){var c=this.componentsOnHorizontal[r];if(this.fixedComponentsOnHorizontal[r])for(n=0;n<c.length;n++)this.dummyToNodeForVerticalAlignment.has(c[n])?this.dummyToNodeForVerticalAlignment.get(c[n]).forEach((function(t){e.idToNodeMap.get(t).displacementX=0})):this.idToNodeMap.get(c[n]).displacementX=0;else{var u=0,f=0;for(n=0;n<c.length;n++)this.dummyToNodeForVerticalAlignment.has(c[n])?(u+=(p=this.dummyToNodeForVerticalAlignment.get(c[n])).length*this.idToNodeMap.get(p[0]).displacementX,f+=p.length):(u+=this.idToNodeMap.get(c[n]).displacementX,f++);var d=u/f;for(n=0;n<c.length;n++)this.dummyToNodeForVerticalAlignment.has(c[n])?this.dummyToNodeForVerticalAlignment.get(c[n]).forEach((function(t){e.idToNodeMap.get(t).displacementX=d})):this.idToNodeMap.get(c[n]).displacementX=d}}for(r=0;r<this.componentsOnVertical.length;r++)if(c=this.componentsOnVertical[r],this.fixedComponentsOnVertical[r])for(n=0;n<c.length;n++)this.dummyToNodeForHorizontalAlignment.has(c[n])?this.dummyToNodeForHorizontalAlignment.get(c[n]).forEach((function(t){e.idToNodeMap.get(t).displacementY=0})):this.idToNodeMap.get(c[n]).displacementY=0;else{for(u=0,f=0,n=0;n<c.length;n++)if(this.dummyToNodeForHorizontalAlignment.has(c[n])){var p;u+=(p=this.dummyToNodeForHorizontalAlignment.get(c[n])).length*this.idToNodeMap.get(p[0]).displacementY,f+=p.length}else u+=this.idToNodeMap.get(c[n]).displacementY,f++;for(d=u/f,n=0;n<c.length;n++)this.dummyToNodeForHorizontalAlignment.has(c[n])?this.dummyToNodeForHorizontalAlignment.get(c[n]).forEach((function(t){e.idToNodeMap.get(t).displacementY=d})):this.idToNodeMap.get(c[n]).displacementY=d}}},b.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,r=[],_=this.graphManager.getGraphs(),n=_.length;for(t=0;t<n;t++)(e=_[t]).updateConnected(),e.isConnected||(r=r.concat(e.getNodes()));return r},b.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,r=new Set;for(t=0;t<e.length;t++){var _=e[t];if(!r.has(_)){var n=_.getSource(),a=_.getTarget();if(n==a)_.getBendpoints().push(new d),_.getBendpoints().push(new d),this.createDummyNodesForBendpoints(_),r.add(_);else{var i=[];if(i=(i=i.concat(n.getEdgeListToNode(a))).concat(a.getEdgeListToNode(n)),!r.has(i[0])){var o;if(i.length>1)for(o=0;o<i.length;o++){var l=i[o];l.getBendpoints().push(new d),this.createDummyNodesForBendpoints(l)}i.forEach((function(e){r.add(e)}))}}}if(r.size==e.length)break}},b.prototype.positionNodesRadially=function(e){for(var t=new f(0,0),r=Math.ceil(Math.sqrt(e.length)),_=0,n=0,a=0,i=new d(0,0),o=0;o<e.length;o++){o%r==0&&(a=0,n=_,0!=o&&(n+=l.DEFAULT_COMPONENT_SEPERATION),_=0);var s=e[o],c=h.findCenterOfTree(s);t.x=a,t.y=n,(i=b.radialLayout(s,c,t)).y>_&&(_=Math.floor(i.y)),a=Math.floor(i.x+l.DEFAULT_COMPONENT_SEPERATION)}this.transform(new d(u.WORLD_CENTER_X-i.x/2,u.WORLD_CENTER_Y-i.y/2))},b.radialLayout=function(e,t,r){var _=Math.max(this.maxDiagonalInTree(e),l.DEFAULT_RADIAL_SEPARATION);b.branchRadialLayout(t,null,0,359,0,_);var n=m.calculateBounds(e),a=new y;a.setDeviceOrgX(n.getMinX()),a.setDeviceOrgY(n.getMinY()),a.setWorldOrgX(r.x),a.setWorldOrgY(r.y);for(var i=0;i<e.length;i++)e[i].transform(a);var o=new d(n.getMaxX(),n.getMaxY());return a.inverseTransformPoint(o)},b.branchRadialLayout=function(e,t,r,_,n,a){var i=(_-r+1)/2;i<0&&(i+=180);var o=(i+r)%360*v.TWO_PI/360,l=(Math.cos(o),n*Math.cos(o)),s=n*Math.sin(o);e.setCenter(l,s);var c=[],u=(c=c.concat(e.getEdges())).length;null!=t&&u--;for(var f,d=0,p=c.length,h=e.getEdgesBetween(t);h.length>1;){var g=h[0];h.splice(0,1);var m=c.indexOf(g);m>=0&&c.splice(m,1),p--,u--}f=null!=t?(c.indexOf(h[0])+1)%p:0;for(var y=Math.abs(_-r)/u,w=f;d!=u;w=++w%p){var k=c[w].getOtherEnd(e);if(k!=t){var x=(r+d*y)%360,O=(x+y)%360;b.branchRadialLayout(k,e,x,O,n+a,a),d++}}},b.maxDiagonalInTree=function(e){for(var t=g.MIN_VALUE,r=0;r<e.length;r++){var _=e[r].getDiagonal();_>t&&(t=_)}return t},b.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},b.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var r=[],_=this.graphManager.getAllNodes(),n=0;n<_.length;n++){var a=(o=_[n]).getParent();0!==this.getNodeDegreeWithChildren(o)||null!=a.id&&this.getToBeTiled(a)||r.push(o)}for(n=0;n<r.length;n++){var o,l=(o=r[n]).getParent().id;void 0===t[l]&&(t[l]=[]),t[l]=t[l].concat(o)}Object.keys(t).forEach((function(r){if(t[r].length>1){var _="DummyCompound_"+r;e.memberGroups[_]=t[r];var n=t[r][0].getParent(),a=new i(e.graphManager);a.id=_,a.paddingLeft=n.paddingLeft||0,a.paddingRight=n.paddingRight||0,a.paddingBottom=n.paddingBottom||0,a.paddingTop=n.paddingTop||0,e.idToDummyNode[_]=a;var o=e.getGraphManager().add(e.newGraph(),a),l=n.getChild();l.add(a);for(var s=0;s<t[r].length;s++){var c=t[r][s];l.remove(c),o.add(c)}}}))},b.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var r=0;r<this.compoundOrder.length;r++)t[this.compoundOrder[r].id]=this.compoundOrder[r],e[this.compoundOrder[r].id]=[].concat(this.compoundOrder[r].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[r].getChild()),this.compoundOrder[r].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},b.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(r){var _=e.idToDummyNode[r];if(t[r]=e.tileNodes(e.memberGroups[r],_.paddingLeft+_.paddingRight),_.rect.width=t[r].width,_.rect.height=t[r].height,_.setCenter(t[r].centerX,t[r].centerY),_.labelMarginLeft=0,_.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var n=_.rect.width,a=_.rect.height;_.labelWidth&&("left"==_.labelPosHorizontal?(_.rect.x-=_.labelWidth,_.setWidth(n+_.labelWidth),_.labelMarginLeft=_.labelWidth):"center"==_.labelPosHorizontal&&_.labelWidth>n?(_.rect.x-=(_.labelWidth-n)/2,_.setWidth(_.labelWidth),_.labelMarginLeft=(_.labelWidth-n)/2):"right"==_.labelPosHorizontal&&_.setWidth(n+_.labelWidth)),_.labelHeight&&("top"==_.labelPosVertical?(_.rect.y-=_.labelHeight,_.setHeight(a+_.labelHeight),_.labelMarginTop=_.labelHeight):"center"==_.labelPosVertical&&_.labelHeight>a?(_.rect.y-=(_.labelHeight-a)/2,_.setHeight(_.labelHeight),_.labelMarginTop=(_.labelHeight-a)/2):"bottom"==_.labelPosVertical&&_.setHeight(a+_.labelHeight))}}))},b.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],r=t.id,_=t.paddingLeft,n=t.paddingTop,a=t.labelMarginLeft,i=t.labelMarginTop;this.adjustLocations(this.tiledMemberPack[r],t.rect.x,t.rect.y,_,n,a,i)}},b.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach((function(r){var _=e.idToDummyNode[r],n=_.paddingLeft,a=_.paddingTop,i=_.labelMarginLeft,o=_.labelMarginTop;e.adjustLocations(t[r],_.rect.x,_.rect.y,n,a,i,o)}))},b.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var r=e.getChild();if(null==r)return this.toBeTiled[t]=!1,!1;for(var _=r.getNodes(),n=0;n<_.length;n++){var a=_[n];if(this.getNodeDegree(a)>0)return this.toBeTiled[t]=!1,!1;if(null!=a.getChild()){if(!this.getToBeTiled(a))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[a.id]=!1}return this.toBeTiled[t]=!0,!0},b.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),r=0,_=0;_<t.length;_++){var n=t[_];n.getSource().id!==n.getTarget().id&&(r+=1)}return r},b.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var r=e.getChild().getNodes(),_=0;_<r.length;_++){var n=r[_];t+=this.getNodeDegreeWithChildren(n)}return t},b.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},b.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var r=e[t];null!=r.getChild()&&this.fillCompexOrderByDFS(r.getChild().getNodes()),this.getToBeTiled(r)&&this.compoundOrder.push(r)}},b.prototype.adjustLocations=function(e,t,r,_,n,a,i){r+=n+i;for(var o=t+=_+a,l=0;l<e.rows.length;l++){var s=e.rows[l];t=o;for(var c=0,u=0;u<s.length;u++){var f=s[u];f.rect.x=t,f.rect.y=r,t+=f.rect.width+e.horizontalPadding,f.rect.height>c&&(c=f.rect.height)}r+=c+e.verticalPadding}},b.prototype.tileCompoundMembers=function(e,t){var r=this;this.tiledMemberPack=[],Object.keys(e).forEach((function(_){var n=t[_];if(r.tiledMemberPack[_]=r.tileNodes(e[_],n.paddingLeft+n.paddingRight),n.rect.width=r.tiledMemberPack[_].width,n.rect.height=r.tiledMemberPack[_].height,n.setCenter(r.tiledMemberPack[_].centerX,r.tiledMemberPack[_].centerY),n.labelMarginLeft=0,n.labelMarginTop=0,l.NODE_DIMENSIONS_INCLUDE_LABELS){var a=n.rect.width,i=n.rect.height;n.labelWidth&&("left"==n.labelPosHorizontal?(n.rect.x-=n.labelWidth,n.setWidth(a+n.labelWidth),n.labelMarginLeft=n.labelWidth):"center"==n.labelPosHorizontal&&n.labelWidth>a?(n.rect.x-=(n.labelWidth-a)/2,n.setWidth(n.labelWidth),n.labelMarginLeft=(n.labelWidth-a)/2):"right"==n.labelPosHorizontal&&n.setWidth(a+n.labelWidth)),n.labelHeight&&("top"==n.labelPosVertical?(n.rect.y-=n.labelHeight,n.setHeight(i+n.labelHeight),n.labelMarginTop=n.labelHeight):"center"==n.labelPosVertical&&n.labelHeight>i?(n.rect.y-=(n.labelHeight-i)/2,n.setHeight(n.labelHeight),n.labelMarginTop=(n.labelHeight-i)/2):"bottom"==n.labelPosVertical&&n.setHeight(i+n.labelHeight))}}))},b.prototype.tileNodes=function(e,t){var r=this.tileNodesByFavoringDim(e,t,!0),_=this.tileNodesByFavoringDim(e,t,!1),n=this.getOrgRatio(r);return this.getOrgRatio(_)<n?_:r},b.prototype.getOrgRatio=function(e){var t=e.width/e.height;return t<1&&(t=1/t),t},b.prototype.calcIdealRowWidth=function(e,t){var r=l.TILING_PADDING_VERTICAL,_=l.TILING_PADDING_HORIZONTAL,n=e.length,a=0,i=0,o=0;e.forEach((function(e){a+=e.getWidth(),i+=e.getHeight(),e.getWidth()>o&&(o=e.getWidth())}));var s,c=a/n,u=i/n,f=Math.pow(r-_,2)+4*(c+_)*(u+r)*n,d=(_-r+Math.sqrt(f))/(2*(c+_));t?(s=Math.ceil(d))==d&&s++:s=Math.floor(d);var p=s*(c+_)-_;return o>p&&(p=o),p+=2*_},b.prototype.tileNodesByFavoringDim=function(e,t,r){var _=l.TILING_PADDING_VERTICAL,n=l.TILING_PADDING_HORIZONTAL,a=l.TILING_COMPARE_BY,i={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:_,horizontalPadding:n,centerX:0,centerY:0};a&&(i.idealRowWidth=this.calcIdealRowWidth(e,r));var o=function(e){return e.rect.width*e.rect.height},s=function(e,t){return o(t)-o(e)};e.sort((function(e,t){var r=s;return i.idealRowWidth?(r=a)(e.id,t.id):r(e,t)}));for(var c=0,u=0,f=0;f<e.length;f++)c+=(d=e[f]).getCenterX(),u+=d.getCenterY();for(i.centerX=c/e.length,i.centerY=u/e.length,f=0;f<e.length;f++){var d=e[f];if(0==i.rows.length)this.insertNodeToRow(i,d,0,t);else if(this.canAddHorizontal(i,d.rect.width,d.rect.height)){var p=i.rows.length-1;i.idealRowWidth||(p=this.getShortestRowIndex(i)),this.insertNodeToRow(i,d,p,t)}else this.insertNodeToRow(i,d,i.rows.length,t);this.shiftToLastRow(i)}return i},b.prototype.insertNodeToRow=function(e,t,r,_){var n=_;r==e.rows.length&&(e.rows.push([]),e.rowWidth.push(n),e.rowHeight.push(0));var a=e.rowWidth[r]+t.rect.width;e.rows[r].length>0&&(a+=e.horizontalPadding),e.rowWidth[r]=a,e.width<a&&(e.width=a);var i=t.rect.height;r>0&&(i+=e.verticalPadding);var o=0;i>e.rowHeight[r]&&(o=e.rowHeight[r],e.rowHeight[r]=i,o=e.rowHeight[r]-o),e.height+=o,e.rows[r].push(t)},b.prototype.getShortestRowIndex=function(e){for(var t=-1,r=Number.MAX_VALUE,_=0;_<e.rows.length;_++)e.rowWidth[_]<r&&(t=_,r=e.rowWidth[_]);return t},b.prototype.getLongestRowIndex=function(e){for(var t=-1,r=Number.MIN_VALUE,_=0;_<e.rows.length;_++)e.rowWidth[_]>r&&(t=_,r=e.rowWidth[_]);return t},b.prototype.canAddHorizontal=function(e,t,r){if(e.idealRowWidth){var _=e.rows.length-1;return e.rowWidth[_]+t+e.horizontalPadding<=e.idealRowWidth}var n=this.getShortestRowIndex(e);if(n<0)return!0;var a=e.rowWidth[n];if(a+e.horizontalPadding+t<=e.width)return!0;var i,o,l=0;return e.rowHeight[n]<r&&n>0&&(l=r+e.verticalPadding-e.rowHeight[n]),i=e.width-a>=t+e.horizontalPadding?(e.height+l)/(a+t+e.horizontalPadding):(e.height+l)/e.width,l=r+e.verticalPadding,(o=e.width<t?(e.height+l)/t:(e.height+l)/e.width)<1&&(o=1/o),i<1&&(i=1/i),i<o},b.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),r=e.rowWidth.length-1,_=e.rows[t],n=_[_.length-1],a=n.width+e.horizontalPadding;if(e.width-e.rowWidth[r]>a&&t!=r){_.splice(-1,1),e.rows[r].push(n),e.rowWidth[t]=e.rowWidth[t]-a,e.rowWidth[r]=e.rowWidth[r]+a,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var i=Number.MIN_VALUE,o=0;o<_.length;o++)_[o].height>i&&(i=_[o].height);t>0&&(i+=e.verticalPadding);var l=e.rowHeight[t]+e.rowHeight[r];e.rowHeight[t]=i,e.rowHeight[r]<n.height+e.verticalPadding&&(e.rowHeight[r]=n.height+e.verticalPadding);var s=e.rowHeight[t]+e.rowHeight[r];e.height+=s-l,this.shiftToLastRow(e)}},b.prototype.tilingPreLayout=function(){l.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},b.prototype.tilingPostLayout=function(){l.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},b.prototype.reduceTrees=function(){for(var e,t=[],r=!0;r;){var _=this.graphManager.getAllNodes(),n=[];r=!1;for(var a=0;a<_.length;a++)if(1==(e=_[a]).getEdges().length&&!e.getEdges()[0].isInterGraph&&null==e.getChild()){if(l.PURE_INCREMENTAL){var i=e.getEdges()[0].getOtherEnd(e),o=new p(e.getCenterX()-i.getCenterX(),e.getCenterY()-i.getCenterY());n.push([e,e.getEdges()[0],e.getOwner(),o])}else n.push([e,e.getEdges()[0],e.getOwner()]);r=!0}if(1==r){for(var s=[],c=0;c<n.length;c++)1==n[c][0].getEdges().length&&(s.push(n[c]),n[c][0].getOwner().remove(n[c][0]));t.push(s),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},b.prototype.growTree=function(e){for(var t,r=e[e.length-1],_=0;_<r.length;_++)t=r[_],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},b.prototype.findPlaceforPrunedNode=function(e){var t,r,_=e[0];if(r=_==e[1].source?e[1].target:e[1].source,l.PURE_INCREMENTAL)_.setCenter(r.getCenterX()+e[3].getWidth(),r.getCenterY()+e[3].getHeight());else{var n=r.startX,a=r.finishX,i=r.startY,o=r.finishY,s=[0,0,0,0];if(i>0)for(var u=n;u<=a;u++)s[0]+=this.grid[u][i-1].length+this.grid[u][i].length-1;if(a<this.grid.length-1)for(u=i;u<=o;u++)s[1]+=this.grid[a+1][u].length+this.grid[a][u].length-1;if(o<this.grid[0].length-1)for(u=n;u<=a;u++)s[2]+=this.grid[u][o+1].length+this.grid[u][o].length-1;if(n>0)for(u=i;u<=o;u++)s[3]+=this.grid[n-1][u].length+this.grid[n][u].length-1;for(var f,d,p=g.MAX_VALUE,h=0;h<s.length;h++)s[h]<p?(p=s[h],f=1,d=h):s[h]==p&&f++;if(3==f&&0==p)0==s[0]&&0==s[1]&&0==s[2]?t=1:0==s[0]&&0==s[1]&&0==s[3]?t=0:0==s[0]&&0==s[2]&&0==s[3]?t=3:0==s[1]&&0==s[2]&&0==s[3]&&(t=2);else if(2==f&&0==p){var v=Math.floor(2*Math.random());t=0==s[0]&&0==s[1]?0==v?0:1:0==s[0]&&0==s[2]?0==v?0:2:0==s[0]&&0==s[3]?0==v?0:3:0==s[1]&&0==s[2]?0==v?1:2:0==s[1]&&0==s[3]?0==v?1:3:0==v?2:3}else t=4==f&&0==p?v=Math.floor(4*Math.random()):d;0==t?_.setCenter(r.getCenterX(),r.getCenterY()-r.getHeight()/2-c.DEFAULT_EDGE_LENGTH-_.getHeight()/2):1==t?_.setCenter(r.getCenterX()+r.getWidth()/2+c.DEFAULT_EDGE_LENGTH+_.getWidth()/2,r.getCenterY()):2==t?_.setCenter(r.getCenterX(),r.getCenterY()+r.getHeight()/2+c.DEFAULT_EDGE_LENGTH+_.getHeight()/2):_.setCenter(r.getCenterX()-r.getWidth()/2-c.DEFAULT_EDGE_LENGTH-_.getWidth()/2,r.getCenterY())}},e.exports=b},991:(e,t,r)=>{var _=r(551).FDLayoutNode,n=r(551).IMath;function a(e,t,r,n){_.call(this,e,t,r,n)}for(var i in a.prototype=Object.create(_.prototype),_)a[i]=_[i];a.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},a.prototype.propogateDisplacementToChildren=function(e,t){for(var r,_=this.getChild().getNodes(),n=0;n<_.length;n++)null==(r=_[n]).getChild()?(r.displacementX+=e,r.displacementY+=t):r.propogateDisplacementToChildren(e,t)},a.prototype.move=function(){var e=this.graphManager.getLayout();null!=this.child&&0!=this.child.getNodes().length||(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},a.prototype.setPred1=function(e){this.pred1=e},a.prototype.getPred1=function(){return pred1},a.prototype.getPred2=function(){return pred2},a.prototype.setNext=function(e){this.next=e},a.prototype.getNext=function(){return next},a.prototype.setProcessed=function(e){this.processed=e},a.prototype.isProcessed=function(){return processed},e.exports=a},902:(e,t,r)=>{function _(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var n=r(806),a=r(551).LinkedList,i=r(551).Matrix,o=r(551).SVD;function l(){}l.handleConstraints=function(e){var t={};t.fixedNodeConstraint=e.constraints.fixedNodeConstraint,t.alignmentConstraint=e.constraints.alignmentConstraint,t.relativePlacementConstraint=e.constraints.relativePlacementConstraint;for(var r=new Map,l=new Map,s=[],c=[],u=e.getAllNodes(),f=0,d=0;d<u.length;d++){var p=u[d];null==p.getChild()&&(l.set(p.id,f++),s.push(p.getCenterX()),c.push(p.getCenterY()),r.set(p.id,p))}t.relativePlacementConstraint&&t.relativePlacementConstraint.forEach((function(e){e.gap||0==e.gap||(e.left?e.gap=n.DEFAULT_EDGE_LENGTH+r.get(e.left).getWidth()/2+r.get(e.right).getWidth()/2:e.gap=n.DEFAULT_EDGE_LENGTH+r.get(e.top).getHeight()/2+r.get(e.bottom).getHeight()/2)}));var h=function(e){var t=0,r=0;return e.forEach((function(e){t+=s[l.get(e)],r+=c[l.get(e)]})),{x:t/e.size,y:r/e.size}},g=function(e,t,r,n,i){var o=new Map;e.forEach((function(e,t){o.set(t,0)})),e.forEach((function(e,t){e.forEach((function(e){o.set(e.id,o.get(e.id)+1)}))}));var u=new Map,f=new Map,d=new a;o.forEach((function(e,_){0==e?(d.push(_),r||("horizontal"==t?u.set(_,l.has(_)?s[l.get(_)]:n.get(_)):u.set(_,l.has(_)?c[l.get(_)]:n.get(_)))):u.set(_,Number.NEGATIVE_INFINITY),r&&f.set(_,new Set([_]))})),r&&i.forEach((function(e){var _=[];if(e.forEach((function(e){r.has(e)&&_.push(e)})),_.length>0){var a=0;_.forEach((function(e){"horizontal"==t?(u.set(e,l.has(e)?s[l.get(e)]:n.get(e)),a+=u.get(e)):(u.set(e,l.has(e)?c[l.get(e)]:n.get(e)),a+=u.get(e))})),a/=_.length,e.forEach((function(e){r.has(e)||u.set(e,a)}))}else{var i=0;e.forEach((function(e){i+="horizontal"==t?l.has(e)?s[l.get(e)]:n.get(e):l.has(e)?c[l.get(e)]:n.get(e)})),i/=e.length,e.forEach((function(e){u.set(e,i)}))}}));for(var p=function(){var _=d.shift();e.get(_).forEach((function(e){if(u.get(e.id)<u.get(_)+e.gap)if(r&&r.has(e.id)){var a=void 0;if(a="horizontal"==t?l.has(e.id)?s[l.get(e.id)]:n.get(e.id):l.has(e.id)?c[l.get(e.id)]:n.get(e.id),u.set(e.id,a),a<u.get(_)+e.gap){var i=u.get(_)+e.gap-a;f.get(_).forEach((function(e){u.set(e,u.get(e)-i)}))}}else u.set(e.id,u.get(_)+e.gap);o.set(e.id,o.get(e.id)-1),0==o.get(e.id)&&d.push(e.id),r&&f.set(e.id,function(e,t){var r=new Set(e),_=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(_=(i=o.next()).done);_=!0){var l=i.value;r.add(l)}}catch(e){n=!0,a=e}finally{try{!_&&o.return&&o.return()}finally{if(n)throw a}}return r}(f.get(_),f.get(e.id)))}))};0!=d.length;)p();if(r){var h=new Set;e.forEach((function(e,t){0==e.length&&h.add(t)}));var g=[];f.forEach((function(e,t){if(h.has(t)){var n=!1,a=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;r.has(c)&&(n=!0)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}if(!n){var u=!1,f=void 0;g.forEach((function(t,r){t.has([].concat(_(e))[0])&&(u=!0,f=r)})),u?e.forEach((function(e){g[f].add(e)})):g.push(new Set(e))}}})),g.forEach((function(e,r){var _=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,f=!0,d=!1,p=void 0;try{for(var h,g=e[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var v=h.value,m=void 0;m="horizontal"==t?l.has(v)?s[l.get(v)]:n.get(v):l.has(v)?c[l.get(v)]:n.get(v);var y=u.get(v);m<_&&(_=m),m>i&&(i=m),y<a&&(a=y),y>o&&(o=y)}}catch(e){d=!0,p=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw p}}var w=(_+i)/2-(a+o)/2,b=!0,k=!1,x=void 0;try{for(var O,P=e[Symbol.iterator]();!(b=(O=P.next()).done);b=!0){var E=O.value;u.set(E,u.get(E)+w)}}catch(e){k=!0,x=e}finally{try{!b&&P.return&&P.return()}finally{if(k)throw x}}}))}return u},v=function(e){var t=0,r=0,_=0,n=0;if(e.forEach((function(e){e.left?s[l.get(e.left)]-s[l.get(e.right)]>=0?t++:r++:c[l.get(e.top)]-c[l.get(e.bottom)]>=0?_++:n++})),t>r&&_>n)for(var a=0;a<l.size;a++)s[a]=-1*s[a],c[a]=-1*c[a];else if(t>r)for(var i=0;i<l.size;i++)s[i]=-1*s[i];else if(_>n)for(var o=0;o<l.size;o++)c[o]=-1*c[o]},m=function(e){var t=[],r=new a,_=new Set,n=0;return e.forEach((function(a,i){if(!_.has(i)){t[n]=[];var o=i;for(r.push(o),_.add(o),t[n].push(o);0!=r.length;)o=r.shift(),e.get(o).forEach((function(e){_.has(e.id)||(r.push(e.id),_.add(e.id),t[n].push(e.id))}));n++}})),t},y=function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(r).push(e),t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t},w=function(e){var t=new Map;return e.forEach((function(e,r){t.set(r,[])})),e.forEach((function(e,r){e.forEach((function(e){t.get(e.id).push({id:r,gap:e.gap,direction:e.direction})}))})),t},b=[],k=[],x=!1,O=!1,P=new Set,E=new Map,C=new Map,A=[];if(t.fixedNodeConstraint&&t.fixedNodeConstraint.forEach((function(e){P.add(e.nodeId)})),t.relativePlacementConstraint&&(t.relativePlacementConstraint.forEach((function(e){e.left?(E.has(e.left)?E.get(e.left).push({id:e.right,gap:e.gap,direction:"horizontal"}):E.set(e.left,[{id:e.right,gap:e.gap,direction:"horizontal"}]),E.has(e.right)||E.set(e.right,[])):(E.has(e.top)?E.get(e.top).push({id:e.bottom,gap:e.gap,direction:"vertical"}):E.set(e.top,[{id:e.bottom,gap:e.gap,direction:"vertical"}]),E.has(e.bottom)||E.set(e.bottom,[]))})),C=y(E),A=m(C)),n.TRANSFORM_ON_CONSTRAINT_HANDLING){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>1)t.fixedNodeConstraint.forEach((function(e,t){b[t]=[e.position.x,e.position.y],k[t]=[s[l.get(e.nodeId)],c[l.get(e.nodeId)]]})),x=!0;else if(t.alignmentConstraint)!function(){var e=0;if(t.alignmentConstraint.vertical){for(var r=t.alignmentConstraint.vertical,n=function(t){var n=new Set;r[t].forEach((function(e){n.add(e)}));var a=new Set([].concat(_(n)).filter((function(e){return P.has(e)}))),i=void 0;i=a.size>0?s[l.get(a.values().next().value)]:h(n).x,r[t].forEach((function(t){b[e]=[i,c[l.get(t)]],k[e]=[s[l.get(t)],c[l.get(t)]],e++}))},a=0;a<r.length;a++)n(a);x=!0}if(t.alignmentConstraint.horizontal){for(var i=t.alignmentConstraint.horizontal,o=function(t){var r=new Set;i[t].forEach((function(e){r.add(e)}));var n=new Set([].concat(_(r)).filter((function(e){return P.has(e)}))),a=void 0;a=n.size>0?s[l.get(n.values().next().value)]:h(r).y,i[t].forEach((function(t){b[e]=[s[l.get(t)],a],k[e]=[s[l.get(t)],c[l.get(t)]],e++}))},u=0;u<i.length;u++)o(u);x=!0}t.relativePlacementConstraint&&(O=!0)}();else if(t.relativePlacementConstraint){for(var S=0,N=0,T=0;T<A.length;T++)A[T].length>S&&(S=A[T].length,N=T);if(S<C.size/2)v(t.relativePlacementConstraint),x=!1,O=!1;else{var L=new Map,M=new Map,j=[];A[N].forEach((function(e){E.get(e).forEach((function(t){"horizontal"==t.direction?(L.has(e)?L.get(e).push(t):L.set(e,[t]),L.has(t.id)||L.set(t.id,[]),j.push({left:e,right:t.id})):(M.has(e)?M.get(e).push(t):M.set(e,[t]),M.has(t.id)||M.set(t.id,[]),j.push({top:e,bottom:t.id}))}))})),v(j),O=!1;var I=g(L,"horizontal"),D=g(M,"vertical");A[N].forEach((function(e,t){k[t]=[s[l.get(e)],c[l.get(e)]],b[t]=[],I.has(e)?b[t][0]=I.get(e):b[t][0]=s[l.get(e)],D.has(e)?b[t][1]=D.get(e):b[t][1]=c[l.get(e)]})),x=!0}}if(x){for(var R,F=i.transpose(b),z=i.transpose(k),B=0;B<F.length;B++)F[B]=i.multGamma(F[B]),z[B]=i.multGamma(z[B]);var q=i.multMat(F,i.transpose(z)),V=o.svd(q);R=i.multMat(V.V,i.transpose(V.U));for(var G=0;G<l.size;G++){var U=[s[G],c[G]],$=[R[0][0],R[1][0]],W=[R[0][1],R[1][1]];s[G]=i.dotProduct(U,$),c[G]=i.dotProduct(U,W)}O&&v(t.relativePlacementConstraint)}}if(n.ENFORCE_CONSTRAINTS){if(t.fixedNodeConstraint&&t.fixedNodeConstraint.length>0){var H={x:0,y:0};t.fixedNodeConstraint.forEach((function(e,t){var r,_,n={x:s[l.get(e.nodeId)],y:c[l.get(e.nodeId)]},a=e.position,i=(_=n,{x:(r=a).x-_.x,y:r.y-_.y});H.x+=i.x,H.y+=i.y})),H.x/=t.fixedNodeConstraint.length,H.y/=t.fixedNodeConstraint.length,s.forEach((function(e,t){s[t]+=H.x})),c.forEach((function(e,t){c[t]+=H.y})),t.fixedNodeConstraint.forEach((function(e){s[l.get(e.nodeId)]=e.position.x,c[l.get(e.nodeId)]=e.position.y}))}if(t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var Y=t.alignmentConstraint.vertical,X=function(e){var t=new Set;Y[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(_(t)).filter((function(e){return P.has(e)}))),n=void 0;n=r.size>0?s[l.get(r.values().next().value)]:h(t).x,t.forEach((function(e){P.has(e)||(s[l.get(e)]=n)}))},Z=0;Z<Y.length;Z++)X(Z);if(t.alignmentConstraint.horizontal)for(var K=t.alignmentConstraint.horizontal,J=function(e){var t=new Set;K[e].forEach((function(e){t.add(e)}));var r=new Set([].concat(_(t)).filter((function(e){return P.has(e)}))),n=void 0;n=r.size>0?c[l.get(r.values().next().value)]:h(t).y,t.forEach((function(e){P.has(e)||(c[l.get(e)]=n)}))},Q=0;Q<K.length;Q++)J(Q)}t.relativePlacementConstraint&&function(){var e=new Map,r=new Map,_=new Map,n=new Map,a=new Map,i=new Map,o=new Set,u=new Set;if(P.forEach((function(e){o.add(e),u.add(e)})),t.alignmentConstraint){if(t.alignmentConstraint.vertical)for(var f=t.alignmentConstraint.vertical,d=function(t){_.set("dummy"+t,[]),f[t].forEach((function(r){e.set(r,"dummy"+t),_.get("dummy"+t).push(r),P.has(r)&&o.add("dummy"+t)})),a.set("dummy"+t,s[l.get(f[t][0])])},p=0;p<f.length;p++)d(p);if(t.alignmentConstraint.horizontal)for(var h=t.alignmentConstraint.horizontal,v=function(e){n.set("dummy"+e,[]),h[e].forEach((function(t){r.set(t,"dummy"+e),n.get("dummy"+e).push(t),P.has(t)&&u.add("dummy"+e)})),i.set("dummy"+e,c[l.get(h[e][0])])},b=0;b<h.length;b++)v(b)}var k=new Map,x=new Map,O=function(t){E.get(t).forEach((function(_){var n=void 0,a=void 0;"horizontal"==_.direction?(n=e.get(t)?e.get(t):t,a=e.get(_.id)?{id:e.get(_.id),gap:_.gap,direction:_.direction}:_,k.has(n)?k.get(n).push(a):k.set(n,[a]),k.has(a.id)||k.set(a.id,[])):(n=r.get(t)?r.get(t):t,a=r.get(_.id)?{id:r.get(_.id),gap:_.gap,direction:_.direction}:_,x.has(n)?x.get(n).push(a):x.set(n,[a]),x.has(a.id)||x.set(a.id,[]))}))},C=!0,A=!1,S=void 0;try{for(var N,T=E.keys()[Symbol.iterator]();!(C=(N=T.next()).done);C=!0)O(N.value)}catch(e){A=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(A)throw S}}var L=y(k),M=y(x),j=m(L),I=m(M),D=w(k),R=w(x),F=[],z=[];j.forEach((function(e,t){F[t]=[],e.forEach((function(e){0==D.get(e).length&&F[t].push(e)}))})),I.forEach((function(e,t){z[t]=[],e.forEach((function(e){0==R.get(e).length&&z[t].push(e)}))}));var B=g(k,"horizontal",o,a,F),q=g(x,"vertical",u,i,z),V=function(e){_.get(e)?_.get(e).forEach((function(t){s[l.get(t)]=B.get(e)})):s[l.get(e)]=B.get(e)},G=!0,U=!1,$=void 0;try{for(var W,H=B.keys()[Symbol.iterator]();!(G=(W=H.next()).done);G=!0)V(W.value)}catch(e){U=!0,$=e}finally{try{!G&&H.return&&H.return()}finally{if(U)throw $}}var Y=function(e){n.get(e)?n.get(e).forEach((function(t){c[l.get(t)]=q.get(e)})):c[l.get(e)]=q.get(e)},X=!0,Z=!1,K=void 0;try{for(var J,Q=q.keys()[Symbol.iterator]();!(X=(J=Q.next()).done);X=!0)Y(J.value)}catch(e){Z=!0,K=e}finally{try{!X&&Q.return&&Q.return()}finally{if(Z)throw K}}}()}for(var ee=0;ee<u.length;ee++){var te=u[ee];null==te.getChild()&&te.setCenter(s[l.get(te.id)],c[l.get(te.id)])}},e.exports=l},551:t=>{t.exports=e}},r={},function e(_){var n=r[_];if(void 0!==n)return n.exports;var a=r[_]={exports:{}};return t[_](a,a.exports,e),a.exports}(45);var t,r},e.exports=r(a("9ty7o"))})),i("9ty7o",(function(e,t){var r;e.exports,r=function(){return function(e){var t={};function r(_){if(t[_])return t[_].exports;var n=t[_]={i:_,l:!1,exports:{}};return e[_].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,_){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:_})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t,r){function _(){}_.QUALITY=1,_.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,_.DEFAULT_INCREMENTAL=!1,_.DEFAULT_ANIMATION_ON_LAYOUT=!0,_.DEFAULT_ANIMATION_DURING_LAYOUT=!1,_.DEFAULT_ANIMATION_PERIOD=50,_.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,_.DEFAULT_GRAPH_MARGIN=15,_.NODE_DIMENSIONS_INCLUDE_LABELS=!1,_.SIMPLE_NODE_SIZE=40,_.SIMPLE_NODE_HALF_SIZE=_.SIMPLE_NODE_SIZE/2,_.EMPTY_COMPOUND_NODE_SIZE=40,_.MIN_EDGE_LENGTH=1,_.WORLD_BOUNDARY=1e6,_.INITIAL_WORLD_BOUNDARY=_.WORLD_BOUNDARY/1e3,_.WORLD_CENTER_X=1200,_.WORLD_CENTER_Y=900,e.exports=_},function(e,t,r){var _=r(2),n=r(8),a=r(9);function i(e,t,r){_.call(this,r),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=r,this.bendpoints=[],this.source=e,this.target=t}for(var o in i.prototype=Object.create(_.prototype),_)i[o]=_[o];i.prototype.getSource=function(){return this.source},i.prototype.getTarget=function(){return this.target},i.prototype.isInterGraph=function(){return this.isInterGraph},i.prototype.getLength=function(){return this.length},i.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},i.prototype.getBendpoints=function(){return this.bendpoints},i.prototype.getLca=function(){return this.lca},i.prototype.getSourceInLca=function(){return this.sourceInLca},i.prototype.getTargetInLca=function(){return this.targetInLca},i.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},i.prototype.getOtherEndInGraph=function(e,t){for(var r=this.getOtherEnd(e),_=t.getGraphManager().getRoot();;){if(r.getOwner()==t)return r;if(r.getOwner()==_)break;r=r.getOwner().getParent()}return null},i.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=n.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},i.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=a.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=a.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=i},function(e,t,r){e.exports=function(e){this.vGraphObject=e}},function(e,t,r){var _=r(2),n=r(10),a=r(13),i=r(0),o=r(16),l=r(5);function s(e,t,r,i){null==r&&null==i&&(i=t),_.call(this,i),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=n.MIN_VALUE,this.inclusionTreeDepth=n.MAX_VALUE,this.vGraphObject=i,this.edges=[],this.graphManager=e,this.rect=null!=r&&null!=t?new a(t.x,t.y,r.width,r.height):new a}for(var c in s.prototype=Object.create(_.prototype),_)s[c]=_[c];s.prototype.getEdges=function(){return this.edges},s.prototype.getChild=function(){return this.child},s.prototype.getOwner=function(){return this.owner},s.prototype.getWidth=function(){return this.rect.width},s.prototype.setWidth=function(e){this.rect.width=e},s.prototype.getHeight=function(){return this.rect.height},s.prototype.setHeight=function(e){this.rect.height=e},s.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},s.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},s.prototype.getCenter=function(){return new l(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},s.prototype.getLocation=function(){return new l(this.rect.x,this.rect.y)},s.prototype.getRect=function(){return this.rect},s.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},s.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},s.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},s.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},s.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},s.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},s.prototype.getEdgeListToNode=function(e){var t=[],r=this;return r.edges.forEach((function(_){if(_.target==e){if(_.source!=r)throw"Incorrect edge source!";t.push(_)}})),t},s.prototype.getEdgesBetween=function(e){var t=[],r=this;return r.edges.forEach((function(_){if(_.source!=r&&_.target!=r)throw"Incorrect edge source and/or target";_.target!=e&&_.source!=e||t.push(_)})),t},s.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach((function(r){if(r.source==t)e.add(r.target);else{if(r.target!=t)throw"Incorrect incidency!";e.add(r.source)}})),e},s.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),r=0;r<t.length;r++)t[r].withChildren().forEach((function(t){e.add(t)}));return e},s.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),r=0;r<t.length;r++)e+=t[r].getNoOfChildren();return 0==e&&(e=1),e},s.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},s.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},s.prototype.scatter=function(){var e,t,r=-i.INITIAL_WORLD_BOUNDARY,_=i.INITIAL_WORLD_BOUNDARY;e=i.WORLD_CENTER_X+o.nextDouble()*(_-r)+r;var n=-i.INITIAL_WORLD_BOUNDARY,a=i.INITIAL_WORLD_BOUNDARY;t=i.WORLD_CENTER_Y+o.nextDouble()*(a-n)+n,this.rect.x=e,this.rect.y=t},s.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),i.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),r=e.getBottom()-e.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(t+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(r+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>r?(this.rect.y-=(this.labelHeight-r)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(r+this.labelHeight))}}},s.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==n.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},s.prototype.transform=function(e){var t=this.rect.x;t>i.WORLD_BOUNDARY?t=i.WORLD_BOUNDARY:t<-i.WORLD_BOUNDARY&&(t=-i.WORLD_BOUNDARY);var r=this.rect.y;r>i.WORLD_BOUNDARY?r=i.WORLD_BOUNDARY:r<-i.WORLD_BOUNDARY&&(r=-i.WORLD_BOUNDARY);var _=new l(t,r),n=e.inverseTransformPoint(_);this.setLocation(n.x,n.y)},s.prototype.getLeft=function(){return this.rect.x},s.prototype.getRight=function(){return this.rect.x+this.rect.width},s.prototype.getTop=function(){return this.rect.y},s.prototype.getBottom=function(){return this.rect.y+this.rect.height},s.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=s},function(e,t,r){var _=r(0);function n(){}for(var a in _)n[a]=_[a];n.MAX_ITERATIONS=2500,n.DEFAULT_EDGE_LENGTH=50,n.DEFAULT_SPRING_STRENGTH=.45,n.DEFAULT_REPULSION_STRENGTH=4500,n.DEFAULT_GRAVITY_STRENGTH=.4,n.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,n.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,n.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,n.COOLING_ADAPTATION_FACTOR=.33,n.ADAPTATION_LOWER_NODE_LIMIT=1e3,n.ADAPTATION_UPPER_NODE_LIMIT=5e3,n.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,n.MAX_NODE_DISPLACEMENT=3*n.MAX_NODE_DISPLACEMENT_INCREMENTAL,n.MIN_REPULSION_DIST=n.DEFAULT_EDGE_LENGTH/10,n.CONVERGENCE_CHECK_PERIOD=100,n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,n.MIN_EDGE_LENGTH=1,n.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=n},function(e,t,r){function _(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}_.prototype.getX=function(){return this.x},_.prototype.getY=function(){return this.y},_.prototype.setX=function(e){this.x=e},_.prototype.setY=function(e){this.y=e},_.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},_.prototype.getCopy=function(){return new _(this.x,this.y)},_.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=_},function(e,t,r){var _=r(2),n=r(10),a=r(0),i=r(7),o=r(3),l=r(1),s=r(13),c=r(12),u=r(11);function f(e,t,r){_.call(this,r),this.estimatedSize=n.MIN_VALUE,this.margin=a.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof i?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var d in f.prototype=Object.create(_.prototype),_)f[d]=_[d];f.prototype.getNodes=function(){return this.nodes},f.prototype.getEdges=function(){return this.edges},f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getParent=function(){return this.parent},f.prototype.getLeft=function(){return this.left},f.prototype.getRight=function(){return this.right},f.prototype.getTop=function(){return this.top},f.prototype.getBottom=function(){return this.bottom},f.prototype.isConnected=function(){return this.isConnected},f.prototype.add=function(e,t,r){if(null==t&&null==r){var _=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(_)>-1)throw"Node already in graph!";return _.owner=this,this.getNodes().push(_),_}var n=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(r)>-1))throw"Source or target not in graph!";if(t.owner!=r.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=r.owner?null:(n.source=t,n.target=r,n.isInterGraph=!1,this.getEdges().push(n),t.edges.push(n),r!=t&&r.edges.push(n),n)},f.prototype.remove=function(e){var t=e;if(e instanceof o){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var r=t.edges.slice(),_=r.length,n=0;n<_;n++)(a=r[n]).isInterGraph?this.graphManager.remove(a):a.source.owner.remove(a);if(-1==(i=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(i,1)}else if(e instanceof l){var a;if(null==(a=e))throw"Edge is null!";if(null==a.source||null==a.target)throw"Source and/or target is null!";if(null==a.source.owner||null==a.target.owner||a.source.owner!=this||a.target.owner!=this)throw"Source and/or target owner is invalid!";var i,s=a.source.edges.indexOf(a),c=a.target.edges.indexOf(a);if(!(s>-1&&c>-1))throw"Source and/or target doesn't know this edge!";if(a.source.edges.splice(s,1),a.target!=a.source&&a.target.edges.splice(c,1),-1==(i=a.source.owner.getEdges().indexOf(a)))throw"Not in owner's edge list!";a.source.owner.getEdges().splice(i,1)}},f.prototype.updateLeftTop=function(){for(var e,t,r,_=n.MAX_VALUE,a=n.MAX_VALUE,i=this.getNodes(),o=i.length,l=0;l<o;l++){var s=i[l];_>(e=s.getTop())&&(_=e),a>(t=s.getLeft())&&(a=t)}return _==n.MAX_VALUE?null:(r=null!=i[0].getParent().paddingLeft?i[0].getParent().paddingLeft:this.margin,this.left=a-r,this.top=_-r,new c(this.left,this.top))},f.prototype.updateBounds=function(e){for(var t,r,_,a,i,o=n.MAX_VALUE,l=-n.MAX_VALUE,c=n.MAX_VALUE,u=-n.MAX_VALUE,f=this.nodes,d=f.length,p=0;p<d;p++){var h=f[p];e&&null!=h.child&&h.updateBounds(),o>(t=h.getLeft())&&(o=t),l<(r=h.getRight())&&(l=r),c>(_=h.getTop())&&(c=_),u<(a=h.getBottom())&&(u=a)}var g=new s(o,c,l-o,u-c);o==n.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),i=null!=f[0].getParent().paddingLeft?f[0].getParent().paddingLeft:this.margin,this.left=g.x-i,this.right=g.x+g.width+i,this.top=g.y-i,this.bottom=g.y+g.height+i},f.calculateBounds=function(e){for(var t,r,_,a,i=n.MAX_VALUE,o=-n.MAX_VALUE,l=n.MAX_VALUE,c=-n.MAX_VALUE,u=e.length,f=0;f<u;f++){var d=e[f];i>(t=d.getLeft())&&(i=t),o<(r=d.getRight())&&(o=r),l>(_=d.getTop())&&(l=_),c<(a=d.getBottom())&&(c=a)}return new s(i,l,o-i,c-l)},f.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,r=t.length,_=0;_<r;_++)e+=t[_].calcEstimatedSize();return this.estimatedSize=0==e?a.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},f.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,r,_=new u,n=new Set,a=this.nodes[0];for(a.withChildren().forEach((function(e){_.push(e),n.add(e)}));0!==_.length;)for(var i=(t=(a=_.shift()).getEdges()).length,o=0;o<i;o++)null==(r=t[o].getOtherEndInGraph(a,this))||n.has(r)||r.withChildren().forEach((function(e){_.push(e),n.add(e)}));if(this.isConnected=!1,n.size>=this.nodes.length){var l=0;n.forEach((function(t){t.owner==e&&l++})),l==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=f},function(e,t,r){var _,n=r(1);function a(e){_=r(6),this.layout=e,this.graphs=[],this.edges=[]}a.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),r=this.add(e,t);return this.setRootGraph(r),this.rootGraph},a.prototype.add=function(e,t,r,_,n){if(null==r&&null==_&&null==n){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}n=r,r=e;var a=(_=t).getOwner(),i=n.getOwner();if(null==a||a.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==i||i.getGraphManager()!=this)throw"Target not in this graph mgr!";if(a==i)return r.isInterGraph=!1,a.add(r,_,n);if(r.isInterGraph=!0,r.source=_,r.target=n,this.edges.indexOf(r)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(r),null==r.source||null==r.target)throw"Edge source and/or target is null!";if(-1!=r.source.edges.indexOf(r)||-1!=r.target.edges.indexOf(r))throw"Edge already in source and/or target incidency list!";return r.source.edges.push(r),r.target.edges.push(r),r},a.prototype.remove=function(e){if(e instanceof _){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var r,a=[],i=(a=a.concat(t.getEdges())).length,o=0;o<i;o++)r=a[o],t.remove(r);var l,s=[];for(i=(s=s.concat(t.getNodes())).length,o=0;o<i;o++)l=s[o],t.remove(l);t==this.rootGraph&&this.setRootGraph(null);var c=this.graphs.indexOf(t);this.graphs.splice(c,1),t.parent=null}else if(e instanceof n){if(null==(r=e))throw"Edge is null!";if(!r.isInterGraph)throw"Not an inter-graph edge!";if(null==r.source||null==r.target)throw"Source and/or target is null!";if(-1==r.source.edges.indexOf(r)||-1==r.target.edges.indexOf(r))throw"Source and/or target doesn't know this edge!";if(c=r.source.edges.indexOf(r),r.source.edges.splice(c,1),c=r.target.edges.indexOf(r),r.target.edges.splice(c,1),null==r.source.owner||null==r.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==r.source.owner.getGraphManager().edges.indexOf(r))throw"Not in owner graph manager's edge list!";c=r.source.owner.getGraphManager().edges.indexOf(r),r.source.owner.getGraphManager().edges.splice(c,1)}},a.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},a.prototype.getGraphs=function(){return this.graphs},a.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),r=t.length,_=0;_<r;_++)e=e.concat(t[_].getNodes());this.allNodes=e}return this.allNodes},a.prototype.resetAllNodes=function(){this.allNodes=null},a.prototype.resetAllEdges=function(){this.allEdges=null},a.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},a.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),r=(t.length,0);r<t.length;r++)e=e.concat(t[r].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},a.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},a.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},a.prototype.getRoot=function(){return this.rootGraph},a.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},a.prototype.getLayout=function(){return this.layout},a.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var r,_=e.getOwner();null!=(r=_.getParent());){if(r==t)return!0;if(null==(_=r.getOwner()))break}for(_=t.getOwner();null!=(r=_.getParent());){if(r==e)return!0;if(null==(_=r.getOwner()))break}return!1},a.prototype.calcLowestCommonAncestors=function(){for(var e,t,r,_,n,a=this.getAllEdges(),i=a.length,o=0;o<i;o++)if(t=(e=a[o]).source,r=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=r,t!=r){for(_=t.getOwner();null==e.lca;){for(e.targetInLca=r,n=r.getOwner();null==e.lca;){if(n==_){e.lca=n;break}if(n==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=n.getParent(),n=e.targetInLca.getOwner()}if(_==this.rootGraph)break;null==e.lca&&(e.sourceInLca=_.getParent(),_=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},a.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var r=e.getOwner();null!=r;){for(var _=t.getOwner();null!=_;){if(_==r)return _;_=_.getParent().getOwner()}r=r.getParent().getOwner()}return r},a.prototype.calcInclusionTreeDepths=function(e,t){var r;null==e&&null==t&&(e=this.rootGraph,t=1);for(var _=e.getNodes(),n=_.length,a=0;a<n;a++)(r=_[a]).inclusionTreeDepth=t,null!=r.child&&this.calcInclusionTreeDepths(r.child,t+1)},a.prototype.includesInvalidEdge=function(){for(var e,t=[],r=this.edges.length,_=0;_<r;_++)e=this.edges[_],this.isOneAncestorOfOther(e.source,e.target)&&t.push(e);for(_=0;_<t.length;_++)this.remove(t[_]);return!1},e.exports=a},function(e,t,r){var _=r(12);function n(){}n.calcSeparationAmount=function(e,t,r,_){if(!e.intersects(t))throw"assert failed";var n=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,n),r[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),r[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var a=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(a=1);var i=a*r[0],o=r[1]/a;r[0]<o?o=r[0]:i=r[1],r[0]=-1*n[0]*(o/2+_),r[1]=-1*n[1]*(i/2+_)},n.decideDirectionsForOverlappingNodes=function(e,t,r){e.getCenterX()<t.getCenterX()?r[0]=-1:r[0]=1,e.getCenterY()<t.getCenterY()?r[1]=-1:r[1]=1},n.getIntersection2=function(e,t,r){var _=e.getCenterX(),n=e.getCenterY(),a=t.getCenterX(),i=t.getCenterY();if(e.intersects(t))return r[0]=_,r[1]=n,r[2]=a,r[3]=i,!0;var o=e.getX(),l=e.getY(),s=e.getRight(),c=e.getX(),u=e.getBottom(),f=e.getRight(),d=e.getWidthHalf(),p=e.getHeightHalf(),h=t.getX(),g=t.getY(),v=t.getRight(),m=t.getX(),y=t.getBottom(),w=t.getRight(),b=t.getWidthHalf(),k=t.getHeightHalf(),x=!1,O=!1;if(_===a){if(n>i)return r[0]=_,r[1]=l,r[2]=a,r[3]=y,!1;if(n<i)return r[0]=_,r[1]=u,r[2]=a,r[3]=g,!1}else if(n===i){if(_>a)return r[0]=o,r[1]=n,r[2]=v,r[3]=i,!1;if(_<a)return r[0]=s,r[1]=n,r[2]=h,r[3]=i,!1}else{var P=e.height/e.width,E=t.height/t.width,C=(i-n)/(a-_),A=void 0,S=void 0,N=void 0,T=void 0,L=void 0,M=void 0;if(-P===C?_>a?(r[0]=c,r[1]=u,x=!0):(r[0]=s,r[1]=l,x=!0):P===C&&(_>a?(r[0]=o,r[1]=l,x=!0):(r[0]=f,r[1]=u,x=!0)),-E===C?a>_?(r[2]=m,r[3]=y,O=!0):(r[2]=v,r[3]=g,O=!0):E===C&&(a>_?(r[2]=h,r[3]=g,O=!0):(r[2]=w,r[3]=y,O=!0)),x&&O)return!1;if(_>a?n>i?(A=this.getCardinalDirection(P,C,4),S=this.getCardinalDirection(E,C,2)):(A=this.getCardinalDirection(-P,C,3),S=this.getCardinalDirection(-E,C,1)):n>i?(A=this.getCardinalDirection(-P,C,1),S=this.getCardinalDirection(-E,C,3)):(A=this.getCardinalDirection(P,C,2),S=this.getCardinalDirection(E,C,4)),!x)switch(A){case 1:T=l,N=_+-p/C,r[0]=N,r[1]=T;break;case 2:N=f,T=n+d*C,r[0]=N,r[1]=T;break;case 3:T=u,N=_+p/C,r[0]=N,r[1]=T;break;case 4:N=c,T=n+-d*C,r[0]=N,r[1]=T}if(!O)switch(S){case 1:M=g,L=a+-k/C,r[2]=L,r[3]=M;break;case 2:L=w,M=i+b*C,r[2]=L,r[3]=M;break;case 3:M=y,L=a+k/C,r[2]=L,r[3]=M;break;case 4:L=m,M=i+-b*C,r[2]=L,r[3]=M}}return!1},n.getCardinalDirection=function(e,t,r){return e>t?r:1+r%4},n.getIntersection=function(e,t,r,n){if(null==n)return this.getIntersection2(e,t,r);var a,i,o,l,s,c,u,f=e.x,d=e.y,p=t.x,h=t.y,g=r.x,v=r.y,m=n.x,y=n.y;return 0==(u=(a=h-d)*(l=g-m)-(i=y-v)*(o=f-p))?null:new _((o*(c=m*v-g*y)-l*(s=p*d-f*h))/u,(i*s-a*c)/u)},n.angleOfVector=function(e,t,r,_){var n=void 0;return e!==r?(n=Math.atan((_-t)/(r-e)),r<e?n+=Math.PI:_<t&&(n+=this.TWO_PI)):n=_<t?this.ONE_AND_HALF_PI:this.HALF_PI,n},n.doIntersect=function(e,t,r,_){var n=e.x,a=e.y,i=t.x,o=t.y,l=r.x,s=r.y,c=_.x,u=_.y,f=(i-n)*(u-s)-(c-l)*(o-a);if(0===f)return!1;var d=((u-s)*(c-n)+(l-c)*(u-a))/f,p=((a-o)*(c-n)+(i-n)*(u-a))/f;return 0<d&&d<1&&0<p&&p<1},n.findCircleLineIntersections=function(e,t,r,_,n,a,i){var o=(r-e)*(r-e)+(_-t)*(_-t),l=2*((e-n)*(r-e)+(t-a)*(_-t)),s=(e-n)*(e-n)+(t-a)*(t-a)-i*i;if(l*l-4*o*s>=0){var c=(-l+Math.sqrt(l*l-4*o*s))/(2*o),u=(-l-Math.sqrt(l*l-4*o*s))/(2*o);return c>=0&&c<=1?[c]:u>=0&&u<=1?[u]:null}return null},n.HALF_PI=.5*Math.PI,n.ONE_AND_HALF_PI=1.5*Math.PI,n.TWO_PI=2*Math.PI,n.THREE_PI=3*Math.PI,e.exports=n},function(e,t,r){function _(){}_.sign=function(e){return e>0?1:e<0?-1:0},_.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},_.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=_},function(e,t,r){function _(){}_.MAX_VALUE=2147483647,_.MIN_VALUE=-2147483648,e.exports=_},function(e,t,r){var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var _=t[r];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}return function(t,r,_){return r&&e(t.prototype,r),_&&e(t,_),t}}(),n=function(e){return{value:e,next:null,prev:null}},a=function(e,t,r,_){return null!==e?e.next=t:_.head=t,null!==r?r.prev=t:_.tail=t,t.prev=e,t.next=r,_.length++,t},i=function(e,t){var r=e.prev,_=e.next;return null!==r?r.next=_:t.head=_,null!==_?_.prev=r:t.tail=r,e.prev=e.next=null,t.length--,e},o=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.length=0,this.head=null,this.tail=null,null!=t&&t.forEach((function(e){return r.push(e)}))}return _(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(e,t){return a(t.prev,n(e),t,this)}},{key:"insertAfter",value:function(e,t){return a(t,n(e),t.next,this)}},{key:"insertNodeBefore",value:function(e,t){return a(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function(e,t){return a(t,e,t.next,this)}},{key:"push",value:function(e){return a(this.tail,n(e),null,this)}},{key:"unshift",value:function(e){return a(null,n(e),this.head,this)}},{key:"remove",value:function(e){return i(e,this)}},{key:"pop",value:function(){return i(this.tail,this).value}},{key:"popNode",value:function(){return i(this.tail,this)}},{key:"shift",value:function(){return i(this.head,this).value}},{key:"shiftNode",value:function(){return i(this.head,this)}},{key:"get_object_at",value:function(e){if(e<=this.length()){for(var t=1,r=this.head;t<e;)r=r.next,t++;return r.value}}},{key:"set_object_at",value:function(e,t){if(e<=this.length()){for(var r=1,_=this.head;r<e;)_=_.next,r++;_.value=t}}}]),e}();e.exports=o},function(e,t,r){function _(e,t,r){this.x=null,this.y=null,null==e&&null==t&&null==r?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==r?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==r&&(r=e,this.x=r.x,this.y=r.y)}_.prototype.getX=function(){return this.x},_.prototype.getY=function(){return this.y},_.prototype.getLocation=function(){return new _(this.x,this.y)},_.prototype.setLocation=function(e,t,r){"Point"==e.constructor.name&&null==t&&null==r?(r=e,this.setLocation(r.x,r.y)):"number"==typeof e&&"number"==typeof t&&null==r&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},_.prototype.move=function(e,t){this.x=e,this.y=t},_.prototype.translate=function(e,t){this.x+=e,this.y+=t},_.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},_.prototype.toString=function(){return(new _).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=_},function(e,t,r){function _(e,t,r,_){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=r&&null!=_&&(this.x=e,this.y=t,this.width=r,this.height=_)}_.prototype.getX=function(){return this.x},_.prototype.setX=function(e){this.x=e},_.prototype.getY=function(){return this.y},_.prototype.setY=function(e){this.y=e},_.prototype.getWidth=function(){return this.width},_.prototype.setWidth=function(e){this.width=e},_.prototype.getHeight=function(){return this.height},_.prototype.setHeight=function(e){this.height=e},_.prototype.getRight=function(){return this.x+this.width},_.prototype.getBottom=function(){return this.y+this.height},_.prototype.intersects=function(e){return!(this.getRight()<e.x||this.getBottom()<e.y||e.getRight()<this.x||e.getBottom()<this.y)},_.prototype.getCenterX=function(){return this.x+this.width/2},_.prototype.getMinX=function(){return this.getX()},_.prototype.getMaxX=function(){return this.getX()+this.width},_.prototype.getCenterY=function(){return this.y+this.height/2},_.prototype.getMinY=function(){return this.getY()},_.prototype.getMaxY=function(){return this.getY()+this.height},_.prototype.getWidthHalf=function(){return this.width/2},_.prototype.getHeightHalf=function(){return this.height/2},e.exports=_},function(e,t,r){var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(){}n.lastID=0,n.createID=function(e){return n.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=n.getString(),n.lastID++),e.uniqueID)},n.getString=function(e){return null==e&&(e=n.lastID),"Object#"+e},n.isPrimitive=function(e){var t=void 0===e?"undefined":_(e);return null==e||"object"!=t&&"function"!=t},e.exports=n},function(e,t,r){function _(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var n=r(0),a=r(7),i=r(3),o=r(1),l=r(6),s=r(5),c=r(17),u=r(29);function f(e){u.call(this),this.layoutQuality=n.QUALITY,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=n.DEFAULT_INCREMENTAL,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}f.RANDOM_SEED=1,f.prototype=Object.create(u.prototype),f.prototype.getGraphManager=function(){return this.graphManager},f.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},f.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},f.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},f.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},f.prototype.newGraph=function(e){return new l(null,this.graphManager,e)},f.prototype.newNode=function(e){return new i(this.graphManager,e)},f.prototype.newEdge=function(e){return new o(null,null,e)},f.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},f.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==n.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},f.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},f.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var r=this.graphManager.getRoot().getNodes();for(t=0;t<r.length;t++)r[t];this.update(this.graphManager.getRoot())}},f.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof i){var t=e;if(null!=t.getChild())for(var r=t.getChild().getNodes(),_=0;_<r.length;_++)update(r[_]);null!=t.vGraphObject&&t.vGraphObject.update(t)}else if(e instanceof o){var n=e;null!=n.vGraphObject&&n.vGraphObject.update(n)}else if(e instanceof l){var a=e;null!=a.vGraphObject&&a.vGraphObject.update(a)}},f.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=n.QUALITY,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=n.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},f.prototype.transform=function(e){if(null==e)this.transform(new s(0,0));else{var t=new c,r=this.graphManager.getRoot().updateLeftTop();if(null!=r){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(r.x),t.setDeviceOrgY(r.y);for(var _=this.getAllNodes(),n=0;n<_.length;n++)_[n].transform(t)}}},f.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,r,_=e.getNodes(),n=0;n<_.length;n++)null==(r=(t=_[n]).getChild())||0==r.getNodes().length?t.scatter():(this.positionNodesRandomly(r),t.updateBounds())},f.prototype.getFlatForest=function(){for(var e=[],t=!0,r=this.graphManager.getRoot().getNodes(),n=!0,a=0;a<r.length;a++)null!=r[a].getChild()&&(n=!1);if(!n)return e;var i=new Set,o=[],l=new Map,s=[];for(s=s.concat(r);s.length>0&&t;){for(o.push(s[0]);o.length>0&&t;){var c=o[0];o.splice(0,1),i.add(c);var u=c.getEdges();for(a=0;a<u.length;a++){var f=u[a].getOtherEnd(c);if(l.get(c)!=f){if(i.has(f)){t=!1;break}o.push(f),l.set(f,c)}}}if(t){var d=[].concat(_(i));for(e.push(d),a=0;a<d.length;a++){var p=d[a],h=s.indexOf(p);h>-1&&s.splice(h,1)}i=new Set,l=new Map}else e=[]}return e},f.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],r=e.source,_=this.graphManager.calcLowestCommonAncestor(e.source,e.target),n=0;n<e.bendpoints.length;n++){var a=this.newNode(null);a.setRect(new Point(0,0),new Dimension(1,1)),_.add(a);var i=this.newEdge(null);this.graphManager.add(i,r,a),t.add(a),r=a}return i=this.newEdge(null),this.graphManager.add(i,r,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):_.remove(e),t},f.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(_(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var r=e[t];if(r.bendpoints.length>0){for(var n=this.edgeToDummyNodes.get(r),a=0;a<n.length;a++){var i=n[a],o=new s(i.getCenterX(),i.getCenterY()),l=r.bendpoints.get(a);l.x=o.x,l.y=o.y,i.getOwner().remove(i)}this.graphManager.add(r,r.source,r.target)}}},f.transform=function(e,t,r,_){if(null!=r&&null!=_){var n=t;return e<=50?n-=(t-t/r)/50*(50-e):n+=(t*_-t)/50*(e-50),n}var a,i;return e<=50?(a=9*t/500,i=t/10):(a=9*t/50,i=-8*t),a*e+i},f.findCenterOfTree=function(e){var t=[];t=t.concat(e);var r=[],_=new Map,n=!1,a=null;1!=t.length&&2!=t.length||(n=!0,a=t[0]);for(var i=0;i<t.length;i++){var o=(c=t[i]).getNeighborsList().size;_.set(c,c.getNeighborsList().size),1==o&&r.push(c)}var l=[];for(l=l.concat(r);!n;){var s=[];for(s=s.concat(l),l=[],i=0;i<t.length;i++){var c=t[i],u=t.indexOf(c);u>=0&&t.splice(u,1),c.getNeighborsList().forEach((function(e){if(r.indexOf(e)<0){var t=_.get(e)-1;1==t&&l.push(e),_.set(e,t)}}))}r=r.concat(l),1!=t.length&&2!=t.length||(n=!0,a=t[0])}return a},f.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=f},function(e,t,r){function _(){}_.seed=1,_.x=0,_.nextDouble=function(){return _.x=1e4*Math.sin(_.seed++),_.x-Math.floor(_.x)},e.exports=_},function(e,t,r){var _=r(5);function n(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}n.prototype.getWorldOrgX=function(){return this.lworldOrgX},n.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},n.prototype.getWorldOrgY=function(){return this.lworldOrgY},n.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},n.prototype.getWorldExtX=function(){return this.lworldExtX},n.prototype.setWorldExtX=function(e){this.lworldExtX=e},n.prototype.getWorldExtY=function(){return this.lworldExtY},n.prototype.setWorldExtY=function(e){this.lworldExtY=e},n.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},n.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},n.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},n.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},n.prototype.getDeviceExtX=function(){return this.ldeviceExtX},n.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},n.prototype.getDeviceExtY=function(){return this.ldeviceExtY},n.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},n.prototype.transformX=function(e){var t=0,r=this.lworldExtX;return 0!=r&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/r),t},n.prototype.transformY=function(e){var t=0,r=this.lworldExtY;return 0!=r&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/r),t},n.prototype.inverseTransformX=function(e){var t=0,r=this.ldeviceExtX;return 0!=r&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/r),t},n.prototype.inverseTransformY=function(e){var t=0,r=this.ldeviceExtY;return 0!=r&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/r),t},n.prototype.inverseTransformPoint=function(e){return new _(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=n},function(e,t,r){var _=r(15),n=r(4),a=r(0),i=r(8),o=r(9);function l(){_.call(this),this.useSmartIdealEdgeLengthCalculation=n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=n.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=n.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=n.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=n.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=n.MAX_ITERATIONS}for(var s in l.prototype=Object.create(_.prototype),_)l[s]=_[s];l.prototype.initParameters=function(){_.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},l.prototype.calcIdealEdgeLengths=function(){for(var e,t,r,_,i,o,l,s=this.getGraphManager().getAllEdges(),c=0;c<s.length;c++)t=(e=s[c]).idealLength,e.isInterGraph&&(_=e.getSource(),i=e.getTarget(),o=e.getSourceInLca().getEstimatedSize(),l=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=o+l-2*a.SIMPLE_NODE_SIZE),r=e.getLca().getInclusionTreeDepth(),e.idealLength+=t*n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(_.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*r))},l.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>n.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*n.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-n.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>n.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(n.COOLING_ADAPTATION_FACTOR,1-(e-n.ADAPTATION_LOWER_NODE_LIMIT)/(n.ADAPTATION_UPPER_NODE_LIMIT-n.ADAPTATION_LOWER_NODE_LIMIT)*(1-n.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=n.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*n.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},l.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),r=0;r<t.length;r++)e=t[r],this.calcSpringForce(e,e.idealLength)},l.prototype.calcRepulsionForces=function(){var e,t,r,_,a,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&i&&this.updateGrid(),a=new Set,e=0;e<l.length;e++)r=l[e],this.calculateRepulsionForceOfANode(r,a,i,o),a.add(r);else for(e=0;e<l.length;e++)for(r=l[e],t=e+1;t<l.length;t++)_=l[t],r.getOwner()==_.getOwner()&&this.calcRepulsionForce(r,_)},l.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),r=0;r<t.length;r++)e=t[r],this.calcGravitationalForce(e)},l.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},l.prototype.calcSpringForce=function(e,t){var r,_,n,a,i=e.getSource(),o=e.getTarget();if(this.uniformLeafNodeSizes&&null==i.getChild()&&null==o.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(r=e.getLength())&&(n=(_=e.edgeElasticity*(r-t))*(e.lengthX/r),a=_*(e.lengthY/r),i.springForceX+=n,i.springForceY+=a,o.springForceX-=n,o.springForceY-=a)},l.prototype.calcRepulsionForce=function(e,t){var r,_,a,l,s,c,u,f=e.getRect(),d=t.getRect(),p=new Array(2),h=new Array(4);if(f.intersects(d)){i.calcSeparationAmount(f,d,p,n.DEFAULT_EDGE_LENGTH/2),c=2*p[0],u=2*p[1];var g=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=g*c,e.repulsionForceY-=g*u,t.repulsionForceX+=g*c,t.repulsionForceY+=g*u}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(r=d.getCenterX()-f.getCenterX(),_=d.getCenterY()-f.getCenterY()):(i.getIntersection(f,d,h),r=h[2]-h[0],_=h[3]-h[1]),Math.abs(r)<n.MIN_REPULSION_DIST&&(r=o.sign(r)*n.MIN_REPULSION_DIST),Math.abs(_)<n.MIN_REPULSION_DIST&&(_=o.sign(_)*n.MIN_REPULSION_DIST),a=r*r+_*_,l=Math.sqrt(a),c=(s=(e.nodeRepulsion/2+t.nodeRepulsion/2)*e.noOfChildren*t.noOfChildren/a)*r/l,u=s*_/l,e.repulsionForceX-=c,e.repulsionForceY-=u,t.repulsionForceX+=c,t.repulsionForceY+=u},l.prototype.calcGravitationalForce=function(e){var t,r,_,n,a,i,o,l;r=((t=e.getOwner()).getRight()+t.getLeft())/2,_=(t.getTop()+t.getBottom())/2,n=e.getCenterX()-r,a=e.getCenterY()-_,i=Math.abs(n)+e.getWidth()/2,o=Math.abs(a)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(i>(l=t.getEstimatedSize()*this.gravityRangeFactor)||o>l)&&(e.gravitationForceX=-this.gravityConstant*n,e.gravitationForceY=-this.gravityConstant*a):(i>(l=t.getEstimatedSize()*this.compoundGravityRangeFactor)||o>l)&&(e.gravitationForceX=-this.gravityConstant*n*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*a*this.compoundGravityConstant)},l.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},l.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},l.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),r=0;r<t.length;r++)(e=t[r]).noOfChildren=e.getNoOfChildren()},l.prototype.calcGrid=function(e){var t,r;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),r=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var _=new Array(t),n=0;n<t;n++)_[n]=new Array(r);for(n=0;n<t;n++)for(var a=0;a<r;a++)_[n][a]=new Array;return _},l.prototype.addNodeToGrid=function(e,t,r){var _,n,a,i;_=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),n=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().y-r)/this.repulsionRange)),i=parseInt(Math.floor((e.getRect().height+e.getRect().y-r)/this.repulsionRange));for(var o=_;o<=n;o++)for(var l=a;l<=i;l++)this.grid[o][l].push(e),e.setGridCoordinates(_,n,a,i)},l.prototype.updateGrid=function(){var e,t,r=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<r.length;e++)t=r[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},l.prototype.calculateRepulsionForceOfANode=function(e,t,r,_){if(this.totalIterations%n.GRID_CALCULATION_CHECK_PERIOD==1&&r||_){var a,i=new Set;e.surrounding=new Array;for(var o=this.grid,l=e.startX-1;l<e.finishX+2;l++)for(var s=e.startY-1;s<e.finishY+2;s++)if(!(l<0||s<0||l>=o.length||s>=o[0].length))for(var c=0;c<o[l][s].length;c++)if(a=o[l][s][c],e.getOwner()==a.getOwner()&&e!=a&&!t.has(a)&&!i.has(a)){var u=Math.abs(e.getCenterX()-a.getCenterX())-(e.getWidth()/2+a.getWidth()/2),f=Math.abs(e.getCenterY()-a.getCenterY())-(e.getHeight()/2+a.getHeight()/2);u<=this.repulsionRange&&f<=this.repulsionRange&&i.add(a)}e.surrounding=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(i))}for(l=0;l<e.surrounding.length;l++)this.calcRepulsionForce(e,e.surrounding[l])},l.prototype.calcRepulsionRange=function(){return 0},e.exports=l},function(e,t,r){var _=r(1),n=r(4);function a(e,t,r){_.call(this,e,t,r),this.idealLength=n.DEFAULT_EDGE_LENGTH,this.edgeElasticity=n.DEFAULT_SPRING_STRENGTH}for(var i in a.prototype=Object.create(_.prototype),_)a[i]=_[i];e.exports=a},function(e,t,r){var _=r(3),n=r(4);function a(e,t,r,a){_.call(this,e,t,r,a),this.nodeRepulsion=n.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var i in a.prototype=Object.create(_.prototype),_)a[i]=_[i];a.prototype.setGridCoordinates=function(e,t,r,_){this.startX=e,this.finishX=t,this.startY=r,this.finishY=_},e.exports=a},function(e,t,r){function _(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}_.prototype.getWidth=function(){return this.width},_.prototype.setWidth=function(e){this.width=e},_.prototype.getHeight=function(){return this.height},_.prototype.setHeight=function(e){this.height=e},e.exports=_},function(e,t,r){var _=r(14);function n(){this.map={},this.keys=[]}n.prototype.put=function(e,t){var r=_.createID(e);this.contains(r)||(this.map[r]=t,this.keys.push(e))},n.prototype.contains=function(e){return _.createID(e),null!=this.map[e]},n.prototype.get=function(e){var t=_.createID(e);return this.map[t]},n.prototype.keySet=function(){return this.keys},e.exports=n},function(e,t,r){var _=r(14);function n(){this.set={}}n.prototype.add=function(e){var t=_.createID(e);this.contains(t)||(this.set[t]=e)},n.prototype.remove=function(e){delete this.set[_.createID(e)]},n.prototype.clear=function(){this.set={}},n.prototype.contains=function(e){return this.set[_.createID(e)]==e},n.prototype.isEmpty=function(){return 0===this.size()},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),r=t.length,_=0;_<r;_++)e.push(this.set[t[_]])},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAll=function(e){for(var t=e.length,r=0;r<t;r++){var _=e[r];this.add(_)}},e.exports=n},function(e,t,r){function _(){}_.multMat=function(e,t){for(var r=[],_=0;_<e.length;_++){r[_]=[];for(var n=0;n<t[0].length;n++){r[_][n]=0;for(var a=0;a<e[0].length;a++)r[_][n]+=e[_][a]*t[a][n]}}return r},_.transpose=function(e){for(var t=[],r=0;r<e[0].length;r++){t[r]=[];for(var _=0;_<e.length;_++)t[r][_]=e[_][r]}return t},_.multCons=function(e,t){for(var r=[],_=0;_<e.length;_++)r[_]=e[_]*t;return r},_.minusOp=function(e,t){for(var r=[],_=0;_<e.length;_++)r[_]=e[_]-t[_];return r},_.dotProduct=function(e,t){for(var r=0,_=0;_<e.length;_++)r+=e[_]*t[_];return r},_.mag=function(e){return Math.sqrt(this.dotProduct(e,e))},_.normalize=function(e){for(var t=[],r=this.mag(e),_=0;_<e.length;_++)t[_]=e[_]/r;return t},_.multGamma=function(e){for(var t=[],r=0,_=0;_<e.length;_++)r+=e[_];r*=-1/e.length;for(var n=0;n<e.length;n++)t[n]=r+e[n];return t},_.multL=function(e,t,r){for(var _=[],n=[],a=[],i=0;i<t[0].length;i++){for(var o=0,l=0;l<t.length;l++)o+=-.5*t[l][i]*e[l];n[i]=o}for(var s=0;s<r.length;s++){for(var c=0,u=0;u<r.length;u++)c+=r[s][u]*n[u];a[s]=c}for(var f=0;f<t.length;f++){for(var d=0,p=0;p<t[0].length;p++)d+=t[f][p]*a[p];_[f]=d}return _},e.exports=_},function(e,t,r){var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var _=t[r];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}return function(t,r,_){return r&&e(t.prototype,r),_&&e(t,_),t}}(),n=r(11),a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null===r&&void 0===r||(this.compareFunction=this._defaultCompareFunction);var _=void 0;_=t instanceof n?t.size():t.length,this._quicksort(t,0,_-1)}return _(e,[{key:"_quicksort",value:function(e,t,r){if(t<r){var _=this._partition(e,t,r);this._quicksort(e,t,_),this._quicksort(e,_+1,r)}}},{key:"_partition",value:function(e,t,r){for(var _=this._get(e,t),n=t,a=r;;){for(;this.compareFunction(_,this._get(e,a));)a--;for(;this.compareFunction(this._get(e,n),_);)n++;if(!(n<a))return a;this._swap(e,n,a),n++,a--}}},{key:"_get",value:function(e,t){return e instanceof n?e.get_object_at(t):e[t]}},{key:"_set",value:function(e,t,r){e instanceof n?e.set_object_at(t,r):e[t]=r}},{key:"_swap",value:function(e,t,r){var _=this._get(e,t);this._set(e,t,this._get(e,r)),this._set(e,r,_)}},{key:"_defaultCompareFunction",value:function(e,t){return t>e}}]),e}();e.exports=a},function(e,t,r){function _(){}_.svd=function(e){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=e.length,this.n=e[0].length;var t=Math.min(this.m,this.n);this.s=function(e){for(var t=[];e-- >0;)t.push(0);return t}(Math.min(this.m+1,this.n)),this.U=function e(t){if(0==t.length)return 0;for(var r=[],_=0;_<t[0];_++)r.push(e(t.slice(1)));return r}([this.m,t]),this.V=function(e){return function e(t){if(0==t.length)return 0;for(var r=[],_=0;_<t[0];_++)r.push(e(t.slice(1)));return r}(e)}([this.n,this.n]);for(var r,n,a=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.n),i=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.m),o=Math.min(this.m-1,this.n),l=Math.max(0,Math.min(this.n-2,this.m)),s=0;s<Math.max(o,l);s++){if(s<o){this.s[s]=0;for(var c=s;c<this.m;c++)this.s[s]=_.hypot(this.s[s],e[c][s]);if(0!==this.s[s]){e[s][s]<0&&(this.s[s]=-this.s[s]);for(var u=s;u<this.m;u++)e[u][s]/=this.s[s];e[s][s]+=1}this.s[s]=-this.s[s]}for(var f=s+1;f<this.n;f++){if(r=s<o,n=0!==this.s[s],r&&n){for(var d=0,p=s;p<this.m;p++)d+=e[p][s]*e[p][f];d=-d/e[s][s];for(var h=s;h<this.m;h++)e[h][f]+=d*e[h][s]}a[f]=e[s][f]}if(function(e,t){return t}(0,s<o))for(var g=s;g<this.m;g++)this.U[g][s]=e[g][s];if(s<l){a[s]=0;for(var v=s+1;v<this.n;v++)a[s]=_.hypot(a[s],a[v]);if(0!==a[s]){a[s+1]<0&&(a[s]=-a[s]);for(var m=s+1;m<this.n;m++)a[m]/=a[s];a[s+1]+=1}if(a[s]=-a[s],function(e,t){return e&&t}(s+1<this.m,0!==a[s])){for(var y=s+1;y<this.m;y++)i[y]=0;for(var w=s+1;w<this.n;w++)for(var b=s+1;b<this.m;b++)i[b]+=a[w]*e[b][w];for(var k=s+1;k<this.n;k++)for(var x=-a[k]/a[s+1],O=s+1;O<this.m;O++)e[O][k]+=x*i[O]}for(var P=s+1;P<this.n;P++)this.V[P][s]=a[P]}}var E=Math.min(this.n,this.m+1);o<this.n&&(this.s[o]=e[o][o]),this.m<E&&(this.s[E-1]=0),l+1<E&&(a[l]=e[l][E-1]),a[E-1]=0;for(var C=o;C<t;C++){for(var A=0;A<this.m;A++)this.U[A][C]=0;this.U[C][C]=1}for(var S=o-1;S>=0;S--)if(0!==this.s[S]){for(var N=S+1;N<t;N++){for(var T=0,L=S;L<this.m;L++)T+=this.U[L][S]*this.U[L][N];T=-T/this.U[S][S];for(var M=S;M<this.m;M++)this.U[M][N]+=T*this.U[M][S]}for(var j=S;j<this.m;j++)this.U[j][S]=-this.U[j][S];this.U[S][S]=1+this.U[S][S];for(var I=0;I<S-1;I++)this.U[I][S]=0}else{for(var D=0;D<this.m;D++)this.U[D][S]=0;this.U[S][S]=1}for(var R=this.n-1;R>=0;R--){if(function(e,t){return e&&t}(R<l,0!==a[R]))for(var F=R+1;F<t;F++){for(var z=0,B=R+1;B<this.n;B++)z+=this.V[B][R]*this.V[B][F];z=-z/this.V[R+1][R];for(var q=R+1;q<this.n;q++)this.V[q][F]+=z*this.V[q][R]}for(var V=0;V<this.n;V++)this.V[V][R]=0;this.V[R][R]=1}for(var G=E-1,U=Math.pow(2,-52),$=Math.pow(2,-966);E>0;){var W=void 0,H=void 0;for(W=E-2;W>=-1&&-1!==W;W--)if(Math.abs(a[W])<=$+U*(Math.abs(this.s[W])+Math.abs(this.s[W+1]))){a[W]=0;break}if(W===E-2)H=4;else{var Y=void 0;for(Y=E-1;Y>=W&&Y!==W;Y--){var X=(Y!==E?Math.abs(a[Y]):0)+(Y!==W+1?Math.abs(a[Y-1]):0);if(Math.abs(this.s[Y])<=$+U*X){this.s[Y]=0;break}}Y===W?H=3:Y===E-1?H=1:(H=2,W=Y)}switch(W++,H){case 1:var Z=a[E-2];a[E-2]=0;for(var K=E-2;K>=W;K--){var J=_.hypot(this.s[K],Z),Q=this.s[K]/J,ee=Z/J;this.s[K]=J,K!==W&&(Z=-ee*a[K-1],a[K-1]=Q*a[K-1]);for(var te=0;te<this.n;te++)J=Q*this.V[te][K]+ee*this.V[te][E-1],this.V[te][E-1]=-ee*this.V[te][K]+Q*this.V[te][E-1],this.V[te][K]=J}break;case 2:var re=a[W-1];a[W-1]=0;for(var _e=W;_e<E;_e++){var ne=_.hypot(this.s[_e],re),ae=this.s[_e]/ne,ie=re/ne;this.s[_e]=ne,re=-ie*a[_e],a[_e]=ae*a[_e];for(var oe=0;oe<this.m;oe++)ne=ae*this.U[oe][_e]+ie*this.U[oe][W-1],this.U[oe][W-1]=-ie*this.U[oe][_e]+ae*this.U[oe][W-1],this.U[oe][_e]=ne}break;case 3:var le=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[E-1]),Math.abs(this.s[E-2])),Math.abs(a[E-2])),Math.abs(this.s[W])),Math.abs(a[W])),se=this.s[E-1]/le,ce=this.s[E-2]/le,ue=a[E-2]/le,fe=this.s[W]/le,de=a[W]/le,pe=((ce+se)*(ce-se)+ue*ue)/2,he=se*ue*(se*ue),ge=0;(function(e,t){return e||t})(0!==pe,0!==he)&&(ge=Math.sqrt(pe*pe+he),pe<0&&(ge=-ge),ge=he/(pe+ge));for(var ve=(fe+se)*(fe-se)+ge,me=fe*de,ye=W;ye<E-1;ye++){var we=_.hypot(ve,me),be=ve/we,ke=me/we;ye!==W&&(a[ye-1]=we),ve=be*this.s[ye]+ke*a[ye],a[ye]=be*a[ye]-ke*this.s[ye],me=ke*this.s[ye+1],this.s[ye+1]=be*this.s[ye+1];for(var xe=0;xe<this.n;xe++)we=be*this.V[xe][ye]+ke*this.V[xe][ye+1],this.V[xe][ye+1]=-ke*this.V[xe][ye]+be*this.V[xe][ye+1],this.V[xe][ye]=we;if(be=ve/(we=_.hypot(ve,me)),ke=me/we,this.s[ye]=we,ve=be*a[ye]+ke*this.s[ye+1],this.s[ye+1]=-ke*a[ye]+be*this.s[ye+1],me=ke*a[ye+1],a[ye+1]=be*a[ye+1],ye<this.m-1)for(var Oe=0;Oe<this.m;Oe++)we=be*this.U[Oe][ye]+ke*this.U[Oe][ye+1],this.U[Oe][ye+1]=-ke*this.U[Oe][ye]+be*this.U[Oe][ye+1],this.U[Oe][ye]=we}a[E-2]=ve;break;case 4:if(this.s[W]<=0){this.s[W]=this.s[W]<0?-this.s[W]:0;for(var Pe=0;Pe<=G;Pe++)this.V[Pe][W]=-this.V[Pe][W]}for(;W<G&&!(this.s[W]>=this.s[W+1]);){var Ee=this.s[W];if(this.s[W]=this.s[W+1],this.s[W+1]=Ee,W<this.n-1)for(var Ce=0;Ce<this.n;Ce++)Ee=this.V[Ce][W+1],this.V[Ce][W+1]=this.V[Ce][W],this.V[Ce][W]=Ee;if(W<this.m-1)for(var Ae=0;Ae<this.m;Ae++)Ee=this.U[Ae][W+1],this.U[Ae][W+1]=this.U[Ae][W],this.U[Ae][W]=Ee;W++}E--}}return{U:this.U,V:this.V,S:this.s}},_.hypot=function(e,t){var r=void 0;return Math.abs(e)>Math.abs(t)?(r=t/e,r=Math.abs(e)*Math.sqrt(1+r*r)):0!=t?(r=e/t,r=Math.abs(t)*Math.sqrt(1+r*r)):r=0,r},e.exports=_},function(e,t,r){var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var _=t[r];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}return function(t,r,_){return r&&e(t.prototype,r),_&&e(t,_),t}}(),n=function(){function e(t,r){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sequence1=t,this.sequence2=r,this.match_score=_,this.mismatch_penalty=n,this.gap_penalty=a,this.iMax=t.length+1,this.jMax=r.length+1,this.grid=new Array(this.iMax);for(var i=0;i<this.iMax;i++){this.grid[i]=new Array(this.jMax);for(var o=0;o<this.jMax;o++)this.grid[i][o]=0}this.tracebackGrid=new Array(this.iMax);for(var l=0;l<this.iMax;l++){this.tracebackGrid[l]=new Array(this.jMax);for(var s=0;s<this.jMax;s++)this.tracebackGrid[l][s]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return _(e,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var r=1;r<this.iMax;r++)for(var _=1;_<this.jMax;_++){var n=[this.sequence1[r-1]===this.sequence2[_-1]?this.grid[r-1][_-1]+this.match_score:this.grid[r-1][_-1]+this.mismatch_penalty,this.grid[r-1][_]+this.gap_penalty,this.grid[r][_-1]+this.gap_penalty],a=this.arrayAllMaxIndexes(n);this.grid[r][_]=n[a[0]],this.tracebackGrid[r][_]=[a.includes(0),a.includes(1),a.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],r=this.tracebackGrid[t.pos[0]][t.pos[1]];r[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),r[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),r[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,t){for(var r=[],_=-1;-1!==(_=e.indexOf(t,_+1));)r.push(_);return r}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),e}();e.exports=n},function(e,t,r){var _=function(){};_.FDLayout=r(18),_.FDLayoutConstants=r(4),_.FDLayoutEdge=r(19),_.FDLayoutNode=r(20),_.DimensionD=r(21),_.HashMap=r(22),_.HashSet=r(23),_.IGeometry=r(8),_.IMath=r(9),_.Integer=r(10),_.Point=r(12),_.PointD=r(5),_.RandomSeed=r(16),_.RectangleD=r(13),_.Transform=r(17),_.UniqueIDGeneretor=r(14),_.Quicksort=r(25),_.LinkedList=r(11),_.LGraphObject=r(2),_.LGraph=r(6),_.LEdge=r(1),_.LGraphManager=r(7),_.LNode=r(3),_.Layout=r(15),_.LayoutConstants=r(0),_.NeedlemanWunsch=r(27),_.Matrix=r(24),_.SVD=r(26),e.exports=_},function(e,t,r){function _(){this.listeners=[]}var n=_.prototype;n.addListener=function(e,t){this.listeners.push({event:e,callback:t})},n.removeListener=function(e,t){for(var r=this.listeners.length;r>=0;r--){var _=this.listeners[r];_.event===e&&_.callback===t&&this.listeners.splice(r,1)}},n.emit=function(e,t){for(var r=0;r<this.listeners.length;r++){var _=this.listeners[r];e===_.event&&_.callback(t)}},e.exports=_}])},e.exports=r()}));var o,l,s=a("3krpC"),c={},u={},f={};l=function(){this.__data__=[],this.size=0};var d,p={},h={};h=function(e,t){return e===t||e!=e&&t!=t},p=function(e,t){for(var r=e.length;r--;)if(h(e[r][0],t))return r;return-1};var g=Array.prototype.splice;d=function(e){var t=this.__data__,r=p(t,e);return!(r<0)&&(r==t.length-1?t.pop():g.call(t,r,1),--this.size,!0)};var v;v=function(e){var t=this.__data__,r=p(t,e);return r<0?void 0:t[r][1]};var m;m=function(e){return p(this.__data__,e)>-1};var y;function w(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var _=e[t];this.set(_[0],_[1])}}y=function(e,t){var r=this.__data__,_=p(r,e);return _<0?(++this.size,r.push([e,t])):r[_][1]=t,this},w.prototype.clear=l,w.prototype.delete=d,w.prototype.get=v,w.prototype.has=m,w.prototype.set=y,f=w;var b;b=function(){this.__data__=new f,this.size=0};var k;k=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var x;x=function(e){return this.__data__.get(e)};var O;O=function(e){return this.__data__.has(e)};var P,E,C={},A={},S={},N={},T={};E=(te=a("kLIqa")).Symbol;var L={},M=Object.prototype,j=M.hasOwnProperty,I=M.toString,D=E?E.toStringTag:void 0;L=function(e){var t=j.call(e,D),r=e[D];try{e[D]=void 0;var _=!0}catch(e){}var n=I.call(e);return _&&(t?e[D]=r:delete e[D]),n};var R={},F=Object.prototype.toString;R=function(e){return F.call(e)};var z=E?E.toStringTag:void 0;T=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":z&&z in Object(e)?L(e):R(e)};var B={};B=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};N=function(e){if(!B(e))return!1;var t=T(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var q,V,G={},U=(te=a("kLIqa"))["__core-js_shared__"],$=(V=/[^.]+$/.exec((q=U)&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";G=function(e){return!!$&&$ in e};var W={},H=Function.prototype.toString;W=function(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var Y=/^\[object .+?Constructor\]$/,X=Function.prototype,Z=Object.prototype,K=X.toString,J=Z.hasOwnProperty,Q=RegExp("^"+K.call(J).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S=function(e){return!(!B(e)||G(e))&&(N(e)?Q:Y).test(W(e))};var ee={};ee=function(e,t){return null==e?void 0:e[t]},A=function(e,t){var r=ee(e,t);return S(r)?r:void 0};var te=a("kLIqa"),re=A(te,"Map");C=re;var _e,ne,ae={},ie={},oe={},le=A(Object,"create");oe=le,ne=function(){this.__data__=oe?oe(null):{},this.size=0};var se;se=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var ce,ue=Object.prototype.hasOwnProperty;ce=function(e){var t=this.__data__;if(oe){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ue.call(t,e)?t[e]:void 0};var fe,de=Object.prototype.hasOwnProperty;fe=function(e){var t=this.__data__;return oe?void 0!==t[e]:de.call(t,e)};var pe;function he(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var _=e[t];this.set(_[0],_[1])}}pe=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=oe&&void 0===t?"__lodash_hash_undefined__":t,this},he.prototype.clear=ne,he.prototype.delete=se,he.prototype.get=ce,he.prototype.has=fe,he.prototype.set=pe,ie=he,_e=function(){this.size=0,this.__data__={hash:new ie,map:new(C||f),string:new ie}};var ge,ve={},me={};me=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ve=function(e,t){var r=e.__data__;return me(t)?r["string"==typeof t?"string":"hash"]:r.map},ge=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t};var ye;ye=function(e){return ve(this,e).get(e)};var we;we=function(e){return ve(this,e).has(e)};var be;function ke(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var _=e[t];this.set(_[0],_[1])}}be=function(e,t){var r=ve(this,e),_=r.size;return r.set(e,t),this.size+=r.size==_?0:1,this},ke.prototype.clear=_e,ke.prototype.delete=ge,ke.prototype.get=ye,ke.prototype.has=we,ke.prototype.set=be,ae=ke;function xe(e){var t=this.__data__=new f(e);this.size=t.size}P=function(e,t){var r=this.__data__;if(r instanceof f){var _=r.__data__;if(!C||_.length<199)return _.push([e,t]),this.size=++r.size,this;r=this.__data__=new ae(_)}return r.set(e,t),this.size=r.size,this},xe.prototype.clear=b,xe.prototype.delete=k,xe.prototype.get=x,xe.prototype.has=O,xe.prototype.set=P,u=xe;var Oe={},Pe={},Ee={},Ce=function(){try{var e=A(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();Ee=Ce,Pe=function(e,t,r){"__proto__"==t&&Ee?Ee(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Oe=function(e,t,r){(void 0!==r&&!h(e[t],r)||void 0===r&&!(t in e))&&Pe(e,t,r)};var Ae={};var Se=function(e){return function(t,r,_){for(var n=-1,a=Object(t),i=_(t),o=i.length;o--;){var l=i[e?o:++n];if(!1===r(a[l],l,a))break}return t}}();Ae=Se;var Ne={},Te=a("4N7g8"),Le={},Me={},je={},Ie=(te=a("kLIqa")).Uint8Array;je=Ie,Me=function(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t},Le=function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var De={};De=function(e,t){var r=-1,_=e.length;for(t||(t=Array(_));++r<_;)t[r]=e[r];return t};var Re={},Fe={},ze=Object.create,Be=function(){function e(){}return function(t){if(!B(t))return{};if(ze)return ze(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();Fe=Be;var qe={},Ve={};var Ge=(Ve=function(e,t){return function(r){return e(t(r))}})(Object.getPrototypeOf,Object);qe=Ge;var Ue={},$e=Object.prototype;Ue=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$e)},Re=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:Fe(qe(e))};var We={},He={},Ye={};Ye=function(e){return null!=e&&"object"==typeof e};He=function(e){return Ye(e)&&"[object Arguments]"==T(e)};var Xe=Object.prototype,Ze=Xe.hasOwnProperty,Ke=Xe.propertyIsEnumerable,Je=He(function(){return arguments}())?He:function(e){return Ye(e)&&Ze.call(e,"callee")&&!Ke.call(e,"callee")};We=Je;var Qe={},et=Array.isArray;Qe=et;var tt={},rt={},_t={};_t=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},rt=function(e){return null!=e&&_t(e.length)&&!N(e)},tt=function(e){return Ye(e)&&rt(e)};var nt=a("4a4bO"),at={},it=Function.prototype,ot=Object.prototype,lt=it.toString,st=ot.hasOwnProperty,ct=lt.call(Object);at=function(e){if(!Ye(e)||"[object Object]"!=T(e))return!1;var t=qe(e);if(null===t)return!0;var r=st.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lt.call(r)==ct};var ut,ft={},dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1,ut=function(e){return Ye(e)&&_t(e.length)&&!!dt[T(e)]};var pt={};pt=function(e){return function(t){return e(t)}};var ht=(Kp=a("3tQok"))&&Kp.isTypedArray,gt=ht?pt(ht):ut;ft=gt;var vt={};vt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var mt={},yt={},wt={},bt=Object.prototype.hasOwnProperty;wt=function(e,t,r){var _=e[t];bt.call(e,t)&&h(_,r)&&(void 0!==r||t in e)||Pe(e,t,r)},yt=function(e,t,r,_){var n=!r;r||(r={});for(var a=-1,i=t.length;++a<i;){var o=t[a],l=_?_(r[o],e[o],o,r,e):void 0;void 0===l&&(l=e[o]),n?Pe(r,o,l):wt(r,o,l)}return r};var kt={},xt={},Ot={};Ot=function(e,t){for(var r=-1,_=Array(e);++r<e;)_[r]=t(r);return _};nt=a("4a4bO");var Pt={},Et=/^(?:0|[1-9]\d*)$/;Pt=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Et.test(e))&&e>-1&&e%1==0&&e<t};var Ct=Object.prototype.hasOwnProperty;xt=function(e,t){var r=Qe(e),_=!r&&We(e),n=!r&&!_&&nt(e),a=!r&&!_&&!n&&ft(e),i=r||_||n||a,o=i?Ot(e.length,String):[],l=o.length;for(var s in e)!t&&!Ct.call(e,s)||i&&("length"==s||n&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Pt(s,l))||o.push(s);return o};var At={},St={};St=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t};var Nt=Object.prototype.hasOwnProperty;At=function(e){if(!B(e))return St(e);var t=Ue(e),r=[];for(var _ in e)("constructor"!=_||!t&&Nt.call(e,_))&&r.push(_);return r},kt=function(e){return rt(e)?xt(e,!0):At(e)},mt=function(e){return yt(e,kt(e))},Ne=function(e,t,r,_,n,a,i){var o=vt(e,r),l=vt(t,r),s=i.get(l);if(s)Oe(e,r,s);else{var c=a?a(o,l,r+"",e,t,i):void 0,u=void 0===c;if(u){var f=Qe(l),d=!f&&nt(l),p=!f&&!d&&ft(l);c=l,f||d||p?Qe(o)?c=o:tt(o)?c=De(o):d?(u=!1,c=Te(l,!0)):p?(u=!1,c=Le(l,!0)):c=[]:at(l)||We(l)?(c=o,We(o)?c=mt(o):B(o)&&!N(o)||(c=Re(l))):u=!1}u&&(i.set(l,c),n(c,l,_,a,i),i.delete(l)),Oe(e,r,c)}},c=function e(t,r,_,n,a){t!==r&&Ae(r,(function(i,o){if(a||(a=new u),B(i))Ne(t,r,o,_,e,n,a);else{var l=n?n(vt(t,o),i,o+"",t,r,a):void 0;void 0===l&&(l=i),Oe(t,o,l)}}),kt)};var Tt,Lt={},Mt={};Tt=function(e){return e};var jt={},It={};It=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var Dt=Math.max;jt=function(e,t,r){return t=Dt(void 0===t?e.length-1:t,0),function(){for(var _=arguments,n=-1,a=Dt(_.length-t,0),i=Array(a);++n<a;)i[n]=_[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=_[n];return o[t]=r(i),It(e,this,o)}};var Rt,Ft={},zt={};zt=function(e){return function(){return e}},Rt=Ee?function(e,t){return Ee(e,"toString",{configurable:!0,enumerable:!1,value:zt(t),writable:!0})}:Tt;var Bt=Date.now;var qt=function(e){var t=0,r=0;return function(){var _=Bt(),n=16-(_-r);if(r=_,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Rt);Ft=qt,Mt=function(e,t){return Ft(jt(e,t,Tt),e+"")};var Vt={};Vt=function(e,t,r){if(!B(r))return!1;var _=typeof t;return!!("number"==_?rt(r)&&Pt(t,r.length):"string"==_&&t in r)&&h(r[t],e)};var Gt=(Lt=function(e){return Mt((function(t,r){var _=-1,n=r.length,a=n>1?r[n-1]:void 0,i=n>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(n--,a):void 0,i&&Vt(r[0],r[1],i)&&(a=n<3?void 0:a,n=1),t=Object(t);++_<n;){var o=r[_];o&&e(t,o,_,a)}return t}))})((function(e,t,r){c(e,t,r)}));o=Gt;s=a("3krpC"),s=a("3krpC");function Ut(e,t){if(void 0===e)throw new Error("get_field_schema(): schema is undefined!");const r=t.split("."),_=r.pop();for(const t of r){if("[]"==t&&"array"==e.type&&(e=e.items||{}),"object"!=e.type)throw new Error(`get_field_schema(): cannot access ${t} of non-object type ${e}`);e=(e.properties||{})[t]||{}}return(e.properties||{})[_]}function*$t(e,t,r){if(void 0===e)throw new Error("iterfield(): obj is undefined!");const _=t.split(".");for(let t=0;t<_.length;++t){const n=_[t];if("[]"==n){e||=[];for(let n=0;n<e.length;++n){const a=e[n];let i=(r?`${r}.`:"")+`[${n}]`;const o=_.slice(t+1).join(".");o?yield*$t(a,o,i):yield{value:a,fieldnameidx:i}}return}e=(e||{})[n],r=(r?`${r}.`:"")+n}yield{value:e,fieldnameidx:r}}function Wt(e,t){if(void 0===e)throw new Error("getfield(): obj is undefined!");const r=t.split("."),_=r.pop();for(let t of r){if(Array.isArray(e)){let e=/^\[(\d+)\]$/.exec(t);null!=e&&(t=parseInt(e[1]))}e=e[t]||{}}return e[_]}function Ht(e,t,r){if(void 0===e)throw new Error("setfield(): obj is undefined!");let _=null;"object"==typeof r?({set_object_attribute_fn:_}=r):_=(e,t)=>{Object.hasOwn(e,t)?e[t]=r(e[t]):e[t]=r()};const n=t.split("."),a=n.map(((e,t)=>{let r=t===n.length-2,_=/^\[(\d*)\]$/.exec(e);if(null!=_){let t=_[1];return{isarray:!0,isbeforelast:r,part:e=""===t?-1:parseInt(t)}}return{isarray:!1,isbeforelast:r,part:e}}));for(let t=0;t<a.length-1;++t){let r=a[t].part;-1===r&&(r=e.length),Object.hasOwn(e,r)||(e[r]=a[t+1].isarray?[]:{}),e=e[r]}let i=a[a.length-1].part;return-1===i&&(i=e.length),_(e,i)}function Yt(e,t,r){Ht(e,t,(e=>(e||[]).concat(r)))}class Xt{constructor(){this.zoodb=null}install_zoo(e){this.zoodb=e}initialize_zoo(){}process_zoo(){throw new Error("Please reimplement me")}prepare_zoo_update_objects(e){}process_zoo_update_objects(e){return this.process_zoo()}process_data_dump(e,t){return e}}const Zt=r(s)("zoodb.dbprocessor.relations");class Kt{constructor({object_type:e,relation_spec:t,zoodb:r}){this.object_type=e,this.relation_spec=t,this.zoodb=r,this.object_field=t.object_field,this.to_object_type=t.to_object_type,this.allow_null=t.allow_null??!1,this.relation_add_object_field=t.relation_add_object_field,this.relation_primary_key_field=t.relation_primary_key_field,this.value_is_shorthand_object_id=!0===this.relation_primary_key_field;const _=this.relation_spec.backreference;if(_?(this.use_backreference=!0,this.backref_relation_primary_key_field=_.relation_primary_key_field??this.object_type+"_id",this.backref_relation_object_field=_.relation_object_field??this.object_type,this.backref_field=_.field):this.use_backreference=!1,!Object.hasOwn(this.zoodb.objects,this.to_object_type))throw new Error(`Invalid _zoo_relation definition in ${this.object_type}: There is no such object type ${this.to_object_type}`);const n=Ut(this.zoodb.schema(this.object_type),this.object_field);if(null==n)throw new Error(`Invalid field ${this.object_field} in ${this.object_type} object (in relation to ${this.to_object_type})`);"array"===n.type?(this.source_has_multiple_relations=!0,this.relation_add_object_field&&(this.fully_specified_relation_add_object_field=this.object_field+".[]."+this.relation_add_object_field)):(this.source_has_multiple_relations=!1,this.relation_add_object_field&&(this.fully_specified_relation_add_object_field=this.object_field+"."+this.relation_add_object_field))}get_computed_fields(){let e={};return this.fully_specified_relation_add_object_field&&(e[this.object_type]=[{fieldname:this.fully_specified_relation_add_object_field,msg:`You are only expected to set ${this.relation_primary_key_field}.`}]),this.use_backreference&&(e[this.to_object_type]=(e[this.to_object_type]??[]).concat([{fieldname:this.backref_field,msg:"This field will be determined automatically."}])),e}get_object_relation_objects(e){const t=Wt(e,this.object_field);if(this.source_has_multiple_relations)return t&&t.length?t:[];if(!t){if(!this.allow_null)throw new Error(`Object ${this.object_type} ${e._zoodb.id}: Relation object data is invalid (it might be null or undefined).  We expected a single target object relation because the field ${this.object_field} isn't of type array.  If it's a shorthand id field and it can be null, the relation specification's allow_null must be set.`);return[]}return[t]}process_object_relation(e,t){for(const r of this.get_object_relation_objects(e))this._process_single_relation(e,r,t)}_process_single_relation(e,t,r){let _=this.zoodb;const{process_object_types:n}=r;let a=null;if(this.value_is_shorthand_object_id)a=t;else{if(!t)throw new Error(`Object ${this.object_type} ${e._zoodb.id}: Relation object data is invalid (it might be null or undefined).`);a=t[this.relation_primary_key_field]}if(null==a&&!this.allow_null)throw new Error(`Target object ID in reference cannot be null in ${this.object_type} ${e._zoodb?.id} .${this.object_field}:  ${JSON.stringify(t)}`);let i=null;if(null!=a&&(i=_.objects[this.to_object_type][a]??null),null!=a&&null==i)throw new Error(`In ${this.object_type} object ${e._zoodb.id} (${e._zoodb.source_file_path}): Invalid reference in  ${this.object_field} to ${this.to_object_type} object with nonexistent ID ${a}`);let o=null;if(o=this.value_is_shorthand_object_id?{[this.to_object_type+"_id"]:t}:Object.fromEntries(Object.entries(t).filter((([e])=>e!=this.relation_primary_key_field))),null!=this.relation_add_object_field&&(t[this.relation_add_object_field]=i),this.use_backreference&&(null==n||n.includes(this.to_object_type))&&null!=i){const t=Object.assign({},o);if(t[this.backref_relation_primary_key_field]=e._zoodb.id,t[this.backref_relation_object_field]=e,!this.backref_field)throw new Error(`Invalid field: in backreference: in relation object in ${this.object_type}`);Yt(i,this.backref_field,[t])}}toString(){return`[ZooRelation ${this.object_type}:${this.object_field}  ${this.to_object_type}]`}}class Jt extends Xt{constructor(e){super(),this.config=e??{},this.relations=null}initialize_zoo(){this.config.object_types??=this.zoodb.object_types,this.relations=Object.fromEntries(this.config.object_types.map((e=>{const t=(this.zoodb.schema(e)._zoo_relations??[]).map((t=>new Kt({object_type:e,relation_spec:t,zoodb:this.zoodb})));return[e,t]}))),this.check_all_clean_fields()}process_zoo(){let e=this.zoodb;this.clear_all_relation_fields();const t=this.config.object_types;if(!this.relations)return;const r={process_object_types:this.config.object_types};for(const _ of t){if(Zt(`Processing relations for ${_} object relations`),!this.relations[_])return;let t=e.objects[_];for(const e of Object.values(t))for(const t of this.relations[_])t.process_object_relation(e,r)}}prepare_zoo_update_objects(){this.clear_all_relation_fields()}clear_all_relation_fields({dbobjects:e}={}){this.check_all_clean_fields({action:({object:e,fieldnameidx:t})=>{Ht(e,t,{set_object_attribute_fn:(e,t)=>{delete e[t]}})},dbobjects:e})}check_all_clean_fields({action:e,dbobjects:t}={}){t??=this.zoodb.objects,null==e&&(e=({object_type:e,computed_relation_fieldinfo:t,fieldnameidx:r,value:_})=>{throw new Error(`${e} object's ${r} field should not be specified manually (got ${JSON.stringify(_)}). `+t.msg)});const r={};for(const[,e]of Object.entries(this.relations))for(const t of e){const e=t.get_computed_fields();for(const[t,_]of Object.entries(e))r[t]=(r[t]??[]).concat(_)}for(const[_,n]of Object.entries(r))for(const r of Object.values(t[_]))for(const t of n){const{fieldname:n}=t;for(const{value:a,fieldnameidx:i}of $t(r,n))void 0!==a&&e({object_type:_,object:r,computed_relation_fieldinfo:t,fieldnameidx:i,value:a})}}process_data_dump(e,t){let{relations_keep_object_property_pointers:r}=t;return r??=!1,r||this.clear_all_relation_fields({dbobjects:e.db.objects}),e}}function Qt(){return new Jt}s=a("3krpC");const er=(tr=a("hoVWB")).__kwargtrans__;var tr=a("hoVWB");function rr(e,t){let r=e.findLastIndex((e=>void 0!==e));if(-1===r){if(e.length!=t.length)throw new Error(`Error in function call: ${e.length} arguments provided, expected ${t.length} (${t.map((e=>""+e+"")).join(", ")})`);return e}let _=e[r];if(null==_||"object"!=typeof _||!Object.hasOwn(_,"__kwargtrans__"))return e;let n=Object.assign({},_);e[r]=void 0,delete n.__kwargtrans__;for(const[r,_]of t.entries()){let t=n[_];if(void 0!==t){if(void 0!==e[r])throw new Error(`Both positional and keyword arguments provided for ${_} (py-style)`);e[r]=t,delete n[_]}}delete n.constructor;const a=Object.keys(n);if(a.length)throw new Error(`Invalid keyword argument(s): ${a.map((e=>""+e+"")).join(", ")}`);return e}function _r(e){try{return`${e}`}catch(e){return"[failed to convert to string]"}}function nr(e){if(e&&null!=e.__class__){const t=_r(e.__class__.__name__);return e.__repr__?`${t}: ${function(e){try{return`${(0,tr.repr)(e)}`}catch(e){return"[failed to convert repr]"}}(e)}`:e.__str__?`${t}: ${_r(e)}`:e.args?`${t}: ${_r(e.args)}`:e.msg?`${t}: ${_r(e.msg)}`:`${t}: ${_r(e)}`}return _r(e)}tr=a("hoVWB");var ar=a("2R1eR"),ir=(tr=a("hoVWB"),{});t(ir,"serializable",(()=>mf));tr=a("hoVWB");var or={};t(or,"VerbatimSpecInfo",(()=>ml)),t(or,"make_verbatim_args_spec_list",(()=>yl)),t(or,"VerbatimMacro",(()=>wl)),t(or,"VerbatimEnvironment",(()=>bl)),t(or,"FeatureVerbatim",(()=>kl)),t(or,"FeatureClass",(()=>xl)),t(or,"ParsedArgumentsInfo",(()=>Pn)),t(or,"latexnodes_nodes",(()=>N_)),t(or,"FLMArgumentSpec",(()=>To)),t(or,"SimpleLatexDefinitionsFeature",(()=>cr)),t(or,"FLMSpecInfo",(()=>Zo)),t(or,"latexnodes_parsers",(()=>pa));tr=a("hoVWB");var lr="flm.feature._base",sr=(0,(tr=a("hoVWB")).__class__)("Feature",[tr.object],{__module__:lr,feature_name:null,feature_dependencies:null,feature_optional_dependencies:null,feature_default_config:(0,tr.dict)({}),DocumentManager:(0,tr.__class__)("DocumentManager",[tr.object],{__module__:lr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"feature":t=a[i];break;case"doc":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sr.DocumentManager,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.feature=t,e.feature_name=e.feature.feature_name,e.doc=r,e.RenderManager=e.feature.RenderManager}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return a=e.feature,(0,tr.__call__)(a.get_node_id,a,t);var a}))}}),RenderManager:(0,tr.__class__)("RenderManager",[tr.object],{__module__:lr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"feature_document_manager":t=a[i];break;case"render_context":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sr.RenderManager,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.feature_document_manager=t,e.feature=e.feature_document_manager.feature,e.feature_name=e.feature.feature_name,e.render_context=r}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}}))},get process(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"first_pass_value":t=_[n]}}}}))},get postprocess(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"final_value":t=_[n]}}}}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return a=e.feature,(0,tr.__call__)(a.get_node_id,a,t);var a}))}}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.dict)({})}))},get get_node_id(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.tuple))?t:t._flm_node_id}))}}),cr=(0,tr.__class__)("SimpleLatexDefinitionsFeature",[sr],{__module__:lr,DocumentManager:null,RenderManager:null,latex_definitions:(0,tr.dict)({}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.latex_definitions}))}}),ur=(tr=a("hoVWB"),{});t(ur,"fn_unique_object_id",(()=>fr));var fr=(()=>{let e=0;const t=new WeakMap;return r=>(t.has(r)||t.set(r,++e),t.get(r))})(),dr={};t(dr,"convert_auto_quotes",(()=>d_)),t(dr,"convert_ligature_single_quotes",(()=>p_)),t(dr,"convert_ligature_double_quotes",(()=>h_)),t(dr,"convert_ligature_dashes",(()=>g_)),t(dr,"convert_ligature_ellipses",(()=>v_));tr=a("hoVWB");var pr={};t(pr,"T",(()=>Cr)),t(pr,"TEMPLATE",(()=>Ar)),t(pr,"I",(()=>Sr)),t(pr,"IGNORECASE",(()=>Nr)),t(pr,"L",(()=>Tr)),t(pr,"LOCALE",(()=>Lr)),t(pr,"M",(()=>Mr)),t(pr,"MULTILINE",(()=>jr)),t(pr,"S",(()=>Ir)),t(pr,"DOTALL",(()=>Dr)),t(pr,"U",(()=>Rr)),t(pr,"UNICODE",(()=>Fr)),t(pr,"X",(()=>zr)),t(pr,"VERBOSE",(()=>Br)),t(pr,"DEBUG",(()=>qr)),t(pr,"A",(()=>Vr)),t(pr,"ASCII",(()=>Gr)),t(pr,"Y",(()=>Ur)),t(pr,"STICKY",(()=>$r)),t(pr,"G",(()=>Wr)),t(pr,"GLOBAL",(()=>Hr)),t(pr,"J",(()=>Yr)),t(pr,"JSSTRICT",(()=>Xr)),t(pr,"error",(()=>Zr)),t(pr,"ReIndexError",(()=>Kr)),t(pr,"Match",(()=>Jr)),t(pr,"compile",(()=>t_)),t(pr,"escape",(()=>c_)),t(pr,"Regex",(()=>Qr)),t(pr,"PyRegExp",(()=>e_)),t(pr,"search",(()=>r_)),t(pr,"match",(()=>__)),t(pr,"fullmatch",(()=>n_)),t(pr,"py_split",(()=>a_)),t(pr,"findall",(()=>i_)),t(pr,"finditer",(()=>o_)),t(pr,"sub",(()=>l_)),t(pr,"subn",(()=>s_)),t(pr,"purge",(()=>u_)),t(pr,"translate",(()=>Pr));tr=a("hoVWB"),tr=a("hoVWB");var hr={};(0,tr.__nest__)(hr,"",pr);var gr="re.translate",vr=(0,tr.__class__)("Group",[tr.object],{__module__:gr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"start":t=a[i];break;case"end":r=a[i];break;case"klass":_=a[i]}}}e.start=t,e.end=r,e.klass=_}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.str,null,(0,tr.tuple)([e.start,e.end,e.klass]))}))}}),mr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("tokens"===_)e=r[_]}}for(var n,a=[],i=0,o=e,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((n=void 0,n=s.py_name,(0,tr.__call__)(n.startswith,n,"("))))!function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.__call__)(vr,null,i,null,s.py_name))}();else if((0,tr.__t__)((0,tr.__eq__)(s.py_name,")")))for(var c=(0,tr.__call__)(tr.py_reversed,null,a),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u);(0,tr.__t__)(null===f.end)&&(f.end=i)}i=(0,tr.__call__)(tr.__iadd__,null,i,1)}return a},yr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("tokens"===_)e=r[_]}}(0,tr.__call__)(mr,null,e);for(var n=0,a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)((0,tr.__eq__)(o.py_name,"(")))n=(0,tr.__call__)(tr.__iadd__,null,n,1)}return n},wr=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"groupInfo":e=n[a];break;case"namedGroups":t=n[a];break;case"groupRef":r=n[a]}}}try{var i=(0,tr.__call__)(tr.int,null,r)}catch(e){i=(0,tr.__getitem__)(t,r)}for(var o=0,l=e,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)((0,tr.__eq__)(c.klass,"("))){o=(0,tr.__call__)(tr.__iadd__,null,o,1);if((0,tr.__t__)((0,tr.__eq__)(o,i)))return c}}},br=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"tokens":e=_[n];break;case"namedGroups":t=_[n]}}}for(var a,i=[],o=(0,tr.__call__)(mr,null,e),l=o,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)((0,tr.__eq__)(c.klass,"(?<"))){var u=(0,tr.__getslice__)(e,0,null,1),f=(0,tr.__getslice__)(e,0,null,1),d=c.start,p=c.end,h=(0,tr.__getitem__)(e,(0,tr.__add__)(d,1)).py_name,g=(0,tr.__call__)(wr,null,o,t,h),v=(0,tr.__getitem__)(e,(0,tr.__add__)(g.end,1));if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(v.py_name,["?","*"]))||(a=void 0,a=v.py_name,(0,tr.__call__)(a.startswith,a,"{0,")))){(0,tr.__t__)((0,tr.__eq__)(v.py_name,"?"))?(0,tr.__setitem__)(u,(0,tr.__add__)(g.end,1),null):(0,tr.__t__)((0,tr.__eq__)(v.py_name,"*"))?(0,tr.__setitem__)(u,(0,tr.__add__)(g.end,1),(0,tr.__call__)(kr,null,"+")):(0,tr.__t__)(function(){var e=v.py_name;return(0,tr.__call__)(e.startswith,e,"{0,")}())&&(0,tr.__setslice__)((0,tr.__getitem__)(u,(0,tr.__add__)(g.end,1)).py_name,0,3,null,"{1,"),(0,tr.__setitem__)(f,(0,tr.__add__)(g.end,1),null);for(var m=!1,y=d;y<p;y++)if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,y).py_name,"|"))){m=!0;!function(){var e=f;(0,tr.__call__)(e.py_pop,e,p)}(),(0,tr.__setslice__)(u,y,(0,tr.__add__)(p,1),null,[]),(0,tr.__setslice__)(f,d,(0,tr.__add__)(y,1),null,[]);break}(0,tr.__t__)(!(0,tr.__t__)(m))&&((0,tr.__setslice__)(f,d,(0,tr.__add__)(p,1),null,[]),function(){var e=u;(0,tr.__call__)(e.py_pop,e,p)}()),(0,tr.__setslice__)(u,d,(0,tr.__add__)(d,3),null,[]),(0,tr.__setslice__)(f,g.start,(0,tr.__add__)(g.end,1),null,[(0,tr.__call__)(kr,null,"("),(0,tr.__call__)(kr,null,")")]),function(){var e=u;(0,tr.__call__)(e.remove,e,null)}(),function(){var e=f;(0,tr.__call__)(e.remove,e,null)}(),function(){var e=i;(0,tr.__call__)(e.append,e,u)}(),function(){var e=i;(0,tr.__call__)(e.append,e,f)}()}else{for(y=d;y<p;y++)if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(u,y).py_name,"|"))){u=(0,tr.__getslice__)(e,0,y,1);!function(){var t=u;(0,tr.__call__)(t.extend,t,(0,tr.__getslice__)(e,(0,tr.__add__)(p,1),null,1))}();break}(0,tr.__setslice__)(u,d,(0,tr.__add__)(d,3),null,[]),function(){var e=i;(0,tr.__call__)(e.append,e,u)}()}break}}if((0,tr.__t__)(!(0,tr.__t__)(i)))return[e];var w=[];for(l=i,s=0;s<(0,tr.len)(l);s++){var b=(0,tr.__getitem__)(l,s);!function(){var e=w;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(br,null,b,t))}()}return w},kr=(0,tr.__class__)("Token",[tr.object],{__module__:gr,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"py_name":t=a[i];break;case"paras":r=a[i];break;case"pure":_=a[i]}}}if((0,tr.__t__)(null===r))r=[];e.py_name=t,e.paras=r,e.pure=_,e.isModeGroup=!1}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.py_name}))},get resolve(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n="",a=e.paras,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);n=(0,tr.__call__)(tr.__iadd__,null,n,(0,tr.__call__)(tr.str,null,o))}return(0,tr.__add__)(e.py_name,n)}))}}),xr=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"stack":e=_[n];break;case"queue":t=_[n]}}}var a,i=!(0,tr.__t__)((0,tr.__call__)(tr.bool,null,t));if((0,tr.__t__)(!(0,tr.__t__)(i))){a=e,(0,tr.__call__)(a.append,a,(0,tr.__call__)(kr,null,(0,tr.__getitem__)(t,0),[],!0));t=(0,tr.__getslice__)(t,1,null,1)}return(0,tr.tuple)([e,t,i])},Or=function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"stack":e=a[i];break;case"queue":t=a[i];break;case"namedGroups":r=a[i];break;case"flags":_=a[i]}}}var o=!1,l=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e),1);if((0,tr.__t__)((0,tr.__lt__)((0,tr.__call__)(tr.len,null,e),2))){e=(v=(0,tr.__call__)(xr,null,e,t))[0],t=v[1],o=v[2];return(0,tr.tuple)([e,t,_,o])}var s,c,u=(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),0))?(0,tr.__getitem__)(e,l):(0,tr.__call__)(kr,null,""),f=(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),1))?(0,tr.__getitem__)(e,(0,tr.__sub__)(l,1)):(0,tr.__call__)(kr,null,"");if((0,tr.__t__)(false)){for(var d=e,p=0;p<(0,tr.len)(d);p++){var h=(0,tr.__getitem__)(d,p);s=void 0,c=void 0,c=console,(0,tr.__call__)(c.log,c,(s=h,(0,tr.__call__)(s.resolve,s)),"\t",(0,tr.__kwargtrans__)({end:""}))}!function(){var e=console;(0,tr.__call__)(e.log,e,"")}()}if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"\\")))(0,tr.__t__)((0,tr.__eq__)(u.py_name,"A"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"^")]):(0,tr.__t__)((0,tr.__eq__)(u.py_name,"a"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"\\07")]):(0,tr.__t__)((0,tr.__eq__)(u.py_name,"Z"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"$")]):(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,(0,tr.__add__)("\\",u.py_name))]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(u.py_name,"$"))&&u.pure))!function(){var t=e;(0,tr.__call__)(t.py_pop,t)}(),function(){var t=e;(0,tr.__call__)(t.extend,t,[(0,tr.__call__)(kr,null,"(?="),(0,tr.__call__)(kr,null,"\\n"),(0,tr.__call__)(kr,null,"?"),(0,tr.__call__)(kr,null,"$"),(0,tr.__call__)(kr,null,")")])}();else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"{"))){(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(u.py_name,","))&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,f.paras),0))?(function(){var e=f.paras;(0,tr.__call__)(e.append,e,"0")}(),function(){var e=f.paras;(0,tr.__call__)(e.append,e,",")}()):(0,tr.__t__)((0,tr.__eq__)(u.py_name,"}"))?(!function(){var e=f.paras;(0,tr.__call__)(e.append,e,"}")}(),f.py_name=function(){var e=f;return(0,tr.__call__)(e.resolve,e)}(),f.paras=[]):function(){var e=f.paras;(0,tr.__call__)(e.append,e,u.py_name)}();e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(1),1)}else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(f.py_name,"["))&&(0,tr.__eq__)(u.py_name,"^")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"[^")]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(f.py_name,"("))&&(0,tr.__eq__)(u.py_name,"?")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"(?")]);else if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(f.py_name,["*","+","?"]))&&(0,tr.__eq__)(u.py_name,"?")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,(0,tr.__add__)(f.py_name,"?"))]);else if((0,tr.__t__)((0,tr.__t__)(f.isModeGroup)&&(0,tr.__eq__)(u.py_name,")")))e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(2),1);else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?")))if((0,tr.__t__)((0,tr.__in__)(u.py_name,"aiLmsux"))){if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"i")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.IGNORECASE);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"L")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.LOCALE);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"m")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.MULTILINE);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"s")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.DOTALL);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"u")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.UNICODE);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"x")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.VERBOSE);else if((0,tr.__t__)((0,tr.__eq__)(u.py_name,"a")))_=(0,tr.__call__)(tr.__ior__,null,_,hr.ASCII);!function(){var t=e;(0,tr.__call__)(t.py_pop,t)}(),f.isModeGroup=!0}else{(0,tr.__t__)((0,tr.__eq__)(u.py_name,"("))&&(u.py_name="<");var g=(0,tr.__call__)(kr,null,(0,tr.__add__)("(?",u.py_name));(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[g])}else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?<")))(0,tr.__t__)((0,tr.__eq__)(u.py_name,")"))?((0,tr.__setslice__)(e,(0,tr.__neg__)(1),null,null,[(0,tr.__call__)(kr,null,(0,tr.__call__)("".join,"",f.paras)),(0,tr.__call__)(kr,null,">")]),f.paras=[]):(function(){var e=f.paras;(0,tr.__call__)(e.append,e,u.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?P")))(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,(0,tr.__add__)("(?P",u.py_name))]);else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?P<")))(0,tr.__t__)((0,tr.__eq__)(u.py_name,">"))?((0,tr.__setitem__)(r,(0,tr.__call__)("".join,"",f.paras),(0,tr.__add__)((0,tr.__call__)(yr,null,e),1)),(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,"(")])):(function(){var e=f.paras;(0,tr.__call__)(e.append,e,u.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?P=")))(0,tr.__t__)((0,tr.__eq__)(u.py_name,")"))?(0,tr.__setslice__)(e,(0,tr.__neg__)(2),null,null,[(0,tr.__call__)(kr,null,(0,tr.__add__)("\\",(0,tr.__call__)(tr.str,null,(0,tr.__getitem__)(r,(0,tr.__getitem__)(f.paras,0)))))]):(0,tr.__t__)(!(0,tr.__t__)(f.paras))?(function(){var e=f.paras;(0,tr.__call__)(e.append,e,u.py_name)}(),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}()):((0,tr.__setitem__)(f.paras,0,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(f.paras,0),u.py_name)),function(){var t=e;(0,tr.__call__)(t.py_pop,t)}());else if((0,tr.__t__)((0,tr.__eq__)(f.py_name,"(?#")))if((0,tr.__t__)((0,tr.__eq__)(u.py_name,")")))e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(2),1);else e=(0,tr.__getslice__)(e,0,(0,tr.__neg__)(1),1);else{var v;e=(v=(0,tr.__call__)(xr,null,e,t))[0],t=v[1],o=v[2]}return(0,tr.tuple)([e,t,_,o])},Pr=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("rgx"===_)e=r[_]}}for(var n=[],a=(0,tr.__call__)(tr.list,null,e),i=0,o=(0,tr.__call__)(tr.dict,null),l=0;(0,tr.__t__)(!0);){l=(0,tr.__call__)(tr.__iadd__,null,l,1);if((0,tr.__t__)((0,tr.__gt__)(l,1e3))){var s=(0,tr.__call__)(tr.Exception,null,"Too many iterations in converting regex from Python to JavaScript");throw s.__cause__=null,s}var c=(0,tr.__call__)(Or,null,n,a,o,i),u=(n=c[0],a=c[1],i=c[2],c[3]);if((0,tr.__t__)(u))break}for(var f,d=(0,tr.__call__)(br,null,n,o),p=(0,tr.__call__)(tr.len,null,d),h=[],g=0;g<(0,tr.__call__)(tr.len,null,d);g++)f=void 0,f=h,(0,tr.__call__)(f.extend,f,(0,tr.__getitem__)(d,g)),(0,tr.__t__)((0,tr.__lt__)(g,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,d),1)))&&function(){var e=h;(0,tr.__call__)(e.append,e,(0,tr.__call__)(kr,null,"|"))}();n=h,(0,tr.__call__)(mr,null,n);for(var v=[],m=n,y=0;y<(0,tr.len)(m);y++){var w=(0,tr.__getitem__)(m,y),b=function(){var e=w;return(0,tr.__call__)(e.resolve,e)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__and__)(i,hr.DOTALL))&&(0,tr.__eq__)(b,".")))b="[\\s\\S]";!function(){var e=v;(0,tr.__call__)(e.append,e,b)}()}return(0,tr.tuple)([v,i,o,(0,tr.__call__)(yr,null,n),p])},Er="re",Cr=(0,tr.__lshift__)(1,0),Ar=Cr,Sr=(0,tr.__lshift__)(1,1),Nr=Sr,Tr=(0,tr.__lshift__)(1,2),Lr=Tr,Mr=(0,tr.__lshift__)(1,3),jr=Mr,Ir=(0,tr.__lshift__)(1,4),Dr=Ir,Rr=(0,tr.__lshift__)(1,5),Fr=Rr,zr=(0,tr.__lshift__)(1,6),Br=zr,qr=(0,tr.__lshift__)(1,7),Vr=(0,tr.__lshift__)(1,8),Gr=Vr,Ur=(0,tr.__lshift__)(1,16),$r=Ur,Wr=(0,tr.__lshift__)(1,17),Hr=Wr,Yr=(0,tr.__lshift__)(1,19),Xr=Yr,Zr=(0,tr.__class__)("error",[tr.Exception],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"msg":t=o[l];break;case"error":r=o[l];break;case"pattern":_=o[l];break;case"flags":n=o[l];break;case"pos":a=o[l]}}}var s;s=tr.Exception,(0,tr.__call__)(s.__init__,s,e,t,(0,tr.__kwargtrans__)({error:r})),e.pattern=_,e.flags=n,e.pos=a}))}}),Kr=(0,tr.__class__)("ReIndexError",[tr.IndexError],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n;n=tr.IndexError,(0,tr.__call__)(n.__init__,n,e,"no such group")}))}}),Jr=(0,tr.__class__)("Match",[tr.object],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"mObj":t=l[s];break;case"string":r=l[s];break;case"pos":_=l[s];break;case"endpos":n=l[s];break;case"rObj":a=l[s];break;case"namedGroups":i=l[s]}}}for(var c,u=(0,tr.__call__)(tr.enumerate,null,t),f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=d[0];d[1];(0,tr.__setitem__)(t,p,(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(t,p),void 0))?null:(0,tr.__getitem__)(t,p))}e._obj=t,e._pos=_,e._endpos=n,e._re=a,e._string=r,e._namedGroups=i,e._lastindex=(c=e,(0,tr.__call__)(c._lastMatchGroup,c)),(0,tr.__t__)(null!==e._namedGroups)?e._lastgroup=(0,tr.__getitem__)(e._namedGroups,e._lastindex):e._lastgroup=null}))},get _getPos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._pos}))},get _setPos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getEndPos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._endpos}))},get _setEndPos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getRe(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._re}))},get _setRe(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getString(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._string}))},get _setString(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getLastGroup(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._lastgroup}))},get _setLastGroup(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getLastIndex(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._lastindex}))},get _setLastIndex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _lastMatchGroup(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e._obj),1))){for(var n=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e._obj),1);n>0;n--)if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,n)))return n;return null}return null}))},get expand(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"template":t=_[n]}}}var a=(0,tr.__call__)(tr.NotImplementedError,null);throw a.__cause__=null,a}))},get group(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}var n=(0,tr.tuple)([].slice.apply(arguments).slice(1,t+1))}else n=(0,tr.tuple)();var a,i=[];if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,n),0)))for(var o=n,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.py_typeof)(s)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(c=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,c;if((0,tr.__t__)(!(0,tr.__in__)(s,(a=void 0,a=e._namedGroups,(0,tr.__call__)(a.py_keys,a)))))throw(c=(0,tr.__call__)(Kr,null)).__cause__=null,c;!function(){var t=i;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,(0,tr.__getitem__)(e._namedGroups,s)))}()}else{var c;if((0,tr.__t__)((0,tr.__ge__)(s,(0,tr.__call__)(tr.len,null,e._obj))))throw(c=(0,tr.__call__)(Kr,null)).__cause__=null,c;!function(){var t=i;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,s))}()}}else!function(){var t=i;(0,tr.__call__)(t.append,t,(0,tr.__getitem__)(e._obj,0))}();return(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,i),1))?(0,tr.__getitem__)(i,0):(0,tr.__call__)(tr.tuple,null,i)}))},get groups(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"py_default":t=_[n]}}}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e._obj),1))){var a=(0,tr.__getslice__)(e._obj,1,null,1);return(0,tr.__call__)(tr.tuple,null,function(){for(var e,r=[],_=a,n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__t__)(null!==i)?i:t)}return r}())}return(0,tr.__call__)(tr.tuple,null)}))},get groupdict(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"py_default":t=_[n]}}}if((0,tr.__t__)(null!==e._namedGroups)){for(var a=(0,tr.dict)({}),i=(f=e._namedGroups,(0,tr.__call__)(f.py_items,f)),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=(0,tr.__getitem__)(e._obj,c);(0,tr.__setitem__)(a,s,(0,tr.__t__)(null!==u)?u:t)}return a}var f,d=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available");throw d.__cause__=null,d}))},get start(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"group":t=_[n]}}}var a,i=0;if((0,tr.__t__)((0,tr.py_typeof)(t)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(o=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__in__)(t,(a=e._namedGroups,(0,tr.__call__)(a.py_keys,a)))))throw(o=(0,tr.__call__)(Kr,null)).__cause__=null,o;i=(0,tr.__getitem__)(e._namedGroups,t)}else i=t;if((0,tr.__t__)((0,tr.__ge__)(i,(0,tr.__call__)(tr.len,null,e._obj))))throw(o=(0,tr.__call__)(Kr,null)).__cause__=null,o;if((0,tr.__t__)((0,tr.__eq__)(i,0)))return e._obj.index;if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,i))){var o,l=(0,tr.__call__)(t_,null,(0,tr.__call__)(c_,null,(0,tr.__getitem__)(e._obj,i)),e._re.flags),s=function(){var t=l;return(0,tr.__call__)(t.search,t,(0,tr.__getitem__)(e._obj,0))}();if((0,tr.__t__)(s))return(0,tr.__add__)(e._obj.index,function(){var e=s;return(0,tr.__call__)(e.start,e)}());throw(o=(0,tr.__call__)(tr.Exception,null,"Failed to find capture group")).__cause__=null,o}return(0,tr.__neg__)(1)}))},get end(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"group":t=_[n]}}}var a,i=0;if((0,tr.__t__)((0,tr.py_typeof)(t)===tr.str)){if(!(0,tr.__t__)(null!==e._namedGroups))throw(o=(0,tr.__call__)(tr.NotImplementedError,null,"No NamedGroups Available")).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__in__)(t,(a=e._namedGroups,(0,tr.__call__)(a.py_keys,a)))))throw(o=(0,tr.__call__)(Kr,null)).__cause__=null,o;i=(0,tr.__getitem__)(e._namedGroups,t)}else i=t;if((0,tr.__t__)((0,tr.__ge__)(i,(0,tr.__call__)(tr.len,null,e._obj))))throw(o=(0,tr.__call__)(Kr,null)).__cause__=null,o;if((0,tr.__t__)((0,tr.__eq__)(i,0)))return(0,tr.__add__)(e._obj.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e._obj,0)));if((0,tr.__t__)(null!==(0,tr.__getitem__)(e._obj,i))){var o,l=(0,tr.__call__)(t_,null,(0,tr.__call__)(c_,null,(0,tr.__getitem__)(e._obj,i)),e._re.flags),s=function(){var t=l;return(0,tr.__call__)(t.search,t,(0,tr.__getitem__)(e._obj,0))}();if((0,tr.__t__)(s))return(0,tr.__add__)(e._obj.index,function(){var e=s;return(0,tr.__call__)(e.end,e)}());throw(o=(0,tr.__call__)(tr.Exception,null,"Failed to find capture group")).__cause__=null,o}return(0,tr.__neg__)(1)}))},get span(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"group":t=_[n]}}}return(0,tr.tuple)([(a=e,(0,tr.__call__)(a.start,a,t)),function(){var r=e;return(0,tr.__call__)(r.end,r,t)}()]);var a}))}});Object.defineProperty(Jr,"pos",tr.property.call(Jr,Jr._getPos,Jr._setPos)),Object.defineProperty(Jr,"endpos",tr.property.call(Jr,Jr._getEndPos,Jr._setEndPos)),Object.defineProperty(Jr,"re",tr.property.call(Jr,Jr._getRe,Jr._setRe)),Object.defineProperty(Jr,"string",tr.property.call(Jr,Jr._getString,Jr._setString)),Object.defineProperty(Jr,"lastgroup",tr.property.call(Jr,Jr._getLastGroup,Jr._setLastGroup)),Object.defineProperty(Jr,"lastindex",tr.property.call(Jr,Jr._getLastIndex,Jr._setLastIndex));var Qr=(0,tr.__class__)("Regex",[tr.object],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"pattern":t=n[a];break;case"flags":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__gt__)((0,tr.__and__)(r,Gr),0))))r=(0,tr.__call__)(tr.__ior__,null,r,Fr);e._flags=r;var i,o=(i=e,(0,tr.__call__)(i._compileWrapper,i,t,r));e._jsFlags=o[0],e._obj=o[1],e._jspattern=t,e._pypattern=t;o=function(){var _=e;return(0,tr.__call__)(_._compileWrapper,_,(0,tr.__add__)(t,"|"),r)}(),o[0];var l=o[1];e._groups=(0,tr.__sub__)(function(){var e=l;return(0,tr.__call__)(e.exec,e,"")}().length,1),e._groupindex=null}))},get _getPattern(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n;return n=e._pypattern,(0,tr.__call__)(n.py_replace,n,"\\","\\\\")}))},get _setPattern(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getFlags(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._flags}))},get _setFlags(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getGroups(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._groups}))},get _setGroups(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _getGroupIndex(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)(null===e._groupindex)?(0,tr.dict)({}):e._groupindex}))},get _setGroupIndex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val":t=_[n]}}}var a=(0,tr.__call__)(tr.AttributeError,null,"readonly attribute");throw a.__cause__=null,a}))},get _compileWrapper(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"pattern":t=n[a];break;case"flags":r=n[a]}}}var i,o=(i=e,(0,tr.__call__)(i._convertFlags,i,r)),l=null,s=null;try{l=new RegExp(t,o)}catch(e){s=e}if((0,tr.__t__)(null!==s)){var c=(0,tr.__call__)(Zr,null,s.message,s,t,r);throw c.__cause__=null,c}return(0,tr.tuple)([o,l])}))},get _convertFlags(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"flags":t=_[n]}}}var a=[(0,tr.tuple)([qr,""]),(0,tr.tuple)([Nr,"i"]),(0,tr.tuple)([jr,"m"]),(0,tr.tuple)([$r,"y"]),(0,tr.tuple)([Hr,"g"]),(0,tr.tuple)([Fr,"u"])];return(0,tr.__call__)("".join,"",function(){for(var e,r=[],_=a,n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n);(0,tr.__t__)((0,tr.__gt__)((0,tr.__and__)((0,tr.__getitem__)(i,0),t),0))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(i,1)))}return r}())}))},get _getTargetStr(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}var o=(0,tr.__call__)(tr.len,null,t);if((0,tr.__t__)(null!==_)&&(0,tr.__t__)((0,tr.__lt__)(_,o)))o=_;if((0,tr.__t__)((0,tr.__lt__)(o,0)))o=0;return(0,tr.__getslice__)(t,r,o,1)}))},get _patternHasCaptures(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__gt__)(e._groups,0)}))},get search(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}if((0,tr.__t__)(null===_))_=(0,tr.__call__)(tr.len,null,t);var o,l=e._obj,s=(o=l,(0,tr.__call__)(o.exec,o,t));return(0,tr.__t__)(s)?(0,tr.__t__)((0,tr.__t__)((0,tr.__lt__)(s.index,r))||(0,tr.__gt__)(s.index,_))?null:(0,tr.__call__)(Jr,null,s,t,r,_,e,e._groupindex):null}))},get match(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}var o=t;if((0,tr.__t__)(null!==_))o=(0,tr.__getslice__)(o,0,_,1);else _=(0,tr.__call__)(tr.len,null,t);var l,s=e._obj,c=(l=s,(0,tr.__call__)(l.exec,l,o));return(0,tr.__t__)(c)&&(0,tr.__t__)((0,tr.__eq__)(c.index,r))?(0,tr.__call__)(Jr,null,c,t,r,_,e,e._groupindex):null}))},get fullmatch(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}var o=t,l=(0,tr.__call__)(tr.len,null,t);if((0,tr.__t__)(null!==_))o=(0,tr.__getslice__)(o,0,_,1),l=_;var s,c=e._obj,u=(s=c,(0,tr.__call__)(s.exec,s,o));if((0,tr.__t__)(u)){var f=(0,tr.__add__)(u.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(u,0)));return(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(u.index,r))&&(0,tr.__eq__)(f,l))?(0,tr.__call__)(Jr,null,u,t,r,l,e,e._groupindex):null}return null}))},get py_split(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"string":t=n[a];break;case"maxsplit":r=n[a]}}}if((0,tr.__t__)((0,tr.__lt__)(r,0)))return[t];var i,o=e._obj;if((0,tr.__t__)((0,tr.__eq__)(r,0)))return i=t,(0,tr.__call__)(i.py_split,i,o);for(var l=e._flags,s=(l=(0,tr.__call__)(tr.__ior__,null,l,Hr),function(){var t=e;return(0,tr.__call__)(t._compileWrapper,t,e._jspattern,l)}()),c=(s[0],o=s[1],[]),u=null,f=0,d=0;d<r;d++){var p=function(){var e=o;return(0,tr.__call__)(e.exec,e,t)}();if(!(0,tr.__t__)(p))break;f=(0,tr.__call__)(tr.__iadd__,null,f,1);if((0,tr.__t__)(null!==u)){var h=(0,tr.__add__)(u.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(u,0))),g=(0,tr.__getslice__)(t,h,p.index,1);!function(){var e=c;(0,tr.__call__)(e.append,e,g)}(),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,p),1))&&function(){var e=c;(0,tr.__call__)(e.extend,e,(0,tr.__getslice__)(p,1,null,1))}()}else{g=(0,tr.__getslice__)(t,0,p.index,1);!function(){var e=c;(0,tr.__call__)(e.append,e,g)}(),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,p),1))&&function(){var e=c;(0,tr.__call__)(e.extend,e,(0,tr.__getslice__)(p,1,null,1))}()}u=p}if((0,tr.__t__)(null!==u)){var v=(0,tr.__add__)(u.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(u,0))),m=(0,tr.__getslice__)(t,v,null,1);!function(){var e=c;(0,tr.__call__)(e.append,e,m)}()}return c}))},get _findAllMatches(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}for(var o,l=(o=e,(0,tr.__call__)(o._getTargetStr,o,t,r,_)),s=e._flags,c=(s=(0,tr.__call__)(tr.__ior__,null,s,Hr),function(){var t=e;return(0,tr.__call__)(t._compileWrapper,t,e._jspattern,s)}()),u=(c[0],c[1]),f=[];(0,tr.__t__)(!0);){var d=function(){var e=u;return(0,tr.__call__)(e.exec,e,l)}();if(!(0,tr.__t__)(d))break;!function(){var e=f;(0,tr.__call__)(e.append,e,d)}()}return f}))},get findall(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}var o,l=(o=e,(0,tr.__call__)(o._findAllMatches,o,t,r,_)),s=(0,tr.__call__)(tr.map,null,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),2))?(0,tr.__call__)(tr.tuple,null,(0,tr.__getslice__)(e,1,null,1)):(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e),2))?(0,tr.__getitem__)(e,1):(0,tr.__getitem__)(e,0)}),l);return s}))},get finditer(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"string":t=a[i];break;case"pos":r=a[i];break;case"endpos":_=a[i]}}}var o,l=(o=e,(0,tr.__call__)(o._findAllMatches,o,t,r,_)),s=(0,tr.__call__)(tr.map,null,(function(r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)if("m"===a)r=n[a]}}return(0,tr.__call__)(Jr,null,r,t,0,(0,tr.__call__)(tr.len,null,t),e,e._groupindex)}),l);return(0,tr.__call__)(tr.py_iter,null,s)}))},get sub(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"repl":t=a[i];break;case"string":r=a[i];break;case"count":_=a[i]}}}var o,l=(o=e,(0,tr.__call__)(o.subn,o,t,r,_)),s=l[0];l[1];return s}))},get subn(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"repl":t=a[i];break;case"string":r=a[i];break;case"count":_=a[i]}}}for(var o,l=e._flags,s=(l=(0,tr.__call__)(tr.__ior__,null,l,Hr),o=e,(0,tr.__call__)(o._compileWrapper,o,e._jspattern,l)),c=(s[0],s[1]),u="",f=0,d=(0,tr.__neg__)(1);(0,tr.__t__)(!0);){if((0,tr.__t__)((0,tr.__gt__)(_,0))&&(0,tr.__t__)((0,tr.__ge__)(f,_))){if((0,tr.__t__)((0,tr.__lt__)(d,0)))return(0,tr.tuple)([u,f]);u=(0,tr.__call__)(tr.__iadd__,null,u,(0,tr.__getslice__)(r,d,p.index,1));return(0,tr.tuple)([u,f])}var p=function(){var e=c;return(0,tr.__call__)(e.exec,e,r)}();if(!(0,tr.__t__)(p)){if((0,tr.__t__)((0,tr.__lt__)(d,0)))return(0,tr.tuple)([r,0]);u=(0,tr.__call__)(tr.__iadd__,null,u,(0,tr.__getslice__)(r,d,null,1));return(0,tr.tuple)([u,f])}if((0,tr.__t__)((0,tr.__lt__)(d,0)))var u=(0,tr.__call__)(tr.__iadd__,null,u,(0,tr.__getslice__)(r,0,p.index,1));else u=(0,tr.__call__)(tr.__iadd__,null,u,(0,tr.__getslice__)(r,d,p.index,1));if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,t))){var h=(0,tr.__call__)(t,null,(0,tr.__call__)(Jr,null,p,r,0,(0,tr.__call__)(tr.len,null,r),e,e._groupindex));u=(0,tr.__call__)(tr.__iadd__,null,u,h)}else u=(0,tr.__call__)(tr.__iadd__,null,u,t);f=(0,tr.__call__)(tr.__iadd__,null,f,1),d=(0,tr.__add__)(p.index,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(p,0)))}}))}});Object.defineProperty(Qr,"pattern",tr.property.call(Qr,Qr._getPattern,Qr._setPattern)),Object.defineProperty(Qr,"flags",tr.property.call(Qr,Qr._getFlags,Qr._setFlags)),Object.defineProperty(Qr,"groups",tr.property.call(Qr,Qr._getGroups,Qr._setGroups)),Object.defineProperty(Qr,"groupindex",tr.property.call(Qr,Qr._getGroupIndex,Qr._setGroupIndex));var e_=(0,tr.__class__)("PyRegExp",[Qr],{__module__:Er,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"pyPattern":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(Pr,null,t),l=o[0],s=o[1],c=o[2],u=o[3],f=o[4],d=(r=(0,tr.__call__)(tr.__ior__,null,r,s),(0,tr.__call__)("".join,"",l));i=Qr,(0,tr.__call__)(i.__init__,i,e,d,r),e._pypattern=t,e._nsplits=f,e._jsTokens=l,e._capgroups=u,e._groupindex=c}))}}),t_=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"pattern":e=_[n];break;case"flags":t=_[n]}}}if((0,tr.__t__)((0,tr.__and__)(t,Xr)))var a=(0,tr.__call__)(Qr,null,e,t);else a=(0,tr.__call__)(e_,null,e,t);return a},r_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pattern":e=n[a];break;case"string":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(t_,null,e,r);return i=o,(0,tr.__call__)(i.search,i,t)},__=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pattern":e=n[a];break;case"string":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(t_,null,e,r);return i=o,(0,tr.__call__)(i.match,i,t)},n_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pattern":e=n[a];break;case"string":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(t_,null,e,r);return i=o,(0,tr.__call__)(i.fullmatch,i,t)},a_=function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"pattern":e=a[i];break;case"string":t=a[i];break;case"maxsplit":r=a[i];break;case"flags":_=a[i]}}}var o,l=(0,tr.__call__)(t_,null,e,_);return o=l,(0,tr.__call__)(o.py_split,o,t,r)},i_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pattern":e=n[a];break;case"string":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(t_,null,e,r);return i=o,(0,tr.__call__)(i.findall,i,t)},o_=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pattern":e=n[a];break;case"string":t=n[a];break;case"flags":r=n[a]}}}var i,o=(0,tr.__call__)(t_,null,e,r);return i=o,(0,tr.__call__)(i.finditer,i,t)},l_=function(e,t,r,_,n){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"pattern":e=i[o];break;case"repl":t=i[o];break;case"string":r=i[o];break;case"count":_=i[o];break;case"flags":n=i[o]}}}var l,s=(0,tr.__call__)(t_,null,e,n);return l=s,(0,tr.__call__)(l.sub,l,t,r,_)},s_=function(e,t,r,_,n){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"pattern":e=i[o];break;case"repl":t=i[o];break;case"string":r=i[o];break;case"count":_=i[o];break;case"flags":n=i[o]}}}var l,s=(0,tr.__call__)(t_,null,e,n);return l=s,(0,tr.__call__)(l.subn,l,t,r,_)},c_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("string"===_)e=r[_]}}var n;if(n=e.replace(/[^A-Za-z:;\d]/g,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,0),"\\"))?"\\\\\\\\":(0,tr.__add__)("\\\\",(0,tr.__getitem__)(e,0))})),(0,tr.__t__)(null!==n))return n;var a=(0,tr.__call__)(tr.Exception,null,"Failed to escape the passed string");throw a.__cause__=null,a},u_=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}}},f_={};(0,tr.__nest__)(f_,"",pr);var d_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("text"===_)e=r[_]}}var n,a="[!\"#$%'()*+,./:;<=>?@\\[\\\\\\]^_`{|}~-]",i=(e=(n=f_,(0,tr.__call__)(n.sub,n,(0,tr.__add__)((0,tr.__add__)("^'(?=",a),"\\\\B|s\\b)"),"",e)),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,(0,tr.__add__)((0,tr.__add__)('^"(?=',a),"\\\\B)"),"",e)}(),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"\"'(?=\\w)","",e)}(),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"'\"(?=\\w)","",e)}(),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"\\b'(?=\\d{2}s)","",e)}(),"[^ \\t\\r\\n\\[{(-]"),o=function(){var e=f_;return(0,tr.__call__)(e.compile,e,"(\\s|[]|--|[-])'(?=\\w)")}(),l=(e=function(){var t=o;return(0,tr.__call__)(t.sub,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((n=e,(0,tr.__call__)(n.group,n,1)),"");var n}),e)}(),function(){var e=f_;return(0,tr.__call__)(e.compile,e,(0,tr.__add__)((0,tr.__add__)("(",i),")'(?!\\s|s\\b|\\d)"))}()),s=(e=function(){var t=l;return(0,tr.__call__)(t.sub,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((n=e,(0,tr.__call__)(n.group,n,1)),"");var n}),e)}(),l=function(){var e=f_;return(0,tr.__call__)(e.compile,e,(0,tr.__add__)((0,tr.__add__)("(",i),")'(\\s|s\\b)"))}(),e=function(){var t=l;return(0,tr.__call__)(t.sub,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)((n=e,(0,tr.__call__)(n.group,n,1)),""),function(){var t=e;return(0,tr.__call__)(t.group,t,2)}());var n}),e)}(),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"'","",e)}(),function(){var e=f_;return(0,tr.__call__)(e.compile,e,'(\\s|[]|--|[-])"(?=\\w)')}()),c=(e=function(){var t=s;return(0,tr.__call__)(t.sub,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((n=e,(0,tr.__call__)(n.group,n,1)),"");var n}),e)}(),function(){var e=f_;return(0,tr.__call__)(e.compile,e,'"(?=\\s)')}());e=function(){var t=c;return(0,tr.__call__)(t.sub,t,"",e)}(),c=function(){var e=f_;return(0,tr.__call__)(e.compile,e,(0,tr.__add__)((0,tr.__add__)('^"(?=',a),")"))}(),e=function(){var t=c;return(0,tr.__call__)(t.sub,t,"",e)}(),c=function(){var e=f_;return(0,tr.__call__)(e.compile,e,(0,tr.__add__)((0,tr.__add__)("(",i),')"'))}(),e=function(){var t=c;return(0,tr.__call__)(t.sub,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((n=e,(0,tr.__call__)(n.group,n,1)),"");var n}),e)}(),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,'"',"",e)}();return e},p_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("text"===_)e=r[_]}}var n;n=f_,e=(0,tr.__call__)(n.sub,n,"`","",e),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"'","",e)}();return e},h_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("text"===_)e=r[_]}}var n;n=f_,e=(0,tr.__call__)(n.sub,n,"``","",e),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"''","",e)}();return e},g_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("text"===_)e=r[_]}}var n;n=f_,e=(0,tr.__call__)(n.sub,n,"---","",e),e=function(){var t=f_;return(0,tr.__call__)(t.sub,t,"--","",e)}();return e},v_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("text"===_)e=r[_]}}var n;return e=(n=f_,(0,tr.__call__)(n.sub,n,"\\.\\.\\.","",e))},m_=(tr=a("hoVWB"),tr=a("hoVWB"),{});t(m_,"getLogger",(()=>b_)),t(m_,"basicConfig",(()=>k_));tr=a("hoVWB");r(s=a("3krpC")).formatters.r=e=>(0,tr.repr)(e);class y_{constructor(e){this.scope=e,this._debug_fn=r(s)(this.scope),this._debug_fn_star=r(s)(this.scope+"*"),this.error=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.ERROR]] !! "+e,...t)},this.critical=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.CRITICAL]] !! "+e,...t)},this.warning=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star("[[logging.WARNING]] !! "+e,...t)},this.info=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn_star(e,...t)},this.debug=(e,...t)=>{const r=t[t.length-1];r&&null===r.__kwargtrans__&&this._process_kwargs(r),this._debug_fn("logging.debug ~~ "+e,...t)}}_process_kwargs(e){e.exc_info&&console.trace()}}let w_={};function b_(e){let t=w_[e];return null==t&&(t=new y_(e),w_[e]=t),t}function k_(){}var x_={};(0,tr.__nest__)(x_,"",m_);var O_,P_="flm.flmrendercontext",E_=(O_=x_,(0,tr.__call__)(O_.getLogger,O_,P_),(0,tr.__class__)("FLMRenderContext",[tr.object],{__module__:P_,is_standalone_mode:!1,is_first_pass:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"fragment_renderer":t=a[i];break;case"doc":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,E_,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.doc=r,e.fragment_renderer=t,e.pass_name=null,e.is_first_pass=!0,e._logical_state=(0,tr.dict)({}),e._nodes_determined_as_delayed=(0,tr.dict)({})}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return!1}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return null}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"fragment_renderer":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This render context does not support delayed rendering");throw i.__cause__=null,i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"This render context does not support delayed rendering");throw a.__cause__=null,a}))},get get_is_delayed_render(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}if((0,tr.__t__)((0,tr.__in__)(t._flm_node_id,e._nodes_determined_as_delayed)))return(0,tr.__getitem__)(e._nodes_determined_as_delayed,t._flm_node_id);var a=t.flm_specinfo.delayed_render;if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,a))){a=(0,tr.__call__)(a,null,t,render_context);(0,tr.__setitem__)(e._nodes_determined_as_delayed,t._flm_node_id,a)}return a}))},get set_render_pass(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pass_name":t=_[n]}}}e.pass_name=t,(0,tr.__t__)(null===t)?e.is_first_pass=!0:e.is_first_pass=!1}))},get get_logical_state(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"domainname":t=_[n]}}}return(0,tr.__t__)(!(0,tr.__in__)(t,e._logical_state))&&(0,tr.__setitem__)(e._logical_state,t,(0,tr.dict)({})),(0,tr.__getitem__)(e._logical_state,t)}))},get push_logical_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"domainname":t=a[i];break;case"propname":r=a[i];break;case"value":_=a[i]}}}return(0,tr.__call__)(C_,null,e,t,r,_)}))}})),C_=(0,tr.__class__)("_RenderContextPushLogicalState",[tr.object],{__module__:P_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"render_context":t=i[o];break;case"domainname":r=i[o];break;case"propname":_=i[o];break;case"value":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,C_,"__init__"),null,e),e.render_context=t,e.domainname=r,e.propname=_,e.value=n}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e.render_context;return(0,tr.__call__)(t.get_logical_state,t,e.domainname)}();(0,tr.__t__)((0,tr.__in__)(e.propname,n))?(e.old_value_exists=!0,e.old_value=(0,tr.__getitem__)(n,e.propname)):(e.old_value_exists=!1,e.old_value=null),(0,tr.__setitem__)(n,e.propname,e.value)}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"exc_type":t=a[i];break;case"exc_value":r=a[i];break;case"traceback":_=a[i]}}}var o=function(){var t=e.render_context;return(0,tr.__call__)(t.get_logical_state,t,e.domainname)}();(0,tr.__t__)(!(0,tr.__t__)(e.old_value_exists))?function(){var t=o;(0,tr.__call__)(t.py_pop,t,e.propname)}():(0,tr.__setitem__)(o,e.propname,e.old_value)}))}}),A_=(0,tr.__class__)("FLMStandaloneModeRenderContext",[E_],{__module__:P_,is_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"fragment_renderer":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,A_,"__init__"),null,e,(0,tr.__kwargtrans__)({fragment_renderer:t}))}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return!1}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}var a=(0,tr.__call__)(tr.ValueError,null,"There are no document features when rendering FLM text in standalone mode (reqested {})".format(t));throw a.__cause__=null,a}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"fragment_renderer":r=n[a]}}}var i=(0,tr.__call__)(tr.ValueError,null,"Cannot render nodes with delayed content in standalone mode".format());throw i.__cause__=null,i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=(0,tr.__call__)(tr.ValueError,null,"There's no delayed render content in standalone mode".format());throw a.__cause__=null,a}))}}),S_={};t(S_,"ParsingStateDeltaChained",(()=>Tn)),t(S_,"ParsingStateDelta",(()=>Sn)),t(S_,"SingleParsedArgumentInfo",(()=>On)),t(S_,"LatexWalkerEndOfStream",(()=>Y_)),t(S_,"get_updated_parsing_state_from_delta",(()=>In)),t(S_,"LatexArgumentSpec",(()=>L_)),t(S_,"_unicode_from_str",(()=>F_)),t(S_,"ParsingStateDeltaLeaveMathMode",(()=>jn)),t(S_,"LatexWalkerNodesParseError",(()=>H_)),t(S_,"logger",(()=>D_)),t(S_,"LatexTokenReaderBase",(()=>$n)),t(S_,"LatexWalkerParsingStateEventHandler",(()=>Rn)),t(S_,"LatexWalkerBase",(()=>zn)),t(S_,"LatexWalkerLocatedError",(()=>V_)),t(S_,"LatexWalkerError",(()=>q_)),t(S_,"ParsingStateDeltaEnterMathMode",(()=>Mn)),t(S_,"ParsedArguments",(()=>M_)),t(S_,"ParsingStateDeltaReplaceParsingState",(()=>Nn)),t(S_,"format_pos",(()=>$_)),t(S_,"_basestring",(()=>R_)),t(S_,"ParsedArgumentsInfo",(()=>Pn)),t(S_,"LatexTokenListTokenReader",(()=>Wn)),t(S_,"LatexNodesCollector",(()=>la)),t(S_,"LatexWalkerLocatedErrorFormatter",(()=>U_)),t(S_,"LatexContextDbBase",(()=>En)),t(S_,"LatexWalkerParseError",(()=>G_)),t(S_,"LatexWalkerTokenParseError",(()=>W_)),t(S_,"__all__",(()=>B_)),t(S_,"to_str",(()=>z_)),t(S_,"LatexNodesLatexRecomposer",(()=>yn)),t(S_,"ParsingStateDeltaWalkerEvent",(()=>Ln)),t(S_,"ParsingState",(()=>_a)),t(S_,"LatexTokenReader",(()=>Zn)),t(S_,"LatexToken",(()=>Vn)),t(S_,"CallableSpecBase",(()=>Bn)),a("hoVWB");tr=a("hoVWB");var N_={};t(N_,"logger",(()=>K_)),t(N_,"_unicode_from_str",(()=>J_)),t(N_,"_display_abbrev_str",(()=>Q_)),t(N_,"_display_str_delimiters",(()=>en)),t(N_,"LatexNode",(()=>tn)),t(N_,"LatexCharsNode",(()=>rn)),t(N_,"LatexGroupNode",(()=>_n)),t(N_,"LatexCommentNode",(()=>nn)),t(N_,"LatexMacroNode",(()=>an)),t(N_,"LatexEnvironmentNode",(()=>on)),t(N_,"LatexSpecialsNode",(()=>ln)),t(N_,"LatexMathNode",(()=>sn)),t(N_,"LatexNodeList",(()=>cn)),t(N_,"_update_posposend_from_nodelist",(()=>fn)),t(N_,"_get_content_as_chars",(()=>un)),t(N_,"_UseList",(()=>dn)),t(N_,"LatexNodesVisitor",(()=>pn)),t(N_,"latex_node_types",(()=>hn)),t(N_,"__all__",(()=>gn)),t(N_,"ParsedArguments",(()=>M_)),t(N_,"LatexWalkerParseError",(()=>G_));tr=a("hoVWB");var T_="pylatexenc.latexnodes._parsedargs",L_=((tr=a("hoVWB")).str,(0,tr.__class__)("LatexArgumentSpec",[tr.object],{__module__:T_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parser":t=a[i];break;case"argname":r=a[i];break;case"parsing_state_delta":_=a[i]}}}e.parser=t,e.argname=r,e.parsing_state_delta=_}))},_fields:(0,tr.tuple)(["parser","argname","parsing_state_delta"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{cls}(argname={argname!r}, parser={parser!r}, parsing_state_delta={parsing_state_delta!r})";return(0,tr.__call__)(t.format,t,(0,tr.__kwargtrans__)({cls:e.__class__.__name__,argname:e.argname,parser:e.parser,parsing_state_delta:e.parsing_state_delta}))}()}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({parser:e.parser,argname:e.argname,parsing_state_delta:e.parsing_state_delta}))}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)((0,tr.__eq__)(e.parser,t.parser))&&(0,tr.__t__)((0,tr.__eq__)(e.argname,t.argname))&&(0,tr.__eq__)(e.parsing_state_delta,t.parsing_state_delta)}))}})),M_=(0,tr.__class__)("ParsedArguments",[tr.object],{__module__:T_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"argnlist":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"argspec",null)}();if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,M_,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),(0,tr.__t__)((0,tr.__t__)(null===r)&&null!==o))r=o;e.argnlist=(0,tr.__t__)(t)?t:[],e.arguments_spec_list=(0,tr.__t__)(r)?r:[]}))},_fields:(0,tr.tuple)(["arguments_spec_list","argnlist"]),get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_parsed_arguments,r,e)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)((0,tr.__eq__)(e.arguments_spec_list,t.arguments_spec_list))&&(0,tr.__eq__)(e.argnlist,t.argnlist)}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.arguments_spec_list,argnlist:e.argnlist}))}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}(arguments_spec_list={!r}, argnlist={!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.arguments_spec_list,e.argnlist)}()}))}}),j_=(tr=a("hoVWB"),{});(0,tr.__nest__)(j_,"",m_);var I_="pylatexenc.latexnodes._exctypes",D_=function(){var e=j_;return(0,tr.__call__)(e.getLogger,e,I_)}(),R_=tr.str,F_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return e},z_=tr.str,B_=["LatexWalkerError","LatexWalkerLocatedError","LatexWalkerParseError","LatexWalkerLocatedErrorFormatter","LatexWalkerNodesParseError","LatexWalkerTokenParseError","LatexWalkerEndOfStream"],q_=(0,tr.__class__)("LatexWalkerError",[tr.Exception],{__module__:I_}),V_=(0,tr.__class__)("LatexWalkerLocatedError",[q_],{__module__:I_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"msg":t=s[c];break;case"s":r=s[c];break;case"pos":_=s[c];break;case"lineno":n=s[c];break;case"colno":a=s[c];break;case"error_type_info":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if(e.input_source=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"input_source",null)}(),e.msg=t,e.s=r,e.pos=_,e.lineno=n,e.colno=a,e.error_type_info=i,e.open_contexts=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"open_contexts",[])}(),(0,tr.__t__)((0,tr.__call__)(tr.len,null,o))){var u=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected keyword argument(s) to LatexWalkerLocatedError(): ",(0,tr.__call__)(tr.repr,null,o)));throw u.__cause__=null,u}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,V_,"__init__"),null,e,function(){var t=(0,tr.__call__)(U_,null,e);return(0,tr.__call__)(t.to_display_string,t)}())}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=(0,tr.__call__)(U_,null,e);return(0,tr.__call__)(t.to_display_string,t)}()}))},get set_pos_or_add_open_context_from_node(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"what":r=n[a]}}}if(!(0,tr.__t__)(null===t)){var i=t.pos;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"latex_walker"))&&(0,tr.__t__)(t.latex_walker)&&(0,tr.__call__)(tr.hasattr,null,t.latex_walker,"pos_to_lineno_colno")))var o=function(){var e=t.latex_walker;return(0,tr.__call__)(e.pos_to_lineno_colno,e,i)}(),l=o[0],s=o[1];else l=(o=(0,tr.tuple)([null,null]))[0],s=o[1];if((0,tr.__t__)(null===r))r=function(){var e=t;return(0,tr.__call__)(e.display_str,e)}();if((0,tr.__t__)(null===e.pos))return e.pos=i,e.lineno=l,void(e.colno=s);(0,tr.__t__)(null===e.open_contexts)&&(e.open_contexts=[]),function(){var t=e.open_contexts;(0,tr.__call__)(t.append,t,(0,tr.tuple)([r,i,l,s]))}()}}))}}),G_=(0,tr.__class__)("LatexWalkerParseError",[V_],{__module__:I_}),U_=(0,tr.__class__)("LatexWalkerLocatedErrorFormatter",[tr.object],{__module__:I_,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"exc":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,U_,"__init__"),null,e),e.exc=t}))},get format_open_blocks(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.exc;if((0,tr.__t__)(!(0,tr.__t__)(n.open_contexts)))return null;for(var a="",i=(0,tr.__call__)(tr.py_reversed,null,n.open_contexts),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=l[2],f=l[3];a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var e="{empty:4}{loc:<18}  {what}\n";return(0,tr.__call__)(e.format,e,(0,tr.__kwargtrans__)({empty:"",loc:(0,tr.__call__)($_,null,c,u,f),what:s}))}())}return a}))},get format_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)($_,null,e.exc.pos,e.exc.lineno,e.exc.colno)}))},get format_full_traceback(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.exc,a="";if((0,tr.__t__)(n.input_source))a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var e="  in {}";return(0,tr.__call__)(e.format,e,n.input_source)}());var i;a=(0,tr.__call__)(tr.__iadd__,null,a,(0,tr.__call__)(" {}".format," {}",(i=e,(0,tr.__call__)(i.format_pos,i))));if((0,tr.__t__)(n.open_contexts))a=(0,tr.__call__)(tr.__iadd__,null,a,"\nOpen LaTeX blocks:\n"),a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var t=e;return(0,tr.__call__)(t.format_open_blocks,t)}());return a}))},get to_display_string(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.exc,a=(0,tr.__call__)(z_,null,n.msg);a=(0,tr.__call__)(tr.__iadd__,null,a,function(){var t=e;return(0,tr.__call__)(t.format_full_traceback,t)}());return a}))}}),$_=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pos":e=n[a];break;case"lineno":t=n[a];break;case"colno":r=n[a]}}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)(null!==r)?function(){var e="@ (line {}, col {})";return(0,tr.__call__)(e.format,e,t,r)}():(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,R_))?(0,tr.__add__)("@ ",t):function(){var e="@ line {}";return(0,tr.__call__)(e.format,e,t)}():(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,R_))?(0,tr.__add__)("@ ",e):(0,tr.__t__)(null!==e)?function(){var t="@ char pos {}";return(0,tr.__call__)(t.format,t,e)}():"@ <unknown>"},W_=(0,tr.__class__)("LatexWalkerTokenParseError",[G_],{__module__:I_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"recovery_token_placeholder":t=a[i];break;case"recovery_token_at_pos":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,W_,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.recovery_token_placeholder=t,e.recovery_token_at_pos=r}))}}),H_=(0,tr.__class__)("LatexWalkerNodesParseError",[G_],{__module__:I_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"recovery_nodes":t=o[l];break;case"recovery_parsing_state_delta":r=o[l];break;case"recovery_at_token":_=o[l];break;case"recovery_past_token":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,H_,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.recovery_nodes=t,e.recovery_parsing_state_delta=r,e.recovery_at_token=_,e.recovery_past_token=n}))}}),Y_=(0,tr.__class__)("LatexWalkerEndOfStream",[q_],{__module__:I_,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"final_space":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Y_,"__init__"),null,e),e.final_space=t}))}}),X_={};(0,tr.__nest__)(X_,"",m_);var Z_="pylatexenc.latexnodes.nodes",K_=function(){var e=X_;return(0,tr.__call__)(e.getLogger,e,Z_)}(),J_=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return e},Q_=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=40;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"s":e=_[n];break;case"maxlen":t=_[n]}}}e=(0,tr.__call__)(tr.str,null,e);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(t))||(0,tr.__lt__)(t,2)))t=2;return(0,tr.__t__)((0,tr.__lt__)((0,tr.__call__)(tr.len,null,e),t))?e:(0,tr.__add__)((0,tr.__getslice__)(e,0,(0,tr.__sub__)(t,2),1),"")},en=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("delimiters"===_)e=r[_]}}var n="<??>",a="<??>";try{var i=e;n=i[0],a=i[1]}catch(e){}if((0,tr.__t__)(null===n))n="";if((0,tr.__t__)(null===a))a="";return(0,tr.tuple)([(0,tr.__call__)(tr.str,null,n),(0,tr.__call__)(tr.str,null,a)])},tn=(0,tr.__class__)("LatexNode",[tr.object],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"_fields":t=s[c];break;case"_redundant_fields":r=s[c];break;case"parsing_state":_=s[c];break;case"pos":n=s[c];break;case"pos_end":a=s[c];break;case"latex_walker":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}var u=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"len",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tn,"__init__"),null,e,(0,tr.__kwargtrans__)(o)),e.parsing_state=_,e.latex_walker=i,e.pos=n,e.pos_end=a,(0,tr.__t__)((0,tr.__t__)(null===a)&&null!==u)&&(e.pos_end=(0,tr.__add__)(e.pos,u)),e._fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)(["pos","pos_end","parsing_state","latex_walker"],(0,tr.__call__)(tr.list,null,t))),(0,tr.__t__)(null!==r)?e._redundant_fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(tr.list,null,e._fields),["len"]),(0,tr.__call__)(tr.list,null,r))):e._redundant_fields=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__call__)(tr.list,null,e._fields),["len"]))}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return tn}))},get isNodeType(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"t":t=_[n]}}}return(0,tr.__call__)(tr.isinstance,null,e,t)}))},get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(null===e.latex_walker)){var n=(0,tr.__call__)(tr.py_TypeError,null,"Can't use latex_verbatim() on node because we don't have any latex_walker set");throw n.__cause__=null,n}return(0,tr.__getslice__)(e.latex_walker.s,e.pos,e.pos_end,1)}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)(null!==t)&&(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tn))&&(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}()===function(){var e=t;return(0,tr.__call__)(e.nodeType,e)}())&&(0,tr.__t__)(t.parsing_state===e.parsing_state)&&(0,tr.__t__)(t.latex_walker===e.latex_walker)&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===t.pos)&&null===e.pos)||(0,tr.__eq__)(t.pos,e.pos))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===t.pos_end)&&null===e.pos_end)||(0,tr.__eq__)(t.pos_end,e.pos_end))&&(0,tr.__call__)(tr.all,null,function(){for(var r,_=[],n=e._fields,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__call__)(tr.getattr,null,e,i))&&null===(0,tr.__call__)(tr.getattr,null,t,i))||(0,tr.__eq__)((0,tr.__call__)(tr.getattr,null,e,i),(0,tr.__call__)(tr.getattr,null,t,i)))}return(0,tr.py_iter)(_)}())}))},get __ne__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return NotImplemented}))},__hash__:null,get __unicode__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(J_,null,function(){var t=e;return(0,tr.__call__)(t.__str__,t)}())}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e;return(0,tr.__call__)(t.__repr__,t)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}().__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r,_=[],n=e._fields,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__call__)(tr.getattr,null,e,i))))}return _}())),")")}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)("<UNKNOWN NODE TYPE>: ",(0,tr.__call__)(tr.repr,null,e))}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_unknown,r,e)}()}))},get to_json_object_with_latexwalker(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"latexwalker":t=_[n]}}}for(var a=(0,tr.dict)({nodetype:e.__class__.__name__}),i=e._fields,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__eq__)(l,"spec"))?(0,tr.__setitem__)(a,l,(0,tr.__call__)(tr.repr,null,e.spec)):(0,tr.__t__)((0,tr.__eq__)(l,"latex_walker"))||(0,tr.__setitem__)(a,l,(0,tr.__call__)(tr.getattr,null,e,l))}return function(){var r,_=a;(0,tr.__call__)(_.py_update,_,(r=t,(0,tr.__call__)(r.pos_to_lineno_colno,r,e.pos,(0,tr.__kwargtrans__)({as_dict:!0}))))}(),a}))},get format_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)(null!==e.latex_walker)?function(){var t=e.latex_walker;return(0,tr.__call__)(t.format_pos,t,e.pos)}():function(){var t="[@ pos {}]";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(tr.repr,null,e.pos))}()}))}});Object.defineProperty(tn,"len",tr.property.call(tn,tn._get_len));var rn=(0,tr.__class__)("LatexCharsNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"chars":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,rn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["chars"])},r))),e.chars=t}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return rn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("chars ",(0,tr.__call__)(Q_,null,e.chars)),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_chars,r,e)}()}))}}),_n=(0,tr.__class__)("LatexGroupNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"delimiters",(0,tr.tuple)(["{","}"]))}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_n,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["nodelist","delimiters"])},r))),e.nodelist=t,e.delimiters=i}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return _n}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=(0,tr.__call__)(en,null,e.delimiters),a=n[0],i=n[1];return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("group ",(0,tr.__call__)(tr.str,null,a)),""),(0,tr.__call__)(tr.str,null,i)),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_group,r,e)}()}))}}),nn=(0,tr.__class__)("LatexCommentNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"comment":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"comment_post_space","")}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,nn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["comment","comment_post_space"])},r))),e.comment=t,e.comment_post_space=i}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return nn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("comment ",(0,tr.__call__)(Q_,null,function(){var t=e.comment;return(0,tr.__call__)(t.strip,t)}())),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_comment,r,e)}()}))}}),an=(0,tr.__class__)("LatexMacroNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"nodeargd",(0,tr.__call__)(M_,null))}(),o=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"macro_post_space","")}(),l=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"spec",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,an,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["macroname","spec","nodeargd","macro_post_space"]),_redundant_fields:(0,tr.tuple)(["nodeoptarg","nodeargs"])},r))),e.macroname=t,e.spec=l,e.nodeargd=i,e.macro_post_space=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return an}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("macro \\",(0,tr.__call__)(tr.str,null,(0,tr.__t__)(e.macroname)||"??")),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_macro,r,e)}()}))}}),on=(0,tr.__class__)("LatexEnvironmentNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"nodelist":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"nodeargd",(0,tr.__call__)(M_,null))}(),l=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"spec",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,on,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["environmentname","spec","nodelist","nodeargd"]),_redundant_fields:(0,tr.tuple)(["envname","optargs","args"])},_))),e.environmentname=t,e.spec=l,e.nodelist=r,e.nodeargd=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return on}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("environment {",(0,tr.__call__)(tr.str,null,e.environmentname)),"}")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_environment,r,e)}()}))}}),ln=(0,tr.__class__)("LatexSpecialsNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"specials_chars":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"spec",null)}(),o=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"nodeargd",null)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ln,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["specials_chars","spec","nodeargd"])},r))),e.specials_chars=t,e.spec=i,e.nodeargd=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return ln}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("specials ",(0,tr.__call__)(tr.str,null,e.specials_chars)),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_specials,r,e)}()}))}}),sn=(0,tr.__class__)("LatexMathNode",[tn],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"displaytype":t=a[i];break;case"nodelist":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"delimiters",(0,tr.tuple)([null,null]))}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["displaytype","nodelist","delimiters"])},_))),e.displaytype=t,e.nodelist=r,e.delimiters=o}))},get nodeType(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return sn}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=(0,tr.__call__)(en,null,e.delimiters),a=n[0],i=n[1];return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.displaytype," math "),a),""),i),"")}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_math,r,e)}()}))}}),cn=(0,tr.__class__)("LatexNodeList",[tr.object],{__module__:Z_,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r,_=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,cn))){var o=t;return e.nodelist=o.nodelist,e.parsing_state=o.parsing_state,e.latex_walker=o.latex_walker,e.pos=o.pos,void(e.pos_end=o.pos_end)}if(e.nodelist=t,(0,tr.__t__)(null===e.nodelist))throw(r=(0,tr.__call__)(tr.ValueError,null,"Cannot create a LatexNodeList with nodelist=None")).__cause__=null,r;if(e.parsing_state=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"parsing_state",null)}(),e.latex_walker=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"latex_walker",null)}(),e.pos=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"pos",null)}(),e.pos_end=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"pos_end",null)}(),(0,tr.__t__)((0,tr.__call__)(tr.len,null,_)))throw(r=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected keyword arguments to LatexNodeList: ",(0,tr.__call__)(tr.repr,null,_)))).__cause__=null,r;var l=(0,tr.__call__)(fn,null,e.pos,e.pos_end,e.nodelist);e.pos=l[0],e.pos_end=l[1]}))},_fields:(0,tr.tuple)(["nodelist","parsing_state","latex_walker","pos","pos_end"]),get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get __iter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)(null===e.nodelist)?(0,tr.__call__)(tr.py_iter,null,[]):(0,tr.__call__)(tr.py_iter,null,e.nodelist)}))},[Symbol.iterator](){return this.__iter__()},get __getitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"index":t=_[n]}}}try{if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),3))){var a=t,i=a[0],o=a[1],l=a[2];return(0,tr.__getslice__)(e.nodelist,i,o,l)}}catch(e){}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.int))&&(0,tr.__lt__)(t,0)))t=(0,tr.__add__)((0,tr.__call__)(tr.len,null,e.nodelist),t);return(0,tr.__getitem__)(e.nodelist,t)}))},get __len__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.len,null,e.nodelist)}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)("".join,"",function(){for(var t,r,_=[],n=e.nodelist,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);(0,tr.__t__)(null!==i)&&(t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(t=i,(0,tr.__call__)(t.latex_verbatim,t))))}return _}())}))},get display_str(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(null===e.nodelist))var n="null list",a="";else n=(0,tr.__call__)(tr.len,null,e.nodelist),a=(0,tr.__add__)((0,tr.__add__)(": ",(0,tr.__call__)(", ".join,", ",function(){for(var t,r,_=[],n=(0,tr.__getslice__)(e.nodelist,0,2,1),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__t__)(null!==i)?(t=i,(0,tr.__call__)(t.display_str,t)):"None")}return _}())),(0,tr.__t__)((0,tr.__gt__)(n,2))?" ":"");return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("list of nodes (",(0,tr.__call__)(tr.str,null,n)),")"),a)}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.node_standard_process_list,r,e)}()}))},get filter(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"node_predicate_fn":t=i[o];break;case"skip_none":r=i[o];break;case"skip_comments":_=i[o];break;case"skip_whitespace_char_nodes":n=i[o]}}}if((0,tr.__t__)(null!==e.latex_walker))var l=e.latex_walker.make_nodelist;else l=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("nl"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(cn,null,e,(0,tr.__kwargtrans__)(t))};var s=function(e){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)if("n"===o)e=i[o]}}return!(0,tr.__t__)((0,tr.__t__)(r)&&null===e)&&(!(0,tr.__t__)((0,tr.__t__)(_)&&function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,nn)}())&&(!(0,tr.__t__)((0,tr.__t__)(n)&&(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,rn)}())&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var t=e.chars;return(0,tr.__call__)(t.strip,t)}()),0))&&(!(0,tr.__t__)(null!==t)||(0,tr.__call__)(t,null,e))))},c=function(){for(var t,r=[],_=e.nodelist,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)((0,tr.__call__)(s,null,a))&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a))}return r}();return(0,tr.__call__)(l,null,c,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__t__)((0,tr.__call__)(tr.len,null,c))?null:e.pos_end,pos_end:(0,tr.__t__)((0,tr.__call__)(tr.len,null,c))?null:e.pos_end}))}))},get split_at_node(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"node_predicate_fn":t=o[l];break;case"skip_none":r=o[l];break;case"keep_separators":_=o[l];break;case"max_split":n=o[l];break;case"call_make_nodelist":a=o[l]}}}var s=[[]];if((0,tr.__t__)((0,tr.__t__)(null!==n)&&(0,tr.__eq__)(n,0)))var c=!0;else c=!1;for(var u=e.nodelist,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if(!(0,tr.__t__)((0,tr.__t__)(r)&&null===d))if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&(0,tr.__call__)(t,null,d))){if((0,tr.__t__)(_)?function(){var e=s;(0,tr.__call__)(e.append,e,[d])}():function(){var e=s;(0,tr.__call__)(e.append,e,[])}(),(0,tr.__t__)((0,tr.__t__)(null!==n)&&(0,tr.__ge__)((0,tr.__call__)(tr.len,null,s),n)))c=!0}else!function(){var e=(0,tr.__getitem__)(s,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,s),1));(0,tr.__call__)(e.append,e,d)}()}if((0,tr.__t__)((0,tr.__t__)(a)&&null!==e.latex_walker))var p=e.latex_walker.make_nodelist;else p=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("nl"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(cn,null,e,(0,tr.__kwargtrans__)(t))};return function(){for(var t,r=[],_=s,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(p,null,a,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state})))}return r}()}))},get split_at_chars(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"sep_chars":t=i[o];break;case"max_split":r=i[o];break;case"keep_empty":_=i[o];break;case"skip_none":n=i[o]}}}var l=[],s=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"m":e=_[n];break;case"offset":t=_[n]}}}if((0,tr.__t__)(null===e))return(0,tr.tuple)([(0,tr.__neg__)(1),null]);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"start"))&&(0,tr.__call__)(tr.hasattr,null,e,"end")))return(0,tr.tuple)([(0,tr.__add__)(t,function(){var t=e;return(0,tr.__call__)(t.start,t)}()),(0,tr.__add__)(t,function(){var t=e;return(0,tr.__call__)(t.end,t)}())]);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e))||!(0,tr.__t__)((0,tr.__call__)(tr.len,null,e))))return(0,tr.tuple)([(0,tr.__neg__)(1),null]);var a=e,i=a[0],o=a[1];if((0,tr.__t__)(null===i))i=(0,tr.__neg__)(1);else i=(0,tr.__add__)(t,i);o=(0,tr.__add__)(t,o);return(0,tr.tuple)([i,o])},c=function(e,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"chars":e=a[i];break;case"pos":_=a[i]}}}if((0,tr.__t__)((0,tr.__t__)(null!==r)&&(0,tr.__ge__)((0,tr.__call__)(tr.len,null,l),r)))return(0,tr.tuple)([(0,tr.__neg__)(1),(0,tr.__call__)(tr.len,null,e)]);if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"search"))){var o=function(){var r=t;return(0,tr.__call__)(r.search,r,(0,tr.__getslice__)(e,_,null,1))}();return(0,tr.__call__)(s,null,o,_)}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,t))){o=(0,tr.__call__)(t,null,e,_);return(0,tr.__call__)(s,null,o)}var c=function(){var r=e;return(0,tr.__call__)(r.find,r,t,_)}();return(0,tr.__t__)((0,tr.__t__)(null===c)||(0,tr.__eq__)(c,(0,tr.__neg__)(1)))?(0,tr.tuple)([(0,tr.__neg__)(1),null]):(0,tr.tuple)([c,(0,tr.__add__)(c,(0,tr.__call__)(tr.len,null,t))])},u=e.latex_walker;if((0,tr.__t__)(null!==u))var f=u.make_node,d=u.make_nodelist;else f=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("cls"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(e,null,(0,tr.__kwargtrans__)(t))},d=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("nl"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(cn,null,e,(0,tr.__kwargtrans__)(t))};for(var p=function(t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"chars":t=i[o];break;case"n":r=i[o];break;case"rel_pos":_=i[o];break;case"rel_pos_end":n=i[o]}}}return(0,tr.__call__)(f,null,rn,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__add__)(r.pos,_),pos_end:(0,tr.__add__)(r.pos,n),chars:t}))},h=function(t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"nodes":t=n[a];break;case"pos_end":r=n[a]}}}var i=(0,tr.__call__)(d,null,t,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__t__)((0,tr.__call__)(tr.len,null,t))?null:r,pos_end:r}));!function(){var e=l;(0,tr.__call__)(e.append,e,i)}()},g=[],v=e.nodelist,m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m);if((0,tr.__t__)(null===y))(0,tr.__t__)(!(0,tr.__t__)(n))&&function(){var e=g;(0,tr.__call__)(e.append,e,y)}();else if((0,tr.__t__)(function(){var e=y;return(0,tr.__call__)(e.isNodeType,e,rn)}()))for(var w=0;(0,tr.__t__)(!0);){var b=w,k=(0,tr.__call__)(c,null,y.chars,b),x=k[0];w=k[1];if(!(0,tr.__t__)((0,tr.__ne__)(x,(0,tr.__neg__)(1)))){if((0,tr.__t__)((0,tr.__eq__)(b,0))){!function(){var e=g;(0,tr.__call__)(e.append,e,y)}();break}O=(0,tr.__getslice__)(y.chars,b,null,1);(0,tr.__t__)((0,tr.__call__)(tr.len,null,O))&&function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.__call__)(p,null,O,y,b,(0,tr.__call__)(tr.len,null,y.chars)))}();break}var O=(0,tr.__getslice__)(y.chars,b,x,1);if((0,tr.__t__)((0,tr.__eq__)(b,0))){(0,tr.__t__)((0,tr.__call__)(tr.len,null,O))&&function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.__call__)(p,null,O,y,b,x))}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,g))||_)&&(0,tr.__call__)(h,null,g,(0,tr.__kwargtrans__)({pos_end:(0,tr.__add__)(y.pos,x)}));g=[]}else{var P=[];if((0,tr.__t__)((0,tr.__call__)(tr.len,null,O)))P=[(0,tr.__call__)(p,null,O,y,b,x)];(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,P))||_)&&(0,tr.__call__)(h,null,P,(0,tr.__kwargtrans__)({pos_end:(0,tr.__add__)(y.pos,x)}))}}else!function(){var e=g;(0,tr.__call__)(e.append,e,y)}()}return(0,tr.__t__)((0,tr.__t__)(g)||_)&&(0,tr.__call__)(h,null,g,(0,tr.__kwargtrans__)({pos_end:e.pos_end})),l}))},get parse_keyval_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=",";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="=";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_="concatenate";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=tr.dict;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"comma_sep_chars":t=l[s];break;case"eq_sep_chars":r=l[s];break;case"repeated_key_aggregate_action":_=l[s];break;case"default_value_nodelist":n=l[s];break;case"extract_value_group_contents":a=l[s];break;case"dict_type":i=l[s]}}}var c=(0,tr.__call__)(i,null),u=e.latex_walker;if((0,tr.__t__)(null!==u))var f=u.make_nodelist;else f=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("nl"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(cn,null,e,(0,tr.__kwargtrans__)(t))};for(var d=function(){var r=e;return(0,tr.__call__)(r.split_at_chars,r,t)}(),p=d,h=0;h<(0,tr.len)(p);h++){var g=(0,tr.__getitem__)(p,h),v=function(){var e=g;return(0,tr.__call__)(e.split_at_chars,e,r,(0,tr.__kwargtrans__)({max_split:1}))}();if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,v),0))){var m=(0,tr.__getitem__)(v,0),y=null;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,v),2)))throw(b=(0,tr.__call__)(RuntimeError,null,"[internal error?] unexpected split length past max_split?")).__cause__=null,b;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,v),2))){y=(0,tr.__getitem__)(v,1);if((0,tr.__t__)((0,tr.__t__)(a)&&(0,tr.__t__)(null!==y)&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,y),1))&&function(){var e=(0,tr.__getitem__)(y.nodelist,0);return(0,tr.__call__)(e.isNodeType,e,_n)}()))y=(0,tr.__getitem__)(y.nodelist,0).nodelist}if((0,tr.__t__)(null===y))y=n;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,cn))))y=(0,tr.__call__)(f,null,[y],(0,tr.__kwargtrans__)({parsing_state:e.parsing_state}));var w=function(){var e=m;return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(w,c)))if((0,tr.__t__)((0,tr.__eq__)(_,"concatenate")))y=(0,tr.__call__)(f,null,(0,tr.__add__)((0,tr.__getitem__)(c,w).nodelist,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,cn))?y.nodelist:[y]),(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,pos:(0,tr.__getitem__)(c,w).pos}));else{if((0,tr.__t__)((0,tr.__eq__)(_,"error"))){var b=(0,tr.__call__)(tr.ValueError,null,function(){var e="Repeated Key: {}";return(0,tr.__call__)(e.format,e,w)}());throw b.__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(_,"first")))y=(0,tr.__getitem__)(c,w).nodelist;else if((0,tr.__t__)((0,tr.__eq__)(_,"last")));else y=(0,tr.__call__)(_,null,w,(0,tr.__getitem__)(c,w).nodelist,y,(0,tr.__kwargtrans__)({result_keyvals:c}))}(0,tr.__setitem__)(c,w,y)}}return c}))},get get_content_as_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(un,null,e.nodelist)}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.list))?(0,tr.__eq__)(e.nodelist,t):(0,tr.__t__)((0,tr.__eq__)(e.nodelist,t.nodelist))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(null===e.pos)&&null===t.pos)||(0,tr.__eq__)(e.pos,t.pos))&&((0,tr.__t__)((0,tr.__t__)(null===e.pos_end)&&null===t.pos_end)||(0,tr.__eq__)(e.pos_end,t.pos_end))}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.nodelist}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="LatexNodeList({nodelist!r}, pos={pos!r}, pos_end={pos_end!r})";return(0,tr.__call__)(t.format,t,(0,tr.__kwargtrans__)({nodelist:e.nodelist,pos:e.pos,pos_end:e.pos_end}))}()}))}});Object.defineProperty(cn,"len",tr.property.call(cn,cn._get_len));var un=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("nodelist"===_)e=r[_]}}if((0,tr.__t__)(null===e))return"";for(var n=[],a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(null===o)&&!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,nn)}()))if((0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,_n)}()))!function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)(un,null,o.nodelist))}();else{if(!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,rn)}())){var l=(0,tr.__call__)(G_,null,function(){var e="Expected simple characters only, got {}";return(0,tr.__call__)(e.format,e,o.__class__.__name__)}(),(0,tr.__kwargtrans__)({pos:o.pos}));throw l.__cause__=null,l}!function(){var e=n;(0,tr.__call__)(e.append,e,o.chars)}()}}return(0,tr.__call__)("".join,"",n)},fn=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"pos":e=n[a];break;case"pos_end":t=n[a];break;case"nodelist":r=n[a]}}}if((0,tr.__t__)(null===e)){for(var i=!1,o=r,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s)){e=s.pos;i=!0;break}}if(!i)e=null}if((0,tr.__t__)(null===t)){for(i=!1,o=(0,tr.__call__)(tr.py_reversed,null,r),l=0;l<(0,tr.len)(o);l++){s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s)){t=s.pos_end;i=!0;break}}if(!i)t=null}return(0,tr.tuple)([e,t])},dn=(0,tr.__class__)("_UseList",[tr.object],{__module__:Z_}),pn=(0,tr.__class__)("LatexNodesVisitor",[tr.object],{__module__:Z_,get start(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get visit(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return null}))},get visit_chars_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_group_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_comment_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_macro_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_environment_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_specials_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_math_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_node_list(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodes":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsed_args":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get visit_unknown_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_.visit,_,t,(0,tr.__kwargtrans__)(r))}()}))},get descend_into_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=dn;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"py_default":r=n[a]}}}if((0,tr.__t__)(null===t))return(0,tr.__t__)(r===dn)?[]:r;for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);(0,tr.__t__)(null!==s)?function(){var t,r=i;(0,tr.__call__)(r.append,r,(t=s,(0,tr.__call__)(t.accept_node_visitor,t,e)))}():function(){var e=i;(0,tr.__call__)(e.append,e,null)}()}return i}))},get descend_into_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsed_arguments":t=_[n]}}}return(0,tr.__t__)(null===t)?"":function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get node_standard_process_unknown(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_unknown_node,r,t)}()}))},get node_standard_process_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_chars_node,r,t)}()}))},get node_standard_process_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_group_node,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_comment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.visit_comment_node,r,t)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}();return function(){var r=e;return(0,tr.__call__)(r.visit_macro_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a}))}()}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}(),i=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_environment_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a,visited_results_body:i}))}()}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_parsed_arguments,r,t.nodeargd)}();return function(){var r=e;return(0,tr.__call__)(r.visit_specials_node,r,t,(0,tr.__kwargtrans__)({visited_results_arguments:a}))}()}))},get node_standard_process_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist,(0,tr.__kwargtrans__)({py_default:null}))}();return function(){var r=e;return(0,tr.__call__)(r.visit_math_node,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodelist":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.nodelist)}();return function(){var r=e;return(0,tr.__call__)(r.visit_node_list,r,t,(0,tr.__kwargtrans__)({visited_results_nodelist:a}))}()}))},get node_standard_process_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsed_arguments":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t.argnlist,(0,tr.__kwargtrans__)({py_default:null}))}();return function(){var r=e;return(0,tr.__call__)(r.visit_parsed_arguments,r,t,(0,tr.__kwargtrans__)({visited_results_argnlist:a}))}()}))}}),hn=(0,tr.tuple)([tn,rn,_n,nn,an,on,ln,sn]),gn=(0,tr.__add__)(function(){for(var e,t=[],r=hn,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,n.__name__)}return t}(),["LatexNodeList","LatexNodesVisitor"]),vn={};(0,tr.__nest__)(vn,"",m_);var mn="pylatexenc.latexnodes._latex_recomposer",yn=(function(){var e=vn;(0,tr.__call__)(e.getLogger,e,mn)}(),(0,tr.__class__)("LatexNodesLatexRecomposer",[pn],{__module__:mn,get latex_recompose(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.start,r,t)}()}))},get recompose_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"chars":t=n[a];break;case"n":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";return(0,tr.__call__)(tr.str,null,t)}))},get recompose_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"n":r=n[a]}}}var i=function(){var r=e;return(0,tr.__call__)(r.descend_into_nodelist,r,t)}();return(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=i,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);(0,tr.__t__)(null!==n)&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,n))}return t}())}))},get recompose_delimited_nodelist(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"nodelist":r=a[i];break;case"n":_=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t=(0,tr.tuple)(["",""]);return(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(t,0),function(){var t=e;return(0,tr.__call__)(t.recompose_nodelist,t,r,_)}()),(0,tr.__getitem__)(t,1))}))},get recompose_comment(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"comment":t=a[i];break;case"comment_post_space":r=a[i];break;case"n":_=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";if((0,tr.__t__)(!(0,tr.__t__)(r)))r="";return(0,tr.__add__)((0,tr.__add__)(_.parsing_state.comment_start,t),r)}))},get recompose_macro_call(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"macro_post_space":r=i[o];break;case"parsed_arguments":_=i[o];break;case"n":n=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,_)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\",t),r),l)}))},get recompose_environment_call(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"parsed_arguments":r=i[o];break;case"body_node_list":_=i[o];break;case"n":n=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,r)}(),s=function(){var t=e;return(0,tr.__call__)(t.recompose_nodelist,t,_,n)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\begin{",(0,tr.__call__)(tr.str,null,t)),"}"),l),s),"\\end{"),(0,tr.__call__)(tr.str,null,t)),"}")}))},get recompose_specials_call(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"parsed_arguments":r=a[i];break;case"n":_=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.descend_into_parsed_arguments,t,r)}();return(0,tr.__add__)(t,o)}))},get recompose_math_content(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"nodelist":r=a[i];break;case"n":_=a[i]}}}return function(){var n=e;return(0,tr.__call__)(n.recompose_delimited_nodelist,n,t,r,_)}()}))},get recompose_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsed_arguments":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_nodelist,r,t.argnlist,null)}()}))},get recompose_unknown(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__add__)((0,tr.__add__)("<<< UNKNOWN NODE: ",(0,tr.__call__)(tr.repr,null,t))," >>>")}))},get node_standard_process_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_chars,r,t.chars,t)}()}))},get node_standard_process_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_delimited_nodelist,r,t.delimiters,t.nodelist,t)}()}))},get node_standard_process_comment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_comment,r,t.comment,t.comment_post_space,t)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_macro_call,r,t.macroname,t.macro_post_space,t.nodeargd,t)}()}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_environment_call,r,t.environmentname,t.nodeargd,t.nodelist,t)}()}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_specials_call,r,t.specials_chars,t.nodeargd,t)}()}))},get node_standard_process_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_math_content,r,t.delimiters,t.nodelist,t)}()}))},get node_standard_process_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodelist":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_nodelist,r,t.nodelist,t)}()}))},get node_standard_process_parsed_arguments(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsed_arguments":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.recompose_parsed_arguments,r,t)}()}))},get visit(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var r=e;return(0,tr.__call__)(r.recompose_unknown,r,t)}()}))}})),wn=(tr=a("hoVWB"),{});(0,tr.__nest__)(wn,"",m_);var bn="pylatexenc.latexnodes._parsedargsinfo",kn=tr.str,xn=function(){var e=wn;return(0,tr.__call__)(e.getLogger,e,bn)}(),On=(0,tr.__class__)("SingleParsedArgumentInfo",[tr.object],{__module__:bn,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"argument_node_object":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,On,"__init__"),null,e),e.argument_node_object=t}))},get was_provided(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return null!==e.argument_node_object}))},get get_content_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"unwrap_double_group":t=n[a];break;case"make_nodelist":r=n[a]}}}if((0,tr.__t__)(null===r))r=cn;var i=e.argument_node_object;if((0,tr.__t__)(null===i))return(0,tr.__call__)(r,null,[null]);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,i,cn)))return i;if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,_n)}())){if((0,tr.__t__)((0,tr.__t__)(t)&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,i.nodelist),1))&&(0,tr.__getitem__)(i.nodelist,0))){var o=(0,tr.__getitem__)(i.nodelist,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,_n)}())&&(0,tr.__ne__)((0,tr.__getitem__)(o.delimiters,0),(0,tr.__getitem__)(i.delimiters,0))))return o.nodelist}return i.nodelist}return(0,tr.__call__)(r,null,[i])}))},get get_content_as_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}();return function(){var e=n;return(0,tr.__call__)(e.get_content_as_chars,e)}()}))},get parse_content_as_keyval(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}();return function(){var e=a;return(0,tr.__call__)(e.parse_keyval_content,e,(0,tr.__kwargtrans__)(t))}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}(argument_node_object={!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.argument_node_object)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)((0,tr.__t__)(null===e.argument_node_object)&&null===t.argument_node_object)||(0,tr.__eq__)(e.argument_node_object,t.argument_node_object)}))}}),Pn=(0,tr.__class__)("ParsedArgumentsInfo",[tr.object],{__module__:bn,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsed_arguments":t=n[a];break;case"node":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Pn,"__init__"),null,e),e.parsed_arguments=t,e.node=r,(0,tr.__t__)(null!==e.node)?(e.node_pos=e.node.pos,(0,tr.__t__)((0,tr.__t__)(null===e.parsed_arguments)&&(0,tr.__call__)(tr.hasattr,null,e.node,"nodeargd"))?e.parsed_arguments=e.node.nodeargd:e.parsed_arguments=null):e.node_pos=null,(0,tr.__t__)((0,tr.__t__)(null===e.parsed_arguments)&&null===e.node)&&function(){var e=xn;(0,tr.__call__)(e.warning,e,"You created ParsedArgumentsInfo with both node=None and parsed_arguments=None, might be a bug in your code?")}()}))},get get_argument_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"arg":t=_[n]}}}if((0,tr.__t__)(null===e.parsed_arguments))throw(d=(0,tr.__call__)(G_,null,"Cannot get argument information, there were no arguments specified",(0,tr.__kwargtrans__)({pos:e.node_pos}))).__cause__=null,d;var a=t;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,kn))){for(var i=a,o=!1,l=(0,tr.__call__)(tr.enumerate,null,e.parsed_arguments.arguments_spec_list),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1];if((0,tr.__t__)((0,tr.__eq__)(f.argname,i))){a=u;o=!0;break}}if(!o){var d=(0,tr.__call__)(G_,null,function(){var e="Cannot find argument named {}";return(0,tr.__call__)(e.format,e,i)}(),(0,tr.__kwargtrans__)({pos:e.node_pos}));throw d.__cause__=null,d}}return(0,tr.__call__)(On,null,(0,tr.__getitem__)(e.parsed_arguments.argnlist,a))}))},get get_all_arguments_info(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"args":t=o[l];break;case"allow_additional_arguments":r=o[l];break;case"skip_nonexistent_arguments":_=o[l];break;case"include_unrequested_argnames":n=o[l];break;case"include_unrequested_argindices":a=o[l]}}}if((0,tr.__t__)(null===e.parsed_arguments)){if((0,tr.__t__)(_))return(0,tr.dict)({});var s="Missing arguments";if((0,tr.__t__)(null!==e.node))s=function(){var t="Missing arguments to {!r}";return(0,tr.__call__)(t.format,t,e.node)}();throw(k=(0,tr.__call__)(G_,null,s,e.node_pos)).__cause__=null,k}var c=(0,tr.dict)({}),u=(0,tr.__call__)(tr.set,null),f=(0,tr.__call__)(tr.set,null);if((0,tr.__t__)((0,tr.__t__)(null===t)&&null===n))n=!0;if((0,tr.__t__)((0,tr.__t__)(null===t)&&null===a))a=!0;for(var d=(0,tr.__call__)(tr.enumerate,null,e.parsed_arguments.arguments_spec_list),p=0;p<(0,tr.len)(d);p++){var h=(0,tr.__getitem__)(d,p),g=h[0],v=h[1],m=(0,tr.__getitem__)(e.parsed_arguments.argnlist,g),y=!1,w=!1,b=!1;if((0,tr.__t__)(null!==t)){if((0,tr.__t__)((0,tr.__t__)(v.argname)&&(0,tr.__in__)(v.argname,t))){y=!0,w=!0;!function(){var e=u;(0,tr.__call__)(e.add,e,v.argname)}()}if((0,tr.__t__)((0,tr.__in__)(g,t))){y=!0,b=!0;!function(){var e=f;(0,tr.__call__)(e.add,e,g)}()}}else y=!0;if((0,tr.__t__)(!(0,tr.__t__)(y))){if((0,tr.__t__)(!(0,tr.__t__)(r))){var k=(0,tr.__call__)(G_,null,function(){var e="Got unexpected argument {}";return(0,tr.__call__)(e.format,e,v.argname)}(),(0,tr.__kwargtrans__)({pos:(0,tr.__t__)(null!==m)?m.pos:null}));throw k.__cause__=null,k}}else{var x=(0,tr.__call__)(On,null,m);(0,tr.__t__)((0,tr.__t__)(v.argname)&&((0,tr.__t__)(w)||n))&&(0,tr.__setitem__)(c,v.argname,x),(0,tr.__t__)((0,tr.__t__)(b)||a)&&(0,tr.__setitem__)(c,g,x)}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(_))&&null!==t))for(d=t,p=0;p<(0,tr.len)(d);p++){var O=(0,tr.__getitem__)(d,p);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__in__)(O,u))&&!(0,tr.__in__)(O,f))){k=(0,tr.__call__)(tr.ValueError,null,function(){var e="Missing argument {}";return(0,tr.__call__)(e.format,e,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,O,kn))?(0,tr.__add__)((0,tr.__add__)("",O),""):(0,tr.__call__)(tr.str,null,O))}());throw k.__cause__=null,k}}return c}))}}),En=(0,(tr=a("hoVWB")).__class__)("LatexContextDbBase",[tr.object],{__module__:"pylatexenc.latexnodes._latexcontextdbbase",get get_macro_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}return null}))},get get_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"environmentname":t=_[n]}}}return null}))},get get_specials_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"specials_chars":t=_[n]}}}return null}))},get test_for_specials(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":_=a[i]}}}return null}))}}),Cn=(tr=a("hoVWB"),tr=a("hoVWB"),{});(0,tr.__nest__)(Cn,"",m_);var An="pylatexenc.latexnodes._parsingstatedelta",Sn=(function(){var e=Cn;(0,tr.__call__)(e.getLogger,e,An)}(),(0,tr.__class__)("ParsingStateDelta",[tr.object],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"set_attributes":t=a[i];break;case"_fields":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Sn,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.set_attributes=(0,tr.__t__)(t)?(0,tr.__call__)(tr.dict,null,t):null,e._fields=(0,tr.__t__)(null!==r)?r:(0,tr.tuple)(["set_attributes"])}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.__class__.__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r,_=[],n=e._fields,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,i))?(0,tr.__call__)(tr.getattr,null,e,i):"<??>")))}return _}())),")")}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state":t=n[a];break;case"latex_walker":r=n[a]}}}return(0,tr.__t__)(e.set_attributes)?function(){var r=t;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(e.set_attributes))}():t}))}})),Nn=(0,tr.__class__)("ParsingStateDeltaReplaceParsingState",[Sn],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"set_parsing_state":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Nn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["set_parsing_state"])},r))),e.set_parsing_state=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state":t=n[a];break;case"latex_walker":r=n[a]}}}return(0,tr.__t__)(null!==e.set_parsing_state)?e.set_parsing_state:t}))}}),Tn=(0,tr.__class__)("ParsingStateDeltaChained",[Sn],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state_deltas":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Tn,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["parsing_state_deltas"])},r))),e.parsing_state_deltas=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state":t=n[a];break;case"latex_walker":r=n[a]}}}for(var i=t,o=e.parsing_state_deltas,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)(null!==s))i=function(){var e=s;return(0,tr.__call__)(e.get_updated_parsing_state,e,i,r)}()}return i}))}}),Ln=(0,tr.__class__)("ParsingStateDeltaWalkerEvent",[Sn],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"walker_event_name":t=n[a];break;case"walker_event_kwargs":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ln,"__init__"),null,e,(0,tr.__kwargtrans__)({_fields:(0,tr.tuple)(["walker_event_name","walker_event_kwargs"])})),e.walker_event_name=t,e.walker_event_kwargs=r}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state":t=n[a];break;case"latex_walker":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.parsing_state_event_handler,e)}(),o=(0,tr.__call__)(tr.getattr,null,i,e.walker_event_name),l=(0,tr.__call__)(o,null,(0,tr.__kwargtrans__)(e.walker_event_kwargs));return(0,tr.__call__)(In,null,t,l,r)}))}}),Mn=(0,tr.__class__)("ParsingStateDeltaEnterMathMode",[Ln],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"math_mode_delimiter":t=n[a];break;case"trigger_token":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Mn,"__init__"),null,e,(0,tr.__kwargtrans__)({walker_event_name:"enter_math_mode",walker_event_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({math_mode_delimiter:t,trigger_token:r}))}))}))}}),jn=(0,tr.__class__)("ParsingStateDeltaLeaveMathMode",[Ln],{__module__:An,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"trigger_token":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,jn,"__init__"),null,e,(0,tr.__kwargtrans__)({walker_event_name:"leave_math_mode",walker_event_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({trigger_token:t}))}))}))}}),In=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"parsing_state":e=n[a];break;case"parsing_state_delta":t=n[a];break;case"latex_walker":r=n[a]}}}return(0,tr.__t__)(null===t)?e:function(){var _=t;return(0,tr.__call__)(_.get_updated_parsing_state,_,e,r)}()},Dn="pylatexenc.latexnodes._walkerbase",Rn=(0,tr.__class__)("LatexWalkerParsingStateEventHandler",[tr.object],{__module__:Dn,get enter_math_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"math_mode_delimiter":t=n[a];break;case"trigger_token":r=n[a]}}}return(0,tr.__call__)(Sn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!0,math_mode_delimiter:t}))}))}))},get leave_math_mode(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"trigger_token":t=_[n]}}}return(0,tr.__call__)(Sn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!1,math_mode_delimiter:null}))}))}))}}),Fn=(0,tr.__call__)(Rn,null),zn=(0,tr.__class__)("LatexWalkerBase",[tr.object],{__module__:Dn,get parsing_state_event_handler(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return Fn}))},get parse_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"parser":t=o[l];break;case"token_reader":r=o[l];break;case"parsing_state":_=o[l];break;case"open_context":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement parse_content()");throw s.__cause__=null,s}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node_class":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_node()");throw i.__cause__=null,i}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodelist()");throw i.__cause__=null,i}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_reader":t=a[i];break;case"parsing_state":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_nodes_collector()");throw o.__cause__=null,o}))},get make_latex_group_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"delimiters":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_group_parser()");throw a.__cause__=null,a}))},get make_latex_math_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"math_mode_delimiters":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexWalkerBase subclasses must reimplement make_latex_math_parser()");throw a.__cause__=null,a}))},get check_tolerant_parsing_ignore_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"exc":t=_[n]}}}return t}))},get format_node_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__add__)("character position ",(0,tr.__call__)(tr.repr,null,t.pos))}))}}),Bn=(0,(tr=a("hoVWB")).__class__)("CallableSpecBase",[tr.object],{__module__:"pylatexenc.latexnodes._callablespecbase",get get_node_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement get_node_parser()");throw a.__cause__=null,a}))}}),qn=(tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return e}),Vn=(0,tr.__class__)("LatexToken",[tr.object],{__module__:"pylatexenc.latexnodes._token",get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="";if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i="";var o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"tok":t=s[c];break;case"arg":r=s[c];break;case"pos":_=s[c];break;case"pos_end":n=s[c];break;case"pre_space":a=s[c];break;case"post_space":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}var u=function(){var e=o;return(0,tr.__call__)(e.py_pop,e,"len",null)}();if(e.tok=t,e.arg=r,e.pos=_,e.pos_end=n,e.pre_space=a,e.post_space=i,(0,tr.__t__)((0,tr.__t__)(null===n)&&(0,tr.__t__)(null!==u)&&null!==_)&&(e.pos_end=(0,tr.__add__)(_,u)),(0,tr.__t__)(o)){var f=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unexpected arguments to LatexToken(): ",(0,tr.__call__)(tr.repr,null,o)));throw f.__cause__=null,f}e._fields=["tok","arg","pos","pos_end","pre_space"],(0,tr.__t__)((0,tr.__in__)(e.tok,(0,tr.tuple)(["macro","comment"])))&&function(){var t=e._fields;(0,tr.__call__)(t.append,t,"post_space")}(),(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Vn,"__init__"),null,e)}))},get _get_len(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__t__)(null===e.pos)||null===e.pos_end)?null:(0,tr.__sub__)(e.pos_end,e.pos)}))},get __unicode__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(qn,null,function(){var t=e;return(0,tr.__call__)(t.__str__,t)}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("LatexToken(",(0,tr.__call__)(", ".join,", ",function(){for(var t,r,_=[],n=e._fields,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(t="{}={!r}",(0,tr.__call__)(t.format,t,i,(0,tr.__call__)(tr.getattr,null,e,i))))}return _}())),")")}))},get __str__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e;return(0,tr.__call__)(t.__repr__,t)}()}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__call__)(tr.all,null,function(){for(var r,_=[],n=e._fields,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__call__)(tr.getattr,null,e,i))&&null===(0,tr.__call__)(tr.getattr,null,t,i))||(0,tr.__eq__)((0,tr.__call__)(tr.getattr,null,e,i),(0,tr.__call__)(tr.getattr,null,t,i)))}return(0,tr.py_iter)(_)}())}))},__hash__:null});Object.defineProperty(Vn,"len",tr.property.call(Vn,Vn._get_len));var Gn={};(0,tr.__nest__)(Gn,"",m_);var Un="pylatexenc.latexnodes._tokenreaderbase",$n=(function(){var e=Gn;(0,tr.__call__)(e.getLogger,e,Un)}(),(0,tr.__class__)("LatexTokenReaderBase",[tr.object],{__module__:Un,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$n,"__init__"),null,e,(0,tr.__kwargtrans__)(t))}))},get make_token(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return(0,tr.__call__)(Vn,null,(0,tr.__kwargtrans__)(t))}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"rewind_pre_space":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement rewind_to_token()");throw i.__cause__=null,i}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"fastforward_post_space":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement move_past_token()");throw i.__cause__=null,i}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement peek_token()");throw a.__cause__=null,a}))},get peek_token_or_none(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}try{return function(){var r=e;return(0,tr.__call__)(r.peek_token,r,(0,tr.__kwargtrans__)({parsing_state:t}))}()}catch(e){if((0,tr.isinstance)(e,Y_))return null;throw e}}))},get next_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.peek_token,r,(0,tr.__kwargtrans__)({parsing_state:t}))}();return function(){var t=e;(0,tr.__call__)(t.move_past_token,t,a)}(),a}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=(0,tr.__call__)(RuntimeError,null,"LatexTokenReaderBase subclasses must reimplement cur_pos()");throw n.__cause__=null,n}))},get peek_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))},get skip_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))},get peek_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"num_chars":t=n[a];break;case"parsing_state":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get next_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"num_chars":t=n[a];break;case"parsing_state":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw i.__cause__=null,i}))},get move_to_pos_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pos":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"This token reader does not support character-level access");throw a.__cause__=null,a}))}})),Wn=(0,tr.__class__)("LatexTokenListTokenReader",[$n],{__module__:Un,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token_list":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wn,"__init__"),null,e),e.token_list=t,e._idx=0}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}if((0,tr.__t__)((0,tr.__ge__)(e._idx,(0,tr.__call__)(tr.len,null,e.token_list)))){var a=(0,tr.__call__)(Y_,null);throw a.__cause__=null,a}return(0,tr.__getitem__)(e.token_list,e._idx)}))},get next_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.peek_token,r,t)}();return e._idx=(0,tr.__call__)(tr.__iadd__,null,e._idx,1),a}))},get _find_tok_idx(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"methname":r=n[a]}}}try{var i=(0,tr.__call__)(tr.py_next,null,function(){for(var r,_=[],n=(0,tr.__call__)(tr.enumerate,null,e.token_list),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];(0,tr.__t__)(l===t)&&(r=void 0,r=_,(0,tr.__call__)(r.append,r,o))}return(0,tr.py_iter)(_)}())}catch(e){if((0,tr.isinstance)(e,tr.StopIteration)){var o=(0,tr.__call__)(tr.IndexError,null,function(){var e="{}({!r}): no such token in list";return(0,tr.__call__)(e.format,e,r,t)}());throw o.__cause__=null,o}throw e}return i}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"rewind_pre_space":r=n[a]}}}e._idx=function(){var r=e;return(0,tr.__call__)(r._find_tok_idx,r,t,"move_to_token")}()}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"fastforward_post_space":r=n[a]}}}e._idx=(0,tr.__add__)(function(){var r=e;return(0,tr.__call__)(r._find_tok_idx,r,t,"move_past_token")}(),1)}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e;return(0,tr.__call__)(t.peek_token,t,null)}().pos}))},get final_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__getitem__)(e.token_list,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e.token_list),1)).pos_end}))}}),Hn={},Yn={};(0,tr.__nest__)(Hn,"",m_),(0,tr.__nest__)(Yn,"",pr);var Xn="pylatexenc.latexnodes._tokenreader",Zn=(function(){var e=Hn;(0,tr.__call__)(e.getLogger,e,Xn)}(),(0,tr.__class__)("LatexTokenReader",[$n],{__module__:Xn,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"s":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zn,"__init__"),null,e),e.s=t,e.tolerant_parsing=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"tolerant_parsing",!1)}(),(0,tr.__t__)(r)){var i=(0,tr.__call__)(tr.ValueError,null,function(){var e="Invalid argument(s) to LatexTokenReader: {!r}";return(0,tr.__call__)(e.format,e,r)}());throw i.__cause__=null,i}e._pos=0}))},get move_to_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"rewind_pre_space":r=n[a]}}}if((0,tr.__t__)(r))var i=(0,tr.__sub__)(t.pos,(0,tr.__call__)(tr.len,null,t.pre_space));else i=t.pos;!function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,i)}()}))},get move_past_token(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"tok":t=n[a];break;case"fastforward_post_space":r=n[a]}}}var i=t.pos_end;if((0,tr.__t__)(!(0,tr.__t__)(r))){var o=(0,tr.__call__)(tr.getattr,null,t,"post_space",null);if((0,tr.__t__)(o))i=(0,tr.__call__)(tr.__isub__,null,i,(0,tr.__call__)(tr.len,null,o))}!function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,i)}()}))},get peek_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"num_chars":t=n[a];break;case"parsing_state":r=n[a]}}}if((0,tr.__t__)((0,tr.__ge__)(e._pos,(0,tr.__call__)(tr.len,null,e.s)))){var i=(0,tr.__call__)(Y_,null);throw i.__cause__=null,i}return(0,tr.__getslice__)(e.s,e._pos,(0,tr.__add__)(e._pos,t),1)}))},get next_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"num_chars":t=n[a];break;case"parsing_state":r=n[a]}}}var i=function(){var _=e;return(0,tr.__call__)(_.peek_chars,_,t,r)}();return e._pos=(0,tr.__call__)(tr.__iadd__,null,e._pos,t),(0,tr.__t__)((0,tr.__gt__)(e._pos,(0,tr.__call__)(tr.len,null,e.s)))&&(e._pos=(0,tr.__call__)(tr.len,null,e.s)),i}))},get cur_pos(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._pos}))},get move_to_pos_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pos":t=_[n]}}}!function(){var r=e;(0,tr.__call__)(r._advance_to_pos,r,t)}()}))},get _advance_to_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pos":t=_[n]}}}e._pos=t}))},get skip_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,e.s,e._pos,t)}(),i=a[0],o=a[1],l=a[2];return function(){var t=e;(0,tr.__call__)(t._advance_to_pos,t,l)}(),(0,tr.tuple)([i,o,l])}))},get peek_space_chars(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,e.s,e._pos,t)}()}))},get peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}try{return function(){var r=e;return(0,tr.__call__)(r.impl_peek_token,r,t)}()}catch(t){if((0,tr.isinstance)(t,W_)){var a=t;if((0,tr.__t__)(e.tolerant_parsing))return function(){var t=e;(0,tr.__call__)(t.move_to_pos_chars,t,a.recovery_token_at_pos)}(),a.recovery_token_placeholder;throw t.__cause__=null,t}throw t}}))},get impl_peek_token(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state":t=_[n]}}}var a=e.s,i=(0,tr.__call__)(tr.len,null,a),o=e._pos,l=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,a,o,t)}(),s=l[0],c=l[1],u=l[2];if((0,tr.__t__)((0,tr.__t__)(t.enable_double_newline_paragraphs)&&(0,tr.__ge__)(function(){var e=s;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var f=function(){var e=s;return(0,tr.__call__)(e.find,e,"\n")}(),d=(0,tr.__add__)(function(){var e=s;return(0,tr.__call__)(e.rfind,e,"\n")}(),1),p=(s=(0,tr.__getslice__)(s,0,f,1),(0,tr.__add__)(c,f)),h=(0,tr.__add__)(c,d);if((0,tr.__t__)(null!==t.latex_context)){try{var g=function(){var e=t.latex_context;return(0,tr.__call__)(e.get_specials_spec,e,(0,tr.__kwargtrans__)({specials_chars:"\n\n"}))}()}catch(m){if(!(0,tr.isinstance)(m,tr.KeyError))throw m;g=null}if((0,tr.__t__)((0,tr.__t__)(null!==g)&&(0,tr.__eq__)(g.specials_chars,"\n\n")))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"specials",arg:g,pos:p,pos_end:h,pre_space:s}))}()}var v=(0,tr.__getslice__)(a,p,h,1);return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"char",arg:v,pos:p,pos_end:h,pre_space:s}))}()}o=u;if((0,tr.__t__)((0,tr.__ge__)(o,i))){var m=(0,tr.__call__)(Y_,null,(0,tr.__kwargtrans__)({final_space:s}));throw m.__cause__=null,m}var y=(0,tr.__getitem__)(a,o);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(y,t._math_delims_info_startchars))&&t.enable_math)){var w=function(){var r=e;return(0,tr.__call__)(r.impl_maybe_read_math_mode_delimiter,r,a,o,t,s)}();if((0,tr.__t__)(null!==w))return w}if((0,tr.__t__)((0,tr.__eq__)(y,t.macro_escape_char))){if((0,tr.__t__)(t.enable_environments)){if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,"begin",(0,tr.__add__)(o,1))}()))var b="begin";else if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,"end",(0,tr.__add__)(o,1))}()))b="end";else b=null;if((0,tr.__t__)(b)){var k=(0,tr.__add__)((0,tr.__add__)(o,1),(0,tr.__call__)(tr.len,null,b));if((0,tr.__t__)((0,tr.__t__)((0,tr.__ge__)(k,(0,tr.__call__)(tr.len,null,a)))||!(0,tr.__in__)((0,tr.__getitem__)(a,k),t.macro_alpha_chars)))return function(){var r=e;return(0,tr.__call__)(r.impl_read_environment,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,beginend:b,pre_space:s}))}()}}if((0,tr.__t__)(t.enable_macros))return function(){var r=e;return(0,tr.__call__)(r.impl_read_macro,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,pre_space:s}))}()}if((0,tr.__t__)((0,tr.__t__)(t.enable_comments)&&(0,tr.__t__)((0,tr.__eq__)(y,(0,tr.__getitem__)(t.comment_start,0)))&&function(){var e=a;return(0,tr.__call__)(e.startswith,e,t.comment_start,o)}()))return function(){var r=e;return(0,tr.__call__)(r.impl_read_comment,r,(0,tr.__kwargtrans__)({s:a,pos:o,parsing_state:t,pre_space:s}))}();if((0,tr.__t__)(t.enable_groups)){if((0,tr.__t__)((0,tr.__in__)(y,t._latex_group_delimchars_by_open)))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"brace_open",arg:y,pos:o,pos_end:(0,tr.__add__)(o,1),pre_space:s}))}();if((0,tr.__t__)((0,tr.__in__)(y,t._latex_group_delimchars_close)))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"brace_close",arg:y,pos:o,pos_end:(0,tr.__add__)(o,1),pre_space:s}))}()}if((0,tr.__t__)((0,tr.__t__)(null!==t.latex_context)&&t.enable_specials)){g=function(){var e=t.latex_context;return(0,tr.__call__)(e.test_for_specials,e,a,o,(0,tr.__kwargtrans__)({parsing_state:t}))}();if((0,tr.__t__)(null!==g))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"specials",arg:g,pos:o,pos_end:(0,tr.__add__)(o,(0,tr.__call__)(tr.len,null,g.specials_chars)),pre_space:s}))}()}return function(){var r=e;return(0,tr.__call__)(r.impl_char_token,r,y,o,(0,tr.__add__)(o,1),t,s)}()}))},get impl_peek_space_chars(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":_=a[i]}}}for(var o=r,l="";(0,tr.__t__)(!0)&&!(0,tr.__t__)((0,tr.__ge__)(o,(0,tr.__call__)(tr.len,null,t)));){var s=(0,tr.__getitem__)(t,o);if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=s;return(0,tr.__call__)(e.isspace,e)}())))break;l=(0,tr.__call__)(tr.__iadd__,null,l,s),o=(0,tr.__call__)(tr.__iadd__,null,o,1)}return(0,tr.tuple)([l,r,o])}))},get impl_char_token(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"c":t=o[l];break;case"pos":r=o[l];break;case"pos_end":_=o[l];break;case"parsing_state":n=o[l];break;case"pre_space":a=o[l]}}}if((0,tr.__t__)((0,tr.__in__)(t,n.forbidden_characters))){var s=(0,tr.__call__)(W_,null,(0,tr.__kwargtrans__)({s:e.s,pos:r,msg:function(){var e="Character is forbidden here: {} ({:#x})";return(0,tr.__call__)(e.format,e,t,(0,tr.__call__)(tr.ord,null,t))}(),error_type_info:(0,tr.dict)({what:"token_forbidden_character",forbidden_character:t}),recovery_token_placeholder:function(){var n=e;return(0,tr.__call__)(n.make_token,n,(0,tr.__kwargtrans__)({tok:"char",arg:t,pos:r,pos_end:_,pre_space:a}))}(),recovery_token_at_pos:_}));throw s.__cause__=null,s}return function(){var n=e;return(0,tr.__call__)(n.make_token,n,(0,tr.__kwargtrans__)({tok:"char",arg:t,pos:r,pos_end:_,pre_space:a}))}()}))},get impl_maybe_read_math_mode_delimiter(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":_=i[o];break;case"pre_space":n=i[o]}}}if((0,tr.__t__)(_.in_math_mode)){var l=_._math_expecting_close_delim_info;if((0,tr.__t__)(null!==l)){var s=(0,tr.__getitem__)(l,"close_delim"),c=(0,tr.__getitem__)(l,"tok");if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,s,r)}()))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:c,arg:s,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,s)),pre_space:n}))}()}}for(var u=_._math_all_delims_by_len,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=d[0],h=d[1];if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,p,r)}()))return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:h,arg:p,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,p)),pre_space:n}))}()}return null}))},get impl_read_macro(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":_=i[o];break;case"pre_space":n=i[o]}}}if((0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)(t,r),_.macro_escape_char)))throw(l=(0,tr.__call__)(tr.ValueError,null,"Internal error, expected '\\' in impl_read_macro()")).__cause__=null,l;if((0,tr.__t__)((0,tr.__ge__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,t)))){var l=(0,tr.__call__)(W_,null,(0,tr.__kwargtrans__)({s:t,pos:(0,tr.__add__)(r,1),msg:function(){var e="Expected macro name after {} escape character";return(0,tr.__call__)(e.format,e,_.macro_escape_char)}(),error_type_info:(0,tr.dict)({what:"token_end_of_stream_immediately_after_escape_character"}),recovery_token_placeholder:function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"char",arg:"",pos:r,pos_end:r,pre_space:n}))}(),recovery_token_at_pos:(0,tr.__call__)(tr.len,null,t)}));throw l.__cause__=null,l}var s=(0,tr.__getitem__)(t,(0,tr.__add__)(r,1)),c=s,u=(0,tr.__in__)(s,_.macro_alpha_chars),f=(0,tr.__add__)(r,2);if((0,tr.__t__)(u))for(;(0,tr.__t__)((0,tr.__t__)((0,tr.__lt__)(f,(0,tr.__call__)(tr.len,null,t)))&&(0,tr.__in__)((0,tr.__getitem__)(t,f),_.macro_alpha_chars));)c=(0,tr.__call__)(tr.__iadd__,null,c,(0,tr.__getitem__)(t,f)),f=(0,tr.__call__)(tr.__iadd__,null,f,1);var d="";if((0,tr.__t__)(u)){var p=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,t,f,_)}(),h=(d=p[0],p[1]),g=p[2];if((0,tr.__t__)((0,tr.__ge__)(function(){var e=d;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var v=function(){var e=d;return(0,tr.__call__)(e.find,e,"\n")}();g=(0,tr.__add__)(h,v),d=(0,tr.__getslice__)(d,0,v,1)}f=g}return function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:"macro",arg:c,pos:r,pos_end:f,pre_space:n,post_space:d}))}()}))},rx_environment_name:function(){var e=Yn;return(0,tr.__call__)(e.compile,e,"\\s*\\{(?P<environmentname>[A-Za-z0-9*._ :/!^()\\[\\]-]+)\\}")}(),get parse_latex_environment_name(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"pos":t=a[i];break;case"beginend":r=a[i];break;case"pos_envname":_=a[i]}}}var o=function(){var t=e.rx_environment_name;return(0,tr.__call__)(t.match,t,(0,tr.__getslice__)(e.s,_,null,1))}();if((0,tr.__t__)(null===o))return(0,tr.tuple)([null,null]);var l=(0,tr.__add__)(_,function(){var e=o;return(0,tr.__call__)(e.end,e)}());return(0,tr.tuple)([function(){var e=o;return(0,tr.__call__)(e.group,e,"environmentname")}(),l])}))},get impl_read_environment(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"s":t=o[l];break;case"pos":r=o[l];break;case"parsing_state":_=o[l];break;case"beginend":n=o[l];break;case"pre_space":a=o[l]}}}if((0,tr.__t__)((0,tr.__ne__)((0,tr.__getslice__)(t,r,(0,tr.__add__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,n)),1),(0,tr.__add__)(_.macro_escape_char,n)))){var s=(0,tr.__call__)(tr.ValueError,null,function(){var e="Internal error, expected {}{} in read_environment()";return(0,tr.__call__)(e.format,e,_.macro_escape_char,n)}());throw s.__cause__=null,s}var c=(0,tr.__add__)((0,tr.__add__)(r,1),(0,tr.__call__)(tr.len,null,n)),u=function(){var t=e;return(0,tr.__call__)(t.parse_latex_environment_name,t,r,n,c)}(),f=u[0],d=u[1];if((0,tr.__t__)(null===f)){var p=(0,tr.__add__)(_.macro_escape_char,n);s=(0,tr.__call__)(W_,null,(0,tr.__kwargtrans__)({s:t,msg:function(){var e="Bad \\{} call: expected {{environmentname}}";return(0,tr.__call__)(e.format,e,n)}(),pos:r,error_type_info:(0,tr.dict)({what:"token_error_parse_beginend_environment_name",beginend:n,macro_beginend:p}),recovery_token_placeholder:(0,tr.__call__)(Vn,null,(0,tr.__kwargtrans__)({tok:"char",arg:p,pos:r,pos_end:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,p)),pre_space:a})),recovery_token_at_pos:(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,p))}));throw s.__cause__=null,s}var h=function(){var t=e;return(0,tr.__call__)(t.make_token,t,(0,tr.__kwargtrans__)({tok:(0,tr.__add__)(n,"_environment"),arg:f,pos:r,pos_end:d,pre_space:a}))}();return h}))},get impl_read_comment(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"pos":r=i[o];break;case"parsing_state":_=i[o];break;case"pre_space":n=i[o]}}}if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,_.comment_start,r)}()))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var e="Internal error, expected comment start {} in read_comment()";return(0,tr.__call__)(e.format,e,_.comment_start)}());throw l.__cause__=null,l}var s=(0,tr.__add__)(r,(0,tr.__call__)(tr.len,null,_.comment_start)),c=function(){var e=t;return(0,tr.__call__)(e.find,e,"\n",s)}();if((0,tr.__t__)((0,tr.__eq__)(c,(0,tr.__neg__)(1))))var u=(0,tr.__call__)(tr.len,null,t),f=(0,tr.__call__)(tr.len,null,t),d="";else{var p=function(){var r=e;return(0,tr.__call__)(r.impl_peek_space_chars,r,t,c,_)}(),h=(d=p[0],p[1]),g=p[2];if((0,tr.__t__)((0,tr.__ge__)(function(){var e=d;return(0,tr.__call__)(e.count,e,"\n")}(),2))){var v=function(){var e=d;return(0,tr.__call__)(e.find,e,"\n")}();g=(0,tr.__add__)(h,v),d=(0,tr.__getslice__)(d,0,v,1)}u=c,f=g}return function(){var _=e;return(0,tr.__call__)(_.make_token,_,(0,tr.__kwargtrans__)({tok:"comment",arg:(0,tr.__getslice__)(t,s,u,1),pos:r,pos_end:f,pre_space:n,post_space:d}))}()}))}})),Kn=(tr=a("hoVWB"),{}),Jn={};(0,tr.__nest__)(Jn,"",ur),(0,tr.__nest__)(Kn,"",m_);var Qn="pylatexenc.latexnodes._parsingstate",ea=function(){var e=Kn;return(0,tr.__call__)(e.getLogger,e,Qn)}(),ta=(0,tr.__add__)((0,tr.__call__)("".join,"",function(){for(var e,t=[],r=0;r<26;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)((0,tr.__call__)(tr.ord,null,"a"),r)));return t}()),(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=0;r<26;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)((0,tr.__call__)(tr.ord,null,"A"),r)));return t}())),ra=Jn.fn_unique_object_id,_a=(0,tr.__class__)("ParsingState",[tr.object],{__module__:Qn,_fields:(0,tr.tuple)(["s","latex_context","in_math_mode","math_mode_delimiter","latex_group_delimiters","latex_inline_math_delimiters","latex_display_math_delimiters","enable_double_newline_paragraphs","enable_macros","enable_environments","enable_comments","enable_groups","enable_specials","enable_math","macro_alpha_chars","macro_escape_char","comment_start","forbidden_characters"]),get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_a,"__init__"),null,e),e._parent_parsing_state_info=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"_parent_parsing_state_info",(0,tr.tuple)([null,(0,tr.dict)({})]))}(),function(){var r=e;(0,tr.__call__)(r.set_fields,r,(0,tr.__kwargtrans__)(t))}(),function(){var t=e;(0,tr.__call__)(t.finalize_state,t)}()}))},get set_fields(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l,s,c,u,f,d,p,h,g,v,m){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=!0;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=!0;if(void 0===c||null!=c&&c.hasOwnProperty("__kwargtrans__"))c=!0;if(void 0===u||null!=u&&u.hasOwnProperty("__kwargtrans__"))u=!0;if(void 0===f||null!=f&&f.hasOwnProperty("__kwargtrans__"))f=!0;if(void 0===d||null!=d&&d.hasOwnProperty("__kwargtrans__"))d=!0;if(void 0===p||null!=p&&p.hasOwnProperty("__kwargtrans__"))p=!0;if(void 0===h||null!=h&&h.hasOwnProperty("__kwargtrans__"))h=ta;if(void 0===g||null!=g&&g.hasOwnProperty("__kwargtrans__"))g="\\";if(void 0===v||null!=v&&v.hasOwnProperty("__kwargtrans__"))v="%";if(void 0===m||null!=m&&m.hasOwnProperty("__kwargtrans__"))m="";if(arguments.length){var y=arguments.length-1;if(arguments[y]&&arguments[y].hasOwnProperty("__kwargtrans__")){var w=arguments[y--];for(var b in w)switch(b){case"self":e=w[b];break;case"s":t=w[b];break;case"latex_context":r=w[b];break;case"in_math_mode":_=w[b];break;case"math_mode_delimiter":n=w[b];break;case"latex_group_delimiters":a=w[b];break;case"latex_inline_math_delimiters":i=w[b];break;case"latex_display_math_delimiters":o=w[b];break;case"enable_double_newline_paragraphs":l=w[b];break;case"enable_macros":s=w[b];break;case"enable_environments":c=w[b];break;case"enable_comments":u=w[b];break;case"enable_groups":f=w[b];break;case"enable_specials":d=w[b];break;case"enable_math":p=w[b];break;case"macro_alpha_chars":h=w[b];break;case"macro_escape_char":g=w[b];break;case"comment_start":v=w[b];break;case"forbidden_characters":m=w[b]}}}e.s=t,e.latex_context=r,e.in_math_mode=_,e.math_mode_delimiter=n,(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.in_math_mode))&&e.math_mode_delimiter)&&(!function(){var t=ea;(0,tr.__call__)(t.warning,t,"ParsingState: You set math_mode_delimiter=%r but in_math_mode is False",e.math_mode_delimiter)}(),e.math_mode_delimiter=null),e.latex_group_delimiters=(0,tr.__t__)(null!==a)?a:[(0,tr.tuple)(["{","}"])],e.latex_inline_math_delimiters=(0,tr.__t__)(null!==i)?i:[(0,tr.tuple)(["$","$"]),(0,tr.tuple)(["\\(","\\)"])],e.latex_display_math_delimiters=(0,tr.__t__)(null!==o)?o:[(0,tr.tuple)(["$$","$$"]),(0,tr.tuple)(["\\[","\\]"])],e.enable_double_newline_paragraphs=l,e.enable_macros=s,e.enable_environments=c,e.enable_comments=u,e.enable_groups=f,e.enable_specials=d,e.enable_math=p,e.macro_alpha_chars=h,e.macro_escape_char=g,e.comment_start=v,e.forbidden_characters=m}))},get _finalize_state_latex_group_delimiters_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parent":t=n[a];break;case"kwargs":r=n[a]}}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&!(0,tr.__in__)("latex_group_delimiters",r)))return e._latex_group_delimchars_by_open=t._latex_group_delimchars_by_open,void(e._latex_group_delimchars_close=t._latex_group_delimchars_close);var i=(0,tr.__call__)(tr.zip,null,...e.latex_group_delimiters),o=(i[0],i[1]);e._latex_group_delimchars_by_open=(0,tr.__call__)(tr.dict,null,e.latex_group_delimiters),e._latex_group_delimchars_close=(0,tr.__call__)(tr.set,null,o)}))},get _finalize_state_latex_math_delim_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parent":t=n[a];break;case"kwargs":r=n[a]}}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(!(0,tr.__in__)("latex_inline_math_delimiters",r))&&!(0,tr.__in__)("latex_display_math_delimiters",r)))return e._math_delims_info_startchars=t._math_delims_info_startchars,e._math_all_delims_by_len=t._math_all_delims_by_len,e._math_delims_info_by_open=t._math_delims_info_by_open,void(e._math_delims_close=t._math_delims_close);e._math_delims_info_startchars=(0,tr.__call__)("".join,"",function(){for(var t,r=[],_=(0,tr.__add__)(e.latex_inline_math_delimiters,e.latex_display_math_delimiters),n=0;n<(0,tr.len)(_);n++)for(var a=(0,tr.__getitem__)(_,n),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__getslice__)(o,0,1,1))}return r}()),e._math_all_delims_by_len=(0,tr.__call__)(tr.sorted,null,function(){for(var t,r=[],_=(0,tr.tuple)([(0,tr.tuple)([e.latex_inline_math_delimiters,"mathmode_inline"]),(0,tr.tuple)([e.latex_display_math_delimiters,"mathmode_display"])]),n=0;n<(0,tr.len)(_);n++)for(var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1],l=(0,tr.__call__)(tr.set,null,function(){for(var e,t=[],r=i,_=0;_<(0,tr.len)(r);_++)for(var n=(0,tr.__getitem__)(r,_),a=0;a<(0,tr.len)(n);a++){var o=(0,tr.__getitem__)(n,a);e=void 0,e=t,(0,tr.__call__)(e.append,e,o)}return t}()),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([c,o]))}return r}(),(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e,0))},reverse:!0})),e._math_delims_info_by_open=(0,tr.__call__)(tr.dict,null,(0,tr.__add__)(function(){for(var t,r=[],_=e.latex_inline_math_delimiters,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([i,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({close_delim:o,tok:"mathmode_inline"}))]))}return r}(),function(){for(var t,r=[],_=e.latex_display_math_delimiters,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([i,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({close_delim:o,tok:"mathmode_display"}))]))}return r}())),e._math_delims_close=(0,tr.__call__)(tr.set,null,function(){for(var t,r=[],_=(t=e._math_delims_info_by_open,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=(a[0],a[1]);!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(i,"close_delim"))}()}return r}())}))},get _finalize_state_inmathmode_info(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parent":t=n[a];break;case"kwargs":r=n[a]}}}(0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(!(0,tr.__in__)("in_math_mode",r))&&!(0,tr.__in__)("math_mode_delimiter",r))?e._math_expecting_close_delim_info=t._math_expecting_close_delim_info:(0,tr.__t__)(!(0,tr.__t__)(e.in_math_mode))?e._math_expecting_close_delim_info=null:(0,tr.__t__)((0,tr.__in__)(e.math_mode_delimiter,e._math_delims_info_by_open))?e._math_expecting_close_delim_info=(0,tr.__getitem__)(e._math_delims_info_by_open,e.math_mode_delimiter):e._math_expecting_close_delim_info=null}))},get finalize_state(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e._parent_parsing_state_info,a=n[0],i=n[1];!function(){var t=e;(0,tr.__call__)(t._finalize_state_latex_group_delimiters_info,t,a,i)}(),function(){var t=e;(0,tr.__call__)(t._finalize_state_latex_math_delim_info,t,a,i)}(),function(){var t=e;(0,tr.__call__)(t._finalize_state_inmathmode_info,t,a,i)}()}))},get sub_context(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var t=e;return(0,tr.__call__)(t.get_fields,t)}(),i=function(){for(var e,r=[],_=(e=t,(0,tr.__call__)(e.py_items,e)),n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(na,null,l,(0,tr.__getitem__)(a,o))))&&function(){var e=r;(0,tr.__call__)(e.append,e,[o,l])}()}return(0,tr.dict)(r)}();!function(){var e=a;(0,tr.__call__)(e.py_update,e,i)}();var o=function(){var t=e;return(0,tr.__call__)(t.__class__,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_parent_parsing_state_info:(0,tr.tuple)([e,i])},a)))}();return o}))},get get_fields(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([a,(0,tr.__call__)(tr.getattr,null,e,a)]))}return r}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.__class__.__name__,a=function(){var t="{}<{:#x}>";return(0,tr.__call__)(t.format,t,n,(0,tr.__call__)(ra,null,e))}(),i=e._parent_parsing_state_info,o=i[0],l=i[1];return(0,tr.__t__)(!(0,tr.__t__)(o))?a:(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(a,function(){var e="(<{:#x}> {} ";return(0,tr.__call__)(e.format,e,(0,tr.__call__)(ra,null,o),"")}()),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=(e=l,(0,tr.__call__)(e.py_items,e)),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=n[0],i=n[1];(0,tr.__t__)(!(0,tr.__in__)(a,(0,tr.tuple)(["s"])))&&function(){var e,r=t;(0,tr.__call__)(r.append,r,(e="{}={!r}",(0,tr.__call__)(e.format,e,a,i)))}()}return t}())),")")}))},get to_json_object(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r,_=[],n=(t=e,r=(0,tr.__call__)(t.get_fields,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__in__)(o,(0,tr.tuple)(["latex_context","s"])))&&function(){var e=_;(0,tr.__call__)(e.append,e,[o,l])}()}return(0,tr.dict)(_)}()}))}}),na=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"a":e=_[n];break;case"b":t=_[n]}}}return(0,tr.__t__)((0,tr.__t__)(null===e)&&null===t)||(0,tr.__eq__)(e,t)},aa=(tr=a("hoVWB"),{});(0,tr.__nest__)(aa,"",m_);var ia="pylatexenc.latexnodes._nodescollector",oa=function(){var e=aa;return(0,tr.__call__)(e.getLogger,e,ia)}(),la=(0,tr.__class__)("LatexNodesCollector",[tr.object],{__module__:ia,ReachedEndOfStream:(0,tr.__class__)("ReachedEndOfStream",[tr.Exception],{__module__:ia}),ReachedStoppingCondition:(0,tr.__class__)("ReachedStoppingCondition",[tr.Exception],{__module__:ia,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"stop_data":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,la.ReachedStoppingCondition,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.stop_data=t}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!0;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"latex_walker":t=s[c];break;case"token_reader":r=s[c];break;case"parsing_state":_=s[c];break;case"stop_token_condition":n=s[c];break;case"stop_nodelist_condition":a=s[c];break;case"make_child_parsing_state":i=s[c];break;case"include_stop_token_pre_space_chars":o=s[c]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,la,"__init__"),null,e),e.latex_walker=t,e.token_reader=r,e.stop_token_condition=n,e.stop_nodelist_condition=a,e.include_stop_token_pre_space_chars=o,e._stop_token_condition_met=!1,e._stop_token_condition_met_token=null,e._stop_nodelist_condition_met=!1,e._stop_condition_stop_data=null,e._reached_end_of_stream=!1,e.parsing_state=_,e.start_parsing_state=_,e._nodelist=[],e._pending_chars_pos=null,e._pending_chars="",e._finalized=!1,e._make_child_parsing_state_fn=i}))},get get_final_nodelist(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(!(0,tr.__t__)(e._finalized))){var n=(0,tr.__call__)(RuntimeError,null,"Call to get_final_nodelist() before finalize()");throw n.__cause__=null,n}return function(){var t=e.latex_walker;return(0,tr.__call__)(t.make_nodelist,t,(0,tr.__kwargtrans__)({nodelist:e._nodelist,parsing_state:e.start_parsing_state}))}()}))},get get_parser_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(!(0,tr.__t__)(e._finalized))){var n=(0,tr.__call__)(RuntimeError,null,"Call to get_parser_parsing_state_delta() before finalize()");throw n.__cause__=null,n}return(0,tr.__t__)(e.start_parsing_state===e.parsing_state)?null:(0,tr.__call__)(Nn,null,(0,tr.__kwargtrans__)({set_parsing_state:e.parsing_state}))}))},get pos_start(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}try{var n=(0,tr.__call__)(tr.py_next,null,function(){for(var t,r=[],_=e._nodelist,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)(null!==a)&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a.pos))}return(0,tr.py_iter)(r)}())}catch(e){if(!(0,tr.isinstance)(e,tr.StopIteration))throw e;n=null}return(0,tr.__t__)(null!==n)?n:e._pending_chars_pos}))},get pos_end(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}try{var n=(0,tr.__call__)(tr.py_next,null,function(){for(var t,r=[],_=(0,tr.__call__)(tr.py_reversed,null,e._nodelist),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)(null!==a)&&(t=void 0,t=r,(0,tr.__call__)(t.append,t,a))}return(0,tr.py_iter)(r)}())}catch(e){if(!(0,tr.isinstance)(e,tr.StopIteration))throw e;n=null}return(0,tr.__t__)(null===n)?null:n.pos_end}))},get stop_token_condition_met(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._stop_token_condition_met}))},get stop_token_condition_met_token(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._stop_token_condition_met_token}))},get stop_nodelist_condition_met(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._stop_nodelist_condition_met}))},get stop_condition_stop_data(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._stop_condition_stop_data}))},get reached_end_of_stream(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._reached_end_of_stream}))},get is_finalized(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._finalized}))},get finalize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if(!(0,tr.__t__)(e._finalized)){var n=function(){var t=e;return(0,tr.__call__)(t.flush_pending_chars,t)}();if(e._finalized=!0,(0,tr.__t__)(null!==n)){var a=n;throw a.__cause__=null,a}}}))},get push_pending_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"chars":t=n[a];break;case"pos":r=n[a]}}}e._pending_chars=(0,tr.__call__)(tr.__iadd__,null,e._pending_chars,t),(0,tr.__t__)(null===e._pending_chars_pos)&&(e._pending_chars_pos=r)}))},get flush_pending_chars(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(!(0,tr.__t__)(e._pending_chars)))return null;var n=(0,tr.tuple)([e._pending_chars_pos,e._pending_chars]),a=n[0],i=n[1];e._pending_chars="",e._pending_chars_pos=null;var o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.make_node,t,rn,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,chars:i,pos:a,pos_end:(0,tr.__add__)(a,(0,tr.__call__)(tr.len,null,i))}))}();return function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,o)}()}))},get push_to_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}if((0,tr.__t__)(e._finalized)){var a=(0,tr.__call__)(RuntimeError,null,"You already called finalize()");throw a.__cause__=null,a}!function(){var r=e._nodelist;(0,tr.__call__)(r.append,r,t)}();var i=function(){var t=e;return(0,tr.__call__)(t._check_nodelist_stop_condition,t)}();return(0,tr.__t__)(null!==i)?i:null}))},get update_state_from_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"parsing_state_delta":t=_[n]}}}if((0,tr.__t__)(null!==t)){e.parsing_state;e.parsing_state=function(){var r=t;return(0,tr.__call__)(r.get_updated_parsing_state,r,e.parsing_state,e.latex_walker)}()}}))},get _check_nodelist_stop_condition(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.stop_nodelist_condition;if((0,tr.__t__)(null!==n)){var a=(0,tr.__call__)(n,null,e._nodelist);if((0,tr.__t__)(a))return e._stop_nodelist_condition_met=!0,function(){var e=la;return(0,tr.__call__)(e.ReachedStoppingCondition,e,(0,tr.__kwargtrans__)({stop_data:a}))}()}return null}))},get _check_token_stop_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}var a=e.stop_token_condition;if((0,tr.__t__)(null!==a)){var i=(0,tr.__call__)(a,null,t);if((0,tr.__t__)(i))return e._stop_token_condition_met=!0,e._stop_token_condition_met_token=t,function(){var e=la;return(0,tr.__call__)(e.ReachedStoppingCondition,e,(0,tr.__kwargtrans__)({stop_data:i}))}()}return null}))},get process_tokens(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}try{for(;(0,tr.__t__)(!0);)!function(){var t=e;(0,tr.__call__)(t.process_one_token,t)}()}catch(t){if((0,tr.isinstance)(t,la.ReachedStoppingCondition)){var n=t;return void(e._stop_condition_stop_data=n.stop_data)}if((0,tr.isinstance)(t,la.ReachedEndOfStream)){n=t;return void(e._reached_end_of_stream=!0)}if((0,tr.isinstance)(t,q_)){n=t;throw t.__cause__=null,t}throw t}finally{!function(){var t=e;(0,tr.__call__)(t.finalize,t)}()}}))},get process_one_token(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(e._finalized)){var n=(0,tr.__call__)(RuntimeError,null,"You already called finalize()");throw n.__cause__=null,n}var a=e.latex_walker,i=e.token_reader;try{var o=function(){var t=i;return(0,tr.__call__)(t.next_token,t,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state}))}()}catch(n){if(!(0,tr.isinstance)(n,Y_))throw n;var l=n,s=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"final_space"))?(0,tr.__call__)(tr.getattr,null,l,"final_space"):null;if(!(0,tr.__t__)(s)){var c=function(){var e=la;return(0,tr.__call__)(e.ReachedEndOfStream,e)}();c.pos_end=function(){var e=i;return(0,tr.__call__)(e.cur_pos,e)}();var u=c;throw u.__cause__=null,u}var f=(0,tr.__add__)(function(){var e=i;return(0,tr.__call__)(e.cur_pos,e)}(),(0,tr.__call__)(tr.len,null,s));o=function(){var e=i;return(0,tr.__call__)(e.make_token,e,(0,tr.__kwargtrans__)({tok:"char",arg:"",pre_space:s,pos:f,pos_end:f}))}();!function(){var e=i;(0,tr.__call__)(e.move_past_token,e,o)}()}var d=function(){var t=e;return(0,tr.__call__)(t._check_token_stop_condition,t,o)}();if((0,tr.__t__)(null!==d)){if((0,tr.__t__)(e.include_stop_token_pre_space_chars)){!function(){var t=e;(0,tr.__call__)(t.push_pending_chars,t,(0,tr.__kwargtrans__)({chars:o.pre_space,pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space))}))}();var p=!1}else p=!0;!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:p}))}(),d.pos_end=o.pos_end;var h=d;throw h.__cause__=null,h}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"char")))!function(){var t=e;(0,tr.__call__)(t.push_pending_chars,t,(0,tr.__kwargtrans__)({chars:(0,tr.__add__)(o.pre_space,o.arg),pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space))}))}();else{if((0,tr.__t__)(e._pending_chars)){e._pending_chars=(0,tr.__call__)(tr.__iadd__,null,e._pending_chars,o.pre_space),o.pre_space="";d=function(){var t=e;return(0,tr.__call__)(t.flush_pending_chars,t)}();if((0,tr.__t__)(null!==d)){!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}(),d.pos_end=o.pos;var g=d;throw g.__cause__=null,g}}else if((0,tr.__t__)(o.pre_space)){var v=function(){var t=a;return(0,tr.__call__)(t.make_node,t,rn,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,chars:o.pre_space,pos:(0,tr.__sub__)(o.pos,(0,tr.__call__)(tr.len,null,o.pre_space)),pos_end:o.pos}))}();o.pre_space="";d=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,v)}();if((0,tr.__t__)(null!==d)){!function(){var e=i;(0,tr.__call__)(e.move_to_token,e,o,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}(),d.pos_end=o.pos;var m=d;throw m.__cause__=null,m}}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"brace_close"))){var y=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected mismatching closing delimiter {}";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_closing_group_delimiter",delimiter:o.arg})}));throw y.__cause__=null,y}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"end_environment"))){var w=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected closing environment: {}";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_end_environment",environmentname:o.arg})}));throw w.__cause__=null,w}if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(o.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))&&!(0,tr.__in__)(o.arg,e.parsing_state._math_delims_info_by_open))){var b=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:function(){var e="Unexpected closing math mode token {}";return(0,tr.__call__)(e.format,e,o.arg)}(),pos:o.pos,recovery_past_token:o,error_type_info:(0,tr.dict)({what:"nodes_unexpected_closing_math_delimiter",mathmode_type:o.tok,delimiter:o.arg})}));throw b.__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(o.tok,"comment")))!function(){var t=e;(0,tr.__call__)(t.parse_comment_node,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"brace_open")))!function(){var t=e;(0,tr.__call__)(t.parse_latex_group,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"macro")))!function(){var t=e;(0,tr.__call__)(t.parse_macro,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"begin_environment")))!function(){var t=e;(0,tr.__call__)(t.parse_environment,t,o)}();else if((0,tr.__t__)((0,tr.__eq__)(o.tok,"specials")))!function(){var t=e;(0,tr.__call__)(t.parse_specials,t,o)}();else{if(!(0,tr.__t__)((0,tr.__in__)(o.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))){var k=(0,tr.__call__)(G_,null,function(){var e="Unknown token type: {}";return(0,tr.__call__)(e.format,e,o.tok)}(),(0,tr.__kwargtrans__)({pos:o.pos}));throw k.__cause__=null,k}!function(){var t=e;(0,tr.__call__)(t.parse_math,t,o)}()}}}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":_=a[i]}}}return(0,tr.__t__)(null!==e._make_child_parsing_state_fn)?function(){var n=e;return(0,tr.__call__)(n._make_child_parsing_state_fn,n,(0,tr.__kwargtrans__)({parsing_state:t,node_class:r,token:_}))}():e.parsing_state}))},get parse_comment_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}var a=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_node,r,nn,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state,comment:t.arg,comment_post_space:t.post_space,pos:t.pos,pos_end:t.pos_end}))}(),i=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,a)}();if((0,tr.__t__)(null!==i)){i.pos_end=t.pos_end;var o=i;throw o.__cause__=null,o}}))},get parse_latex_group(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}!function(){var r=e.token_reader;(0,tr.__call__)(r.move_to_token,r,t,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var a=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_latex_group_parser,r,(0,tr.__kwargtrans__)({delimiters:t.arg}))}(),i=function(){var r,_=e.latex_walker;return(0,tr.__call__)(_.parse_content,_,a,(0,tr.__kwargtrans__)({token_reader:e.token_reader,parsing_state:(r=e,(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,_n,(0,tr.__kwargtrans__)({token:t})))}))}(),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var e=oa;(0,tr.__call__)(e.warning,e,"parsing_state_delta is ignored after parsing a LaTeX group: %r",l)}();var s=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,o)}();if((0,tr.__t__)(null!==s)){s.pos_end=o.pos_end;var c=s;throw c.__cause__=null,c}}))},get parse_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}var a=t.arg,i=null;if((0,tr.__t__)(null!==e.parsing_state.latex_context))i=function(){var t=e.parsing_state.latex_context;return(0,tr.__call__)(t.get_macro_spec,t,a)}();if((0,tr.__t__)(null===i)){var o=function(){var r,_=e.latex_walker;return(0,tr.__call__)(_.check_tolerant_parsing_ignore_error,_,(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:(r="Encountered unknown macro \\{}",(0,tr.__call__)(r.format,r,a)),pos:t.pos,error_type_info:(0,tr.dict)({what:"nodes_unknown_macro_name",macroname:a})})))}();if((0,tr.__t__)(null!==o)){var l=o;throw l.__cause__=null,l}i=null}var s=an,c=function(){var e="macro \\{}";return(0,tr.__call__)(e.format,e,a)}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,i,s,c)}()}))},get parse_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}var a=e.latex_walker,i=t.arg,o=function(){var t=e.parsing_state.latex_context;return(0,tr.__call__)(t.get_environment_spec,t,i)}();if((0,tr.__t__)(null===o)){var l=function(){var e,r=a;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:(e="Encountered unknown environment {}{}{}",(0,tr.__call__)(e.format,e,"{",i,"}")),pos:t.pos,error_type_info:(0,tr.dict)({what:"nodes_unknown_environment_name",environmentname:i})})))}();if((0,tr.__t__)(null!==l)){var s=l;throw s.__cause__=null,s}o=null}var c=on,u=function(){var e="environment {}{}{}";return(0,tr.__call__)(e.format,e,"{",i,"}")}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,o,c,u)}()}))},get parse_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}var a=t.arg,i=ln,o=function(){var e="specials {}";return(0,tr.__call__)(e.format,e,(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,a,"specials_chars"))?(0,tr.__call__)(tr.getattr,null,a,"specials_chars"):"<unkonwn>")}();return function(){var r=e;return(0,tr.__call__)(r.parse_invocable_token_type,r,t,a,i,o)}()}))},get parse_invocable_token_type(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tok":t=i[o];break;case"spec":r=i[o];break;case"node_class":_=i[o];break;case"what":n=i[o]}}}var l=e.latex_walker,s=e.token_reader;if((0,tr.__t__)(null!==r))var c=function(){var e=r;return(0,tr.__call__)(e.get_node_parser,e,t)}();else c=null;if((0,tr.__t__)(null===c)){var u=function(){var e,r=l;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:(e="No parser found for callable token {!r}",(0,tr.__call__)(e.format,e,t)),pos:t.pos})))}();if((0,tr.__t__)(null!==u))throw(h=u).__cause__=null,h;var f=null,d=null}else{var p=function(){var r,a=l;return(0,tr.__call__)(a.parse_content,a,c,s,(r=e,(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,_,t)),(0,tr.__kwargtrans__)({open_context:(0,tr.tuple)([n,t])}))}();f=p[0],d=p[1]}if(function(){var t=e;(0,tr.__call__)(t.update_state_from_parsing_state_delta,t,d)}(),(0,tr.__t__)(null===f))!function(){var e=oa;(0,tr.__call__)(e.warning,e,"Parser %r produced no node (None) for token %r",c,t)}();else{var h;u=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,f)}();if((0,tr.__t__)(null!==u))throw u.pos_end=f.pos_end,(h=u).__cause__=null,h}}))},get parse_math(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"tok":t=_[n]}}}!function(){var r=e.token_reader;(0,tr.__call__)(r.move_to_token,r,t,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var a=function(){var r=e;return(0,tr.__call__)(r.make_child_parsing_state,r,e.parsing_state,sn,t)}(),i=function(){var r=e.latex_walker;return(0,tr.__call__)(r.make_latex_math_parser,r,(0,tr.__kwargtrans__)({math_mode_delimiters:t.arg}))}(),o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.parse_content,t,i,(0,tr.__kwargtrans__)({token_reader:e.token_reader,parsing_state:a}))}(),l=o[0],s=o[1];if(function(){var t=e;(0,tr.__call__)(t.update_state_from_parsing_state_delta,t,s)}(),(0,tr.__t__)(null===l))!function(){var e=oa;(0,tr.__call__)(e.warning,e,"Math parser produced no node (None) for token %r",t)}();else{var c=function(){var t=e;return(0,tr.__call__)(t.push_to_nodelist,t,l)}();if((0,tr.__t__)(null!==c)){c.pos_end=l.pos_end;var u=c;throw u.__cause__=null,u}}}))}}),sa={};(0,tr.__nest__)(sa,"",m_);var ca="flm.flmdocument",ua=function(){var e=sa;return(0,tr.__call__)(e.getLogger,e,ca)}(),fa=(0,tr.__class__)("FLMDocumentRenderContext",[E_],{__module__:ca,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"doc":t=i[o];break;case"fragment_renderer":r=i[o];break;case"feature_document_managers":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({doc:t,fragment_renderer:r},n))),e.feature_document_managers=_,e.feature_render_managers=function(){for(var t,r,_=[],n=e.feature_document_managers,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__t__)((0,tr.__t__)(null!==l)&&null!==l.RenderManager)?(0,tr.tuple)([o,(t=l,(0,tr.__call__)(t.RenderManager,t,l,e))]):(0,tr.tuple)([o,null]))}return _}(),e.feature_render_managers_by_name=(0,tr.__call__)(tr.dict,null,e.feature_render_managers),e.is_first_pass=!0,e._delayed_render_nodes=(0,tr.dict)({}),e._delayed_render_content=(0,tr.dict)({}),e.data=(0,tr.dict)({})}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__in__)(t,e.feature_render_managers_by_name)}))},get feature_render_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__getitem__)(e.feature_render_managers_by_name,t)}))},get register_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"fragment_renderer":r=n[a]}}}var i=t._flm_node_id;return(0,tr.__setitem__)(e._delayed_render_nodes,i,t),i}))},get get_delayed_render_content(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=t._flm_node_id;return(0,tr.__getitem__)(e._delayed_render_content,a)}))},get make_standalone_fragment(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"flm_text":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=e.doc.environment;return(0,tr.__call__)(_.make_fragment,_,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({standalone_mode:!0},r)))}()}))}}),da=(0,tr.__class__)("FLMDocument",[tr.object],{__module__:ca,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"render_callback":t=o[l];break;case"environment":r=o[l];break;case"enable_features":_=o[l];break;case"feature_document_options":n=o[l];break;case"metadata":a=o[l]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,da,"__init__"),null,e),e.environment=r,e.render_callback=t,e.metadata=a,e.features=function(){var t=e.environment;return(0,tr.__call__)(t.get_features_selection,t,_)}(),(0,tr.__t__)(null===n))n=(0,tr.dict)({});e.feature_document_options=(0,tr.__call__)(tr.dict,null,n),e.feature_document_managers=function(){for(var t,r,_=[],n=e.features,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__t__)(null!==i.DocumentManager)?(0,tr.tuple)([i.feature_name,(t=i,(0,tr.__call__)(t.DocumentManager,t,i,e))]):(0,tr.tuple)([i.feature_name,null]))}return _}(),e.feature_document_managers_by_name=(0,tr.__call__)(tr.dict,null,e.feature_document_managers)}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=e.feature_document_managers,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];if((0,tr.__t__)(null!==l)){var s=function(){var t=e.feature_document_options;return(0,tr.__call__)(t.py_get,t,o,(0,tr.dict)({}))}();!function(){var e=l;(0,tr.__call__)(e.initialize,e,(0,tr.__kwargtrans__)(s))}()}}}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__in__)(t,e.feature_document_managers_by_name)}))},get feature_document_manager(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__getitem__)(e.feature_document_managers_by_name,t)}))},get make_render_context(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"fragment_renderer":t=n[a];break;case"feature_render_options":r=n[a]}}}var i=(0,tr.__call__)(fa,null,e,t,e.feature_document_managers);if((0,tr.__t__)(null===r))r=(0,tr.dict)({});r=(0,tr.__call__)(tr.dict,null,r);for(var o=i.feature_render_managers,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];if((0,tr.__t__)(null!==u)){var f=function(){var e=r;return(0,tr.__call__)(e.py_get,e,c,(0,tr.__call__)(tr.dict,null))}();!function(){var e=u;(0,tr.__call__)(e.initialize,e,(0,tr.__kwargtrans__)(f))}()}}return i}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"fragment_renderer":t=n[a];break;case"feature_render_options":r=n[a]}}}var i=function(){var _=e;return(0,tr.__call__)(_.make_render_context,_,t,(0,tr.__kwargtrans__)({feature_render_options:r}))}();!function(){var e=t;(0,tr.__call__)(e.document_render_start,e,i)}();var o=function(){var t=e;return(0,tr.__call__)(t.render_callback,t,i)}();(0,tr.__t__)(null===o)&&function(){var e=ua;(0,tr.__call__)(e.warning,e,"The FLM document render callback function returned `None`! Did you forget a return ... instruction?")}();for(var l=i.feature_render_managers,s=0;s<(0,tr.len)(l);s++){(g=(0,tr.__getitem__)(l,s))[0];var c=g[1];(0,tr.__t__)(null!==c)&&function(){var e=c;(0,tr.__call__)(e.process,e,o)}()}for(l=function(){var e=i._delayed_render_nodes;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var u=(g=(0,tr.__getitem__)(l,s))[0],f=g[1];try{(0,tr.__setitem__)(i._delayed_render_content,u,function(){var e=f.flm_specinfo;return(0,tr.__call__)(e.render,e,f,i)}())}catch(e){if((0,tr.isinstance)(e,V_)){var d=e;throw function(){var e,t=d;(0,tr.__call__)(t.set_pos_or_add_open_context_from_node,t,f,(0,tr.__kwargtrans__)({what:"{} (delayed render)".format((e=f,(0,tr.__call__)(e.display_str,e)))}))}(),(0,tr.__t__)(f.latex_walker.what)&&function(){var e=d;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,f,(0,tr.__kwargtrans__)({what:f.latex_walker.what}))}(),(p=d).__cause__=null,p}if((0,tr.isinstance)(e,tr.ValueError)){var p;d=e;throw(p=(0,tr.__call__)(V_,null,(0,tr.__call__)(tr.str,null,d),(0,tr.__kwargtrans__)({pos:f.pos}))).__cause__=null,p}throw e}}if((0,tr.__t__)(t.supports_delayed_render_markers)){var h=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("s"===n)e=_[n]}}return function(){var r=t;return(0,tr.__call__)(r.replace_delayed_markers_with_final_values,r,e,i._delayed_render_content)}()};if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,o,tr.dict)))o=function(){for(var e,t=[],r=(e=o,(0,tr.__call__)(e.py_items,e)),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=n[0],i=n[1];!function(){var e=t;(0,tr.__call__)(e.append,e,[a,(0,tr.__call__)(h,null,i)])}()}return(0,tr.dict)(t)}();else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,o,tr.list)))o=function(){for(var e,t=[],r=o,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(h,null,n))}return t}();else o=(0,tr.__call__)(h,null,o)}else{!function(){var e=i;(0,tr.__call__)(e.set_render_pass,e,"second-pass")}();o=function(){var t=e;return(0,tr.__call__)(t.render_callback,t,i)}()}for(l=i.feature_render_managers,s=0;s<(0,tr.len)(l);s++){var g;(g=(0,tr.__getitem__)(l,s))[0],c=g[1];(0,tr.__t__)(null!==c)&&function(){var e=c;(0,tr.__call__)(e.postprocess,e,o)}()}return function(){var e=t;(0,tr.__call__)(e.document_render_finish,e,i)}(),(0,tr.tuple)([o,i])}))}}),pa=(tr=a("hoVWB"),{});t(pa,"LatexDelimitedMultiDelimGroupParser",(()=>ja)),t(pa,"LatexParserBase",(()=>ha)),t(pa,"LatexDelimitedVerbatimParser",(()=>ma)),t(pa,"LatexDelimitedMultiDelimGroupParserInfo",(()=>Ma)),t(pa,"LatexGeneralNodesParser",(()=>ka)),t(pa,"LatexMathParser",(()=>ii)),t(pa,"LatexVerbatimBaseParser",(()=>va)),t(pa,"LatexCharsGroupParser",(()=>Ja)),t(pa,"LatexDelimitedGroupParserInfo",(()=>Na)),t(pa,"LatexDelimitedExpressionParserInfo",(()=>Aa)),t(pa,"LatexSingleNodeParser",(()=>xa)),t(pa,"LatexDelimitedExpressionParser",(()=>Sa)),t(pa,"LatexTackOnInformationFieldMacrosParser",(()=>ti)),t(pa,"LatexDelimitedGroupParser",(()=>Ta)),t(pa,"LatexVerbatimEnvironmentContentsParser",(()=>ya)),t(pa,"get_standard_argument_parser",(()=>Za)),t(pa,"LatexOptionalSquareBracketsParser",(()=>Ga)),t(pa,"LatexCharsCommaSeparatedListParser",(()=>Qa)),t(pa,"LatexOptionalCharsMarkerParser",(()=>Ua)),t(pa,"LatexStandardArgumentParser",(()=>Ka)),t(pa,"LatexDelimitedExpressionParserOpeningDelimiterNotFound",(()=>Ca)),t(pa,"LatexExpressionParser",(()=>za)),a("hoVWB");tr=a("hoVWB");var ha=(0,(tr=a("hoVWB")).__class__)("LatexParserBase",[tr.object],{__module__:"pylatexenc.latexnodes.parsers._base",get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ha,"__init__"),null,e)}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=(0,tr.__call__)(RuntimeError,null,"LatexParserBase subclasses must reimplement parse()");throw l.__cause__=null,l}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!0}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="<{}>";return(0,tr.__call__)(t.format,t,e.__class__.__name__)}()}))}}),ga="pylatexenc.latexnodes.parsers._verbatim",va=(0,tr.__class__)("LatexVerbatimBaseParser",[ha],{__module__:ga,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,va,"__init__"),null,e,(0,tr.__kwargtrans__)(t))}))},VerbatimInfo:(0,tr.__class__)("VerbatimInfo",[tr.object],{__module__:ga,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,va.VerbatimInfo,"__init__"),null,e),e.parsed_delimiters=(0,tr.tuple)([null,null])}))}}),get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":_=i[o];break;case"parsing_state":n=i[o]}}}return!!(0,tr.__t__)(r)}))},get error_end_of_stream(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"pos":t=i[o];break;case"recovery_nodes":r=i[o];break;case"latex_walker":_=i[o];break;case"verbatim_info":n=i[o]}}}var l=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:"End of stream reached while reading verbatim content",pos:t,recovery_nodes:r,error_type_info:(0,tr.dict)({what:"verbatim_unexpected_end_of_stream",verbatim_delimiters:n.parsed_delimiters})}));throw l.__cause__=null,l}))},get finalize_verbatim_string(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"verbatim_string":t=n[a];break;case"verbatim_info":r=n[a]}}}return r.pos_start=r.content_pos_start,r.pos_end=(0,tr.__add__)(r.content_pos_start,(0,tr.__call__)(tr.len,null,t)),t}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var e=va;return(0,tr.__call__)(e.VerbatimInfo,e)}();return l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,_,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({verbatim_info:l},n)))}()}))},get read_verbatim_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"latex_walker":t=o[l];break;case"token_reader":r=o[l];break;case"parsing_state":_=o[l];break;case"verbatim_info":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s="",c=!1,u=!1;for(n.content_pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}();(0,tr.__t__)(!(0,tr.__t__)(c));){try{var f=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:_}))}()}catch(e){if(!(0,tr.isinstance)(e,Y_))throw e;f=null,u=!0}var d=function(){var t=e;return(0,tr.__call__)(t.new_char_check_stop_condition,t,f,s,n,_)}();if((0,tr.__t__)(d)){c=!0;(0,tr.__t__)((0,tr.__t__)(!0!==d)&&(0,tr.__t__)(null!==f)&&(0,tr.__getitem__)(d,"put_back_char"))&&function(){var e,t=r;(0,tr.__call__)(t.move_to_pos_chars,t,(0,tr.__sub__)((e=r,(0,tr.__call__)(e.cur_pos,e)),1))}()}else{if((0,tr.__t__)(null===f))break;s=(0,tr.__call__)(tr.__iadd__,null,s,f)}}s=function(){var t=e;return(0,tr.__call__)(t.finalize_verbatim_string,t,s,n)}();var p=n.pos_start,h=n.pos_end,g=function(){var e,r=t;return(0,tr.__call__)(r.make_node,r,rn,(0,tr.__kwargtrans__)({chars:s,pos:p,pos_end:h,parsing_state:(e=_,(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({enable_double_newline_paragraphs:!1,enable_macros:!1,enable_environments:!1,enable_specials:!1,enable_comments:!1,enable_groups:!1,enable_math:!1})))}))}();return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&u)?function(){var r=e;return(0,tr.__call__)(r.error_end_of_stream,r,(0,tr.__kwargtrans__)({pos:h,recovery_nodes:g,latex_walker:t,verbatim_info:n}))}():(0,tr.tuple)([g,null])}))}}),ma=(0,tr.__class__)("LatexDelimitedVerbatimParser",[va],{__module__:ga,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"auto_delimiters":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ma,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.delimiters=t,(0,tr.__t__)(null!==r)?e.auto_delimiters=(0,tr.__call__)(tr.dict,null,r):e.auto_delimiters=(0,tr.dict)({"{":"}","[":"]","<":">","(":")"}),e.depth_counter=1,e.parsed_delimiters=null}))},get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":_=i[o];break;case"parsing_state":n=i[o]}}}if((0,tr.__t__)(null===t))return!1;if((0,tr.__t__)((0,tr.__eq__)(t,(0,tr.__getitem__)(_.parsed_delimiters,1)))){if(e.depth_counter=(0,tr.__call__)(tr.__isub__,null,e.depth_counter,1),(0,tr.__t__)((0,tr.__le__)(e.depth_counter,0)))return!0}else(0,tr.__t__)((0,tr.__eq__)(t,(0,tr.__getitem__)(_.parsed_delimiters,0)))&&(e.depth_counter=(0,tr.__call__)(tr.__iadd__,null,e.depth_counter,1));return!1}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var e=va;return(0,tr.__call__)(e.VerbatimInfo,e)}();if(function(){var e=r;(0,tr.__call__)(e.skip_space_chars,e,_)}(),l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),(0,tr.__t__)(null===e.delimiters)){var s=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:_}))}(),c=function(){var t=e.auto_delimiters;return(0,tr.__call__)(t.py_get,t,s,s)}();l.parsed_delimiters=(0,tr.tuple)([s,c])}else{l.parsed_delimiters=e.delimiters;var u=function(){var e=r;return(0,tr.__call__)(e.next_chars,e,1,(0,tr.__kwargtrans__)({parsing_state:_}))}();if((0,tr.__t__)((0,tr.__ne__)(u,(0,tr.__getitem__)(l.parsed_delimiters,0)))){var f=(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected opening delimiter {} for verbatim content";return(0,tr.__call__)(e.format,e,(0,tr.__getitem__)(l.parsed_delimiters,0))}(),pos:pos,error_type_info:(0,tr.dict)({what:"verbatim_expected_opening_delimiter_not_found",expected_delimiters:l.parsed_delimiters})}));throw f.__cause__=null,f}}var d=function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,_,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({verbatim_info:l},n)))}(),p=d[0],h=(d[1],function(){var e,r=t;return(0,tr.__call__)(r.make_node,r,_n,(0,tr.__kwargtrans__)({delimiters:l.parsed_delimiters,nodelist:(e=t,(0,tr.__call__)(e.make_nodelist,e,[p],(0,tr.__kwargtrans__)({parsing_state:_}))),pos:l.original_pos,pos_end:(0,tr.__add__)(p.pos_end,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.parsed_delimiters,1))),parsing_state:_}))}());return(0,tr.tuple)([h,null])}))}}),ya=(0,tr.__class__)("LatexVerbatimEnvironmentContentsParser",[va],{__module__:ga,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="verbatim";var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"environment_name":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ya,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.environment_name=t}))},get new_char_check_stop_condition(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"char":t=i[o];break;case"verbatim_string":r=i[o];break;case"verbatim_info":_=i[o];break;case"parsing_state":n=i[o]}}}return!!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.endswith,e,_.end_environment_code)}())&&(0,tr.dict)({put_back_char:!0})}))},get finalize_verbatim_string(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"verbatim_string":t=n[a];break;case"verbatim_info":r=n[a]}}}var i=r.end_environment_code;(0,tr.assert)(function(){var e=t;return(0,tr.__call__)(e.endswith,e,i)}());t=(0,tr.__getslice__)(t,0,(0,tr.__neg__)((0,tr.__call__)(tr.len,null,i)),1);var o=r.original_pos;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"\n")}()))t=(0,tr.__getslice__)(t,1,null,1),o=(0,tr.__call__)(tr.__iadd__,null,o,1);return r.pos_start=o,r.pos_end=(0,tr.__add__)(o,(0,tr.__call__)(tr.len,null,t)),t}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var e=va;return(0,tr.__call__)(e.VerbatimInfo,e)}();l.original_pos=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),l.end_environment_code=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(_.macro_escape_char,"end{"),e.environment_name),"}");var s=function(){var a=e;return(0,tr.__call__)(a.read_verbatim_content,a,t,r,_,l,(0,tr.__kwargtrans__)(n))}(),c=s[0],u=(s[1],function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[c],(0,tr.__kwargtrans__)({parsing_state:_}))}());return(0,tr.tuple)([u,null])}))}}),wa=(tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB"),{});(0,tr.__nest__)(wa,"",m_);var ba="pylatexenc.latexnodes.parsers._generalnodes",ka=(function(){var e=wa;(0,tr.__call__)(e.getLogger,e,ba)}(),tr.str,(0,tr.__class__)("LatexGeneralNodesParser",[ha],{__module__:ba,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!0;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;var s=(0,tr.dict)();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"stop_token_condition":t=u[f];break;case"stop_nodelist_condition":r=u[f];break;case"require_stop_condition_met":_=u[f];break;case"stop_condition_message":n=u[f];break;case"make_child_parsing_state":a=u[f];break;case"handle_stop_condition_token":i=u[f];break;case"include_stop_token_pre_space_chars":o=u[f];break;case"handle_stop_data":l=u[f];break;default:s[f]=u[f]}delete s.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ka,"__init__"),null,e,(0,tr.__kwargtrans__)(s)),e.stop_token_condition=t,e.stop_nodelist_condition=r,e.require_stop_condition_met=_,e.stop_condition_message=n,e.make_child_parsing_state=a,e.handle_stop_condition_token=i,e.handle_stop_data=l,e.include_stop_token_pre_space_chars=o}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":_=a[i]}}}return function(){var n=t;return(0,tr.__call__)(n.make_nodes_collector,n,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:_,stop_token_condition:e.stop_token_condition,stop_nodelist_condition:e.stop_nodelist_condition,make_child_parsing_state:e.make_child_parsing_state,include_stop_token_pre_space_chars:e.include_stop_token_pre_space_chars}))}()}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),s=function(){var n=e;return(0,tr.__call__)(n.make_nodes_collector,n,t,r,_)}();try{!function(){var e=s;(0,tr.__call__)(e.process_tokens,e)}()}catch(y){if((0,tr.isinstance)(y,G_)){var c=y,u=function(){var e=s;return(0,tr.__call__)(e.get_final_nodelist,e)}();(0,tr.__t__)(null===u.pos)&&(u.pos=l),(0,tr.__t__)(null===u.pos_end)&&(u.pos_end=l);var f=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:c.msg,pos:c.pos,open_contexts:c.open_contexts,error_type_info:c.error_type_info,recovery_nodes:u,recovery_parsing_state_delta:function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}()}));throw f.__cause__=null,f}throw y}var d=function(){var e=s;return(0,tr.__call__)(e.get_final_nodelist,e)}();(0,tr.__t__)(null===d.pos)&&(d.pos=l),(0,tr.__t__)(null===d.pos_end)&&(d.pos_end=l);var p=function(){var e=s;return(0,tr.__call__)(e.stop_token_condition_met,e)}(),h=function(){var e=s;return(0,tr.__call__)(e.stop_nodelist_condition_met,e)}();if((0,tr.__t__)(!(0,tr.__t__)(e.require_stop_condition_met)))var g=!0;else{g=!1;if((0,tr.__t__)(null!==e.stop_token_condition)){if((0,tr.__t__)(p))g=!0}else if((0,tr.__t__)(null!==e.stop_nodelist_condition)){if((0,tr.__t__)(h))g=!0}else g=!0}if((0,tr.__t__)(!(0,tr.__t__)(g))){var v=e.stop_condition_message;if((0,tr.__t__)(null===v))v="End of stream encountered while parsing nodes without stop condition being met [reporting starting position]";var m=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:v,pos:function(){var e=s;return(0,tr.__call__)(e.pos_start,e)}(),recovery_nodes:d,recovery_parsing_state_delta:function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}(),error_type_info:(0,tr.dict)({what:"nodes_generalnodes_required_stop_condition_not_met",stop_condition_message:e.stop_condition_message})})),y=m;throw y.__cause__=null,y}if((0,tr.__t__)((0,tr.__t__)(p)&&null!==e.handle_stop_condition_token)){var w=function(){var e=s;return(0,tr.__call__)(e.stop_token_condition_met_token,e)}();(0,tr.__t__)(null!==w)&&function(){var n=e;(0,tr.__call__)(n.handle_stop_condition_token,n,w,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,parsing_state:_}))}()}var b=function(){var e=s;return(0,tr.__call__)(e.stop_condition_stop_data,e)}();(0,tr.__t__)((0,tr.__t__)(null!==b)&&null!==e.handle_stop_data)&&function(){var n=e;(0,tr.__call__)(n.handle_stop_data,n,b,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,parsing_state:_}))}();var k=d,x=function(){var e=s;return(0,tr.__call__)(e.get_parser_parsing_state_delta,e)}();return(0,tr.tuple)([k,x])}))}})),xa=(0,tr.__class__)("LatexSingleNodeParser",[ka],{__module__:ba,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"stop_on_comment":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,xa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({stop_nodelist_condition:e._stop_nodelist_condition,require_stop_condition_met:!1},r))),e.stop_on_comment=t}))},get _stop_nodelist_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodelist":t=_[n]}}}var a=t;if((0,tr.__t__)(!(0,tr.__t__)(e.stop_on_comment)))a=function(){for(var e,t=[],r=a,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);(0,tr.__t__)(!(0,tr.__t__)((e=void 0,e=n,(0,tr.__call__)(e.isNodeType,e,nn))))&&function(){var e=t;(0,tr.__call__)(e.append,e,n)}()}return t}();return!!(0,tr.__t__)((0,tr.__ge__)((0,tr.__call__)(tr.len,null,a),1))}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!1}))}}),Oa={};(0,tr.__nest__)(Oa,"",m_);var Pa="pylatexenc.latexnodes.parsers._delimited",Ea=(function(){var e=Oa;(0,tr.__call__)(e.getLogger,e,Pa)}(),tr.str),Ca=(0,tr.__class__)("LatexDelimitedExpressionParserOpeningDelimiterNotFound",[tr.Exception],{__module__:Pa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"first_tokens":t=a[i];break;case"msg":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ca,"__init__"),null,e,(0,tr.__kwargtrans__)(_)),e.first_tokens=t,e.msg=r}))}}),Aa=(0,tr.__class__)("LatexDelimitedExpressionParserInfo",[tr.object],{__module__:Pa,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"cls":e=i[o];break;case"parsing_state":t=i[o];break;case"delimiters":r=i[o];break;case"delimited_expression_parser":_=i[o];break;case"latex_walker":n=i[o]}}}return t}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"cls":e=i[o];break;case"delimiters":t=i[o];break;case"group_parsing_state":r=i[o];break;case"delimited_expression_parser":_=i[o];break;case"latex_walker":n=i[o]}}}return[]}))},get parse_initial(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"allow_pre_space":r=l[s];break;case"latex_walker":_=l[s];break;case"token_reader":n=l[s];break;case"group_parsing_state":a=l[s];break;case"delimited_expression_parser":i=l[s]}}}var c=function(){var e=n;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:a}))}(),u=!0;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r))&&c.pre_space))u=!1;else if((0,tr.__t__)(!(0,tr.__t__)(function(){var r=e;return(0,tr.__call__)(r.is_opening_delimiter,r,(0,tr.__kwargtrans__)({delimiters:t,first_token:c,group_parsing_state:a,delimited_expression_parser:i,latex_walker:_}))}())))u=!1;if((0,tr.__t__)(!(0,tr.__t__)(u))){var f=function(){var r=e;return(0,tr.__call__)(r.get_acceptable_open_delimiter_list,r,(0,tr.__kwargtrans__)({delimiters:t,group_parsing_state:a,delimited_expression_parser:i,latex_walker:_}))}();if((0,tr.__t__)(!(0,tr.__t__)(f)))var d="??";else d=(0,tr.__call__)(", ".join,", ",function(){for(var e,t,r=[],_=f,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,t=void 0,t=r,(0,tr.__call__)(t.append,t,(e="{}",(0,tr.__call__)(e.format,e,a)))}return r}());var p=(0,tr.__call__)(Ca,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected an opening LaTeX delimiter ({}), got {}/{}{}";return(0,tr.__call__)(e.format,e,d,c.tok,c.arg,(0,tr.__t__)(c.pre_space)?" with leading whitespace":"")}(),first_tokens:[c]}));throw p.__cause__=null,p}return[c]}))},get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"first_token":r=o[l];break;case"group_parsing_state":_=o[l];break;case"delimited_expression_parser":n=o[l];break;case"latex_walker":a=o[l]}}}var s=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement is_opening_delimiter()");throw s.__cause__=null,s}))},get check_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"cls":e=a[i];break;case"delimiters":t=a[i];break;case"parsed_opening_delimiter":r=a[i];break;case"latex_walker":_=a[i]}}}if((0,tr.__t__)(null===t))return!0;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Ea)))var o=t;else o=(0,tr.__getitem__)(t,0);return!(0,tr.__t__)((0,tr.__ne__)(r,o))}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimited_expression_parser":t=l[s];break;case"opening_delimiter_tokens":r=l[s];break;case"group_parsing_state":_=l[s];break;case"parsing_state":n=l[s];break;case"delimiters":a=l[s];break;case"latex_walker":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Aa,"__init__"),null,e),e.delimited_expression_parser=t,e.opening_delimiter_tokens=r,(0,tr.__t__)(r)?e.first_token=(0,tr.__getitem__)(r,0):e.first_token=null,e.group_parsing_state=_,e.parsing_state=n,e.delimiters=a,e.latex_walker=i,e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=(0,tr.tuple)([null,null])}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.contents_parsing_state=e.group_parsing_state,e.child_parsing_state_delta=null,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}var a=(0,tr.__call__)(RuntimeError,null,"Subclasses must reimplement stop_token_condition()");throw a.__cause__=null,a}))},get handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":_=i[o];break;case"parsing_state":n=i[o]}}}!function(){var e=_;(0,tr.__call__)(e.move_past_token,e,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":_=a[i]}}}return(0,tr.__t__)(null!==e.child_parsing_state_delta)?(0,tr.__call__)(In,null,e.group_parsing_state,e.child_parsing_state_delta,e.latex_walker):t}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"opening_delimiter":t=_[n]}}}return t}))},get get_parsed_delimiters(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.first_token,a=e.delimiters;if((0,tr.__t__)(null===a))a=n.arg;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,Ea))){var i=a,o=function(){var t=e;return(0,tr.__call__)(t.get_matching_delimiter,t,i)}();return(0,tr.tuple)([i,o])}return a}))},get make_content_parser(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"latex_walker":t=n[a];break;case"token_reader":r=n[a]}}}if((0,tr.__t__)((0,tr.__getitem__)(e.parsed_delimiters,1)))var i=function(){var t="matching {}";return(0,tr.__call__)(t.format,t,(0,tr.__getitem__)(e.parsed_delimiters,1))}();else i="matching closing delimiter";return(0,tr.__call__)(ka,null,(0,tr.__kwargtrans__)({make_child_parsing_state:e.make_child_parsing_state,stop_token_condition:e.stop_token_condition,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:function(){var t="Expected {} after {}";return(0,tr.__call__)(t.format,t,i,(0,tr.__getitem__)(e.parsed_delimiters,0))}()}))}))},get get_open_context_description(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.tuple)([function(){var t="Delimited expression {}{}";return(0,tr.__call__)(t.format,t,...e.parsed_delimiters)}(),e.first_token])}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":_=i[o];break;case"parsing_state_delta":n=i[o]}}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),s=function(){var r=t;return(0,tr.__call__)(r.make_node,r,_n,(0,tr.__kwargtrans__)({nodelist:_,parsing_state:e.group_parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return(0,tr.tuple)([s,n])}))}}),Sa=(0,tr.__class__)("LatexDelimitedExpressionParser",[ha],{__module__:Pa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"delimited_expression_parser_info_class":r=l[s];break;case"optional":_=l[s];break;case"allow_pre_space":n=l[s];break;case"discard_parsing_state_delta":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Sa,"__init__"),null,e,(0,tr.__kwargtrans__)(i)),e.delimiters=t,e.optional=_,e.allow_pre_space=n,e.discard_parsing_state_delta=a,e.delimited_expression_parser_info_class=r}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.optional}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var r=e.delimited_expression_parser_info_class;return(0,tr.__call__)(r.get_group_parsing_state,r,(0,tr.__kwargtrans__)({parsing_state:_,delimiters:e.delimiters,delimited_expression_parser:e,latex_walker:t}))}(),s=null;try{s=function(){var _=e.delimited_expression_parser_info_class;return(0,tr.__call__)(_.parse_initial,_,(0,tr.__kwargtrans__)({delimiters:e.delimiters,allow_pre_space:e.allow_pre_space,latex_walker:t,token_reader:r,group_parsing_state:l,delimited_expression_parser:e}))}()}catch(_){if((0,tr.isinstance)(_,Ca)){var c=_,u=null;if((0,tr.__t__)((0,tr.__t__)(null!==c.first_tokens)&&(0,tr.__call__)(tr.len,null,c.first_tokens)))u=(0,tr.__getitem__)(c.first_tokens,0);if((0,tr.__t__)(e.optional))return(0,tr.__t__)((0,tr.__t__)(null!==c.first_tokens)&&(0,tr.__call__)(tr.len,null,c.first_tokens))&&function(){var e=r;(0,tr.__call__)(e.move_to_token,e,u)}(),(0,tr.tuple)([null,null]);var f=null;if((0,tr.__t__)(null!==u))f=u.pos;var d=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:c.msg,pos:f,recovery_nodes:function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[],(0,tr.__kwargtrans__)({parsing_state:l,pos:u.pos,pos_end:u.pos}))}(),recovery_at_token:u,error_type_info:(0,tr.dict)({what:"nodes_delimited_expected_opening_delimiter_not_found",first_tokens:c.first_tokens})}));throw d.__cause__=null,d}throw _}var p=function(){var r=e;return(0,tr.__call__)(r.delimited_expression_parser_info_class,r,e,(0,tr.__kwargtrans__)({opening_delimiter_tokens:s,group_parsing_state:l,parsing_state:_,delimiters:e.delimiters,latex_walker:t}))}();!function(){var e=p;(0,tr.__call__)(e.initialize,e)}();var h=function(){var e=p;return(0,tr.__call__)(e.make_content_parser,e,t,r)}(),g=function(){var e,_=t;return(0,tr.__call__)(_.parse_content,_,h,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:p.contents_parsing_state,open_context:(e=p,(0,tr.__call__)(e.get_open_context_description,e))}))}(),v=g[0],m=g[1];if((0,tr.__t__)((0,tr.__t__)(e.discard_parsing_state_delta)&&null!==m))m=null;g=function(){var e=p;return(0,tr.__call__)(e.make_group_node_and_parsing_state_delta,e,(0,tr.__kwargtrans__)({latex_walker:t,token_reader:r,nodelist:v,parsing_state_delta:m}))}();var y=g[0];m=g[1];return(0,tr.tuple)([y,m])}))}}),Na=(0,tr.__class__)("LatexDelimitedGroupParserInfo",[Aa],{__module__:Pa,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"parsing_state":t=o[l];break;case"delimiters":r=o[l];break;case"delimited_expression_parser":_=o[l];break;case"latex_walker":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}if((0,tr.__t__)(null===r))return t;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,Ea))){if((0,tr.__t__)(!(0,tr.__in__)(r,t._latex_group_delimchars_by_open))){var s=(0,tr.__call__)(tr.ValueError,null,function(){var e="Delimiter {} not a valid latex group delimiter ({!r})";return(0,tr.__call__)(e.format,e,r,t.latex_group_delimiters)}());throw s.__cause__=null,s}return t}for(var c=(0,tr.__call__)(tr.tuple,null,r),u=t.latex_group_delimiters,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if((0,tr.__t__)((0,tr.__eq__)(c,d)))return t}return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({latex_group_delimiters:(0,tr.__add__)(t.latex_group_delimiters,[c])}))}()}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"group_parsing_state":r=o[l];break;case"delimited_expression_parser":_=o[l];break;case"latex_walker":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Ea))?[t]:[(0,tr.__getitem__)(t,0)]:function(){for(var e,t=[],_=r.latex_group_delimiters,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0];a[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,i)}return t}()}))},get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"first_token":r=l[s];break;case"group_parsing_state":_=l[s];break;case"delimited_expression_parser":n=l[s];break;case"latex_walker":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}return!(0,tr.__t__)((0,tr.__ne__)(r.tok,"brace_open"))&&!(0,tr.__t__)(!(0,tr.__t__)(function(){var _=e;return(0,tr.__call__)(_.check_opening_delimiter,_,(0,tr.__kwargtrans__)({delimiters:t,parsed_opening_delimiter:r.arg,latex_walker:a}))}()))}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"opening_delimiter":t=_[n]}}}return(0,tr.__getitem__)(e.group_parsing_state._latex_group_delimchars_by_open,t)}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":_=a[i]}}}return(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(_.tok,"brace_open"))&&(0,tr.__eq__)(_.arg,(0,tr.__getitem__)(e.parsed_delimiters,0)))?e.contents_parsing_state:e.parsing_state}))}}),Ta=(0,tr.__class__)("LatexDelimitedGroupParser",[Sa],{__module__:Pa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=Na;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"delimited_expression_parser_info_class":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ta,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,delimited_expression_parser_info_class:r},_)))}))}}),La=(0,tr.tuple)([(0,tr.tuple)(["{","}"]),(0,tr.tuple)(["[","]"]),(0,tr.tuple)(["(",")"]),(0,tr.tuple)(["<",">"])]),Ma=(0,tr.__class__)("LatexDelimitedMultiDelimGroupParserInfo",[Na],{__module__:Pa,get get_group_parsing_state(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"parsing_state":t=o[l];break;case"delimiters":r=o[l];break;case"delimited_expression_parser":_=o[l];break;case"latex_walker":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.assert)(null===r);var s=_.delimiters_list;return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({latex_group_delimiters:s}))}()}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ma,"initialize"),null,e);for(var n=(0,tr.__call__)(tr.list,null,e.parsing_state.latex_group_delimiters),a=e.parsed_delimiters,i=(0,tr.__getitem__)(a,0),o=!1,l=n,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0];c[1];if((0,tr.__t__)((0,tr.__eq__)(i,u)))o=!0}(0,tr.__t__)(!(0,tr.__t__)(o))&&function(){var e=n;(0,tr.__call__)(e.append,e,a)}(),e.contents_parsing_state=function(){var t=e.parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({latex_group_delimiters:n}))}()}))}}),ja=(0,tr.__class__)("LatexDelimitedMultiDelimGroupParser",[Sa],{__module__:Pa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=La;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=Ma;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters_list":t=a[i];break;case"delimited_expression_parser_info_class":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ja,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:null,delimited_expression_parser_info_class:r},_))),e.delimiters_list=t}))}}),Ia={};(0,tr.__nest__)(Ia,"",m_);var Da="pylatexenc.latexnodes.parsers._expression",Ra=function(){var e=Ia;return(0,tr.__call__)(e.getLogger,e,Da)}(),Fa=(0,tr.__class__)("_TryAgainWithSkippedCommentOrWhitespaceNodes",[tr.Exception],{__module__:Da,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"skipped_nodes":t=n[a];break;case"pos":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fa,"__init__"),null,e,"<internal>"),e.skipped_nodes=t,e.pos=r}))}}),za=(0,tr.__class__)("LatexExpressionParser",[ha],{__module__:Da,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"allow_pre_space":t=o[l];break;case"allow_pre_comments":r=o[l];break;case"return_full_node_list":_=o[l];break;case"single_token_requiring_arg_is_error":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,za,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.allow_pre_space=t,e.allow_pre_comments=r,e.return_full_node_list=_,e.single_token_requiring_arg_is_error=n}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!1}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}for(var l=function(){var e=_;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({enable_environments:!1}))}(),s=[];(0,tr.__t__)(!0);){try{var c=function(){var a=e;return(0,tr.__call__)(a._parse_single_token,a,t,r,l,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({parsing_state:_},n)))}()}catch(e){if((0,tr.isinstance)(e,Fa)){var u=e;s=(0,tr.__call__)(tr.__iadd__,null,s,u.skipped_nodes);continue}throw e}s=(0,tr.__call__)(tr.__iadd__,null,s,c);if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,s))))var f=function(){var e,n=t;return(0,tr.__call__)(n.make_nodelist,n,[],(0,tr.__kwargtrans__)({pos:(e=r,(0,tr.__call__)(e.cur_pos,e)),pos_end:function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),parsing_state:_}))}();else f=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,s,(0,tr.__kwargtrans__)({parsing_state:_}))}();if((0,tr.__t__)(e.return_full_node_list))var d=f;else if((0,tr.__t__)((0,tr.__call__)(tr.len,null,f)))d=(0,tr.__getitem__)(f,(0,tr.__neg__)(1));else d=function(){var e=t;return(0,tr.__call__)(e.make_node,e,_n,(0,tr.__kwargtrans__)({parsing_state:_,nodelist:f,delimiters:(0,tr.tuple)(["",""]),pos:f.pos,pos_end:f.pos_end}))}();return(0,tr.tuple)([d,null])}}))},get _parse_single_token(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"latex_walker":t=o[l];break;case"token_reader":r=o[l];break;case"expr_parsing_state":_=o[l];break;case"parsing_state":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}try{var s=function(){var e=r;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:_}))}()}catch(p){if(!(0,tr.isinstance)(p,W_)){if((0,tr.isinstance)(p,Y_)){u=p,f=function(){var e,_=t;return(0,tr.__call__)(_.check_tolerant_parsing_ignore_error,_,(0,tr.__call__)(G_,null,"End of input encountered but we expected an expression",(0,tr.__kwargtrans__)({pos:(e=r,(0,tr.__call__)(e.cur_pos,e)),error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"end_of_stream"})})))}();if((0,tr.__t__)(null!==f))throw(c=f).__cause__=null,c;return[]}throw p}var c,u=p,f=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,u)}();if((0,tr.__t__)(null!==f))throw(c=f).__cause__=null,c;s=f.recovery_token_placeholder;!function(){var e=r;(0,tr.__call__)(e.move_to_pos_chars,e,f.recovery_token_at_pos)}()}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"macro"))){var d=s.arg;if((0,tr.__t__)((0,tr.__t__)(e.single_token_requiring_arg_is_error)&&(0,tr.__in__)(d,(0,tr.tuple)(["begin","end"])))){f=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(G_,null,(e="Expected expression, got \\{}",(0,tr.__call__)(e.format,e,d)),(0,tr.__kwargtrans__)({pos:s.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"beginend",beginend:d})})))}();if((0,tr.__t__)(null!==f)){var p=f;throw p.__cause__=null,p}return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,an,(0,tr.__kwargtrans__)({parsing_state:n,macroname:d,spec:null,nodeargd:null,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()]}var h=function(){var e=n.latex_context;return(0,tr.__call__)(e.get_macro_spec,e,d)}(),g=function(){var r,_=e;return(0,tr.__call__)(_._check_if_requires_args,_,t,h,s,(r="a single macro \\{}",(0,tr.__call__)(r.format,r,d)))}();return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,an,(0,tr.__kwargtrans__)({parsing_state:n,macroname:s.arg,spec:h,nodeargd:g,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()]}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"specials"))){var v=s.arg;g=function(){var r,_=e;return(0,tr.__call__)(_._check_if_requires_args,_,t,v,s,(r="specials {}",(0,tr.__call__)(r.format,r,v.specials_chars)))}();return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,ln,(0,tr.__kwargtrans__)({parsing_state:n,specials_chars:v.specials_chars,spec:v,nodeargd:g,pos:s.pos,pos_end:s.pos_end}))}()]}if((0,tr.__t__)((0,tr.__call__)(tr.len,null,s.pre_space))){if((0,tr.__t__)(e.allow_pre_space)){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s,(0,tr.__kwargtrans__)({rewind_pre_space:!1}))}();var m=(0,tr.__sub__)(s.pos,(0,tr.__call__)(tr.len,null,s.pre_space)),y=[function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:n,chars:s.pre_space,pos:m,pos_end:s.pos}))}()];throw(w=(0,tr.__call__)(Fa,null,y,m)).__cause__=null,w}var w;f=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,(0,tr.__call__)(G_,null,"Expected expression w/o leading whitespace but found whitespace",(0,tr.__kwargtrans__)({pos:(0,tr.__sub__)(s.pos,(0,tr.__call__)(tr.len,null,s.pre_space)),error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"whitespace",whitespace:s.pre_space})})))}();if((0,tr.__t__)(null!==f))throw(w=f).__cause__=null,w;throw(w=(0,tr.__call__)(Fa,null,[],s.pos)).__cause__=null,w}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"comment"))){if((0,tr.__t__)(e.allow_pre_comments)){y=[function(){var e=t;return(0,tr.__call__)(e.make_node,e,nn,(0,tr.__kwargtrans__)({parsing_state:n,comment:s.arg,comment_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}()];throw(b=(0,tr.__call__)(Fa,null,y,s.pos)).__cause__=null,b}var b;f=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(G_,null,(e="Expected expression w/o leading comments but found comment %{}",(0,tr.__call__)(e.format,e,s.arg)),(0,tr.__kwargtrans__)({pos:s.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"comment",comment:s.arg})})))}();if((0,tr.__t__)(null!==f))throw(b=f).__cause__=null,b;throw(b=(0,tr.__call__)(Fa,null,[],s.pos)).__cause__=null,b}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"brace_open"))){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s)}();var k=function(){var e=t;return(0,tr.__call__)(e.parse_content,e,(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:s.arg})),(0,tr.__kwargtrans__)({token_reader:r,parsing_state:n}))}(),x=k[0],O=k[1];return(0,tr.__t__)(null!==O)&&function(){var e=Ra;(0,tr.__call__)(e.warning,e,"Ignoring parsing_state_delta after parsing an expression group!")}(),[x]}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"brace_close"))){!function(){var e=r;(0,tr.__call__)(e.move_to_token,e,s)}();f=(0,tr.__call__)(H_,null,(0,tr.__kwargtrans__)({msg:function(){var e="Expected LaTeX expression, got closing brace {}";return(0,tr.__call__)(e.format,e,s.arg)}(),pos:s.pos,recovery_nodes:function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:n,chars:"",pos:s.pos,pos_end:s.pos}))}(),recovery_at_token:s,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"closing_latex_group",delimiter:s.arg})}));f._error_was_unexpected_closing_brace_in_expression=!0;var P=f;throw P.__cause__=null,P}if((0,tr.__t__)((0,tr.__eq__)(s.tok,"char")))return[function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:n,chars:s.arg,pos:s.pos,pos_end:s.pos_end}))}()];if((0,tr.__t__)((0,tr.__in__)(s.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))){if((0,tr.__t__)(function(){var e=s.arg;return(0,tr.__call__)(e.startswith,e,"\\")}()))var E=function(){var e=t;return(0,tr.__call__)(e.make_node,e,an,(0,tr.__kwargtrans__)({parsing_state:n,macroname:s.arg,macro_post_space:s.post_space,pos:s.pos,pos_end:s.pos_end}))}();else E=function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:n,chars:s.arg,pos:s.pos,pos_end:s.pos_end}))}();var C=(0,tr.__call__)(H_,null,function(){var e="Unexpected math mode delimiter {}, was expecting a LaTeX expression";return(0,tr.__call__)(e.format,e,s.arg)}(),(0,tr.__kwargtrans__)({pos:s.pos,recovery_nodes:E,recovery_past_token:s,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"math_mode_delimiter",mathmode_type:s.tok,delimiter:s.arg})}));throw C.__cause__=null,C}var A=(0,tr.__call__)(G_,null,function(){var e="Unknown token type: {}";return(0,tr.__call__)(e.format,e,s.tok)}(),(0,tr.__kwargtrans__)({pos:s.pos}));throw A.__cause__=null,A}))},get _check_if_requires_args(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"spec":r=i[o];break;case"got_token":_=i[o];break;case"what_we_got":n=i[o]}}}if((0,tr.__t__)(e.single_token_requiring_arg_is_error)){var l=function(){var e,t=(e=r,(0,tr.__call__)(e.get_node_parser,e,_));return(0,tr.__call__)(t.contents_can_be_empty,t)}();if((0,tr.__t__)(!(0,tr.__t__)(l))){var s=function(){var e,r=t;return(0,tr.__call__)(r.check_tolerant_parsing_ignore_error,r,(0,tr.__call__)(G_,null,(e="Expected a LaTeX expression but got {} which expects arguments; did you mean to provide an expression in {{curly braces}} ?",(0,tr.__call__)(e.format,e,n)),(0,tr.__kwargtrans__)({pos:_.pos,error_type_info:(0,tr.dict)({what:"expression_required_got_unexpected",unexpected:"callable_with_mandatory_arguments",callable_token:_})})))}();if((0,tr.__t__)(null!==s)){var c=s;throw c.__cause__=null,c}return null}}return(0,tr.__call__)(M_,null)}))}}),Ba=(tr=a("hoVWB"),{});(0,tr.__nest__)(Ba,"",m_);var qa="pylatexenc.latexnodes.parsers._optionals",Va=function(){var e=Ba;return(0,tr.__call__)(e.getLogger,e,qa)}(),Ga=(0,tr.__class__)("LatexOptionalSquareBracketsParser",[Ta],{__module__:qa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=(0,tr.tuple)(["[","]"]);if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"delimiters":t=a[i];break;case"optional":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ga,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,optional:r},_)))}))}}),Ua=(0,tr.__class__)("LatexOptionalCharsMarkerParser",[ha],{__module__:qa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;var s=(0,tr.dict)();if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"self":e=u[f];break;case"chars_list":t=u[f];break;case"following_arg_parser":r=u[f];break;case"include_chars_node_before_following_arg":_=u[f];break;case"return_none_instead_of_empty":n=u[f];break;case"allow_pre_space":a=u[f];break;case"return_full_node_list":i=u[f];break;case"collect_chars_with_following_arg_as_delimited_group":o=u[f];break;case"max_num_args":l=u[f];break;default:s[f]=u[f]}delete s.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ua,"__init__"),null,e,(0,tr.__kwargtrans__)(s)),(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))t=function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,a)}return r}();if(e.chars_list=function(){for(var e,r,_,n=[],a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);e=void 0,r=void 0,_=void 0,_=n,(0,tr.__call__)(_.append,_,(0,tr.__call__)(" ".join," ",(e=o,r=(0,tr.__call__)(e.strip,e),(0,tr.__call__)(r.py_split,r))))}return n}(),e.following_arg_parser=r,e.include_chars_node_before_following_arg=_,e.return_none_instead_of_empty=n,e.allow_pre_space=a,e.return_full_node_list=i,e.collect_chars_with_following_arg_as_delimited_group=o,e.max_num_args=l,(0,tr.__t__)(!(0,tr.__t__)(e.chars_list))){var d=(0,tr.__call__)(tr.ValueError,null,function(){var e="Invalid chars={!r}, needs to be non-empty string (after stripping whitespce)";return(0,tr.__call__)(e.format,e,chars)}());throw d.__cause__=null,d}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.chars_list),1))||(0,tr.__le__)(e.max_num_args,1))))throw(d=(0,tr.__call__)(tr.ValueError,null,"Cannot set return_full_node_list=False if we can have multiple given chars marker options (len(chars_list) > 1 and max_num_args != 1)")).__cause__=null,d;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&e.collect_chars_with_following_arg_as_delimited_group))throw(d=(0,tr.__call__)(tr.ValueError,null,"If collect_chars_with_following_arg_as_delimited_group=True, then we must have return_full_node_list=True")).__cause__=null,d}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!0}))},get get_following_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"chars":t=_[n]}}}return e.following_arg_parser}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}for(var l=0,s=[],c=null,u=e.chars_list;(0,tr.__t__)((0,tr.__t__)(null===e.max_num_args)||(0,tr.__lt__)(l,e.max_num_args));){var f=function(){var a=e;return(0,tr.__call__)(a._parse_single,a,u,t,r,_,(0,tr.__kwargtrans__)(n))}(),d=f[0],p=f[1],h=f[2],g=f[3];if((0,tr.__t__)(null===c))c=g;if((0,tr.__t__)(null!==p)&&function(){var e=Va;(0,tr.__call__)(e.warning,e,"Parsing state delta ignored after parsing optional chars marker: %r",p)}(),(0,tr.__t__)(null===h))break;l=(0,tr.__call__)(tr.__iadd__,null,l,1),s=(0,tr.__call__)(tr.__iadd__,null,s,d),u=function(){for(var e,t=[],r=u,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);(0,tr.__t__)((0,tr.__ne__)(n,h))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,n))}return t}()}if((0,tr.__t__)((0,tr.__eq__)(l,0))){if((0,tr.__t__)(e.return_none_instead_of_empty))return(0,tr.tuple)([null,null]);var v=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[],(0,tr.__kwargtrans__)({pos:c,pos_end:c,parsing_state:_}))}();return(0,tr.tuple)([v,null])}if((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))){(0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,s),1))&&function(){var e=Va;(0,tr.__call__)(e.error,e,"Internal error, node list here should have length == 1")}();var m=(0,tr.__getitem__)(s,0)}else m=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,s,(0,tr.__kwargtrans__)({parsing_state:_}))}();return(0,tr.tuple)([m,null])}))},get _parse_single(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"remaining_chars_list":t=o[l];break;case"latex_walker":r=o[l];break;case"token_reader":_=o[l];break;case"parsing_state":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}var s=function(){var e=_;return(0,tr.__call__)(e.peek_token,e,(0,tr.__kwargtrans__)({parsing_state:n}))}(),c=null,u="",f=!1,d=null,p=null;try{for(;(0,tr.__t__)(!0);){var h=function(){var e=_;return(0,tr.__call__)(e.next_token,e,(0,tr.__kwargtrans__)({parsing_state:n}))}();if((0,tr.__t__)(null===p)){p=h;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,p.pre_space))&&!(0,tr.__t__)(e.allow_pre_space)))return(0,tr.tuple)([null,null,null,p.pos])}if((0,tr.__t__)((0,tr.__eq__)(h.tok,"specials"))&&(h.tok="char",h.arg=h.arg.specials_chars),(0,tr.__t__)((0,tr.__ne__)(h.tok,"char")))break;if((0,tr.__t__)((0,tr.__t__)(u)&&(0,tr.__call__)(tr.len,null,h.pre_space)))u=(0,tr.__call__)(tr.__iadd__,null,u," ");u=(0,tr.__call__)(tr.__iadd__,null,u,h.arg);if((0,tr.__t__)((0,tr.__in__)(u,e.chars_list))){f=!0,d=u,c=h.pos_end;break}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){for(var t,r=[],_=e.chars_list,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)((t=void 0,t=a,(0,tr.__call__)(t.startswith,t,u)))&&function(){var e=r;(0,tr.__call__)(e.append,e,a)}()}return r}()),0)))break}}finally{(0,tr.__t__)(!(0,tr.__t__)(f))&&function(){var e=_;(0,tr.__call__)(e.move_to_token,e,s)}()}if((0,tr.__t__)(!(0,tr.__t__)(f)))return(0,tr.tuple)([null,null,null,s.pos]);var g=s.pos,v=function(){var t=e;return(0,tr.__call__)(t.get_following_arg_parser,t,u)}(),m=null,y=null;if((0,tr.__t__)(null!==v)){var w=function(){var e=r;return(0,tr.__call__)(e.parse_content,e,v,(0,tr.__kwargtrans__)({token_reader:_,parsing_state:n}))}();y=w[0],m=w[1]}if((0,tr.__t__)(e.collect_chars_with_following_arg_as_delimited_group)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,cn)))var b=y;else b=function(){var e=r;return(0,tr.__call__)(e.make_nodelist,e,[y],(0,tr.__kwargtrans__)({parsing_state:n}))}();var k=b.pos_end;if((0,tr.__t__)(null===k))k=g;var x=[function(){var e=r;return(0,tr.__call__)(e.make_node,e,_n,(0,tr.__kwargtrans__)({parsing_state:n,delimiters:(0,tr.tuple)([d,""]),nodelist:b,pos:g,pos_end:k}))}()];return(0,tr.tuple)([x,m,d,g])}var O=null;if((0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list))&&null===v)||e.include_chars_node_before_following_arg))O=function(){var e=r;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({parsing_state:n,chars:d,pos:g,pos_end:c}))}();if((0,tr.__t__)(!(0,tr.__t__)(e.return_full_node_list)))return(0,tr.__t__)(null!==v)?(0,tr.tuple)([[y],m,d,g]):((0,tr.assert)(null!==O),(0,tr.tuple)([[O],m,d,g]));x=[];if((0,tr.__t__)(e.include_chars_node_before_following_arg)&&((0,tr.assert)(null!==O),function(){var e=x;(0,tr.__call__)(e.append,e,O)}()),(0,tr.__t__)(null!==v)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,y,cn)))var P=y;else P=[y];x=(0,tr.__call__)(tr.__iadd__,null,x,P)}return(0,tr.tuple)([x,m,d,g])}))}}),$a=(0,tr.__class__)("LatexOptionalEmbellishmentArgsParser",[Ua],{__module__:qa,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"embellishment_chars":t=a[i];break;case"allow_pre_space":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$a,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({chars_list:t,following_arg_parser:(0,tr.__call__)(za,null,(0,tr.__kwargtrans__)({allow_pre_space:r,return_full_node_list:!0})),allow_pre_space:r,collect_chars_with_following_arg_as_delimited_group:!0,return_full_node_list:!0},_))),e.embellishment_chars=t}))}}),Wa={};(0,tr.__nest__)(Wa,"",m_);var Ha="pylatexenc.latexnodes.parsers._stdarg",Ya=function(){var e=Wa;return(0,tr.__call__)(e.getLogger,e,Ha)}(),Xa=(tr.str,(0,tr.dict)({})),Za=function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("arg_spec"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,t))))var a=e;else{var i=(0,tr.dict)({arg_spec:e});!function(){var e=i;(0,tr.__call__)(e.py_update,e,t)}();a=(0,tr.__call__)(tr.tuple,null,(0,tr.__call__)(tr.list,null,(0,tr.__call__)(tr.sorted,null,function(){var e=i;return(0,tr.__call__)(e.py_items,e)}(),(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("v"===_)e=r[_]}}return(0,tr.__getitem__)(e,0)}}))))}if((0,tr.__t__)(!(0,tr.__in__)(a,Xa))){var o=(0,tr.__call__)(Ka,null,e,(0,tr.__kwargtrans__)(t));return(0,tr.__setitem__)(Xa,a,o),o}return(0,tr.__getitem__)(Xa,a)},Ka=(0,tr.__class__)("LatexStandardArgumentParser",[ha],{__module__:Ha,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="{";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"arg_spec":t=o[l];break;case"return_full_node_list":r=o[l];break;case"expression_single_token_requiring_arg_is_error":_=o[l];break;case"allow_pre_space":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ka,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.arg_spec=t,e.return_full_node_list=r,e.expression_single_token_requiring_arg_is_error=_,e.allow_pre_space=n,e._arg_parser=null}))},get get_arg_parser_instance(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"arg_spec":t=_[n]}}}if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["m","{"]))))return(0,tr.__call__)(za,null,(0,tr.__kwargtrans__)({return_full_node_list:e.return_full_node_list,single_token_requiring_arg_is_error:e.expression_single_token_requiring_arg_is_error,allow_pre_space:e.allow_pre_space,allow_pre_comments:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["o","["]))))return(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__in__)(t,(0,tr.tuple)(["s","*"]))))return(0,tr.__call__)(Ua,null,(0,tr.__kwargtrans__)({chars_list:["*"],allow_pre_space:e.allow_pre_space,return_full_node_list:e.return_full_node_list}));if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"e")}())){var a=function(){var e=(0,tr.__getslice__)(t,1,null,1);return(0,tr.__call__)(e.strip,e)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__le__)((0,tr.__call__)(tr.len,null,a),2))||(0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)(a,0),"{"))||(0,tr.__ne__)((0,tr.__getitem__)(a,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,a),1)),"}"))){var i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Expected embellishment chars with syntax e{<chars>} in ",function(){var e="arg_spec; got {}";return(0,tr.__call__)(e.format,e,t)}()));throw i.__cause__=null,i}var o=(0,tr.__getslice__)(a,1,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,t),1),1);return(0,tr.__call__)($a,null,(0,tr.__kwargtrans__)({embellishment_chars:o,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"t")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),2)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for an optional char argument should be of the form t<char>")).__cause__=null,i;var l=(0,tr.__getitem__)(t,1);return(0,tr.__call__)(Ua,null,(0,tr.__kwargtrans__)({chars_list:[l],allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"r")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for a required delimited argument should be of the form r<char1><char2>")).__cause__=null,i;var s=(0,tr.__getitem__)(t,1),c=(0,tr.__getitem__)(t,2);return(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)([s,c]),optional:!1,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"d")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for an optional delimited argument should be of the form d<char1><char2>")).__cause__=null,i;s=(0,tr.__getitem__)(t,1),c=(0,tr.__getitem__)(t,2);return(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)([s,c]),optional:!0,allow_pre_space:e.allow_pre_space}))}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.startswith,e,"v")}())){if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),1)))var u=null;else{if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),3)))throw(i=(0,tr.__call__)(tr.ValueError,null,"arg_spec for a verbatim argument should be either v or v<char1><char2>")).__cause__=null,i;u=(0,tr.tuple)([(0,tr.__getitem__)(t,1),(0,tr.__getitem__)(t,2)])}return(0,tr.__call__)(ma,null,(0,tr.__kwargtrans__)({delimiters:u}))}if((0,tr.__t__)((0,tr.__eq__)(t,"AnyDelimited")))return(0,tr.__call__)(ja,null,(0,tr.__kwargtrans__)({optional:!1,allow_pre_space:e.allow_pre_space}));if((0,tr.__t__)((0,tr.__eq__)(t,"AnyDelimitedOptional")))return(0,tr.__call__)(ja,null,(0,tr.__kwargtrans__)({optional:!0,allow_pre_space:e.allow_pre_space}));i=(0,tr.__call__)(tr.ValueError,null,function(){var e="Unknown argument specification: {!r}";return(0,tr.__call__)(e.format,e,t)}());throw i.__cause__=null,i}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}(0,tr.__t__)(null===e._arg_parser)&&(e._arg_parser=function(){var t=e;return(0,tr.__call__)(t.get_arg_parser_instance,t,e.arg_spec)}());var l=e._arg_parser,s=function(){var e=t;return(0,tr.__call__)(e.parse_content,e,l,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({token_reader:r,parsing_state:_},n)))}(),c=s[0],u=s[1];return(0,tr.tuple)([c,u])}))}}),Ja=(0,tr.__class__)("LatexCharsGroupParser",[Ta],{__module__:Ha,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=(0,tr.tuple)(["{","}"]);if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"delimiters":t=i[o];break;case"enable_comments":r=i[o];break;case"enable_groups":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ja,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,delimited_expression_parser_info_class:Ja.CharsContentsParserInfo},n))),e.enable_comments=r,e.enable_groups=_}))},CharsContentsParserInfo:(0,tr.__class__)("CharsContentsParserInfo",[Na],{__module__:Ha,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.contents_parsing_state=function(){var t=e.group_parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1}))}(),e.current_parsing_state=e.contents_parsing_state,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":_=a[i]}}}return e.parsing_state}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))||(!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"char"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))||null)}))}})}),Qa=(0,tr.__class__)("LatexCharsCommaSeparatedListParser",[Ta],{__module__:Ha,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=",";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=(0,tr.tuple)(["{","}"]);if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"comma_char":t=l[s];break;case"delimiters":r=l[s];break;case"enable_comments":_=l[s];break;case"enable_groups":n=l[s];break;case"keep_empty_parts":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qa,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:r,delimited_expression_parser_info_class:Qa.CommaSepParserInfo},i))),e.comma_char=t,e.enable_comments=_,e.enable_groups=n,e.keep_empty_parts=a}))},CommaSepParserInfo:(0,tr.__class__)("CommaSepParserInfo",[Na],{__module__:Ha,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.comma_char=e.delimited_expression_parser.comma_char,e.contents_parsing_state=function(){var t=e.group_parsing_state;return(0,tr.__call__)(t.sub_context,t,(0,tr.__kwargtrans__)({enable_macros:!1,enable_environments:!1,enable_comments:e.delimited_expression_parser.enable_comments,enable_groups:e.delimited_expression_parser.enable_groups,enable_specials:!1,enable_math:!1}))}(),e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get make_child_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"parsing_state":t=a[i];break;case"node_class":r=a[i];break;case"token":_=a[i]}}}return e.parsing_state}))},get make_content_parser(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"latex_walker":t=n[a];break;case"token_reader":r=n[a]}}}return(0,tr.__call__)(ei,null,e)}))}})}),ei=(0,tr.__class__)("_CommaSepContentCustomParser",[ha],{__module__:Ha,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"contents_parser_info":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ei,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.contents_parser_info=t,e.main_content_parser=(0,tr.__call__)(ka,null,(0,tr.__kwargtrans__)({stop_token_condition:e.stop_token_condition,make_child_parsing_state:t.make_child_parsing_state,require_stop_condition_met:!0,handle_stop_condition_token:e.handle_stop_condition_token,stop_condition_message:function(){var r="Expected matching {} of {}-separated group initiated by {}";return(0,tr.__call__)(r.format,r,(0,tr.__getitem__)(t.parsed_delimiters,1),e.contents_parser_info.comma_char,(0,tr.__getitem__)(t.parsed_delimiters,0))}()})),e.current_parsing_state=e.contents_parser_info.contents_parsing_state,e.comma_sep_arg_list=[],e.parsing_state_delta=null,e.parse_more=!0,e.pos_start=null,e.is_very_first_element=!0,e.last_element_pos_start=null,e.last_delimiter_token=null,e.last_element_pos_end=null}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.contents_parser_info.parsed_delimiters,1)))||!!(0,tr.__t__)((0,tr.__eq__)(t.tok,"char"))&&(!!(0,tr.__t__)((0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.contents_parser_info.parsed_delimiters,1)))||!!(0,tr.__t__)((0,tr.__eq__)(t.arg,e.contents_parser_info.comma_char)))}))},get handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":_=i[o];break;case"parsing_state":n=i[o]}}}!function(){var e=_;(0,tr.__call__)(e.move_past_token,e,t)}(),(0,tr.__t__)((0,tr.__eq__)(t.tok,"brace_close"))?(e.last_delimiter_token=null,e.last_element_pos_end=t.pos,e.parse_more=!1):(e.last_delimiter_token=t,e.last_element_pos_end=t.pos_end,e.parse_more=!0)}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":_=a[i]}}}for(e.pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),e.parse_more=!0;(0,tr.__t__)(e.parse_more);)!function(){var _=e;(0,tr.__call__)(_._parse_one_commasep_arg,_,t,r)}(),(0,tr.__t__)((0,tr.__t__)(e.parse_more)&&null!==e.parsing_state_delta)&&(e.current_parsing_state=function(){var r=e.parsing_state_delta;return(0,tr.__call__)(r.get_updated_parsing_state,r,e.current_parsing_state,t)}());var o=function(){var r=t;return(0,tr.__call__)(r.make_nodelist,r,e.comma_sep_arg_list,(0,tr.__kwargtrans__)({pos:e.pos_start,pos_end:e.last_element_pos_end,parsing_state:_}))}();return(0,tr.tuple)([o,e.parsing_state_delta])}))},get _parse_one_commasep_arg(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"latex_walker":t=n[a];break;case"token_reader":r=n[a]}}}e.last_element_pos_start=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),e.last_element_pos_end=null,e.last_delimiter_token=null;var i=function(){var _,n=t;return(0,tr.__call__)(n.parse_content,n,e.main_content_parser,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:e.current_parsing_state,open_context:(0,tr.tuple)([(_="Element {} of list separated by {}",(0,tr.__call__)(_.format,_,(0,tr.__call__)(tr.len,null,e.comma_sep_arg_list),e.contents_parser_info.comma_char)),e.contents_parser_info.first_token])}))}(),o=i[0],l=i[1],s=e.last_element_pos_end;if((0,tr.__t__)(null===s)){s=function(){var e=r;return(0,tr.__call__)(e.final_pos,e)}();e.parse_more=!1}if((0,tr.__t__)(null===e.last_delimiter_token))var c="";else c=e.last_delimiter_token.arg;var u=function(){var r=t;return(0,tr.__call__)(r.make_node,r,_n,(0,tr.__kwargtrans__)({nodelist:o,parsing_state:e.current_parsing_state,delimiters:(0,tr.tuple)(["",c]),pos:e.last_element_pos_start,pos_end:s}))}(),f=!0;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,o))))if((0,tr.__t__)((0,tr.__t__)(e.is_very_first_element)&&null===e.last_delimiter_token))f=!1;else if((0,tr.__t__)(e.keep_empty_parts))f=!0;else f=!1;(0,tr.__t__)(f)&&function(){var t=e.comma_sep_arg_list;(0,tr.__call__)(t.append,t,u)}(),e.parsing_state_delta=l,e.is_very_first_element=!1}))}}),ti=(0,tr.__class__)("LatexTackOnInformationFieldMacrosParser",[ha],{__module__:Ha,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"macronames":t=o[l];break;case"allow_multiple":r=o[l];break;case"macro_arg_parsers":_=o[l];break;case"default_macro_arg_parser":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ti,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.macronames=(0,tr.__call__)(tr.set,null,t),(0,tr.__t__)(!1===r)?e.allow_multiple=(0,tr.__call__)(tr.set,null):(0,tr.__t__)(!0===r)?e.allow_multiple=e.macronames:e.allow_multiple=(0,tr.__call__)(tr.set,null,r),(0,tr.__t__)(!0===n)?e.default_macro_arg_parser=(0,tr.__call__)(za,null):e.default_macro_arg_parser=n,e.macro_arg_parsers=_}))},get contents_can_be_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!0}))},get get_macro_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}if((0,tr.__t__)(null===e.macro_arg_parsers))return e.default_macro_arg_parser;if((0,tr.__t__)(!(0,tr.__in__)(t,e.macro_arg_parsers)))return e.default_macro_arg_parser;var a=(0,tr.__getitem__)(e.macro_arg_parsers,t);return(0,tr.__t__)(!0===a)?e.default_macro_arg_parser:a}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"latex_walker":t=a[i];break;case"token_reader":r=a[i];break;case"parsing_state":_=a[i]}}}for(var o=[],l=(0,tr.__call__)(tr.set,null);(0,tr.__t__)(!0);){var s=function(){var e=r;return(0,tr.__call__)(e.peek_token_or_none,e,_)}();if((0,tr.__t__)((0,tr.__t__)(null===s)||(0,tr.__t__)((0,tr.__ne__)(s.tok,"macro"))||!(0,tr.__in__)(s.arg,e.macronames)))break;var c=s.arg,u=!1;if(function(){var e=r;(0,tr.__call__)(e.move_past_token,e,s)}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(c,l))&&!(0,tr.__t__)((0,tr.__in__)(c,e.allow_multiple)))){var f=function(){var e="You cannot specify information field macro \\{} multiple times";return(0,tr.__call__)(e.format,e,c)}(),d=(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:f,pos:s.pos,error_type_info:(0,tr.dict)({what:"nodes_stdarg_illegal_multiple_information_field_macro",macroname:c})}));d=function(){var e=t;return(0,tr.__call__)(e.check_tolerant_parsing_ignore_error,e,d)}();if((0,tr.__t__)(null!==d)){var p=d;throw p.__cause__=null,p}!function(){var e=Ya;(0,tr.__call__)(e.warning,e,"%s; ignoring the additional information field macros",f)}();u=!0}var h=function(){var t=e;return(0,tr.__call__)(t.get_macro_arg_parser,t,c)}();if((0,tr.__t__)(null===h))var g=null,v=null;else{var m=function(){var e,n=t;return(0,tr.__call__)(n.parse_content,n,h,(0,tr.__kwargtrans__)({token_reader:r,parsing_state:_,open_context:(0,tr.tuple)([(e="Argument of information field macro \\{}",(0,tr.__call__)(e.format,e,c)),s])}))}();g=m[0],v=m[1];(0,tr.__t__)(null!==v)&&function(){var e,t=Ya;(0,tr.__call__)(t.warning,t,(e="Parsing state delta is ignored when parsing tack-on information field macro \\{}: {}",(0,tr.__call__)(e.format,e,c,v)))}()}if(!(0,tr.__t__)(u)){if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,g,cn)))var y=g;else y=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,[g],(0,tr.__kwargtrans__)({parsing_state:_}))}();var w=function(){var e=t;return(0,tr.__call__)(e.make_node,e,_n,(0,tr.__kwargtrans__)({parsing_state:_,delimiters:(0,tr.tuple)([(0,tr.__add__)("\\",c),""]),nodelist:y,pos:s.pos,pos_end:(0,tr.__t__)(null!==g)?g.pos_end:s.pos_end}))}();!function(){var e=o;(0,tr.__call__)(e.append,e,w)}()}}var b=function(){var e=t;return(0,tr.__call__)(e.make_nodelist,e,o,(0,tr.__kwargtrans__)({parsing_state:_}))}();return(0,tr.tuple)([b,null])}))}}),ri=(tr=a("hoVWB"),{});(0,tr.__nest__)(ri,"",m_);var _i="pylatexenc.latexnodes.parsers._math",ni=(function(){var e=ri;(0,tr.__call__)(e.getLogger,e,_i)}(),tr.str),ai=(0,tr.__class__)("LatexMathParserInfo",[Aa],{__module__:_i,get is_opening_delimiter(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"first_token":r=l[s];break;case"group_parsing_state":_=l[s];break;case"delimited_expression_parser":n=l[s];break;case"latex_walker":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}return!(0,tr.__t__)(!(0,tr.__in__)(r.tok,(0,tr.tuple)(["mathmode_inline","mathmode_display"])))&&!(0,tr.__t__)(!(0,tr.__t__)(function(){var _=e;return(0,tr.__call__)(_.check_opening_delimiter,_,(0,tr.__kwargtrans__)({delimiters:t,parsed_opening_delimiter:r.arg,latex_walker:a}))}()))}))},get get_acceptable_open_delimiter_list(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"cls":e=o[l];break;case"delimiters":t=o[l];break;case"group_parsing_state":r=o[l];break;case"delimited_expression_parser":_=o[l];break;case"latex_walker":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__t__)(null!==t)?(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,ni))?[t]:[(0,tr.__getitem__)(t,0)]:function(){for(var e,t=[],_=(0,tr.__add__)(r.latex_inline_math_delimiters,r.latex_display_math_delimiters),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0];a[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,i)}return t}()}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.math_mode_type=e.first_token.tok,e.math_mode_delimiter=e.first_token.arg,e.math_parsing_state=(0,tr.__call__)(In,null,e.parsing_state,(0,tr.__call__)(Mn,null,(0,tr.__kwargtrans__)({math_mode_delimiter:e.math_mode_delimiter,trigger_token:e.first_token})),e.latex_walker),e.contents_parsing_state=e.math_parsing_state,e.parsed_delimiters=function(){var t=e;return(0,tr.__call__)(t.get_parsed_delimiters,t)}()}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,e.math_mode_type))&&(0,tr.__eq__)(t.arg,(0,tr.__getitem__)(e.parsed_delimiters,1)))}))},get get_matching_delimiter(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"opening_delimiter":t=_[n]}}}return(0,tr.__getitem__)(e.math_parsing_state._math_expecting_close_delim_info,"close_delim")}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":_=i[o];break;case"parsing_state_delta":n=i[o]}}}var l=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}();if((0,tr.__t__)((0,tr.__eq__)(e.math_mode_type,"mathmode_inline")))var s="inline";else if((0,tr.__t__)((0,tr.__eq__)(e.math_mode_type,"mathmode_display")))s="display";else s="<unknown>";var c=function(){var r=t;return(0,tr.__call__)(r.make_node,r,sn,(0,tr.__kwargtrans__)({displaytype:s,nodelist:_,parsing_state:e.parsing_state,delimiters:e.parsed_delimiters,pos:e.first_token.pos,pos_end:l}))}();return(0,tr.tuple)([c,n])}))}}),ii=(0,tr.__class__)("LatexMathParser",[Sa],{__module__:_i,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"math_mode_delimiters":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ii,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:t,discard_parsing_state_delta:!1,delimited_expression_parser_info_class:ai},r)))}))}}),oi={};(0,tr.__nest__)(oi,"",m_);var li="flm.flmfragment",si=function(){var e=oi;return(0,tr.__call__)(e.getLogger,e,li)}(),ci=(0,tr.tuple)(["is_block_level","resource_info","standalone_mode","silent","what","parsing_mode"]),ui=(0,tr.__class__)("FLMFragment",[tr.object],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null,a=!1,i=!1,o="(unknown)",l=!1,s=null,c=null,u=null;if(arguments.length){var f=arguments.length-1;if(arguments[f]&&arguments[f].hasOwnProperty("__kwargtrans__")){var d=arguments[f--];for(var p in d)switch(p){case"self":e=d[p];break;case"flm_text":t=d[p];break;case"environment":r=d[p];break;case"is_block_level":_=d[p];break;case"resource_info":n=d[p];break;case"standalone_mode":a=d[p];break;case"tolerant_parsing":i=d[p];break;case"what":o=d[p];break;case"silent":l=d[p];break;case"parsing_mode":s=d[p];break;case"input_lineno_colno_offsets":c=d[p];break;case"_flm_text_if_loading_nodes":u=d[p]}}}if(e.flm_text=t,e.environment=r,e.is_block_level=_,e.resource_info=n,e.standalone_mode=a,e.tolerant_parsing=i,e.what=o,e.silent=l,e.parsing_mode=s,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,cn)))return e.nodes=e.flm_text,e.latex_walker=e.nodes.latex_walker,void((0,tr.__t__)(null!==u)?e.flm_text=u:e.flm_text=function(){var t=e.nodes;return(0,tr.__call__)(t.latex_verbatim,t)}());try{var h=function(){var t=ui;return(0,tr.__call__)(t.parse,t,e.flm_text,e.environment,(0,tr.__kwargtrans__)({standalone_mode:e.standalone_mode,tolerant_parsing:e.tolerant_parsing,is_block_level:e.is_block_level,what:e.what,resource_info:e.resource_info,parsing_mode:e.parsing_mode,input_lineno_colno_offsets:c}))}();e.latex_walker=h[0],e.nodes=h[1]}catch(t){if((0,tr.isinstance)(t,S_.LatexWalkerLocatedError)){(y=t).flm_fragment_resource_info=e.resource_info,y.flm_fragment_what=e.what,(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,y,"open_contexts")))||!(0,tr.__t__)(y.open_contexts))&&(y.open_contexts=[]),function(){var t=y.open_contexts;(0,tr.__call__)(t.append,t,(0,tr.tuple)([(0,tr.__add__)("parsing ",(0,tr.__call__)(tr.str,null,e.what)),null,"",null]))}();var g=function(){var t=e.environment;return(0,tr.__call__)(t.get_located_error_message,t,y)}();if((0,tr.__t__)(!(0,tr.__t__)(e.silent))){var v=function(){var e=S_;return(0,tr.__call__)(e.LatexWalkerLocatedErrorFormatter,e,y)}(),m=function(){var e=v;return(0,tr.__call__)(e.to_display_string,e)}();if((0,tr.__t__)(null!==g))m=(0,tr.__add__)((0,tr.__add__)(g,"\n"),m);!function(){var t=si;(0,tr.__call__)(t.error,t,"Parse error in latex-like markup {}: {}\nGiven text was:\n{}\n\n".format(e.what,m,(0,tr.__call__)(di,null,e.flm_text)))}()}throw(0,tr.__t__)(null!==g)&&(y.msg=g),t.__cause__=null,t}if((0,tr.isinstance)(t,tr.Exception)){var y=t;throw(0,tr.__t__)(!(0,tr.__t__)(e.silent))&&function(){var t=si;(0,tr.__call__)(t.error,t,"Error parsing latex-like markup {}: {}\nGiven text was:\n{}\n\n".format(e.what,y,(0,tr.__call__)(di,null,e.flm_text)))}(),t.__cause__=null,t}throw t}}))},_attribute_fields:ci,_fields:(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)(["nodes"],(0,tr.__call__)(tr.list,null,ci))),get _attributes(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){for(var t,r=[],_=e._attribute_fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}();return function(){var e=a;(0,tr.__call__)(e.py_update,e,t)}(),a}))},get render(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_context":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return function(){var _=t.fragment_renderer;return(0,tr.__call__)(_.render_fragment,_,e,t,(0,tr.__kwargtrans__)(r))}()}))},get render_standalone(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"fragment_renderer":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.standalone_mode))){var a=(0,tr.__call__)(tr.ValueError,null,"You can only use render_standalone() on a fragment that was parsed in standalone mode (use `standalone_mode=True` in the FLMFragment constructor)");throw a.__cause__=null,a}var i=(0,tr.__call__)(A_,null,(0,tr.__kwargtrans__)({fragment_renderer:t}));return function(){var t=e;return(0,tr.__call__)(t.render,t,i)}()}))},get parse(){return(0,tr.__getcm__)(this,(function(e,t,r){var _=!1,n=null,a=null,i=null,o=null,l=null,s=null;if(arguments.length){var c=arguments.length-1;if(arguments[c]&&arguments[c].hasOwnProperty("__kwargtrans__")){var u=arguments[c--];for(var f in u)switch(f){case"cls":e=u[f];break;case"flm_text":t=u[f];break;case"environment":r=u[f];break;case"standalone_mode":_=u[f];break;case"tolerant_parsing":n=u[f];break;case"is_block_level":a=u[f];break;case"parsing_mode":i=u[f];break;case"resource_info":o=u[f];break;case"what":l=u[f];break;case"input_lineno_colno_offsets":s=u[f]}}}var d=function(){var e=r;return(0,tr.__call__)(e.make_latex_walker,e,t,(0,tr.__kwargtrans__)({is_block_level:a,parsing_mode:i,resource_info:o,standalone_mode:_,tolerant_parsing:n,what:l,input_lineno_colno_offsets:s}))}(),p=function(){var e,t=d;return(0,tr.__call__)(t.parse_content,t,(e=pa,(0,tr.__call__)(e.LatexGeneralNodesParser,e)))}(),h=p[0];p[1];return(0,tr.tuple)([d,h])}))},get start_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node_visitor":t=_[n]}}}!function(){var r=t;(0,tr.__call__)(r.start,r,e.nodes)}()}))},get is_empty(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var t=e.flm_text;return(0,tr.__call__)(t.strip,t)}()),0)}))},get __bool__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return!(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.is_empty,t)}())}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.flm_text;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,n),50)))n=(0,tr.__add__)((0,tr.__getslice__)(n,0,49,1),"");return"<{} {}>".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,n))}))},get whitespace_stripped(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t,r=e.environment;return(0,tr.__call__)(r.make_fragment,r,(t=e.flm_text,(0,tr.__call__)(t.strip,t)),(0,tr.__kwargtrans__)(function(){var t=e;return(0,tr.__call__)(t._attributes,t,(0,tr.__kwargtrans__)({what:"{}:whitespace-stripped".format(e.what)}))}()))}();return n}))},get get_first_paragraph(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e.nodes;return(0,tr.__call__)(t.split_at_node,t,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__t__)((n=e,(0,tr.__call__)(n.isNodeType,n,ln)))&&(0,tr.__eq__)(e.specials_chars,"\n\n");var n}),(0,tr.__kwargtrans__)({max_split:1}))}();n=function(){for(var e,t=[],r=n,_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,a),0))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,a))}return t}();if((0,tr.__t__)(!(0,tr.__t__)(n)))return e;var a=(0,tr.__getitem__)(n,0);return function(){var t,r=e.environment;return(0,tr.__call__)(r.make_fragment,r,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:a},(t=e,(0,tr.__call__)(t._attributes,t,(0,tr.__kwargtrans__)({what:"{}:first-paragraph".format(e.what)}))))))}()}))},get truncate_to(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=" ";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"min_chars":r=a[i];break;case"truncation_marker":_=a[i]}}}var o=(0,tr.__call__)(fi,null,(0,tr.__kwargtrans__)({chars:t,min_chars:r,truncation_marker:_})),l=function(){var t=o;return(0,tr.__call__)(t.truncate_node_list,t,e.nodes)}();return function(){var r,_=e.environment;return(0,tr.__call__)(_.make_fragment,_,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:l},(r=e,(0,tr.__call__)(r._attributes,r,(0,tr.__kwargtrans__)({what:"{}:tr-{}".format(e.what,t)}))))))}()}))}}),fi=(0,tr.__class__)("_NodeListTruncator",[tr.object],{__module__:li,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"min_chars":r=a[i];break;case"truncation_marker":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fi,"__init__"),null,e),e.chars=t,e.min_chars=r,e.truncation_marker=_,e.count=0}))},get truncate_node_list(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodes":t=_[n]}}}e.count=0;var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t)}();return(0,tr.__t__)(null===a)?t:a}))},get collect_nodes(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodes":t=_[n]}}}for(var a=(0,tr.__call__)(tr.enumerate,null,t),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1],c=function(){var t=e;return(0,tr.__call__)(t.collect_node,t,s)}();if((0,tr.__t__)(null!==c)){var u=(0,tr.__getslice__)(t,0,l,1);return(0,tr.__t__)(!0!==c)&&function(){var e=u;(0,tr.__call__)(e.extend,e,[c])}(),function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,u,(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}()}}return null}))},get collect_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,_n)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_groupnode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,an)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_macronode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,on)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_environmentnode,r,t)}():(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,ln)}())?function(){var r=e;return(0,tr.__call__)(r.collect_nodes_specialsnode,r,t)}():function(){var r=e;return(0,tr.__call__)(r.collect_nodes_simplenode,r,t)}()}))},get collect_nodes_groupnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t.nodelist)}();if((0,tr.__t__)(null===a))return null;var i=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,_n,(0,tr.__kwargtrans__)({delimiters:t.delimiters,nodelist:a,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();return i}))},get collect_node_argument(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,cn))?function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t)}():function(){var r=e;return(0,tr.__call__)(r.collect_node,r,t)}()}))},get collect_nodes_macronode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t.spec,"_flm_main_text_argument"))){var a=t.spec._flm_main_text_argument,i=(0,tr.__call__)(tr.py_next,null,function(){for(var e,r=[],_=(0,tr.__call__)(tr.enumerate,null,t.spec.arguments_spec_list),n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n),o=i[0],l=i[1];(0,tr.__t__)((0,tr.__eq__)(l.argname,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,o))}return(0,tr.py_iter)(r)}()),o=(0,tr.__getitem__)(t.nodeargd.argnlist,i),l=function(){var t=e;return(0,tr.__call__)(t.collect_node_argument,t,o)}();if((0,tr.__t__)(l)){var s=(0,tr.__add__)((0,tr.__add__)((0,tr.__getslice__)(t.nodeargd.argnlist,0,i,1),[l]),(0,tr.__getslice__)(t.nodeargd.argnlist,(0,tr.__add__)(i,1),null,1));if((0,tr.__t__)(null!==l)){var c=function(){var e,r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,an,(0,tr.__kwargtrans__)({macroname:t.macroname,spec:t.spec,nodeargd:(e=S_,(0,tr.__call__)(e.ParsedArguments,e,(0,tr.__kwargtrans__)({arguments_spec_list:t.nodeargd.arguments_spec_list,argnlist:s}))),macro_post_space:t.macro_post_space,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();c=function(){var e=t.spec;return(0,tr.__call__)(e.finalize_node,e,c)}();return c}}}return null}))},get collect_nodes_environmentnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.collect_nodes,r,t.nodelist)}();if((0,tr.__t__)(null===a))return null;var i=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,on,(0,tr.__kwargtrans__)({environmentname:t.environmentname,nodeargd:t.nodeargd,nodelist:a,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();i=function(){var e=t.spec;return(0,tr.__call__)(e.finalize_node,e,i)}();return i}))},get collect_nodes_specialsnode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=(0,tr.__call__)(tr.len,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}());return!(0,tr.__t__)((0,tr.__lt__)(a,(0,tr.__sub__)(e.chars,e.count)))||(e.count=(0,tr.__call__)(tr.__iadd__,null,e.count,a),null)}))},get collect_nodes_simplenode(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r.estimate_simple_node_char_count,r,t)}();if((0,tr.__t__)((0,tr.__lt__)(a,(0,tr.__sub__)(e.chars,e.count))))return e.count=(0,tr.__call__)(tr.__iadd__,null,e.count,a),null;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,rn)}())){for(var i=t.chars,o=0,l=(0,tr.__call__)(tr.enumerate,null,i),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1];if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isalpha,e)}())))o=u;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__add__)(e.count,u),e.chars))&&(0,tr.__t__)((0,tr.__t__)(null===e.min_chars)||(0,tr.__ge__)((0,tr.__add__)(e.count,o),e.min_chars)))break}var d=(0,tr.__add__)((0,tr.__getslice__)(i,0,o,1),e.truncation_marker),p=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({chars:d,parsing_state:t.parsing_state,pos:t.pos,pos_end:t.pos_end}))}();return p}return!(0,tr.__t__)((0,tr.__t__)(null!==e.min_chars)&&(0,tr.__lt__)(e.count,e.min_chars))||t}))},get estimate_simple_node_char_count(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,rn)}())?(0,tr.__call__)(tr.len,null,t.chars):(0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,sn)}())?(0,tr.__floordiv__)((0,tr.__mul__)((0,tr.__call__)(tr.len,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()),2),3):((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,nn)}()),0)}))}}),di=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=100;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"maxlen":t=_[n]}}}e=(0,tr.__call__)(tr.str,null,e);return(0,tr.__add__)((0,tr.__getslice__)(e,0,t,1),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),t))?"":"")},pi=(tr=a("hoVWB"),tr=a("hoVWB"),{});t(pi,"LatexNoArgumentsParser",(()=>Ti)),t(pi,"LatexContextDb",(()=>Qi)),t(pi,"ParsingStateDeltaExtendLatexContextDb",(()=>eo)),t(pi,"LatexSpecialsCallParser",(()=>bi)),t(pi,"LatexArgumentsParser",(()=>Li)),t(pi,"LatexEnvironmentBodyContentsParserInfo",(()=>Pi)),t(pi,"EnvironmentSpec",(()=>so)),t(pi,"SpecialsSpec",(()=>co)),t(pi,"MacroSpec",(()=>lo)),t(pi,"LatexEnvironmentBodyContentsParser",(()=>Ei)),t(pi,"LatexMacroCallParser",(()=>yi)),t(pi,"CallableSpec",(()=>oo)),t(pi,"LatexEnvironmentCallParser",(()=>wi)),a("hoVWB");tr=a("hoVWB");var hi={};(0,tr.__nest__)(hi,"",m_);var gi="pylatexenc.macrospec._macrocallparser",vi=function(){var e=hi;return(0,tr.__call__)(e.getLogger,e,gi)}(),mi=(0,tr.__class__)("_LatexCallableParserBase",[ha],{__module__:gi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"token_call":t=l[s];break;case"spec_object":r=l[s];break;case"what":_=l[s];break;case"node_class":n=l[s];break;case"node_extra_kwargs":a=l[s];break;case"parse_body":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,mi,"__init__"),null,e),e.token_call=t,e.spec_object=r,e.what=_,e.node_class=n,e.node_extra_kwargs=a,e.arguments_parser=e.spec_object.arguments_parser,e.parse_body=i,e.make_arguments_parsing_state_delta=e.spec_object.make_arguments_parsing_state_delta,e.make_body_parsing_state_delta=e.spec_object.make_body_parsing_state_delta,e.make_after_parsing_state_delta=e.spec_object.make_after_parsing_state_delta}))},get parse_call_arguments(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=(0,tr.__call__)(In,null,_,function(){var r=e;return(0,tr.__call__)(r.make_arguments_parsing_state_delta,r,(0,tr.__kwargtrans__)({token:e.token_call,latex_walker:t}))}(),t),s=function(){var _=t;return(0,tr.__call__)(_.parse_content,_,e.arguments_parser,r,l,(0,tr.__kwargtrans__)(n))}(),c=s[0],u=s[1];return(0,tr.tuple)([c,u])}))},get make_body_parser_and_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodeargd":t=i[o];break;case"arg_parsing_state_delta":r=i[o];break;case"parsing_state":_=i[o];break;case"latex_walker":n=i[o]}}}var l=(0,tr.__call__)(RuntimeError,null,"No default implementation of make_body_parser_and_parsing_state() in base class");throw l.__cause__=null,l}))},get parse_call_body(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){var i=(0,tr.dict)();if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"nodeargd":t=l[s];break;case"arg_parsing_state_delta":r=l[s];break;case"latex_walker":_=l[s];break;case"token_reader":n=l[s];break;case"parsing_state":a=l[s];break;default:i[s]=l[s]}delete i.__kwargtrans__}}var c=function(){var n=e;return(0,tr.__call__)(n.make_body_parser_and_parsing_state,n,t,r,a,_)}(),u=c[0],f=c[1],d=(c=function(){var e=_;return(0,tr.__call__)(e.parse_content,e,u,n,f,(0,tr.__kwargtrans__)(i))}(),c[0]),p=c[1];return(0,tr.tuple)([d,p])}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=e.token_call.pos;if((0,tr.__t__)(null!==e.arguments_parser))var s=function(){var a=e;return(0,tr.__call__)(a.parse_call_arguments,a,t,r,_,(0,tr.__kwargtrans__)(n))}(),c=s[0],u=s[1];else c=(s=(0,tr.tuple)([null,null]))[0],u=s[1];if((0,tr.__t__)(e.parse_body)){s=function(){var a=e;return(0,tr.__call__)(a.parse_call_body,a,c,u,t,r,_,(0,tr.__kwargtrans__)(n))}();var f=s[0],d=s[1]}else{(0,tr.__t__)(null!==u)&&function(){var t=vi;(0,tr.__call__)(t.warning,t,"Parsing state delta (%r) ignored after arguments to %s!",u,e.what)}();f=null,d=null}(0,tr.__t__)(null!==d)&&function(){var e=vi;(0,tr.__call__)(e.warning,e,"Parsing state delta (%r) ignored after body!",d)}();var p=function(){var e=r;return(0,tr.__call__)(e.cur_pos,e)}(),h=(0,tr.__call__)(tr.dict,null,e.node_extra_kwargs);(0,tr.__t__)(e.parse_body)&&(0,tr.__setitem__)(h,"nodelist",f);var g=function(){var r=t;return(0,tr.__call__)(r.make_node,r,e.node_class,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({parsing_state:_,spec:e.spec_object,nodeargd:c,pos:l,pos_end:p},h)))}(),v=(g=function(){var t=e.spec_object;return(0,tr.__call__)(t.finalize_node,t,g)}(),function(){var r=e;return(0,tr.__call__)(r.make_after_parsing_state_delta,r,(0,tr.__kwargtrans__)({parsed_node:g,latex_walker:t}))}());return(0,tr.tuple)([g,v])}))}}),yi=(0,tr.__class__)("LatexMacroCallParser",[mi],{__module__:gi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"token_call":t=n[a];break;case"macrospec":r=n[a]}}}var i=t.arg,o=t.post_space;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,yi,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="macro call (\\{})";return(0,tr.__call__)(e.format,e,i)}(),node_class:an,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macroname:i,macro_post_space:o}))})),e.macroname=i,e.macro_post_space=o}))}}),wi=(0,tr.__class__)("LatexEnvironmentCallParser",[mi],{__module__:gi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"token_call":t=n[a];break;case"environmentspec":r=n[a]}}}var i=t.arg;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wi,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="environment {}{}{}";return(0,tr.__call__)(e.format,e,"{",i,"}")}(),parse_body:!0,node_class:on,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environmentname:i}))})),e.environmentname=i}))},get make_body_parser_and_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"nodeargd":t=i[o];break;case"arg_parsing_state_delta":r=i[o];break;case"parsing_state":_=i[o];break;case"latex_walker":n=i[o]}}}(0,tr.__t__)(null!==r)&&function(){var t=vi;(0,tr.__call__)(t.warning,t,"Parsing carry-over information (%r) ignored after arguments to %s!",r,e.what)}();var l=function(){var _=e.spec_object;return(0,tr.__call__)(_.make_body_parser,_,e.token_call,t,r)}(),s=(0,tr.__call__)(In,null,_,function(){var _=e;return(0,tr.__call__)(_.make_body_parsing_state_delta,_,(0,tr.__kwargtrans__)({token:e.token_call,nodeargd:t,arg_parsing_state_delta:r,latex_walker:n}))}(),n);return(0,tr.tuple)([l,s])}))},get _handle_stop_condition_token(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"t":t=i[o];break;case"latex_walker":r=i[o];break;case"token_reader":_=i[o];break;case"parsing_state":n=i[o]}}}!function(){var e=_;(0,tr.__call__)(e.move_past_token,e,t)}()}))},get _parse_body_token_stop_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"t":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"end_environment"))&&(0,tr.__eq__)(t.arg,e.environmentname))}))}}),bi=(0,tr.__class__)("LatexSpecialsCallParser",[mi],{__module__:gi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"token_call":t=n[a];break;case"specialsspec":r=n[a]}}}var i=r.specials_chars;(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bi,"__init__"),null,e,(0,tr.__kwargtrans__)({token_call:t,spec_object:r,what:function(){var e="specials {}";return(0,tr.__call__)(e.format,e,i)}(),node_class:ln,node_extra_kwargs:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({specials_chars:i}))})),e.specials_chars=i}))}}),ki=(tr=a("hoVWB"),{});(0,tr.__nest__)(ki,"",m_);var xi="pylatexenc.macrospec._environmentbodyparser",Oi=function(){var e=ki;return(0,tr.__call__)(e.getLogger,e,xi)}(),Pi=(0,tr.__class__)("LatexEnvironmentBodyContentsParserInfo",[Aa],{__module__:xi,get parse_initial(){return(0,tr.__getcm__)(this,(function(e,t,r,_,n,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"cls":e=l[s];break;case"delimiters":t=l[s];break;case"allow_pre_space":r=l[s];break;case"latex_walker":_=l[s];break;case"token_reader":n=l[s];break;case"group_parsing_state":a=l[s];break;case"delimited_expression_parser":i=l[s]}}}return[]}))},get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e.delimited_expression_parser;return(0,tr.__call__)(t.get_contents_parsing_state_delta,t)}();e.contents_parsing_state=(0,tr.__call__)(In,null,e.group_parsing_state,n,e.latex_walker),e.child_parsing_state_delta=function(){var t=e.delimited_expression_parser;return(0,tr.__call__)(t.get_child_parsing_state_delta,t)}(),e.parsed_delimiters=(0,tr.tuple)([function(){var t="\\begin{}{}{}";return(0,tr.__call__)(t.format,t,"{",e.delimited_expression_parser.environmentname,"}")}(),function(){var t="\\end{}{}{}";return(0,tr.__call__)(t.format,t,"{",e.delimited_expression_parser.environmentname,"}")}()])}))},get get_open_context_description(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return null}))},get stop_token_condition(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(t.tok,"end_environment"))&&(0,tr.__eq__)(t.arg,e.delimited_expression_parser.environmentname))}))},get make_group_node_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"nodelist":_=i[o];break;case"parsing_state_delta":n=i[o]}}}if((0,tr.__t__)(null===_)){!function(){var e=Oi;(0,tr.__call__)(e.warning,e,"environment body contents parser: parsed nodelist is None")}();_=function(){var r=t;return(0,tr.__call__)(r.make_nodelist,r,(0,tr.__kwargtrans__)({nodelist:[],parsing_state:e.contents_parsing_state}))}()}return(0,tr.tuple)([_,n])}))}}),Ei=(0,tr.__class__)("LatexEnvironmentBodyContentsParser",[Sa],{__module__:xi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"environmentname":t=o[l];break;case"contents_parsing_state_delta":r=o[l];break;case"child_parsing_state_delta":_=o[l];break;case"discard_parsing_state_delta":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ei,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({delimiters:null,discard_parsing_state_delta:n,delimited_expression_parser_info_class:Pi},a))),e.environmentname=t,e.contents_parsing_state_delta=r,e.child_parsing_state_delta=_}))},get get_contents_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.contents_parsing_state_delta}))},get get_child_parsing_state_delta(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.child_parsing_state_delta}))}}),Ci=(tr=a("hoVWB"),{});(0,tr.__nest__)(Ci,"",m_);var Ai="pylatexenc.macrospec._argumentsparser",Si=function(){var e=Ci;return(0,tr.__call__)(e.getLogger,e,Ai)}(),Ni=tr.str,Ti=(0,tr.__class__)("LatexNoArgumentsParser",[ha],{__module__:Ai,get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=(0,tr.__call__)(M_,null,(0,tr.__kwargtrans__)({arguments_spec_list:[],argnlist:[]}));return(0,tr.tuple)([l,null])}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return e.__class__===t.__class__}))}}),Li=(0,tr.__class__)("LatexArgumentsParser",[ha],{__module__:Ai,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"arguments_spec_list":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Li,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),(0,tr.__t__)(null===t))t=[];e.arguments_spec_list=function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,a,L_)))?(0,tr.__call__)(L_,null,a):a)}return r}()}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}for(var l=[],s=(0,tr.__call__)(tr.enumerate,null,e.arguments_spec_list),c=0;c<(0,tr.len)(s);c++){var u=(g=(0,tr.__getitem__)(s,c))[0],f=g[1],d=f.parser,p=function(){var e=r;return(0,tr.__call__)(e.peek_token_or_none,e,(0,tr.__kwargtrans__)({parsing_state:_}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,d,Ni)))d=(0,tr.__call__)(Za,null,d);var h=(0,tr.__call__)(In,null,_,f.parsing_state_delta,t),g=function(){var e,_=t;return(0,tr.__call__)(_.parse_content,_,d,r,h,(0,tr.__kwargtrans__)({open_context:(0,tr.tuple)([(e="Argument {}",(0,tr.__call__)(e.format,e,u)),p])}))}(),v=g[0],m=g[1];(0,tr.__t__)(null!==m)&&function(){var e=Si;(0,tr.__call__)(e.warning,e,"Parsing state changes information (%r) ignored in arguments!",m)}(),function(){var e=l;(0,tr.__call__)(e.append,e,v)}()}var y=(0,tr.__call__)(M_,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.arguments_spec_list,argnlist:l}));return(0,tr.tuple)([y,null])}))},get __eq__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return(0,tr.__t__)(e.__class__===t.__class__)&&(0,tr.__eq__)(e.arguments_spec_list,t.arguments_spec_list)}))}}),Mi=(tr=a("hoVWB"),{});t(Mi,"bisect_right",(()=>qi)),t(Mi,"LineNumbersCalculator",(()=>Vi)),t(Mi,"PushPropOverride",(()=>Gi)),t(Mi,"pylatexenc_deprecated_ver",(()=>Ui)),t(Mi,"pylatexenc_deprecated_2",(()=>$i)),t(Mi,"pylatexenc_deprecated_3",(()=>Wi)),t(Mi,"LazyDict",(()=>Hi)),t(Mi,"ChainMap",(()=>Di));tr=a("hoVWB"),tr=a("hoVWB");var ji={};(0,tr.__nest__)(ji,"",m_);var Ii="collections",Di=(function(){var e=ji;(0,tr.__call__)(e.getLogger,e,Ii)}(),(0,tr.__class__)("ChainMap",[tr.object],{__module__:Ii,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}var n=(0,tr.tuple)([].slice.apply(arguments).slice(1,t+1))}else n=(0,tr.tuple)();e.maps=(0,tr.__t__)((0,tr.__call__)(tr.list,null,n))||[(0,tr.dict)({})]}))},get __missing__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}}var a=(0,tr.__call__)(tr.KeyError,null,t);throw a.__cause__=null,a}))},get __getitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}}for(var a=e.maps,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(!(0,tr.__in__)(t,o)))return(0,tr.__getitem__)(o,t)}return function(){var r=e;return(0,tr.__call__)(r.__missing__,r,t)}()}))},get py_get(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"key":t=n[a];break;case"py_default":r=n[a]}}}return(0,tr.__t__)((0,tr.__in__)(t,e))?(0,tr.__getitem__)(e,t):r}))},get __len__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.len,null,function(){var t=(0,tr.__call__)(tr.set,null);return(0,tr.__call__)(t.union,t,...e.maps)}())}))},get __iter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=(0,tr.dict)({}),a=(0,tr.__call__)(tr.py_reversed,null,e.maps),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);!function(){var e,t=n;(0,tr.__call__)(t.py_update,t,(e=tr.dict,(0,tr.__call__)(e.fromkeys,e,o)))}()}return(0,tr.__call__)(tr.py_iter,null,n)}))},[Symbol.iterator](){return this.__iter__()},get __contains__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}}return(0,tr.__call__)(tr.any,null,function(){for(var r,_=[],n=e.maps,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__in__)(t,i))}return(0,tr.py_iter)(_)}())}))},get __bool__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.any,null,e.maps)}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{!r}({!r})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,e.maps)}()}))},get fromkeys(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"cls":e=_[n];break;case"iterable":t=_[n]}}var a=(0,tr.tuple)([].slice.apply(arguments).slice(2,r+1))}else a=(0,tr.tuple)();return(0,tr.__call__)(e,null,function(){var e=tr.dict;return(0,tr.__call__)(e.fromkeys,e,t,...a)}())}))},get copy(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t,r=e;return(0,tr.__call__)(r.__class__,r,(t=(0,tr.__getitem__)(e.maps,0),(0,tr.__call__)(t.copy,t)),...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get __copy__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t,r=e;return(0,tr.__call__)(r.__class__,r,(t=(0,tr.__getitem__)(e.maps,0),(0,tr.__call__)(t.copy,t)),...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get new_child(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"m":t=_[n]}}}if((0,tr.__t__)(null===t))t=(0,tr.dict)({});return function(){var r=e;return(0,tr.__call__)(r.__class__,r,t,...e.maps)}()}))},get _get_parents(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e;return(0,tr.__call__)(t.__class__,t,...(0,tr.__getslice__)(e.maps,1,null,1))}()}))},get __setitem__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"key":t=n[a];break;case"value":r=n[a]}}}(0,tr.__setitem__)((0,tr.__getitem__)(e.maps,0),t,r)}))},get __delitem__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}}try{(0,tr.__getitem__)((0,tr.__getitem__)(e.maps,0),t)}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var a=(0,tr.__call__)(tr.KeyError,null,"Key not found in the first mapping: {}".format(t));throw a.__cause__=null,a}throw e}}))},get py_popitem(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}try{return function(){var t=(0,tr.__getitem__)(e.maps,0);return(0,tr.__call__)(t.py_popitem,t)}()}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var n=(0,tr.__call__)(tr.KeyError,null,"No keys found in the first mapping.");throw n.__cause__=null,n}throw e}}))},get py_pop(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}var a=(0,tr.tuple)([].slice.apply(arguments).slice(2,r+1))}else a=(0,tr.tuple)();try{return function(){var r=(0,tr.__getitem__)(e.maps,0);return(0,tr.__call__)(r.py_pop,r,t,...a)}()}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var i=(0,tr.__call__)(tr.KeyError,null,"Key not found in the first mapping: {}".format(t));throw i.__cause__=null,i}throw e}}))},get py_clear(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}!function(){var t=(0,tr.__getitem__)(e.maps,0);(0,tr.__call__)(t.py_clear,t)}()}))},get __ior__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}return function(){var r=(0,tr.__getitem__)(e.maps,0);(0,tr.__call__)(r.py_update,r,t)}(),e}))},get __or__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_collections_abc.Mapping))))return NotImplemented;var a=function(){var t=e;return(0,tr.__call__)(t.copy,t)}();return function(){var e=(0,tr.__getitem__)(a.maps,0);(0,tr.__call__)(e.py_update,e,t)}(),a}))},get __ror__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"other":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_collections_abc.Mapping))))return NotImplemented;for(var a=(0,tr.__call__)(tr.dict,null,t),i=(0,tr.__call__)(tr.py_reversed,null,e.maps),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);!function(){var e=a;(0,tr.__call__)(e.py_update,e,l)}()}return function(){var t=e;return(0,tr.__call__)(t.__class__,t,a)}()}))}}));Object.defineProperty(Di,"parents",tr.property.call(Di,Di._get_parents));var Ri={};t(Ri,"bisect_right",(()=>Fi));tr=a("hoVWB");var Fi=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"a":e=_[n];break;case"x":t=_[n]}}}for(var a=0,i=(0,tr.__call__)(tr.len,null,e),o=null;(0,tr.__t__)(!0);){if((0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,a),t)))return a;if((0,tr.__t__)((0,tr.__le__)((0,tr.__getitem__)(e,(0,tr.__sub__)(i,1)),t)))return i;if((0,tr.__t__)((0,tr.__le__)((0,tr.__sub__)(i,a),2)))return(0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,(0,tr.__add__)(a,1)),t))?(0,tr.__add__)(a,1):(0,tr.__add__)(a,2);o=(0,tr.__floordiv__)((0,tr.__add__)(i,a),2);if((0,tr.__t__)((0,tr.__gt__)((0,tr.__getitem__)(e,o),t)))i=(0,tr.__add__)(o,1);else a=o}},zi={};(0,tr.__nest__)(zi,"",Ri);var Bi="pylatexenc._util",qi=zi.bisect_right,Vi=(0,tr.__class__)("LineNumbersCalculator",[tr.object],{__module__:Bi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"s":t=i[o];break;case"line_number_offset":r=i[o];break;case"first_line_column_offset":_=i[o];break;case"column_offset":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Vi,"__init__"),null,e),e.line_number_offset=r,e.first_line_column_offset=_,e.column_offset=n;e._pos_new_lines=(0,tr.__call__)(tr.list,null,(0,tr.__call__)((function*(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}yield 0;for(var n=0;(0,tr.__t__)((0,tr.__lt__)(n,(0,tr.__call__)(tr.len,null,e)));){n=function(){var t=e;return(0,tr.__call__)(t.find,t,"\n",n)}();if((0,tr.__t__)((0,tr.__eq__)(n,(0,tr.__neg__)(1))))return;n=(0,tr.__call__)(tr.__iadd__,null,n,1);yield n}}),null,t))}))},get pos_to_lineno_colno(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"pos":t=n[a];break;case"as_dict":r=n[a]}}}if((0,tr.__t__)(null===t))return(0,tr.__t__)(r)?(0,tr.dict)({lineno:null,colno:null}):(0,tr.tuple)([null,null]);var i=(0,tr.__sub__)((0,tr.__call__)(qi,null,e._pos_new_lines,t),1);(0,tr.assert)((0,tr.__t__)((0,tr.__ge__)(i,0))&&(0,tr.__lt__)(i,(0,tr.__call__)(tr.len,null,e._pos_new_lines)));var o=(0,tr.__sub__)(t,(0,tr.__getitem__)(e._pos_new_lines,i));if((0,tr.__t__)((0,tr.__eq__)(i,0)))o=(0,tr.__call__)(tr.__iadd__,null,o,e.first_line_column_offset);else o=(0,tr.__call__)(tr.__iadd__,null,o,e.column_offset);i=(0,tr.__call__)(tr.__iadd__,null,i,e.line_number_offset);return(0,tr.__t__)(r)?(0,tr.dict)({lineno:i,colno:o}):(0,tr.tuple)([i,o])}))}}),Gi=(0,tr.__class__)("PushPropOverride",[tr.object],{__module__:Bi,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"obj":t=a[i];break;case"propname":r=a[i];break;case"new_value":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Gi,"__init__"),null,e),e.obj=t,e.propname=r,e.new_value=_}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)(null!==e.new_value)&&(e.initval=(0,tr.__call__)(tr.getattr,null,e.obj,e.propname),(0,tr.__call__)(tr.setattr,null,e.obj,e.propname,e.new_value)),e}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"py_metatype":t=a[i];break;case"value":r=a[i];break;case"traceback":_=a[i]}}}(0,tr.__t__)(null!==e.new_value)&&(0,tr.__call__)(tr.setattr,null,e.obj,e.propname,e.initval)}))}}),Ui=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},$i=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Wi=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},Hi=null,Yi={},Xi={};(0,tr.__nest__)(Xi,"",ur),(0,tr.__nest__)(Yi,"",m_);var Zi="pylatexenc.macrospec._latexcontextdb",Ki=(function(){var e=Yi;(0,tr.__call__)(e.getLogger,e,Zi)}(),"__lctxdb_cat_"),Ji=Xi.fn_unique_object_id,Qi=(0,tr.__class__)("LatexContextDb",[tr.object],{__module__:Zi,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qi,"__init__"),null,e,(0,tr.__kwargtrans__)(t)),e.category_list=[],e.d=(0,tr.dict)({}),e.frozen=!1,e.lookup_chain_maps=(0,tr.dict)({macros:function(){var e=Mi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}(),environments:function(){var e=Mi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}(),specials:function(){var e=Mi;return(0,tr.__call__)(e.ChainMap,e,(0,tr.dict)({}))}()}),e.unknown_macro_spec=null,e.unknown_environment_spec=null,e.unknown_specials_spec=null,e._autogen_category_counter=0}))},get freeze(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.frozen=!0}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="<LatexContextDb {:#x}{}>";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(Ji,null,e),(0,tr.__t__)(e.frozen)?"":" unfrozen")}()}))},get add_context_category(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=[];if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=[];if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"category":t=s[c];break;case"macros":r=s[c];break;case"environments":_=s[c];break;case"specials":n=s[c];break;case"prepend":a=s[c];break;case"insert_before":i=s[c];break;case"insert_after":o=s[c]}}}if((0,tr.__t__)(e.frozen))throw(u=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.")).__cause__=null,u;if((0,tr.__t__)((0,tr.__t__)(null!==t)&&function(){var e=t;return(0,tr.__call__)(e.startswith,e,Ki)}())){var u=(0,tr.__call__)(tr.ValueError,null,function(){var e="Category name {} is unfortunately reserved for internal use";return(0,tr.__call__)(e.format,e,t)}());throw u.__cause__=null,u}if((0,tr.__t__)(null===t)){var f=function(){var t=e;return(0,tr.__call__)(t._get_new_autogen_category,t)}(),d=f[0];t=f[1];e._autogen_category_counter=(0,tr.__add__)(d,1)}if((0,tr.__t__)((0,tr.__in__)(t,e.category_list))){var u=(0,tr.__call__)(tr.ValueError,null,function(){var e="Category {} is already registered in the context database";return(0,tr.__call__)(e.format,e,t)}());throw u.__cause__=null,u}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,function(){for(var e,t=[],r=(0,tr.tuple)([a,i,o]),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);(0,tr.__t__)(n)&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,n))}return t}()),1)))throw(u=(0,tr.__call__)(tr.py_TypeError,null,"add_context_category(): You may only specify one of prepend=True, insert_before=... or insert_after=...")).__cause__=null,u;var p=(0,tr.dict)({macros:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],_=r,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.macroname,a]))}return t}()),environments:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=_,n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.environmentname,a]))}return t}()),specials:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=n,_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.specials_chars,a]))}return t}())});if((0,tr.__t__)(a))var h=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"listobj":e=_[n];break;case"item":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,0,t)}()};else if((0,tr.__t__)(i)){if((0,tr.__t__)((0,tr.__in__)(i,e.category_list)))var g=function(){var t=e.category_list;return(0,tr.__call__)(t.index,t,i)}();else g=0;h=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"listobj":e=_[n];break;case"item":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,g,t)}()}}else if((0,tr.__t__)(o)){if((0,tr.__t__)((0,tr.__in__)(o,e.category_list)))g=(0,tr.__add__)(function(){var t=e.category_list;return(0,tr.__call__)(t.index,t,o)}(),1);else g=(0,tr.__call__)(tr.len,null,e.category_list);h=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"listobj":e=_[n];break;case"item":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.insert,r,g,t)}()}}else h=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"listobj":e=_[n];break;case"item":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.append,r,t)}()};(0,tr.__call__)(h,null,e.category_list,t);for(var v=(0,tr.tuple)(["macros","environments","specials"]),m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m);(0,tr.__call__)(h,null,(0,tr.__getitem__)(e.lookup_chain_maps,y).maps,(0,tr.__getitem__)(p,y))}(0,tr.__setitem__)(e.d,t,p)}))},get set_unknown_macro_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macrospec":t=_[n]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_macro_spec=t}))},get set_unknown_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"environmentspec":t=_[n]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_environment_spec=t}))},get set_unknown_specials_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"specialsspec":t=_[n]}}}if((0,tr.__t__)(e.frozen)){var a=(0,tr.__call__)(RuntimeError,null,"You attempted to modify a frozen LatexContextDb object.");throw a.__cause__=null,a}e.unknown_specials_spec=t}))},get categories(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.list,null,e.category_list)}))},get get_macro_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;case"raise_if_not_found":r=n[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"macros"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_macro_spec}throw t}}))},get get_environment_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"environmentname":t=n[a];break;case"raise_if_not_found":r=n[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"environments"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_environment_spec}throw t}}))},get get_specials_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"specials_chars":t=n[a];break;case"raise_if_not_found":r=n[a]}}}try{return(0,tr.__getitem__)((0,tr.__getitem__)(e.lookup_chain_maps,"specials"),t)}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){if((0,tr.__t__)(r))throw t.__cause__=null,t;return e.unknown_specials_spec}throw t}}))},get test_for_specials(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"pos":r=a[i];break;case"parsing_state":_=a[i]}}}for(var o=0,l=null,s=e.category_list,c=0;c<(0,tr.len)(s);c++)for(var u=(0,tr.__getitem__)(s,c),f=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,u),"specials");return(0,tr.__call__)(t.py_keys,t)}(),d=0;d<(0,tr.len)(f);d++){var p=(0,tr.__getitem__)(f,d);if((0,tr.__t__)((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,p),o))&&function(){var e=t;return(0,tr.__call__)(e.startswith,e,p,r)}()))l=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.d,u),"specials"),p),o=(0,tr.__call__)(tr.len,null,p)}return l}))},get iter_macro_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"categories":t=_[n]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex macro spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"macros");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get iter_environment_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"categories":t=_[n]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex environment spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"environments");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get iter_specials_specs(){return(0,tr.__get__)(this,(function*(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"categories":t=_[n]}}}if((0,tr.__t__)(null===t))t=e.category_list;for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if((0,tr.__t__)(!(0,tr.__in__)(o,e.category_list))){var l=(0,tr.__call__)(tr.ValueError,null,function(){var t="Invalid latex environment spec db category: {!r} (Expected one of {!r})";return(0,tr.__call__)(t.format,t,o,e.category_list)}());throw l.__cause__=null,l}for(var s=function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,o),"specials");return(0,tr.__call__)(t.py_values,t)}(),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);yield u}}}))},get filtered_context(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=[];if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=[];if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=[];if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"keep_categories":t=i[o];break;case"exclude_categories":r=i[o];break;case"keep_which":_=i[o];break;case"create_class":n=i[o]}}}if((0,tr.__t__)(null===n))n=e.__class__;var l=(0,tr.__call__)(n,null);l.unknown_macro_spec=e.unknown_macro_spec,l.unknown_environment_spec=e.unknown_environment_spec,l.unknown_specials_spec=e.unknown_specials_spec;for(var s=(0,tr.__t__)(!(0,tr.__t__)(_))||(0,tr.__in__)("macros",_),c=(0,tr.__t__)(!(0,tr.__t__)(_))||(0,tr.__in__)("environments",_),u=(0,tr.__t__)(!(0,tr.__t__)(_))||(0,tr.__in__)("specials",_),f=e.category_list,d=0;d<(0,tr.len)(f);d++){var p=(0,tr.__getitem__)(f,d);(0,tr.__t__)((0,tr.__t__)(t)&&!(0,tr.__in__)(p,t))||((0,tr.__t__)((0,tr.__t__)(r)&&(0,tr.__in__)(p,r))||function(){var t,r=l;(0,tr.__call__)(r.add_context_category,r,p,(0,tr.__kwargtrans__)({macros:(0,tr.__t__)(s)?(t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,p),"macros"),(0,tr.__call__)(t.py_values,t)):[],environments:(0,tr.__t__)(c)?function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,p),"environments");return(0,tr.__call__)(t.py_values,t)}():[],specials:(0,tr.__t__)(u)?function(){var t=(0,tr.__getitem__)((0,tr.__getitem__)(e.d,p),"specials");return(0,tr.__call__)(t.py_values,t)}():[]}))}())}return l}))},get _get_new_autogen_category(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(;(0,tr.__t__)(!0);){var n=(0,tr.__add__)(Ki,(0,tr.__call__)(tr.str,null,e._autogen_category_counter));if((0,tr.__t__)(!(0,tr.__in__)(n,e.category_list)))break;e._autogen_category_counter=(0,tr.__call__)(tr.__iadd__,null,e._autogen_category_counter,1)}return(0,tr.tuple)([e._autogen_category_counter,n])}))},get extended_with(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;var i,o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"category":t=s[c];break;case"macros":r=s[c];break;case"environments":_=s[c];break;case"specials":n=s[c];break;case"create_class":a=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if((0,tr.__t__)((0,tr.__in__)(t,e.category_list)))throw(i=tr.ValueError).__cause__=null,i;if((0,tr.__t__)(!(0,tr.__t__)(e.frozen)))throw(i=(0,tr.__call__)(RuntimeError,null,"You can only call extended_with() on frozen objects, because extended objects keep references to the original objects' data")).__cause__=null,i;if((0,tr.__t__)(null===a))a=e.__class__;var u=(0,tr.__call__)(a,null);if(u.unknown_macro_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_macro_spec",e.unknown_macro_spec)}(),u.unknown_environment_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_environment_spec",e.unknown_environment_spec)}(),u.unknown_specials_spec=function(){var t=o;return(0,tr.__call__)(t.py_pop,t,"unknown_specials_spec",e.unknown_specials_spec)}(),(0,tr.__t__)(null===r))r=[];if((0,tr.__t__)(null===_))_=[];if((0,tr.__t__)(null===n))n=[];var f=(0,tr.dict)({macros:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],_=r,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.macroname,a]))}return t}()),environments:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=_,n=0;n<(0,tr.len)(r);n++){var a=(0,tr.__getitem__)(r,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.environmentname,a]))}return t}()),specials:(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=n,_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([a.specials_chars,a]))}return t}())});if(u.category_list=e.category_list,(0,tr.__t__)((0,tr.__t__)(null===t)&&(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e.category_list),0))&&function(){var t=(0,tr.__getitem__)(e.category_list,0);return(0,tr.__call__)(t.startswith,t,Ki)}())){var d=(0,tr.__getitem__)(e.category_list,0),p=(0,tr.__call__)(tr.dict,null,e.d),h=(0,tr.__getitem__)(p,d);h=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(h,"macros")),environments:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(h,"environments")),specials:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(h,"specials"))}));return function(){var e=(0,tr.__getitem__)(h,"macros");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"macros"))}(),function(){var e=(0,tr.__getitem__)(h,"environments");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"environments"))}(),function(){var e=(0,tr.__getitem__)(h,"specials");(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(f,"specials"))}(),(0,tr.__setitem__)(p,d,h),u.d=p,u.lookup_chain_maps=(0,tr.dict)({macros:function(){var t=Mi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(h,"macros"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"macros").maps,1,null,1))}(),environments:function(){var t=Mi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(h,"environments"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"environments").maps,1,null,1))}(),specials:function(){var t=Mi;return(0,tr.__call__)(t.ChainMap,t,(0,tr.__getitem__)(h,"specials"),...(0,tr.__getslice__)((0,tr.__getitem__)(e.lookup_chain_maps,"specials").maps,1,null,1))}()}),u._autogen_category_counter=e._autogen_category_counter,u.frozen=!0,u}if((0,tr.__t__)(null===t)){var g=function(){var t=e;return(0,tr.__call__)(t._get_new_autogen_category,t)}(),v=g[0];t=g[1];u._autogen_category_counter=(0,tr.__add__)(v,1)}else u._autogen_category_counter=e._autogen_category_counter;p=(0,tr.__call__)(tr.dict,null,e.d);return(0,tr.__setitem__)(p,t,f),u.category_list=(0,tr.__add__)([t],e.category_list),u.d=p,u.lookup_chain_maps=(0,tr.dict)({macros:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"macros");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"macros"))}(),environments:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"environments");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"environments"))}(),specials:function(){var t=(0,tr.__getitem__)(e.lookup_chain_maps,"specials");return(0,tr.__call__)(t.new_child,t,(0,tr.__getitem__)(f,"specials"))}()}),u.frozen=!0,u}))}}),eo=(0,tr.__class__)("ParsingStateDeltaExtendLatexContextDb",[Sn],{__module__:Zi,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"extend_latex_context":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,eo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({_fields:(0,tr.tuple)(["extend_latex_context","set_attributes"])},r))),e.extend_latex_context=t}))},get get_updated_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_state":t=n[a];break;case"latex_walker":r=n[a]}}}if((0,tr.__t__)(e.extend_latex_context)){if((0,tr.__t__)(e.set_attributes))var i=e.set_attributes;else i=(0,tr.dict)({});var o=function(){var r=t.latex_context;return(0,tr.__call__)(r.extended_with,r,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({category:null},e.extend_latex_context)))}();return function(){var e=t;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({latex_context:o},i)))}()}return(0,tr.__t__)(e.set_attributes)?function(){var r=t;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(e.set_attributes))}():t}))}}),to=(tr=a("hoVWB"),{});(0,tr.__nest__)(to,"",m_);var ro="pylatexenc.macrospec._specclasses",_o=(function(){var e=to;(0,tr.__call__)(e.getLogger,e,ro)}(),tr.str),no=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},ao=(0,tr.__class__)("_NotSpecified",[tr.object],{__module__:ro}),io=(0,tr.dict)({macro:yi,environment:wi,specials:bi}),oo=(0,tr.__class__)("CallableSpec",[Bn],{__module__:ro,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l,s,c){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=ao;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=ao;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=ao;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;if(void 0===s||null!=s&&s.hasOwnProperty("__kwargtrans__"))s=null;if(void 0===c||null!=c&&c.hasOwnProperty("__kwargtrans__"))c=null;var u=(0,tr.dict)();if(arguments.length){var f=arguments.length-1;if(arguments[f]&&arguments[f].hasOwnProperty("__kwargtrans__")){var d=arguments[f--];for(var p in d)switch(p){case"self":e=d[p];break;case"arguments_spec_list":t=d[p];break;case"spec_node_parser_type":r=d[p];break;case"macroname":_=d[p];break;case"environmentname":n=d[p];break;case"specials_chars":a=d[p];break;case"make_arguments_parsing_state_delta":i=d[p];break;case"make_body_parsing_state_delta":o=d[p];break;case"make_after_parsing_state_delta":l=d[p];break;case"make_body_parser":s=d[p];break;case"finalize_node":c=d[p];break;default:u[p]=d[p]}delete u.__kwargtrans__}}e.arguments_spec_list=t,e.spec_node_parser_type=r,(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,_o))&&(e.spec_node_parser_type=(0,tr.__getitem__)(io,r)),(0,tr.__t__)(_!==ao)&&(e.macroname=_),(0,tr.__t__)(n!==ao)&&(e.environmentname=n),(0,tr.__t__)(a!==ao)&&(e.specials_chars=a),(0,tr.__t__)(null!==i)&&(e._fn_make_arguments_parsing_state_delta=i),(0,tr.__t__)(null!==o)&&(e._fn_make_body_parsing_state_delta=o),(0,tr.__t__)(null!==l)&&(e._fn_make_after_parsing_state_delta=l),(0,tr.__t__)(null!==s)&&(e._fn_make_body_parser=s),(0,tr.__t__)(null!==c)&&(e._fn_finalize_node=c);var h=(0,tr.__call__)(no,null,"CallableSpec_init_from_args_parser",e,t,u),g=function(){var e=u;return(0,tr.__call__)(e.py_pop,e,"body_parsing_state_delta",null)}();e.body_parsing_state_delta=g,(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,oo,"__init__"),null,e,(0,tr.__kwargtrans__)(u)),(0,tr.__t__)(!(0,tr.__t__)(h))&&((0,tr.__t__)(e.arguments_spec_list)?e.arguments_parser=(0,tr.__call__)(Li,null,t):e.arguments_parser=(0,tr.__call__)(Ti,null))}))},get get_node_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.spec_node_parser_type,r,t,e)}()}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_finalize_node"))?function(){var r=e;return(0,tr.__call__)(r._fn_finalize_node,r,t)}():t}))},get make_arguments_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"token":t=n[a];break;case"latex_walker":r=n[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_arguments_parsing_state_delta"))?function(){var _=e;return(0,tr.__call__)(_._fn_make_arguments_parsing_state_delta,_,(0,tr.__kwargtrans__)({token:t,latex_walker:r}))}():null}))},get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"nodeargd":r=i[o];break;case"arg_parsing_state_delta":_=i[o];break;case"latex_walker":n=i[o]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_body_parsing_state_delta"))?function(){var a=e;return(0,tr.__call__)(a._fn_make_body_parsing_state_delta,a,(0,tr.__kwargtrans__)({token:t,nodeargd:r,arg_parsing_state_delta:_,latex_walker:n}))}():e.body_parsing_state_delta}))},get make_after_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsed_node":t=n[a];break;case"latex_walker":r=n[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_after_parsing_state_delta"))?function(){var _=e;return(0,tr.__call__)(_._fn_make_after_parsing_state_delta,_,(0,tr.__kwargtrans__)({parsed_node:t,latex_walker:r}))}():null}))},get needs_arguments(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=e.arguments_spec_list,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);if((0,tr.__t__)(function(){var e=i.spec;return(0,tr.__call__)(e.is_required,e)}()))return!0}return!1}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"_fn_make_body_parser"))?function(){var n=e;return(0,tr.__call__)(n._fn_make_body_parser,n,t,r,_)}():(0,tr.__call__)(Ei,null,(0,tr.__kwargtrans__)({environmentname:t.arg}))}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.__class__.__name__,"("),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=(t=e.__dict__,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.startswith,e,"_")}()))&&(0,tr.__t__)(null!==o)&&!(0,tr.__in__)(i,(0,tr.tuple)(["spec_node_parser_type"])))&&function(){var e,t=r;(0,tr.__call__)(t.append,t,(e="{}={!r}",(0,tr.__call__)(e.format,e,i,o)))}()}return r}())),")")}))}}),lo=(0,tr.__class__)("MacroSpec",[oo],{__module__:ro,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,lo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:yi,macroname:t},_)))}))}}),so=(0,tr.__class__)("EnvironmentSpec",[oo],{__module__:ro,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,so,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:wi,environmentname:t},_)))}))}}),co=(0,tr.__class__)("SpecialsSpec",[oo],{__module__:ro,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,co,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:bi,specials_chars:t},_)))}))}}),uo={},fo={};(0,tr.__nest__)(fo,"",ur),(0,tr.__nest__)(uo,"",m_),(0,tr.__nest__)({},"",pr);var po="pylatexenc.latexwalker._walker",ho=Qi,go=function(){var e=uo;return(0,tr.__call__)(e.getLogger,e,po)}(),vo=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}var _=(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else _=(0,tr.tuple)();return(0,tr.__call__)(tr.tuple,null,_)},mo=fo.fn_unique_object_id,yo=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}(0,tr.tuple)([].slice.apply(arguments).slice(0,e+1))}else(0,tr.tuple)();return null},wo=(0,tr.__class__)("LatexWalker",[S_.LatexWalkerBase],{__module__:po,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"s":t=a[i];break;case"latex_context":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"default_parsing_state",null)}();if(e.s=t,e.line_number_offset=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"line_number_offset",null)}(),e.first_line_column_offset=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"first_line_column_offset",null)}(),e.column_offset=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"column_offset",null)}(),(0,tr.__t__)(null===e.line_number_offset)&&(e.line_number_offset=1),(0,tr.__t__)(null===e.first_line_column_offset)&&(e.first_line_column_offset=0),(0,tr.__t__)(null===e.column_offset)&&(e.column_offset=0),e._line_no_calc=null,e.debug_nodes=!1,(0,tr.__t__)(null!==o)){if(e.default_parsing_state=o,(0,tr.__t__)(null!==r))throw(l=(0,tr.__call__)(tr.ValueError,null,"You cannot specify both the default_parsing_state= and the latex_context= arguments")).__cause__=null,l}else{if((0,tr.__t__)(null===r)){r=(0,tr.__call__)(yo,null,"LatexWalker_init_from_macro_dict",e,_);if((0,tr.__t__)(null===r))r=(0,tr.__call__)(ho,null)}else if((0,tr.__t__)((0,tr.__in__)("macro_dict",_))){var l;throw(l=(0,tr.__call__)(tr.py_TypeError,null,"Cannot specify both `latex_context=` and `macro_dict=` arguments")).__cause__=null,l}(0,tr.__t__)(null!==r)?(!function(){var e=r;(0,tr.__call__)(e.freeze,e)}(),e.default_parsing_state=(0,tr.__call__)(_a,null,(0,tr.__kwargtrans__)({s:e.s,latex_context:r}))):e.default_parsing_state=null}e.tolerant_parsing=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"tolerant_parsing",!0)}(),e.strict_braces=function(){var e=_;return(0,tr.__call__)(e.py_pop,e,"strict_braces",!1)}(),(0,tr.__t__)((0,tr.__in__)("keep_inline_math",_))&&(!function(){var e=Mi;(0,tr.__call__)(e.pylatexenc_deprecated_2,e,"The keep_inline_math=... option in LatexWalker() has no effect in pylatexenc 2.  Please consider using the more versatile option math_mode=... in LatexNodes2Text() instead.")}(),(0,tr.__getitem__)(_,"keep_inline_math")),(0,tr.__t__)(_)&&function(){var e,t=go;(0,tr.__call__)(t.warning,t,"LatexWalker(): Unknown flag(s) encountered: %r",(e=_,(0,tr.__call__)(e.py_keys,e)))}(),(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wo,"__init__"),null,e)}))},make_latex_group_parser:Ta,make_latex_math_parser:ii,get make_parsing_state(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return function(){var r=e.default_parsing_state;return(0,tr.__call__)(r.sub_context,r,(0,tr.__kwargtrans__)(t))}()}))},get parse_flags(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.dict)({tolerant_parsing:e.tolerant_parsing,strict_braces:e.strict_braces,keep_inline_math:null})}))},get _report_ignore_parse_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"exc":t=_[n]}}}!function(){var e=go;(0,tr.__call__)(e.info,e,"Ignoring parse error (tolerant parsing mode): %s",t)}()}))},get check_tolerant_parsing_ignore_error(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"exc":t=_[n]}}}return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.tolerant_parsing))||!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,q_)))?t:(function(){var r=e;(0,tr.__call__)(r._report_ignore_parse_error,r,t)}(),null)}))},_ParsingContext:(0,tr.__class__)("_ParsingContext",[tr.object],{__module__:po,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"latex_walker":t=n[a];break;case"open_context":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wo._ParsingContext,"__init__"),null,e),e.latex_walker=t,e.open_context=r,e.recovery_from_exception=null}))},get __enter__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e}))},get __exit__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"exc_type":t=a[i];break;case"exc_value":r=a[i];break;case"exc_traceback":_=a[i]}}}if((0,tr.__t__)((0,tr.__t__)(null!==r)&&(0,tr.__call__)(tr.isinstance,null,r,G_))){var o=r;if((0,tr.__t__)(e.open_context)){var l=(u=e.open_context)[0],s=u[1];(0,tr.__t__)(null!==l)&&((0,tr.__t__)(null!==s)?function(){var t,r=o.open_contexts;(0,tr.__call__)(r.append,r,(0,tr.__call__)(vo,null,l,s.pos,...(t=e.latex_walker,(0,tr.__call__)(t.pos_to_lineno_colno,t,s.pos))))}():function(){var e=o.open_contexts;(0,tr.__call__)(e.append,e,(0,tr.__call__)(vo,null,l,null,(0,tr.__neg__)(1),(0,tr.__neg__)(1)))}())}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"pos"))&&(0,tr.__t__)(null===o.lineno)&&null===o.colno)){var c=(0,tr.__call__)(tr.getattr,null,o,"pos"),u=function(){var t=e.latex_walker;return(0,tr.__call__)(t.pos_to_lineno_colno,t,c)}();o.lineno=u[0],o.colno=u[1]}o=function(){var t=e.latex_walker;return(0,tr.__call__)(t.check_tolerant_parsing_ignore_error,t,o)}();return(0,tr.__t__)(null===o)?(e.recovery_from_exception=o,!0):null}}))},get perform_recovery_nodes_and_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"token_reader":t=_[n]}}}if((0,tr.__t__)(null===e.recovery_from_exception)){var a=(0,tr.__call__)(RuntimeError,null,"No exception had happened to try to recover nodes from");throw a.__cause__=null,a}var i=null,o=null,l=null;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_nodes")))i=e.recovery_from_exception.recovery_nodes;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_parsing_state_delta")))o=e.recovery_from_exception.recovery_parsing_state_delta;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_at_token")))l=e.recovery_from_exception.recovery_at_token;if((0,tr.__t__)(null!==l))!function(){var e=t;(0,tr.__call__)(e.move_to_token,e,l)}();else{var s=null;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e.recovery_from_exception,"recovery_past_token")))s=e.recovery_from_exception.recovery_past_token;(0,tr.__t__)(null!==s)&&function(){var e=t;(0,tr.__call__)(e.move_past_token,e,s)}()}return(0,tr.tuple)([i,o])}))}}),get new_parsing_open_context(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"open_context_name":t=n[a];break;case"open_context_token":r=n[a]}}}return function(){var _=wo;return(0,tr.__call__)(_._ParsingContext,_,e,(0,tr.tuple)([t,r]))}()}))},get make_token_reader(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pos":t=_[n]}}}var a=function(){var t=S_;return(0,tr.__call__)(t.LatexTokenReader,t,e.s,(0,tr.__kwargtrans__)({tolerant_parsing:e.tolerant_parsing}))}();return(0,tr.__t__)(null!==t)&&function(){var e=a;(0,tr.__call__)(e.move_to_pos_chars,e,t)}(),a}))},get parse_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"parser":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;case"open_context":n=i[o]}}}var l=null,s=null;if((0,tr.__t__)(null===r))l=function(){var t=e;return(0,tr.__call__)(t.make_token_reader,t)}();else l=r;if((0,tr.__t__)(null===_))s=function(){var t=e;return(0,tr.__call__)(t.make_parsing_state,t)}();else s=_;var c=null,u=null,f=(h=(0,tr.tuple)([null,null]))[0],d=h[1];if((0,tr.__t__)(n))f=(h=n)[0],d=h[1];!function(){var e=l;(0,tr.__call__)(e.cur_pos,e)}();var p=function(){var t=e;return(0,tr.__call__)(t.new_parsing_open_context,t,f,d)}();try{p.__enter__();try{var h=function(){var r=t;return(0,tr.__call__)(r.parse,r,(0,tr.__kwargtrans__)({latex_walker:e,token_reader:l,parsing_state:s}))}();c=h[0],u=h[1]}catch(e){if(!(0,tr.isinstance)(e,Y_))throw e;!function(){var e=go;(0,tr.__call__)(e.warning,e,"End of stream encountered when parsing content with %s (%s)",t.__class__.__name__,f)}();c=(h=(0,tr.tuple)([null,null]))[0],u=h[1]}p.__exit__()}catch(e){if(!p.__exit__(e.name,e,e.stack))throw e}if((0,tr.__t__)(null!==p.recovery_from_exception))h=function(){var e=p;return(0,tr.__call__)(e.perform_recovery_nodes_info,e,l)}(),c=h[0],u=h[1];return(0,tr.tuple)([c,u])}))},get make_nodes_collector(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token_reader":t=a[i];break;case"parsing_state":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}return function(){var n=S_;return(0,tr.__call__)(n.LatexNodesCollector,n,e,t,r,(0,tr.__kwargtrans__)(_))}()}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node_class":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.tuple)([function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"pos")}(),function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"pos_end",null)}(),function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"parsing_state")}()]),o=i[0],l=i[1],s=i[2];if((0,tr.__t__)((0,tr.__t__)(null===l)&&(0,tr.__t__)(null!==o)&&(0,tr.__in__)("len",r))){!function(){var e=Mi;(0,tr.__call__)(e.pylatexenc_deprecated_3,e,"make_node(..., len=..., ...); use pos_end= instead of len=")}();var c=(0,tr.__getitem__)(r,"len");l=(0,tr.__add__)(o,c)}var u=(0,tr.__call__)(t,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({pos:o,pos_end:l,parsing_state:s,latex_walker:e},r)));return(0,tr.__t__)(e.debug_nodes),u}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var e=r;return(0,tr.__call__)(e.py_pop,e,"parsing_state")}();return(0,tr.__call__)(cn,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({nodelist:t,parsing_state:i,latex_walker:e},r)))}))},get format_pos(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"pos":t=_[n]}}}if((0,tr.__t__)(null===t))return"(location unknown)";var a=function(){var r=e;return(0,tr.__call__)(r.pos_to_lineno_colno,r,t)}(),i=a[0],o=a[1];return(0,tr.__call__)($_,null,t,i,o)}))},get pos_to_lineno_colno(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"pos":t=n[a];break;case"as_dict":r=n[a]}}}return(0,tr.__t__)(null===e._line_no_calc)&&(e._line_no_calc=function(){var t=Mi;return(0,tr.__call__)(t.LineNumbersCalculator,t,e.s,(0,tr.__kwargtrans__)({line_number_offset:e.line_number_offset,first_line_column_offset:e.first_line_column_offset,column_offset:e.column_offset}))}()),function(){var _=e._line_no_calc;return(0,tr.__call__)(_.pos_to_lineno_colno,_,t,(0,tr.__kwargtrans__)({as_dict:r}))}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="<LatexWalker {}>";return(0,tr.__call__)(t.format,t,(0,tr.__call__)(mo,null,e))}()}))}}),bo={};(0,tr.__nest__)(bo,"",m_);!function(){var e=bo;(0,tr.__call__)(e.getLogger,e,"pylatexenc.latexwalker")}();var ko={},xo={},Oo={};(0,tr.__nest__)(Oo,"",ur),(0,tr.__nest__)(ko,"",m_),(0,tr.__nest__)(xo,"",pr);var Po="flm.flmenvironment",Eo=function(){var e=ko;return(0,tr.__call__)(e.getLogger,e,Po)}(),Co=Oo.fn_unique_object_id,Ao=(0,tr.__class__)("FLMParsingState",[S_.ParsingState],{__module__:Po,_fields:(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__call__)(tr.list,null,S_.ParsingState._fields),["is_block_level"])),get set_fields(){return(0,tr.__get__)(this,(function(e){var t=null,r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"is_block_level":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ao,"set_fields"),null,e,(0,tr.__kwargtrans__)(r)),e.is_block_level=t}))}}),So=(0,tr.__class__)("FLMParsingStateDeltaSetBlockLevel",[S_.ParsingStateDelta],{__module__:Po,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"is_block_level":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,So,"__init__"),null,e,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({is_block_level:t})),_fields:(0,tr.tuple)(["is_block_level"])})),e.is_block_level=t}))}}),No=(0,tr.__class__)("_NotProvided",[tr.object],{__module__:Po}),To=function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=No;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"parser":e=i[o];break;case"argname":t=i[o];break;case"is_block_level":r=i[o];break;case"flm_doc":_=i[o];break;case"parsing_state_delta":n=i[o]}}}if((0,tr.__t__)(null===n)){if((0,tr.__t__)(r===No))r=!1;if((0,tr.__t__)(null!==r))n=(0,tr.__call__)(So,null,(0,tr.__kwargtrans__)({is_block_level:r}))}else if((0,tr.__t__)((0,tr.__t__)(r!==No)&&(0,tr.__ne__)(function(){var e=n.set_attributes;return(0,tr.__call__)(e.py_get,e,"is_block_level",null)}(),r))){var l=(0,tr.__call__)(tr.ValueError,null,"You specified a parsing_state_delta= to FLMArgumentSpec(...) which might not be compatible with the provided is_block_level= arg. It's your responsibility to make sure is_block_level is correctly applied in the parsing state delta you provided, and you should set is_block_level=None here.");throw l.__cause__=null,l}var s=function(){var r=S_;return(0,tr.__call__)(r.LatexArgumentSpec,r,(0,tr.__kwargtrans__)({parser:e,argname:t,parsing_state_delta:n}))}();return s._flm_doc=_,s},Lo=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("node"===_)e=r[_]}}for(var n=function(){var t=e;return(0,tr.__call__)(t.nodeType,t)}(),a=(0,tr.__call__)(n,null,(0,tr.__kwargtrans__)((0,tr.__call__)(tr.dict,null,function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.tuple)([a,(0,tr.__call__)(tr.getattr,null,e,a)]))}return r}()))),i=(0,tr.__call__)(tr.dir,null,e),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.startswith,e,"flm")}())||function(){var e=l;return(0,tr.__call__)(e.startswith,e,"_flm")}())&&(0,tr.__call__)(tr.setattr,null,a,l,(0,tr.__call__)(tr.getattr,null,e,l))}return a},Mo=(0,tr.__class__)("BlocksBuilder",[tr.object],{__module__:Po,rx_space:function(){var e=xo;return(0,tr.__call__)(e.compile,e,"[ \\t\\n\\r]+")}(),rx_only_space:function(){var e=xo;return(0,tr.__call__)(e.compile,e,"^[ \\t\\n\\r]+$")}(),get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"latexnodelist":t=n[a];break;case"simplify_whitespace":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Mo,"__init__"),null,e),e.latexnodelist=t,e.pending_paragraph_nodes=[],e.blocks=[],e.simplify_whitespace=r}))},get flush_paragraph(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if(!(0,tr.__t__)(!(0,tr.__t__)(e.pending_paragraph_nodes))){var n=e.pending_paragraph_nodes,a=(n=function(){var t=e;return(0,tr.__call__)(t.finalize_paragraph,t,n)}(),function(){var t=N_;return(0,tr.__call__)(t.LatexNodeList,t,n,(0,tr.__kwargtrans__)({parsing_state:e.latexnodelist.parsing_state,latex_walker:e.latexnodelist.latex_walker}))}());a.flm_nodelist_finalized=!0,function(){var t=e.blocks;(0,tr.__call__)(t.append,t,a)}(),e.pending_paragraph_nodes=[]}}))},get simplify_whitespace_chars(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"chars":t=a[i];break;case"is_head":r=a[i];break;case"is_tail":_=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.simplify_whitespace)))var o=t;else o=function(){var r=e.rx_space;return(0,tr.__call__)(r.sub,r," ",t)}();if((0,tr.__t__)(r))o=function(){var e=o;return(0,tr.__call__)(e.lstrip,e)}();if((0,tr.__t__)(_))o=function(){var e=o;return(0,tr.__call__)(e.rstrip,e)}();return o}))},get finalize_paragraph(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"paragraph_nodes":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))return t;for(var a=!0,i=null,o=!1,l=null,s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(h=(0,tr.__getitem__)(c,u))[0],d=h[1];if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,s),0))&&(0,tr.__t__)(null!==l)&&(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,l,"flm_is_block_heading")))a=!0;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,d,"flm_strip_preceding_whitespace"))&&(0,tr.__call__)(tr.getattr,null,d,"flm_strip_preceding_whitespace"))&&(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(i,"is_tail",!0),(0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCharsNode)}())){var p=(0,tr.dict)({is_head:a,is_tail:!1});(0,tr.__t__)(o)&&(0,tr.__setitem__)(p,"is_head",!0),function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)([d,p,f]))}();a=!1,i=p}else if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCommentNode)}()))){if((0,tr.__t__)(null===l))l=d;a=!1,i=null}o=!1;if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,d,"flm_strip_following_whitespace"))&&(0,tr.__call__)(tr.getattr,null,d,"flm_strip_following_whitespace")))o=!0}(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(i,"is_tail",!0);for(c=s,u=0;u<(0,tr.len)(c);u++){var h,g=(h=(0,tr.__getitem__)(c,u))[0],v=(p=h[1],h[2]),m=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,g,"flm_chars_value"))?g.flm_chars_value:g.chars,y=function(){var t=e;return(0,tr.__call__)(t.simplify_whitespace_chars,t,m,(0,tr.__kwargtrans__)({is_head:(0,tr.__getitem__)(p,"is_head"),is_tail:(0,tr.__getitem__)(p,"is_tail")}))}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.getattr,null,g,"flm_chars_value",null),y))){var w=(0,tr.__call__)(Lo,null,g);w.flm_chars_value=y,(0,tr.__setitem__)(t,v,w)}}return t}))},get build_blocks(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.latexnodelist;(0,tr.assert)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.blocks),0));for(var a=n,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_level"))?(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_level"):null,s=!!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_heading");if((0,tr.__t__)(l)){if(function(){var t=e;(0,tr.__call__)(t.flush_paragraph,t)}(),(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_paragraph_break_marker"))&&(0,tr.__call__)(tr.getattr,null,o,"flm_is_paragraph_break_marker")))continue;if((0,tr.__t__)(s)){!function(){var t=e.pending_paragraph_nodes;(0,tr.__call__)(t.append,t,o)}();continue}!function(){var t=e.blocks;(0,tr.__call__)(t.append,t,o)}()}else{var c=!0;if((0,tr.__t__)(!(0,tr.__t__)(e.pending_paragraph_nodes)))c=!1;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.pending_paragraph_nodes),1))&&(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,(0,tr.__getitem__)(e.pending_paragraph_nodes,0),"flm_is_block_heading"))&&(0,tr.__call__)(tr.getattr,null,(0,tr.__getitem__)(e.pending_paragraph_nodes,0),"flm_is_block_heading")))c=!1;(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(c))&&(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCharsNode)}())&&function(){var t=e.rx_only_space;return(0,tr.__call__)(t.match,t,o.chars)}())||function(){var t=e.pending_paragraph_nodes;(0,tr.__call__)(t.append,t,o)}()}}return function(){var t=e;(0,tr.__call__)(t.flush_paragraph,t)}(),e.blocks}))}}),jo=(0,tr.__class__)("NodesFinalizer",[tr.object],{__module__:Po,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"text_processing_options":t=_[n]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,jo,"__init__"),null,e),(0,tr.__t__)(t))t=(0,tr.__call__)(tr.dict,null,t);else t=(0,tr.__call__)(tr.dict,null);var a=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"auto",!0)}();if((0,tr.__t__)((0,tr.__t__)(!0===a)||!1===a))var i=a,o=a;else if((0,tr.__t__)((0,tr.__eq__)(a,"quotes")))i=!0,o=!1;else{var l;if(!(0,tr.__t__)((0,tr.__eq__)(a,"ligatures")))throw(l=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid text_processing_options['auto']=",(0,tr.__call__)(tr.repr,null,a)))).__cause__=null,l;i=!1,o=!0}if(e.simplify_whitespace=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"simplify_whitespace",!0)}(),e.auto_unicode_quotes=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"auto_unicode_quotes",i)}(),e.ligature_unicode_quotes=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"ligature_unicode_quotes",o)}(),e.ligature_unicode_dashes=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"ligature_unicode_dashes",o)}(),e.ligature_unicode_ellipses=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"ligature_unicode_ellipses",o)}(),(0,tr.__t__)((0,tr.__call__)(tr.len,null,function(){var e=t;return(0,tr.__call__)(e.py_keys,e)}())))throw(l=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid option(s) for text_processing_options: ",(0,tr.__call__)(tr.repr,null,t)))).__cause__=null,l}))},get finalize_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"latexnodelist":t=_[n]}}}if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_nodelist_finalized"))&&(0,tr.__call__)(tr.getattr,null,t,"flm_nodelist_finalized")))return t;t.flm_nodelist_finalized=!0;var a=t.parsing_state.is_block_level;if((0,tr.__t__)(null===a))a=function(){var r=e;return(0,tr.__call__)(r.infer_is_block_level_nodelist,r,t)}();if(t.flm_is_block_level=a,(0,tr.__t__)(!(0,tr.__t__)(a)))for(var i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,l,"flm_is_block_level"))&&(0,tr.__call__)(tr.getattr,null,l,"flm_is_block_level"))){var s=(0,tr.__call__)(G_,null,(0,tr.__kwargtrans__)({msg:"Content is not allowed in inline text (not block level): {}".format(function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}()),pos:l.pos}));throw s.__cause__=null,s}}if((0,tr.__t__)(a)){var c=function(){var r=e;return(0,tr.__call__)(r.make_blocks_builder,r,t)}(),u=function(){var e=c;return(0,tr.__call__)(e.build_blocks,e)}();t.flm_blocks=u}return t}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_chars_value")))&&function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCharsNode)}())&&(t.flm_chars_value=function(){var r=e;return(0,tr.__call__)(r.process_text,r,t.chars)}()),t}))},get process_text(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"chars":t=_[n]}}}if((0,tr.__t__)(e.simplify_whitespace))t=function(){var r=e.rx_inline_space;return(0,tr.__call__)(r.sub,r," ",t)}();if((0,tr.__t__)(e.ligature_unicode_quotes))t=function(){var e=dr;return(0,tr.__call__)(e.convert_ligature_double_quotes,e,t)}();if((0,tr.__t__)(e.auto_unicode_quotes))t=function(){var e=dr;return(0,tr.__call__)(e.convert_auto_quotes,e,t)}();if((0,tr.__t__)(e.ligature_unicode_quotes))t=function(){var e=dr;return(0,tr.__call__)(e.convert_ligature_single_quotes,e,t)}();if((0,tr.__t__)(e.ligature_unicode_dashes))t=function(){var e=dr;return(0,tr.__call__)(e.convert_ligature_dashes,e,t)}();if((0,tr.__t__)(e.ligature_unicode_ellipses))t=function(){var e=dr;return(0,tr.__call__)(e.convert_ligature_ellipses,e,t)}();return t}))},get infer_is_block_level_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"latexnodelist":t=_[n]}}}for(var a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,o,"flm_is_block_level"))?(0,tr.__call__)(tr.getattr,null,o,"flm_is_block_level"):null;if((0,tr.__t__)(l))return!0}return!1}))},get make_blocks_builder(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"latexnodelist":t=_[n]}}}return(0,tr.__call__)(Mo,null,t,(0,tr.__kwargtrans__)({simplify_whitespace:e.simplify_whitespace}))}))},rx_inline_space:Mo.rx_space}),Io=(0,tr.__class__)("FLMLatexWalker",[wo],{__module__:Po,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=!1,_=null,n=null,a=null,i=null,o=(0,tr.dict)();if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"flm_text":var u=s[c];break;case"default_parsing_state":var f=s[c];break;case"flm_environment":var d=s[c];break;case"parsing_state_event_handler":t=s[c];break;case"standalone_mode":r=s[c];break;case"resource_info":_=s[c];break;case"parsing_mode":n=s[c];break;case"what":a=s[c];break;case"input_lineno_colno_offsets":i=s[c];break;default:o[c]=s[c]}delete o.__kwargtrans__}}if((0,tr.__t__)(!(0,tr.__t__)(i)))i=(0,tr.dict)({});(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Io,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({s:u,default_parsing_state:f,line_number_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"line_number_offset",null)}(),first_line_column_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"first_line_column_offset",null)}(),column_offset:function(){var e=i;return(0,tr.__call__)(e.py_get,e,"column_offset",null)}()},o))),e.flm_environment=d,e.standalone_mode=r,e.resource_info=_,e.what=a,e.parsing_mode=n,e._parsing_state_event_handler=t,e.input_lineno_colno_offsets=i}))},get parsing_state_event_handler(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)(e._parsing_state_event_handler)?e._parsing_state_event_handler:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Io,"parsing_state_event_handler"),null,e)}))},get make_nodelist(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;case"parsing_state":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Io,"make_nodelist"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({nodelist:t,parsing_state:r},_))),l=function(){var t=e.flm_environment;return(0,tr.__call__)(t.finalize_nodelist,t,o)}();if((0,tr.__t__)(null===l)){var s=(0,tr.__call__)(tr.ValueError,null,"Environment's finalize_nodelist() returned None");throw s.__cause__=null,s}return l}))},get make_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node_class":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Io,"make_node"),null,e,t,(0,tr.__kwargtrans__)(r)),o=function(){var t=e.flm_environment;return(0,tr.__call__)(t.finalize_node,t,i)}();if((0,tr.__t__)(null===o)){var l=(0,tr.__call__)(tr.ValueError,null,"Environment's finalize_node() returned None");throw l.__cause__=null,l}return o}))},get filter_whitespace_comments_nodes(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodelist":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.filter,r,(0,tr.__kwargtrans__)({node_predicate_fn:e._filter_whitespace_comments_nodes_predicate,skip_none:!0,skip_comments:!0,skip_whitespace_char_nodes:!0}))}()}))},get _filter_whitespace_comments_nodes_predicate(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return!(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_paragraph_break_marker"))&&(0,tr.__call__)(tr.getattr,null,t,"flm_is_paragraph_break_marker"))}))}}),Do=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("features"===_)e=r[_]}}for(var n=(0,tr.__call__)(tr.set,null,function(){for(var t,r=[],_=e,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,a.feature_name)}return r}()),a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(null===o.feature_dependencies))for(var l=o.feature_dependencies,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)(!(0,tr.__in__)(c,n))){var u=(0,tr.__call__)(tr.ValueError,null,"Feature {} ({}) has unmet dependency {}".format(o.feature_name,(0,tr.__call__)(tr.repr,null,o),c));throw u.__cause__=null,u}}}},Ro=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("features"===_)e=r[_]}}for(var n=(0,tr.__call__)(tr.list,null,e),a=(0,tr.dict)({}),i=n,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)((0,tr.__in__)(l.feature_name,a)))throw(v=(0,tr.__call__)(tr.ValueError,null,"Duplicate feature detected: feature {} has the same name ({}) as the as already-included feature {}".format((0,tr.__call__)(tr.repr,null,l),l.feature_name,(0,tr.__getitem__)(a,l.feature_name)))).__cause__=null,v;(0,tr.__setitem__)(a,l.feature_name,l)}!function(){var e=n;(0,tr.__call__)(e.py_sort,e,(0,tr.__kwargtrans__)({key:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("f"===_)e=r[_]}}return e.feature_name}}))}(),(0,tr.__call__)(Do,null,n);for(var s=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("f"===_)e=r[_]}}var n=(0,tr.__call__)(tr.set,null);if((0,tr.__t__)(null!==e.feature_dependencies))for(var i=e.feature_dependencies,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);!function(){var e=n;(0,tr.__call__)(e.add,e,l)}()}if((0,tr.__t__)(null!==e.feature_optional_dependencies))for(i=e.feature_optional_dependencies,o=0;o<(0,tr.len)(i);o++){var s=(0,tr.__getitem__)(i,o);(0,tr.__t__)((0,tr.__in__)(s,a))&&function(){var e=n;(0,tr.__call__)(e.add,e,s)}()}return(0,tr.__call__)(tr.sorted,null,(0,tr.__call__)(tr.list,null,n))},c=(0,tr.__call__)(tr.dict,null,function(){for(var e,t=[],r=(e=a,(0,tr.__call__)(e.py_items,e)),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),i=n[0],o=n[1];!function(){var e=t;(0,tr.__call__)(e.append,e,(0,tr.tuple)([i,(0,tr.__call__)(s,null,o)]))}()}return t}()),u=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"fparentname":e=_[n];break;case"all_feature_dependencies":t=_[n]}}}for(var a=(0,tr.__call__)(tr.set,null),i=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),o=0;o<(0,tr.len)(i);o++)for(var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1],u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u);(0,tr.__t__)((0,tr.__eq__)(f,e))&&function(){var e=a;(0,tr.__call__)(e.add,e,s)}()}return(0,tr.__call__)(tr.sorted,null,(0,tr.__call__)(tr.list,null,a))},f=[],d=function(){for(var e,t=[],r=(0,tr.__call__)(tr.py_reversed,null,n),_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(c,a.feature_name)),0))&&(e=void 0,e=t,(0,tr.__call__)(e.append,e,a))}return t}();(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,d),0));){var p=function(){var e=d;return(0,tr.__call__)(e.py_pop,e)}();!function(){var e=f;(0,tr.__call__)(e.append,e,p)}();var h=p.feature_name;for(i=(0,tr.__call__)(u,null,h,c),o=0;o<(0,tr.len)(i);o++){var g=(0,tr.__getitem__)(i,o);!function(){var e=(0,tr.__getitem__)(c,g);(0,tr.__call__)(e.remove,e,h)}(),(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(c,g)),0))&&function(){var e=d;(0,tr.__call__)(e.insert,e,0,(0,tr.__getitem__)(a,g))}()}}var v,m=[];for(i=function(){var e=c;return(0,tr.__call__)(e.py_items,e)}(),o=0;o<(0,tr.len)(i);o++){var y=(0,tr.__getitem__)(i,o),w=y[0],b=y[1];(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,b),0))&&function(){var e=m;(0,tr.__call__)(e.append,e,(0,tr.__add__)("{}  ".format(w),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=b,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,"{}".format(n))}return t}())))}()}if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,m),0)))throw(v=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("The feature dependency graph has a cycle!  Problematic dependencies:".format(),(0,tr.__call__)("; ".join,"; ",m)))).__cause__=null,v;if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,f),(0,tr.__call__)(tr.len,null,n))))throw(v=(0,tr.__call__)(RuntimeError,null,"Internal error, we didn't get all the features right when ordering them!")).__cause__=null,v;return(0,tr.tuple)([f,a])},Fo=(0,tr.__class__)("FLMEnvironment",[tr.object],{__module__:Po,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=!1,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"features":t=l[s];break;case"parsing_state":r=l[s];break;case"latex_context":_=l[s];break;case"tolerant_parsing":n=l[s];break;case"parsing_mode_deltas":a=l[s];break;case"text_processing_options":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fo,"__init__"),null,e),e.latex_context=_,e.parsing_state=r,e.parsing_mode_deltas=(0,tr.__t__)(a)?(0,tr.__call__)(tr.dict,null,a):(0,tr.dict)({});var c=(0,tr.__call__)(Ro,null,t);if(e.features=c[0],e.features_by_name=c[1],e.tolerant_parsing=n,e.nodes_finalizer=(0,tr.__call__)(jo,null,(0,tr.__kwargtrans__)({text_processing_options:i})),(0,tr.__t__)(null===e.parsing_state.latex_context)){for(var u=e.features,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=function(){var e=d;return(0,tr.__call__)(e.add_latex_context_definitions,e)}();if((0,tr.__t__)(null!==p)){p=(0,tr.__call__)(tr.dict,null,p);(0,tr.__t__)((0,tr.__call__)(tr.len,null,p))&&(function(){var e=p;(0,tr.__call__)(e.py_update,e,(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({prepend:!0})))}(),function(){var t=e.latex_context;(0,tr.__call__)(t.add_context_category,t,"feature--{}".format(d.feature_name),(0,tr.__kwargtrans__)(p))}())}}!function(){var t=e.latex_context;(0,tr.__call__)(t.freeze,t)}(),e.parsing_state.latex_context=e.latex_context}else if((0,tr.__t__)(null!==e.latex_context)){var h=(0,tr.__call__)(RuntimeError,null,"The specified `parsing_state` instance already has a latex_context set");throw h.__cause__=null,h}}))},get supports_feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__t__)((0,tr.__in__)(t,e.features_by_name))&&null!==(0,tr.__getitem__)(e.features_by_name,t)}))},get feature(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"feature_name":t=_[n]}}}return(0,tr.__getitem__)(e.features_by_name,t)}))},parsing_state_event_handler:null,get make_latex_walker(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=null,n=null,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"flm_text":t=l[s];break;case"standalone_mode":var c=l[s];break;case"is_block_level":var u=l[s];break;case"parsing_mode":r=l[s];break;case"resource_info":_=l[s];break;case"tolerant_parsing":n=l[s];break;case"what":a=l[s];break;case"input_lineno_colno_offsets":i=l[s]}}}var f=function(){var t=e;return(0,tr.__call__)(t.make_parsing_state,t,(0,tr.__kwargtrans__)({is_block_level:u,parsing_mode:r}))}();if((0,tr.__t__)(null===n))n=e.tolerant_parsing;return(0,tr.__call__)(Io,null,(0,tr.__kwargtrans__)({flm_text:t,default_parsing_state:f,tolerant_parsing:n,flm_environment:e,standalone_mode:c,resource_info:_,what:a,parsing_state_event_handler:e.parsing_state_event_handler,input_lineno_colno_offsets:i}))}))},get define_parsing_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"parsing_mode":t=n[a];break;case"parsing_mode_delta":r=n[a]}}}if((0,tr.__t__)((0,tr.__in__)(t,e.parsing_mode_deltas))){var i=(0,tr.__call__)(tr.ValueError,null,"Parsing mode {} already defined!".format(t));throw i.__cause__=null,i}(0,tr.__setitem__)(e.parsing_mode_deltas,t,r)}))},get make_parsing_state(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"is_block_level":t=n[a];break;case"parsing_mode":r=n[a]}}}var i=e.parsing_state;if((0,tr.__t__)(null!==r)){try{var o=(0,tr.__getitem__)(e.parsing_mode_deltas,r)}catch(e){if((0,tr.isinstance)(e,tr.KeyError)){var l=(0,tr.__call__)(tr.ValueError,null,"Invalid parsing_mode {}".format(r));throw l.__cause__=null,l}throw e}if((0,tr.__t__)(null!==o))i=function(){var e=o;return(0,tr.__call__)(e.get_updated_parsing_state,e,i,(0,tr.__kwargtrans__)({latex_walker:null}))}()}var s=(0,tr.dict)({});return(0,tr.__t__)(null!==t)&&(0,tr.__setitem__)(s,"is_block_level",t),function(){var e=i;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)(s))}()}))},get make_fragment(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"flm_text":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,ui))){for(var i=t,o=(0,tr.tuple)(["is_block_level","standalone_mode"]),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(s,r))&&(0,tr.__t__)(null!==(0,tr.__getitem__)(r,s))&&(0,tr.__ne__)((0,tr.__getitem__)(r,s),(0,tr.__call__)(tr.getattr,null,i,s)))){var c=(0,tr.__call__)(tr.ValueError,null,"make_fragment(): FLMFragment instance specified but its {} ({}) differs with requested {} ({})".format(s,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,i,s)),s,(0,tr.__getitem__)(r,s)));throw c.__cause__=null,c}}return i}try{return(0,tr.__call__)(ui,null,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environment:e},r)))}catch(c){throw(0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.py_get,e,"silent",!1)}()))&&function(){var e,_,n=Eo;(0,tr.__call__)(n.error,n,(_="Error compiling fragment for {}\nContent was:\n{}\n",(0,tr.__call__)(_.format,_,(e=r,(0,tr.__call__)(e.py_get,e,"what","(unknown)")),(0,tr.__call__)($o,null,t))),(0,tr.__kwargtrans__)({exc_info:!0}))}(),c.__cause__=null,c}}))},get make_document(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_callback":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.__call__)(da,null,t,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environment:e},r)));return function(){var e=i;(0,tr.__call__)(e.initialize,e)}(),i}))},get get_features_selection(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"enable_features":t=_[n]}}}if((0,tr.__t__)(null===t))return e.features;var a=function(){for(var r,_=[],n=t,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);r=void 0,r=_,(0,tr.__call__)(r.append,r,(0,tr.__getitem__)(e.features_by_name,i))}return _}();return(0,tr.__call__)(Do,null,a),a}))},environment_get_located_error_message:null,get get_located_error_message(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"exception_object":t=_[n]}}}return(0,tr.__t__)(null!==e.environment_get_located_error_message)?function(){var r=e;return(0,tr.__call__)(r.environment_get_located_error_message,r,e,t)}():function(){var e=(0,tr.__call__)(U_,null,t);return(0,tr.__call__)(e.to_display_string,e)}()}))},get finalize_nodelist(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"nodelist":t=_[n]}}}var a=function(){var r=e.nodes_finalizer;return(0,tr.__call__)(r.finalize_nodelist,r,t)}();return a}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}t=function(){var r=e.nodes_finalizer;return(0,tr.__call__)(r.finalize_node,r,t)}();return t._flm_node_id=(0,tr.__call__)(Co,null,t),t}))}}),zo=function(){var e=null,t=!0,r="%%",_="",n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"force_block_level":e=i[o];break;case"enable_comments":t=i[o];break;case"comment_start":r=i[o];break;case"extra_forbidden_characters":_=i[o];break;case"dollar_inline_math_mode":n=i[o]}}}var l=(0,tr.__call__)(tr.str,null,_);if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(n))&&!(0,tr.__in__)("$",l)))l=(0,tr.__call__)(tr.__iadd__,null,l,"$");if((0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(t))||(0,tr.__ne__)(r,"%"))&&!(0,tr.__in__)("%",l)))l=(0,tr.__call__)(tr.__iadd__,null,l,"%");var s=[(0,tr.tuple)(["\\(","\\)"])];return(0,tr.__t__)(n)&&function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)(["$","$"]))}(),(0,tr.__call__)(Ao,null,(0,tr.__kwargtrans__)({is_block_level:e,latex_context:null,enable_comments:t,comment_start:r,latex_inline_math_delimiters:s,latex_display_math_delimiters:[(0,tr.tuple)(["\\[","\\]"])],forbidden_characters:l}))},Bo=(0,tr.__class__)("FLMLatexWalkerMathContextParsingStateEventHandler",[S_.LatexWalkerParsingStateEventHandler],{__module__:Po,math_mode_extend_context:(0,tr.dict)({unknown_macro_spec:function(){var e=pi;return(0,tr.__call__)(e.MacroSpec,e,"")}(),unknown_environment_spec:function(){var e=pi;return(0,tr.__call__)(e.EnvironmentSpec,e,"")}(),unknown_specials_spec:function(){var e=pi;return(0,tr.__call__)(e.SpecialsSpec,e,"")}()}),get enter_math_mode(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"math_mode_delimiter":t=n[a];break;case"trigger_token":r=n[a]}}}var i=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!0,math_mode_delimiter:t}));return function(){var t=pi;return(0,tr.__call__)(t.ParsingStateDeltaExtendLatexContextDb,t,(0,tr.__kwargtrans__)({set_attributes:i,extend_latex_context:e.math_mode_extend_context}))}()}))},get leave_math_mode(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"trigger_token":t=_[n]}}}return function(){var e=pi;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({in_math_mode:!1,math_mode_delimiter:null})),extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({unknown_macro_spec:null,unknown_environment_spec:null,unknown_specials_spec:null}))}))}()}))}}),qo=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"environment":e=_[n];break;case"exception_object":t=_[n]}}}var a=null,i=t.error_type_info;if((0,tr.__t__)(i)){var o=(0,tr.__getitem__)(i,"what");if((0,tr.__t__)((0,tr.__eq__)(o,"token_forbidden_character")))if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(i,"forbidden_character"),"%")))a="Single percent signs are not allowed here. Use \\% to typeset a literal percent sign, and %% to start a comment.";else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(i,"forbidden_character"),"$")))a="You can't use $ here. LaTeX math should be typeset using \\(...\\) for inline math and \\[...\\] for unnumbered display equations. Use \\$ for a literal dollar sign."}return a},Vo=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"argvalue":e=n[a];break;case"latex_walker":t=n[a];break;case"parsing_state":r=n[a]}}}if((0,tr.__t__)(null===e))return null;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str)))e=function(){var _=t;return(0,tr.__call__)(_.make_node,_,N_.LatexCharsNode,(0,tr.__kwargtrans__)({chars:e,pos:null,pos_end:null,parsing_state:r}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,N_.LatexGroupNode)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,N_.LatexNodeList)))var i=e;else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.list)))i=function(){var _=t;return(0,tr.__call__)(_.make_nodelist,_,e,(0,tr.__kwargtrans__)({parsing_state:r}))}();else i=function(){var _=t;return(0,tr.__call__)(_.make_nodelist,_,[e],(0,tr.__kwargtrans__)({parsing_state:r}))}();var o=function(){var e=t;return(0,tr.__call__)(e.make_node,e,N_.LatexGroupNode,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["",""]),nodelist:i,pos:i.pos,pos_end:i.pos_end,parsing_state:r}))}();return o},Go=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"flm_spec":e=_[n];break;case"args":t=_[n];break;case"latex_walker":var a=_[n];break;case"parsing_state":var i=_[n]}}}var o=function(){for(var t,r=[],_=e.arguments_spec_list,n=0;n<(0,tr.len)(_);n++){(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,null)}return r}();if((0,tr.__t__)(null===t))return o;for(var l=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){for(var c=(h=(0,tr.__getitem__)(l,s))[0],u=h[1],f=null,d=(0,tr.__call__)(tr.enumerate,null,e.arguments_spec_list),p=0;p<(0,tr.len)(d);p++){var h,g=(h=(0,tr.__getitem__)(d,p))[0],v=h[1];if((0,tr.__t__)((0,tr.__eq__)(v.argname,c))){f=g;break}}if((0,tr.__t__)(null===f)){!function(){var t=Eo;(0,tr.__call__)(t.error,t,"Cannot find argument %r in spec %r",c,e.arguments_spec_list)}();var m=(0,tr.__call__)(tr.ValueError,null,"No argument named {} in spec".format(c));throw m.__cause__=null,m}(0,tr.__setitem__)(o,f,(0,tr.__call__)(Vo,null,u,a,i))}return o},Uo=function(e,t){var r=null,_=null,n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"node_type":e=i[o];break;case"flm_spec":t=i[o];break;case"args":r=i[o];break;case"latex_walker":var l=i[o];break;case"parsing_state":var s=i[o];break;case"body_nodelist":_=i[o];break;case"node_kwargs":n=i[o]}}}var c=(0,tr.dict)({pos:null,pos_end:null});if((0,tr.__t__)(e===N_.LatexMacroNode)){if((0,tr.__setitem__)(c,"macroname",t.macroname),(0,tr.__t__)(null!==_))throw(u=(0,tr.__call__)(tr.ValueError,null,"For a LatexMacroNode you must have body_nodelist=None")).__cause__=null,u}else if((0,tr.__t__)(e===N_.LatexEnvironmentNode))(0,tr.__setitem__)(c,"environmentname",t.environmentname);else if((0,tr.__t__)(e===N_.LatexSpecialsNode)){var u;if((0,tr.__setitem__)(c,"specials_chars",t.specials_chars),(0,tr.__t__)(null!==_))throw(u=(0,tr.__call__)(tr.ValueError,null,"For a LatexSpecialsNode you must have body_nodelist=None")).__cause__=null,u}var f=(0,tr.__call__)(Go,null,t,r,(0,tr.__kwargtrans__)({latex_walker:l,parsing_state:s})),d=function(){var e=N_;return(0,tr.__call__)(e.ParsedArguments,e,(0,tr.__kwargtrans__)({argnlist:f,arguments_spec_list:t.arguments_spec_list}))}();(0,tr.__t__)(null!==_)&&(0,tr.__setitem__)(c,"nodelist",_),(0,tr.__t__)(null!==n)&&function(){var e=c;(0,tr.__call__)(e.py_update,e,n)}();var p=function(){var r=l;return(0,tr.__call__)(r.make_node,r,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({spec:t,nodeargd:d,parsing_state:s},c)))}();p=function(){var e=t;return(0,tr.__call__)(e.finalize_node,e,p)}();return p},$o=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=100;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"maxlen":t=_[n]}}}e=(0,tr.__call__)(tr.str,null,e);return(0,tr.__add__)((0,tr.__getslice__)(e,0,t,1),(0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,e),t))?"":"")},Wo={};t(Wo,"logger",(()=>Xo)),t(Wo,"FLMSpecInfo",(()=>Zo)),t(Wo,"FLMMacroSpecBase",(()=>Ko)),t(Wo,"FLMEnvironmentSpecBase",(()=>Jo)),t(Wo,"FLMSpecialsSpecBase",(()=>Qo)),t(Wo,"make_verb_argument",(()=>el)),t(Wo,"FLMSpecInfoConstantValue",(()=>tl)),t(Wo,"ConstantValueMacro",(()=>rl)),t(Wo,"ConstantValueSpecials",(()=>_l)),t(Wo,"text_arg",(()=>nl)),t(Wo,"label_arg",(()=>al)),t(Wo,"helper_collect_labels",(()=>il)),t(Wo,"TextFormatMacro",(()=>ol)),t(Wo,"SemanticBlockEnvironment",(()=>ll)),t(Wo,"FLMSpecInfoParagraphBreak",(()=>sl)),t(Wo,"ParagraphBreakSpecials",(()=>cl)),t(Wo,"ParagraphBreakMacro",(()=>ul)),t(Wo,"FLMSpecInfoError",(()=>fl)),t(Wo,"FLMMacroSpecError",(()=>dl)),t(Wo,"FLMEnvironmentSpecError",(()=>pl)),t(Wo,"FLMSpecialsSpecError",(()=>hl)),t(Wo,"ParsedArgumentsInfo",(()=>Pn)),t(Wo,"ParsingStateDeltaChained",(()=>Tn)),t(Wo,"LatexWalkerLocatedError",(()=>V_)),t(Wo,"macrospec",(()=>pi)),t(Wo,"LatexWalkerParseError",(()=>G_)),t(Wo,"FLMArgumentSpec",(()=>To)),t(Wo,"FLMParsingStateDeltaSetBlockLevel",(()=>So)),t(Wo,"latexnodes_parsers",(()=>pa));tr=a("hoVWB");var Ho={};(0,tr.__nest__)(Ho,"",m_);var Yo="flm.flmspecinfo",Xo=function(){var e=Ho;return(0,tr.__call__)(e.getLogger,e,Yo)}(),Zo=(0,tr.__class__)("FLMSpecInfo",[oo],{__module__:Yo,delayed_render:!1,is_block_level:!1,is_block_heading:!1,is_paragraph_break_marker:!1,allowed_in_standalone_mode:!1,body_contents_is_block_level:null,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"spec_node_parser_type":var i=n[a];break;case"arguments_spec_list":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:t,spec_node_parser_type:i},r)))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Reimplement me!");throw i.__cause__=null,i}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Element {} cannot be placed here, render() not reimplemented.".format(t));throw i.__cause__=null,i}))},get finalize_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=t.latex_walker.standalone_mode;if((0,tr.__t__)((0,tr.__t__)(a)&&!(0,tr.__t__)(e.allowed_in_standalone_mode))){var i=(0,tr.__call__)(G_,null,"{} is not allowed here (standalone mode).".format(function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()),(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}t.flm_specinfo=e;try{!function(){var r=e;(0,tr.__call__)(r.postprocess_parsed_node,r,t)}()}catch(i){if((0,tr.isinstance)(i,V_)){var o=i;throw function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=o).__cause__=null,l}if((0,tr.isinstance)(i,tr.ValueError)){var l;o=i;throw(l=(0,tr.__call__)(G_,null,(0,tr.__call__)(tr.str,null,o),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,l}if((0,tr.isinstance)(i,tr.Exception)){o=i;throw function(){var e=Xo;(0,tr.__call__)(e.error,e,"Internal Parse Error! {}".format(o),(0,tr.__kwargtrans__)({exc_info:!0}))}(),function(){var e,r=Xo;(0,tr.__call__)(r.error,r,"Happened @{},  node: {}".format((0,tr.__call__)(tr.repr,null,(e=t.latex_walker,(0,tr.__call__)(e.pos_to_lineno_colno,e,t.pos))),function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()))}(),i.__cause__=null,i}throw i}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_block_level")))&&null!==e.is_block_level)&&(t.flm_is_block_level=e.is_block_level),(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_block_heading")))&&(t.flm_is_block_heading=e.is_block_heading),(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_paragraph_break_marker")))&&(t.flm_is_paragraph_break_marker=e.is_paragraph_break_marker),(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_SUBSTITUTE_NODE"))&&null!==t.flm_SUBSTITUTE_NODE)){var s=t.flm_SUBSTITUTE_NODE;return s.flm_SUBSTITUTE_FOR_NODE=t,s}return t}))},get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"token":t=i[o];break;case"nodeargd":r=i[o];break;case"arg_parsing_state_delta":_=i[o];break;case"latex_walker":n=i[o]}}}var l=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zo,"make_body_parsing_state_delta"),null,e,t,r,_,n);if((0,tr.__t__)(null===e.body_contents_is_block_level))return l;var s=(0,tr.__call__)(So,null,(0,tr.__kwargtrans__)({is_block_level:e.body_contents_is_block_level}));return(0,tr.__call__)(Tn,null,[l,s])}))}}),Ko=(0,tr.__class__)("FLMMacroSpecBase",[Zo],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ko,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:yi,macroname:t},_)))}))}}),Jo=(0,tr.__class__)("FLMEnvironmentSpecBase",[Zo],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Jo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:wi,environmentname:t},_)))}))}}),Qo=(0,tr.__class__)("FLMSpecialsSpecBase",[Zo],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"specials_chars":t=a[i];break;case"arguments_spec_list":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qo,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({arguments_spec_list:r,spec_node_parser_type:bi,specials_chars:t},_)))}))}}),el=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("value"===_)e=r[_]}}for(var n=null,a=!1,i=(0,tr.tuple)(["+","|","=",".","-","!","~",",",";",":"]),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(!(0,tr.__in__)(l,e))){n=l;a=!0;break}}if(!a){var s=(0,tr.__call__)(tr.ValueError,null,"Couldn't form literal verbatim command for value %r",e);throw s.__cause__=null,s}return(0,tr.__add__)((0,tr.__add__)(n,e),n)},tl=(0,tr.__class__)("FLMSpecInfoConstantValue",[Zo],{__module__:Yo,allowed_in_standalone_mode:!0,get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=(0,tr.__add__)("The literal character(s) \\verbcode",(0,tr.__call__)(el,null,e.value));if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,e.value),1)))n=(0,tr.__call__)(tr.__iadd__,null,n," (U+{})".format((0,tr.__call__)(tr.ord,null,e.value)));return n}))},get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tl,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.value=t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_value,t,e.value,r)}()}))}}),rl=(0,tr.__class__)("ConstantValueMacro",[tl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,rl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname","value"])}),_l=(0,tr.__class__)("ConstantValueSpecials",[tl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"specials_chars":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_l,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars","value"])}),nl=(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"text",flm_doc:"The text or FLM content to process"})),al=(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexTackOnInformationFieldMacrosParser,e,["label"],(0,tr.__kwargtrans__)({allow_multiple:!0}))}(),argname:"label",flm_doc:"A following \\verbcode+\\label{}+ macro attaches a label to this macro call"})),il=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"node_arg_label":e=n[a];break;case"allowed_prefixes":t=n[a];break;case"allow_unknown_macros":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.was_provided,t)}())))return null;for(var i=[],o=function(){var t=e;return(0,tr.__call__)(t.get_content_nodelist,t)}(),l=o,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(c.delimiters,0),"\\label"))){var u=function(){var e=c.nodelist;return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",u)))var f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,":",1)}(),d=f[0],p=f[1];else d=(f=(0,tr.tuple)([null,u]))[0],p=f[1];if((0,tr.__t__)(!(0,tr.__in__)(d,t)))throw(h=(0,tr.__call__)(G_,null,"Argument label {} has incorrect prefix {}:; expected one of {}".format(u,d,t),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,h;!function(){var e=i;(0,tr.__call__)(e.append,e,(0,tr.tuple)([d,p]))}()}else{var h;if(!(0,tr.__t__)(r))throw(h=(0,tr.__call__)(G_,null,"Bad information field macro {}".format((0,tr.__getitem__)(c.delimiters,0)),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,h}}return i},ol=(0,tr.__class__)("TextFormatMacro",[Ko],{__module__:Yo,allowed_in_standalone_mode:!0,_flm_main_text_argument:"text",get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n];break;case"text_formats":var a=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ol,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[nl]})),e.text_formats=a}))},_fields:(0,tr.tuple)(["macroname","text_formats"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)("Formats its argument using the text format(s) ",(0,tr.__call__)(" ".join," ",function(){for(var t,r=[],_=e.text_formats,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}".format(a))}return(0,tr.py_iter)(r)}()))}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["text"]))}();return function(){var t,_=r.fragment_renderer;return(0,tr.__call__)(_.render_text_format,_,e.text_formats,(t=(0,tr.__getitem__)(i,"text"),(0,tr.__call__)(t.get_content_nodelist,t)),r)}()}))}}),ll=(0,tr.__class__)("SemanticBlockEnvironment",[Jo],{__module__:Yo,allowed_in_standalone_mode:!0,is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"environmentname":t=n[a];break;case"role":var i=n[a];break;case"annotations":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ll,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t})),e.role=i,e.annotations=r}))},_fields:(0,tr.tuple)(["environmentname","role","annotations"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n="";if((0,tr.__t__)((0,tr.__t__)(null!==e.annotations)&&(0,tr.__call__)(tr.len,null,e.annotations)))n=(0,tr.__add__)((0,tr.__add__)(" and annotations [",(0,tr.__call__)(",".join,",",function(){for(var t,r=[],_=e.annotations,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__add__)((0,tr.__add__)("",a),""))}return r}())),"]");return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Formats its contents using a semantic block with role ",e.role),""),n)}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nodelist,e,t.nodelist,r)}();return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_semantic_block,t,i,(0,tr.__kwargtrans__)({role:e.role,render_context:r,annotations:e.annotations}))}()}))}}),sl=(0,tr.__class__)("FLMSpecInfoParagraphBreak",[Zo],{__module__:Yo,is_block_level:!0,is_paragraph_break_marker:!0,allowed_in_standalone_mode:!0,get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(G_,null,"Paragraph break is not allowed here",(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}))},get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Produce a paragraph break to begin a new paragraph"}))}}),cl=(0,tr.__class__)("ParagraphBreakSpecials",[sl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"specials_chars":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,cl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars"])}),ul=(0,tr.__class__)("ParagraphBreakMacro",[sl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ul,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname"])}),fl=(0,tr.__class__)("FLMSpecInfoError",[Zo],{__module__:Yo,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"error_msg":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,fl,"__init__"),null,e,(0,tr.__kwargtrans__)(r)),e.error_msg=t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}if((0,tr.__t__)(e.error_msg))var i=e.error_msg;else i="The node {} cannot be placed here.".format(function(){var e,r=(e=t,(0,tr.__call__)(e.latex_verbatim,e));return(0,tr.__call__)(r.strip,r)}());!function(){var e=Xo;(0,tr.__call__)(e.error,e,"Misplaced node: {}".format((0,tr.__call__)(tr.repr,null,t)))}();var o=(0,tr.__call__)(G_,null,i,(0,tr.__kwargtrans__)({pos:t.pos}));throw o.__cause__=null,o}))}}),dl=(0,tr.__class__)("FLMMacroSpecError",[fl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,dl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro"},r)))}))},_fields:(0,tr.tuple)(["macroname","error_msg"])}),pl=(0,tr.__class__)("FLMEnvironmentSpecError",[fl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"environmentname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,pl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,spec_node_parser_type:"environment"},r)))}))},_fields:(0,tr.tuple)(["environmentname","error_msg"])}),hl=(0,tr.__class__)("FLMSpecialsSpecError",[fl],{__module__:Yo,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"specials_chars":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,hl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({specials_chars:t,spec_node_parser_type:"specials"},r)))}))},_fields:(0,tr.tuple)(["specials_chars","error_msg"])}),gl={};(0,tr.__nest__)(gl,"",pr);var vl="flm.feature.verbatim",ml=(0,tr.__class__)("VerbatimSpecInfo",[Zo],{__module__:vl,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="text";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"annotations":t=o[l];break;case"verbatimtype":r=o[l];break;case"is_block_level":_=o[l];break;case"include_environment_begin_end":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ml,"__init__"),null,e,(0,tr.__kwargtrans__)(a)),e.annotations=t,e.verbatimtype=r,e.include_environment_begin_end=n,e.is_block_level=_}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}(0,tr.assert)((0,tr.__eq__)(t.tok,"begin_environment"));var o=t.arg;return function(){var e=pa;return(0,tr.__call__)(e.LatexVerbatimEnvironmentContentsParser,e,(0,tr.__kwargtrans__)({environment_name:o}))}()}))},get _get_verbatim_contents_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=null,i=null,o=!1,l=!1;if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,on)}())){l=!0;if((0,tr.__t__)(e.include_environment_begin_end))i=function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}();else i=function(){var e=t.nodelist;return(0,tr.__call__)(e.latex_verbatim,e)}();var s=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["verbatim_lang"]),(0,tr.__kwargtrans__)({skip_nonexistent_arguments:!0}))}();if((0,tr.__t__)((0,tr.__in__)("verbatim_lang",s)))a=function(){var e=(0,tr.__getitem__)(s,"verbatim_lang");return(0,tr.__call__)(e.get_content_as_chars,e)}()}else{o=!0,s=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["verbatim_content","verbatim_lang"]),(0,tr.__kwargtrans__)({skip_nonexistent_arguments:!0}))}(),i=function(){var e=(0,tr.__getitem__)(s,"verbatim_content");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)("verbatim_lang",s)))a=function(){var e=(0,tr.__getitem__)(s,"verbatim_lang");return(0,tr.__call__)(e.get_content_as_chars,e)}()}return(0,tr.dict)({is_inline:o,is_environment:l,verbatim_contents:i,verbatim_lang:a})}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var r=e;return(0,tr.__call__)(r._get_verbatim_contents_info,r,t)}(),o=(0,tr.__getitem__)(i,"is_inline"),l=(0,tr.__getitem__)(i,"is_environment"),s=(0,tr.__getitem__)(i,"verbatim_contents"),c=(0,tr.__getitem__)(i,"verbatim_lang"),u=(0,tr.__t__)(e.annotations)||[];return(0,tr.__t__)(null!==e.verbatimtype)&&(function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}".format(e.verbatimtype))}(),(0,tr.__t__)(o)&&function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}-inline".format(e.verbatimtype))}(),(0,tr.__t__)(l)&&function(){var t=u;(0,tr.__call__)(t.append,t,"verbatim{}-environment".format(e.verbatimtype))}()),(0,tr.__t__)(c)&&function(){var e=u;(0,tr.__call__)(e.append,e,"verbatim-lang-{}".format(c))}(),function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_verbatim,t,s,r,(0,tr.__kwargtrans__)({is_block_level:e.is_block_level,annotations:u}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"verbatim")}(),o=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"use_fvextra",null)}();if((0,tr.__t__)(!(0,tr.__t__)(o)))return!1;var l=function(){var r=e;return(0,tr.__call__)(r._get_verbatim_contents_info,r,t)}(),s=((0,tr.__getitem__)(l,"is_inline"),(0,tr.__getitem__)(l,"is_environment")),c=(0,tr.__getitem__)(l,"verbatim_contents");(0,tr.__getitem__)(l,"verbatim_lang");if((0,tr.__t__)(s))return!1;!function(){var e=r;(0,tr.__call__)(e.ensure_latex_package,e,"fvextra")}();var u=function(){var e=gl;return(0,tr.__call__)(e.sub,e,"[^a-zA-Z0-9]",(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)("\\",(n=e,(0,tr.__call__)(n.group,n)));var n}),c)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\EscVerb[formatcom=\\flmFmtVRB{",t.macroname),"}]{"),u),"}")}))},get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Typeset verbatim content of type {}.".format(e.verbatimtype)}))}}),yl=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"ismacro":e=n[a];break;case"verbatim_delimiters":t=n[a];break;case"optional_lang_arg":r=n[a]}}}var i=[];return(0,tr.__t__)(r)&&function(){var e,t=i;(0,tr.__call__)(t.append,t,(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:(e=pa,(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:!1,enable_comments:!1,enable_groups:!1}))),argname:"verbatim_lang",flm_doc:"Programming language in which to interpret the verbatim content, if applicable.  Some formatters might support syntax highlighting in the relevant language."})))}(),(0,tr.__t__)(e)&&function(){var e,r=i;(0,tr.__call__)(r.append,r,(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:(e=pa,(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.__kwargtrans__)({delimiters:t}))),argname:"verbatim_content",flm_doc:"The raw, verbatim content to typeset.  Any special characters, including \\verbcode+\\+, \\verbcode+{+, and \\verbcode+}+, will be typeset as is."})))}(),i},wl=(0,tr.__class__)("VerbatimMacro",[ml],{__module__:vl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;var _=!1,n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"verbatim_delimiters":r=i[o];break;case"optional_lang_arg":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,wl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,spec_node_parser_type:"macro",arguments_spec_list:(0,tr.__call__)(yl,null,!0,r,_)},n))),e.verbatim_delimiters=r,e.optional_lang_arg=_}))},_fields:(0,tr.tuple)(["macroname","verbatim_delimiters","optional_lang_arg","annotations","verbatimtype","is_block_level","include_environment_begin_end"])}),bl=(0,tr.__class__)("VerbatimEnvironment",[ml],{__module__:vl,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=!1,_=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"environmentname":t=a[i];break;case"optional_lang_arg":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bl,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,spec_node_parser_type:"environment",arguments_spec_list:(0,tr.__call__)(yl,null,!1,null,r)},_))),e.optional_lang_arg=r}))},_fields:(0,tr.tuple)(["environmentname","optional_lang_arg","annotations","verbatimtype","is_block_level","include_environment_begin_end"])}),kl=(0,tr.__class__)("FeatureVerbatim",[cr],{__module__:vl,feature_name:"verbatim",feature_title:"Verbatim content typesetting",verbatim_include_types:(0,tr.tuple)(["text","code","a"]),get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n="\n        You can typeset verbatim content using the \\verbcode+\\verb...+ family of\n        macros and environments.  When typesetting verbatim content, any special\n        meaning of characters in FLM is ignored.  E.g., the characters\n        \\verbcode+\\+, \\verbcode+{+, \\verbcode+}+ are typeset as is, and\n        braces don't have to be matched.\n\n        The following verbatim types are available:\n        \\begin{itemize}\n        ";if((0,tr.__t__)((0,tr.__in__)("text",e.verbatim_include_types)))var n=(0,tr.__call__)(tr.__iadd__,null,n,"\n            \\item \\verba{text}  the verbatim characters are typeset as is, with no\n                special formatting applied to them.  This verbatim type is intended\n                for inputing special characters into normal text.\n            ");if((0,tr.__t__)((0,tr.__in__)("code",e.verbatim_include_types)))n=(0,tr.__call__)(tr.__iadd__,null,n,"\n            \\item \\verba{code}  the verbatim characters are typeset as a block of\n                code, possibly to be interpreted as a given programming language.\n                Renderers should represent the content as code, e.g., with a monospaced\n                font.\n            ");if((0,tr.__t__)((0,tr.__in__)("a",e.verbatim_include_types)))n=(0,tr.__call__)(tr.__iadd__,null,n,"\n            \\item \\verba{a}  the verbatim characters are typeset as an identifier,\n                typically in italic font.  This command is intended to typeset e.g.\n                keywords or other content that isn't necessarily to be highlighted as\n                computer code.\n            ");return n=(0,tr.__call__)(tr.__iadd__,null,n,"\\end{itemize}")}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=[],a=[];return(0,tr.__t__)((0,tr.__in__)("text",e.verbatim_include_types))&&(function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)(wl,null,(0,tr.__kwargtrans__)({macroname:"verbtext"})))}(),function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.__call__)(bl,null,(0,tr.__kwargtrans__)({environmentname:"verbatimtext"})))}()),(0,tr.__t__)((0,tr.__in__)("code",e.verbatim_include_types))&&(function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)(wl,null,(0,tr.__kwargtrans__)({macroname:"verbcode",optional_lang_arg:!0,verbatimtype:"code"})))}(),function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.__call__)(bl,null,(0,tr.__kwargtrans__)({environmentname:"verbatimcode",optional_lang_arg:!0,verbatimtype:"code",is_block_level:!0})))}()),(0,tr.__t__)((0,tr.__in__)("a",e.verbatim_include_types))&&function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)(wl,null,(0,tr.__kwargtrans__)({macroname:"verba",optional_lang_arg:!0,verbatimtype:"a"})))}(),(0,tr.dict)({macros:n,environments:a})}))}}),xl=kl,Ol={};t(Ol,"optional_text_arg",(()=>Qs)),t(Ol,"thmlabel_arg",(()=>ec)),t(Ol,"TheoremEnvironment",(()=>tc)),t(Ol,"_default_theorem_environments_simpleset",(()=>rc)),t(Ol,"_default_theorem_environments_defaultset",(()=>_c)),t(Ol,"_default_theorem_environments_richset",(()=>nc)),t(Ol,"default_theorem_environments",(()=>ac)),t(Ol,"default_theorem_theorem_types",(()=>ic)),t(Ol,"default_thm_shared_counter_formatter_spec",(()=>oc)),t(Ol,"default_allowed_ref_label_prefixes",(()=>lc)),t(Ol,"FeatureTheorems",(()=>sc)),t(Ol,"FeatureClass",(()=>cc)),t(Ol,"ParsedArgumentsInfo",(()=>Pn)),t(Ol,"latexnodes_nodes",(()=>N_)),t(Ol,"ParsingStateDelta",(()=>Sn)),t(Ol,"LatexTackOnInformationFieldMacrosParser",(()=>ti)),t(Ol,"make_invocable_node_instance",(()=>Uo)),t(Ol,"macrospec",(()=>pi)),t(Ol,"FLMArgumentSpec",(()=>To)),t(Ol,"build_counter_formatter",(()=>Jl)),t(Ol,"numbering",(()=>El)),t(Ol,"flmspecinfo",(()=>Wo)),t(Ol,"headings",(()=>Pl)),t(Ol,"Feature",(()=>sr));tr=a("hoVWB");var Pl={};t(Pl,"logger",(()=>Gs)),t(Pl,"HeadingMacro",(()=>Us)),t(Pl,"_default_counter_formatter_spec",(()=>$s)),t(Pl,"_default_section_commands_by_level",(()=>Ws)),t(Pl,"_default_section_numbering_by_level",(()=>Hs)),t(Pl,"_default_section_commands_by_level_with_nomerge",(()=>Ys)),t(Pl,"_default_section_numbering_by_level_with_nomerge",(()=>Xs)),t(Pl,"FeatureHeadings",(()=>Zs)),t(Pl,"FeatureClass",(()=>Ks)),t(Pl,"ParsedArgumentsInfo",(()=>Pn)),t(Pl,"LatexArgumentSpec",(()=>L_)),t(Pl,"refs",(()=>ks)),t(Pl,"build_counter_formatter",(()=>Jl)),t(Pl,"CounterFormatter",(()=>rs)),t(Pl,"numbering",(()=>El)),t(Pl,"flmspecinfo",(()=>Wo)),t(Pl,"Feature",(()=>sr));tr=a("hoVWB");var El={};t(El,"logger",(()=>fs)),t(El,"Counter",(()=>ds)),t(El,"CounterAlias",(()=>ps)),t(El,"_CounterIface",(()=>hs)),t(El,"get_document_render_counter",(()=>gs)),t(El,"_DocCounterState",(()=>vs)),t(El,"_DocCounterStateAliasCounter",(()=>ms)),t(El,"_NumprefixAndValueForDocStateCompute",(()=>ys)),t(El,"FeatureNumbering",(()=>ws)),t(El,"FeatureClass",(()=>bs)),t(El,"ValueWithSubNums",(()=>es)),t(El,"counter",(()=>Cl)),t(El,"Feature",(()=>sr));tr=a("hoVWB");var Cl={};t(Cl,"alphacounter",(()=>Nl)),t(Cl,"Alphacounter",(()=>Tl)),t(Cl,"_romancounterchars",(()=>Ll)),t(Cl,"romancounter",(()=>Ml)),t(Cl,"Romancounter",(()=>jl)),t(Cl,"_fnsymbols",(()=>Il)),t(Cl,"fnsymbolcounter",(()=>Dl)),t(Cl,"_unicodesuperscriptdigits",(()=>Rl)),t(Cl,"_unicodesubscriptdigits",(()=>Fl)),t(Cl,"customdigitscounter",(()=>zl)),t(Cl,"unicodesuperscriptcounter",(()=>Bl)),t(Cl,"unicodesubscriptcounter",(()=>ql)),t(Cl,"standard_counter_formatters",(()=>Vl)),t(Cl,"_standard_tag_template_initials_formatters",(()=>Gl)),t(Cl,"_rx_dollar_template",(()=>Ul)),t(Cl,"_replace_dollar_template",(()=>$l)),t(Cl,"_replace_dollar_template_use_callable",(()=>Wl)),t(Cl,"_replace_dollar_template_delayed",(()=>Hl)),t(Cl,"parse_counter_format_num",(()=>Yl)),t(Cl,"_parse_counter_formatter_from_tag_template",(()=>Xl)),t(Cl,"parse_counter_format_subnum",(()=>Zl)),t(Cl,"_default_formatter_join_spec",(()=>Kl)),t(Cl,"build_counter_formatter",(()=>Jl)),t(Cl,"CounterFormatter",(()=>rs)),t(Cl,"_rx_safenumprefix",(()=>Ql)),t(Cl,"ValueWithSubNums",(()=>es)),t(Cl,"_expect_int",(()=>ns)),t(Cl,"_eqfornone",(()=>_s));tr=a("hoVWB");var Al={};(0,tr.__nest__)(Al,"",pr);var Sl="flm.counter",Nl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"n":e=_[n];break;case"lower":t=_[n]}}}e=(0,tr.__call__)(tr.__isub__,null,e,1);var a=(0,tr.__add__)(1,(0,tr.__floordiv__)(e,26)),i=(0,tr.__mod__)(e,26),o=(0,tr.__mul__)((0,tr.__call__)(tr.chr,null,(0,tr.__add__)(97,i)),a);return(0,tr.__t__)(t)?o:function(){var e=o;return(0,tr.__call__)(e.upper,e)}()},Tl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Nl,null,e,(0,tr.__kwargtrans__)({lower:!1}))},Ll=(0,tr.tuple)([(0,tr.tuple)([1e3,"M"]),(0,tr.tuple)([900,"CM"]),(0,tr.tuple)([500,"D"]),(0,tr.tuple)([400,"CD"]),(0,tr.tuple)([100,"C"]),(0,tr.tuple)([90,"XC"]),(0,tr.tuple)([50,"L"]),(0,tr.tuple)([40,"XL"]),(0,tr.tuple)([10,"X"]),(0,tr.tuple)([9,"IX"]),(0,tr.tuple)([5,"V"]),(0,tr.tuple)([4,"IV"]),(0,tr.tuple)([1,"I"])]),Ml=function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="";if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"n":e=n[a];break;case"lower":t=n[a];break;case"zero":r=n[a]}}}var i="";if((0,tr.__t__)((0,tr.__eq__)(e,0)))return r;for(var o=Ll,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__mul__)(u,(0,tr.__floordiv__)(e,c))),e=(0,tr.__mod__)(e,c)}return(0,tr.__t__)(t)?function(){var e=i;return(0,tr.__call__)(e.lower,e)}():i},jl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Ml,null,e,(0,tr.__kwargtrans__)({lower:!1}))},Il=["*","","","","",""],Dl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Il;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"n":e=_[n];break;case"symbols":t=_[n]}}}e=(0,tr.__call__)(tr.__isub__,null,e,1);var a=(0,tr.__call__)(tr.len,null,t),i=(0,tr.__add__)(1,(0,tr.__floordiv__)(e,a)),o=(0,tr.__mod__)(e,a);return(0,tr.__mul__)((0,tr.__getitem__)(t,o),i)},Rl=[(0,tr.__call__)(tr.chr,null,8304),(0,tr.__call__)(tr.chr,null,185),(0,tr.__call__)(tr.chr,null,178),(0,tr.__call__)(tr.chr,null,179),(0,tr.__call__)(tr.chr,null,8308),(0,tr.__call__)(tr.chr,null,8309),(0,tr.__call__)(tr.chr,null,8310),(0,tr.__call__)(tr.chr,null,8311),(0,tr.__call__)(tr.chr,null,8312),(0,tr.__call__)(tr.chr,null,8313)],Fl=function(){for(var e,t=[],r=0;r<10;r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.chr,null,(0,tr.__add__)(8320,r)));return t}(),zl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="0123456789";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"n":e=_[n];break;case"digits":t=_[n]}}}for(var a=(0,tr.__call__)(tr.len,null,t),i="";(0,tr.__t__)(e);){var o=(0,tr.tuple)([(0,tr.__floordiv__)(e,a),(0,tr.__mod__)(e,a)]),l=o[0],s=o[1];i=(0,tr.__add__)((0,tr.__getitem__)(t,s),i),e=l}return i},Bl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(zl,null,e,(0,tr.__kwargtrans__)({digits:Rl}))},ql=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(zl,null,e,(0,tr.__kwargtrans__)({digits:Fl}))},Vl=(0,tr.dict)({alph:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Nl,null,e,(0,tr.__kwargtrans__)({lower:!0}))},Alph:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Nl,null,e,(0,tr.__kwargtrans__)({lower:!1}))},roman:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Ml,null,e,(0,tr.__kwargtrans__)({lower:!0}))},Roman:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__call__)(Ml,null,e,(0,tr.__kwargtrans__)({lower:!1}))},arabic:tr.str,fnsymbol:Dl,unicodesuperscript:Bl,unicodesubscript:ql}),Gl=(0,tr.dict)({a:Nl,A:Tl,i:Ml,I:jl,1:tr.str}),Ul=function(){var e=Al;return(0,tr.__call__)(e.compile,e,"\\$\\{([a-zA-Z0-9_.]+)\\}")}(),$l=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"vrs":t=_[n]}}}return function(){var r=Ul;return(0,tr.__call__)(r.sub,r,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("m"===n)e=_[n]}}return(0,tr.__getitem__)(t,(a=e,(0,tr.__call__)(a.group,a,1)));var a}),e)}()},Wl=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"get_var_value":t=_[n]}}}return function(){var r=Ul;return(0,tr.__call__)(r.sub,r,(function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("m"===n)e=_[n]}}return(0,tr.__call__)(t,null,(a=e,(0,tr.__call__)(a.group,a,1)));var a}),e)}()},Hl=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"vrs":t=_[n]}}}return function(r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"arg":r=a[i];break;case"numprefix":_=a[i]}}}return(0,tr.__add__)((0,tr.__t__)(_)||"",function(){var _=Ul;return(0,tr.__call__)(_.sub,_,(function(e){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)if("m"===a)e=n[a]}}return(0,tr.__call__)((0,tr.__getitem__)(t,(i=e,(0,tr.__call__)(i.group,i,1))),null,r);var i}),e)}())}},Yl=function(e,t,r,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Vl;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=Gl;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"counter_formatter":e=a[i];break;case"named_counter_formatters":t=a[i];break;case"str_use_tag_template":r=a[i];break;case"tag_template_initials_counters":_=a[i]}}}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,e)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str))){if((0,tr.__t__)((0,tr.__in__)(e,t)))return function(r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"n":r=a[i];break;case"numprefix":_=a[i]}}}return(0,tr.__add__)((0,tr.__t__)(_)||"",(0,tr.__call__)((0,tr.__getitem__)(t,e),null,r))};if((0,tr.__t__)(r))return(0,tr.__call__)(Xl,null,e,_)}var o=null;try{o=(0,tr.__getitem__)(e,"template")}catch(s){}if((0,tr.__t__)(o)){var l=(0,tr.__getitem__)(e,"template");return(0,tr.__call__)(Hl,null,l,t)}var s=(0,tr.__call__)(tr.ValueError,null,"Invalid counter_formatter: {}".format((0,tr.__call__)(tr.repr,null,e)));throw s.__cause__=null,s},Xl=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Gl;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"tag_template":e=_[n];break;case"tag_template_initials_counters":t=_[n]}}}var a=function(){var e,r=Al;return(0,tr.__call__)(r.compile,r,(0,tr.__add__)((0,tr.__add__)("[",(0,tr.__call__)("".join,"",(e=t,(0,tr.__call__)(e.py_keys,e)))),"]"))}(),i=function(){var t=a;return(0,tr.__call__)(t.search,t,e)}();if((0,tr.__t__)(null!==i)){var o=(0,tr.__getslice__)(e,0,function(){var e=i;return(0,tr.__call__)(e.start,e)}(),1),l=(0,tr.__getslice__)(e,function(){var e=i;return(0,tr.__call__)(e.end,e)}(),null,1),s=(0,tr.__getitem__)(t,function(){var e=i;return(0,tr.__call__)(e.group,e)}());return function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"n":e=_[n];break;case"numprefix":t=_[n]}}}return(0,tr.__add__)((0,tr.__t__)(t)||"",(0,tr.__add__)((0,tr.__add__)(o,(0,tr.__call__)(s,null,e)),l))}}return function(t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"n":t=n[a];break;case"numprefix":r=n[a]}}}return e}},Zl=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("format_subnum"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,e)))return e;if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("format_num",e))&&(0,tr.__in__)("prefix",e)))var n=(0,tr.__call__)(Yl,null,(0,tr.__getitem__)(e,"format_num"));else n=(0,tr.__call__)(Yl,null,e);return function(t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var a in _)if("n"===a)t=_[a]}}return(0,tr.dict)({formatted:(0,tr.__call__)(n,null,t),prefix:(0,tr.__getitem__)(e,"prefix")})}},Kl=(0,tr.dict)({default:(0,tr.dict)({one_pre:"",one_post:"",pair_pre:"",pair_mid:" ${and}",pair_post:"",range_pre:"",range_mid:"${endash}",range_pairmid:"${sep}",range_post:"",list_pre:"",list_mid:"${sep} ",list_midlast:"${sep} ${and}",list_post:"",and:"and",sep:",",endash:"",empty:"(empty)"}),compact:(0,tr.dict)({pair_mid:",",range_mid:"",range_pairmid:",",list_mid:",",list_midlast:",",empty:"(empty)"})}),Jl=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"counter_formatter":e=_[n];break;case"default_counter_formatter_spec":t=_[n];break;case"counter_formatter_id":var a=_[n]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,rs))){var i=e;return(0,tr.__t__)(null===i.counter_formatter_id)&&(i.counter_formatter_id=a),i}if((0,tr.__t__)(null===e)){i=(0,tr.__call__)(rs,null,(0,tr.__kwargtrans__)(t));return(0,tr.__t__)(null===i.counter_formatter_id)&&(i.counter_formatter_id=a),i}t=(0,tr.__call__)(tr.dict,null,t);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str))){var o=t;return(0,tr.__setitem__)(o,"format_num",e),(0,tr.__setitem__)(o,"counter_formatter_id",a),(0,tr.__call__)(rs,null,(0,tr.__kwargtrans__)(o))}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.dict))){if((0,tr.__t__)((0,tr.__in__)("template",e))){o=t;return(0,tr.__setitem__)(o,"format_num",e),(0,tr.__setitem__)(o,"counter_formatter_id",a),(0,tr.__call__)(rs,null,(0,tr.__kwargtrans__)(o))}o=t;return(0,tr.__setitem__)(o,"counter_formatter_id",a),function(){var t=o;(0,tr.__call__)(t.py_update,t,e)}(),(0,tr.__call__)(rs,null,(0,tr.__kwargtrans__)(o))}var l=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid counter_formatter specification: ",(0,tr.__call__)(tr.repr,null,e)));throw l.__cause__=null,l},Ql=function(){var e=Al;return(0,tr.__call__)(e.compile,e,"[^A-Za-z0-9_-]+")}(),es=(0,tr.__class__)("ValueWithSubNums",[tr.object],{__module__:Sl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=(0,tr.tuple)([]);if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"subnums":r=n[a]}}}if(e.values_tuple=null,(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"values_tuple")))e.values_tuple=(0,tr.__call__)(tr.tuple,null,t.values_tuple);else{var i=[(0,tr.__call__)(ns,null,t)];i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__call__)(tr.list,null,r));e.values_tuple=(0,tr.__call__)(tr.tuple,null,i)}}))},get get_num(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__getitem__)(e.values_tuple,0)}))},get get_subnums(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__getslice__)(e.values_tuple,1,null,1)}))},get astuple(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.values_tuple}))},get targetidstr(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"numprefix":t=_[n]}}}return(0,tr.__add__)(function(){var e=Ql;return(0,tr.__call__)(e.sub,e,"-",(0,tr.__t__)(t)||"")}(),(0,tr.__call__)("-".join,"-",function(){for(var t,r=[],_=e.values_tuple,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(tr.str,null,a))}return r}()))}))},get does_immediately_succeed(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val2":t=_[n]}}}var a=(0,tr.__call__)(tr.list,null,t.values_tuple);return(0,tr.__setitem__)(a,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,a),1),(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(a,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,a),1)),1)),(0,tr.__eq__)(e.values_tuple,(0,tr.__call__)(tr.tuple,null,a))}))},get equals(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"val2":t=_[n]}}}return(0,tr.__eq__)(e.values_tuple,t.values_tuple)}))},get incremented(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"subnum_level":t=_[n]}}}if((0,tr.__t__)(null===t))t=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e.values_tuple),1);var a=(0,tr.__call__)(tr.list,null,e.values_tuple);(0,tr.__setitem__)(a,t,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(a,t),1));for(var i=(0,tr.__add__)(t,1);i<(0,tr.__call__)(tr.len,null,a);i++)(0,tr.__setitem__)(a,i,0);return(0,tr.__call__)(es,null,(0,tr.__getitem__)(a,0),(0,tr.__getslice__)(a,1,null,1))}))},get extended_by_one(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"subnum_value":t=_[n]}}}var a=(0,tr.__call__)(es,null,e);return a.values_tuple=(0,tr.__call__)(tr.tuple,null,(0,tr.__add__)((0,tr.__call__)(tr.list,null,a.values_tuple),[t])),a}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("V{",(0,tr.__call__)(tr.repr,null,e.values_tuple)),"}")}))}}),ts=e=>{let t=[...e];return t.sort(((e,t)=>((e,t)=>{for(let r=0;r<e.length&&r<t.length;++r){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.length-t.length})(e.values_tuple,t.values_tuple))),t},rs=(0,tr.__class__)("CounterFormatter",[tr.object],{__module__:Sl,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=(0,tr.tuple)([]);if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var c=arguments[s--];for(var u in c)switch(u){case"self":e=c[u];break;case"format_num":t=c[u];break;case"prefix_display":r=c[u];break;case"delimiters":_=c[u];break;case"join_spec":n=c[u];break;case"name_in_link":a=c[u];break;case"repeat_numprefix_in_range":i=c[u];break;case"counter_formatter_id":o=c[u];break;case"subnums_format_nums":l=c[u]}}}if(e.format_num=t,e._format_num_fn=(0,tr.__call__)(Yl,null,t),(0,tr.__t__)(null===r))r=(0,tr.dict)({singular:"",plural:""});else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,tr.str)))r=(0,tr.dict)({singular:r,plural:r});e.prefix_display=r,e.delimiters=(0,tr.__t__)(null!==_)?_:(0,tr.tuple)(["",""]);var f=(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(Kl,"default"));(0,tr.__t__)(null!==n)&&((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,n,tr.str))?function(){var e=f;(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(Kl,n))}():function(){var e=f;(0,tr.__call__)(e.py_update,e,n)}()),e.join_spec=function(){for(var e,t=[],r=(e=f,(0,tr.__call__)(e.py_items,e)),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=n[0],i=n[1];!function(){var e=t;(0,tr.__call__)(e.append,e,[a,(0,tr.__call__)($l,null,i,f)])}()}return(0,tr.dict)(t)}(),e.name_in_link=a,e.repeat_numprefix_in_range=i,e.subnums_format_nums=l,e._subnums_format_nums_fns=function(){for(var t,r=[],_=e.subnums_format_nums,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(Zl,null,a))}return r}(),e.counter_formatter_id=o,e._fields=(0,tr.tuple)(["format_num","prefix_display","delimiters","join_spec","name_in_link","repeat_numprefix_in_range","counter_formatter_id","subnums_format_nums"])}))},get format_number(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"n":t=a[i];break;case"numprefix":r=a[i];break;case"subnums":_=a[i]}}}var o="",l=!0;if((0,tr.__t__)(null!==t))o=(0,tr.__call__)(tr.__iadd__,null,o,function(){var _=e;return(0,tr.__call__)(_._format_num_fn,_,t,(0,tr.__kwargtrans__)({numprefix:r}))}()),l=!1;if((0,tr.__t__)((0,tr.__t__)(_)&&(0,tr.__call__)(tr.len,null,_)))for(var s=function(){var n=e;return(0,tr.__call__)(n.get_subnums_format_nums,n,t,(0,tr.__kwargtrans__)({numprefix:r,subnums:_}))}(),c=0;c<(0,tr.__call__)(tr.len,null,_);c++)if((0,tr.__t__)((0,tr.__getitem__)(_,c))){var u=(0,tr.__call__)((0,tr.__getitem__)(s,c),null,(0,tr.__getitem__)(_,c));if((0,tr.__t__)(!(0,tr.__t__)(l)))o=(0,tr.__call__)(tr.__iadd__,null,o,(0,tr.__getitem__)(u,"prefix"));o=(0,tr.__call__)(tr.__iadd__,null,o,(0,tr.__getitem__)(u,"formatted")),l=!1}return o}))},get get_subnums_format_nums(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"n":t=_[n];break;case"numprefix":_[n];break;case"subnums":_[n]}}}return e._subnums_format_nums_fns}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),")")}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var c=arguments[s--];for(var u in c)switch(u){case"self":e=c[u];break;case"value":t=c[u];break;case"numprefix":r=c[u];break;case"subnums":_=c[u];break;case"prefix_variant":n=c[u];break;case"with_delimiters":a=c[u];break;case"with_prefix":i=c[u];break;case"wrap_format_num":o=c[u];break;case"wrap_link_fn":l=c[u]}}}var f=function(){var t=e;return(0,tr.__call__)(t._get_format_pre_post,t,a,i,1,n)}(),d=f[0],p=f[1],h=f[2];if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,es))){if((0,tr.__t__)(null!==_)){var g=(0,tr.__call__)(tr.ValueError,null,"format_flm(): cannot specify both ValueWithSubNums instance and subnums= argument; got format_flm({}, subnums={})".format((0,tr.__call__)(tr.repr,null,t),(0,tr.__call__)(tr.repr,null,_)));throw g.__cause__=null,g}f=(0,tr.tuple)([function(){var e=t;return(0,tr.__call__)(e.get_num,e)}(),function(){var e=t;return(0,tr.__call__)(e.get_subnums,e)}()]),t=f[0],_=f[1]}var v=function(){var n=e;return(0,tr.__call__)(n.format_number,n,t,(0,tr.__kwargtrans__)({numprefix:r,subnums:_}))}();if((0,tr.__t__)(null!==o))v=(0,tr.__call__)(o,null,v);var m=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(d,p),v),h);return(0,tr.__t__)(null!==l)?(0,tr.__call__)(l,null,(0,tr.__kwargtrans__)({n:t,s:m,numprefix:r,subnums:_})):m}))},get _get_format_pre_post(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"with_delimiters":t=i[o];break;case"with_prefix":r=i[o];break;case"num_values":_=i[o];break;case"prefix_variant":n=i[o]}}}var l=(0,tr.tuple)(["","",""]),s=l[0],c=l[1],u=l[2];if((0,tr.__t__)(t))c=(0,tr.__getitem__)(e.delimiters,0),u=(0,tr.__getitem__)(e.delimiters,1);if((0,tr.__t__)(r)){var f=e.prefix_display;if((0,tr.__t__)((0,tr.__t__)(null!==n)&&(0,tr.__in__)(n,e.prefix_display)))f=(0,tr.__getitem__)(e.prefix_display,n);if((0,tr.__t__)((0,tr.__eq__)(_,1)))s=(0,tr.__getitem__)(f,"singular");else if((0,tr.__t__)((0,tr.__in__)(_,f)))s=(0,tr.__getitem__)(f,_);else s=(0,tr.__getitem__)(f,"plural")}return(0,tr.tuple)([s,c,u])}))},get format_many_flm(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o,l){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(void 0===o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if(void 0===l||null!=l&&l.hasOwnProperty("__kwargtrans__"))l=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var c=arguments[s--];for(var u in c)switch(u){case"self":e=c[u];break;case"py_values":t=c[u];break;case"prefix_variant":r=c[u];break;case"with_delimiters":_=c[u];break;case"with_prefix":n=c[u];break;case"wrap_link_fn":a=c[u];break;case"wrap_format_num":i=c[u];break;case"get_raw_s_items":o=c[u];break;case"s_items_join":l=c[u]}}}var f=e.join_spec,d=e.name_in_link;if((0,tr.__t__)(null===l))l=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"a":e=_[n];break;case"b":t=_[n]}}}return(0,tr.__add__)(e,t)};t=(0,tr.__call__)(tr.list,null,t);if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return(0,tr.__getitem__)(f,"empty");if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,(0,tr.__getitem__)(t,0),(0,tr.tuple)([tr.int,es]))))&&(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(t,0)),2))&&((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,(0,tr.__getitem__)((0,tr.__getitem__)(t,0),0),tr.str))||null===(0,tr.__getitem__)((0,tr.__getitem__)(t,0),0))));else t=[(0,tr.tuple)([null,t])];t=function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.tuple)([i,(0,tr.__call__)(ts,null,function(){for(var e,t=[],r=o,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(es,null,n))}return t}())]))}return r}();var p=(0,tr.__call__)(tr.sum,null,function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=(a[0],a[1]);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.len,null,i))}return r}()),h=!1;if((0,tr.__t__)((0,tr.__eq__)(p,1)))h=!0;for(var g=[],v=t,m=0;m<(0,tr.len)(v);m++){for(var y=(R=(0,tr.__getitem__)(v,m))[0],w=R[1],b=null,k=w,x=0;x<(0,tr.len)(k);x++){var O=(0,tr.__getitem__)(k,x);if((0,tr.__t__)(null===b))b=(0,tr.tuple)([O,O]);else if((0,tr.__t__)(function(){var e=O;return(0,tr.__call__)(e.does_immediately_succeed,e,(0,tr.__getitem__)(b,1))}()))b=(0,tr.tuple)([(0,tr.__getitem__)(b,0),O]);else{!function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.tuple)([y,b]))}();b=(0,tr.tuple)([O,O])}}!function(){var e=g;(0,tr.__call__)(e.append,e,(0,tr.tuple)([y,b]))}()}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),1))){y=(R=(0,tr.__getitem__)(g,0))[0];var P=R[1];if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(P,1);return(0,tr.__call__)(e.does_immediately_succeed,e,(0,tr.__getitem__)(P,0))}()))g=[(0,tr.tuple)([y,(0,tr.tuple)([(0,tr.__getitem__)(P,0),(0,tr.__getitem__)(P,0)])]),(0,tr.tuple)([y,(0,tr.tuple)([(0,tr.__getitem__)(P,1),(0,tr.__getitem__)(P,1)])])]}var E=function(t){var r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"val":t=n[a];break;case"numprefix":var o=n[a];break;case"range_from":r=n[a]}}}var l=(0,tr.__getitem__)(t.values_tuple,0),s=(0,tr.__call__)(tr.tuple,null,(0,tr.__getslice__)(t.values_tuple,1,null,1));if((0,tr.__t__)(null!==r)){o=null;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(r.values_tuple,0),l)))l=null;for(var c=(0,tr.__getslice__)(r.values_tuple,1,null,1),u=0;u<(0,tr.__call__)(tr.len,null,s);u++)(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(s,u),(0,tr.__getitem__)(c,u)))&&(0,tr.__setitem__)(s,u,null)}return(0,tr.__t__)(null!==i)?(0,tr.__call__)(i,null,function(){var t=e;return(0,tr.__call__)(t.format_number,t,l,(0,tr.__kwargtrans__)({numprefix:o,subnums:s}))}(),(0,tr.__kwargtrans__)({numprefix:o,subnums:s})):function(){var t=e;return(0,tr.__call__)(t.format_number,t,l,(0,tr.__kwargtrans__)({numprefix:o,subnums:s}))}()},C=function(t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"a":t=a[i];break;case"b":r=a[i];break;case"numprefix":_=a[i]}}}if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.equals,e,r)}()))return[(0,tr.dict)({s:(0,tr.__call__)(E,null,t,(0,tr.__kwargtrans__)({numprefix:_})),n:t,np:_})];var o=function(){var e=r;return(0,tr.__call__)(e.does_immediately_succeed,e,t)}(),l=(0,tr.__call__)(E,null,t,(0,tr.__kwargtrans__)({numprefix:_})),s=(0,tr.__call__)(E,null,r,(0,tr.__kwargtrans__)({numprefix:_,range_from:(0,tr.__t__)(!(0,tr.__t__)((0,tr.__t__)(o)||e.repeat_numprefix_in_range))?t:null}));if((0,tr.__t__)(o))var c=(0,tr.__getitem__)(f,"range_pairmid");else c=(0,tr.__getitem__)(f,"range_mid");return[(0,tr.dict)({s:(0,tr.__getitem__)(f,"range_pre"),n:!1}),(0,tr.dict)({s:l,n:t,np:_}),(0,tr.dict)({s:c,n:!1}),(0,tr.dict)({s:s,n:r,np:_}),(0,tr.dict)({s:(0,tr.__getitem__)(f,"range_post"),n:!1})]};if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),1))){y=(R=(0,tr.__getitem__)(g,0))[0],P=R[1];var A=(0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"one_pre"),n:null})],(0,tr.__call__)(C,null,...P,(0,tr.__kwargtrans__)({numprefix:y}))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"one_post"),n:null})])}else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,g),2))){var S=(R=(0,tr.__getitem__)(g,0))[0],N=R[1],T=(R=(0,tr.__getitem__)(g,1))[0],L=R[1];A=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_pre"),n:!1})],(0,tr.__call__)(C,null,...N,(0,tr.__kwargtrans__)({numprefix:S}))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_mid"),n:!1})]),(0,tr.__call__)(C,null,...L,(0,tr.__kwargtrans__)({numprefix:T}))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"pair_post"),n:!1})])}else{for(A=[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_pre"),n:!1})],v=(0,tr.__call__)(tr.enumerate,null,(0,tr.__getslice__)(g,0,(0,tr.__neg__)(1),1)),m=0;m<(0,tr.len)(v);m++){var M=(R=(0,tr.__getitem__)(v,m))[0],j=(y=(R=R[1])[0],R[1]);if((0,tr.__t__)((0,tr.__gt__)(M,0)))A=(0,tr.__call__)(tr.__iadd__,null,A,[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_mid"),n:!1})]);A=(0,tr.__call__)(tr.__iadd__,null,A,(0,tr.__call__)(C,null,...j,(0,tr.__kwargtrans__)({numprefix:y})))}var I=(R=(0,tr.__getitem__)(g,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,g),1)))[0],D=R[1];A=(0,tr.__call__)(tr.__iadd__,null,A,(0,tr.__add__)((0,tr.__add__)([(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_midlast"),n:!1})],(0,tr.__call__)(C,null,...D,(0,tr.__kwargtrans__)({numprefix:I}))),[(0,tr.dict)({s:(0,tr.__getitem__)(f,"list_post"),n:!1})]))}var R=function(){var t=e;return(0,tr.__call__)(t._get_format_pre_post,t,_,n,p,r)}(),F=R[0],z=R[1],B=R[2],q=null;S=null;if((0,tr.__t__)(!(0,tr.__t__)(d)))q=!1;else for(v=A,m=0;m<(0,tr.len)(v);m++){var V=(0,tr.__getitem__)(v,m),G=function(){var e=V;return(0,tr.__call__)(e.py_get,e,"n",null)}();if((0,tr.__t__)((0,tr.__t__)(null!==G)&&!1!==G)){q=G,S=(0,tr.__getitem__)(V,"np");break}}var U=[];(0,tr.__t__)((0,tr.__call__)(tr.len,null,F))&&function(){var e=U;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:F,n:q,np:S}))}(),function(){var e=U;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:z,n:!!(0,tr.__t__)((0,tr.__t__)(d)&&h)&&null}))}();A=(0,tr.__add__)((0,tr.__add__)(U,A),[(0,tr.dict)({s:B,n:!!(0,tr.__t__)(h)&&null})]);if((0,tr.__t__)((0,tr.__t__)(null!==a)||o)){var $=[],W=null,H=!1,Y=null;for(v=A,m=0;m<(0,tr.len)(v);m++){var X=(0,tr.__getitem__)(v,m),Z=(V=(0,tr.__getitem__)(X,"s"),function(){var e=X;return(0,tr.__call__)(e.py_get,e,"n",null)}()),K=function(){var e=X;return(0,tr.__call__)(e.py_get,e,"np",null)}();if((0,tr.__t__)((0,tr.__t__)(!1===Z)&&(0,tr.__t__)(!1===H)&&null!==W))W=(0,tr.__call__)(l,null,W,V);else if((0,tr.__t__)((0,tr.__t__)(!1!==H)&&(0,tr.__t__)(!1!==Z)&&((0,tr.__t__)(null===Z)||(0,tr.__t__)(null===H)||(0,tr.__t__)((0,tr.__eq__)(Z,H))&&(0,tr.__call__)(_s,null,K,Y)))){if((0,tr.__t__)((0,tr.__t__)(null!==Z)&&null===H))H=Z,Y=K;if((0,tr.__t__)(null===W))W=V;else W=(0,tr.__call__)(l,null,W,V)}else{(0,tr.__t__)(null!==W)&&function(){var e=$;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:W,n:H,np:Y}))}();W=V,H=Z,Y=K}}(0,tr.__t__)(null!==W)&&function(){var e=$;(0,tr.__call__)(e.append,e,(0,tr.dict)({s:W,n:H,np:Y}))}();A=$}if((0,tr.__t__)(o))return A;if((0,tr.__t__)(null!==a))var J=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}var n=(0,tr.__getitem__)((0,tr.__getitem__)(e,"n").values_tuple,0),i=(0,tr.__getslice__)((0,tr.__getitem__)(e,"n").values_tuple,1,null,1);return(0,tr.__call__)(a,null,(0,tr.__kwargtrans__)({n:n,s:(0,tr.__getitem__)(e,"s"),numprefix:(0,tr.__getitem__)(e,"np"),subnums:i}))},Q=(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=A,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__t__)((0,tr.__t__)(null!==(0,tr.__getitem__)(n,"n"))&&!1!==(0,tr.__getitem__)(n,"n"))?(0,tr.__call__)(J,null,n):(0,tr.__getitem__)(n,"s"))}return t}());else Q=(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=A,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(n,"s"))}return t}());return Q}))}}),_s=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"a":e=_[n];break;case"b":t=_[n]}}}return(0,tr.__t__)((0,tr.__t__)(null===e)&&null===t)||(0,tr.__eq__)(e,t)},ns=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("v"===_)e=r[_]}}try{return(0,tr.__call__)(tr.int,null,e)}catch(t){if((0,tr.isinstance)(t,tr.py_TypeError)){var n=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid value, expected integer: ",(0,tr.__call__)(tr.repr,null,e)));throw n.__cause__=null,n}throw t}},as={};t(as,"loads",(()=>is)),t(as,"dumps",(()=>os)),t(as,"dump",(()=>ls));tr=a("hoVWB");var is=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"s":e=_[n];break;case"object_hook":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))return function(){var t=JSON;return(0,tr.__call__)(t.parse,t,e)}();var a=e=>e instanceof Array||e instanceof Number||e instanceof String?e:t(e);return function(){var t=JSON;return(0,tr.__call__)(t.parse,t,e,a)}()},os=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"d":e=_[n];break;case"indent":t=_[n]}}}return function(){var r=JSON;return(0,tr.__call__)(r.stringify,r,e,null,t)}()},ls=function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"d":e=n[a];break;case"f":t=n[a];break;case"indent":r=n[a]}}}!function(){var _=t;(0,tr.__call__)(_.write,_,(0,tr.__call__)(os,null,e,r))}()},ss={},cs={};(0,tr.__nest__)(cs,"",m_),(0,tr.__nest__)(ss,"",as);var us="flm.feature.numbering",fs=function(){var e=cs;return(0,tr.__call__)(e.getLogger,e,us)}(),ds=(0,tr.__class__)("Counter",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"counter_formatter":t=n[a];break;case"initial_value":r=n[a]}}}e.formatter=t,e.value=r}))},get set_value(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"value":t=_[n]}}}return e.value=t,e.value}))},get step(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.value=(0,tr.__call__)(tr.__iadd__,null,e.value,1),e.value}))},get reset(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.value=e.initial_value,e.value}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}if((0,tr.__t__)(null===t))t=e.value;var i=(0,tr.dict)({with_prefix:!1});return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),function(){var r=e.formatter;return(0,tr.__call__)(r.format_flm,r,t,(0,tr.__kwargtrans__)(i))}()}))},get step_and_format_flm(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e;return(0,tr.__call__)(t.step,t)}();return(0,tr.tuple)([n,function(){var t=e;return(0,tr.__call__)(t.format_flm,t,n)}()])}))}}),ps=(0,tr.__class__)("CounterAlias",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"counter_formatter":t=n[a];break;case"alias_counter":r=n[a]}}}e.formatter=t,e.alias_counter=r}))},get _get_value(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.alias_counter.value}))},get step(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e.alias_counter;return(0,tr.__call__)(t.step,t)}()}))},get reset(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e.alias_counter;return(0,tr.__call__)(t.reset,t)}()}))},get format_flm(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}if((0,tr.__t__)(null===t))t=e.value;var i=(0,tr.dict)({with_prefix:!1});return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),function(){var r=e.formatter;return(0,tr.__call__)(r.format_flm,r,t,(0,tr.__kwargtrans__)(i))}()}))},get step_and_format_flm(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){var t=e;return(0,tr.__call__)(t.step,t)}();return(0,tr.tuple)([n,function(){var t=e;return(0,tr.__call__)(t.format_flm,t,n)}()])}))}});Object.defineProperty(ps,"value",tr.property.call(ps,ps._get_value));var hs=(0,tr.__class__)("_CounterIface",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"counter_name":t=a[i];break;case"simple_counter":r=a[i];break;case"numbering_render_manager":_=a[i]}}}e.counter_name=t,e.simple_counter=r,e.formatter=r.formatter,e.numbering_render_manager=_}))},get register_item(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"custom_label":t=_[n]}}}if((0,tr.__t__)(null!==e.numbering_render_manager))return function(){var r=e.numbering_render_manager;return(0,tr.__call__)(r.register_item,r,counter_name,(0,tr.__kwargtrans__)({custom_label:t}))}();if((0,tr.__t__)(null!==t))return(0,tr.dict)({value:null,numprefix:null,formatted_value:t});var a=function(){var t=e.simple_counter;return(0,tr.__call__)(t.step_and_format_flm,t)}(),i=a[0],o=a[1];return(0,tr.dict)({value:(0,tr.__call__)(es,null,i),numprefix:null,formatted_value:o})}))}}),gs=function(e,t,r,_,n){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"render_context":e=i[o];break;case"counter_name":t=i[o];break;case"counter_formatter":r=i[o];break;case"alias_counter":_=i[o];break;case"always_number_within":n=i[o]}}}if((0,tr.__t__)(!(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.supports_feature,t,"numbering")}()))){if((0,tr.__t__)(null!==n)){!function(){var e=fs;(0,tr.__call__)(e.error,e,"Requested always_number_within={} but 'numbering' feature is not supported; for counter_name={}.".format(n,t))}();var l=(0,tr.__call__)(tr.ValueError,null,"Counter {} cannot be numbered within {} without the 'numbering' feature enabled.".format(t,function(){var e=n;return(0,tr.__call__)(e.py_get,e,"reset_at","???")}()));throw l.__cause__=null,l}return(0,tr.__t__)(null!==_)?(0,tr.__call__)(hs,null,t,(0,tr.__kwargtrans__)({simple_counter:(0,tr.__call__)(ps,null,r,_.simple_counter)})):(0,tr.__call__)(hs,null,t,(0,tr.__kwargtrans__)({simple_counter:(0,tr.__call__)(ds,null,r)}))}var s=function(){var t=e;return(0,tr.__call__)(t.feature_render_manager,t,"numbering")}();return function(){var e=s;return(0,tr.__call__)(e.register_counter,e,t,r,(0,tr.__kwargtrans__)({alias_counter:_,always_number_within:n}))}()},vs=(0,tr.__class__)("_DocCounterState",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"formatter":t=o[l];break;case"rdr_mgr":r=o[l];break;case"counter_name":_=o[l];break;case"base_use_doc_state_keys":n=o[l];break;case"numprefix_and_value_for_doc_state":a=o[l]}}}e.formatter=t,e.rdr_mgr=r,e.counter_name=_,e.counter_by_filtered_doc_states=(0,tr.dict)({}),e.cur_filtered_doc_state=null,e.cur_counter_state=null,e.base_use_doc_state_keys=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(n)||[]),e.use_doc_state_keys=null,e.numprefix_and_value_for_doc_state=a}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n="_DocCounterState<{} {}".format(e.counter_name,(0,tr.__call__)(tr.repr,null,e.cur_counter_state));if((0,tr.__t__)(null!==e.use_doc_state_keys)){if((0,tr.__t__)((0,tr.__call__)(tr.len,null,e.use_doc_state_keys)))var n=(0,tr.__call__)(tr.__iadd__,null,n,(0,tr.__add__)((0,tr.__add__)(" ".format(),(0,tr.__call__)(", ".join,", ",e.use_doc_state_keys)),""))}else if((0,tr.__t__)((0,tr.__call__)(tr.len,null,e.base_use_doc_state_keys)))n=(0,tr.__call__)(tr.__iadd__,null,n,(0,tr.__add__)((0,tr.__add__)(" ".format(),(0,tr.__call__)(", ".join,", ",e.base_use_doc_state_keys)),""));return n=(0,tr.__call__)(tr.__iadd__,null,n,">".format())}))},get get_filtered_doc_state(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=e.rdr_mgr.render_doc_states;return function(){var t=ss;return(0,tr.__call__)(t.dumps,t,function(){for(var t,r,_=[],a=e.use_doc_state_keys,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);t=void 0,r=void 0,r=_,(0,tr.__call__)(r.append,r,(t=n,(0,tr.__call__)(t.py_get,t,o,null)))}return _}())}()}))},get register_item(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}return function(){var r=e.rdr_mgr;return(0,tr.__call__)(r.register_item,r,e.counter_name,(0,tr.__kwargtrans__)(t))}()}))},get _impl_register_item(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}!function(){var t=e;(0,tr.__call__)(t._update_state_from_doc_state,t)}(),(0,tr.__setitem__)(e.cur_counter_state,"value",function(){var t=(0,tr.__getitem__)(e.cur_counter_state,"value");return(0,tr.__call__)(t.incremented,t)}());var n=(0,tr.__getitem__)(e.cur_counter_state,"value"),a=(0,tr.__getitem__)(e.cur_counter_state,"numprefix"),i=function(){var t=e.formatter;return(0,tr.__call__)(t.format_flm,t,n,(0,tr.__kwargtrans__)({numprefix:a,with_prefix:!1}))}();return(0,tr.dict)({value:n,number:function(){var e=n;return(0,tr.__call__)(e.get_num,e)}(),subnums:function(){var e=n;return(0,tr.__call__)(e.get_subnums,e)}(),numprefix:a,formatted_value:i})}))},get _ensure_use_doc_state_keys(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__t__)(null!==e.use_doc_state_keys)||(e.use_doc_state_keys=function(){var t=e.rdr_mgr;return(0,tr.__call__)(t.compute_use_doc_state_keys,t,e.counter_name)}())}))},get _update_state_from_doc_state(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}!function(){var t=e;(0,tr.__call__)(t._ensure_use_doc_state_keys,t)}();var n=function(){var t=e;return(0,tr.__call__)(t.get_filtered_doc_state,t)}();if((0,tr.__t__)((0,tr.__eq__)(n,e.cur_filtered_doc_state)));else if((0,tr.__t__)((0,tr.__in__)(n,e.counter_by_filtered_doc_states)))e.cur_filtered_doc_state=n,e.cur_counter_state=(0,tr.__getitem__)(e.counter_by_filtered_doc_states,n);else{if(e.cur_filtered_doc_state=n,(0,tr.__t__)(e.numprefix_and_value_for_doc_state)){var a=function(){var t=e.numprefix_and_value_for_doc_state;return(0,tr.__call__)(t.compute,t,e.rdr_mgr.render_doc_states)}(),i=a[0],o=a[1];o=(0,tr.__call__)(es,null,o)}else i=null,o=(0,tr.__call__)(es,null,0);var l=(0,tr.dict)({value:o,numprefix:i});(0,tr.__setitem__)(e.counter_by_filtered_doc_states,n,l),e.cur_counter_state=l}}))},get _get_cur_counter_state(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t=e;(0,tr.__call__)(t._update_state_from_doc_state,t)}(),e.cur_counter_state}))},get get_formatted_counter_value(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var t=e;return(0,tr.__call__)(t._get_cur_counter_state,t)}();return(0,tr.__t__)((0,tr.__t__)(null===a)||!(0,tr.__t__)((0,tr.__getitem__)(a,"value")))?(function(){var t=fs;(0,tr.__call__)(t.warning,t,"Requested counter {}'s value but none was set.".format(e.counter_name))}(),""):function(){var r,_=e.formatter;return(0,tr.__call__)(_.format_flm,_,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({value:(r=(0,tr.__getitem__)(a,"value"),(0,tr.__call__)(r.get_num,r)),subnums:function(){var e=(0,tr.__getitem__)(a,"value");return(0,tr.__call__)(e.get_subnums,e)}(),numprefix:(0,tr.__getitem__)(a,"numprefix")},t)))}()}))}}),ms=(0,tr.__class__)("_DocCounterStateAliasCounter",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"alias_counter":t=a[i];break;case"formatter":r=a[i];break;case"counter_name":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ms,"__init__"),null,e),e.alias_counter=t,e.counter_name=_,e.formatter=r}))},get register_item(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var r=e.alias_counter;return(0,tr.__call__)(r.register_item,r,(0,tr.__kwargtrans__)(t))}(),i=function(){var t=e.formatter;return(0,tr.__call__)(t.format_flm,t,(0,tr.__getitem__)(a,"value"),(0,tr.__kwargtrans__)({numprefix:(0,tr.__getitem__)(a,"numprefix"),with_prefix:!1}))}();return(0,tr.__setitem__)(a,"formatted_value",i),a}))},get get_formatted_counter_value(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var t=e.alias_counter;return(0,tr.__call__)(t._get_cur_counter_state,t)}();return function(){var r,_=e.formatter;return(0,tr.__call__)(_.format_flm,_,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({value:(r=(0,tr.__getitem__)(a,"value"),(0,tr.__call__)(r.get_num,r)),subnums:function(){var e=(0,tr.__getitem__)(a,"value");return(0,tr.__call__)(e.get_subnums,e)}(),numprefix:(0,tr.__getitem__)(a,"numprefix")},t)))}()}))}}),ys=(0,tr.__class__)("_NumprefixAndValueForDocStateCompute",[tr.object],{__module__:us,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"numprefix_for_doc_state_fn":t=o[l];break;case"counter_name":r=o[l];break;case"counters":_=o[l];break;case"number_within":n=o[l];break;case"value_for_doc_state_fn":a=o[l]}}}e.numprefix_for_doc_state_fn=t,e.counter_name=r,e.counters=_,e.number_within=n,e.value_for_doc_state_fn=a}))},get compute(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"rs":t=_[n]}}}if((0,tr.__t__)(null!==e.numprefix_for_doc_state_fn))var a=function(){var r=e;return(0,tr.__call__)(r.numprefix_for_doc_state_fn,r,t,e)}();else if((0,tr.__t__)((0,tr.__in__)(e.counter_name,e.number_within))){var i=(0,tr.__getitem__)((0,tr.__getitem__)(e.number_within,e.counter_name),"numprefix");if((0,tr.__t__)(null===i))i="";if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,i)))a=(0,tr.__call__)(i,null,(0,tr.__kwargtrans__)({counters:e.counters}));else try{a=function(){var t=Cl;return(0,tr.__call__)(t._replace_dollar_template_use_callable,t,i,e._get_counter_value)}()}catch(t){if((0,tr.isinstance)(t,tr.KeyError)){var o=t,l=(0,tr.__call__)(tr.ValueError,null,"In numprefix_template of number_within for {}: Cannot find value for counter: {}".format(e.counter_name,o));throw l.__cause__=null,l}throw t}}else a=null;if((0,tr.__t__)(null!==e.value_for_doc_state_fn))var s=function(){var r=e;return(0,tr.__call__)(r.value_for_doc_state_fn,r,t,e)}();else s=0;return(0,tr.tuple)([a,s])}))},get _get_counter_value(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"dcname":t=_[n]}}}var a=(0,tr.__getitem__)(e.counters,t);return function(){var e=a;return(0,tr.__call__)(e.get_formatted_counter_value,e,(0,tr.__kwargtrans__)({with_prefix:!1}))}()}))}}),ws=(0,tr.__class__)("FeatureNumbering",[sr],{__module__:us,feature_name:"numbering",feature_title:"Numbering for figures, sections, equations, theorems, and more",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:us,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"number_within":t=_[n]}}}if(e.counters=(0,tr.dict)({}),e.render_doc_states=(0,tr.__call__)(tr.dict,null),e.render_doc_states_clear_dependants=(0,tr.__call__)(tr.dict,null),(0,tr.__t__)(null!==t)?e.number_within=t:e.number_within=e.feature.number_within,(0,tr.__t__)(null!==e.number_within))for(var a=function(){var t=e.number_within;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=(o[0],o[1]);if((0,tr.__t__)(!(0,tr.__in__)("reset_at",l))){var s=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("numering feature config: number_within should be a dict of the type dict(equation=dict(reset_at='section', numprefix='${{subsection}}.'), ...).' .  Got ",(0,tr.__call__)(tr.repr,null,e.number_within)));throw s.__cause__=null,s}}}))},get register_counter(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null,a=null,i=null,o=null;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"counter_name":t=s[c];break;case"counter_formatter":r=s[c];break;case"alias_counter":_=s[c];break;case"always_number_within":n=s[c];break;case"use_doc_state_keys":a=s[c];break;case"numprefix_for_doc_state_fn":i=s[c];break;case"value_for_doc_state_fn":o=s[c]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))throw(u=(0,tr.__call__)(tr.ValueError,null,"register_counter(), please specify a counter_name".format())).__cause__=null,u;if((0,tr.__t__)((0,tr.__in__)(t,e.counters)))throw(u=(0,tr.__call__)(tr.ValueError,null,"Counter {} already registered!".format(t))).__cause__=null,u;if((0,tr.__t__)(null!==n)){var u;if((0,tr.__t__)(_))throw(u=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("register_counter(): Cannot specify both alias_counter and always_number_within, got ","alias_counter={} and always_number_within={}".format(_,n)))).__cause__=null,u;(0,tr.__t__)((0,tr.__in__)(t,e.number_within))?(0,tr.__setitem__)((0,tr.__getitem__)(e.number_within,t),"reset_at",(0,tr.__getitem__)(n,"reset_at")):(0,tr.__setitem__)(e.number_within,t,(0,tr.dict)({reset_at:(0,tr.__getitem__)(n,"reset_at"),numprefix:(0,tr.__getitem__)(n,"numprefix")}))}if((0,tr.__t__)(_))return(0,tr.__setitem__)(e.counters,t,(0,tr.__call__)(ms,null,(0,tr.__kwargtrans__)({alias_counter:_,formatter:r,counter_name:t}))),(0,tr.__getitem__)(e.counters,t);var f=(0,tr.__call__)(ys,null,(0,tr.__kwargtrans__)({numprefix_for_doc_state_fn:i,counter_name:t,counters:e.counters,number_within:e.number_within,value_for_doc_state_fn:o})),d=(0,tr.__call__)(vs,null,(0,tr.__kwargtrans__)({formatter:r,rdr_mgr:e,counter_name:t,base_use_doc_state_keys:a,numprefix_and_value_for_doc_state:f}));return(0,tr.__setitem__)(e.counters,t,d),d}))},get _number_within_parent_counters(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"c":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__in__)(t,e.number_within)))return[];for(var a=[i=(0,tr.__getitem__)((0,tr.__getitem__)(e.number_within,t),"reset_at")];(0,tr.__t__)((0,tr.__in__)(i,e.number_within));){var i=(0,tr.__getitem__)((0,tr.__getitem__)(e.number_within,i),"reset_at");!function(){var e=a;(0,tr.__call__)(e.append,e,i)}()}return a}))},get compute_use_doc_state_keys(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"counter_name":t=_[n]}}}for(var a=(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(e.counters,t).base_use_doc_state_keys),i=function(){var r=e;return(0,tr.__call__)(r._number_within_parent_counters,r,t)}(),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);!function(){var e=a;(0,tr.__call__)(e.append,e,"cnt-{}".format(l))}()}return a}))},get set_render_doc_state(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"state_type":t=a[i];break;case"state_value":r=a[i];break;case"clear_self_upon_change":_=a[i]}}}if((0,tr.__setitem__)(e.render_doc_states,t,r),(0,tr.__t__)((0,tr.__in__)(t,e.render_doc_states_clear_dependants)))for(var o=(0,tr.__getitem__)(e.render_doc_states_clear_dependants,t),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);!function(){var t=e;(0,tr.__call__)(t.set_render_doc_state,t,s,null)}()}if((0,tr.__t__)(_))for(o=_,l=0;l<(0,tr.len)(o);l++){var c=(0,tr.__getitem__)(o,l);(0,tr.__t__)(!(0,tr.__in__)(c,e.render_doc_states_clear_dependants))&&(0,tr.__setitem__)(e.render_doc_states_clear_dependants,c,(0,tr.__call__)(tr.set,null)),function(){var r=(0,tr.__getitem__)(e.render_doc_states_clear_dependants,c);(0,tr.__call__)(r.add,r,t)}()}}))},get clear_render_doc_state(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"state_type":t=_[n]}}}if((0,tr.__getitem__)(e.render_doc_states,t),(0,tr.__t__)((0,tr.__in__)(t,e.render_doc_states_clear_dependants)))for(var a=(0,tr.__getitem__)(e.render_doc_states_clear_dependants,t),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);!function(){var t=e;(0,tr.__call__)(t.set_render_doc_state,t,o,null)}()}}))},get register_item(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"counter_name":t=n[a];break;case"custom_label":r=n[a]}}}if((0,tr.__t__)(null!==r))var i=(0,tr.dict)({value:null,number:null,subnums:null,numprefix:null,formatted_value:r});else i=function(){var r=(0,tr.__getitem__)(e.counters,t);return(0,tr.__call__)(r._impl_register_item,r)}();var o=null;if((0,tr.__t__)((0,tr.__in__)(t,e.number_within)))for(o=[l=(0,tr.__getitem__)((0,tr.__getitem__)(e.number_within,t),"reset_at")];(0,tr.__t__)((0,tr.__in__)(l,e.number_within));){var l=(0,tr.__getitem__)((0,tr.__getitem__)(e.number_within,l),"reset_at");!function(){var e=o;(0,tr.__call__)(e.append,e,l)}()}return function(){var r=e;(0,tr.__call__)(r.set_render_doc_state,r,"cnt-{}".format(t),(0,tr.__getitem__)(i,"formatted_value"),(0,tr.__kwargtrans__)({clear_self_upon_change:(0,tr.__t__)(o)?function(){for(var e,t=[],r=o,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,"cnt-{}".format(n))}return t}():null}))}(),i}))},get get_formatted_counter_value(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"counter_name":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=(0,tr.__getitem__)(e.counters,t);if((0,tr.__t__)(null===i)){var o=(0,tr.__call__)(tr.ValueError,null,"Invalid counter: {}".format(t));throw o.__cause__=null,o}return function(){var e=i;return(0,tr.__call__)(e.get_formatted_counter_value,e,(0,tr.__kwargtrans__)(r))}()}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"number_within":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ws,"__init__"),null,e),e.number_within=(0,tr.__t__)(t)||(0,tr.dict)({})}))}}),bs=ws,ks={};t(ks,"logger",(()=>Es)),t(ks,"ReferenceableInfo",(()=>Cs)),t(ks,"get_safe_target_id",(()=>Ls)),t(ks,"RefInstance",(()=>As)),t(ks,"_rx_unsafe_char",(()=>Ns)),t(ks,"_rx_match_safechar",(()=>Ts)),t(ks,"FeatureRefsRenderManager",(()=>Ms)),t(ks,"_ref_arg_specs",(()=>js)),t(ks,"RefMacro",(()=>Is)),t(ks,"FeatureRefs",(()=>Ds)),t(ks,"AllowedUnresolvedRefResolver",(()=>Fs)),t(ks,"_display_unresolved_verbatim",(()=>Rs)),t(ks,"FeatureClass",(()=>zs)),t(ks,"ParsedArgumentsInfo",(()=>Pn)),t(ks,"LatexWalkerLocatedError",(()=>V_)),t(ks,"latexnodes_parsers",(()=>pa)),t(ks,"ValueWithSubNums",(()=>es)),t(ks,"FLMArgumentSpec",(()=>To)),t(ks,"FLMFragment",(()=>ui)),t(ks,"FLMMacroSpecBase",(()=>Ko)),t(ks,"Feature",(()=>sr));tr=a("hoVWB");var xs={},Os={};(0,tr.__nest__)(xs,"",m_),(0,tr.__nest__)(Os,"",pr);var Ps="flm.feature.refs",Es=function(){var e=xs;return(0,tr.__call__)(e.getLogger,e,Ps)}(),Cs=(0,tr.__class__)("ReferenceableInfo",[tr.object],{__module__:Ps,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"kind":t=a[i];break;case"formatted_ref_flm_text":r=a[i];break;case"labels":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cs,"__init__"),null,e),e.kind=t,e.formatted_ref_flm_text=r,e.labels=_,e._fields=(0,tr.tuple)(["kind","formatted_ref_flm_text","labels"])}))},get get_target_id(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}if((0,tr.__t__)(!(0,tr.__t__)(e.labels)))return null;var n=(0,tr.__getitem__)(e.labels,0),a=n[0],i=n[1];return(0,tr.__call__)(Ls,null,a,i)}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return(0,tr.py_iter)(r)}())),")")}))}}),As=(0,tr.__class__)("RefInstance",[tr.object],{__module__:Ps,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i,o){if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"ref_type":t=s[c];break;case"ref_label":r=s[c];break;case"formatted_ref_flm_text":_=s[c];break;case"target_href":n=s[c];break;case"counter_value":a=s[c];break;case"counter_numprefix":i=s[c];break;case"counter_formatter_id":o=s[c]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,As,"__init__"),null,e),e.ref_type=t,e.ref_label=r,e.formatted_ref_flm_text=_,e.target_href=n,e.counter_value=a,e.counter_numprefix=i,e.counter_formatter_id=o,e._fields=(0,tr.tuple)(["ref_type","ref_label","formatted_ref_flm_text","target_href","counter_value","counter_numprefix","counter_formatter_id"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),")")}))}}),Ss=e=>(+e).toString(16),Ns=function(){var e=Os;return(0,tr.__call__)(e.compile,e,"[^a-zA-Z0-9-]")}(),Ts=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return"_{}X".format((0,tr.__call__)(Ss,null,(0,tr.__call__)(tr.ord,null,function(){var t=e;return(0,tr.__call__)(t.group,t)}())))},Ls=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"ref_type":e=_[n];break;case"ref_label":t=_[n]}}}var a=function(){var t=Ns;return(0,tr.__call__)(t.sub,t,Ts,e)}(),i=function(){var e=Ns;return(0,tr.__call__)(e.sub,e,Ts,t)}();return"{}-{}".format(a,i)},Ms=(0,tr.__class__)("FeatureRefsRenderManager",[sr.RenderManager],{__module__:Ps,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"add_external_ref_resolvers":t=_[n]}}}e.ref_labels=(0,tr.dict)({}),e.registered_references=(0,tr.dict)({}),e.external_ref_resolvers=[],(0,tr.__t__)(t)&&function(){var r=e.external_ref_resolvers;(0,tr.__call__)(r.extend,r,t)}(),function(){var t=e.external_ref_resolvers;(0,tr.__call__)(t.extend,t,e.feature.external_ref_resolvers)}(),e.registered_counter_formatters=(0,tr.dict)({})}))},get register_reference_referenceable(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)switch(_){case"self":e=r[_];break;case"node":var n=r[_];break;case"referenceable_info":var a=r[_]}}}if(!(0,tr.__t__)(!(0,tr.__t__)(a.labels)))for(var i=(0,tr.__add__)("#",function(){var e=a;return(0,tr.__call__)(e.get_target_id,e)}()),o=a.labels,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];!function(){var t=e;(0,tr.__call__)(t.register_reference,t,c,u,(0,tr.__kwargtrans__)({formatted_ref_flm_text:a.formatted_ref_flm_text,node:n,target_href:i}))}()}}))},get register_counter_formatter(){return(0,tr.__get__)(this,(function(e){var t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"counter_formatter_id":t=_[n];break;case"counter_formatter":var a=_[n]}}}if((0,tr.__t__)(null===t))t=a.counter_formatter_id;if((0,tr.__t__)((0,tr.__in__)(t,e.registered_counter_formatters))){var i=(0,tr.__call__)(tr.ValueError,null,"Counter formatter width ID {} is already registered!".format(t));throw i.__cause__=null,i}(0,tr.__setitem__)(e.registered_counter_formatters,t,a)}))},get register_reference_step_counter(){return(0,tr.__get__)(this,(function(e){var t=null,r=null,_=null,n=!0,a=null,i=!0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"node":var c=l[s];break;case"counter_iface":var u=l[s];break;case"ref_type":t=l[s];break;case"ref_label":r=l[s];break;case"target_href_fn":_=l[s];break;case"counter_with_prefix":n=l[s];break;case"counter_prefix_variant":a=l[s];break;case"counter_with_delimiters":i=l[s]}}}var f=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,c)}(),d=(0,tr.tuple)([f,t,r]);if((0,tr.__t__)((0,tr.__in__)(d,e.registered_references)))return(0,tr.__getitem__)(e.registered_references,d);var p=function(){var e=u;return(0,tr.__call__)(e.register_item,e)}(),h=function(){var e=u.formatter;return(0,tr.__call__)(e.format_flm,e,(0,tr.__getitem__)(p,"value"),(0,tr.__kwargtrans__)({numprefix:(0,tr.__getitem__)(p,"numprefix"),with_prefix:n,prefix_variant:a,with_delimiters:i}))}();if((0,tr.__t__)(null!==_))var g=(0,tr.__call__)(_,null,(0,tr.__getitem__)(p,"value"),(0,tr.__kwargtrans__)({numprefix:(0,tr.__getitem__)(p,"numprefix")}));else g=null;return function(){var _=e;return(0,tr.__call__)(_.register_reference,_,t,r,(0,tr.__kwargtrans__)({node:c,formatted_ref_flm_text:h,target_href:g,counter_value:(0,tr.__getitem__)(p,"value"),counter_numprefix:(0,tr.__getitem__)(p,"numprefix"),counter_formatter_id:u.formatter.counter_formatter_id}))}()}))},get register_reference(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"ref_label":r=o[l];break;case"node":var s=o[l];break;case"formatted_ref_flm_text":var c=o[l];break;case"target_href":var u=o[l];break;case"counter_value":_=o[l];break;case"counter_numprefix":n=o[l];break;case"counter_formatter_id":a=o[l]}}}var f=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,s)}(),d=(0,tr.tuple)([f,t,r]);if((0,tr.__t__)((0,tr.__in__)(d,e.registered_references)))return(0,tr.__getitem__)(e.registered_references,d);if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__t__)(null!==r)&&(0,tr.__in__)((0,tr.tuple)([t,r]),e.ref_labels))){var p=(0,tr.__call__)(tr.ValueError,null,"Duplicate reference label {}:{} in the same document!".format(t,r));throw p.__cause__=null,p}var h=(0,tr.__call__)(As,null,(0,tr.__kwargtrans__)({ref_type:t,ref_label:r,formatted_ref_flm_text:c,target_href:u,counter_value:_,counter_numprefix:n,counter_formatter_id:a}));return(0,tr.__setitem__)(e.registered_references,d,h),(0,tr.__t__)((0,tr.__t__)(null!==t)&&null!==r)&&e.ref_labels.__setitem__([t,r],h),h}))},get get_ref(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"ref_type":t=a[i];break;case"ref_label":r=a[i];break;case"resource_info":_=a[i]}}}if((0,tr.__t__)((0,tr.__in__)((0,tr.tuple)([t,r]),e.ref_labels)))return e.ref_labels.__getitem__([t,r]);for(var o=e.external_ref_resolvers,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=function(){var n=s;return(0,tr.__call__)(n.get_ref,n,t,r,_,e.render_context)}();if((0,tr.__t__)(null!==c))return c}var u=(0,tr.__call__)(V_,null,"Ref target {}:{} found neither within database nor with any set external resolvers".format(t,r),(0,tr.__kwargtrans__)({pos:null}));throw u.__cause__=null,u}))},get render_ref(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=null,i=!0,o=!0;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"ref_type":t=s[c];break;case"ref_label":r=s[c];break;case"display_content_flm":_=s[c];break;case"resource_info":n=s[c];break;case"counter_prefix_variant":a=s[c];break;case"counter_with_prefix":i=s[c];break;case"counter_with_delimiters":o=s[c]}}}var u=function(){var _=e;return(0,tr.__call__)(_._get_ref_instance,_,t,r,n)}();return function(){var t=e;return(0,tr.__call__)(t.render_ref_instance,t,u,_,(0,tr.__kwargtrans__)({counter_prefix_variant:a,counter_with_prefix:i,counter_with_delimiters:o}))}()}))},get render_ref_instance(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"ref_instance":t=n[a];break;case"display_content_flm":r=n[a];break;case"counter_prefix_variant":n[a];break;case"counter_with_prefix":n[a];break;case"counter_with_delimiters":n[a]}}}if((0,tr.__t__)(null===r))r=t.formatted_ref_flm_text;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,ui))))r=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,r,(0,tr.__kwargtrans__)({standalone_mode:!0}))}();var i=r.nodes,o=e.render_context.fragment_renderer;return function(){var r=o;return(0,tr.__call__)(r.render_link,r,"ref",t.target_href,i,(0,tr.__kwargtrans__)({render_context:e.render_context,annotations:["ref-{}".format(t.ref_type)]}))}()}))},ref_many_use_flm_hyperref:!0,get render_ref_many(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=!0,a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type_label_list":t=o[l];break;case"resource_info":r=o[l];break;case"counter_prefix_variant":_=o[l];break;case"counter_with_delimiters":n=o[l];break;case"counter_with_prefix":a=o[l]}}}for(var s=e.render_context,c=s.fragment_renderer,u=function(){for(var _,n,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1];_=void 0,n=void 0,n=a,(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_._get_ref_instance,_,s,c,r)))}return a}(),f=(0,tr.__call__)(tr.dict,null),d=(0,tr.__call__)(tr.dict,null),p=[],h=u,g=0;g<(0,tr.len)(h);g++){var v=(0,tr.__getitem__)(h,g);if((0,tr.__t__)((0,tr.__t__)(null===v.counter_value)||null===v.counter_formatter_id))!function(){var e=p;(0,tr.__call__)(e.append,e,v)}();else{var m=v.counter_formatter_id;(0,tr.__t__)(!(0,tr.__in__)(m,f))&&((0,tr.__setitem__)(f,m,(0,tr.dict)({})),(0,tr.__setitem__)(d,m,[]));var y=v.counter_numprefix,w=(0,tr.__call__)(tr.repr,null,y),b=(0,tr.__call__)(es,null,v.counter_value);(0,tr.__t__)(!(0,tr.__in__)(y,(0,tr.__getitem__)(d,m)))&&(!function(){var e=(0,tr.__getitem__)(d,m);(0,tr.__call__)(e.append,e,y)}(),(0,tr.__setitem__)((0,tr.__getitem__)(f,m),w,[])),function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(f,m),w);(0,tr.__call__)(e.append,e,(0,tr.dict)({value:b,ri:v}))}()}}var k=[];for(h=function(){var e=d;return(0,tr.__call__)(e.py_items,e)}(),g=0;g<(0,tr.len)(h);g++){for(var x=(0,tr.__getitem__)(h,g),O=x[0],P=x[1],E=(0,tr.__getitem__)(f,O),C=(0,tr.__getitem__)(e.registered_counter_formatters,O),A=function(){var e=C;return(0,tr.__call__)(e.format_many_flm,e,function(){for(var e,t=[],r=P,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.tuple)([n,function(){for(var e,t=[],r=(0,tr.__getitem__)(E,(0,tr.__call__)(tr.repr,null,n)),_=0;_<(0,tr.len)(r);_++){var a=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(a,"value"))}return t}()]))}return t}(),(0,tr.__kwargtrans__)({prefix_variant:_,with_delimiters:n,with_prefix:a,get_raw_s_items:!0}))}(),S="",N=A,T=0;T<(0,tr.len)(N);T++){var L=(0,tr.__getitem__)(N,T),M=function(){var e=s;return(0,tr.__call__)(e.make_standalone_fragment,e,(0,tr.__getitem__)(L,"s"),(0,tr.__kwargtrans__)({is_block_level:!1,what:"Rendered counter ref bit {}".format((0,tr.__call__)(tr.repr,null,L))}))}();if((0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(L,"n"))||!1===(0,tr.__getitem__)(L,"n")))S=(0,tr.__call__)(tr.__iadd__,null,S,function(){var e=c;return(0,tr.__call__)(e.render_fragment,e,M,s)}());else{for(var j=null,I=(0,tr.__getitem__)(E,(0,tr.__call__)(tr.repr,null,(0,tr.__getitem__)(L,"np"))),D=0;D<(0,tr.len)(I);D++){var R=(0,tr.__getitem__)(I,D);if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(R,"value");return(0,tr.__call__)(e.equals,e,(0,tr.__getitem__)(L,"n"))}())){j=(0,tr.__getitem__)(R,"ri");break}}S=(0,tr.__call__)(tr.__iadd__,null,S,function(){var e=c;return(0,tr.__call__)(e.render_link,e,"ref",j.target_href,M.nodes,(0,tr.__kwargtrans__)({render_context:s,annotations:["refcnt-{}".format(O)]}))}())}}!function(){var e=k;(0,tr.__call__)(e.append,e,S)}()}if((0,tr.__t__)((0,tr.__call__)(tr.len,null,p)))for(h=p,g=0;g<(0,tr.len)(h);g++)v=(0,tr.__getitem__)(h,g),k=(0,tr.__call__)(tr.__iadd__,null,k,[function(){var t=e;return(0,tr.__call__)(t.render_ref_instance,t,v,null)}()]);return(0,tr.__call__)(", ".join,", ",k)}))},get _get_ref_instance(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"ref_type":t=a[i];break;case"ref_label":r=a[i];break;case"resource_info":_=a[i]}}}try{return function(){var n=e;return(0,tr.__call__)(n.get_ref,n,t,r,_)}()}catch(e){if((0,tr.isinstance)(e,V_)){var o=e;throw e.__cause__=null,e}if((0,tr.isinstance)(e,tr.Exception)){o=e;var l=(0,tr.__call__)(tr.ValueError,null,"Unable to resolve reference to {}:{}: {} [in {}]".format(t,r,o,(0,tr.__call__)(tr.repr,null,_)));throw l.__cause__=null,l}throw e}}))}}),js=(0,tr.dict)({ref_label:(0,tr.__call__)(To,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e)}(),(0,tr.__kwargtrans__)({argname:"ref_label"})),"[]ref_label":(0,tr.__call__)(To,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"])}))}(),(0,tr.__kwargtrans__)({argname:"ref_label"})),display_text:(0,tr.__call__)(To,null,"{",(0,tr.__kwargtrans__)({argname:"display_text"})),Xref_label:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"ref_label"})),"[]Xref_label":(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"r[]",argname:"ref_label"}))}),Is=(0,tr.__class__)("RefMacro",[Ko],{__module__:Ps,delayed_render:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r="ref",_=(0,tr.tuple)(["ref_label","display_text"]),n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"macroname":t=i[o];break;case"ref_type":r=i[o];break;case"command_arguments":_=i[o];break;case"counter_prefix_variant":n=i[o]}}}var l=function(){var t=e;return(0,tr.__call__)(t._get_arguments_spec_list,t,_)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Is,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:l})),e.ref_type=r,e.command_arguments=_,e.counter_prefix_variant=n,e.command_argnames=function(){for(var e,t=[],r=l,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,n.argname)}return t}()}))},_fields:(0,tr.tuple)(["macroname","ref_type","command_arguments","counter_prefix_variant"]),get _get_arguments_spec_list(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"cls":e=_[n];break;case"command_arguments":t=_[n]}}}return function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(js,a))}return r}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}for(var a=function(){var r=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(r.get_all_arguments_info,r,e.command_argnames)}(),i=function(){var e=(0,tr.__getitem__)(a,"ref_label");return(0,tr.__call__)(e.get_content_as_chars,e)}(),o=[],l=function(){var e=i;return(0,tr.__call__)(e.py_split,e,",")}(),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=(d=(0,tr.tuple)([null,c]))[0],f=d[1];if((0,tr.__t__)((0,tr.__in__)(":",f))){var d=function(){var e=f;return(0,tr.__call__)(e.py_split,e,":",1)}();u=d[0],f=d[1]}!function(){var e=o;(0,tr.__call__)(e.append,e,(0,tr.tuple)([u,f]))}()}if((0,tr.__t__)((0,tr.__in__)("display_text",a)))var p=function(){var e=(0,tr.__getitem__)(a,"display_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();else p=null;t.flmarg_ref_list=o,(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),1))&&(t.flmarg_ref=(0,tr.__getitem__)(o,0)),t.flm_ref_info=(0,tr.dict)({ref_list:o,display_content_nodelist:p})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__getitem__)(t.flm_ref_info,"ref_list"),o=(0,tr.__getitem__)(t.flm_ref_info,"display_content_nodelist"),l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),s=t.latex_walker.resource_info;if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,i),1))){var c=(0,tr.__getitem__)(i,0),u=c[0],f=c[1];try{return function(){var t=l;return(0,tr.__call__)(t.render_ref,t,u,f,o,s,(0,tr.__kwargtrans__)({counter_prefix_variant:e.counter_prefix_variant}))}()}catch(h){if((0,tr.isinstance)(h,V_)){var d=h;throw function(){var e=d;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(p=d).__cause__=null,p}if((0,tr.isinstance)(h,tr.Exception)){var p;d=h;throw function(){var e,r=Es;(0,tr.__call__)(r.error,r,"Failed to resolve reference to {}:{}: {} in {} {}".format(u,f,d,(e=t,(0,tr.__call__)(e.latex_verbatim,e)),function(){var e=t;return(0,tr.__call__)(e.format_pos,e)}()))}(),(p=(0,tr.__call__)(V_,null,"Unable to resolve reference to {}:{}: {}".format(u,f,d),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,p}throw h}}if((0,tr.__t__)(null!==o)){var h=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Reference with custom display string cannot have multiple ref targets: ",(0,tr.__call__)(tr.repr,null,i)));throw h.__cause__=null,h}return function(){var e=l;return(0,tr.__call__)(e.render_ref_many,e,i,s)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"recomposer":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}var o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"refs")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"protect_surround",(0,tr.tuple)(["\\NoCaseChange{\\protect","}"]))}(),s=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"emit_flm_macro",!1)}();if((0,tr.__t__)(null===t.flm_ref_info))throw(v=(0,tr.__call__)(V_,null,(0,tr.__add__)("Recomposing pure LaTeX: Invalid ref info in node ",(0,tr.__call__)(tr.repr,null,t)),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,v;for(var c=[],u=(0,tr.__getitem__)(t.flm_ref_info,"ref_list"),f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=d[0],h=d[1];!function(){var e,_=c;(0,tr.__call__)(_.append,_,(e=r,(0,tr.__call__)(e.make_safe_label,e,"ref",p,h,t.latex_walker.resource_info)))}()}var g=(0,tr.__getitem__)(t.flm_ref_info,"display_content_nodelist");if((0,tr.__t__)((0,tr.__t__)(null!==g)&&(0,tr.__t__)(g.nodelist)&&(0,tr.__call__)(tr.len,null,g.nodelist))){var v;if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,c),1)))throw(v=(0,tr.__call__)(V_,null,"Hyperref macro cannot have multiple ref targets because it specifies a custom display string.".format(),(0,tr.__kwargtrans__)({pos:t.pos}))).__cause__=null,v;var m=(0,tr.__getitem__)((0,tr.__getitem__)(c,0),"safe_label"),y=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,g)}();return(0,tr.__t__)(s)?(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\flmRefsHyperref{",(0,tr.__call__)(tr.str,null,m)),"}{"),(0,tr.__call__)(tr.str,null,y)),"}"):(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(l,0),"\\hyperref[{"),(0,tr.__call__)(tr.str,null,m)),"}]{"),(0,tr.__call__)(tr.str,null,y)),"}"),(0,tr.__getitem__)(l,1))}var w=(0,tr.__call__)(",".join,",",function(){for(var e,t=[],r=c,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(n,"safe_label"))}return t}());return(0,tr.__t__)(s)?(0,tr.__add__)((0,tr.__add__)("\\flmRefsCref{",w),"}"):(function(){var e=r;(0,tr.__call__)(e.ensure_latex_package,e,"cleveref")}(),(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(l,0),"\\cref{"),w),"}"),(0,tr.__getitem__)(l,1)))}))}}),Ds=(0,tr.__class__)("FeatureRefs",[sr],{__module__:Ps,feature_name:"refs",feature_title:"Labels and cross-references",RenderManager:Ms,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"external_ref_resolvers":t=n[a];break;case"allow_unresolved_refs":r=n[a]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ds,"__init__"),null,e),(0,tr.__t__)(null!==t)?e.external_ref_resolvers=(0,tr.__call__)(tr.list,null,t):e.external_ref_resolvers=[],(0,tr.__t__)(r)){if((0,tr.__t__)(!0===r))r=(0,tr.dict)({});var i=(0,tr.__call__)(Fs,null,(0,tr.__kwargtrans__)(r));!function(){var t=e.external_ref_resolvers;(0,tr.__call__)(t.append,t,i)}()}}))},get set_external_ref_resolvers(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"external_ref_resolvers":t=_[n]}}}(0,tr.__t__)((0,tr.__t__)(null!==e.external_ref_resolvers)&&(0,tr.__call__)(tr.len,null,e.external_ref_resolvers))&&function(){var e=Es;(0,tr.__call__)(e.warning,e,"FeatureRefs.set_external_ref_resolvers(): There were already external refs resolvers set.  They will be replaced.")}(),e.external_ref_resolvers=t}))},get add_external_ref_resolver(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"external_ref_resolver":t=_[n]}}}!function(){var r=e.external_ref_resolvers;(0,tr.__call__)(r.append,r,t)}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[function(){var t=e;return(0,tr.__call__)(t.RefMacroCls,t,(0,tr.__kwargtrans__)({macroname:"ref",command_arguments:(0,tr.tuple)(["ref_label"])}))}(),function(){var t=e;return(0,tr.__call__)(t.RefMacroCls,t,(0,tr.__kwargtrans__)({macroname:"hyperref",command_arguments:(0,tr.tuple)(["[]ref_label","display_text"])}))}()]}))}))},RefMacroCls:Is,get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"{}(external_ref_resolvers={})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.external_ref_resolvers))}))}}),Rs=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"ref_type":e=_[n];break;case"ref_label":t=_[n]}}}return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\textbf{<\\begin{verbatimtext}",(0,tr.__t__)(null!==e)?(0,tr.__add__)(e,":"):""),t),"\\end{verbatimtext}>}")},Fs=(0,tr.__class__)("AllowedUnresolvedRefResolver",[tr.object],{__module__:Ps,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=Rs;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"display_unresolved":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Fs,"__init__"),null,e),e.display_unresolved=t}))},get get_ref(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"ref_type":t=i[o];break;case"ref_label":r=i[o];break;case"resource_info":_=i[o];break;case"render_context":n=i[o]}}}if((0,tr.__t__)((0,tr.__call__)(tr.callable,null,e.display_unresolved)))var l=function(){var _=e;return(0,tr.__call__)(_.display_unresolved,_,t,r)}();else l=(0,tr.__call__)(tr.str,null,e.display_unresolved);return(0,tr.__call__)(As,null,(0,tr.__kwargtrans__)({ref_type:t,ref_label:r,formatted_ref_flm_text:l,target_href:'javascript:alert("Unresolved reference!")',counter_value:null,counter_numprefix:null,counter_formatter_id:null}))}))}}),zs=Ds,Bs={},qs={};(0,tr.__nest__)(Bs,"",m_),(0,tr.__nest__)(qs,"",pr);var Vs="flm.feature.headings",Gs=function(){var e=Bs;return(0,tr.__call__)(e.getLogger,e,Vs)}(),Us=(0,tr.__class__)("HeadingMacro",[Wo.FLMMacroSpecBase],{__module__:Vs,is_block_level:!0,allowed_in_standalone_mode:!0,_flm_main_text_argument:"text",allowed_ref_label_prefixes:(0,tr.tuple)(["sec","topic"]),get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=1,_=!1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"heading_level":r=a[i];break;case"inline_heading":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Us,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(L_,null,"*",(0,tr.__kwargtrans__)({argname:"star"})),Wo.text_arg,Wo.label_arg]})),e.heading_level=r,e.inline_heading=_,e.is_block_heading=e.inline_heading}))},_fields:(0,tr.tuple)(["macroname","heading_level","inline_heading"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Create a{} heading at level {}".format((0,tr.__t__)(e.inline_heading)?"n inline":"",e.heading_level)}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["star","text","label"]))}();t.flmarg_skip_numbering=function(){var e=(0,tr.__getitem__)(a,"star");return(0,tr.__call__)(e.was_provided,e)}(),t.flmarg_heading_content_nodelist=function(){var e=(0,tr.__getitem__)(a,"text");return(0,tr.__call__)(e.get_content_nodelist,e)}(),t.flmarg_labels=function(){var t=Wo;return(0,tr.__call__)(t.helper_collect_labels,t,(0,tr.__getitem__)(a,"label"),e.allowed_ref_label_prefixes)}();var i=function(){var e=t.flmarg_heading_content_nodelist;return(0,tr.__call__)(e.latex_verbatim,e)}();t.flm_referenceable_infos=[function(){var e=ks;return(0,tr.__call__)(e.ReferenceableInfo,e,(0,tr.__kwargtrans__)({kind:"heading",formatted_ref_flm_text:i,labels:t.flmarg_labels}))}()]}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"headings")}(),o=function(){var r=i;return(0,tr.__call__)(r.new_heading,r,(0,tr.__kwargtrans__)({node:t,heading_level:e.heading_level,labels:t.flmarg_labels,heading_content_nodelist:t.flmarg_heading_content_nodelist,skip_numbering:t.flmarg_skip_numbering}))}();return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_heading,t,(0,tr.__getitem__)(o,"content_nodelist"),(0,tr.__kwargtrans__)({render_context:r,heading_level:e.heading_level,inline_heading:e.inline_heading,target_id:(0,tr.__getitem__)(o,"target_id")}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=t.macroname,o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"headings")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"macroname_mapping",null)}();if((0,tr.__t__)(l)&&(0,tr.__t__)((0,tr.__in__)(i,l)))i=(0,tr.__getitem__)(l,i);var s=(0,tr.__add__)("\\",i);if((0,tr.__t__)(null!==t.nodeargd)){if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.nodeargd.argnlist,0)))s=(0,tr.__call__)(tr.__iadd__,null,s,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.nodeargd.argnlist,0))}());if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.nodeargd.argnlist,1)))s=(0,tr.__call__)(tr.__iadd__,null,s,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.nodeargd.argnlist,1))}())}for(var c=t.flmarg_labels,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],p=f[1],h=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",d,p,t.latex_walker.resource_info)}();s=(0,tr.__call__)(tr.__iadd__,null,s,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(h,"safe_label")),"}"))}return s}))}}),$s=(0,tr.dict)({format_num:(0,tr.dict)({template:"${arabic}"}),prefix_display:(0,tr.dict)({singular:"",plural:""}),delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"}),Ws=(0,tr.dict)({1:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"section"})),2:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"subsection"})),3:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"subsubsection"})),4:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"paragraph",inline:!0})),5:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"subparagraph",inline:!0})),6:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({cmdname:"subsubparagraph",inline:!0}))}),Hs=(0,tr.dict)({1:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${arabic}"}),numprefix:null,heading_joiner:". "})),2:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${arabic}"}),numprefix:"${section}.",heading_joiner:". "})),3:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${arabic}"}),numprefix:"${subsection}.",heading_joiner:". "})),4:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${alph}"}),numprefix:null,heading_joiner:". "})),5:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${alph}"}),numprefix:"${paragraph}.",heading_joiner:". "})),6:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.dict)({template:"${alph}"}),numprefix:"${subparagraph}.",heading_joiner:". "}))}),Ys=(0,tr.__call__)(tr.dict,null,Ws);(0,tr.__setitem__)(Ys,"$no-merge",!0);var Xs=(0,tr.__call__)(tr.dict,null,Hs);(0,tr.__setitem__)(Xs,"$no-merge",!0);var Zs=(0,tr.__class__)("FeatureHeadings",[sr],{__module__:Vs,feature_name:"headings",feature_title:"Headings: sections, paragraphs",feature_optional_dependencies:["refs","numbering"],RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Vs,get initialize(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"numbering_section_depth":t=a[i];break;case"section_numbering_by_level":r=a[i];break;case"counter_formatter":_=a[i]}}}if(e.target_id_counters=(0,tr.dict)({}),e.target_ids=(0,tr.dict)({}),(0,tr.__t__)(null!==t)?e.numbering_section_depth=t:e.numbering_section_depth=e.feature.numbering_section_depth,(0,tr.__t__)(null!==r)?e.section_numbering_by_level=function(){for(var t,_=[],n=(t=(0,tr.__call__)(tr.dict,null,r),(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];!function(){var t,r=_;(0,tr.__call__)(r.append,r,[o,(t=e.feature,(0,tr.__call__)(t._make_section_numbering_info,t,l))])}()}return(0,tr.dict)(_)}():e.section_numbering_by_level=e.feature.section_numbering_by_level,(0,tr.__t__)(null!==_)?e.counter_formatter=(0,tr.__call__)(Jl,null,_,$s,(0,tr.__kwargtrans__)({counter_formatter_id:"section"})):e.counter_formatter=e.feature.counter_formatter,e.section_counter_ifaces=(0,tr.dict)({}),(0,tr.__t__)(!1!==e.numbering_section_depth))for(var o=null,l=function(){var t=e.counter_formatter;return(0,tr.__call__)(t.asdict,t)}(),s=(0,tr.__call__)(tr.sorted,null,function(){var t=e.section_numbering_by_level;return(0,tr.__call__)(t.py_keys,t)}(),(0,tr.__kwargtrans__)({key:tr.int})),c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);if((0,tr.__t__)((0,tr.__t__)(!0!==e.numbering_section_depth)&&(0,tr.__gt__)(u,e.numbering_section_depth)))break;var f=(0,tr.__getitem__)(e.feature.section_commands_by_level,u).cmdname,d=(0,tr.__getitem__)(e.section_numbering_by_level,u);if(!(0,tr.__t__)(!(0,tr.__t__)(d))){var p=null,h=d.number_within_reset_at;if((0,tr.__t__)(h)){if((0,tr.__t__)(!0===h))if((0,tr.__t__)(null!==o))h=o;else h=null;p=(0,tr.dict)({reset_at:h,numprefix:d.numprefix})}var g=(0,tr.__call__)(Jl,null,d.counter_formatter,l,(0,tr.__kwargtrans__)({counter_formatter_id:e.counter_formatter.counter_formatter_id})),v=function(){var t=El;return(0,tr.__call__)(t.get_document_render_counter,t,e.render_context,f,g,(0,tr.__kwargtrans__)({always_number_within:p}))}();(0,tr.__setitem__)(e.section_counter_ifaces,u,v);o=f}}}))},get new_heading(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!1;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"node":t=l[s];break;case"heading_level":r=l[s];break;case"labels":_=l[s];break;case"heading_content_nodelist":n=l[s];break;case"skip_numbering":a=l[s];break;case"target_id":i=l[s]}}}if((0,tr.__t__)(null===i))if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_heading_target_id")))i=t.flm_heading_target_id;else if((0,tr.__t__)((0,tr.__call__)(tr.len,null,t.flm_referenceable_infos)))i=function(){var e=(0,tr.__getitem__)(t.flm_referenceable_infos,0);return(0,tr.__call__)(e.get_target_id,e)}();if((0,tr.__t__)(null===i))i=function(){var r=e;return(0,tr.__call__)(r.get_default_target_id,r,_,n,(0,tr.__kwargtrans__)({node:t}))}();var c=null;if((0,tr.__t__)((0,tr.__t__)(function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}())&&e.render_context.is_first_pass))c=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();var u=null;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(a))&&(0,tr.__in__)(r,e.section_counter_ifaces))){var f=(0,tr.__getitem__)(e.section_counter_ifaces,r),d=(0,tr.__getitem__)(e.section_numbering_by_level,r),p=(u=function(){var e=f;return(0,tr.__call__)(e.register_item,e)}(),d.heading_joiner),h=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,(0,tr.__add__)((0,tr.__getitem__)(u,"formatted_value"),p),(0,tr.__kwargtrans__)({is_block_level:!1,what:"section-{} counter".format(r)}))}(),g=(0,tr.__add__)((0,tr.__add__)([],h.nodes.nodelist),n.nodelist);if((0,tr.__t__)(null!==c))for(var v=_,m=0;m<(0,tr.len)(v);m++){var y=(0,tr.__getitem__)(v,m),w=y[0],b=y[1],k=e.counter_formatter.counter_formatter_id;!function(){var r,_,n=c;(0,tr.__call__)(n.register_reference,n,w,b,(0,tr.__kwargtrans__)({node:t,formatted_ref_flm_text:(_=e.counter_formatter,(0,tr.__call__)(_.format_flm,_,(r=(0,tr.__getitem__)(u,"value"),(0,tr.__call__)(r.get_num,r)),(0,tr.__kwargtrans__)({subnums:function(){var e=(0,tr.__getitem__)(u,"value");return(0,tr.__call__)(e.get_subnums,e)}(),numprefix:(0,tr.__getitem__)(u,"numprefix"),with_prefix:!0}))),target_href:"#{}".format(i),counter_value:(0,tr.__getitem__)(u,"value"),counter_numprefix:(0,tr.__getitem__)(u,"numprefix"),counter_formatter_id:k}))}()}}else{g=n;if((0,tr.__t__)(null!==c))for(v=t.flm_referenceable_infos,m=0;m<(0,tr.len)(v);m++){var x=(0,tr.__getitem__)(v,m);!function(){var e=c;(0,tr.__call__)(e.register_reference_referenceable,e,(0,tr.__kwargtrans__)({node:t,referenceable_info:x}))}()}}return(0,tr.dict)({target_id:i,content_nodelist:g,sec_num_info:u})}))},get get_default_target_id(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"heading_labels":t=n[a];break;case"heading_content_nodelist":r=n[a];break;case"node":var i=n[a]}}}var o=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,i)}();if((0,tr.__t__)((0,tr.__in__)(o,e.target_ids)))return(0,tr.__getitem__)(e.target_ids,o);var l=function(){var _=e;return(0,tr.__call__)(_._generate_default_target_id,_,t,r)}();return(0,tr.__setitem__)(e.target_ids,o,l),l}))},get _generate_default_target_id(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"heading_labels":t=n[a];break;case"heading_content_nodelist":r=n[a]}}}var i=function(){var e,t=(e=r,(0,tr.__call__)(e.latex_verbatim,e));return(0,tr.__call__)(t.strip,t)}();i=function(){var e=qs;return(0,tr.__call__)(e.sub,e,"[^A-Za-z0-9_-]+","-",i)}(),i="sec--{}".format(i),i=(0,tr.__getslice__)(i,0,32,1);return(0,tr.__t__)((0,tr.__in__)(i,e.target_id_counters))?((0,tr.__setitem__)(e.target_id_counters,i,(0,tr.__call__)(tr.__iadd__,null,(0,tr.__getitem__)(e.target_id_counters,i),1)),"{}-{}".format(i,(0,tr.__getitem__)(e.target_id_counters,i))):((0,tr.__setitem__)(e.target_id_counters,i,1),i)}))}}),SectionCommandInfo:(0,tr.__class__)("SectionCommandInfo",[tr.object],{__module__:Vs,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"cmdname":t=n[a];break;case"inline":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zs.SectionCommandInfo,"__init__"),null,e),e.cmdname=t,e.inline=r}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"{}(cmdname={}, inline={})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.cmdname),(0,tr.__call__)(tr.repr,null,e.inline))}))}}),SectionNumberingInfo:(0,tr.__class__)("SectionNumberingInfo",[tr.object],{__module__:Vs,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=" ";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"numprefix":t=i[o];break;case"heading_joiner":r=i[o];break;case"number_within_reset_at":_=i[o];break;case"counter_formatter":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zs.SectionNumberingInfo,"__init__"),null,e),e.numprefix=t,e.heading_joiner=r,e.number_within_reset_at=_,e.counter_formatter=n}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"{}(numprefix={}, heading_joiner={}, number_within_reset_at={}counter_formatter={})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.numprefix),(0,tr.__call__)(tr.repr,null,e.heading_joiner),(0,tr.__call__)(tr.repr,null,e.number_within_reset_at),(0,tr.__call__)(tr.repr,null,e.counter_formatter))}))}}),feature_default_config:(0,tr.dict)({counter_formatter:$s,section_commands_by_level:Ys,section_numbering_by_level:Xs}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"section_commands_by_level":t=i[o];break;case"numbering_section_depth":r=i[o];break;case"counter_formatter":_=i[o];break;case"section_numbering_by_level":n=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zs,"__init__"),null,e),(0,tr.__t__)(null===t))t=Ws;if((0,tr.__t__)(null===n))n=Hs;if((0,tr.__t__)(null===_))_=$s;_=(0,tr.__call__)(Jl,null,_,$s,(0,tr.__kwargtrans__)({counter_formatter_id:"section"}));e.counter_formatter=_,e.section_commands_by_level=function(){for(var r,_=[],n=(r=(0,tr.__call__)(tr.dict,null,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var t,r=_;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._make_section_command_info,t,l))])}()}return(0,tr.dict)(_)}(),e.section_numbering_by_level=function(){for(var t,r=[],_=(t=(0,tr.__call__)(tr.dict,null,n),(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(_);a++){var i=(0,tr.__getitem__)(_,a),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var t,_=r;(0,tr.__call__)(_.append,_,[o,(t=e,(0,tr.__call__)(t._make_section_numbering_info,t,l))])}()}return(0,tr.dict)(r)}(),e.numbering_section_depth=r,(0,tr.__t__)(null===e.numbering_section_depth)&&(e.numbering_section_depth=!1)}))},get _make_section_command_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"x":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,e.SectionCommandInfo))?t:(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str))?function(){var r=e;return(0,tr.__call__)(r.SectionCommandInfo,r,t)}():function(){var r=e;return(0,tr.__call__)(r.SectionCommandInfo,r,(0,tr.__kwargtrans__)(t))}()}))},get _make_section_numbering_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"x":t=_[n]}}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,e.SectionNumberingInfo))?t:function(){var r=e;return(0,tr.__call__)(r.SectionNumberingInfo,r,(0,tr.__kwargtrans__)(t))}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:function(){for(var t,r=[],_=(t=e.section_commands_by_level,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Us,null,(0,tr.__kwargtrans__)({macroname:o.cmdname,heading_level:i,inline_heading:o.inline})))}()}return r}()}))}))}}),Ks=Zs,Js="flm.feature.theorems",Qs=(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"[",argname:"thmtitle",flm_doc:"An optional theorem environment title"})),ec=(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:(0,tr.__call__)(ti,null,["label","noproofref"],(0,tr.__kwargtrans__)({allow_multiple:!0,macro_arg_parsers:(0,tr.dict)({noproofref:null})})),argname:"thmlabel",flm_doc:"A following \\verbcode+\\label{}+ macro attaches a label to this macro call; a following \\noproofref indicates that there is no corresponding {proof} environment to look for in the document."})),tc=(0,tr.__class__)("TheoremEnvironment",[Wo.FLMEnvironmentSpecBase],{__module__:Js,is_block_level:!0,body_contents_is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"theorem_spec":r=i[o];break;case"theorem_type_spec":_=i[o];break;case"allowed_ref_label_prefixes":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tc,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[Qs,ec]})),e.theorem_spec=r,e.theorem_type_spec=_,e.allowed_ref_label_prefixes=n}))},_fields:(0,tr.tuple)(["environmentname","theorem_spec","theorem_type_spec","allowed_ref_label_prefixes"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}return function(){var e=pi;return(0,tr.__call__)(e.LatexEnvironmentBodyContentsParser,e,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(Sn,null,(0,tr.__kwargtrans__)({set_attributes:(0,tr.dict)({is_block_level:!0})}))}))}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["thmtitle","thmlabel"]))}(),i=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"thmtitle");return(0,tr.__call__)(e.was_provided,e)}()))i=function(){var e=(0,tr.__getitem__)(a,"thmtitle");return(0,tr.__call__)(e.get_content_nodelist,e)}();var o=null,l=!1;if((0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"title_enable_relation_ref"))&&(0,tr.__t__)((0,tr.__t__)(null!==i)&&(0,tr.__gt__)((0,tr.__call__)(tr.len,null,i),0))){var s=(0,tr.__getitem__)(i,0);if((0,tr.__t__)((0,tr.__t__)(null!==s)&&(0,tr.__t__)(function(){var e=s;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"*")}())){if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,i),1))){var c=(0,tr.__call__)(LatexWalkerLocatedError,null,"When specifying a proof-ref target as optional argument ([*thm:xyz]), the entire argument must consist of regular characters with no special meaning in FLM.  Got: {}".format(function(){var e=i;return(0,tr.__call__)(e.latex_verbatim,e)}()),(0,tr.__kwargtrans__)({pos:s.pos}));throw c.__cause__=null,c}if((0,tr.__t__)(function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"**")}()))o=(0,tr.__getslice__)(s.chars,2,null,1),l=!1;else if((0,tr.__t__)(function(){var e=s.chars;return(0,tr.__call__)(e.startswith,e,"*")}()))o=(0,tr.__getslice__)(s.chars,1,null,1),l=!0}}if((0,tr.__t__)(null!==o))if((0,tr.__t__)((0,tr.__in__)(":",o)))o=function(){var e=o;return(0,tr.__call__)(e.py_split,e,":",(0,tr.__kwargtrans__)({maxsplit:1}))}();else o=(0,tr.tuple)([null,o]);t.flmarg_thmtitle=(0,tr.dict)({nodelist:i,has_relation_ref:!!(0,tr.__t__)(null!==o),relation_ref_target:o,relation_ref_show_ref:l});var u=null,f=(0,tr.__getitem__)(a,"thmlabel");if((0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.was_provided,e)}()))for(var d=function(){var e=f;return(0,tr.__call__)(e.get_content_nodelist,e)}(),p=d,h=0;h<(0,tr.len)(p);h++){var g=(0,tr.__getitem__)(p,h);if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(g.delimiters,0),"\\label"))){if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(g.delimiters,0),"\\noproofref")))throw(c=(0,tr.__call__)(LatexWalkerParseError,null,"Bad information field macro {}".format((0,tr.__getitem__)(g.delimiters,0)),(0,tr.__kwargtrans__)({pos:g.pos}))).__cause__=null,c;u=!0}}return t.flmarg_has_noproofref=u,t.flmarg_labels=function(){var t=Wo;return(0,tr.__call__)(t.helper_collect_labels,t,f,e.allowed_ref_label_prefixes,(0,tr.__kwargtrans__)({allow_unknown_macros:!0}))}(),t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=r.fragment_renderer,o=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"theorems")}(),l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),s=t.flmarg_thmtitle,c=t.flmarg_labels;if((0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"numbered"))){for(var u=(0,tr.__getitem__)(o.counter_ifaces,e.environmentname),f=function(t){var r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"value":t=n[a];break;case"numprefix":r=n[a]}}}return"#{}-{}".format(e.environmentname,function(){var e=t;return(0,tr.__call__)(e.targetidstr,e,(0,tr.__kwargtrans__)({numprefix:r}))}())},d=function(){var e=l;return(0,tr.__call__)(e.register_reference_step_counter,e,(0,tr.__kwargtrans__)({node:t,counter_iface:u,target_href_fn:f,counter_with_prefix:!0,counter_prefix_variant:"capital"}))}(),p=d.counter_value,h=d.formatted_ref_flm_text,g=function(){var e=r;return(0,tr.__call__)(e.make_standalone_fragment,e,h,(0,tr.__kwargtrans__)({what:"Theorem heading"}))}(),v=g.nodes,m=c,y=0;y<(0,tr.len)(m);y++){var w=(E=(0,tr.__getitem__)(m,y))[0],b=E[1];!function(){var e=l;(0,tr.__call__)(e.register_reference,e,w,b,(0,tr.__kwargtrans__)({node:t,formatted_ref_flm_text:g,target_href:d.target_href,counter_value:p,counter_numprefix:d.counter_numprefix,counter_formatter_id:u.formatter.counter_formatter_id}))}()}var k=(0,tr.__t__)((0,tr.__getslice__)(d.target_href,1,null,1))||null}else{var x=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.theorem_spec,"title"),"capital"),"singular");k=null,v=function(){var e,r=t.latex_walker;return(0,tr.__call__)(r.make_nodelist,r,[(e=t.latex_walker,(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({chars:x,pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state})))],(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}();if((0,tr.__t__)((0,tr.__call__)(tr.len,null,c))){var O=(0,tr.__call__)(LatexWalkerLocatedError,null,(0,tr.__add__)((0,tr.__add__)("You cannot use \\label{} in unnumbered theorem environment ",e.environmentname),""),(0,tr.__kwargtrans__)({pos:t.pos}));throw O.__cause__=null,O}}var P=null;if((0,tr.__t__)((0,tr.__getitem__)(s,"has_relation_ref"))){if((0,tr.__t__)((0,tr.__getitem__)(s,"relation_ref_show_ref"))){w=(E=(0,tr.__getitem__)(s,"relation_ref_target"))[0],b=E[1];var E,C=function(){var e=l;return(0,tr.__call__)(e.get_ref,e,w,b,t.latex_walker.resource_info)}(),A=C.formatted_ref_flm_text,S=function(){var e=r;return(0,tr.__call__)(e.make_standalone_fragment,e,A,(0,tr.__kwargtrans__)({what:"Thm relation ref"}))}();P=S.nodes}}else if((0,tr.__t__)(null!==(0,tr.__getitem__)(s,"nodelist")))P=(0,tr.__getitem__)(s,"nodelist");if((0,tr.__t__)(null!==P))var N=function(){var r,_=t.latex_walker;return(0,tr.__call__)(_.make_nodelist,_,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(tr.list,null,v),[(r=t.latex_walker,(0,tr.__call__)(r.make_node,r,rn,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"heading_title_pre"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state})))]),(0,tr.__call__)(tr.list,null,P)),[function(){var r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,rn,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"heading_title_post"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state}))}()]),(0,tr.__kwargtrans__)({parsing_state:t.parsing_state,pos:t.pos}))}();else N=v;var T=(0,tr.__call__)(Uo,null,an,(0,tr.__kwargtrans__)({flm_spec:function(){var t=Pl;return(0,tr.__call__)(t.HeadingMacro,t,(0,tr.__kwargtrans__)({macroname:null,heading_level:(0,tr.__getitem__)(e.theorem_type_spec,"theorem_heading_level"),inline_heading:!0}))}(),args:(0,tr.dict)({text:N}),latex_walker:t.latex_walker,parsing_state:t.parsing_state}));T.flm_heading_target_id=k;var L=function(){var r=t.latex_walker;return(0,tr.__call__)(r.make_node,r,rn,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(e.theorem_type_spec,"body_final_content"),pos:t.pos,pos_end:t.pos,parsing_state:t.parsing_state}))}();if(L.flm_strip_preceding_whitespace=!0,(0,tr.__t__)((0,tr.__getitem__)(e.theorem_type_spec,"body_final_content")))var M=(0,tr.__add__)((0,tr.__add__)([T],(0,tr.__call__)(tr.list,null,t.nodelist)),[L]);else M=(0,tr.__add__)([T],(0,tr.__call__)(tr.list,null,t.nodelist));M=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,M,(0,tr.__kwargtrans__)({parsing_state:t.parsing_state}))}();var j=function(){var e=i;return(0,tr.__call__)(e.render_nodelist,e,M,r)}();return function(){var t=i;return(0,tr.__call__)(t.render_semantic_block,t,j,(0,tr.__getitem__)(e.theorem_spec,"theorem_type"),r,(0,tr.__kwargtrans__)({annotations:[e.environmentname,"p-block"]}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}");if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(t.flmarg_thmtitle,"has_relation_ref")))){if((0,tr.__t__)(null!==(0,tr.__getitem__)(t.flmarg_thmtitle,"nodelist")))i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("[{",function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.flmarg_thmtitle,"nodelist"))}()),"}]"))}else{var o=(f=(0,tr.__getitem__)(t.flmarg_thmtitle,"relation_ref_target"))[0],l=f[1],s=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",o,l,t.latex_walker.resource_info)}();i=(0,tr.__call__)(tr.__iadd__,null,i,"[*");if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(t.flmarg_thmtitle,"relation_ref_show_ref"))))i=(0,tr.__call__)(tr.__iadd__,null,i,"*");i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__getitem__)(s,"safe_label")),i=(0,tr.__call__)(tr.__iadd__,null,i,"]")}if((0,tr.__t__)(t.flmarg_has_noproofref))i=(0,tr.__call__)(tr.__iadd__,null,i,"\\noproofref ");for(var c=t.flmarg_labels,u=0;u<(0,tr.len)(c);u++){var f,d=(f=(0,tr.__getitem__)(c,u))[0],p=f[1];s=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",d,p,t.latex_walker.resource_info)}(),i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(s,"safe_label")),"}"))}i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.recompose_nodelist,e,t.nodelist,t)}());return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),rc=(0,tr.dict)({theoremlike:(0,tr.dict)({theorem:(0,tr.dict)({title:(0,tr.dict)({lowercase:"theorem",abbreviated:(0,tr.dict)({singular:"Thm.",plural:"Thms."})})}),proposition:(0,tr.dict)({title:(0,tr.dict)({lowercase:"proposition",abbreviated:(0,tr.dict)({singular:"Prop.",plural:"Props."})})}),lemma:(0,tr.dict)({title:(0,tr.dict)({lowercase:"lemma",abbreviated:(0,tr.dict)({singular:"Lem.",plural:"Lems."})})}),corollary:(0,tr.dict)({title:(0,tr.dict)({lowercase:"corollary",abbreviated:(0,tr.dict)({singular:"Cor.",plural:"Cors."})})})}),definitionlike:(0,tr.dict)({definition:(0,tr.dict)({title:(0,tr.dict)({lowercase:"definition",abbreviated:(0,tr.dict)({singular:"Def.",plural:"Defs."})})})}),prooflike:(0,tr.dict)({proof:(0,tr.dict)({title:(0,tr.dict)({lowercase:"proof",abbreviated:(0,tr.dict)({singular:"Proof",plural:"Proofs"})})})})}),_c=(0,tr.dict)({theoremlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(rc,"theoremlike"),(0,tr.__kwargtrans__)((0,tr.dict)({conjecture:(0,tr.dict)({title:(0,tr.dict)({lowercase:"conjecture",abbreviated:(0,tr.dict)({singular:"Conj.",plural:"Conjs."})})})}))),definitionlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(rc,"definitionlike"),(0,tr.__kwargtrans__)((0,tr.dict)({remark:(0,tr.dict)({title:(0,tr.dict)({lowercase:"remark",abbreviated:(0,tr.dict)({singular:"Rem.",plural:"Rems."})})})}))),prooflike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(rc,"prooflike"))}),nc=(0,tr.dict)({theoremlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(_c,"theoremlike")),definitionlike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(_c,"definitionlike"),(0,tr.__kwargtrans__)((0,tr.dict)({idea:(0,tr.dict)({title:(0,tr.dict)({lowercase:"idea",abbreviated:(0,tr.dict)({singular:"Idea",plural:"Ideas"})})}),question:(0,tr.dict)({title:(0,tr.dict)({lowercase:"question",abbreviated:(0,tr.dict)({singular:"Qtn.",plural:"Qtns."})})}),claim:(0,tr.dict)({title:(0,tr.dict)({lowercase:"claim",abbreviated:(0,tr.dict)({singular:"Clm.",plural:"Clms."})})}),observation:(0,tr.dict)({title:(0,tr.dict)({lowercase:"observation",abbreviated:(0,tr.dict)({singular:"Obs.",plural:"Obs."})})}),problem:(0,tr.dict)({title:(0,tr.dict)({lowercase:"problem",abbreviated:(0,tr.dict)({singular:"Prob.",plural:"Probs."})})})}))),prooflike:(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(_c,"prooflike"))}),ac=(0,tr.dict)({simpleset:rc,defaultset:_c,richset:nc}),ic=(0,tr.dict)({theoremlike:(0,tr.dict)({numbered:!0,shared_numbering:!0,counter_formatter:null,theorem_heading_level:"theorem",heading_title_pre:" (",heading_title_post:")",title_enable_relation_ref:!1,body_final_content:""}),definitionlike:(0,tr.dict)({numbered:!0,shared_numbering:!0,counter_formatter:null,theorem_heading_level:"theorem",heading_title_pre:" (",heading_title_post:")",title_enable_relation_ref:!1}),prooflike:(0,tr.dict)({numbered:!1,title_enable_relation_ref:!0,body_final_content:""})}),oc=(0,tr.dict)({format_num:"arabic",delimiters:(0,tr.tuple)(["",""]),join_spec:"default"}),lc=["thm","prop","cor","lem","rem","def","dfn","x","topic"],sc=(0,tr.__class__)("FeatureTheorems",[sr],{__module__:Js,feature_name:"theorems",feature_dependencies:["refs"],feature_optional_dependencies:["numbering"],feature_default_config:(0,tr.dict)({environments:(0,tr.__getitem__)(ac,"defaultset"),theorem_types:ic,shared_counter_formatter:"arabic",allowed_ref_label_prefixes:lc}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Js,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.shared_counter_iface=function(){var t=El;return(0,tr.__call__)(t.get_document_render_counter,t,e.render_context,(0,tr.__kwargtrans__)({counter_name:e.feature.shared_counter_formatter.counter_formatter_id,counter_formatter:e.feature.shared_counter_formatter}))}();var n=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();e.counter_ifaces=(0,tr.dict)({});for(var a=function(){var t=e.feature.thm_counter_formatters;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1],c=(0,tr.__getitem__)(e.feature.environments,l),u=(0,tr.__getitem__)(e.feature.theorem_types,(0,tr.__getitem__)(c,"theorem_type")),f=null;if((0,tr.__t__)((0,tr.__getitem__)(u,"shared_numbering")))f=e.shared_counter_iface;(0,tr.__setitem__)(e.counter_ifaces,l,function(){var t=El;return(0,tr.__call__)(t.get_document_render_counter,t,e.render_context,(0,tr.__kwargtrans__)({counter_name:s.counter_formatter_id,counter_formatter:s,alias_counter:f}))}()),function(){var e=n;(0,tr.__call__)(e.register_counter_formatter,e,(0,tr.__kwargtrans__)({counter_formatter:s}))}()}}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environments":t=i[o];break;case"theorem_types":r=i[o];break;case"shared_counter_formatter":_=i[o];break;case"allowed_ref_label_prefixes":n=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,sc,"__init__"),null,e),(0,tr.__t__)(null===t))t=(0,tr.__getitem__)(ac,"defaultset");if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))t=(0,tr.__getitem__)(ac,t);if((0,tr.__t__)(null===r))r=ic;e.theorem_types=function(){for(var t,_=[],n=(t=(0,tr.__call__)(tr.dict,null,r),(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];(0,tr.__t__)(null!==l)&&function(){var t,r=_;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._standardize_type_spec,t,o,l))])}()}return(0,tr.dict)(_)}(),e.environments=(0,tr.dict)({});for(var l=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++)for(var c=(m=(0,tr.__getitem__)(l,s))[0],u=m[1],f=function(){var e=u;return(0,tr.__call__)(e.py_items,e)}(),d=0;d<(0,tr.len)(f);d++){var p=(m=(0,tr.__getitem__)(f,d))[0],h=m[1];if((0,tr.__t__)((0,tr.__in__)("env_name",e.environments))){var g=(0,tr.__call__)(tr.ValueError,null,"Duplicate definition of theorem environment {}".format(p));throw g.__cause__=null,g}(0,tr.__setitem__)(e.environments,p,function(){var t=e;return(0,tr.__call__)(t._standardize_thm_spec,t,c,p,h)}())}e.shared_counter_formatter=(0,tr.__call__)(Jl,null,_,oc,(0,tr.__kwargtrans__)({counter_formatter_id:"_theorems_shared"}));var v=function(){var t=e.shared_counter_formatter;return(0,tr.__call__)(t.asdict,t)}();e.thm_counter_formatters=(0,tr.dict)({});for(l=function(){var t=e.environments;return(0,tr.__call__)(t.py_items,t)}(),s=0;s<(0,tr.len)(l);s++){p=(m=(0,tr.__getitem__)(l,s))[0],h=m[1];var m,y=(0,tr.__getitem__)(e.theorem_types,(0,tr.__getitem__)(h,"theorem_type"));if(!(0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(y,"numbered")))){var w=function(){var e=y;return(0,tr.__call__)(e.py_get,e,"counter_formatter",null)}();if((0,tr.__t__)(null===w))w=(0,tr.dict)({});else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,w,tr.str)))w=(0,tr.dict)({format_num:w});else w=(0,tr.__call__)(tr.dict,null,w);(0,tr.__setitem__)(w,"prefix_display",function(){var t=e;return(0,tr.__call__)(t._make_counter_formatter_prefix_for_thm,t,p,h)}()),(0,tr.__setitem__)(e.thm_counter_formatters,p,(0,tr.__call__)(Jl,null,w,v,(0,tr.__kwargtrans__)({counter_formatter_id:p})))}}e.allowed_ref_label_prefixes=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==n)?n:lc)}))},get _standardize_type_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"thm_type":t=n[a];break;case"thm_type_spec":r=n[a]}}}var i=(0,tr.__call__)(tr.dict,null,(0,tr.__getitem__)(ic,"theoremlike"));return function(){var e=i;(0,tr.__call__)(e.py_update,e,r)}(),i}))},get _standardize_thm_spec(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"thm_type":t=a[i];break;case"env_name":r=a[i];break;case"thm_spec":_=a[i]}}}if((0,tr.__t__)(!0===_))_=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,_,tr.str)))_=(0,tr.dict)({title:_});else _=(0,tr.__call__)(tr.dict,null,_);(0,tr.__setitem__)(_,"theorem_type",t);var o=(0,tr.dict)({}),l=function(){var e=_;return(0,tr.__call__)(e.py_get,e,"title",null)}();if((0,tr.__t__)(null===l))l=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,tr.str)))l=(0,tr.dict)({lowercase:(0,tr.dict)({singular:l,plural:(0,tr.__add__)(l,"s")})});if((0,tr.__t__)((0,tr.__in__)("lowercase",l))){var s=(0,tr.__getitem__)(l,"lowercase");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,s,tr.str))?(0,tr.__setitem__)(o,"lowercase",(0,tr.dict)({singular:s,plural:(0,tr.__add__)(s,"s")})):(0,tr.__setitem__)(o,"lowercase",s)}else(0,tr.__setitem__)(o,"lowercase",(0,tr.dict)({singular:"??",plural:"???"}));if((0,tr.__t__)((0,tr.__in__)("capital",l))){var c=(0,tr.__getitem__)(l,"capital");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,c,tr.str))?(0,tr.__setitem__)(o,"capital",(0,tr.dict)({singular:c,plural:(0,tr.__add__)(c,"s")})):(0,tr.__setitem__)(o,"capital",c)}else(0,tr.__setitem__)(o,"capital",(0,tr.dict)({singular:function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,"lowercase"),"singular");return(0,tr.__call__)(e.capitalize,e)}(),plural:function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,"lowercase"),"plural");return(0,tr.__call__)(e.capitalize,e)}()}));if((0,tr.__t__)((0,tr.__in__)("abbreviated",l))){var u=(0,tr.__getitem__)(l,"abbreviated");(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,u,tr.str))?(0,tr.__setitem__)(o,"abbreviated",(0,tr.dict)({singular:u,plural:(0,tr.__add__)(u,"s")})):(0,tr.__setitem__)(o,"abbreviated",u)}else(0,tr.__setitem__)(o,"abbreviated",(0,tr.dict)({singular:(0,tr.__add__)((0,tr.__getslice__)((0,tr.__getitem__)((0,tr.__getitem__)(o,"capital"),"singular"),0,3,1),"."),plural:(0,tr.__add__)(function(){var e=(0,tr.__getslice__)((0,tr.__getitem__)((0,tr.__getitem__)(o,"capital"),"plural"),0,3,1);return(0,tr.__call__)(e.rstrip,e,"s")}(),"s.")}));return(0,tr.__setitem__)(_,"title",o),_}))},get _make_counter_formatter_prefix_for_thm(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"env_name":t=n[a];break;case"thm_spec":r=n[a]}}}var i=(0,tr.dict)({}),o=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return function(){for(var t,r=[],_=(t=e,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,[i,(0,tr.__add__)(o,"~")])}()}return(0,tr.dict)(r)}()};return(0,tr.__setitem__)(i,"lowercase",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"lowercase"))),(0,tr.__setitem__)(i,"capital",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"capital"))),(0,tr.__setitem__)(i,"abbreviated",(0,tr.__call__)(o,null,(0,tr.__getitem__)((0,tr.__getitem__)(r,"title"),"abbreviated"))),function(){var e=i;(0,tr.__call__)(e.py_update,e,(0,tr.__getitem__)(i,"capital"))}(),i}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=[],a=function(){var t=e.environments;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1];!function(){var t=n;(0,tr.__call__)(t.append,t,(0,tr.__call__)(tc,null,(0,tr.__kwargtrans__)({environmentname:l,theorem_spec:s,theorem_type_spec:(0,tr.__getitem__)(e.theorem_types,(0,tr.__getitem__)(s,"theorem_type")),allowed_ref_label_prefixes:e.allowed_ref_label_prefixes})))}()}return(0,tr.dict)({environments:n})}))}}),cc=sc,uc={};t(uc,"logger",(()=>hc)),t(uc,"_default_math_environment_names",(()=>gc)),t(uc,"eq_default_counter_formatter_spec",(()=>vc)),t(uc,"FeatureMath",(()=>mc)),t(uc,"MathEnvironment",(()=>bc)),t(uc,"MathEqrefMacro",(()=>xc)),t(uc,"_EmptyClass",(()=>yc)),t(uc,"_ProxyNodeWithRecomposedLatex",(()=>wc)),t(uc,"_rx_newline_spaces",(()=>kc)),t(uc,"FeatureClass",(()=>Oc)),t(uc,"ParsedArgumentsInfo",(()=>Pn)),t(uc,"latexnodes_nodes",(()=>N_)),t(uc,"ParsingStateDeltaExtendLatexContextDb",(()=>eo)),t(uc,"latexnodes_parsers",(()=>pa)),t(uc,"LatexWalkerLocatedError",(()=>V_)),t(uc,"FLMArgumentSpec",(()=>To)),t(uc,"build_counter_formatter",(()=>Jl)),t(uc,"ParsingStateDeltaEnterMathMode",(()=>Mn)),t(uc,"FLMEnvironmentSpecBase",(()=>Jo)),t(uc,"numbering",(()=>El)),t(uc,"LatexEnvironmentBodyContentsParser",(()=>Ei)),t(uc,"MacroSpec",(()=>lo)),t(uc,"FLMMacroSpecBase",(()=>Ko)),t(uc,"Feature",(()=>sr));tr=a("hoVWB");var fc={},dc={};(0,tr.__nest__)(fc,"",m_),(0,tr.__nest__)(dc,"",pr);var pc="flm.feature.math",hc=function(){var e=fc;return(0,tr.__call__)(e.getLogger,e,pc)}(),gc=(0,tr.tuple)(["equation","equation*","align","align*","gather","gather*"]),vc=(0,tr.dict)({format_num:(0,tr.dict)({template:"${arabic}"}),prefix_display:(0,tr.dict)({singular:"Eq.~",plural:"Eqs.~",capital:(0,tr.dict)({singular:"Equation",plural:"Equations"})}),delimiters:(0,tr.tuple)(["(",")"]),join_spec:"compact"}),mc=(0,tr.__class__)("FeatureMath",[sr],{__module__:pc,feature_name:"math",feature_title:"Mathematical typesetting: equations and equation references",get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("\n            You can use the following environments and macros to typeset pretty display\n            math equations, create labels, and refer to them at other places in your\n            document.\n\n            Note that all equation labels must begin with the prefix \\verbcode{",e.eqref_ref_type),":}.")}))},feature_optional_dependencies:["refs","numbering"],feature_default_config:(0,tr.dict)({counter_formatter:vc}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_="eqref";if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="eq";if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"counter_formatter":t=i[o];break;case"math_environment_names":r=i[o];break;case"eqref_macro_name":_=i[o];break;case"eqref_ref_type":n=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,mc,"__init__"),null,e),(0,tr.__t__)(null===t))t=(0,tr.__getitem__)(e.feature_default_config,"counter_formatter");if(e.counter_formatter=(0,tr.__call__)(Jl,null,t,vc,(0,tr.__kwargtrans__)({counter_formatter_id:"eq"})),(0,tr.__t__)(null===r))r=gc;e.math_environment_names=r,e.eqref_macro_name=_,e.eqref_ref_type=n}))},DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:pc,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:pc,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"counter_formatter":t=_[n]}}}if((0,tr.__t__)(null!==t)?e.counter_formatter=(0,tr.__call__)(Jl,null,t,vc,(0,tr.__kwargtrans__)({counter_formatter_id:"eq"})):e.counter_formatter=e.feature.counter_formatter,e.equation_counter_iface=function(){var t=El;return(0,tr.__call__)(t.get_document_render_counter,t,e.render_context,"equation",e.counter_formatter)}(),e.equation_info_by_node=(0,tr.dict)({}),(0,tr.__t__)(function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}())){var a=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();!function(){var t=a;(0,tr.__call__)(t.register_counter_formatter,t,(0,tr.__kwargtrans__)({counter_formatter:e.counter_formatter}))}()}}))},get new_numbered_display_math(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"lineno":r=a[i];break;case"custom_tag_flm_text":_=a[i]}}}var o=(0,tr.tuple)([function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}(),r]);if((0,tr.__t__)((0,tr.__in__)(o,e.equation_info_by_node)))return(0,tr.__getitem__)(e.equation_info_by_node,o);if((0,tr.__t__)(null!==_)){var l=_,s="_{}".format((0,tr.__getitem__)(o,0));if((0,tr.__t__)(r))s=(0,tr.__call__)(tr.__iadd__,null,s,"-{}".format(r));var c=null,u=null}else{var f=function(){var t=e.equation_counter_iface;return(0,tr.__call__)(t.register_item,t)}();c=(0,tr.__getitem__)(f,"value"),u=(0,tr.__getitem__)(f,"numprefix"),l=(0,tr.__getitem__)(f,"formatted_value"),s=function(){var e=c;return(0,tr.__call__)(e.targetidstr,e,(0,tr.__kwargtrans__)({numprefix:u}))}()}var d=(0,tr.tuple)([s,l,u,c]);return(0,tr.__setitem__)(e.equation_info_by_node,o,d),d}))}}),get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){for(var t,r=[],_=e.math_environment_names,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__call__)(bc,null,a))}return r}(),a=[];return(0,tr.__t__)(null!==e.eqref_macro_name)&&function(){var t=a;(0,tr.__call__)(t.append,t,(0,tr.__call__)(xc,null,(0,tr.__kwargtrans__)({macroname:e.eqref_macro_name,ref_type:e.eqref_ref_type})))}(),(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:a,environments:n}))}))}}),yc=(0,tr.__class__)("_EmptyClass",[tr.object],{__module__:pc}),wc=(0,tr.__class__)("_ProxyNodeWithRecomposedLatex",[tr.object],{__module__:pc,pos:null,pos_end:null,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"verbatim":t=_[n]}}}e._verbatim=t,e.flm_specinfo=(0,tr.__call__)(yc,null),e.flm_specinfo.recompose_flm_text=function(t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"node":t=n[a];break;case"recomposer":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_.recompose_flm_text,_,t,(0,tr.__kwargtrans__)({recomposer:r}))}()}}))},get accept_node_visitor(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"visitor":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.visit_unknown_node,r,e)}()}))},get recompose_flm_text(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}return e._verbatim}))},get latex_verbatim(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e._verbatim}))}}),bc=(0,tr.__class__)("MathEnvironment",[Jo],{__module__:pc,get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Display equation typeset as the corresponding LaTeX environment."}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"environmentname":t=n[a];break;case"is_numbered":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,bc,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t})),(0,tr.__t__)(null!==r)?e.is_numbered=r:e.is_numbered=(0,tr.__ne__)((0,tr.__getslice__)(t,(0,tr.__neg__)(1),null,1),"*"),(0,tr.__t__)(!(0,tr.__t__)(e.is_numbered))&&(e.allowed_in_standalone_mode=!0)}))},_fields:(0,tr.tuple)(["environmentname","is_numbered"]),get make_body_parsing_state_delta(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=(0,tr.dict)();if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"token":t=o[l];break;case"nodeargd":r=o[l];break;case"arg_parsing_state_delta":_=o[l];break;case"latex_walker":n=o[l];break;default:a[l]=o[l]}delete a.__kwargtrans__}}return(0,tr.__call__)(Mn,null)}))},get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}return(0,tr.__call__)(Ei,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(eo,null,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(lo,null,"label",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"label"}))]})),(0,tr.__call__)(lo,null,"tag",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"*",argname:"tag_star"})),(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"text"}))]})),(0,tr.__call__)(lo,null,"\\",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0,allow_pre_space:!1}))}(),argname:"vertical_spacing"}))]}))]}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}t.flm_equation_lines_labels_infos=[];for(var a=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var t=arguments[e--];for(var r in t);}}return(0,tr.dict)({labels_info:[],custom_tag_flm_text:null,nonumber:!1,line_nodelist:[]})},i=(0,tr.__call__)(tr.dict,null,(0,tr.__call__)(a,null)),o=function(e){if(void 0===e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("newline_node"===n)e=_[n]}}!function(){var r=t.flm_equation_lines_labels_infos;(0,tr.__call__)(r.append,r,(0,tr.dict)({labels:(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(i,"labels_info")),custom_tag_flm_text:(0,tr.__getitem__)(i,"custom_tag_flm_text"),nonumber:(0,tr.__getitem__)(i,"nonumber"),line_nodelist:(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(i,"line_nodelist")),newline_node:e}))}(),function(){var e=i;(0,tr.__call__)(e.py_update,e,(0,tr.__call__)(a,null))}()},l=!1,s=t.nodelist,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"label"))){var f=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:u}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["label"]))}(),d=function(){var e=(0,tr.__getitem__)(f,"label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",d)))var p=function(){var e=d;return(0,tr.__call__)(e.py_split,e,":",1)}(),h=p[0],g=p[1];else h=(p=(0,tr.tuple)([null,d]))[0],g=p[1];var v=(0,tr.dict)({node:u,label:(0,tr.tuple)([h,g])});!function(){var e=(0,tr.__getitem__)(i,"labels_info");(0,tr.__call__)(e.append,e,v)}()}else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"tag"))){var m=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:u}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["tag_star","text"]))}(),y=function(){var e,t=(e=(0,tr.__getitem__)(m,"text"),(0,tr.__call__)(e.get_content_nodelist,e));return(0,tr.__call__)(t.latex_verbatim,t)}();if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(m,"tag_star");return(0,tr.__call__)(e.was_provided,e)}())))y="({})".format(y);(0,tr.__setitem__)(i,"custom_tag_flm_text",y)}else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"nonumber")))(0,tr.__setitem__)(i,"nonumber",!0);else if((0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexMacroNode)}())&&(0,tr.__eq__)(u.macroname,"\\"))){(0,tr.__call__)(o,null,u);l=!0}else if(function(){var e=(0,tr.__getitem__)(i,"line_nodelist");(0,tr.__call__)(e.append,e,u)}(),(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCommentNode)}()))&&!(0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,N_.LatexCharsNode)}())&&!(0,tr.__t__)(function(){var e=u.chars;return(0,tr.__call__)(e.strip,e)}()))))l=!1}(0,tr.__t__)(!(0,tr.__t__)(l))&&(0,tr.__call__)(o,null);for(s=(0,tr.__call__)(tr.enumerate,null,t.flm_equation_lines_labels_infos),c=0;c<(0,tr.len)(s);c++){(p=(0,tr.__getitem__)(s,c))[0];var w=p[1];if((0,tr.__t__)((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e.is_numbered))||(0,tr.__getitem__)(w,"nonumber"))&&((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(w,"labels")))||(0,tr.__getitem__)(w,"custom_tag_flm_text")))){var b=[];if((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(w,"labels")))){var k=function(){for(var e,t=[],r=(0,tr.__getitem__)(w,"labels"),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(n,"label"))}return t}(),x=(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=k,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("",n),""))}return t}());!function(){var e=b;(0,tr.__call__)(e.append,e,"\\label label(s) {}".format(x))}()}(0,tr.__t__)((0,tr.__getitem__)(w,"custom_tag_flm_text"))&&function(){var e=b;(0,tr.__call__)(e.append,e,"custom \\tag {}".format((0,tr.__getitem__)(w,"custom_tag_flm_text")))}();var O=function(){var e=" and ";return(0,tr.__call__)(e.join,e,b)}(),P=(0,tr.__call__)(LatexWalkerParseError,null,"You can't have \\nonumber and \\label/\\tag on the same equation line, found {} in environment {}".format(O,t.environmentname),(0,tr.__kwargtrans__)({pos:((0,tr.__t__)((0,tr.__getitem__)(w,"newline_node"))||t).pos}));throw P.__cause__=null,P}}return t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=t.environmentname;if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"math")}()))){var o=(0,tr.__call__)(tr.ValueError,null,"Feature 'math' is not enabled, cannot render math environment");throw o.__cause__=null,o}var l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"math")}(),s=null;if((0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}()))s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}();for(var c=(0,tr.__call__)(tr.list,null,t.nodelist),u=null,f=0,d=t.flm_equation_lines_labels_infos,p=0;p<(0,tr.len)(d);p++){var h=(0,tr.__getitem__)(d,p),g=(0,tr.__getitem__)(h,"nonumber");if(!(0,tr.__t__)(g)){var v=(0,tr.__getitem__)(h,"custom_tag_flm_text"),m=function(){var e=l;return(0,tr.__call__)(e.new_numbered_display_math,e,t,f,v)}(),y=m[0],w=m[1],b=m[2],k=m[3],x="equation-{}".format(y);if((0,tr.__t__)(null===u))u=x;if((0,tr.__t__)(!(0,tr.__t__)(v))){var O=(0,tr.__getitem__)(h,"newline_node");if((0,tr.__t__)(null!==O))var P=function(){var e=c;return(0,tr.__call__)(e.index,e,O)}();else P=(0,tr.__call__)(tr.len,null,c);!function(){var e=c;(0,tr.__call__)(e.insert,e,P,(0,tr.__call__)(wc,null,(0,tr.__add__)((0,tr.__add__)("\\tag*{",w),"}")))}()}x=u;if((0,tr.__t__)((0,tr.__t__)(null!==s)&&r.is_first_pass))for(var E=(0,tr.__getitem__)(h,"labels"),C=0;C<(0,tr.len)(E);C++){var A=(0,tr.__getitem__)(E,C),S=(m=(0,tr.__getitem__)(A,"label"))[0],N=m[1],T=l.counter_formatter.counter_formatter_id;!function(){var e=s;(0,tr.__call__)(e.register_reference,e,S,N,(0,tr.__kwargtrans__)({node:t,formatted_ref_flm_text:w,target_href:"#{}".format(x),counter_value:k,counter_numprefix:b,counter_formatter_id:T}))}()}f=(0,tr.__call__)(tr.__iadd__,null,f,1)}}return function(){var e,t=r.fragment_renderer;return(0,tr.__call__)(t.render_math_content,t,(0,tr.tuple)(["",""]),(e=N_,(0,tr.__call__)(e.LatexNodeList,e,c)),r,"display",(0,tr.__kwargtrans__)({environmentname:i,target_id:u}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i="",o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"math")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"surround_display_math",(0,tr.tuple)(["",""]))}(),s=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"emit_flm_math_environment_macro",!1)}();i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__getitem__)(l,0));if((0,tr.__t__)(s))i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\flmMathEnvironment{",t.environmentname),"}{")),i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),i=(0,tr.__call__)(tr.__iadd__,null,i,"}{");else i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}")),i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}());for(var c=[],u=!1,f=t.flm_equation_lines_labels_infos,d=0;d<(0,tr.len)(f);d++){for(var p=(0,tr.__getitem__)(f,d),h="",g=(0,tr.__getitem__)(p,"line_nodelist"),v=0;v<(0,tr.len)(g);v++){var m=(0,tr.__getitem__)(g,v);h=(0,tr.__call__)(tr.__iadd__,null,h,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,m)}())}var y=(0,tr.dict)({initial:"",final:""}),w=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}var n=(0,tr.__add__)("\n",function(){var t=e;return(0,tr.__call__)(t.group,t,"indent")}());return(0,tr.__t__)((0,tr.__eq__)(function(){var t=e;return(0,tr.__call__)(t.start,t)}(),0))?(0,tr.__t__)(u)?((0,tr.__setitem__)(y,"initial",n),""):n:(0,tr.__t__)((0,tr.__eq__)(function(){var t=e;return(0,tr.__call__)(t.end,t)}(),(0,tr.__call__)(tr.len,null,h)))?((0,tr.__setitem__)(y,"final",n),""):n};h=function(){var e=kc;return(0,tr.__call__)(e.sub,e,w,h)}();if((0,tr.__t__)(null!==(0,tr.__getitem__)(p,"custom_tag_flm_text")))h=(0,tr.__call__)(tr.__iadd__,null,h,(0,tr.__add__)((0,tr.__add__)("\\tag*{",function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(p,"custom_tag_flm_text"))}()),"}"));for(g=(0,tr.__getitem__)(p,"labels"),v=0;v<(0,tr.len)(g);v++){var b=(0,tr.__getitem__)(g,v),k=(0,tr.__getitem__)(b,"label"),x=k[0],O=k[1],P=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",x,O,t.latex_walker.resource_info)}();h=(0,tr.__call__)(tr.__iadd__,null,h,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(P,"safe_label")),"}"))}if((0,tr.__t__)((0,tr.__getitem__)(p,"nonumber")))h=(0,tr.__call__)(tr.__iadd__,null,h,"\\nonumber ");if((0,tr.__t__)((0,tr.__getitem__)(p,"newline_node")))h=(0,tr.__call__)(tr.__iadd__,null,h,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(p,"newline_node"))}());var E=(0,tr.__getitem__)(y,"final");h=(0,tr.__call__)(tr.__iadd__,null,h,E);!function(){var e=c;(0,tr.__call__)(e.append,e,h)}();u=!!(0,tr.__t__)((0,tr.__call__)(tr.len,null,E))}i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__call__)("".join,"",c));if((0,tr.__t__)(s))var i=(0,tr.__call__)(tr.__iadd__,null,i,"}");else i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"));return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__getitem__)(l,1))}))}}),kc=function(){var e=dc;return(0,tr.__call__)(e.compile,e,"([ \\t]*?\\n)+(?P<indent>[ \\t]*)")}(),xc=(0,tr.__class__)("MathEqrefMacro",[Ko],{__module__:pc,delayed_render:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="eqref";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="eq";var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"ref_type":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,xc,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(To,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e)}(),(0,tr.__kwargtrans__)({argname:"ref_label",flm_doc:(0,tr.__add__)((0,tr.__add__)("Equation label.  Must begin with the prefix \\verbtext+",r),":+")}))]})),e.ref_type=r}))},_fields:(0,tr.tuple)(["macroname","ref_type"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("Refer to an equation by its label.  The argument must be\n            a valid equation label which starts with \\verbcode+",e.ref_type),":+.  You can place labels in display equations using the\n            \\verbcode+\\label{}+ macro.")}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["ref_label"]))}(),i=null,o=function(){var e=(0,tr.__getitem__)(a,"ref_label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",o))){var l=function(){var e=o;return(0,tr.__call__)(e.py_split,e,":",1)}();i=l[0],o=l[1]}if((0,tr.__t__)((0,tr.__ne__)(i,e.ref_type))){var s=(0,tr.__call__)(V_,null,"Equation labels must begin with {}: (error in \\{})".format(e.ref_type,t.macroname),(0,tr.__kwargtrans__)({pos:t.pos}));throw s.__cause__=null,s}t.flmarg_ref=(0,tr.tuple)([i,o]),t.flm_ref_info=(0,tr.dict)({ref_list:[t.flmarg_ref],display_content_nodelist:null})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=t.flmarg_ref,o=i[0],l=i[1],s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),c=t.latex_walker.resource_info;try{return function(){var e=s;return(0,tr.__call__)(e.render_ref,e,o,l,null,c,(0,tr.__kwargtrans__)({counter_with_prefix:!1}))}()}catch(e){if((0,tr.isinstance)(e,tr.Exception)){var u=e;!function(){var e,r=hc;(0,tr.__call__)(r.error,r,"Failed to resolve reference to {}:{}: {} in {} @ {}".format(o,l,u,(e=t,(0,tr.__call__)(e.latex_verbatim,e)),function(){var e=t;return(0,tr.__call__)(e.format_pos,e)}()))}();var f=(0,tr.__call__)(V_,null,"Unable to resolve reference to {}:{}. {}".format(o,l,u),(0,tr.__kwargtrans__)({pos:t.pos}));throw f.__cause__=null,f}throw e}}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",(0,tr.__getitem__)(t.flmarg_ref,0),(0,tr.__getitem__)(t.flmarg_ref,1),t.latex_walker.resource_info)}();return(0,tr.__add__)((0,tr.__add__)("\\eqref{",(0,tr.__getitem__)(i,"safe_label")),"}")}))}}),Oc=mc,Pc={};t(Pc,"logger",(()=>Sc)),t(Pc,"_href_arg_specs",(()=>Nc)),t(Pc,"_rx_url_unsafe",(()=>Tc)),t(Pc,"HrefHyperlinkMacro",(()=>Lc)),t(Pc,"FeatureHref",(()=>Mc)),t(Pc,"FeatureClass",(()=>jc)),t(Pc,"ParsedArgumentsInfo",(()=>Pn)),t(Pc,"latexnodes_nodes",(()=>N_)),t(Pc,"latexnodes_parsers",(()=>pa)),t(Pc,"FLMArgumentSpec",(()=>To)),t(Pc,"SimpleLatexDefinitionsFeature",(()=>cr)),t(Pc,"FLMMacroSpecBase",(()=>Ko));tr=a("hoVWB");var Ec={},Cc={};(0,tr.__nest__)(Ec,"",m_),(0,tr.__nest__)(Cc,"",pr);var Ac="flm.feature.href",Sc=function(){var e=Ec;return(0,tr.__call__)(e.getLogger,e,Ac)}(),Nc=(0,tr.dict)({target_href:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.tuple)(["{","}"]))}(),argname:"target_href"})),target_email:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexDelimitedVerbatimParser,e,(0,tr.tuple)(["{","}"]))}(),argname:"target_email"})),display_text:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"display_text"})),target_Xhref:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"target_href"})),target_Xemail:(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"target_email"}))}),Tc=function(){var e=Cc;return(0,tr.__call__)(e.compile,e,"[#%{}\\\\]")}(),Lc=(0,tr.__class__)("HrefHyperlinkMacro",[Ko],{__module__:Ac,allowed_in_standalone_mode:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.tuple)(["target_href","target_email","display_text"]),_="href";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"command_arguments":r=a[i];break;case"ref_type":_=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t._get_arguments_spec_list,t,r)}();(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Lc,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:o})),e.command_arguments=r,e.ref_type=_,e.command_argnames=function(){for(var e,t=[],r=o,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,n.argname)}return t}(),(0,tr.__t__)((0,tr.__in__)("display_text",e.command_argnames))&&(e._flm_main_text_argument="display_text")}))},_fields:(0,tr.tuple)(["macroname","command_arguments","ref_type"]),get _get_arguments_spec_list(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"cls":e=_[n];break;case"command_arguments":t=_[n]}}}return function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(Nc,a))}return r}()}))},get pretty_url(){return(0,tr.__getcm__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"cls":e=_[n];break;case"target_href":t=_[n]}}}for(var a=(0,tr.__call__)(tr.str,null,t),i=(0,tr.tuple)(["http://","https://","mailto:"]),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=a;return(0,tr.__call__)(e.startswith,e,l)}())){a=(0,tr.__getslice__)(a,(0,tr.__call__)(tr.len,null,l),null,1);break}}a=function(){var e=a;return(0,tr.__call__)(e.rstrip,e,"/#?")}();return a}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(r.get_all_arguments_info,r,e.command_argnames)}(),i=null,o=null;if((0,tr.__t__)((0,tr.__in__)("target_href",a)))i=function(){var e=(0,tr.__getitem__)(a,"target_href");return(0,tr.__call__)(e.get_content_as_chars,e)}();else{if(!(0,tr.__t__)((0,tr.__in__)("target_email",a))){var l=(0,tr.__call__)(tr.ValueError,null,"FLM Internal Error: no URL or hyper reference provided to href-like macro");throw l.__cause__=null,l}i=(0,tr.__add__)("mailto:",function(){var e=(0,tr.__getitem__)(a,"target_email");return(0,tr.__call__)(e.get_content_as_chars,e)}())}if((0,tr.__t__)((0,tr.__in__)("display_text",a)))o=function(){var e=(0,tr.__getitem__)(a,"display_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();t.flm_href_info=(0,tr.dict)({target_href:i,display_text_nodelist:o})}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__getitem__)(t.flm_href_info,"target_href"),o=(0,tr.__getitem__)(t.flm_href_info,"display_text_nodelist");if((0,tr.__t__)(null===o)){var l=function(){var e=t.parsing_state;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({is_block_level:!1}))}();o=function(){var r,_,n=t.latex_walker;return(0,tr.__call__)(n.make_nodelist,n,[(_=t.latex_walker,(0,tr.__call__)(_.make_node,_,rn,(0,tr.__kwargtrans__)({parsing_state:l,chars:(r=e,(0,tr.__call__)(r.pretty_url,r,i)),pos:t.pos,pos_end:t.pos})))],(0,tr.__kwargtrans__)({parsing_state:l}))}()}return function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_link,t,e.ref_type,i,o,r)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=(0,tr.__add__)("\\",t.macroname),o=[];if((0,tr.__t__)(null!==t.nodeargd))for(var l=(0,tr.__call__)(tr.zip,null,e.command_argnames,t.nodeargd.argnlist),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=c[0],f=c[1],d=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,f)}();if((0,tr.__t__)((0,tr.__in__)(u,(0,tr.tuple)(["target_href","target_email"])))){var p=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,d),1);!function(){var e,t=o;(0,tr.__call__)(t.append,t,(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(d,0),(e=Tc,(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)"m"===_&&(e=r[_])}}return(0,tr.__add__)("\\",(n=e,(0,tr.__call__)(n.group,n,0)));var n}),(0,tr.__getslice__)(d,1,p,1)))),(0,tr.__getitem__)(d,p)))}()}else!function(){var e=o;(0,tr.__call__)(e.append,e,d)}()}return(0,tr.__add__)(i,(0,tr.__call__)("".join,"",o))}))}}),Mc=(0,tr.__class__)("FeatureHref",[cr],{__module__:Ac,feature_name:"href",feature_title:"Hyperlinks",latex_definitions:(0,tr.dict)({macros:[(0,tr.__call__)(Lc,null,(0,tr.__kwargtrans__)({macroname:"href",command_arguments:(0,tr.tuple)(["target_href","display_text"])})),(0,tr.__call__)(Lc,null,(0,tr.__kwargtrans__)({macroname:"url",command_arguments:(0,tr.tuple)(["target_href"])})),(0,tr.__call__)(Lc,null,(0,tr.__kwargtrans__)({macroname:"email",command_arguments:(0,tr.tuple)(["target_email"])}))]}),HrefHyperlinkMacroClass:Lc}),jc=Mc,Ic={};t(Ic,"logger",(()=>Fc)),t(Ic,"GraphicsResource",(()=>zc)),t(Ic,"SimpleIncludeGraphicsMacro",(()=>Bc)),t(Ic,"FeatureSimplePathGraphicsResourceProvider",(()=>qc)),t(Ic,"FeatureClass",(()=>Vc)),t(Ic,"ParsedArgumentsInfo",(()=>Pn)),t(Ic,"LatexWalkerLocatedError",(()=>V_)),t(Ic,"latexnodes_parsers",(()=>pa)),t(Ic,"FLMArgumentSpec",(()=>To)),t(Ic,"FLMMacroSpecBase",(()=>Ko)),t(Ic,"Feature",(()=>sr));tr=a("hoVWB");var Dc={};(0,tr.__nest__)(Dc,"",m_);var Rc="flm.feature.graphics",Fc=function(){var e=Dc;return(0,tr.__call__)(e.getLogger,e,Rc)}(),zc=(0,tr.__class__)("GraphicsResource",[tr.object],{__module__:Rc,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=null,n=null,a=null,i=null,o=null;if(arguments.length){var l=arguments.length-1;if(arguments[l]&&arguments[l].hasOwnProperty("__kwargtrans__")){var s=arguments[l--];for(var c in s)switch(c){case"self":e=s[c];break;case"src_url":t=s[c];break;case"srcset":r=s[c];break;case"graphics_type":_=s[c];break;case"dpi":n=s[c];break;case"pixel_dimensions":a=s[c];break;case"physical_dimensions":i=s[c];break;case"source_info":o=s[c]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,zc,"__init__"),null,e),e.src_url=t,e.srcset=r,e.graphics_type=_,e.dpi=n,e.pixel_dimensions=a,e.physical_dimensions=i,e.source_info=o,e._fields=(0,tr.tuple)(["src_url","srcset","graphics_type","dpi","pixel_dimensions","physical_dimensions","source_info"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),Bc=(0,tr.__class__)("SimpleIncludeGraphicsMacro",[Ko],{__module__:Rc,is_block_level:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Bc,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:"includegraphics",arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),argname:"graphics_options"})),(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"graphics_path"}))]},r)))}))},_fields:(0,tr.tuple)(["macroname"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Insert an external graphics object."}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["graphics_options","graphics_path"]))}();if(t.flmarg_graphics_options_value=function(){var e=(0,tr.__getitem__)(a,"graphics_options");return(0,tr.__call__)(e.get_content_as_chars,e)}(),t.flmarg_graphics_path=function(){var e=(0,tr.__getitem__)(a,"graphics_path");return(0,tr.__call__)(e.get_content_as_chars,e)}(),(0,tr.__t__)(t.flmarg_graphics_options_value)){var i=(0,tr.__call__)(V_,null,(0,tr.__add__)("Graphics options are not supported for now: ".format(),"{}".format(t.flmarg_graphics_options_value)),(0,tr.__kwargtrans__)({pos:(0,tr.__getitem__)(a,"graphics_options").nodelist.pos}));throw i.__cause__=null,i}return t.flm_resources=[(0,tr.dict)({resource_type:"graphics_path",resource_source_type:"file",resource_source:t.flmarg_graphics_path})],t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=r.fragment_renderer,o=t.flmarg_graphics_path;if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"graphics_resource_provider")}()))){var l=(0,tr.__call__)(RuntimeError,null,"FLM's SimpleIncludeGraphicsSpecInfo (\\includegraphics) requires a graphics_resource_provider feature to be installed in the render context");throw l.__cause__=null,l}var s=t.latex_walker.resource_info,c=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"graphics_resource_provider")}(),u=function(){var e=c;return(0,tr.__call__)(e.get_graphics_resource,e,o,s)}();return function(){var e=i;return(0,tr.__call__)(e.render_graphics_block,e,u,r)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=null;if((0,tr.__t__)(null!==r.render_context)){var o=function(){var e=r.render_context;return(0,tr.__call__)(e.feature_render_manager,e,"graphics_resource_provider")}(),l=function(){var e=o;return(0,tr.__call__)(e.get_graphics_resource,e,t.flmarg_graphics_path,(0,tr.__kwargtrans__)({resource_info:t.latex_walker.resource_info}))}(),s=r.render_context.fragment_renderer;if((0,tr.__t__)(null!==s))if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(l.graphics_type,"raster"))&&(0,tr.__call__)(tr.hasattr,null,s,"graphics_raster_magnification")))i=s.graphics_raster_magnification;else if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,s,"graphics_vector_magnification")))i=s.graphics_vector_magnification}else{!function(){var e=Fc;(0,tr.__call__)(e.warning,e,"Recomposing pure latex: we have no access to a graphics resource provider (need a render_context in the pure latex recomposer for that). Graphics resource information will not be available.".format())}();l=(0,tr.__call__)(zc,null,(0,tr.__kwargtrans__)({src_url:t.flmarg_graphics_path}))}var c=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"graphics")}(),u=function(){var e=c;return(0,tr.__call__)(e.py_get,e,"width_scale",null)}(),f=function(){var e=c;return(0,tr.__call__)(e.py_get,e,"set_max_width","\\linewidth")}();if((0,tr.__t__)((0,tr.__t__)(null!==i)&&null!==u)){!function(){var e=Fc;(0,tr.__call__)(e.warning,e,"Applying graphics magnification both from magnification=%f from fragment_renderer option as well as from width_scale recomposer option.")}();i=(0,tr.__mul__)(i,u)}else if((0,tr.__t__)(null!==u))i=u;else if((0,tr.__t__)(null===i))i=1;var d=[];if((0,tr.__t__)(null!==l.physical_dimensions)){var p=l.physical_dimensions,h=p[0];p[1];if((0,tr.__t__)(null!==h)){h=(0,tr.__mul__)((0,tr.__call__)(tr.float,null,h),i);!function(){var e=d;(0,tr.__call__)(e.append,e,"width={}bp".format(h))}()}}return(0,tr.__t__)((0,tr.__t__)(null!==f)&&!1!==f)&&(function(){var e=r;(0,tr.__call__)(e.ensure_latex_package,e,"adjustbox",(0,tr.__kwargtrans__)({options:"export"}))}(),function(){var e=d;(0,tr.__call__)(e.append,e,"max width={}".format(f))}()),(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\includegraphics",(0,tr.__t__)(d)?(0,tr.__add__)((0,tr.__add__)("[",(0,tr.__call__)(",".join,",",function(){for(var e,t=[],r=d,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,n)}return t}())),"]"):""),"{"),(0,tr.__call__)(tr.str,null,l.src_url)),"}")}))}}),qc=(0,tr.__class__)("FeatureSimplePathGraphicsResourceProvider",[sr],{__module__:Rc,feature_name:"graphics_resource_provider",feature_title:"Include external graphics",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Rc,get get_graphics_resource(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"graphics_path":t=n[a];break;case"resource_info":r=n[a]}}}return(0,tr.__call__)(zc,null,(0,tr.__kwargtrans__)({src_url:t}))}))}})}),Vc=qc,Gc={};t(Gc,"logger",(()=>du)),t(Gc,"FloatContentHandlerBase",(()=>pu)),t(Gc,"FloatContentAnyContent",(()=>hu)),t(Gc,"FloatContentIncludeGraphics",(()=>gu)),t(Gc,"FloatContentCells",(()=>vu)),t(Gc,"available_content_handlers",(()=>mu)),t(Gc,"_make_content_handler",(()=>yu)),t(Gc,"float_label_arg",(()=>wu)),t(Gc,"float_caption_arg",(()=>bu)),t(Gc,"FloatEnvironment",(()=>ku)),t(Gc,"FloatInstance",(()=>xu)),t(Gc,"_float_default_counter_formatter_spec",(()=>Ou)),t(Gc,"FloatType",(()=>Pu)),t(Gc,"_default_float_types",(()=>Eu)),t(Gc,"FeatureFloats",(()=>Cu)),t(Gc,"_whatname",(()=>Au)),t(Gc,"_extend_mdef_flm_doc",(()=>Su)),t(Gc,"FeatureClass",(()=>Nu)),t(Gc,"ParsedArgumentsInfo",(()=>Pn)),t(Gc,"latexnodes_nodes",(()=>N_)),t(Gc,"ParsingStateDeltaExtendLatexContextDb",(()=>eo)),t(Gc,"CellsEnvironment",(()=>lu)),t(Gc,"LatexWalkerLocatedError",(()=>V_)),t(Gc,"FLMArgumentSpec",(()=>To)),t(Gc,"SimpleIncludeGraphicsMacro",(()=>Bc)),t(Gc,"build_counter_formatter",(()=>Jl)),t(Gc,"FLMEnvironmentSpecBase",(()=>Jo)),t(Gc,"numbering",(()=>El)),t(Gc,"LatexEnvironmentBodyContentsParser",(()=>Ei)),t(Gc,"MacroSpec",(()=>lo)),t(Gc,"latexnodes_parsers",(()=>pa)),t(Gc,"Feature",(()=>sr)),t(Gc,"make_verb_argument",(()=>el));tr=a("hoVWB");var Uc={};t(Uc,"logger",(()=>Yc)),t(Uc,"_NotSpecified",(()=>Xc)),t(Uc,"LatexTabularRowSeparatorSpec",(()=>Zc)),t(Uc,"LatexTabularColumnSeparatorSpec",(()=>Kc)),t(Uc,"_macro_args",(()=>Jc)),t(Uc,"MergeMacroSpec",(()=>Qc)),t(Uc,"CellMacro",(()=>eu)),t(Uc,"CelldataMacroSpec",(()=>tu)),t(Uc,"CellIndexRangeModel",(()=>ru)),t(Uc,"CellPlacementModel",(()=>_u)),t(Uc,"CellModel",(()=>nu)),t(Uc,"_splfysidews",(()=>au)),t(Uc,"CellPlacementsMappingModel",(()=>iu)),t(Uc,"CellsModel",(()=>ou)),t(Uc,"CellsEnvironment",(()=>lu)),t(Uc,"FeatureCells",(()=>su)),t(Uc,"FeatureClass",(()=>cu)),t(Uc,"FLMMacroSpecError",(()=>dl)),t(Uc,"ParsedArgumentsInfo",(()=>Pn)),t(Uc,"latexnodes_nodes",(()=>N_)),t(Uc,"ParsingStateDelta",(()=>Sn)),t(Uc,"LatexWalkerLocatedError",(()=>V_)),t(Uc,"macrospec",(()=>pi)),t(Uc,"LatexArgumentSpec",(()=>L_)),t(Uc,"FLMArgumentSpec",(()=>To)),t(Uc,"FLMEnvironmentSpecBase",(()=>Jo)),t(Uc,"latexnodes_parsers",(()=>pa)),t(Uc,"Feature",(()=>sr));tr=a("hoVWB");var $c={},Wc={};(0,tr.__nest__)($c,"",m_),(0,tr.__nest__)(Wc,"",pr);var Hc="flm.feature.cells",Yc=function(){var e=$c;return(0,tr.__call__)(e.getLogger,e,Hc)}(),Xc=(0,tr.__class__)("_NotSpecified",[tr.object],{__module__:Hc}),Zc=(0,tr.__class__)("LatexTabularRowSeparatorSpec",[pi.MacroSpec],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Zc,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:"\\",arguments_spec_list:[]}))}))}}),Kc=(0,tr.__class__)("LatexTabularColumnSeparatorSpec",[pi.SpecialsSpec],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Kc,"__init__"),null,e,(0,tr.__kwargtrans__)({specials_chars:"&",arguments_spec_list:[]}))}))}}),Jc=(0,tr.dict)({mergespec:(0,tr.__call__)(L_,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({enable_groups:!1}))}(),(0,tr.__kwargtrans__)({argname:"mergespec"})),styles:(0,tr.__call__)(L_,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["<",">"]),enable_groups:!1,optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"styles"})),styles_mapping:(0,tr.__call__)(L_,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["<",">"]),enable_groups:!1,optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"styles_mapping"})),cellcontents:(0,tr.__call__)(To,null,"{",(0,tr.__kwargtrans__)({argname:"cellcontents",is_block_level:!0}))}),Qc=(0,tr.__class__)("MergeMacroSpec",[pi.MacroSpec],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="merge";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Qc,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__getitem__)(Jc,"mergespec")]}))}))}});(0,tr.__setitem__)(Jc,"placement",(0,tr.__call__)(L_,null,function(){var e=pa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"placement",parsing_state_delta:function(){var e=pi;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(Qc,null)]}))}))}()}))),(0,tr.__setitem__)(Jc,"placement_mapping",(0,tr.__call__)(L_,null,function(){var e=pa;return(0,tr.__call__)(e.LatexDelimitedGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"placement_mapping",parsing_state_delta:function(){var e=pi;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(Qc,null)]}))}))}()})));var eu=(0,tr.__class__)("CellMacro",[dl],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="cell";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,eu,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__getitem__)(Jc,"styles"),(0,tr.__getitem__)(Jc,"placement"),(0,tr.__getitem__)(Jc,"cellcontents")]}))}))}});(0,tr.__setitem__)(Jc,"celldata_contents",(0,tr.__call__)(L_,null,"{",(0,tr.__kwargtrans__)({argname:"celldata_contents",parsing_state_delta:function(){var e=pi;return(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(eu,null),(0,tr.__call__)(Zc,null)],specials:[(0,tr.__call__)(Kc,null)]}))}))}()})));var tu=(0,tr.__class__)("CelldataMacroSpec",[pi.MacroSpec],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="celldata";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,tu,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__getitem__)(Jc,"styles_mapping"),(0,tr.__getitem__)(Jc,"placement_mapping"),(0,tr.__getitem__)(Jc,"celldata_contents")]}))}))}}),ru=(0,tr.__class__)("CellIndexRangeModel",[tr.object],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"start":t=n[a];break;case"end":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ru,"__init__"),null,e),e.start=t,e.end=r}))},_fields:(0,tr.tuple)(["start","end"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__eq__)(e.end,(0,tr.__add__)(e.start,1)))?"{}".format((0,tr.__add__)(e.start,1)):"[{}-{}]".format((0,tr.__add__)(e.start,1),e.end)}))}}),_u=(0,tr.__class__)("CellPlacementModel",[tr.object],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"row_range":t=n[a];break;case"col_range":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_u,"__init__"),null,e),e.row_range=t,e.col_range=r}))},_fields:(0,tr.tuple)(["row_range","col_range"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"{},{}".format((0,tr.__call__)(tr.repr,null,e.row_range),(0,tr.__call__)(tr.repr,null,e.col_range))}))}}),nu=(0,tr.__class__)("CellModel",[tr.object],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement":t=a[i];break;case"styles":r=a[i];break;case"content_nodes":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,nu,"__init__"),null,e),e.placement=t,e.styles=r,e.content_nodes=_}))},_fields:(0,tr.tuple)(["placement","styles","content_nodes"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"<Cell @{} <{}> ({})>".format((0,tr.__call__)(tr.repr,null,e.placement),(0,tr.__call__)(" ".join," ",e.styles),(0,tr.__call__)(au,null,function(){var t=e.content_nodes;return(0,tr.__call__)(t.latex_verbatim,t)}()))}))}}),au=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return function(){var t=Wc;return(0,tr.__call__)(t.sub,t,"(^\\s+|\\s+$)"," ",e)}()},iu=(0,tr.__class__)("CellPlacementsMappingModel",[tr.object],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"row_placements":t=n[a];break;case"col_placements":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,iu,"__init__"),null,e),e.row_placements=t,e.col_placements=r}))},_fields:(0,tr.tuple)(["row_placements","col_placements"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("{}(".format(e.__class__.__name__),(0,tr.__call__)("".join,"",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"\n    {}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return(0,tr.py_iter)(r)}())),"\n)".format())}))},get _get_index_range(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"placements":t=a[i];break;case"j":r=a[i];break;case"current":_=a[i]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return(0,tr.__call__)(ru,null,_,(0,tr.__add__)(_,1));if((0,tr.__t__)((0,tr.__lt__)(r,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,t),1))))return(0,tr.__getitem__)(t,r);var o=(0,tr.__getitem__)(t,(0,tr.__neg__)(1));if((0,tr.__t__)(null===o.end)){var l=(0,tr.__add__)(o.start,(0,tr.__add__)((0,tr.__sub__)(r,(0,tr.__call__)(tr.len,null,t)),1));return(0,tr.__call__)(ru,null,l,(0,tr.__add__)(l,1))}return o}))},get get_row_index_range(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"row_j":t=n[a];break;case"current_row":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_._get_index_range,_,e.row_placements,t,r)}()}))},get get_col_index_range(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"col_j":t=n[a];break;case"current_col":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_._get_index_range,_,e.col_placements,t,r)}()}))},get start_row_col(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"current_row":t=n[a];break;case"current_col":r=n[a]}}}return(0,tr.tuple)([function(){var r=e;return(0,tr.__call__)(r.get_row_index_range,r,0,t)}().start,function(){var t=e;return(0,tr.__call__)(t.get_col_index_range,t,0,r)}().start])}))}}),ou=(0,tr.__class__)("CellsModel",[tr.object],{__module__:Hc,get __init__(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ou,"__init__"),null,e),e.current_row=0,e.current_col=0,e.row_names=(0,tr.dict)({}),e.column_names=(0,tr.dict)({}),(0,tr.__t__)(t))return e.cells_size=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"cells_size")}(),e.cells_data=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"cells_data")}(),void function(){var t=e;(0,tr.__call__)(t.finalize,t)}();e.cells_size=[null,null],e.cells_data=[],e.grid_data=null}))},_fields:(0,tr.tuple)(["cells_size","cells_data"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=(0,tr.__call__)("".join,"",function(){for(var t,r=[],_=e.cells_data,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__add__)("\n        ",(0,tr.__call__)(tr.repr,null,a)))}return r}());return"{}(\n    cells_size={},\n    cells_data=[{}\n    ])".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.cells_size),n)}))},get add_cell_node(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cell_node":t=a[i];break;case"default_placement":r=a[i];break;case"default_styles":_=a[i]}}}var o=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["styles","placement","cellcontents"]))}();if((0,tr.__t__)(null===_))_=[];if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(o,"styles");return(0,tr.__call__)(e.was_provided,e)}()))var l=(0,tr.__add__)(function(){var e,t=(e=(0,tr.__getitem__)(o,"styles"),(0,tr.__call__)(e.get_content_as_chars,e));return(0,tr.__call__)(t.py_split,t," ")}(),_);else l=_;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(o,"placement");return(0,tr.__call__)(e.was_provided,e)}()))var s=function(){var e=(0,tr.__getitem__)(o,"placement");return(0,tr.__call__)(e.get_content_nodelist,e)}();else s=r;var c=function(){var e=(0,tr.__getitem__)(o,"cellcontents");return(0,tr.__call__)(e.get_content_nodelist,e)}();return function(){var t=e;return(0,tr.__call__)(t.add_cell,t,s,l,c)}()}))},get add_cell(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement_spec":t=a[i];break;case"styles":r=a[i];break;case"content_nodes":_=a[i]}}}var o=function(){var r=e;return(0,tr.__call__)(r.parse_placement_spec,r,t)}(),l=(0,tr.__call__)(nu,null,(0,tr.__kwargtrans__)({placement:o,styles:r,content_nodes:_}));return function(){var t=e.cells_data;(0,tr.__call__)(t.append,t,l)}(),(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(e.cells_size,0))||(0,tr.__ge__)(l.placement.row_range.end,(0,tr.__getitem__)(e.cells_size,0)))&&(0,tr.__setitem__)(e.cells_size,0,l.placement.row_range.end),(0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(e.cells_size,1))||(0,tr.__ge__)(l.placement.col_range.end,(0,tr.__getitem__)(e.cells_size,1)))&&(0,tr.__setitem__)(e.cells_size,1,l.placement.col_range.end),function(){var t=e;(0,tr.__call__)(t.move_to_col,t,l.placement.col_range.end)}(),l}))},get move_to_col(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"col":t=_[n]}}}e.current_col=t}))},get move_next_row(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.current_row=(0,tr.__call__)(tr.__iadd__,null,e.current_row,1),e.current_col=0}))},get finalize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.grid_data=function(){for(var t,r=[],_=0;_<(0,tr.__getitem__)(e.cells_size,0);_++)t=void 0,t=r,(0,tr.__call__)(t.append,t,function(){for(var t,r=[],_=0;_<(0,tr.__getitem__)(e.cells_size,1);_++)t=void 0,t=r,(0,tr.__call__)(t.append,t,null);return r}());return r}();for(var n=e.cells_data,a=0;a<(0,tr.len)(n);a++)for(var i=(0,tr.__getitem__)(n,a),o=!0,l=i.placement.row_range.start;l<i.placement.row_range.end;l++)for(var s=i.placement.col_range.start;s<i.placement.col_range.end;s++){if((0,tr.__t__)(null!==(0,tr.__getitem__)((0,tr.__getitem__)(e.grid_data,l),s))){var c=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.grid_data,l),s),"cell"),u=(0,tr.__call__)(tr.ValueError,null,"{} overlaps with {}".format((0,tr.__call__)(tr.repr,null,i),(0,tr.__call__)(tr.repr,null,c)));throw u.__cause__=null,u}(0,tr.__setitem__)((0,tr.__getitem__)(e.grid_data,l),s,(0,tr.dict)({cell:i,is_topleft:o}));o=!1}}))},get add_celldata_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"celldata_node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["styles_mapping","placement_mapping","celldata_contents"]))}(),i=function(){for(var e,t,r=[],_=(e=(0,tr.__getitem__)(a,"styles_mapping"),t=(0,tr.__call__)(e.get_content_as_chars,e),(0,tr.__call__)(t.py_split,t,",")),n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n);!function(){var e=r;(0,tr.__call__)(e.append,e,function(){var e=i;return(0,tr.__call__)(e.py_split,e)}())}()}return r}(),o=function(){var e=(0,tr.__getitem__)(a,"placement_mapping");return(0,tr.__call__)(e.get_content_nodelist,e)}(),l=function(){var e=(0,tr.__getitem__)(a,"celldata_contents");return(0,tr.__call__)(e.get_content_nodelist,e)}(),s=function(){var e=l;return(0,tr.__call__)(e.split_at_node,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("node"===_)e=r[_]}}return(0,tr.__t__)((n=e,(0,tr.__call__)(n.isNodeType,n,an)))&&(0,tr.__eq__)(e.macroname,"\\");var n}))}(),c=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("node"===_)e=r[_]}}return!!(0,tr.__t__)((0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.isNodeType,t,ln)}())&&(0,tr.__eq__)(e.specials_chars,"&"))},u=function(){for(var e,t,r=[],_=s,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,t=void 0,t=r,(0,tr.__call__)(t.append,t,(e=a,(0,tr.__call__)(e.split_at_node,e,c)))}return r}();!function(){var t=e;(0,tr.__call__)(t.add_celldata,t,o,i,u)}()}))},get add_celldata(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"placement_mapping_spec":t=a[i];break;case"styles_mapping":r=a[i];break;case"data_content_nodes":_=a[i]}}}var o=function(){var r=e;return(0,tr.__call__)(r.parse_placement_mapping_spec,r,t)}(),l=function(){var t=o;return(0,tr.__call__)(t.start_row_col,t,(0,tr.__kwargtrans__)({current_row:e.current_row,current_col:e.current_col}))}();e.current_row=l[0],e.current_col=l[1];for(var s=0,c=_,u=0;u<(0,tr.len)(c);u++){for(var f=(0,tr.__getitem__)(c,u),d=0,p=f,h=0;h<(0,tr.len)(p);h++){var g=(0,tr.__getitem__)(p,h),v=function(){var t=o;return(0,tr.__call__)(t.get_row_index_range,t,s,(0,tr.__kwargtrans__)({current_row:e.current_row}))}(),m=function(){var t=o;return(0,tr.__call__)(t.get_col_index_range,t,d,(0,tr.__kwargtrans__)({current_col:e.current_col}))}(),y=(0,tr.__call__)(_u,null,(0,tr.__kwargtrans__)({row_range:v,col_range:m}));if((0,tr.__t__)((0,tr.__lt__)(d,(0,tr.__call__)(tr.len,null,r))))var w=(0,tr.__getitem__)(r,d);else w=(0,tr.__getitem__)(r,(0,tr.__neg__)(1));var b=function(){var e=g.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,g)}();if((0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,b),1))&&(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(b,0);return(0,tr.__call__)(e.isNodeType,e,an)}())&&(0,tr.__eq__)((0,tr.__getitem__)(b,0).macroname,"cell"))){var k=function(){var t=e;return(0,tr.__call__)(t.add_cell_node,t,(0,tr.__getitem__)(b,0),(0,tr.__kwargtrans__)({default_placement:y,default_styles:w}))}();d=(0,tr.__call__)(tr.__iadd__,null,d,(0,tr.__sub__)(k.placement.col_range.end,k.placement.col_range.start))}else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,b),0))){e.current_col=m.end;d=(0,tr.__call__)(tr.__iadd__,null,d,1)}else{!function(){var t=e;(0,tr.__call__)(t.add_cell,t,y,w,g)}();d=(0,tr.__call__)(tr.__iadd__,null,d,1)}}!function(){var t=e;(0,tr.__call__)(t.move_next_row,t)}();s=(0,tr.__call__)(tr.__iadd__,null,s,1),d=0}}))},_rx_int:function(){var e=Wc;return(0,tr.__call__)(e.compile,e,"^\\d+$")}(),get parse_cell_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Xc;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"index_spec":t=i[o];break;case"is_row":r=i[o];break;case"is_col":_=i[o];break;case"py_default":n=i[o]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.str)))var l=t;else l=function(){var e=t;return(0,tr.__call__)(e.get_content_as_chars,e)}();l=function(){var e=l;return(0,tr.__call__)(e.strip,e)}();if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(l))||(0,tr.__eq__)(l,"."))){if((0,tr.__t__)(n!==Xc))return n;if((0,tr.__t__)(r))return e.current_row;if((0,tr.__t__)(_))return e.current_col;var s;throw(s=(0,tr.__call__)(RuntimeError,null,"Internal error: Neither is_row nor is_col is set!")).__cause__=null,s}if((0,tr.__t__)(function(){var t=e._rx_int;return(0,tr.__call__)(t.match,t,l)}()))return(0,tr.__sub__)((0,tr.__call__)(tr.int,null,l),1);if((0,tr.__t__)((0,tr.__t__)(r)&&(0,tr.__in__)(l,e.row_names)))return(0,tr.__getitem__)(e.row_names,l);if((0,tr.__t__)((0,tr.__t__)(_)&&(0,tr.__in__)(l,e.col_names)))return(0,tr.__getitem__)(e.col_names,l);throw(s=(0,tr.__call__)(tr.ValueError,null,"Invalid cell index: {}, expected number or valid alias name".format(l))).__cause__=null,s}))},get parse_cell_index_range_spec(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Xc;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"range_spec_s":t=l[s];break;case"is_row":r=l[s];break;case"is_col":_=l[s];break;case"py_default":n=l[s];break;case"default_start":a=l[s];break;case"default_end":i=l[s]}}}if((0,tr.__t__)((0,tr.__in__)(",",t))){for(var c=function(){var e=t;return(0,tr.__call__)(e.py_split,e,",")}(),u=[],f=null,d=null,p=c,h=0;h<(0,tr.len)(p);h++){for(var g=(0,tr.__getitem__)(p,h),v=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,g,(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:n}))}(),m=v[0],y=v[1],w=m;w<y;w++){if((0,tr.__t__)((0,tr.__ge__)(w,(0,tr.__call__)(tr.len,null,u))))u=(0,tr.__call__)(tr.__iadd__,null,u,function(){for(var e,t=[],r=0;r<(0,tr.__add__)((0,tr.__sub__)(y,(0,tr.__call__)(tr.len,null,u)),1);r++)e=void 0,e=t,(0,tr.__call__)(e.append,e,!1);return t}());(0,tr.__setitem__)(u,w,!0)}if((0,tr.__t__)((0,tr.__t__)(null===f)||(0,tr.__gt__)(f,m)))f=m;if((0,tr.__t__)((0,tr.__t__)(null===d)||(0,tr.__lt__)(d,y)))d=y}for(w=f;w<d;w++)if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__getitem__)(u,w)))){throw(O=(0,tr.__call__)(tr.ValueError,null,"Specified range {} is not contiguous".format(t))).__cause__=null,O}return(0,tr.tuple)([f,d])}if((0,tr.__t__)((0,tr.__in__)("-",t))){v=function(){var e=t;return(0,tr.__call__)(e.py_split,e,"-",1)}();var b=v[0],k=v[1],x=(m=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,b,(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:a}))}(),function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,k,(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:null}))}());if((0,tr.__t__)(null===x))y=i;else y=(0,tr.__add__)(x,1);return(0,tr.tuple)([m,y])}if((0,tr.__t__)((0,tr.__in__)("+",t))){v=function(){var e=t;return(0,tr.__call__)(e.py_split,e,"+",1)}(),b=v[0];var O,P=v[1];m=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_spec,t,b,(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:n}))}();if((0,tr.__t__)(!(0,tr.__t__)(function(){var t=e._rx_int;return(0,tr.__call__)(t.match,t,P)}())))throw(O=(0,tr.__call__)(tr.ValueError,null,"Invalid number in START+N cell index range specification: {}".format(P))).__cause__=null,O;var E=(0,tr.__call__)(tr.int,null,P);y=(0,tr.__add__)(m,E);return(0,tr.tuple)([m,y])}w=function(){var a=e;return(0,tr.__call__)(a.parse_cell_index_spec,a,t,(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:n}))}();return(0,tr.tuple)([w,(0,tr.__add__)(w,1)])}))},get parse_placement_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Xc;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=Xc;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"placement_index_spec":t=l[s];break;case"is_row":r=l[s];break;case"is_col":_=l[s];break;case"py_default":n=l[s];break;case"default_start":a=l[s];break;case"default_end":i=l[s]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0))){if((0,tr.__t__)(r))return(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:e.current_row,end:(0,tr.__add__)(e.current_row,1)}));if((0,tr.__t__)(_))return(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:e.current_col,end:(0,tr.__add__)(e.current_col,1)}));throw(f=(0,tr.__call__)(RuntimeError,null,"Internal error, neither is_row nor is_col was set here.")).__cause__=null,f}var c=function(){var e=t.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,t)}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,c),1))){if((0,tr.__t__)(r))var u="ROW";else if((0,tr.__t__)(_))u="COL";else u=null;var f;throw(f=(0,tr.__call__)(V_,null,"Bad cell index or merge range specification, expected {} or \\merge{}{}-RANGE{}, got {} ({} nodes)".format(u,"{",u,"}",(0,tr.__call__)(tr.repr,null,t),(0,tr.__call__)(tr.len,null,c)),(0,tr.__kwargtrans__)({pos:c.pos}))).__cause__=null,f}var d=(0,tr.__getitem__)(c,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,an)}())&&(0,tr.__eq__)(d.macroname,"merge"))){var p=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:d}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["mergespec"]))}(),h=function(){var e=(0,tr.__getitem__)(p,"mergespec");return(0,tr.__call__)(e.get_content_as_chars,e)}(),g=i;if((0,tr.__t__)(g===Xc)){if((0,tr.__t__)(r))g=(0,tr.__getitem__)(e.cells_size,0);if((0,tr.__t__)(_))g=(0,tr.__getitem__)(e.cells_size,1)}var v=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,h,(0,tr.__kwargtrans__)({is_row:r,is_col:_,default_start:a,default_end:g}))}(),m=v[0],y=v[1];return(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:m,end:y}))}var w=function(){var t,a=e;return(0,tr.__call__)(a.parse_cell_index_spec,a,(t=c,(0,tr.__call__)(t.get_content_as_chars,t)),(0,tr.__kwargtrans__)({is_row:r,is_col:_,py_default:n}))}();return(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:w,end:(0,tr.__add__)(w,1)}))}))},get parse_placement_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"placement_spec":t=_[n]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,_u)))return t;var a=(l=(0,tr.tuple)([[],[]]))[0],i=l[1];if((0,tr.__t__)(null!==t)){var o=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,";",(0,tr.__kwargtrans__)({keep_empty:!0}))}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),2)))a=(l=o)[0],i=l[1];else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),1))){var l;i=(l=o)[0]}else if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,o),0))){var s=(0,tr.__call__)(V_,null,"Bad cell placement specification, expected ROW;COL or COL, got {}".format((0,tr.__call__)(au,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}())),(0,tr.__kwargtrans__)({pos:t.pos}));throw s.__cause__=null,s}}var c=function(){var t=e;return(0,tr.__call__)(t.parse_placement_index_spec,t,a,(0,tr.__kwargtrans__)({is_row:!0}))}(),u=function(){var t=e;return(0,tr.__call__)(t.parse_placement_index_spec,t,i,(0,tr.__kwargtrans__)({is_col:!0}))}();return(0,tr.__call__)(_u,null,(0,tr.__kwargtrans__)({row_range:c,col_range:u}))}))},get parse_placement_mapping_index_spec(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"placement_mapping_index_spec":t=i[o];break;case"index_end":r=i[o];break;case"is_row":_=i[o];break;case"is_col":n=i[o]}}}if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,t),0)))return[];for(var l=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,",",(0,tr.__kwargtrans__)({keep_empty:!0}))}(),s=0,c=[],u=l,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=function(){var e=d.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,d)}();if((0,tr.__t__)((0,tr.__ne__)((0,tr.__call__)(tr.len,null,p),1))){if((0,tr.__t__)(_))var h="ROW-RANGE";else if((0,tr.__t__)(n))h="COL-RANGE";else h=null;var g=(0,tr.__call__)(V_,null,"Bad cell index or range or merge range specification, expected {} or \\merge{}{}-RANGE{}, got {} ({} nodes)".format(h,"{",h,"}",(0,tr.__call__)(tr.repr,null,placement_index_spec),(0,tr.__call__)(tr.len,null,p)),(0,tr.__kwargtrans__)({pos:p.pos}));throw g.__cause__=null,g}var v=(0,tr.__getitem__)(p,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=v;return(0,tr.__call__)(e.isNodeType,e,an)}())&&(0,tr.__eq__)(v.macroname,"merge"))){var m=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:v}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["mergespec"]))}(),y=function(){var e=(0,tr.__getitem__)(m,"mergespec");return(0,tr.__call__)(e.get_content_as_chars,e)}(),w=function(){var t=e;return(0,tr.__call__)(t.parse_cell_index_range_spec,t,y,(0,tr.__kwargtrans__)({is_row:_,is_col:n,py_default:s,default_start:s,default_end:null}))}(),b=w[0],k=w[1];!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:b,end:k})))}();s=k}else{w=function(){var t,r=e;return(0,tr.__call__)(r.parse_cell_index_range_spec,r,(t=p,(0,tr.__call__)(t.get_content_as_chars,t)),(0,tr.__kwargtrans__)({is_row:_,is_col:n,py_default:s,default_start:s,default_end:null}))}();var x=w[0],O=w[1];if((0,tr.__t__)(null===O)){!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:x,end:null})))}();s=null}else for(var P=x;P<O;P++){!function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.__call__)(ru,null,(0,tr.__kwargtrans__)({start:P,end:(0,tr.__add__)(P,1)})))}();s=(0,tr.__add__)(P,1)}}}return c}))},get parse_placement_mapping_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"placement_mapping_spec":t=_[n]}}}var a=function(){var e=t;return(0,tr.__call__)(e.split_at_chars,e,";",(0,tr.__kwargtrans__)({keep_empty:!0}))}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),2)))var i=(s=a)[0],o=s[1];else if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),1)))i=[],o=(s=a)[0];else{if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,a),0))){var l=(0,tr.__call__)(V_,null,"Expected ROWS;COLS or COLS or  for placement argument, got {}".format((0,tr.__call__)(au,null,function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}())),(0,tr.__kwargtrans__)({pos:t.pos}));throw l.__cause__=null,l}var s;i=(s=(0,tr.tuple)([[],[]]))[0],o=s[1]}var c=function(){var t=e;return(0,tr.__call__)(t.parse_placement_mapping_index_spec,t,i,(0,tr.__kwargtrans__)({index_end:null,is_row:!0}))}(),u=function(){var t=e;return(0,tr.__call__)(t.parse_placement_mapping_index_spec,t,o,(0,tr.__kwargtrans__)({index_end:null,is_col:!0}))}();return(0,tr.__call__)(iu,null,(0,tr.__kwargtrans__)({row_placements:c,col_placements:u}))}))}}),lu=(0,tr.__class__)("CellsEnvironment",[Jo],{__module__:Hc,is_block_level:!0,allowed_in_standalone_mode:!0,body_contents_is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="cells";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"environmentname":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,lu,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t}))}))},_fields:(0,tr.tuple)(["environmentname"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}return function(){var e,r=pi;return(0,tr.__call__)(r.LatexEnvironmentBodyContentsParser,r,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(e=pi,(0,tr.__call__)(e.ParsingStateDeltaExtendLatexContextDb,e,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(eu,null),(0,tr.__call__)(tu,null),(0,tr.__call__)(Zc,null)]}))}))),child_parsing_state_delta:(0,tr.__call__)(Sn,null)}))}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}for(var a=(0,tr.__call__)(ou,null),i=t.nodelist,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,an)}())){if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"cell"))){!function(){var e=a;(0,tr.__call__)(e.add_cell_node,e,l)}();continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"celldata"))){!function(){var e=a;(0,tr.__call__)(e.add_celldata_node,e,l)}();continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"\\"))){!function(){var e=a;(0,tr.__call__)(e.move_next_row,e)}();continue}}if(!(0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,nn)}())&&!(0,tr.__t__)((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var e=l.chars;return(0,tr.__call__)(e.strip,e)}()),0))){var s=(0,tr.__call__)(V_,null,"You cannot place {} here.  Expected: \\cell, \\celldata, \\\\.".format((0,tr.__call__)(au,null,function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}())));throw s.__cause__=null,s}}!function(){var e=a;(0,tr.__call__)(e.finalize,e)}(),t.flm_cells_model=a}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_cells,e,(0,tr.__kwargtrans__)({cells_model:t.flm_cells_model,render_context:r}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"cells")}();if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.py_get,e,"keep_as_is",!1)}()))return!1;if((0,tr.__t__)((0,tr.__t__)(null===r.render_context)||(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,r.render_context,"fragment_renderer")))||null===r.render_context.fragment_renderer)){var o=(0,tr.__call__)(tr.ValueError,null,"Recomposing cells while compiling them into a tabularray requires a render_context in the pure latex recomposer with a LatexFragmentRenderer instance.");throw o.__cause__=null,o}var l=r.render_context,s=l.fragment_renderer;return function(){var e=s;return(0,tr.__call__)(e.render_cells,e,(0,tr.__kwargtrans__)({cells_model:t.flm_cells_model,render_context:l,render_cell_nodelist_contents_fn:function(e,t){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"nodelist":e=n[a];break;case"render_context":t=n[a]}}}return i=r,(0,tr.__call__)(i.subrecompose,i,e);var i}}))}()}))}}),su=(0,tr.__class__)("FeatureCells",[sr],{__module__:Hc,feature_name:"cells",feature_title:"Typesetting data tables",DocumentManager:null,RenderManager:null,get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:[(0,tr.__call__)(lu,null)]}))}))},get add_flm_doc_latex_context_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"base_feature_definitions":t=_[n]}}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(eu,null),(0,tr.__call__)(tu,null),(0,tr.__call__)(Qc,null),(0,tr.__call__)(Zc,null)],specials:[(0,tr.__call__)(Kc,null)]}))}))}}),cu=su,uu={};(0,tr.__nest__)(uu,"",m_);var fu="flm.feature.floats",du=function(){var e=uu;return(0,tr.__call__)(e.getLogger,e,fu)}(),pu=(0,tr.__class__)("FloatContentHandlerBase",[tr.object],{__module__:fu,get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"extend_latex_context":t=_[n]}}}}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_node":t=n[a];break;case"content_nodes":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"This method needs to be reimplemented in subclasses!".format());throw i.__cause__=null,i}))}}),hu=(0,tr.__class__)("FloatContentAnyContent",[pu],{__module__:fu,_fields:(0,tr.tuple)([]),get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_node":t=n[a];break;case"content_nodes":r=n[a]}}}return r}))}}),gu=(0,tr.__class__)("FloatContentIncludeGraphics",[pu],{__module__:fu,_fields:(0,tr.tuple)([]),get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"extend_latex_context":t=_[n]}}}!function(){var e=(0,tr.__getitem__)(t,"macros");(0,tr.__call__)(e.append,e,(0,tr.__call__)(Bc,null,(0,tr.__kwargtrans__)({macroname:"includegraphics"})))}()}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_node":t=n[a];break;case"content_nodes":r=n[a]}}}r=function(){var e=r.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,r)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,r),1))){var i=(0,tr.__getitem__)(r,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,an)}())&&(0,tr.__eq__)(i.macroname,"includegraphics")))return r}var o=(0,tr.__call__)(V_,null,"expected exactly one \\includegraphics command".format(),(0,tr.__kwargtrans__)({pos:r.pos}));throw o.__cause__=null,o}))}}),vu=(0,tr.__class__)("FloatContentCells",[pu],{__module__:fu,_fields:(0,tr.tuple)([]),get float_content_set_extra_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"extend_latex_context":t=_[n]}}}!function(){var e=(0,tr.__getitem__)(t,"environments");(0,tr.__call__)(e.append,e,(0,tr.__call__)(lu,null))}()}))},get float_handle_content_nodes(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_node":t=n[a];break;case"content_nodes":r=n[a]}}}r=function(){var e=r.latex_walker;return(0,tr.__call__)(e.filter_whitespace_comments_nodes,e,r)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,r),1))){var i=(0,tr.__getitem__)(r,0);if((0,tr.__t__)((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.isNodeType,e,on)}())&&(0,tr.__eq__)(i.environmentname,"cells")))return r}var o=(0,tr.__call__)(V_,null,"expected exactly one \\begin{}cells{}...\\end{}cells{} environment".format("{","}","{","}"),(0,tr.__kwargtrans__)({pos:r.pos}));throw o.__cause__=null,o}))}}),mu=(0,tr.dict)({any:hu,includegraphics:gu,cells:vu}),yu=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("c"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,pu)))return e;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,tr.str)))e=(0,tr.dict)({name:e});if((0,tr.__t__)((0,tr.__in__)((0,tr.__getitem__)(e,"name"),mu)))return(0,tr.__call__)((0,tr.__getitem__)(mu,(0,tr.__getitem__)(e,"name")),null,(0,tr.__kwargtrans__)(function(){var t=e;return(0,tr.__call__)(t.py_get,t,"config",(0,tr.dict)({}))}()));var n=(0,tr.__call__)(tr.ValueError,null,"Invalid float handler specification: {}".format((0,tr.__call__)(tr.repr,null,e)));throw n.__cause__=null,n},wu=(0,tr.__call__)(lo,null,"label",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])}))}(),argname:"label"}))]})),bu=(0,tr.__call__)(lo,null,"caption",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,"{",(0,tr.__kwargtrans__)({argname:"captiontext"}))]})),ku=(0,tr.__class__)("FloatEnvironment",[Jo],{__module__:fu,is_block_level:!0,float_content_is_block_level:!0,float_content_render_at_environment_node_location:!0,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_type":t=n[a];break;case"content_handlers":r=n[a]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ku,"__init__"),null,e,(0,tr.__kwargtrans__)({environmentname:t,arguments_spec_list:[]})),(0,tr.__t__)(null===r))r=["includegraphics","cells"];r=function(){for(var e,t=[],_=r,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(yu,null,a))}return t}();e.float_type=t,e.content_handlers=r}))},_fields:(0,tr.tuple)(["float_type","content_handlers"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}for(var o=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[wu,bu],environments:[],specials:[]})),l=e.content_handlers,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);!function(){var e=c;(0,tr.__call__)(e.float_content_set_extra_definitions,e,o)}()}return(0,tr.__call__)(Ei,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(eo,null,(0,tr.__kwargtrans__)({extend_latex_context:o,set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({is_block_level:e.float_content_is_block_level}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}t.flm_float_label=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({ref_label_prefix:null,ref_label:null,label_node:null})),t.flm_float_caption=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({caption_nodelist:null,caption_node:null}));for(var a=[],i=t.nodelist,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if((0,tr.__t__)(function(){var e=l;return(0,tr.__call__)(e.isNodeType,e,an)}())){if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"label"))){(0,tr.__setitem__)(t.flm_float_label,"label_node",l);var s,c=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:l}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["label"]))}(),u=function(){var e=(0,tr.__getitem__)(c,"label");return(0,tr.__call__)(e.get_content_as_chars,e)}();if((0,tr.__t__)((0,tr.__in__)(":",u)))var f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,":",1)}(),d=f[0],p=f[1];else d=(f=(0,tr.tuple)([null,u]))[0],p=f[1];if((0,tr.__t__)((0,tr.__ne__)(d,e.float_type)))throw(s=(0,tr.__call__)(V_,null,"{} label must start with the prefix {}:... (got {})".format(e.float_type,e.float_type,u),(0,tr.__kwargtrans__)({pos:l.pos}))).__cause__=null,s;if((0,tr.__setitem__)(t.flm_float_label,"ref_label_prefix",d),(0,tr.__setitem__)(t.flm_float_label,"ref_label",p),(0,tr.__t__)((0,tr.__ne__)(d,e.float_type)))throw(s=(0,tr.__call__)(V_,null,"Float's \\label{}...{} must have the prefix {}:".format("{","}",e.float_type),(0,tr.__kwargtrans__)({pos:l.pos}))).__cause__=null,s;continue}if((0,tr.__t__)((0,tr.__eq__)(l.macroname,"caption"))){(0,tr.__setitem__)(t.flm_float_caption,"caption_node",l);var h=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:l}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["captiontext"]))}(),g=function(){var e=(0,tr.__getitem__)(h,"captiontext");return(0,tr.__call__)(e.get_content_nodelist,e)}();(0,tr.__setitem__)(t.flm_float_caption,"caption_nodelist",g);continue}}!function(){var e=a;(0,tr.__call__)(e.append,e,l)}()}a=function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,a,(0,tr.__kwargtrans__)({parsing_state:t.nodelist.parsing_state}))}();var v=[],m=null;for(i=e.content_handlers,o=0;o<(0,tr.len)(i);o++){var y=(0,tr.__getitem__)(i,o);try{m=function(){var e=y;return(0,tr.__call__)(e.float_handle_content_nodes,e,t,a)}()}catch(s){if(!(0,tr.isinstance)(s,V_))throw s;var w=s;!function(){var e=v;(0,tr.__call__)(e.append,e,"*** {} error: {}".format(y.__class__.__name__,(0,tr.__call__)(tr.str,null,w)))}()}}if((0,tr.__t__)(null===m)){var b=(0,tr.__call__)(V_,null,(0,tr.__add__)("Invalid {} contents! The following content handler(s) were unable to parse the float's content [other than possible \\caption and \\label commands]:\n".format(e.float_type),(0,tr.__call__)("\n".join,"\n",v)),(0,tr.__kwargtrans__)({pos:t.pos}));throw b.__cause__=null,b}return t.flm_float_content_nodelist=m,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"floats")}(),o=(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"),l=(0,tr.__getitem__)(t.flm_float_label,"ref_label"),s=!0;if((0,tr.__t__)((0,tr.__t__)(null===o)&&null===l))s=!1;var c=function(){var r=i;return(0,tr.__call__)(r.register_float,r,(0,tr.__kwargtrans__)({node:t,float_type:e.float_type,numbered:s,ref_label_prefix:o,ref_label:l,caption_nodelist:(0,tr.__getitem__)(t.flm_float_caption,"caption_nodelist"),content_nodelist:t.flm_float_content_nodelist}))}();return(0,tr.__t__)(e.float_content_render_at_environment_node_location)?function(){var _=e;return(0,tr.__call__)(_.render_float,_,c,t,r)}():function(){var t=r.fragment_renderer;return(0,tr.__call__)(t.render_nothing,t,(0,tr.__kwargtrans__)({annotations:["float-placeholder","float-{}-placeholder".format(e.float_type)],render_context:r}))}()}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"float_instance":t=a[i];break;case"node":r=a[i];break;case"render_context":_=a[i]}}}var o=_.fragment_renderer;return function(){var e=o;return(0,tr.__call__)(e.render_float,e,t,_)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"floats")}(),o=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"keep_as_is",!1)}(),l=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"captioncmd_for_num_only","\\caption{}")}();if((0,tr.__t__)(o))return!1;var s=(0,tr.__t__)(null!==(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"))||null!==(0,tr.__getitem__)(t.flm_float_label,"ref_label"),c=s,u=null!==(0,tr.__getitem__)(t.flm_float_caption,"caption_nodelist"),f="flmFloat",d=(0,tr.__add__)((0,tr.__add__)("{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}");if((0,tr.__t__)(c))if((0,tr.__t__)(u))d=(0,tr.__call__)(tr.__iadd__,null,d,"{NumCap}");else d=(0,tr.__call__)(tr.__iadd__,null,d,"{NumOnly}");else if((0,tr.__t__)(u))d=(0,tr.__call__)(tr.__iadd__,null,d,"{CapOnly}");else d=(0,tr.__call__)(tr.__iadd__,null,d,"{Bare}");var p=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\begin{",f),"}"),d);p=(0,tr.__call__)(tr.__iadd__,null,p,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),p=(0,tr.__call__)(tr.__iadd__,null,p,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flm_float_content_nodelist)}());if((0,tr.__t__)(u))var p=(0,tr.__call__)(tr.__iadd__,null,p,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,(0,tr.__getitem__)(t.flm_float_caption,"caption_node"))}());if((0,tr.__t__)(s)){if((0,tr.__t__)(!(0,tr.__t__)(u)))p=(0,tr.__call__)(tr.__iadd__,null,p,l);var h=(0,tr.__getitem__)(t.flm_float_label,"ref_label_prefix"),g=(0,tr.__getitem__)(t.flm_float_label,"ref_label"),v=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",h,g,t.latex_walker.resource_info)}();p=(0,tr.__call__)(tr.__iadd__,null,p,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(v,"safe_label")),"}"))}return p=(0,tr.__call__)(tr.__iadd__,null,p,(0,tr.__add__)((0,tr.__add__)("\\end{",f),"}"))}))}}),xu=(0,tr.__class__)("FloatInstance",[tr.object],{__module__:fu,get __init__(){return(0,tr.__get__)(this,(function(e){var t=null,r=null,_=null,n=null,a=null,i=null,o=null,l=null,s=null,c=null;if(arguments.length){var u=arguments.length-1;if(arguments[u]&&arguments[u].hasOwnProperty("__kwargtrans__")){var f=arguments[u--];for(var d in f)switch(d){case"self":e=f[d];break;case"float_type":t=f[d];break;case"float_type_info":r=f[d];break;case"counter_value":_=f[d];break;case"counter_numprefix":n=f[d];break;case"formatted_counter_value_flm":a=f[d];break;case"ref_label_prefix":i=f[d];break;case"ref_label":o=f[d];break;case"target_id":l=f[d];break;case"caption_nodelist":s=f[d];break;case"content_nodelist":c=f[d]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,xu,"__init__"),null,e),e.float_type=t,e.float_type_info=r,e.counter_value=_,e.counter_numprefix=n,e.formatted_counter_value_flm=a,e.ref_label_prefix=i,e.ref_label=o,e.target_id=l,e.caption_nodelist=s,e.content_nodelist=c,e._fields=(0,tr.tuple)(["float_type","float_type_info","counter_value","counter_numprefix","formatted_counter_value_flm","ref_label_prefix","ref_label","target_id","caption_nodelist","content_nodelist"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),Ou=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("float_type"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__eq__)(e,"figure")))var n=(0,tr.dict)({singular:"Fig.~",plural:"Figs.~",capital:(0,tr.dict)({singular:"Figure~",plural:"Figures~"})});else if((0,tr.__t__)((0,tr.__eq__)(e,"table")))n=(0,tr.dict)({singular:"Tab.~",plural:"Tabs.~",capital:(0,tr.dict)({singular:"Table~",plural:"Tables~"})});else{var a=function(){var t=e;return(0,tr.__call__)(t.capitalize,t)}();n=(0,tr.dict)({singular:(0,tr.__add__)(a,"~"),plural:(0,tr.__add__)(a,"s~")})}return(0,tr.dict)({format_num:(0,tr.dict)({template:"${Roman}"}),prefix_display:n,delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"})},Pu=(0,tr.__class__)("FloatType",[tr.object],{__module__:fu,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"float_type":t=i[o];break;case"float_caption_name":r=i[o];break;case"counter_formatter":_=i[o];break;case"content_handlers":n=i[o]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Pu,"__init__"),null,e),e.float_type=t,(0,tr.__t__)(null===r))r=t;e.float_caption_name=r,e.counter_formatter=(0,tr.__call__)(Jl,null,_,(0,tr.__call__)(Ou,null,t),(0,tr.__kwargtrans__)({counter_formatter_id:t})),e.content_handlers=n,e._fields=(0,tr.tuple)(["float_type","float_caption_name","counter_formatter","content_handlers"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.repr,null,(0,tr.__call__)(tr.getattr,null,e,a))))}return r}()))}()}))}}),Eu=[(0,tr.__call__)(Pu,null,"figure","Figure",(0,tr.dict)({format_num:"arabic"}),["includegraphics"]),(0,tr.__call__)(Pu,null,"table","Table",(0,tr.dict)({format_num:"arabic"}),["cells","includegraphics"])],Cu=(0,tr.__class__)("FeatureFloats",[sr],{__module__:fu,feature_name:"floats",feature_title:"Floating elements (figures & tables)",feature_optional_dependencies:["refs","numbering"],get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"float_types":t=_[n]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Cu,"__init__"),null,e),(0,tr.__t__)(null===t))t=Eu;var a=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,Pu)))var n=e;else n=(0,tr.__call__)(Pu,null,(0,tr.__kwargtrans__)(e));return n};e.float_types_list=function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var i=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(a,null,i))}return r}(),e.float_types=function(){for(var t,r=[],_=e.float_types_list,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.float_type,a])}return(0,tr.dict)(r)}()}))},get make_float_environment_spec(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"float_type":t=_[n]}}}return(0,tr.__call__)(ku,null,t,(0,tr.__kwargtrans__)({content_handlers:(0,tr.__getitem__)(e.float_types,t).content_handlers}))}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=[],a=function(){var t=e.float_types;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0];o[1];!function(){var t,r=n;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.make_float_environment_spec,t,l)))}()}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:n}))}))},RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:fu,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.floats=function(){for(var t,r=[],_=(t=e.feature.float_types,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0];a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,[i,[]])}()}return(0,tr.dict)(r)}();var n=null;if((0,tr.__t__)(function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}()))n=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();e.float_counter_ifaces=(0,tr.dict)({});for(var a=function(){var t=e.feature.float_types;return(0,tr.__call__)(t.py_items,t)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1];(0,tr.__setitem__)(e.float_counter_ifaces,l,function(){var t=El;return(0,tr.__call__)(t.get_document_render_counter,t,e.render_context,(0,tr.__kwargtrans__)({counter_name:s.counter_formatter.counter_formatter_id,counter_formatter:s.counter_formatter}))}()),(0,tr.__t__)(null!==n)&&function(){var t=n;(0,tr.__call__)(t.register_counter_formatter,t,(0,tr.__kwargtrans__)({counter_formatter:(0,tr.__getitem__)(e.float_counter_ifaces,l).formatter}))}()}e.float_instances=(0,tr.dict)({})}))},get register_float(){return(0,tr.__get__)(this,(function(e,t){var r=!0,_=null,n=null,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"float_type":t=l[s];break;case"node":var c=l[s];break;case"numbered":r=l[s];break;case"ref_label_prefix":_=l[s];break;case"ref_label":n=l[s];break;case"caption_nodelist":a=l[s];break;case"content_nodelist":i=l[s]}}}var u=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,c)}();if((0,tr.__t__)((0,tr.__in__)(u,e.float_instances)))return(0,tr.__getitem__)(e.float_instances,u);var f=(0,tr.__getitem__)(e.feature.float_types,t);if((0,tr.__t__)(r))var d=function(){var r=(0,tr.__getitem__)(e.float_counter_ifaces,t);return(0,tr.__call__)(r.register_item,r)}(),p=(0,tr.__getitem__)(d,"value"),h=(0,tr.__getitem__)(d,"numprefix"),g=(0,tr.__getitem__)(d,"formatted_value"),v=function(){var r,_=e.render_context.doc.environment;return(0,tr.__call__)(_.make_fragment,_,g,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} {} counter value".format(t,(r=p,(0,tr.__call__)(r.targetidstr,r,(0,tr.__kwargtrans__)({numprefix:h}))))}))}(),m=(0,tr.__getitem__)(e.float_counter_ifaces,t).formatter.counter_formatter_id;else p=null,h=null,v=null,m=null;var y=null;if((0,tr.__t__)(null!==p))y="{}-{}".format(t,function(){var e=p;return(0,tr.__call__)(e.targetidstr,e,(0,tr.__kwargtrans__)({numprefix:h}))}());var w=(0,tr.__call__)(xu,null,(0,tr.__kwargtrans__)({float_type:t,float_type_info:f,counter_value:p,counter_numprefix:h,formatted_counter_value_flm:v,ref_label_prefix:_,ref_label:n,target_id:y,caption_nodelist:a,content_nodelist:i}));if(function(){var r=(0,tr.__getitem__)(e.floats,t);(0,tr.__call__)(r.append,r,w)}(),(0,tr.__t__)((0,tr.__t__)(null!==p)&&function(){var t=e.render_context;return(0,tr.__call__)(t.supports_feature,t,"refs")}())){var b=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"refs")}();if((0,tr.__t__)((0,tr.__t__)(null!==_)&&null!==n)){(0,tr.assert)((0,tr.__eq__)(_,t));var k=function(){var t=e;return(0,tr.__call__)(t.get_formatted_ref_flm_text,t,w)}();!function(){var e=b;(0,tr.__call__)(e.register_reference,e,_,n,(0,tr.__kwargtrans__)({node:c,formatted_ref_flm_text:k,target_href:"#{}".format(y),counter_value:p,counter_numprefix:h,counter_formatter_id:m}))}()}}return(0,tr.__setitem__)(e.float_instances,u,w),w}))},get get_formatted_ref_flm_text(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"float_instance":t=_[n]}}}return function(){var r=(0,tr.__getitem__)(e.float_counter_ifaces,t.float_type).formatter;return(0,tr.__call__)(r.format_flm,r,t.counter_value,(0,tr.__kwargtrans__)({numprefix:t.counter_numprefix,with_prefix:!0}))}()}))}}),get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Floating items, such as figures and tables, along with\n        captions, are supported by the environments described here."}))},get add_flm_doc_latex_context_definitions(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"base_feature_definitions":t=_[n]}}}for(var a=(0,tr.dict)({macros:[wu,bu],environments:[],specials:[]}),i=(0,tr.dict)({macros:[],environments:[],specials:[]}),o=(0,tr.dict)({macros:(0,tr.dict)({}),environments:(0,tr.dict)({}),specials:(0,tr.dict)({})}),l=(0,tr.__getitem__)(t,"environments"),s=0;s<(0,tr.len)(l);s++)for(var c=(0,tr.__getitem__)(l,s),u=c.environmentname,f=c.content_handlers,d=0;d<(0,tr.len)(f);d++){var p=(0,tr.__getitem__)(f,d),h=(0,tr.dict)({macros:[],environments:[],specials:[]});!function(){var e=p;(0,tr.__call__)(e.float_content_set_extra_definitions,e,h)}();for(var g=(0,tr.tuple)(["macros","environments","specials"]),v=0;v<(0,tr.len)(g);v++){var m=(0,tr.__getitem__)(g,v);if((0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(h,m))))for(var y=(0,tr.__getitem__)(h,m),w=0;w<(0,tr.len)(y);w++){var b=(0,tr.__getitem__)(y,w),k=(x=(0,tr.__call__)(Au,null,b,m))[0];x[1];(0,tr.__t__)(!(0,tr.__in__)(k,(0,tr.__getitem__)(o,m)))?(!function(){var e=(0,tr.__getitem__)(i,m);(0,tr.__call__)(e.append,e,b)}(),(0,tr.__setitem__)((0,tr.__getitem__)(o,m),k,[u])):function(){var e=(0,tr.__getitem__)((0,tr.__getitem__)(o,m),k);(0,tr.__call__)(e.append,e,u)}()}}}for(l=(0,tr.tuple)(["macros","environments","specials"]),s=0;s<(0,tr.len)(l);s++)for(m=(0,tr.__getitem__)(l,s),f=(0,tr.__getitem__)(i,m),d=0;d<(0,tr.len)(f);d++){var x,O=(0,tr.__getitem__)(f,d),P=(k=(x=(0,tr.__call__)(Au,null,O,m))[0],x[1]);(0,tr.__call__)(Su,null,O,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("The ",P)," is made available in the "),"following float environment(s): "),(0,tr.__call__)(", ".join,", ",function(){for(var e,t=[],r=(0,tr.__getitem__)((0,tr.__getitem__)(o,m),k),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("\\verbcode+",n),"+"))}return t}()))),function(){var e=(0,tr.__getitem__)(a,m);(0,tr.__call__)(e.append,e,O)}()}return a}))}}),Au=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"m":e=_[n];break;case"which":t=_[n]}}}if((0,tr.__t__)((0,tr.__eq__)(t,"macros")))var a=e.macroname,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode",(0,tr.__call__)(el,null,e.macroname))," macro");else if((0,tr.__t__)((0,tr.__eq__)(t,"environments")))a=e.environmentname,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode|{",e.environmentname),"}| environment");else{if(!(0,tr.__t__)((0,tr.__eq__)(t,"specials"))){var o=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("invalid which = ",(0,tr.__call__)(tr.repr,null,t)));throw o.__cause__=null,o}a=e.specials_chars,i=(0,tr.__add__)((0,tr.__add__)("\\verbcode",(0,tr.__call__)(el,null,e.specials_chars))," specials")}return(0,tr.tuple)([a,i])},Su=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"mdef":e=_[n];break;case"add_flm_doc":t=_[n]}}}if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,e,"get_flm_doc"))))return e.get_flm_doc=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var _ in r);}}return t},e;var a=e.get_flm_doc;return e.get_flm_doc=function(){if(arguments.length){var e=arguments.length-1;if(arguments[e]&&arguments[e].hasOwnProperty("__kwargtrans__")){var r=arguments[e--];for(var _ in r);}}return function(){var e=(0,tr.__add__)((0,tr.__add__)((0,tr.__call__)(a,null),"\n\n"),t);return(0,tr.__call__)(e.strip,e)}()},e},Nu=Cu,Tu={};t(Tu,"logger",(()=>ju)),t(Tu,"_default_enumeration_counter_formatter",(()=>Iu)),t(Tu,"Enumeration",(()=>Du)),t(Tu,"FeatureEnumeration",(()=>Ru)),t(Tu,"FeatureClass",(()=>Fu)),t(Tu,"ParsedArgumentsInfo",(()=>Pn)),t(Tu,"latexnodes_nodes",(()=>N_)),t(Tu,"ParsingStateDeltaExtendLatexContextDb",(()=>eo)),t(Tu,"helper_collect_labels",(()=>il)),t(Tu,"LatexWalkerLocatedError",(()=>V_)),t(Tu,"label_arg",(()=>al)),t(Tu,"FLMArgumentSpec",(()=>To)),t(Tu,"counter",(()=>Cl)),t(Tu,"FLMEnvironmentSpecBase",(()=>Jo)),t(Tu,"MacroSpec",(()=>lo)),t(Tu,"LatexEnvironmentBodyContentsParser",(()=>Ei)),t(Tu,"get_safe_target_id",(()=>Ls)),t(Tu,"latexnodes_parsers",(()=>pa)),t(Tu,"Feature",(()=>sr));tr=a("hoVWB");var Lu={};(0,tr.__nest__)(Lu,"",m_);var Mu="flm.feature.enumeration",ju=function(){var e=Lu;return(0,tr.__call__)(e.getLogger,e,Mu)}(),Iu=[(0,tr.dict)({template:"${arabic}."}),(0,tr.dict)({template:"(${roman})"}),(0,tr.dict)({template:"${alph}-"})],Du=(0,tr.__class__)("Enumeration",[Jo],{__module__:Mu,is_block_level:!0,body_contents_is_block_level:!0,allowed_in_standalone_mode:!0,allowed_item_label_prefixes:(0,tr.tuple)(["item"]),get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=null,n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"counter_formatter":r=i[o];break;case"annotations":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Du,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,arguments_spec_list:[(0,tr.__call__)(To,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsGroupParser,e,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"]),optional:!0}))}(),(0,tr.__kwargtrans__)({argname:"tag_template"}))]},n))),(0,tr.__t__)(null===r))r=Iu;e.counter_formatter=r,e.annotations=_}))},_fields:(0,tr.tuple)(["environmentname","counter_formatter","annotations"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}return(0,tr.__call__)(Ei,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(eo,null,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(lo,null,"item",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,"[",(0,tr.__kwargtrans__)({argname:"custom_tag"})),al]}))]}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_enumeration_items")))return t;for(var a=function(){var e=t.nodelist;return(0,tr.__call__)(e.split_at_node,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__t__)((n=e,(0,tr.__call__)(n.isNodeType,n,an)))&&(0,tr.__eq__)(e.macroname,"item");var n}),(0,tr.__kwargtrans__)({keep_separators:!0,call_make_nodelist:!1}))}(),i=[],o=(0,tr.__call__)(tr.enumerate,null,a),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=s[0],u=s[1];if(!(0,tr.__t__)(!(0,tr.__t__)(u))){var f=(0,tr.__getitem__)(u,0);if(!(0,tr.__t__)(null===f)&&!(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(c,0))&&((0,tr.__t__)((0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&(0,tr.__eq__)(function(){var e=f.chars;return(0,tr.__call__)(e.strip,e)}(),""))||(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,ln)}())&&f.spec.is_paragraph_break_marker))){if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(function(){var e=f;return(0,tr.__call__)(e.isNodeType,e,an)}()))||(0,tr.__ne__)(f.macroname,"item"))){var d=(0,tr.__call__)(V_,null,(0,tr.__kwargtrans__)({msg:"Expected \\item in enumeration environment: {}".format(f),pos:f.pos}));throw d.__cause__=null,d}var p=function(){var e=f.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,(0,tr.__getslice__)(u.nodelist,1,null,1),(0,tr.__kwargtrans__)({parsing_state:f.parsing_state}))}();!function(){var e=i;(0,tr.__call__)(e.append,e,(0,tr.tuple)([f,p]))}()}}}return t.flm_enumeration_items=i,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=r.fragment_renderer,o=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["tag_template"]))}(),l=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"enumeration")}(),s=function(){var e=l;return(0,tr.__call__)(e.py_get,e,"nested_depth",0)}(),c=e.counter_formatter;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,c,(0,tr.tuple)([tr.list,tr.tuple]))))if((0,tr.__t__)((0,tr.__ge__)(s,(0,tr.__call__)(tr.len,null,c))))c=(0,tr.__getitem__)(c,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,c),1));else c=(0,tr.__getitem__)(c,s);if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("tag_template",o))&&function(){var e=(0,tr.__getitem__)(o,"tag_template");return(0,tr.__call__)(e.was_provided,e)}())){var u=function(){var e=(0,tr.__getitem__)(o,"tag_template");return(0,tr.__call__)(e.get_content_as_chars,e)}();c=u}for(var f=function(){var e=Cl;return(0,tr.__call__)(e.parse_counter_format_num,e,c,(0,tr.__kwargtrans__)({str_use_tag_template:!0}))}(),d=(0,tr.dict)({}),p=(0,tr.dict)({}),h=[],g=(0,tr.__call__)(tr.enumerate,null,t.flm_enumeration_items),v=0;v<(0,tr.len)(g);v++){var m=(j=(0,tr.__getitem__)(g,v))[0],y=(j=j[1])[0],w=j[1];!function(){var e=h;(0,tr.__call__)(e.append,e,w)}();var b=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:y}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["custom_tag","label"]))}();(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("custom_tag",b))&&function(){var e=(0,tr.__getitem__)(b,"custom_tag");return(0,tr.__call__)(e.was_provided,e)}())&&(0,tr.__setitem__)(d,(0,tr.__add__)(1,m),function(){var e=(0,tr.__getitem__)(b,"custom_tag");return(0,tr.__call__)(e.get_content_nodelist,e)}()),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("label",b))&&function(){var e=(0,tr.__getitem__)(b,"label");return(0,tr.__call__)(e.was_provided,e)}())&&(0,tr.__setitem__)(p,(0,tr.__add__)(1,m),(0,tr.__call__)(il,null,(0,tr.__getitem__)(b,"label"),e.allowed_item_label_prefixes))}var k=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__in__)(e,d))?(0,tr.__getitem__)(d,e):(0,tr.__call__)(f,null,e)},x=(0,tr.dict)({});if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.len,null,p))&&function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}())){var O=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}();for(g=function(){var e=p;return(0,tr.__call__)(e.py_items,e)}(),v=0;v<(0,tr.len)(g);v++){var P=(j=(0,tr.__getitem__)(g,v))[0],E=j[1];if(!(0,tr.__t__)((0,tr.__eq__)((0,tr.__call__)(tr.len,null,E),0))){if((0,tr.__t__)((0,tr.__in__)(P,d)))var C=(0,tr.__getitem__)(item_custom_tags,P);else C=(0,tr.__call__)(k,null,P);var A=(j=(0,tr.__getitem__)(E,0))[0],S=j[1],N=(0,tr.__call__)(Ls,null,A,S),T=(0,tr.__add__)("#",N);(0,tr.__setitem__)(x,P,N);for(var L=E,M=0;M<(0,tr.len)(L);M++){var j,I=(j=(0,tr.__getitem__)(L,M))[0],D=j[1];!function(){var e=O;(0,tr.__call__)(e.register_reference,e,I,D,(0,tr.__kwargtrans__)({formatted_ref_flm_text:C,node:t,target_href:T}))}()}}}}var R=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__in__)(e,x))?(0,tr.__getitem__)(x,e):null},F=function(){var e=r;return(0,tr.__call__)(e.push_logical_state,e,"enumeration","nested_depth",(0,tr.__add__)(s,1))}();try{F.__enter__();var z=function(){var t=i;return(0,tr.__call__)(t.render_enumeration,t,h,k,(0,tr.__kwargtrans__)({render_context:r,annotations:e.annotations,nested_depth:s,target_id_generator:R}))}();F.__exit__()}catch(e){if(!F.__exit__(e.name,e,e.stack))throw e}return z}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}for(var i=(0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}"),o=(i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.descend_into_parsed_arguments,e,t.nodeargd)}()),t.flm_enumeration_items),l=0;l<(0,tr.len)(o);l++){var s=(p=(0,tr.__getitem__)(o,l))[0],c=p[1],u=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:s}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["custom_tag","label"]))}();i=(0,tr.__call__)(tr.__iadd__,null,i,"\\item");if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("custom_tag",u))&&function(){var e=(0,tr.__getitem__)(u,"custom_tag");return(0,tr.__call__)(e.was_provided,e)}()))i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("[{",function(){var e,t=r;return(0,tr.__call__)(t.subrecompose,t,(e=(0,tr.__getitem__)(u,"custom_tag"),(0,tr.__call__)(e.get_content_nodelist,e)))}()),"}]"));else i=(0,tr.__call__)(tr.__iadd__,null,i," ");if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("label",u))&&function(){var e=(0,tr.__getitem__)(u,"label");return(0,tr.__call__)(e.was_provided,e)}()))for(var f=(0,tr.__call__)(il,null,(0,tr.__getitem__)(u,"label"),e.allowed_item_label_prefixes),d=0;d<(0,tr.len)(f);d++){var p,h=(p=(0,tr.__getitem__)(f,d))[0],g=p[1],v=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",h,g,t.latex_walker.resource_info)}();i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__getitem__)(v,"safe_label")),"}"))}i=(0,tr.__call__)(tr.__iadd__,null,i,function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,c)}())}return i=(0,tr.__call__)(tr.__iadd__,null,i,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),Ru=(0,tr.__class__)("FeatureEnumeration",[sr],{__module__:Mu,feature_name:"enumeration",feature_title:"Enumeration and itemization lists",feature_default_config:(0,tr.dict)({enumeration_environments:(0,tr.dict)({itemize:(0,tr.dict)({counter_formatter:["","-",""]}),enumerate:(0,tr.dict)({counter_formatter:null})})}),DocumentManager:null,RenderManager:null,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"enumeration_environments":t=_[n]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Ru,"__init__"),null,e),(0,tr.__t__)(null===t))t=function(){var t=e.feature_default_config;return(0,tr.__call__)(t.py_get,t,"enumeration_environments",(0,tr.dict)({}))}();e.enumeration_environments=t}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({environments:function(){for(var t,r=[],_=(t=(0,tr.__call__)(tr.dict,null,e.enumeration_environments),(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];!function(){var e=r;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Du,null,(0,tr.__kwargtrans__)({environmentname:i,counter_formatter:(0,tr.__getitem__)(o,"counter_formatter"),annotations:[i]})))}()}return r}()}))}))}}),Fu=Ru,zu={};t(zu,"logger",(()=>Vu)),t(zu,"_default_endnote_counter_formatter_spec",(()=>Gu)),t(zu,"EndnoteCategory",(()=>Uu)),t(zu,"EndnoteMacro",(()=>$u)),t(zu,"EndnoteInstance",(()=>Wu)),t(zu,"FeatureEndnotes",(()=>Hu)),t(zu,"FeatureClass",(()=>Yu)),t(zu,"ParsedArgumentsInfo",(()=>Pn)),t(zu,"Counter",(()=>ds)),t(zu,"FLMArgumentSpec",(()=>To)),t(zu,"build_counter_formatter",(()=>Jl)),t(zu,"FLMFragment",(()=>ui)),t(zu,"FLMMacroSpecBase",(()=>Ko)),t(zu,"Feature",(()=>sr));tr=a("hoVWB");var Bu={};(0,tr.__nest__)(Bu,"",m_);var qu="flm.feature.endnotes",Vu=function(){var e=Bu;return(0,tr.__call__)(e.getLogger,e,qu)}(),Gu=(0,tr.dict)({format_num:(0,tr.dict)({template:"${roman}"}),prefix_display:null,delimiters:(0,tr.tuple)(["",""]),join_spec:"compact"}),Uu=(0,tr.__class__)("EndnoteCategory",[tr.object],{__module__:qu,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"category_name":t=i[o];break;case"counter_formatter":r=i[o];break;case"heading_title":_=i[o];break;case"endnote_command":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Uu,"__init__"),null,e),e.category_name=t;r=(0,tr.__call__)(Jl,null,r,Gu,(0,tr.__kwargtrans__)({counter_formatter_id:"endnote"}));e.counter_formatter=r,e.heading_title=_,e.endnote_command=n}))}}),$u=(0,tr.__class__)("EndnoteMacro",[Ko],{__module__:qu,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t,r){var _=(0,tr.dict)();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"endnote_category_name":r=a[i];break;default:_[i]=a[i]}delete _.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$u,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"endnote_content",flm_doc:"The content of the endnote to place (e.g., the text of a footnote)"}))]},_))),e.endnote_category_name=r}))},_fields:(0,tr.tuple)(["macroname","endnote_category_name"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Place an end note in the category {} withthe given content.".format(e.endnote_category_name)}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"endnotes")}();if((0,tr.__t__)(null===i)){var o=(0,tr.__call__)(RuntimeError,null,"You did not set up the feature 'endnotes' in your FLM environment");throw o.__cause__=null,o}var l=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["endnote_content"]))}(),s=function(){var e=(0,tr.__getitem__)(l,"endnote_content");return(0,tr.__call__)(e.get_content_nodelist,e)}(),c=function(){var r=i;return(0,tr.__call__)(r.add_endnote,r,(0,tr.__kwargtrans__)({category_name:e.endnote_category_name,content_nodelist:s,node:t}))}(),u=function(){var e=i;return(0,tr.__call__)(e.render_endnote_mark,e,c)}();return u}))}}),Wu=(0,tr.__class__)("EndnoteInstance",[tr.object],{__module__:qu,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"category_name":t=l[s];break;case"number":r=l[s];break;case"formatted_counter_value_flm":_=l[s];break;case"content_nodelist":n=l[s];break;case"ref_label_prefix":a=l[s];break;case"ref_label":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wu,"__init__"),null,e),e.category_name=t,e.number=r,e.formatted_counter_value_flm=_,e.content_nodelist=n,e.ref_label_prefix=a,e.ref_label=i,e._fields=(0,tr.tuple)(["category_name","number","formatted_counter_value_flm","content_nodelist","ref_label_prefix","ref_label"])}))},get asdict(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a,(0,tr.__call__)(tr.getattr,null,e,a)])}return(0,tr.dict)(r)}()}))},get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return function(){var t="{}({})";return(0,tr.__call__)(t.format,t,e.__class__.__name__,(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e._fields,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}={}".format(a,(0,tr.__call__)(tr.getattr,null,e,a)))}return r}()))}()}))}}),Hu=(0,tr.__class__)("FeatureEndnotes",[sr],{__module__:qu,feature_name:"endnotes",feature_title:"Endnotes: footnotes, references, etc.",get feature_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__add__)("Add footnotes and support for other endnotes (e.g., citations)\n            at the bottom of your pages or your document.  This environment\n            supports the base category(ies): ",(0,tr.__call__)(",".join,",",function(){for(var t,r=[],_=e.base_categories,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,"{}".format(a.category_name))}return r}()))}))},get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"categories":t=n[a];break;case"render_options":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Hu,"__init__"),null,e);var i=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,e,Uu))?e:(0,tr.__call__)(Uu,null,(0,tr.__kwargtrans__)(e))};if((0,tr.__t__)(!(0,tr.__t__)(t)))t=[];e.base_categories=function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(i,null,a))}return r}(),e.default_render_options=(0,tr.__t__)(r)?r:(0,tr.dict)({})}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=[],a=e.base_categories,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);(0,tr.__t__)(o.endnote_command)&&function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)($u,null,o.endnote_command,(0,tr.__kwargtrans__)({endnote_category_name:o.category_name})))}()}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:n}))}))},DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:qu,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.categories=(0,tr.__call__)(tr.list,null,e.feature.base_categories),e.categories_by_name=function(){for(var t,r=[],_=e.categories,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,a])}return(0,tr.dict)(r)}()}))},get add_endnote_category(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"endnote_category":t=_[n]}}}if((0,tr.__t__)((0,tr.__in__)(t.category_name,e.categories_by_name))){var a=(0,tr.__call__)(tr.ValueError,null,"Endnote category {} is already a registered endnote category".format(t.category_name));throw a.__cause__=null,a}!function(){var r=e.categories;(0,tr.__call__)(r.append,r,t)}(),(0,tr.__setitem__)(e.categories_by_name,t.category_name,t)}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:qu,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"inhibit_render_endnote_marks":t=_[n]}}}e.endnotes=function(){for(var t,r=[],_=e.feature_document_manager.categories,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,[]])}return(0,tr.dict)(r)}(),e.endnote_counters=function(){for(var t,r=[],_=e.feature_document_manager.categories,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,[a.category_name,(0,tr.__call__)(ds,null,a.counter_formatter)])}return(0,tr.dict)(r)}(),e.endnote_instances=(0,tr.dict)({}),e.inhibit_render_endnote_marks=t}))},get add_endnote(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"category_name":t=i[o];break;case"content_nodelist":r=i[o];break;case"node":var l=i[o];break;case"ref_label_prefix":_=i[o];break;case"ref_label":n=i[o]}}}var s=function(){var t=e;return(0,tr.__call__)(t.get_node_id,t,l)}();if((0,tr.__t__)((0,tr.__in__)(s,e.endnote_instances)))return(0,tr.__getitem__)(e.endnote_instances,s);var c=function(){var r=(0,tr.__getitem__)(e.endnote_counters,t);return(0,tr.__call__)(r.step_and_format_flm,r)}(),u=c[0],f=c[1],d=function(){var r=e.render_context.doc.environment;return(0,tr.__call__)(r.make_fragment,r,f,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} counter".format(t)}))}(),p=(0,tr.__call__)(Wu,null,(0,tr.__kwargtrans__)({category_name:t,number:u,formatted_counter_value_flm:d,content_nodelist:r,ref_label_prefix:_,ref_label:n}));return function(){var r=(0,tr.__getitem__)(e.endnotes,t);(0,tr.__call__)(r.append,r,p)}(),(0,tr.__t__)(null!==s)&&(0,tr.__setitem__)(e.endnote_instances,s,p),p}))},get render_endnote_mark(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_="endnote-marks";if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"endnote":t=a[i];break;case"display_flm":r=a[i];break;case"wrap_with_semantic_span":_=a[i]}}}if((0,tr.__t__)(e.inhibit_render_endnote_marks))return function(){var t=e.render_context.fragment_renderer;return(0,tr.__call__)(t.render_nothing,t,e.render_context)}();var o="#{}-{}".format(t.category_name,t.number);if((0,tr.__t__)(null===r))var l=t.formatted_counter_value_flm;else l=r;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,ui)))var s=l.nodes;else s=l;var c=["endnote",t.category_name];(0,tr.__t__)(_)&&function(){var e=c;(0,tr.__call__)(e.append,e,_)}();var u=function(){var t=e.render_context.fragment_renderer;return(0,tr.__call__)(t.render_link,t,"endnote",o,(0,tr.__kwargtrans__)({display_nodelist:s,render_context:e.render_context,annotations:c}))}();return u}))},get render_endnote_mark_many(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=!0,n=!1,a="endnote-marks";if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"endnote_list":t=o[l];break;case"counter_prefix_variant":r=o[l];break;case"counter_with_delimiters":_=o[l];break;case"counter_with_prefix":n=o[l];break;case"wrap_with_semantic_span":a=o[l]}}}var s=e.render_context,c=s.fragment_renderer;if((0,tr.__t__)(e.inhibit_render_endnote_marks))return function(){var e=c;return(0,tr.__call__)(e.render_nothing,e,s)}();for(var u=(0,tr.dict)({}),f=t,d=0;d<(0,tr.len)(f);d++){var p=(0,tr.__getitem__)(f,d);(0,tr.__t__)(!(0,tr.__in__)(p.category_name,u))&&(0,tr.__setitem__)(u,p.category_name,[]),function(){var e=(0,tr.__getitem__)(u,p.category_name);(0,tr.__call__)(e.append,e,p)}()}var h=[];for(f=function(){var e=u;return(0,tr.__call__)(e.py_items,e)}(),d=0;d<(0,tr.len)(f);d++){for(var g=(0,tr.__getitem__)(f,d),v=g[0],m=(t=g[1],(0,tr.__getitem__)(e.feature_document_manager.categories_by_name,p.category_name).counter_formatter),y=function(){var e=m;return(0,tr.__call__)(e.format_many_flm,e,function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,a.number)}return r}(),(0,tr.__kwargtrans__)({prefix_variant:r,with_delimiters:_,with_prefix:n,get_raw_s_items:!0}))}(),w="",b=y,k=0;k<(0,tr.len)(b);k++){var x=(0,tr.__getitem__)(b,k),O=function(){var e=s.doc.environment;return(0,tr.__call__)(e.make_fragment,e,(0,tr.__getitem__)(x,"s"),(0,tr.__kwargtrans__)({is_block_level:!1,standalone_mode:!0,what:"Rendered endnote mark(s) bit {}".format((0,tr.__call__)(tr.repr,null,x))}))}();if((0,tr.__t__)((0,tr.__t__)(null===(0,tr.__getitem__)(x,"n"))||!1===(0,tr.__getitem__)(x,"n")))w=(0,tr.__call__)(tr.__iadd__,null,w,function(){var e=c;return(0,tr.__call__)(e.render_fragment,e,O,s)}());else{var P="#{}-{}".format(v,function(){var e=(0,tr.__getitem__)(x,"n");return(0,tr.__call__)(e.get_num,e)}());w=(0,tr.__call__)(tr.__iadd__,null,w,function(){var e=c;return(0,tr.__call__)(e.render_link,e,"endnote",P,O.nodes,(0,tr.__kwargtrans__)({render_context:s,annotations:["endnote",v]}))}())}}!function(){var e=h;(0,tr.__call__)(e.append,e,w)}()}var E=function(){var e=c;return(0,tr.__call__)(e.render_join,e,h,s)}();return(0,tr.__t__)(a)?function(){var e=c;return(0,tr.__call__)(e.render_semantic_span,e,E,a,s)}():E}))},get render_endnotes_category(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"category_name":t=_[n]}}}var a=e.render_context.fragment_renderer;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"category_name")))t=t.category_name;var i=function(r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)if("n"===a)r=n[a]}}return(0,tr.__getitem__)((0,tr.__getitem__)(e.endnotes,t),(0,tr.__sub__)(r,1)).formatted_counter_value_flm.nodes},o=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("n"===n)e=_[n]}}return"{}-{}".format(t,e)},l=function(){for(var r,_=[],n=(0,tr.__getitem__)(e.endnotes,t),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);r=void 0,r=_,(0,tr.__call__)(r.append,r,i.content_nodelist)}return _}();return function(){var r=a;return(0,tr.__call__)(r.render_enumeration,r,l,(0,tr.__kwargtrans__)({counter_formatter:i,target_id_generator:o,render_context:e.render_context,annotations:[(0,tr.__add__)(t,"-list")]}))}()}))},get render_endnotes(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="endnotes";if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"target_id":t=l[s];break;case"annotations":r=l[s];break;case"include_headings_at_level":_=l[s];break;case"set_headings_target_ids":n=l[s];break;case"endnotes_heading_title":a=l[s];break;case"endnotes_heading_level":i=l[s]}}}if((0,tr.__t__)(null===_))_=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"include_headings_at_level",null)}();if((0,tr.__t__)(null===n))n=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"set_headings_target_ids",!1)}();if((0,tr.__t__)(null===a))a=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"endnotes_heading_title",null)}();if((0,tr.__t__)(null===i))i=function(){var t=e.feature.default_render_options;return(0,tr.__call__)(t.py_get,t,"endnotes_heading_level",1)}();for(var c=e.render_context,u=c.fragment_renderer,f=!1,d=[],p=e.feature_document_manager.categories,h=0;h<(0,tr.len)(p);h++){var g=(0,tr.__getitem__)(p,h);if(!(0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(e.endnotes,g.category_name))))){f=!0;if((0,tr.__t__)((0,tr.__t__)(null!==_)&&!1!==_)){var v=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,g.heading_title,(0,tr.__kwargtrans__)({is_block_level:!1,what:"{} heading title".format(g.category_name)}))}(),m=null;if((0,tr.__t__)(n))m="{}-{}".format(t,g.category_name);!function(){var t,r=d;(0,tr.__call__)(r.append,r,(t=u,(0,tr.__call__)(t.render_heading,t,v.nodes,(0,tr.__kwargtrans__)({render_context:e.render_context,heading_level:_,target_id:m}))))}()}!function(){var t,r=d;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.render_endnotes_category,t,g)))}()}}if((0,tr.__t__)(!(0,tr.__t__)(f)))return function(){var e=u;return(0,tr.__call__)(e.render_nothing,e,(0,tr.__kwargtrans__)({annotations:["no-endnotes"],render_context:c}))}();if((0,tr.__t__)(null!==a)){var y=function(){var t=e.render_context.doc.environment;return(0,tr.__call__)(t.make_fragment,t,a,(0,tr.__kwargtrans__)({is_block_level:!1,what:"endnotes heading title".format()}))}();!function(){var t,r=d;(0,tr.__call__)(r.insert,r,0,(t=u,(0,tr.__call__)(t.render_heading,t,y.nodes,(0,tr.__kwargtrans__)({render_context:e.render_context,heading_level:i}))))}()}return function(){var _,n=u;return(0,tr.__call__)(n.render_semantic_block,n,(_=u,(0,tr.__call__)(_.render_join_blocks,_,d,c)),(0,tr.__kwargtrans__)({role:"endnotes",render_context:e.render_context,annotations:r,target_id:t}))}()}))}})}),Yu=Hu,Xu={};t(Xu,"logger",(()=>Qu)),t(Xu,"simplify_trim_whitespace",(()=>ef)),t(Xu,"get_term_ref_label_verbatim",(()=>tf)),t(Xu,"DefineTermEnvironment",(()=>rf)),t(Xu,"RefTermMacro",(()=>_f)),t(Xu,"FeatureDefTerm",(()=>nf)),t(Xu,"FeatureClass",(()=>af)),t(Xu,"ParsedArgumentsInfo",(()=>Pn)),t(Xu,"latexnodes_nodes",(()=>N_)),t(Xu,"FLMArgumentSpec",(()=>To)),t(Xu,"refs",(()=>ks)),t(Xu,"ParsedArguments",(()=>M_)),t(Xu,"FLMParsingStateDeltaSetBlockLevel",(()=>So)),t(Xu,"FLMEnvironmentSpecBase",(()=>Jo)),t(Xu,"TextFormatMacro",(()=>ol)),t(Xu,"flmspecinfo",(()=>Wo)),t(Xu,"FLMMacroSpecBase",(()=>Ko)),t(Xu,"Feature",(()=>sr));tr=a("hoVWB");var Zu={},Ku={};(0,tr.__nest__)(Zu,"",m_),(0,tr.__nest__)(Ku,"",pr);var Ju="flm.feature.defterm",Qu=function(){var e=Zu;return(0,tr.__call__)(e.getLogger,e,Ju)}(),ef=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("x"===_)e=r[_]}}return function(){var t,r=Ku;return(0,tr.__call__)(r.sub,r,"\\s+"," ",(t=e,(0,tr.__call__)(t.strip,t)))}()},tf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("node_term_arg_nodelist"===_)e=r[_]}}return(0,tr.__call__)(ef,null,function(){var t=e;return(0,tr.__call__)(t.latex_verbatim,t)}())},rf=(0,tr.__class__)("DefineTermEnvironment",[Jo],{__module__:Ju,is_block_level:!0,allowed_in_standalone_mode:!1,allowed_ref_label_prefixes:(0,tr.tuple)(["topic"]),defterm_ref_type:"defterm",get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!0;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=": ";var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"render_with_term":r=i[o];break;case"render_with_term_suffix":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,rf,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t,arguments_spec_list:[(0,tr.__call__)(To,null,"{",(0,tr.__kwargtrans__)({argname:"term"})),Wo.label_arg],body_parsing_state_delta:(0,tr.__call__)(So,null,(0,tr.__kwargtrans__)({is_block_level:e.is_block_level}))},n))),e.render_with_term=r,e.render_with_term_suffix=_,(0,tr.__t__)(e.render_with_term)){var l=(0,tr.__call__)(ol,null,"",(0,tr.__kwargtrans__)({text_formats:["defterm-term"]}));l.is_block_heading=!0,e.render_term_text_format_spec=l}}))},_fields:(0,tr.tuple)(["environmentname","render_with_term","render_with_term_suffix"]),get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["term","label"]))}();t.flmarg_term=function(){var e=(0,tr.__getitem__)(a,"term");return(0,tr.__call__)(e.get_content_nodelist,e)}();var i=(0,tr.__call__)(tf,null,t.flmarg_term);return t.flmarg_term_flm_ref_label_verbatim=i,t.flmarg_labels=function(){var t=Wo;return(0,tr.__call__)(t.helper_collect_labels,t,(0,tr.__getitem__)(a,"label"),e.allowed_ref_label_prefixes)}(),t.flm_referenceable_infos=[function(){var r=ks;return(0,tr.__call__)(r.ReferenceableInfo,r,(0,tr.__kwargtrans__)({kind:"defterm",formatted_ref_flm_text:t.flmarg_term_flm_ref_label_verbatim,labels:(0,tr.__add__)([(0,tr.tuple)([e.defterm_ref_type,t.flmarg_term_flm_ref_label_verbatim])],(0,tr.__call__)(tr.list,null,t.flmarg_labels))}))}()],t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=t.flmarg_term_flm_ref_label_verbatim,o=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"feature.defterm")}();(0,tr.__t__)(!(0,tr.__in__)("currently_defining_terms",o))&&(0,tr.__setitem__)(o,"currently_defining_terms",[]);var l=(0,tr.__call__)(tr.list,null,(0,tr.__getitem__)(o,"currently_defining_terms"));!function(){var e=l;(0,tr.__call__)(e.append,e,i)}();var s=function(){var e=r;return(0,tr.__call__)(e.push_logical_state,e,"feature.defterm","currently_defining_terms",l)}();try{if(s.__enter__(),(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}()))for(var c=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),u=t.flm_referenceable_infos,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);!function(){var e=c;(0,tr.__call__)(e.register_reference_referenceable,e,(0,tr.__kwargtrans__)({node:t,referenceable_info:d}))}()}var p=t.nodelist;if((0,tr.__t__)(e.render_with_term)){var h=r.doc.environment,g=function(){var t=h;return(0,tr.__call__)(t.make_fragment,t,(0,tr.__add__)(i,e.render_with_term_suffix),(0,tr.__kwargtrans__)({standalone_mode:!0}))}(),v=function(){var r=g.latex_walker;return(0,tr.__call__)(r.make_node,r,an,(0,tr.__kwargtrans__)({macroname:"",spec:e.render_term_text_format_spec,macro_post_space:"",parsing_state:g.nodes.parsing_state,nodeargd:(0,tr.__call__)(M_,null,(0,tr.__kwargtrans__)({arguments_spec_list:e.render_term_text_format_spec.arguments_spec_list,argnlist:[g.nodes]})),pos:t.pos,pos_end:t.pos_end}))}();!function(){var t=e.render_term_text_format_spec;(0,tr.__call__)(t.finalize_node,t,v)}();p=function(){var e=g.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,(0,tr.__add__)([v],(0,tr.__call__)(tr.list,null,p)),(0,tr.__kwargtrans__)({parsing_state:t.nodelist.parsing_state}))}()}var m=function(){var e,_=r.fragment_renderer;return(0,tr.__call__)(_.render_semantic_block,_,(0,tr.__kwargtrans__)({content:(e=r.fragment_renderer,(0,tr.__call__)(e.render_nodelist,e,p,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))),role:"defterm",render_context:r,target_id:function(){var e=(0,tr.__getitem__)(t.flm_referenceable_infos,0);return(0,tr.__call__)(e.get_target_id,e)}(),annotations:["p-block"]}))}();s.__exit__()}catch(e){if(!s.__exit__(e.name,e,e.stack))throw e}return m}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}if((0,tr.__t__)(null===t.flm_referenceable_infos)){var i=(0,tr.__call__)(LatexWalkerLocatedError,null,(0,tr.__add__)("Recomposing pure LaTeX: Invalid referenceable info in defterm node ",(0,tr.__call__)(tr.repr,null,t)),(0,tr.__kwargtrans__)({pos:t.pos}));throw i.__cause__=null,i}for(var o=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flmarg_term)}(),l=(0,tr.__add__)((0,tr.__add__)("\\begin{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}"),s=(l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("{",o),"}")),t.flm_referenceable_infos),c=0;c<(0,tr.len)(s);c++)for(var u=(0,tr.__getitem__)(s,c).labels,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=d[0],h=d[1],g=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",p,h,t.latex_walker.resource_info)}(),v=(0,tr.__getitem__)(g,"safe_label");l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("\\label{",(0,tr.__call__)(tr.str,null,v)),"}"))}l=(0,tr.__call__)(tr.__iadd__,null,l,function(){var e=r;return(0,tr.__call__)(e.recompose_nodelist,e,t.nodelist,t)}());return l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__add__)((0,tr.__add__)("\\end{",(0,tr.__call__)(tr.str,null,t.environmentname)),"}"))}))}}),_f=(0,tr.__class__)("RefTermMacro",[Ko],{__module__:Ju,allowed_in_standalone_mode:!1,delayed_render:!0,defterm_ref_type:"defterm",get __init__(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macroname":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,_f,"__init__"),null,e,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(To,null,"[",(0,tr.__kwargtrans__)({argname:"ref_term",flm_doc:"The term that is being referenced.  May be omitted if it coincides with \\verba{term}"})),(0,tr.__call__)(To,null,"{",(0,tr.__kwargtrans__)({argname:"term",flm_doc:"The term the exact way it should be typeset at this point"}))]},r)))}))},_fields:(0,tr.tuple)(["macroname"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return" Reference a term defined somewhere else in a\n        \\verbcode+\\begin{defterm}\\end{defterm}+ environment.  This will\n        typically produce a link in HTML output for instance to the location\n        where this term is defined.  In case you need to typeset the term\n        differently than when you defined it (e.g., because of a plural,\n        capital/lower case, other declination), use the optional argument to\n        give the term exactly as defined and specify the term as it should\n        appear in the main argument.  E.g.\n        \\verbcode+These are \\term[Markov chain]{Markov chains}+"}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["ref_term","term"]))}(),i=function(){var e=(0,tr.__getitem__)(a,"term");return(0,tr.__call__)(e.get_content_nodelist,e)}();(0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"ref_term");return(0,tr.__call__)(e.was_provided,e)}())?(t.flmarg_ref_term=function(){var e=(0,tr.__getitem__)(a,"ref_term");return(0,tr.__call__)(e.get_content_nodelist,e)}(),t.flm_term_flm_show_term_nodelist=i,t.flm_term_flm_ref_label_verbatim=(0,tr.__call__)(tf,null,t.flmarg_ref_term)):(t.flmarg_ref_term=null,t.flm_term_flm_show_term_nodelist=i,t.flm_term_flm_ref_label_verbatim=(0,tr.__call__)(tf,null,i)),t.flmarg_ref=(0,tr.tuple)([e.defterm_ref_type,t.flm_term_flm_ref_label_verbatim]),t.flm_ref_info=(0,tr.dict)({ref_list:[t.flmarg_ref],display_content_nodelist:t.flm_term_flm_show_term_nodelist})}))},get prepare_delayed_render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=!1,o=function(){var e=r;return(0,tr.__call__)(e.get_logical_state,e,"feature.defterm")}();if((0,tr.__t__)((0,tr.__in__)("currently_defining_terms",o))&&(0,tr.__t__)((0,tr.__in__)(t.flm_term_flm_ref_label_verbatim,(0,tr.__getitem__)(o,"currently_defining_terms"))))i=!0;var l=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"defterm")}();!function(){var e=l;(0,tr.__call__)(e.register_term_node_info,e,t,(0,tr.__kwargtrans__)({is_currently_defining_term:i}))}()}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=t.flm_term_flm_show_term_nodelist,o=t.flm_term_flm_ref_label_verbatim;if((0,tr.__t__)(!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.supports_feature,e,"refs")}())))return function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nodelist,e,i,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!1}))}();var l=t.latex_walker.resource_info,s=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"refs")}(),c=function(){var t=s;return(0,tr.__call__)(t.get_ref,t,e.defterm_ref_type,o,l)}(),u=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"defterm")}(),f=function(){var e=u;return(0,tr.__call__)(e.get_term_node_info,e,t)}(),d=(0,tr.__getitem__)(f,"is_currently_defining_term");return(0,tr.__t__)(d)?function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_text_format,e,["defterm-term","term-in-defining-defterm"],(0,tr.__kwargtrans__)({nodelist:i,render_context:r}))}():function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_link,e,"term",(0,tr.__kwargtrans__)({href:c.target_href,display_nodelist:i,render_context:r,annotations:[]}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=e.defterm_ref_type,o=t.flm_term_flm_ref_label_verbatim,l=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"ref",i,o,t.latex_walker.resource_info)}(),s=(0,tr.__getitem__)(l,"safe_label"),c=t.flm_term_flm_show_term_nodelist,u=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,c)}(),f=null;if((0,tr.__t__)(null!==t.flmarg_ref_term))f=function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,t.flmarg_ref_term)}();return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\flmTerm{",t.macroname),"}{"),s),"}"),(0,tr.__t__)(f)?(0,tr.__add__)((0,tr.__add__)("{",f),"}"):"{}"),"{"),u),"}")}))}}),nf=(0,tr.__class__)("FeatureDefTerm",[sr],{__module__:Ju,feature_name:"defterm",feature_title:"Definition terms",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Ju,get initialize(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.registered_term_node_infos=(0,tr.dict)({})}))},get register_term_node_info(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}(0,tr.__setitem__)(e.registered_term_node_infos,function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}(),r)}))},get get_term_node_info(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return(0,tr.__getitem__)(e.registered_term_node_infos,function(){var r=e;return(0,tr.__call__)(r.get_node_id,r,t)}())}))}}),render_defterm_with_term:!0,render_defterm_with_term_suffix:": ",get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_defterm_with_term":t=n[a];break;case"render_defterm_with_term_suffix":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,nf,"__init__"),null,e),(0,tr.__t__)(null!==t)&&(e.render_defterm_with_term=t),(0,tr.__t__)(null!==r)&&(e.render_defterm_with_term_suffix=r)}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[(0,tr.__call__)(_f,null,"term")],environments:[(0,tr.__call__)(rf,null,"defterm",(0,tr.__kwargtrans__)({render_with_term:e.render_defterm_with_term,render_with_term_suffix:e.render_defterm_with_term_suffix}))]}))}))}}),af=nf,of={};t(of,"logger",(()=>cf)),t(of,"_cite_default_counter_formatter_spec",(()=>uf)),t(of,"FeatureExternalPrefixedCitations",(()=>ff)),t(of,"CiteMacro",(()=>gf)),t(of,"cite_macro_arguments",(()=>df)),t(of,"CiteMoreArgsParser",(()=>pf)),t(of,"TackOnMultipleCiteCommandsMacroParser",(()=>hf)),t(of,"ParsedArgumentsInfo",(()=>Pn)),t(of,"latexnodes_nodes",(()=>N_)),t(of,"latexnodes_parsers",(()=>pa)),t(of,"macrospec",(()=>pi)),t(of,"FLMArgumentSpec",(()=>To)),t(of,"build_counter_formatter",(()=>Jl)),t(of,"FLMFragment",(()=>ui)),t(of,"EndnoteCategory",(()=>Uu)),t(of,"FLMMacroSpecBase",(()=>Ko)),t(of,"Feature",(()=>sr));tr=a("hoVWB");var lf={};(0,tr.__nest__)(lf,"",m_);var sf="flm.feature.cite",cf=function(){var e=lf;return(0,tr.__call__)(e.getLogger,e,sf)}(),uf=(0,tr.dict)({format_num:"arabic",prefix_display:null,delimiters:(0,tr.tuple)(["[","]"]),join_spec:"compact"}),ff=(0,tr.__class__)("FeatureExternalPrefixedCitations",[sr],{__module__:sf,feature_name:"citations",feature_title:"Citations",feature_optional_dependencies:["endnotes"],use_endnotes:!0,DocumentManager:(0,tr.__class__)("DocumentManager",[sr.DocumentManager],{__module__:sf,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"use_endnotes":t=_[n]}}}if((0,tr.__t__)(null!==t)?e.use_endnotes=t:e.use_endnotes=e.feature.use_endnotes,(0,tr.__t__)(e.use_endnotes)){var a=function(){var t=e.doc;return(0,tr.__call__)(t.feature_document_manager,t,"endnotes")}();e.endnote_category=(0,tr.__call__)(Uu,null,"citation",(0,tr.__kwargtrans__)({counter_formatter:e.feature.counter_formatter,heading_title:e.feature.references_heading_title})),function(){var t=a;(0,tr.__call__)(t.add_endnote_category,t,e.endnote_category)}()}}))}}),RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:sf,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"sort_and_compress":t=_[n]}}}e.citation_endnotes=(0,tr.dict)({}),e.use_endnotes=e.feature_document_manager.use_endnotes,e.external_citations_providers=e.feature.external_citations_providers,(0,tr.__t__)(null!==t)?e.sort_and_compress=t:e.sort_and_compress=e.feature.sort_and_compress}))},get get_citation_content_flm(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cite_prefix":t=a[i];break;case"cite_key":r=a[i];break;case"resource_info":_=a[i]}}}if((0,tr.__t__)(null===e.external_citations_providers))throw(o=(0,tr.__call__)(tr.ValueError,null,"No external citations providers are set!")).__cause__=null,o;for(var o,l=null,s=e.external_citations_providers,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);l=function(){var e=u;return(0,tr.__call__)(e.get_citation_full_text_flm,e,t,r,_)}();if((0,tr.__t__)(l))break}if((0,tr.__t__)(null===l))throw(o=(0,tr.__call__)(tr.ValueError,null,"Citation not found: {}:{}".format(t,r))).__cause__=null,o;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,l,ui)))var f=l;else f=function(){var _=e.render_context;return(0,tr.__call__)(_.make_standalone_fragment,_,l,(0,tr.__kwargtrans__)({is_block_level:!1,what:"Citation text for {}:{}".format(t,r)}))}();return f}))},get get_citation_endnote(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cite_prefix":t=a[i];break;case"cite_key":r=a[i];break;case"resource_info":_=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.use_endnotes)))return null;var o=function(){var t=e.render_context;return(0,tr.__call__)(t.feature_render_manager,t,"endnotes")}();if((0,tr.__t__)((0,tr.__in__)((0,tr.tuple)([t,r]),e.citation_endnotes)))return e.citation_endnotes.__getitem__([t,r]);var l=function(){var n=e;return(0,tr.__call__)(n.get_citation_content_flm,n,t,r,_)}(),s=function(){var e=o;return(0,tr.__call__)(e.add_endnote,e,(0,tr.__kwargtrans__)({category_name:"citation",content_nodelist:l.nodes,ref_label_prefix:t,ref_label:r,node:(0,tr.tuple)([t,r])}))}();return s.formatted_inner_counter_value_flm=function(){var t,r=e.render_context;return(0,tr.__call__)(r.make_standalone_fragment,r,(t=e.feature_document_manager.endnote_category.counter_formatter,(0,tr.__call__)(t.format_flm,t,s.number,(0,tr.__kwargtrans__)({with_delimiters:!1}))),(0,tr.__kwargtrans__)({is_block_level:!1,what:"citation counter (inner)".format()}))}(),e.citation_endnotes.__setitem__([t,r],s),s}))},get render_citation_marks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"cite_items":t=n[a];break;case"node":r=n[a]}}}var i=e.render_context,o=i.fragment_renderer,l=null;if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.supports_feature,e,"endnotes")}()))l=function(){var e=i;return(0,tr.__call__)(e.feature_render_manager,e,"endnotes")}();if((0,tr.__t__)((0,tr.__t__)(e.use_endnotes)&&(0,tr.__t__)(null!==l)&&l.inhibit_render_endnote_marks))return function(){var e=o;return(0,tr.__call__)(e.render_nothing,e,i)}();for(var s=r.latex_walker.resource_info,c=[],u=[],f=t,d=0;d<(0,tr.len)(f);d++){var p=(0,tr.__getitem__)(f,d),h=(O=(0,tr.tuple)([(0,tr.__getitem__)(p,"prefix"),(0,tr.__getitem__)(p,"key"),(0,tr.__getitem__)(p,"extra")]))[0],g=O[1],v=O[2],m=null;if((0,tr.__t__)(e.use_endnotes))m=function(){var t=e;return(0,tr.__call__)(t.get_citation_endnote,t,h,g,s)}();(0,tr.__t__)(null===v)&&function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.tuple)([h,g,v,m]))}(),(0,tr.__t__)(null!==v)&&function(){var e=u;(0,tr.__call__)(e.append,e,(0,tr.tuple)([h,g,v,m]))}()}var y=[],w=!0;if((0,tr.__t__)((0,tr.__t__)(e.use_endnotes)&&e.sort_and_compress)){var b=function(){for(var e,t=[],r=c,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=(n[0],n[1],n[2],n[3]);e=void 0,e=t,(0,tr.__call__)(e.append,e,a)}return t}();if((0,tr.__t__)((0,tr.__gt__)((0,tr.__call__)(tr.len,null,b),1)))w=!1;var k=function(){var e=l;return(0,tr.__call__)(e.render_endnote_mark_many,e,b,(0,tr.__kwargtrans__)({wrap_with_semantic_span:!1}))}();!function(){var e=y;(0,tr.__call__)(e.append,e,k)}()}else u=(0,tr.__add__)(c,u);var x=e.feature.counter_formatter.delimiters;for(f=u,d=0;d<(0,tr.len)(f);d++){h=(O=(0,tr.__getitem__)(f,d))[0],g=O[1];var O,P=O[2],E=(m=O[3],null),C=null;if((0,tr.__t__)(e.use_endnotes))C=m.formatted_inner_counter_value_flm;else E=function(){var t=e;return(0,tr.__call__)(t.get_citation_content_flm,t,h,g,s)}(),C=E;var A=[];(0,tr.__t__)((0,tr.__t__)(w)&&null!==(0,tr.__getitem__)(x,0))&&function(){var e,t=A;(0,tr.__call__)(t.append,t,(e=r.latex_walker,(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(x,0),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}(),function(){var e=A;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(tr.list,null,C.nodes))}(),(0,tr.__t__)(null!==P)&&(function(){var t,_=A;(0,tr.__call__)(_.append,_,(t=r.latex_walker,(0,tr.__call__)(t.make_node,t,rn,(0,tr.__kwargtrans__)({chars:e.feature.citation_optional_text_separator,pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}(),function(){var e=A;(0,tr.__call__)(e.extend,e,(0,tr.__call__)(tr.list,null,P))}()),(0,tr.__t__)((0,tr.__t__)(w)&&null!==(0,tr.__getitem__)(x,1))&&function(){var e,t=A;(0,tr.__call__)(t.append,t,(e=r.latex_walker,(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({chars:(0,tr.__getitem__)(x,1),pos:r.pos,pos_end:r.pos_end,parsing_state:r.parsing_state}))))}();var S=function(){var e=r.parsing_state;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({is_block_level:!1}))}(),N=function(){var e=r.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,A,(0,tr.__kwargtrans__)({parsing_state:S}))}();if((0,tr.__t__)(e.use_endnotes)){var T=function(){var e=l;return(0,tr.__call__)(e.render_endnote_mark,e,m,N,(0,tr.__kwargtrans__)({wrap_with_semantic_span:!1}))}();if((0,tr.__t__)(!(0,tr.__t__)(w)))T=(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(x,0),T),(0,tr.__getitem__)(x,1));!function(){var e=y;(0,tr.__call__)(e.append,e,T)}()}else{var L=function(){var e=o;return(0,tr.__call__)(e.render_nodelist,e,N,i)}();if((0,tr.__t__)(!(0,tr.__t__)(w)))L=(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(x,0),L),(0,tr.__getitem__)(x,1));!function(){var e=y;(0,tr.__call__)(e.append,e,L)}()}}return function(){var e,t=o;return(0,tr.__call__)(t.render_semantic_span,t,(e=o,(0,tr.__call__)(e.render_join,e,y,i)),"citation-marks",i)}()}))}}),get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r="arabic";if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n="; ";if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a="References";if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"external_citations_providers":t=l[s];break;case"counter_formatter":r=l[s];break;case"citation_delimiters":_=l[s];break;case"citation_optional_text_separator":n=l[s];break;case"references_heading_title":a=l[s];break;case"sort_and_compress":i=l[s]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ff,"__init__"),null,e),e.external_citations_providers=t;var c=(0,tr.__call__)(tr.dict,null,uf);(0,tr.__t__)(null!==_)&&(0,tr.__setitem__)(c,"delimiters",_),e.counter_formatter=(0,tr.__call__)(Jl,null,r,c,(0,tr.__kwargtrans__)({counter_formatter_id:"citation"})),e.citation_optional_text_separator=n,e.references_heading_title=a,e.sort_and_compress=i}))},get set_external_citations_providers(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"external_citations_providers":t=_[n]}}}(0,tr.__t__)(null!==e.external_citations_providers)&&function(){var e=cf;(0,tr.__call__)(e.warning,e,"FeatureExternalPrefixedCitations.set_external_citations_providers(): There are already external citation providers set.  They will be replaced.")}(),e.external_citations_providers=t}))},get add_external_citations_provider(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"external_citations_provider":t=_[n]}}}(0,tr.__t__)(null===e.external_citations_providers)&&(!function(){var e=cf;(0,tr.__call__)(e.warning,e,"FeatureExternalPrefixedCitations.add_external_citations_provider(): External citations provider list was not initialized, creating an empty list.")}(),e.external_citations_providers=[]),function(){var r=e.external_citations_providers;(0,tr.__call__)(r.append,r,t)}()}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.dict)({macros:[(0,tr.__call__)(gf,null,"cite")]})}))}}),df=[(0,tr.__call__)(To,null,"[",(0,tr.__kwargtrans__)({argname:"cite_pre_text"})),(0,tr.__call__)(To,null,function(){var e=pa;return(0,tr.__call__)(e.LatexCharsCommaSeparatedListParser,e,(0,tr.__kwargtrans__)({enable_comments:!1}))}(),(0,tr.__kwargtrans__)({argname:"citekey"}))],pf=(0,tr.__class__)("CiteMoreArgsParser",[Li],{__module__:sf,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,pf,"__init__"),null,e,(0,tr.__kwargtrans__)({arguments_spec_list:df}))}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,pf,"parse"),null,e,t,r,_,(0,tr.__kwargtrans__)(n)),s=l[0],c=(l[1],function(){var e=t;return(0,tr.__call__)(e.make_node,e,rn,(0,tr.__kwargtrans__)({chars:"(MORE CITATION KEYS)",parsing_state:_,pos:null,pos_end:null}))}());return c.cite_more_parsed_arguments=s,(0,tr.tuple)([c,null])}))}}),hf=(0,tr.__class__)("TackOnMultipleCiteCommandsMacroParser",[pa.LatexTackOnInformationFieldMacrosParser],{__module__:sf,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"citemacronames":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,hf,"__init__"),null,e,t,(0,tr.__kwargtrans__)({allow_multiple:!0}))}))},get get_macro_arg_parser(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}return(0,tr.__call__)(pf,null)}))}}),gf=(0,tr.__class__)("CiteMacro",[Ko],{__module__:sf,allowed_in_standalone_mode:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}var a=(0,tr.__add__)((0,tr.__add__)([],df),[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:(0,tr.__call__)(hf,null,["cite"]),argname:"cite_more",flm_doc:"An immediately following \\verbcode+\\cite{}+ macro call gets appended to the current batch of citations"}))]);(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,gf,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:a}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["cite_pre_text","citekey","cite_more"]))}(),i=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(a,"cite_pre_text");return(0,tr.__call__)(e.was_provided,e)}()))i=function(){var e=(0,tr.__getitem__)(a,"cite_pre_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();var o=function(){var e=(0,tr.__getitem__)(a,"citekey");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}(),l=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"citekeylist_nodelist":e=_[n];break;case"optional_cite_extra_nodelist":t=_[n]}}}for(var a=[],i=e,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);if(!(0,tr.__t__)(!(0,tr.__t__)(l))){var s=function(){var e=l;return(0,tr.__call__)(e.latex_verbatim,e)}();if((0,tr.__t__)((0,tr.__getitem__)(l.delimiters,0)))s=(0,tr.__getslice__)(s,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.delimiters,0)),null,1);if((0,tr.__t__)((0,tr.__getitem__)(l.delimiters,1)))s=(0,tr.__getslice__)(s,0,(0,tr.__neg__)((0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(l.delimiters,1))),1);if((0,tr.__t__)((0,tr.__in__)(":",s))){var c=function(){var e=s;return(0,tr.__call__)(e.py_split,e,":",1)}(),u=c[0],f=c[1];u=function(){var e,t=(e=u,(0,tr.__call__)(e.strip,e));return(0,tr.__call__)(t.lower,t)}()}else u=(c=(0,tr.tuple)([null,s]))[0],f=c[1];!function(){var e=a;(0,tr.__call__)(e.append,e,(0,tr.dict)({prefix:u,key:f,extra:t}))}()}}if((0,tr.__t__)((0,tr.__t__)(null!==t)&&(0,tr.__gt__)((0,tr.__call__)(tr.len,null,a),1))){var d=(0,tr.__call__)(tr.ValueError,null,"When using the syntax \\cite[extra]{citekey}, you can only specify a single citation key.");throw d.__cause__=null,d}return a},s=(0,tr.__call__)(l,null,o,i),c=function(){var e=(0,tr.__getitem__)(a,"cite_more");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}();if((0,tr.__t__)(null!==c))for(var u=c,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);(0,tr.assert)(function(){var e=d;return(0,tr.__call__)(e.isNodeType,e,_n)}()),(0,tr.assert)((0,tr.__eq__)((0,tr.__getitem__)(d.delimiters,0),(0,tr.__add__)("\\",e.macroname)));var p=(0,tr.__getitem__)(d.nodelist,0).cite_more_parsed_arguments;(0,tr.assert)(null!==p);var h=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({parsed_arguments:p}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["cite_pre_text","citekey"]))}(),g=null;if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(h,"cite_pre_text");return(0,tr.__call__)(e.was_provided,e)}()))g=function(){var e=(0,tr.__getitem__)(h,"cite_pre_text");return(0,tr.__call__)(e.get_content_nodelist,e)}();var v=function(){var e=(0,tr.__getitem__)(h,"citekey");return(0,tr.__call__)(e.get_content_nodelist,e,(0,tr.__kwargtrans__)({unwrap_double_group:!1}))}(),m=(0,tr.__call__)(l,null,v,g);!function(){var e=s;(0,tr.__call__)(e.extend,e,m)}()}return t.flmarg_cite_items=s,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"citations")}();return function(){var e=i;return(0,tr.__call__)(e.render_citation_marks,e,t.flmarg_cite_items,t)}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=t.flmarg_cite_items;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.len,null,i))))return"";for(var o=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"cite")}(),l=function(){var e=o;return(0,tr.__call__)(e.py_get,e,"safe_labels",!1)}(),s=[],c=[],u=i,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f),p=(0,tr.__getitem__)(d,"extra"),h=(0,tr.__getitem__)(d,"prefix"),g=(0,tr.__getitem__)(d,"key"),v="{}:{}".format(h,g);if((0,tr.__t__)(l)){var m=function(){var e=r;return(0,tr.__call__)(e.make_safe_label,e,"cite",h,g,t.latex_walker.resource_info)}();v=(0,tr.__getitem__)(m,"safe_label")}(0,tr.__t__)((0,tr.__t__)(null!==p)&&(0,tr.__t__)(p)&&(0,tr.__t__)(null!==p.nodelist)&&(0,tr.__call__)(tr.len,null,p.nodelist))?function(){var e=c;(0,tr.__call__)(e.append,e,(0,tr.tuple)([v,p]))}():function(){var e=s;(0,tr.__call__)(e.append,e,v)}()}var y="\\NoCaseChange{";if((0,tr.__t__)((0,tr.__call__)(tr.len,null,s)))var y=(0,tr.__call__)(tr.__iadd__,null,y,(0,tr.__add__)((0,tr.__add__)("\\protect\\cite{",(0,tr.__call__)(",".join,",",s)),"}"));if((0,tr.__t__)((0,tr.__call__)(tr.len,null,c)))for(u=c,f=0;f<(0,tr.len)(u);f++){var w=(0,tr.__getitem__)(u,f),b=w[0],k=(p=w[1],function(){var e=r;return(0,tr.__call__)(e.subrecompose,e,p)}());y=(0,tr.__call__)(tr.__iadd__,null,y,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\protect\\cite[{",k),"}]{"),b),"}"))}return y=(0,tr.__call__)(tr.__iadd__,null,y,"}")}))}}),vf={};(0,tr.__nest__)(vf,"feature.verbatim",or),(0,tr.__nest__)(vf,"feature.theorems",Ol),(0,tr.__nest__)(vf,"feature.refs",ks),(0,tr.__nest__)(vf,"feature.math",uc),(0,tr.__nest__)(vf,"feature.href",Pc),(0,tr.__nest__)(vf,"feature.headings",Pl),(0,tr.__nest__)(vf,"feature.graphics",Ic),(0,tr.__nest__)(vf,"feature.floats",Gc),(0,tr.__nest__)(vf,"feature.enumeration",Tu),(0,tr.__nest__)(vf,"feature.endnotes",zu),(0,tr.__nest__)(vf,"feature.defterm",Xu),(0,tr.__nest__)(vf,"feature.cite",of),(0,tr.__nest__)(vf,"feature.cells",Uc),(0,tr.__nest__)(vf,"flmspecinfo",Wo),(0,tr.__nest__)(vf,"counter",Cl);var mf=(0,tr.dict)({"":(0,tr.dict)({"flm.counter:CounterFormatter":vf.counter.CounterFormatter,"flm.feature.cells:CellIndexRangeModel":vf.feature.cells.CellIndexRangeModel,"flm.feature.cells:CellPlacementModel":vf.feature.cells.CellPlacementModel,"flm.feature.cells:CellModel":vf.feature.cells.CellModel,"flm.feature.cells:CellPlacementsMappingModel":vf.feature.cells.CellPlacementsMappingModel,"flm.feature.cells:CellsModel":vf.feature.cells.CellsModel,"flm.feature.endnotes:EndnoteInstance":vf.feature.endnotes.EndnoteInstance,"flm.feature.floats:FloatContentAnyContent":vf.feature.floats.FloatContentAnyContent,"flm.feature.floats:FloatContentIncludeGraphics":vf.feature.floats.FloatContentIncludeGraphics,"flm.feature.floats:FloatContentCells":vf.feature.floats.FloatContentCells,"flm.feature.floats:FloatInstance":vf.feature.floats.FloatInstance,"flm.feature.floats:FloatType":vf.feature.floats.FloatType,"flm.feature.graphics:GraphicsResource":vf.feature.graphics.GraphicsResource,"flm.feature.refs:ReferenceableInfo":vf.feature.refs.ReferenceableInfo,"flm.feature.refs:RefInstance":vf.feature.refs.RefInstance}),FLMSpecInfo:(0,tr.dict)({"flm.flmspecinfo:ConstantValueMacro":vf.flmspecinfo.ConstantValueMacro,"flm.flmspecinfo:ConstantValueSpecials":vf.flmspecinfo.ConstantValueSpecials,"flm.flmspecinfo:TextFormatMacro":vf.flmspecinfo.TextFormatMacro,"flm.flmspecinfo:SemanticBlockEnvironment":vf.flmspecinfo.SemanticBlockEnvironment,"flm.flmspecinfo:ParagraphBreakSpecials":vf.flmspecinfo.ParagraphBreakSpecials,"flm.flmspecinfo:ParagraphBreakMacro":vf.flmspecinfo.ParagraphBreakMacro,"flm.flmspecinfo:FLMMacroSpecError":vf.flmspecinfo.FLMMacroSpecError,"flm.flmspecinfo:FLMEnvironmentSpecError":vf.flmspecinfo.FLMEnvironmentSpecError,"flm.flmspecinfo:FLMSpecialsSpecError":vf.flmspecinfo.FLMSpecialsSpecError,"flm.feature.cells:LatexTabularRowSeparatorSpec":vf.feature.cells.LatexTabularRowSeparatorSpec,"flm.feature.cells:LatexTabularColumnSeparatorSpec":vf.feature.cells.LatexTabularColumnSeparatorSpec,"flm.feature.cells:MergeMacroSpec":vf.feature.cells.MergeMacroSpec,"flm.feature.cells:CellMacro":vf.feature.cells.CellMacro,"flm.feature.cells:CelldataMacroSpec":vf.feature.cells.CelldataMacroSpec,"flm.feature.cells:CellsEnvironment":vf.feature.cells.CellsEnvironment,"flm.feature.cells:CiteMacro":vf.feature.cells.CiteMacro,"flm.feature.defterm:DefineTermEnvironment":vf.feature.defterm.DefineTermEnvironment,"flm.feature.defterm:RefTermMacro":vf.feature.defterm.RefTermMacro,"flm.feature.endnotes:EndnoteMacro":vf.feature.endnotes.EndnoteMacro,"flm.feature.enumeration:Enumeration":vf.feature.enumeration.Enumeration,"flm.feature.floats:FloatEnvironment":vf.feature.floats.FloatEnvironment,"flm.feature.graphics:SimpleIncludeGraphicsMacro":vf.feature.graphics.SimpleIncludeGraphicsMacro,"flm.feature.headings:HeadingMacro":vf.feature.headings.HeadingMacro,"flm.feature.href:HrefHyperlinkMacro":vf.feature.href.HrefHyperlinkMacro,"flm.feature.math:MathEnvironment":vf.feature.math.MathEnvironment,"flm.feature.math:MathEqrefMacro":vf.feature.math.MathEqrefMacro,"flm.feature.refs:RefMacro":vf.feature.refs.RefMacro,"flm.feature.theorems:TheoremEnvironment":vf.feature.theorems.TheoremEnvironment,"flm.feature.verbatim:VerbatimSpecInfo":vf.feature.verbatim.VerbatimSpecInfo,"flm.feature.verbatim:VerbatimMacro":vf.feature.verbatim.VerbatimMacro,"flm.feature.verbatim:VerbatimEnvironment":vf.feature.verbatim.VerbatimEnvironment})}),yf={},wf={},bf={};(0,tr.__nest__)(yf,"",ir),(0,tr.__nest__)(bf,"",ur),(0,tr.__nest__)(wf,"",m_);var kf="flm.flmdump",xf=(function(){var e=wf;(0,tr.__call__)(e.getLogger,e,kf)}(),bf.fn_unique_object_id),Of=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"fullclsname":e=_[n];break;case"restype":t=_[n]}}}var a=yf.serializable;if((0,tr.__t__)(null===t))t="";if((0,tr.__t__)(!(0,tr.__in__)(t,a)))throw(i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Invalid restype: ",(0,tr.__call__)(tr.repr,null,t)))).__cause__=null,i;var i,o=(0,tr.__getitem__)(a,t);if((0,tr.__t__)(!(0,tr.__in__)(e,o)))throw(i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Invalid class name: ",(0,tr.__call__)(tr.repr,null,e))," ["),(0,tr.__call__)(tr.repr,null,t)),"]"))).__cause__=null,i;return(0,tr.__getitem__)(o,e)},Pf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("clsobj"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)(e.__module__,":"),e.__name__)},Ef=(0,tr.__class__)("_FakeDataLoadedFLMLatexWalker",[tr.object],{__module__:kf,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"latex_walker":t=_[n]}}}e.flm_text=t.s,e.standalone_mode=t.standalone_mode,e.is_block_level=t.default_parsing_state.is_block_level,e.parsing_mode=t.parsing_mode,e.resource_info=t.resource_info,e.tolerant_parsing=t.tolerant_parsing,e.what=t.what,e.input_lineno_colno_offsets=t.input_lineno_colno_offsets}))},_fields:(0,tr.tuple)(["flm_text","standalone_mode","is_block_level","parsing_mode","resource_info","tolerant_parsing","what","input_lineno_colno_offsets"]),get __repr__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"{}(**{})".format(e.__class__.__name__,(0,tr.__call__)(tr.repr,null,e.__dict__))}))}}),Cf=function(){for(var e,t=[],r=hn,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,[n.__name__,n])}return(0,tr.dict)(t)}(),Af=function(){for(var e,t=[],r=[ui,Ao,M_,L_,Sn,So],_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,[n.__name__,n])}return(0,tr.dict)(t)}(),Sf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("typename"===_)e=r[_]}}return(0,tr.__t__)((0,tr.__in__)(e,Cf))||(0,tr.__t__)((0,tr.__in__)(e,Af))||(0,tr.__eq__)(e,"LatexNodeList")},Nf=(0,tr.__class__)("_Skip",[tr.object],{__module__:kf}),Tf=(0,tr.tuple)([Qi,ha,lo,so,co]),Lf=((0,tr.__class__)("FLMDataDumper",[tr.object],{__module__:kf,get __init__(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)switch(_){case"self":e=r[_];break;case"environment":var n=r[_]}}}e.environment=n,function(){var t=e;(0,tr.__call__)(t.py_clear,t)}()}))},get py_clear(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}e.data=(0,tr.dict)({dumps:(0,tr.dict)({}),resources:(0,tr.dict)({}),_dump:(0,tr.dict)({version:2})})}))},get get_data(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return e.data}))},get add_object_dump(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"key":t=n[a];break;case"obj":r=n[a]}}}var i=function(){var t=e;return(0,tr.__call__)(t._make_object_dump,t,r,(0,tr.__kwargtrans__)({dumping_state:(0,tr.dict)({object:r})}))}();(0,tr.__setitem__)((0,tr.__getitem__)(e.data,"dumps"),t,i)}))},get _make_object_dump(){return(0,tr.__get__)(this,(function(e,t){var r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"obj":t=n[a];break;case"dumping_state":var i=n[a];break;case"type_name":r=n[a]}}}for(var o=(0,tr.__call__)(tr.set,null,t._fields),l=(0,tr.__call__)(tr.dir,null,t),s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);(0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.startswith,e,"flm")}())&&function(){var e=o;(0,tr.__call__)(e.add,e,c)}()}if((0,tr.__t__)(null===r)){var u=t.__class__,f=u.__name__;if((0,tr.__t__)((0,tr.__call__)(Sf,null,f)))r=f;else r=(0,tr.__call__)(Pf,null,u)}var d=(0,tr.dict)({$type:r}),p=function(e){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("fieldname"===n)e=_[n]}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,e)))return(0,tr.__call__)(tr.getattr,null,t,e);if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"_proxy_object"))&&(0,tr.__call__)(tr.hasattr,null,t._proxy_object,e)))return(0,tr.__call__)(tr.getattr,null,t._proxy_object,e);var a=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("Invalid object field: ",(0,tr.__call__)(tr.repr,null,e))," in "),(0,tr.__call__)(tr.repr,null,t)));throw a.__cause__=null,a};for(l=(0,tr.__call__)(tr.sorted,null,o),s=0;s<(0,tr.len)(l);s++){var h=(0,tr.__getitem__)(l,s),g=function(){var t=e;return(0,tr.__call__)(t._make_dump,t,(0,tr.__call__)(p,null,h),(0,tr.__kwargtrans__)({dumping_state:i}))}();if((0,tr.__t__)(g===Nf))g=(0,tr.dict)({$skip:!0});(0,tr.__setitem__)(d,h,g)}return d}))},get _make_dump(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"x":t=_[n];break;case"dumping_state":var a=_[n]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.tuple,tr.list])))){for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l),c=function(){var t=e;return(0,tr.__call__)(t._make_dump,t,s,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)(c===Nf))c=null;!function(){var e=i;(0,tr.__call__)(e.append,e,c)}()}return i}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.dict)))return function(){for(var r,_=[],n=(r=t,(0,tr.__call__)(r.py_items,r)),i=0;i<(0,tr.len)(n);i++){var o=(0,tr.__getitem__)(n,i),l=o[0],s=o[1];!function(){var t,r=_;(0,tr.__call__)(r.append,r,[l,(t=e,(0,tr.__call__)(t._make_dump,t,s,(0,tr.__kwargtrans__)({dumping_state:a})))])}()}return(0,tr.dict)(_)}();if((0,tr.__t__)(t===e.environment))return(0,tr.dict)({$flmenv:"environment"});if((0,tr.__t__)(t===e.environment.parsing_state))return(0,tr.dict)({$flmenv:"parsing_state"});if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Io)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMLatexWalker",t,(0,tr.__call__)(Ef,null,t),(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Zo)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMSpecInfo",t,t,(0,tr.__kwargtrans__)({dumping_state:a,restype_dumptype:(0,tr.__call__)(Pf,null,t.__class__)}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Ao)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"FLMParsingState",t,t,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,hn)))return function(){var r=e;return(0,tr.__call__)(r._make_resource,r,"LatexNode",t,t,(0,tr.__kwargtrans__)({dumping_state:a,restype_dumptype:t.__class__.__name__}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,Tf)))return Nf;if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"_fields")))return function(){var r=e;return(0,tr.__call__)(r._make_object_dump,r,t,(0,tr.__kwargtrans__)({dumping_state:a}))}();if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.str,tr.bool,tr.int,tr.float]))))return t;if((0,tr.__t__)(null===t))return null;if((0,tr.__t__)(!(0,tr.__t__)(t)))return null;var u=(0,tr.__call__)(tr.ValueError,null,"Cannot dump value {} of unsupported type".format((0,tr.__call__)(tr.repr,null,t)));throw u.__cause__=null,u}))},get _make_resource(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"restype":t=i[o];break;case"y":r=i[o];break;case"ydata":_=i[o];break;case"restype_dumptype":n=i[o];break;case"dumping_state":var l=i[o]}}}(0,tr.__t__)(!(0,tr.__in__)(t,(0,tr.__getitem__)(e.data,"resources")))&&(0,tr.__setitem__)((0,tr.__getitem__)(e.data,"resources"),t,(0,tr.dict)({}));var s=(0,tr.__call__)(tr.str,null,(0,tr.__call__)(xf,null,r));if((0,tr.__t__)(!(0,tr.__in__)(s,(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t)))){(0,tr.__setitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),s,"$currently-dumping");var c=function(){var r=e;return(0,tr.__call__)(r._make_object_dump,r,_,(0,tr.__kwargtrans__)({dumping_state:l,type_name:(0,tr.__t__)(null!==n)?n:t}))}();(0,tr.__setitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),s,c)}return(0,tr.dict)({$restype:t,$reskey:s})}))}}),(0,tr.__class__)("FLMDataLoadNotSupported",[tr.object],{__module__:kf}));(0,tr.__class__)("FLMDataLoader",[tr.object],{__module__:kf,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"data":t=_[n];break;case"environment":var a=_[n]}}}if(e.data=t,e.environment=a,(0,tr.__t__)((0,tr.__ne__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"_dump"),"version"),2))){var i=(0,tr.__call__)(RuntimeError,null,"Dump version mismatch: {}, expected {}".format((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"_dump"),"version"),2));throw i.__cause__=null,i}if(e._loaded_resources=(0,tr.dict)({}),(0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("resources",e.data))&&(0,tr.__getitem__)(e.data,"resources")))for(var o=(0,tr.__getitem__)(e.data,"resources"),l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);(0,tr.__setitem__)(e._loaded_resources,s,(0,tr.dict)({}))}}))},get get_keys(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return(0,tr.__call__)(tr.list,null,function(){var t=(0,tr.__getitem__)(e.data,"dumps");return(0,tr.__call__)(t.py_keys,t)}())}))},get get_object_dump(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"key":t=_[n]}}}var a=(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"dumps"),t);return function(){var t=e;return(0,tr.__call__)(t._load_from_data,t,a)}()}))},get _load_from_data(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"data":t=_[n]}}}if((0,tr.__t__)(null===t))return null;if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,tr.list)))return function(){for(var r,_,n=[],a=t,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);r=void 0,_=void 0,_=n,(0,tr.__call__)(_.append,_,(r=e,(0,tr.__call__)(r._load_from_data,r,o)))}return n}();var a=null;try{a=(0,tr.__getitem__)(t,"$flmenv")}catch(e){}if((0,tr.__t__)(a))return function(){var r=e;return(0,tr.__call__)(r._flmenv_object,r,(0,tr.__getitem__)(t,"$flmenv"),t)}();a=null;try{a=(0,tr.__getitem__)(t,"$skip")}catch(e){}if((0,tr.__t__)(a))return Lf;a=null;try{a=(0,tr.__getitem__)(t,"$restype")}catch(e){}if((0,tr.__t__)(a))return function(){var r=e;return(0,tr.__call__)(r._load_resource,r,a,(0,tr.__getitem__)(t,"$reskey"))}();a=null;try{a=(0,tr.__getitem__)(t,"$type")}catch(e){}if((0,tr.__t__)(a)){var i=(0,tr.__call__)(tr.dict,null,t),o=function(){var e=i;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var t=e;return(0,tr.__call__)(t._load_object,t,o,i)}()}return(0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,t,(0,tr.tuple)([tr.str,tr.int,tr.bool])))?t:(0,tr.__t__)(t===Lf)?null:function(){for(var r,_=[],n=(r=(0,tr.__call__)(tr.dict,null,t),(0,tr.__call__)(r.py_items,r)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];!function(){var t,r=_;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._load_from_data,t,l))])}()}return(0,tr.dict)(_)}()}))},get _flmenv_object(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"flmenv_what":t=n[a];break;case"data":r=n[a]}}}if((0,tr.__t__)((0,tr.__eq__)(t,"")))return e.environment;if((0,tr.__t__)((0,tr.__eq__)(t,"parsing_state")))return e.environment.parsing_state;var i=(0,tr.__call__)(tr.ValueError,null,(0,tr.__add__)("Unknown/invalid flmenv: ",(0,tr.__call__)(tr.repr,null,r)));throw i.__cause__=null,i}))},get _load_resource(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"restype":t=n[a];break;case"reskey":r=n[a]}}}return(0,tr.__t__)(!(0,tr.__in__)(t,e._loaded_resources))&&(0,tr.__setitem__)(e._loaded_resources,t,(0,tr.dict)({})),(0,tr.__t__)(!(0,tr.__in__)(r,(0,tr.__getitem__)(e._loaded_resources,t)))&&(0,tr.__setitem__)((0,tr.__getitem__)(e._loaded_resources,t),r,function(){var _=e;return(0,tr.__call__)(_._load_resource_from_data,_,t,r)}()),(0,tr.__getitem__)((0,tr.__getitem__)(e._loaded_resources,t),r)}))},get _load_resource_from_data(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"restype":t=n[a];break;case"reskey":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__in__)(t,(0,tr.__getitem__)(e.data,"resources"))))throw(o=(0,tr.__call__)(tr.ValueError,null,"Invalid internal resource reference type {}".format(t))).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__in__)(r,(0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t))))throw(o=(0,tr.__call__)(tr.ValueError,null,"Invalid internal resource reference key {}/{}".format(t,r))).__cause__=null,o;var i=(0,tr.__getitem__)((0,tr.__getitem__)((0,tr.__getitem__)(e.data,"resources"),t),r);if((0,tr.__t__)((0,tr.__eq__)(t,"FLMLatexWalker"))){var o,l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();if((0,tr.__t__)((0,tr.__ne__)(s,"FLMLatexWalker")))throw(o=(0,tr.__call__)(tr.ValueError,null,"flmdump: Can't create LatexWalker instances other than FLMLatexWalker")).__cause__=null,o;return function(){var t=e.environment;return(0,tr.__call__)(t.make_latex_walker,t,(0,tr.__kwargtrans__)(l))}()}if((0,tr.__t__)((0,tr.__eq__)(t,"FLMParsingState")))return function(){var r=e;return(0,tr.__call__)(r._load_object,r,t,(0,tr.__call__)(tr.dict,null,i,(0,tr.__kwargtrans__)({latex_context:Lf})))}();if((0,tr.__t__)((0,tr.__eq__)(t,"FLMSpecInfo"))){l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var r=e;return(0,tr.__call__)(r._load_object,r,s,l,(0,tr.__kwargtrans__)({restype:t}))}()}if((0,tr.__t__)((0,tr.__eq__)(t,"LatexNode"))){l=(0,tr.__call__)(tr.dict,null,i),s=function(){var e=l;return(0,tr.__call__)(e.py_pop,e,"$type")}();return function(){var t=e;return(0,tr.__call__)(t._load_object,t,s,l)}()}throw(o=(0,tr.__call__)(tr.ValueError,null,"Unknown data resource type to load: {}".format(t))).__cause__=null,o}))},get _load_object(){return(0,tr.__get__)(this,(function(e,t,r){var _=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"objtype":t=a[i];break;case"data":r=a[i];break;case"restype":_=a[i]}}}r=(0,tr.__call__)(tr.dict,null,r);var o=function(){for(var t,_=[],n=(t=r,(0,tr.__call__)(t.py_items,t)),a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a),o=i[0],l=i[1];(0,tr.__t__)(!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.startswith,e,"$")}()))&&function(){var t,r=_;(0,tr.__call__)(r.append,r,[o,(t=e,(0,tr.__call__)(t._load_from_data,t,l))])}()}return(0,tr.dict)(_)}();if((0,tr.__t__)((0,tr.__eq__)(t,"FLMFragment")))var l=e._make_fragment;else if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)(t,Cf))||(0,tr.__eq__)(t,"LatexNodeList")))l=function(){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)r[a]=n[a];delete r.__kwargtrans__}}return function(){var _=e;return(0,tr.__call__)(_._make_node_instance,_,t,r)}()};else if((0,tr.__t__)((0,tr.__in__)(t,Af)))l=(0,tr.__getitem__)(Af,t);else{if(!(0,tr.__t__)((0,tr.__in__)(":",t))){var s=(0,tr.__call__)(tr.ValueError,null,"Unknown object type {} for data loading".format(t));throw s.__cause__=null,s}l=(0,tr.__call__)(Of,null,t,(0,tr.__kwargtrans__)({restype:_}))}return(0,tr.__call__)(l,null,(0,tr.__kwargtrans__)(o))}))},get _make_node_instance(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodetype":t=n[a];break;case"kwargs":r=n[a]}}}for(var i=(0,tr.dict)({}),o=(0,tr.dict)({}),l=function(){var e=r;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var c=(h=(0,tr.__getitem__)(l,s))[0],u=h[1];(0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.startswith,e,"flm")}())?(0,tr.__setitem__)(o,c,u):(0,tr.__setitem__)(i,c,u)}if((0,tr.__t__)((0,tr.__eq__)(t,"LatexNodeList")))var f=cn,d=e.environment.finalize_nodelist;else f=(0,tr.__getitem__)(Cf,t),d=e.environment.finalize_node;var p=(0,tr.__call__)(f,null,(0,tr.__kwargtrans__)(i));for(l=function(){var e=o;return(0,tr.__call__)(e.py_items,e)}(),s=0;s<(0,tr.len)(l);s++){var h;c=(h=(0,tr.__getitem__)(l,s))[0],u=h[1];(0,tr.__call__)(tr.setattr,null,p,c,u)}return p=(0,tr.__call__)(d,null,p)}))},get _make_fragment(){return(0,tr.__get__)(this,(function(e){var t=(0,tr.dict)();if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("self"===n)e=_[n];else t[n]=_[n];delete t.__kwargtrans__}}var a=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"nodes")}(),i=function(){var e=t;return(0,tr.__call__)(e.py_pop,e,"flm_text")}();return(0,tr.__call__)(ui,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({flm_text:a,environment:e.environment,_flm_text_if_loading_nodes:i},t)))}))}});Af.ZooFLMResourceInfo=class{constructor(e,t,r){this.object_type=e,this.object_id=t,this.source_path=r,this._fields=["object_type","object_id","source_path"],this.__class__={__name__:"ZooFLMResourceInfo"}}get_source_directory(e=""){return r(ar).join(e,r(ar).dirname(this.source_path))}toString(){return`[${this.object_type} ${this.object_id} in ${this.source_path}]`}toJSON(){return{object_type:this.object_type,object_id:this.object_id,source_path:this.source_path}}};s=a("3krpC"),ar=a("2R1eR"),tr=a("hoVWB");a("hoVWB");var Mf="flm.feature.baseformatting",jf=(0,(tr=a("hoVWB")).__class__)("NoExtraSpaceAfterDotMacro",[Ko],{__module__:Mf,get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,r.fragment_renderer,"latex_macro_no_extra_space_after_dot"))?r.fragment_renderer.latex_macro_no_extra_space_after_dot:""}))}}),If=(0,tr.__class__)("FeatureBaseFormatting",[cr],{__module__:Mf,feature_name:"baseformatting",feature_title:"Basic formatting",feature_flm_doc:"\n    You can produce basic formatting, including emphasis/italics and\n    boldface using the following macros.  Several macros also provide a way to\n    typeset literal characters that would otherwise have a special meaning in\n    your FLM environment.\n\n    Input accents, special characters, etc., directly as Unicode:\n    \\verbcode++. Note that source files should always be encoded using\n    the UTF-8 encoding. You can use pretty quotes \\verbcode++ \\verbcode++\n    \\verbcode++ \\verbcode++; dashes \\verbcode|| (em dash), \\verbcode|| (en\n    dash, for ranges); spaces \\verbcode|| (non-breaking space), \\verbcode||\n    (em space), \\verbcode|| (thin space), etc.\n    ",latex_definitions:(0,tr.dict)({macros:[(0,tr.__call__)(rl,null,"textbackslash",(0,tr.__kwargtrans__)({value:"\\"})),(0,tr.__call__)(rl,null,"%",(0,tr.__kwargtrans__)({value:"%"})),(0,tr.__call__)(rl,null,"#",(0,tr.__kwargtrans__)({value:"#"})),(0,tr.__call__)(rl,null,"&",(0,tr.__kwargtrans__)({value:"&"})),(0,tr.__call__)(rl,null,"$",(0,tr.__kwargtrans__)({value:"$"})),(0,tr.__call__)(rl,null," ",(0,tr.__kwargtrans__)({value:" "})),(0,tr.__call__)(rl,null,"{",(0,tr.__kwargtrans__)({value:"{"})),(0,tr.__call__)(rl,null,"}",(0,tr.__kwargtrans__)({value:"}"})),(0,tr.__call__)(ol,null,"emph",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textit"])})),(0,tr.__call__)(ol,null,"textit",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textit"])})),(0,tr.__call__)(ol,null,"textbf",(0,tr.__kwargtrans__)({text_formats:(0,tr.tuple)(["textbf"])})),(0,tr.__call__)(jf,null,"@")],specials:[(0,tr.__call__)(_l,null,"~",(0,tr.__kwargtrans__)({value:""})),(0,tr.__call__)(cl,null,"\n\n")]})}),Df=(tr=a("hoVWB"),{});(0,tr.__nest__)(Df,"",m_);var Rf="flm.feature.quote",Ff=function(){var e=Df;return(0,tr.__call__)(e.getLogger,e,Rf)}(),zf=(0,tr.dict)({text:(0,tr.__call__)(lo,null,"text",(0,tr.__kwargtrans__)({arguments_spec_list:[nl]})),lines:(0,tr.__call__)(lo,null,"lines",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"text",flm_doc:"The text or FLM content to process",parsing_state_delta:(0,tr.__call__)(eo,null,(0,tr.__kwargtrans__)({extend_latex_context:(0,tr.dict)({macros:[(0,tr.__call__)(lo,null,"\\")]}),set_attributes:(0,tr.dict)({is_block_level:!1})}))}))]})),attributed:(0,tr.__call__)(lo,null,"attributed",(0,tr.__kwargtrans__)({arguments_spec_list:[nl]})),block:(0,tr.__call__)(lo,null,"block",(0,tr.__kwargtrans__)({arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({parser:"{",argname:"text",flm_doc:"The text or FLM content to process"}))]}))}),Bf=(0,tr.__class__)("QuoteEnvironment",[Jo],{__module__:Rf,is_block_level:!0,body_contents_is_block_level:!0,get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"environmentname":t=i[o];break;case"enabled_quote_sections":r=i[o];break;case"content_is_block_level":_=i[o];break;case"auto_quote_section_bare_content":n=i[o]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Bf,"__init__"),null,e,t,(0,tr.__kwargtrans__)({arguments_spec_list:[]})),(0,tr.__t__)((0,tr.__t__)(r)&&(0,tr.__call__)(tr.len,null,r))?e.enabled_quote_sections=(0,tr.__call__)(tr.list,null,r):e.enabled_quote_sections=[],e.auto_quote_section_bare_content=n,e.content_is_block_level=_,(0,tr.__t__)((0,tr.__t__)((0,tr.__eq__)(e.auto_quote_section_bare_content,"lines"))&&e.content_is_block_level)&&function(){var e=Ff;(0,tr.__call__)(e.warning,e,"Configuration of quote-type environment {}{}{} might be flawed: using '\\lines' for bare environment content (auto_quote_section_bare_content='lines') but content_is_block_level is set to True; consider setting it to False instead.".format("{",t,"}"))}()}))},_fields:(0,tr.tuple)(["enabled_quote_sections","content_is_block_level"]),get make_body_parser(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"token":t=a[i];break;case"nodeargd":r=a[i];break;case"arg_parsing_state_delta":_=a[i]}}}for(var o=(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:[],environments:[],specials:[]})),l=e.enabled_quote_sections,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s);!function(){var e=(0,tr.__getitem__)(o,"macros");(0,tr.__call__)(e.append,e,(0,tr.__getitem__)(zf,c))}()}return(0,tr.__t__)((0,tr.__eq__)(e.auto_quote_section_bare_content,"lines"))&&function(){var e=(0,tr.__getitem__)(o,"macros");(0,tr.__call__)(e.append,e,(0,tr.__call__)(lo,null,"\\"))}(),(0,tr.__call__)(Ei,null,(0,tr.__kwargtrans__)({environmentname:t.arg,contents_parsing_state_delta:(0,tr.__call__)(eo,null,(0,tr.__kwargtrans__)({extend_latex_context:o,set_attributes:(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({is_block_level:e.content_is_block_level}))}))}))}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}for(var a=[],i=[],o=function(){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _);}}if(!(0,tr.__t__)(!(0,tr.__t__)(e.auto_quote_section_bare_content))){for(var a=!1,o=i,s=0;s<(0,tr.len)(o);s++){var c=(0,tr.__getitem__)(o,s);if(!(0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.isNodeType,e,nn)}())&&!(0,tr.__t__)((0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&(0,tr.__eq__)((0,tr.__call__)(tr.len,null,function(){var e=c.chars;return(0,tr.__call__)(e.strip,e)}()),0))){a=!0;break}}(0,tr.__t__)(!(0,tr.__t__)(a))||((0,tr.__call__)(l,null,e.auto_quote_section_bare_content,(0,tr.__kwargtrans__)({node:null,text_arg_nodelist:function(){var e=t.latex_walker;return(0,tr.__call__)(e.make_nodelist,e,(0,tr.__call__)(tr.list,null,i),(0,tr.__kwargtrans__)({parsing_state:t.nodelist.parsing_state}))}()})),function(){var e=i;(0,tr.__call__)(e.py_clear,e)}())}},l=function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var i in n)switch(i){case"py_name":e=n[i];break;case"node":t=n[i];break;case"text_arg_nodelist":r=n[i]}}}var o=(0,tr.dict)({name:e,node:null,text_arg_nodelist:r});if((0,tr.__t__)((0,tr.__eq__)(e,"lines"))){for(var l=function(){var e=r;return(0,tr.__call__)(e.split_at_node,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("n"===_)e=r[_]}}return(0,tr.__t__)((n=e,(0,tr.__call__)(n.isNodeType,n,an)))&&(0,tr.__eq__)(e.macroname,"\\");var n}))}(),s=[],c=l,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u);!function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.__call__)(qf,null,f))}()}(0,tr.__setitem__)(o,"lines_iter_nodelists",s)}!function(){var e=a;(0,tr.__call__)(e.append,e,o)}()},s=t.nodelist,c=0;c<(0,tr.len)(s);c++){var u=(0,tr.__getitem__)(s,c);if((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,an)}())&&(0,tr.__t__)((0,tr.__in__)(u.macroname,e.enabled_quote_sections))){(0,tr.__call__)(o,null);var f=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:u}));return(0,tr.__call__)(e.get_argument_info,e,"text")}(),d=function(){var e=f;return(0,tr.__call__)(e.get_content_nodelist,e)}();(0,tr.__call__)(l,null,u.macroname,(0,tr.__kwargtrans__)({node:u,text_arg_nodelist:d}))}else if(!(0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,nn)}()))if((0,tr.__t__)(e.auto_quote_section_bare_content))!function(){var e=i;(0,tr.__call__)(e.append,e,u)}();else if(!(0,tr.__t__)((0,tr.__t__)(function(){var e=u;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&(0,tr.__eq__)(function(){var e=u.chars;return(0,tr.__call__)(e.strip,e)}(),""))){var p=(0,tr.__call__)(V_,null,(0,tr.__add__)((0,tr.__add__)("All content in {}{}{} environments must be wrapped in an appropriate quote-section command (".format("{",e.environmentname,"}"),(0,tr.__call__)(", ".join,", ",function(){for(var t,r=[],_=e.enabled_quote_sections,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,(0,tr.__add__)((0,tr.__add__)("\\",(0,tr.__call__)(tr.str,null,a)),"{}"))}return r}())),"); found content {}".format((0,tr.__call__)(tr.str,null,u))));throw p.__cause__=null,p}}return(0,tr.__call__)(o,null),t.flm_quote_section_nodes=a,t}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}for(var i=r.fragment_renderer,o=[],l=t.flm_quote_section_nodes,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=(0,tr.__getitem__)(c,"name"),f=((0,tr.__getitem__)(c,"node"),(0,tr.__getitem__)(c,"text_arg_nodelist"));if((0,tr.__t__)((0,tr.__eq__)(u,"text")))!function(){var e,t,_=o;(0,tr.__call__)(_.append,_,(t=i,(0,tr.__call__)(t.render_semantic_block,t,(e=i,(0,tr.__call__)(e.render_nodelist,e,f,r)),(0,tr.__kwargtrans__)({role:"quote-text",render_context:r}))))}();else if((0,tr.__t__)((0,tr.__eq__)(u,"lines")))!function(){var e,t=o;(0,tr.__call__)(t.append,t,(e=i,(0,tr.__call__)(e.render_lines,e,(0,tr.__getitem__)(c,"lines_iter_nodelists"),(0,tr.__kwargtrans__)({role:"quote-lines",render_context:r}))))}();else if((0,tr.__t__)((0,tr.__eq__)(u,"attributed")))!function(){var e,t,_=o;(0,tr.__call__)(_.append,_,(t=i,(0,tr.__call__)(t.render_semantic_block,t,(e=i,(0,tr.__call__)(e.render_nodelist,e,f,r)),(0,tr.__kwargtrans__)({role:"quote-attributed",render_context:r}))))}();else{if(!(0,tr.__t__)((0,tr.__eq__)(u,"block"))){var d=(0,tr.__call__)(tr.ValueError,null,"No idea how to render quote-section of type {}".format(u));throw d.__cause__=null,d}!function(){var e,t,_=o;(0,tr.__call__)(_.append,_,(t=i,(0,tr.__call__)(t.render_semantic_block,t,(e=i,(0,tr.__call__)(e.render_nodelist,e,f,r)),(0,tr.__kwargtrans__)({role:"quote-block",render_context:r}))))}()}}var p=function(){var e=i;return(0,tr.__call__)(e.render_join_blocks,e,o,r)}();return function(){var t=i;return(0,tr.__call__)(t.render_semantic_block,t,p,(0,tr.__kwargtrans__)({role:e.environmentname,render_context:r}))}()}))},get recompose_pure_latex(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"recomposer":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.get_options,e,"quote")}();if((0,tr.__t__)(function(){var e=i;return(0,tr.__call__)(e.py_get,e,"keep_as_is",!1)}()))return!1;var o=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"setup_macro","flmLinesSetup")}(),l=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"text_macro",null)}(),s=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"lines_macro",null)}(),c=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"attributed_macro","flmLinesAttributed")}(),u=function(){var e=i;return(0,tr.__call__)(e.py_get,e,"block_macro","flmLinesBlock")}(),f=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\begin{",t.environmentname),"}%"),"\n");if((0,tr.__t__)((0,tr.__t__)(null!==o)&&(0,tr.__call__)(tr.len,null,o)))var f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\",o),"{"),t.environmentname),"}%"),"\n"));for(var d=t.flm_quote_section_nodes,p=0;p<(0,tr.len)(d);p++){var h=(0,tr.__getitem__)(d,p),g=(0,tr.__getitem__)(h,"name"),v=((0,tr.__getitem__)(h,"node"),(0,tr.__getitem__)(h,"text_arg_nodelist")),m=function(){var e,_=(e=r,(0,tr.__call__)(e.recompose_nodelist,e,v,t));return(0,tr.__call__)(_.strip,_)}();if((0,tr.__t__)((0,tr.__eq__)(g,"text"))){if((0,tr.__t__)((0,tr.__t__)(null!==l)&&(0,tr.__call__)(tr.len,null,l)));}else if((0,tr.__t__)((0,tr.__eq__)(g,"lines"))){if((0,tr.__t__)((0,tr.__t__)(null!==s)&&(0,tr.__call__)(tr.len,null,s)));}else if((0,tr.__t__)((0,tr.__eq__)(g,"attributed"))){if((0,tr.__t__)((0,tr.__t__)(null!==c)&&(0,tr.__call__)(tr.len,null,c)));}else{if(!(0,tr.__t__)((0,tr.__eq__)(g,"block"))){var y=(0,tr.__call__)(tr.ValueError,null,"No idea how to render quote-section of type {}".format(g));throw y.__cause__=null,y}if((0,tr.__t__)((0,tr.__t__)(null!==u)&&(0,tr.__call__)(tr.len,null,u)));}if((0,tr.__t__)((0,tr.__t__)(null!==c)&&(0,tr.__call__)(tr.len,null,c)))f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)("\\",c),"{"),m),"}%"),"\n"));else f=(0,tr.__call__)(tr.__iadd__,null,f,m)}return f=(0,tr.__call__)(tr.__iadd__,null,f,(0,tr.__add__)((0,tr.__add__)("\\end{",t.environmentname),"}"))}))}}),qf=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("nodelist"===_)e=r[_]}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(e))||!(0,tr.__t__)((0,tr.__call__)(tr.len,null,e))))return e;for(var n=0,a=e,i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i);if(!(0,tr.__t__)(function(){var e=o;return(0,tr.__call__)(e.isNodeType,e,nn)}()))break;n=(0,tr.__call__)(tr.__iadd__,null,n,1)}if((0,tr.__t__)((0,tr.__eq__)(n,(0,tr.__call__)(tr.len,null,e))))return e;var l=function(){for(var t,r=[],_=e,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);t=void 0,t=r,(0,tr.__call__)(t.append,t,a)}return r}(),s=e.latex_walker,c=(0,tr.__getitem__)(l,n);if((0,tr.__t__)(function(){var e=c;return(0,tr.__call__)(e.isNodeType,e,rn)}())){if((0,tr.__t__)(function(){var e=(0,tr.__getitem__)(c.chars,0);return(0,tr.__call__)(e.isspace,e)}())){var u=function(){var e,t=s;return(0,tr.__call__)(t.make_node,t,rn,(0,tr.__kwargtrans__)({chars:(e=c.chars,(0,tr.__call__)(e.lstrip,e)),pos:c.pos,pos_end:c.pos_end,parsing_state:c.parsing_state}))}();(0,tr.__setitem__)(l,n,u)}}else if((0,tr.__t__)((0,tr.__t__)(null!==c.pre_space)&&(0,tr.__call__)(tr.len,null,c.pre_space))){var f=(0,tr.dict)({});for(a=c._fields,i=0;i<(0,tr.len)(a);i++){var d=(0,tr.__getitem__)(a,i);(0,tr.__setitem__)(f,d,(0,tr.__call__)(tr.getattr,null,c,d))}(0,tr.__setitem__)(f,"pre_space","");u=function(){var e=s;return(0,tr.__call__)(e.make_node,e,c.__class__,(0,tr.__kwargtrans__)(f))}();(0,tr.__setitem__)(l,n,u)}var p=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e),1),h=(0,tr.__getitem__)(l,p);if((0,tr.__t__)((0,tr.__t__)(function(){var e=h;return(0,tr.__call__)(e.isNodeType,e,rn)}())&&function(){var e=(0,tr.__getitem__)(h.chars,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,h.chars),1));return(0,tr.__call__)(e.isspace,e)}())){var g=function(){var e,t=s;return(0,tr.__call__)(t.make_node,t,rn,(0,tr.__kwargtrans__)({chars:(e=h.chars,(0,tr.__call__)(e.rstrip,e)),pos:h.pos,pos_end:h.pos_end,parsing_state:h.parsing_state}))}();(0,tr.__setitem__)(l,p,g)}return function(){var t=s;return(0,tr.__call__)(t.make_nodelist,t,l,(0,tr.__kwargtrans__)({parsing_state:e.parsing_state}))}()},Vf=(0,tr.dict)({quote:(0,tr.dict)({enabled_quote_sections:["text","lines","attributed","block"]}),address:(0,tr.dict)({enabled_quote_sections:[],auto_quote_section_bare_content:"lines",content_is_block_level:!1}),blockquote:(0,tr.dict)({enabled_quote_sections:[],auto_quote_section_bare_content:"block"})}),Gf=(0,tr.__class__)("FeatureQuote",[sr],{__module__:Rf,feature_name:"quotation",feature_title:"Quote other people's words, with attribution",feature_flm_doc:"\n    Provides the \\verbcode+\\begin{quote} ... \\end{quote}+ environment to produce\n    block literary quotations.\n    ",DocumentManager:null,RenderManager:null,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"quote_environments":t=_[n]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Gf,"__init__"),null,e),(0,tr.__t__)(null===t))t=Vf;e.quote_environments=t}))},get _mk_quote_environment_spec(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"qenvname":t=n[a];break;case"qenvspec":r=n[a]}}}if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,r,Bf))){if((0,tr.__t__)((0,tr.__ne__)(t,r.environmentname))){var i=(0,tr.__call__)(tr.ValueError,null,"Misconfigured QuoteEnvironment instance with qenvname != qenvspec.environmentname : {} != {}".format((0,tr.__call__)(tr.repr,null,t),(0,tr.__call__)(tr.repr,null,r.environmentname)));throw i.__cause__=null,i}return r}return(0,tr.__call__)(Bf,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({environmentname:t},r)))}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}var n=function(){for(var t,r=[],_=(t=e.quote_environments,(0,tr.__call__)(t.py_items,t)),n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n),i=a[0],o=a[1];!function(){var t,_=r;(0,tr.__call__)(_.append,_,(t=e,(0,tr.__call__)(t._mk_quote_environment_spec,t,i,o)))}()}return r}();return(0,tr.dict)({environments:n})}))}}),Uf="flm.feature.annotations",$f=(0,(tr=a("hoVWB")).__class__)("AnnotationArgumentParser",[ha],{__module__:Uf,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"macroname":t=_[n]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,$f,"__init__"),null,e),e.macroname=t,e.endmacroname=(0,tr.__add__)("end",e.macroname),e.parser_arg_highlight=(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["{","}"])})),e.parser_arg_comment=(0,tr.__call__)(Ta,null,(0,tr.__kwargtrans__)({delimiters:(0,tr.tuple)(["[","]"])})),e.parser_endmacro_highlight=(0,tr.__call__)(ka,null,(0,tr.__kwargtrans__)({stop_token_condition:function(t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)if("tok"===n)t=_[n]}}return(0,tr.__t__)((0,tr.__eq__)(t.tok,"macro"))&&(0,tr.__eq__)(t.arg,e.endmacroname)},require_stop_condition_met:!0}))}))},get parse(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=(0,tr.dict)();if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"latex_walker":t=i[o];break;case"token_reader":r=i[o];break;case"parsing_state":_=i[o];break;default:n[o]=i[o]}delete n.__kwargtrans__}}var l=function(){var e=_;return(0,tr.__call__)(e.sub_context,e,(0,tr.__kwargtrans__)({latex_group_delimiters:[(0,tr.tuple)(["{","}"]),(0,tr.tuple)(["[","]"])]}))}(),s=function(){var e=r;return(0,tr.__call__)(e.peek_token,e,(0,tr.__kwargtrans__)({parsing_state:l}))}();if((0,tr.__t__)((0,tr.__eq__)(s.tok,"brace_open"))){if((0,tr.__t__)((0,tr.__eq__)(s.arg,"{")))return function(){var _=e.parser_arg_highlight;return(0,tr.__call__)(_.parse,_,t,r,l,(0,tr.__kwargtrans__)(n))}();if((0,tr.__t__)((0,tr.__eq__)(s.arg,"[")))return function(){var _=e.parser_arg_comment;return(0,tr.__call__)(_.parse,_,t,r,l,(0,tr.__kwargtrans__)(n))}();var c=(0,tr.__call__)(tr.ValueError,null,"Unexpected tok.arg={}!".format(s.arg));throw c.__cause__=null,c}var u=function(){var a=e.parser_endmacro_highlight;return(0,tr.__call__)(a.parse,a,t,r,_,(0,tr.__kwargtrans__)(n))}(),f=u[0],d=u[1];!function(){var e=r;(0,tr.__call__)(e.next_token,e,_)}();var p=function(){var e=t;return(0,tr.__call__)(e.make_node,e,_n,(0,tr.__kwargtrans__)({nodelist:f,delimiters:(0,tr.tuple)(["",""]),pos:f.pos,pos_end:f.pos_end,parsing_state:_}))}();return(0,tr.tuple)([p,d])}))}}),Wf=(0,tr.__class__)("AnnotationMacro",[Ko],{__module__:Uf,allowed_in_standalone_mode:!0,_flm_main_text_argument:"text",get __init__(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"macroname":t=a[i];break;case"initials":r=a[i];break;case"color_index":_=a[i]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Wf,"__init__"),null,e,(0,tr.__kwargtrans__)({macroname:t,arguments_spec_list:[(0,tr.__call__)(To,null,(0,tr.__kwargtrans__)({argname:"text",parser:(0,tr.__call__)($f,null,(0,tr.__kwargtrans__)({macroname:t})),parsing_state_delta:(0,tr.__call__)(So,null,(0,tr.__kwargtrans__)({is_block_level:null}))}))]})),e.initials=r,e.color_index=_}))},_fields:(0,tr.tuple)(["macroname"]),get get_flm_doc(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}return"Annotation macro \\{}".format(e.macroname)}))},get render(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=r;return(0,tr.__call__)(e.feature_render_manager,e,"annotations")}();return(0,tr.__t__)(i.hide_all_annotations)?(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(t.flmarg_text_delimiters,0),"["))?function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nothing,e,r)}():function(){var e=r.fragment_renderer;return(0,tr.__call__)(e.render_nodelist,e,t.flmarg_text_nodelist,r,(0,tr.__kwargtrans__)({is_block_level:t.flm_is_block_level}))}():(0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(t.flmarg_text_delimiters,0),"["))?function(){var _=r.fragment_renderer;return(0,tr.__call__)(_.render_annotation_comment,_,t.flmarg_text_nodelist,(0,tr.__kwargtrans__)({render_context:r,color_index:e.color_index,initials:e.initials,is_block_level:t.flm_is_block_level}))}():function(){var _=r.fragment_renderer;return(0,tr.__call__)(_.render_annotation_highlight,_,t.flmarg_text_nodelist,(0,tr.__kwargtrans__)({render_context:r,color_index:e.color_index,initials:e.initials,is_block_level:t.flm_is_block_level}))}()}))},get postprocess_parsed_node(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(Pn,null,(0,tr.__kwargtrans__)({node:t}));return(0,tr.__call__)(e.get_all_arguments_info,e,(0,tr.tuple)(["text"]))}(),i=(0,tr.__getitem__)(a,"text");t.flmarg_text_delimiters=i.argument_node_object.delimiters;var o=function(){var e=i;return(0,tr.__call__)(e.get_content_nodelist,e)}();t.flmarg_text_nodelist=o;var l=t.latex_walker.flm_environment.nodes_finalizer;t.flm_is_block_level=function(){var e=l;return(0,tr.__call__)(e.infer_is_block_level_nodelist,e,o)}()}))}}),Hf=(0,tr.__class__)("FeatureAnnotations",[sr],{__module__:Uf,feature_name:"annotations",feature_title:"Support for simple annotations in text (comments and highlighted text)",feature_flm_doc:"\n    Supports the definition of custom macros to mark annotations from multiple\n    authors.\n\n    Say we define an annotation macro '\\abc'.  There are two types of\n    annotations each macro such as '\\abc' supports:\n\n       \\abc{This piece of text is highlighted}\n       \\abc This piece of text is highlighted, alternative syntax \\endabc\n\n       \\abc[This is an inline comment.]\n\n    Highlighted text refers to pieces of the document that are highlighted in a\n    particular color; inline comments are any remarks that concern the\n    surrounding text and which would typically be deleted before completing the\n    document.\n    ",get __init__(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=!1;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"macrodefs":t=n[a];break;case"hide_all_annotations":r=n[a]}}}(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,Hf,"__init__"),null,e),e.macrodefs=(0,tr.__call__)(tr.dict,null,(0,tr.__t__)(t)||(0,tr.dict)({})),e.hide_all_annotations=r}))},get add_latex_context_definitions(){return(0,tr.__get__)(this,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("self"===_)e=r[_]}}for(var n=[],a=0,i=function(){var t=e.macrodefs;return(0,tr.__call__)(t.py_items,t)}(),o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o),s=l[0],c=l[1];!function(){var e=n;(0,tr.__call__)(e.append,e,(0,tr.__call__)(Wf,null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({macroname:s,color_index:a},c))))}();a=(0,tr.__call__)(tr.__iadd__,null,a,1)}return(0,tr.__call__)(tr.dict,null,(0,tr.__kwargtrans__)({macros:n}))}))},RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{__module__:Uf,get initialize(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"hide_all_annotations":t=_[n]}}}(0,tr.__t__)(null!==t)?e.hide_all_annotations=t:e.hide_all_annotations=e.feature.hide_all_annotations}))}})});const Yf=r(s)("zoodb.zooflm._environment"),Xf=Zs.SectionCommandInfo,Zf=Uu,Kf=Cs,Jf=As,Qf=Pu,ed=zc;for(const e of[Xf,Zf,Kf,Jf,Qf,ed])e.toJSON=function(){return this.asdict()};function td(e){return(0,tr.isinstance)(e,ui)}class rd{constructor(e){this.options=e??{},this.clear_all_refs(),this.target_href_resolver=null}clear_all_refs(){this.ref_instance_database={},this.options.ref_types&&this.options.ref_types.forEach((e=>{this.ref_instance_database[e]={}}))}add_ref(e){const{ref_type:t,ref_label:r}=e;if(null==t)throw new Error(`Invalid ref_type:ref_label pair ${t}:${r}`);if(!Object.hasOwn(this.ref_instance_database,t)){if(void 0!==this.options.ref_types)throw new Error(`Invalid ref prefix ${t} in ${t}:${r}, expected one of ${this.options.ref_types}`);this.ref_instance_database[t]={}}if(Object.hasOwn(this.ref_instance_database[t],r))throw new Error(`Ref target ${t}:${r} already exists in ref instance database, found ${JSON.stringify(this.ref_instance_database[t][r])}`);this.ref_instance_database[t][r]=e}get_ref(e,t,r,_){const n=this.ref_instance_database?.[e]?.[t];return null==n?(Yf(`No such reference in ref instance database  ${e}:${t}`),null):null!=this.target_href_resolver?new Jf(er(Object.assign({},n.asdict(),{target_href:this.target_href_resolver(n,_)}))):n}dump_database(){const e={};if(this.ref_instance_database)for(const[t,r]of Object.entries(this.ref_instance_database)){if(!r)continue;let _={};for(const[e,t]of Object.entries(r)){let r=null;r=td(t.formatted_ref_flm_text)?Object.assign({},t.asdict(),{formatted_ref_flm_text:t.formatted_ref_flm_text.flm_text}):t.asdict(),_[e]=r}e[t]=_}return{ref_instance_database:e}}load_database(e){let t={};for(const[r,_]of Object.entries(e.ref_instance_database)){t[r]={};for(const[e,n]of Object.entries(_))t[r][e]=new Jf(er(n))}this.ref_instance_database=t}}class _d{constructor(){this.clear_citations()}clear_citations(){this.citations_database={}}add_citation(e,t,r,_){const{overwrite:n}=_??{};if(Object.hasOwn(this.citations_database,e)||(this.citations_database[e]={}),!n&&Object.hasOwn(this.citations_database[e],t))throw new Error(`There is already a citation registered for ${e}:${t}`);this.citations_database[e][t]=r}set_citations(e){this.clear_citations(),this.update_citations(e)}update_citations(e){for(const{cite_prefix:t,cite_key:r,citation_text:_}of e)this.add_citation(t,r,_,{overwrite:!0})}has_citation({cite_prefix:e,cite_key:t}){return!(!this.citations_database||!this.citations_database[e]||null==this.citations_database[e][t])}get_citation_full_text_flm(e,t,r){return Object.hasOwn(this.citations_database,e)?Object.hasOwn(this.citations_database[e],t)?this.citations_database[e][t]:this.handle_unresolved_citation({cite_prefix:e,cite_key:t,resource_info:r,message:`There is no citation registered for key ${e}:${t} in ${r}`}):this.handle_unresolved_citation({cite_prefix:e,cite_key:t,resource_info:r,message:`There is no citation registered for prefix ${e} for ${e}:${t} in ${r}`})}handle_unresolved_citation({cite_prefix:e,cite_key:t,message:r}){return Yf(`Can't find citation ${e}:${t}: ${r}`),null}dump_database(){let e={};for(const[t,r]of Object.entries(this.citations_database)){e[t]={};for(let[_,n]of Object.entries(r))td(n)&&(n=n.flm_text),e[t][_]=n}return{citations_database:e}}load_database(e){this.citations_database=e.citations_database}}const nd=(0,tr.__class__)("FeatureZooGraphicsCollection",[sr],{__module__:"zoodb.zooflm._environment",RenderManager:(0,tr.__class__)("RenderManager",[sr.RenderManager],{get initialize(){return(0,tr.__get__)(this,(function(e,t){let r=null;null!=t&&(function(e){return e&&Object.hasOwn(e,"__kwargtrans__")}(t)||console.error("FeatureZooGraphicsCollection.initialize() - invalid argument kwargs=",t),r=t.override_get_graphics_resource),r?(e.override_get_graphics_resource=r,Yf("FeatureZooGraphicsCollection: Set custom render-time override_get_graphics_resource")):e.override_get_graphics_resource=null}))},get get_graphics_resource(){return(0,tr.__get__)(this,(function(e,...t){const[r,_]=rr(t,["graphics_path","resource_info"]);return e.feature.get_graphics_resource_base(r,_,e.render_context,e.override_get_graphics_resource)}))}}),get __init__(){return(0,tr.__get__)(this,(function(e){(0,tr.__super__)(nd,"__init__")(e),e.graphics_collection={},e.feature_name="graphics_resource_provider",e.src_url_resolver_fn=null,e.export_graphics_resource_url_fn=e=>null}))},get add_graphics(){return(0,tr.__get__)(this,(function(e,...t){const[r,_]=rr(t,["source_path","graphics_resource"]);if(Object.hasOwn(e.graphics_collection,r))throw new Error(`Graphics collection already has a graphics resource registered  for path ${r} (registered target ${e.graphics_collection[r].src_url}, new target ${_.src_url})`);e.graphics_collection[r]=_}))},get set_collection(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["collection"]);Object.entries(r).forEach((t=>{const[r,_]=t;e.add_graphics(r,_)}))}))},get has_graphics_for(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["source_path"]);return Object.hasOwn(e.graphics_collection,r)}))},get get_graphics_resource_base(){return(0,tr.__get__)(this,(function(e,...t){const[_,n,a,i]=rr(t,["graphics_path","resource_info","render_context","override_get_graphics_resource"]),o=r(ar).join(n.get_source_directory(),_);if(i){let e=i({feature:feature,graphics_path:_,resource_info:n,source_path:o});if(null!=e)return e}if(!e.has_graphics_for(o))throw new Error(`No such graphics ${o} (${_} relative to ${n})`);const l=e.graphics_collection[o];if(null!=e.src_url_resolver_fn){const{src_url:t,srcset:r}=e.src_url_resolver_fn({graphics_resource:l,render_context:a,source_path:o});if(void 0===t)throw new Error("src_url_resolver_fn() did not return { src_url }.");return new ed(er(Object.assign({},l.asdict(),{src_url:t,srcset:r})))}return l}))},get dump_database(){return(0,tr.__get__)(this,(function(e){return{graphics_collection:Object.fromEntries(Object.entries(e.graphics_collection).map((([t,r])=>{let _=r.asdict();return _.src_url=e.export_graphics_resource_url_fn(r),[t,_]})))}}))},get load_database(){return(0,tr.__get__)(this,(function(e,...t){const[r]=rr(t,["data"]);for(const[t,_]of Object.entries(r.graphics_collection))e.add_graphics(t,new ed(er(_)))}))}});var ad=(0,tr.__class__)("ZooFLMEnvironment",[Fo],{get __init__(){return(0,tr.__get__)(this,(function(e,t){t=r(o)({},function(e="alph"){return{heading_section_commands_by_level:{2:Xf("section",er({inline:!1})),3:Xf("subsection",er({inline:!1})),4:Xf("paragraph",er({inline:!0}))},enumeration_environments:{itemize:{counter_formatter:["","-",""]},enumerate:{counter_formatter:null}},endnote_categories:[Zf("footnote",er({counter_formatter:e,heading_title:"Footnotes",endnote_command:"footnote"}))],citation_counter_formatter:"arabic",citation_delimiters:["[","]"],float_types:[Qf("figure","Figure",er({counter_formatter:"Roman",content_handlers:["includegraphics"]})),Qf("table","Table",er({counter_formatter:"Roman",content_handlers:["cells","includegraphics"]}))],defterm_options:{render_defterm_with_term:!0,render_defterm_with_term_suffix:": "}}}(),t);const _=zo(er(t.parsing??{}));let n=function(e,t){const r=t.enable_features??{},_=r.default??!0;return Yf("install_standard_features: creating feature class instances ..."),r.baseformatting??_?e.feature_baseformatting=new If:e.feature_baseformatting=null,r.href??_?e.feature_href=new Mc:e.feature_href=null,r.verbatim??_?e.feature_verbatim=new kl:e.feature_verbatim=null,r.math??_?e.feature_math=new mc:e.feature_math=null,r.enumeration??_?e.feature_enumeration=new Ru(er({enumeration_environments:t.enumeration_environments})):e.feature_enumeration=null,r.headings??_?e.feature_headings=new Zs(er({section_commands_by_level:t.heading_section_commands_by_level})):e.feature_headings=null,r.refs??_?(e.ref_resolver=t.ref_resolver??new rd(t.ref_resolver_options),e.feature_refs=new Ds([e.ref_resolver])):(e.ref_resolver=t.ref_resolver??null,e.feature_refs=null),r.endnotes??_?e.feature_endnotes=new Hu(er({categories:t.endnote_categories})):e.feature_endnotes=null,r.citations??_?(e.citations_provider=t.citations_provider??new _d,e.feature_citations=new ff(er({external_citations_providers:[e.citations_provider],...t.citations_options??{}}))):(e.citations_provider=t.citations_provider??null,e.feature_citations=null),r.floats??_?e.feature_floats=new Cu(er({float_types:t.float_types})):e.feature_floats=null,r.defterm??_?e.feature_defterm=new nf(er({...t.defterm_options??{}})):e.feature_defterm=null,r.graphics_collection??_?e.graphics_collection=t.graphics_collection??new nd:e.graphics_collection=null,[e.feature_baseformatting,e.feature_href,e.feature_verbatim,e.feature_math,e.feature_enumeration,e.feature_headings,e.feature_refs,e.feature_endnotes,e.feature_citations,e.feature_floats,e.feature_defterm,e.graphics_collection].filter((e=>null!=e))}(e,t);t.custom_features&&(n=[...n,...t.custom_features]),Yf("ZooFLMEnvironment.__init__(): calling super constructor ..."),(0,tr.__super__)(ad,"__init__")(e,n,_,new Qi,er({...t.flm_environment_options??{}}));const a=new Bo;e.parsing_state_event_handler=a,e.environment_get_located_error_message=qo}))}});tr=a("hoVWB"),tr=a("hoVWB"),tr=a("hoVWB");a("hoVWB");tr=a("hoVWB");var id={};(0,tr.__nest__)(id,"",m_);var od="flm.flmrecomposer._recomposer",ld=(function(){var e=id;(0,tr.__call__)(e.getLogger,e,od)}(),(0,tr.__class__)("FLMNodesFlmRecomposer",[yn],{__module__:od,recompose_specinfo_method:"recompose_flm_text",get recompose_flm_text(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=e;return(0,tr.__call__)(r.start,r,t)}()}))},rx_escape_chars_text:null,recompose_escape_chars_if_specials_disabled:!1,get escape_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"chars":t=n[a];break;case"parsing_state":r=n[a]}}}return(0,tr.__t__)(null===e.rx_escape_chars_text)||(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r.enable_specials))&&!(0,tr.__t__)(e.recompose_escape_chars_if_specials_disabled))||(0,tr.__t__)(r.in_math_mode)?t:function(){var r=e.rx_escape_chars_text;return(0,tr.__call__)(r.sub,r,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)("\\",(n=e,(0,tr.__call__)(n.group,n)));var n}),t)}()}))},get subrecompose(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}return function(){var r=t;return(0,tr.__call__)(r.accept_node_visitor,r,e)}()}))},get _attempt_node_specinfo_recompose(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}return!!(0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_specinfo"))&&(0,tr.__call__)(tr.hasattr,null,t.flm_specinfo,e.recompose_specinfo_method))&&(0,tr.__call__)((0,tr.__call__)(tr.getattr,null,t.flm_specinfo,e.recompose_specinfo_method),null,(0,tr.__kwargtrans__)((0,tr.__mergekwargtrans__)({node:t,recomposer:e},r)))}))},get recompose_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"chars":t=n[a];break;case"n":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(t)))t="";t=(0,tr.__call__)(tr.str,null,t);return function(){var _=e;return(0,tr.__call__)(_.escape_chars,_,t,r.parsing_state)}()}))},get node_standard_process_macro(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ld,"node_standard_process_macro"),null,e,t)}))},get node_standard_process_environment(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ld,"node_standard_process_environment"),null,e,t)}))},get node_standard_process_specials(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var r=e;return(0,tr.__call__)(r._attempt_node_specinfo_recompose,r,t)}();return(0,tr.__t__)(!1!==a)?a:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ld,"node_standard_process_specials"),null,e,t)}))},get visit_unknown_node(){return(0,tr.__get__)(this,(function(e,t){var r=(0,tr.dict)();if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;default:r[a]=n[a]}delete r.__kwargtrans__}}var i=function(){var _=e;return(0,tr.__call__)(_._attempt_node_specinfo_recompose,_,t,(0,tr.__kwargtrans__)(r))}();return(0,tr.__t__)(!1!==i)?i:(0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ld,"visit_unknown_node"),null,e,t,(0,tr.__kwargtrans__)(r))}))}})),sd={};(0,tr.__nest__)(sd,"",m_);var cd="flm.fragmentrenderer._base",ud=(function(){var e=sd;(0,tr.__call__)(e.getLogger,e,cd)}(),(0,tr.__class__)("FragmentRenderer",[tr.object],{__module__:cd,supports_delayed_render_markers:!1,get __init__(){return(0,tr.__get__)(this,(function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"config":t=_[n]}}}if((0,tr.__call__)((0,tr.__call__)(tr.__super__,null,ud,"__init__"),null,e),(0,tr.__t__)(null!==t))for(var a=function(){var e=t;return(0,tr.__call__)(e.py_items,e)}(),i=0;i<(0,tr.len)(a);i++){var o=(0,tr.__getitem__)(a,i),l=o[0],s=o[1];(0,tr.__call__)(tr.setattr,null,e,l,s)}}))},get document_render_start(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"render_context":t=_[n]}}}}))},get document_render_finish(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"render_context":t=_[n]}}}}))},get render_fragment(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"flm_fragment":t=a[i];break;case"render_context":r=a[i];break;case"is_block_level":_=a[i]}}}try{return function(){var n,a=e;return(0,tr.__call__)(a.render_nodelist,a,t.nodes,(n=e,(0,tr.__call__)(n.ensure_render_context,n,r)),(0,tr.__kwargtrans__)({is_block_level:_}))}()}catch(e){if((0,tr.isinstance)(e,V_)){var o=e;!function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t.nodes,(0,tr.__kwargtrans__)({what:t.what}))}();var l=o;throw l.__cause__=null,l}if((0,tr.isinstance)(e,tr.Exception)){o=e;throw e.__cause__=null,e}throw e}}))},get render_nodelist(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"nodelist":t=a[i];break;case"render_context":r=a[i];break;case"is_block_level":_=a[i]}}}var o;if((0,tr.__t__)(null===t))throw(o=(0,tr.__call__)(tr.ValueError,null,"render_nodelist(): nodelist should not be None")).__cause__=null,o;if((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_is_block_level"))))throw(o=(0,tr.__call__)(V_,null,"The given node list was not parsed & produced by FLM; missing .flm_is_block_level attribute: {}".format((0,tr.__getslice__)((0,tr.__call__)(tr.repr,null,t),0,100,1)),(0,tr.__kwargtrans__)({pos:(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"pos"))?(0,tr.__call__)(tr.getattr,null,t,"pos"):null}))).__cause__=null,o;if((0,tr.__t__)(null===_))_=t.flm_is_block_level;if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(_))&&t.flm_is_block_level))throw(o=(0,tr.__call__)(tr.ValueError,null,"Cannot render node list {} in inline mode (not block level mode) as it contains block-level elements.".format(t))).__cause__=null,o;if((0,tr.__t__)(_)){if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_blocks")))var l=t.flm_blocks;else l=[t];return function(){var t=e;return(0,tr.__call__)(t.render_blocks,t,l,r)}()}return function(){var _=e;return(0,tr.__call__)(_.render_inline_content,_,t,r)}()}))},get render_node(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}r=function(){var t=e;return(0,tr.__call__)(t.ensure_render_context,t,r)}();try{if((0,tr.__t__)((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_replace_by_node"))&&null!==t.flm_replace_by_node))return function(){var _=e;return(0,tr.__call__)(_.render_node,_,t.flm_replace_by_node,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,rn)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_chars,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,nn)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_comment,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,_n)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_group,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,an)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_macro,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,on)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_environment,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,ln)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_specials,_,t,r)}();if((0,tr.__t__)(function(){var e=t;return(0,tr.__call__)(e.isNodeType,e,sn)}()))return function(){var _=e;return(0,tr.__call__)(_.render_node_math,_,t,r)}();var i=(0,tr.__call__)(tr.ValueError,null,"Invalid node type: {}".format(t));throw i.__cause__=null,i}catch(i){if((0,tr.isinstance)(i,V_)){var o=i;throw function(){var e=o;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=o).__cause__=null,l}if((0,tr.isinstance)(i,tr.Exception)){o=i;var l,s=(0,tr.__call__)(V_,null,(0,tr.__call__)(tr.str,null,o));throw function(){var e=s;(0,tr.__call__)(e.set_pos_or_add_open_context_from_node,e,t)}(),(l=s).__cause__=null,l}throw i}}))},get render_node_chars(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}if((0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_chars_value")))var i=t.flm_chars_value;else i=null;if((0,tr.__t__)(null===i))i=t.chars;return function(){var t=e;return(0,tr.__call__)(t.render_value,t,i,r)}()}))},get render_node_comment(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return""}))},get render_node_group(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _,n=e;return(0,tr.__call__)(n.render_nodelist,n,t.nodelist,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)))}()}))},get render_node_macro(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _,n=e;return(0,tr.__call__)(n.render_invocable_node,n,t,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)))}()}))},get render_node_environment(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _,n=e;return(0,tr.__call__)(n.render_invocable_node,n,t,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)))}()}))},get render_node_specials(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _,n=e;return(0,tr.__call__)(n.render_invocable_node,n,t,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)))}()}))},get render_invocable_node(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}if((0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)((0,tr.__call__)(tr.hasattr,null,t,"flm_specinfo")))||null===t.flm_specinfo))throw(i=(0,tr.__call__)(RuntimeError,null,"Node {} does not have the `flm_specinfo` attribute set".format(t))).__cause__=null,i;if((0,tr.__t__)(r.is_standalone_mode)&&(0,tr.__t__)(!(0,tr.__t__)(t.flm_specinfo.allowed_in_standalone_mode))){var i=(0,tr.__call__)(tr.ValueError,null,"Cannot render {} in standalone mode.".format(function(){var e=t;return(0,tr.__call__)(e.latex_verbatim,e)}()));throw i.__cause__=null,i}return function(){var _,n=e;return(0,tr.__call__)(n.render_invocable_node_call_render,n,t,t.flm_specinfo,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)))}()}))},get render_invocable_node_call_render(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"flm_specinfo":r=a[i];break;case"render_context":_=a[i]}}}if((0,tr.assert)(null!==_),(0,tr.__t__)(null===r)){var o=(0,tr.__call__)(tr.ValueError,null,"Cannot render node={} because specinfo is None!".format(t));throw o.__cause__=null,o}var l=function(){var e=_;return(0,tr.__call__)(e.get_is_delayed_render,e,t)}();if((0,tr.__t__)(l)){var s=_.is_first_pass,c=null;if((0,tr.__t__)(s)){!function(){var e=r;(0,tr.__call__)(e.prepare_delayed_render,e,t,_)}();c=function(){var r=_;return(0,tr.__call__)(r.register_delayed_render,r,t,e)}()}return(0,tr.__t__)(e.supports_delayed_render_markers)?function(){var r=e;return(0,tr.__call__)(r.render_delayed_marker,r,t,c,_)}():(0,tr.__t__)(s)?(function(){var e=r;(0,tr.__call__)(e.prepare_delayed_render,e,t,_)}(),function(){var r=e;return(0,tr.__call__)(r.render_delayed_dummy_placeholder,r,t,c,_)}()):((0,tr.assert)(!(0,tr.__t__)(_.is_first_pass)),function(){var e=_;return(0,tr.__call__)(e.get_delayed_render_content,e,t)}())}var u=function(){var e=r;return(0,tr.__call__)(e.render,e,t,_)}();return u}))},get render_node_math(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _,n=e;return(0,tr.__call__)(n.render_math_content,n,t.delimiters,t.nodelist,(_=e,(0,tr.__call__)(_.ensure_render_context,_,r)),(0,tr.__kwargtrans__)({displaytype:t.displaytype,target_id:null}))}()}))},get render_math_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n){var a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"nodelist":r=l[s];break;case"render_context":_=l[s];break;case"displaytype":n=l[s];break;case"environmentname":a=l[s];break;case"target_id":i=l[s]}}}var c=t,u=c[0],f=c[1];if((0,tr.__t__)(a))u="\\begin{}{}{}".format("{",a,"}"),f="\\end{}{}{}".format("{",a,"}");var d=function(){var t,a=e;return(0,tr.__call__)(a.render_verbatim,a,(0,tr.__add__)((0,tr.__add__)(u,(t=e,(0,tr.__call__)(t.recompose_latex,t,r))),f),(0,tr.__kwargtrans__)({render_context:_,annotations:["{}-math".format(n)],target_id:i,is_block_level:(0,tr.__eq__)(n,"display")}))}();return d}))},get recompose_latex(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"node":t=_[n]}}}var a=function(){var e=(0,tr.__call__)(ld,null);return(0,tr.__call__)(e.recompose_flm_text,e,t)}();return a}))},get render_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"node_blocks":t=n[a];break;case"render_context":r=n[a]}}}for(var i=[],o=t,l=0;l<(0,tr.len)(o);l++){var s=(0,tr.__getitem__)(o,l);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,s,cn)))var c=function(){var t=e;return(0,tr.__call__)(t.render_build_paragraph,t,s,r)}();else c=function(){var t=e;return(0,tr.__call__)(t.render_node,t,s,r)}();!function(){var e=i;(0,tr.__call__)(e.append,e,c)}()}return function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,i,r)}()}))},get render_build_paragraph(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_.render_inline_content,_,t,r)}()}))},get render_inline_content(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_.render_join,_,function(){for(var _,n,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);_=void 0,n=void 0,n=a,(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_.render_node,_,l,r)))}return a}(),r)}()}))},get render_join(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content_list":t=n[a];break;case"render_context":r=n[a]}}}return(0,tr.__call__)("".join,"",t)}))},get render_join_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content_list":t=n[a];break;case"render_context":r=n[a]}}}return(0,tr.__call__)("\n\n".join,"\n\n",function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)((0,tr.__t__)(null!==a)&&(0,tr.__call__)(tr.len,null,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,a))}return r}())}))},get render_semantic_span(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":t=a[i];break;case"role":r=a[i];break;case"render_context":_=a[i];break;case"annotations":a[i];break;case"target_id":a[i]}}}return t}))},get render_semantic_block(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"content":t=a[i];break;case"role":r=a[i];break;case"render_context":_=a[i];break;case"annotations":a[i];break;case"target_id":a[i]}}}return t}))},get replace_delayed_markers_with_final_values(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content":t=n[a];break;case"delayed_values":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Reimplement me!");throw i.__cause__=null,i}))},get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_context":t=n[a];break;case"annotations":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"debug_str":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":_=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"iter_items_nodelists":t=a[i];break;case"counter_formatter":r=a[i];break;case"render_context":_=a[i];break;case"target_id_generator":a[i];break;case"annotations":a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw o.__cause__=null,o}))},get render_lines(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"iter_lines_nodelists":t=n[a];break;case"render_context":r=n[a];break;case"role":n[a];break;case"annotations":n[a];break;case"target_id":n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"heading_nodelist":t=n[a];break;case"render_context":r=n[a];break;case"heading_level":n[a];break;case"inline_heading":n[a];break;case"target_id":n[a];break;case"annotations":n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"render_context":r=n[a];break;case"is_block_level":n[a];break;case"annotations":n[a];break;case"target_id":n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw i.__cause__=null,i}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":_=o[l];break;case"render_context":n=o[l];break;case"annotations":a=o[l]}}}var s=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw s.__cause__=null,s}))},get render_annotation_comment(){return(0,tr.__get__)(this,(function(e,t,r,_,n){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"display_nodelist":t=i[o];break;case"render_context":r=i[o];break;case"color_index":_=i[o];break;case"initials":n=i[o]}}}var l=(0,tr.__call__)(RuntimeError,null,"Subclasses need to reimplement this method");throw l.__cause__=null,l}))},get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_instance":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw i.__cause__=null,i}))},get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"graphics_resource":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw i.__cause__=null,i}))},get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":_=a[i]}}}var o=(0,tr.__call__)(RuntimeError,null,"Feature is not implemented by subclass");throw o.__cause__=null,o}))},get ensure_render_context(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"render_context":t=_[n]}}}return(0,tr.__t__)(t)||(0,tr.__call__)(E_,null,(0,tr.__kwargtrans__)({fragment_renderer:e}))}))}})),fd={};t(fd,"__all__",(()=>kd)),t(fd,"escape",(()=>xd)),t(fd,"_invalid_charrefs",(()=>Od)),t(fd,"_invalid_codepoints",(()=>Pd)),t(fd,"_replace_charref",(()=>Ed)),t(fd,"_charref",(()=>Cd)),t(fd,"unescape",(()=>Ad)),t(fd,"_re",(()=>pr)),t(fd,"_html5",(()=>pd));tr=a("hoVWB");for(var dd=(0,(tr=a("hoVWB")).dict)({AElig:198,Aacute:193,Acirc:194,Agrave:192,Alpha:913,Aring:197,Atilde:195,Auml:196,Beta:914,Ccedil:199,Chi:935,Dagger:8225,Delta:916,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Epsilon:917,Eta:919,Euml:203,Gamma:915,Iacute:205,Icirc:206,Igrave:204,Iota:921,Iuml:207,Kappa:922,Lambda:923,Mu:924,Ntilde:209,Nu:925,OElig:338,Oacute:211,Ocirc:212,Ograve:210,Omega:937,Omicron:927,Oslash:216,Otilde:213,Ouml:214,Phi:934,Pi:928,Prime:8243,Psi:936,Rho:929,Scaron:352,Sigma:931,THORN:222,Tau:932,Theta:920,Uacute:218,Ucirc:219,Ugrave:217,Upsilon:933,Uuml:220,Xi:926,Yacute:221,Yuml:376,Zeta:918,aacute:225,acirc:226,acute:180,aelig:230,agrave:224,alefsym:8501,alpha:945,amp:38,and:8743,ang:8736,aring:229,asymp:8776,atilde:227,auml:228,bdquo:8222,beta:946,brvbar:166,bull:8226,cap:8745,ccedil:231,cedil:184,cent:162,chi:967,circ:710,clubs:9827,cong:8773,copy:169,crarr:8629,cup:8746,curren:164,dArr:8659,dagger:8224,darr:8595,deg:176,delta:948,diams:9830,divide:247,eacute:233,ecirc:234,egrave:232,empty:8709,emsp:8195,ensp:8194,epsilon:949,equiv:8801,eta:951,eth:240,euml:235,euro:8364,exist:8707,fnof:402,forall:8704,frac12:189,frac14:188,frac34:190,frasl:8260,gamma:947,ge:8805,gt:62,hArr:8660,harr:8596,hearts:9829,hellip:8230,iacute:237,icirc:238,iexcl:161,igrave:236,image:8465,infin:8734,int:8747,iota:953,iquest:191,isin:8712,iuml:239,kappa:954,lArr:8656,lambda:955,lang:9001,laquo:171,larr:8592,lceil:8968,ldquo:8220,le:8804,lfloor:8970,lowast:8727,loz:9674,lrm:8206,lsaquo:8249,lsquo:8216,lt:60,macr:175,mdash:8212,micro:181,middot:183,minus:8722,mu:956,nabla:8711,nbsp:160,ndash:8211,ne:8800,ni:8715,not:172,notin:8713,nsub:8836,ntilde:241,nu:957,oacute:243,ocirc:244,oelig:339,ograve:242,oline:8254,omega:969,omicron:959,oplus:8853,or:8744,ordf:170,ordm:186,oslash:248,otilde:245,otimes:8855,ouml:246,para:182,part:8706,permil:8240,perp:8869,phi:966,pi:960,piv:982,plusmn:177,pound:163,prime:8242,prod:8719,prop:8733,psi:968,quot:34,rArr:8658,radic:8730,rang:9002,raquo:187,rarr:8594,rceil:8969,rdquo:8221,real:8476,reg:174,rfloor:8971,rho:961,rlm:8207,rsaquo:8250,rsquo:8217,sbquo:8218,scaron:353,sdot:8901,sect:167,shy:173,sigma:963,sigmaf:962,sim:8764,spades:9824,sub:8834,sube:8838,sum:8721,sup:8835,sup1:185,sup2:178,sup3:179,supe:8839,szlig:223,tau:964,there4:8756,theta:952,thetasym:977,thinsp:8201,thorn:254,tilde:732,times:215,trade:8482,uArr:8657,uacute:250,uarr:8593,ucirc:251,ugrave:249,uml:168,upsih:978,upsilon:965,uuml:252,weierp:8472,xi:958,yacute:253,yen:165,yuml:255,zeta:950,zwj:8205,zwnj:8204}),pd=(0,tr.dict)({Aacute:"",aacute:"","Aacute;":"","aacute;":"","Abreve;":"","abreve;":"","ac;":"","acd;":"","acE;":"",Acirc:"",acirc:"","Acirc;":"","acirc;":"",acute:"","acute;":"","Acy;":"","acy;":"",AElig:"",aelig:"","AElig;":"","aelig;":"","af;":"","Afr;":"","afr;":"",Agrave:"",agrave:"","Agrave;":"","agrave;":"","alefsym;":"","aleph;":"","Alpha;":"","alpha;":"","Amacr;":"","amacr;":"","amalg;":"",AMP:"&",amp:"&","AMP;":"&","amp;":"&","And;":"","and;":"","andand;":"","andd;":"","andslope;":"","andv;":"","ang;":"","ange;":"","angle;":"","angmsd;":"","angmsdaa;":"","angmsdab;":"","angmsdac;":"","angmsdad;":"","angmsdae;":"","angmsdaf;":"","angmsdag;":"","angmsdah;":"","angrt;":"","angrtvb;":"","angrtvbd;":"","angsph;":"","angst;":"","angzarr;":"","Aogon;":"","aogon;":"","Aopf;":"","aopf;":"","ap;":"","apacir;":"","apE;":"","ape;":"","apid;":"","apos;":"'","ApplyFunction;":"","approx;":"","approxeq;":"",Aring:"",aring:"","Aring;":"","aring;":"","Ascr;":"","ascr;":"","Assign;":"","ast;":"*","asymp;":"","asympeq;":"",Atilde:"",atilde:"","Atilde;":"","atilde;":"",Auml:"",auml:"","Auml;":"","auml;":"","awconint;":"","awint;":"","backcong;":"","backepsilon;":"","backprime;":"","backsim;":"","backsimeq;":"","Backslash;":"","Barv;":"","barvee;":"","Barwed;":"","barwed;":"","barwedge;":"","bbrk;":"","bbrktbrk;":"","bcong;":"","Bcy;":"","bcy;":"","bdquo;":"","becaus;":"","Because;":"","because;":"","bemptyv;":"","bepsi;":"","bernou;":"","Bernoullis;":"","Beta;":"","beta;":"","beth;":"","between;":"","Bfr;":"","bfr;":"","bigcap;":"","bigcirc;":"","bigcup;":"","bigodot;":"","bigoplus;":"","bigotimes;":"","bigsqcup;":"","bigstar;":"","bigtriangledown;":"","bigtriangleup;":"","biguplus;":"","bigvee;":"","bigwedge;":"","bkarow;":"","blacklozenge;":"","blacksquare;":"","blacktriangle;":"","blacktriangledown;":"","blacktriangleleft;":"","blacktriangleright;":"","blank;":"","blk12;":"","blk14;":"","blk34;":"","block;":"","bne;":"=","bnequiv;":"","bNot;":"","bnot;":"","Bopf;":"","bopf;":"","bot;":"","bottom;":"","bowtie;":"","boxbox;":"","boxDL;":"","boxDl;":"","boxdL;":"","boxdl;":"","boxDR;":"","boxDr;":"","boxdR;":"","boxdr;":"","boxH;":"","boxh;":"","boxHD;":"","boxHd;":"","boxhD;":"","boxhd;":"","boxHU;":"","boxHu;":"","boxhU;":"","boxhu;":"","boxminus;":"","boxplus;":"","boxtimes;":"","boxUL;":"","boxUl;":"","boxuL;":"","boxul;":"","boxUR;":"","boxUr;":"","boxuR;":"","boxur;":"","boxV;":"","boxv;":"","boxVH;":"","boxVh;":"","boxvH;":"","boxvh;":"","boxVL;":"","boxVl;":"","boxvL;":"","boxvl;":"","boxVR;":"","boxVr;":"","boxvR;":"","boxvr;":"","bprime;":"","Breve;":"","breve;":"",brvbar:"","brvbar;":"","Bscr;":"","bscr;":"","bsemi;":"","bsim;":"","bsime;":"","bsol;":"\\","bsolb;":"","bsolhsub;":"","bull;":"","bullet;":"","bump;":"","bumpE;":"","bumpe;":"","Bumpeq;":"","bumpeq;":"","Cacute;":"","cacute;":"","Cap;":"","cap;":"","capand;":"","capbrcup;":"","capcap;":"","capcup;":"","capdot;":"","CapitalDifferentialD;":"","caps;":"","caret;":"","caron;":"","Cayleys;":"","ccaps;":"","Ccaron;":"","ccaron;":"",Ccedil:"",ccedil:"","Ccedil;":"","ccedil;":"","Ccirc;":"","ccirc;":"","Cconint;":"","ccups;":"","ccupssm;":"","Cdot;":"","cdot;":"",cedil:"","cedil;":"","Cedilla;":"","cemptyv;":"",cent:"","cent;":"","CenterDot;":"","centerdot;":"","Cfr;":"","cfr;":"","CHcy;":"","chcy;":"","check;":"","checkmark;":"","Chi;":"","chi;":"","cir;":"","circ;":"","circeq;":"","circlearrowleft;":"","circlearrowright;":"","circledast;":"","circledcirc;":"","circleddash;":"","CircleDot;":"","circledR;":"","circledS;":"","CircleMinus;":"","CirclePlus;":"","CircleTimes;":"","cirE;":"","cire;":"","cirfnint;":"","cirmid;":"","cirscir;":"","ClockwiseContourIntegral;":"","CloseCurlyDoubleQuote;":"","CloseCurlyQuote;":"","clubs;":"","clubsuit;":"","Colon;":"","colon;":":","Colone;":"","colone;":"","coloneq;":"","comma;":",","commat;":"@","comp;":"","compfn;":"","complement;":"","complexes;":"","cong;":"","congdot;":"","Congruent;":"","Conint;":"","conint;":"","ContourIntegral;":"","Copf;":"","copf;":"","coprod;":"","Coproduct;":"",COPY:"",copy:"","COPY;":"","copy;":"","copysr;":"","CounterClockwiseContourIntegral;":"","crarr;":"","Cross;":"","cross;":"","Cscr;":"","cscr;":"","csub;":"","csube;":"","csup;":"","csupe;":"","ctdot;":"","cudarrl;":"","cudarrr;":"","cuepr;":"","cuesc;":"","cularr;":"","cularrp;":"","Cup;":"","cup;":"","cupbrcap;":"","CupCap;":"","cupcap;":"","cupcup;":"","cupdot;":"","cupor;":"","cups;":"","curarr;":"","curarrm;":"","curlyeqprec;":"","curlyeqsucc;":"","curlyvee;":"","curlywedge;":"",curren:"","curren;":"","curvearrowleft;":"","curvearrowright;":"","cuvee;":"","cuwed;":"","cwconint;":"","cwint;":"","cylcty;":"","Dagger;":"","dagger;":"","daleth;":"","Darr;":"","dArr;":"","darr;":"","dash;":"","Dashv;":"","dashv;":"","dbkarow;":"","dblac;":"","Dcaron;":"","dcaron;":"","Dcy;":"","dcy;":"","DD;":"","dd;":"","ddagger;":"","ddarr;":"","DDotrahd;":"","ddotseq;":"",deg:"","deg;":"","Del;":"","Delta;":"","delta;":"","demptyv;":"","dfisht;":"","Dfr;":"","dfr;":"","dHar;":"","dharl;":"","dharr;":"","DiacriticalAcute;":"","DiacriticalDot;":"","DiacriticalDoubleAcute;":"","DiacriticalGrave;":"`","DiacriticalTilde;":"","diam;":"","Diamond;":"","diamond;":"","diamondsuit;":"","diams;":"","die;":"","DifferentialD;":"","digamma;":"","disin;":"","div;":"",divide:"","divide;":"","divideontimes;":"","divonx;":"","DJcy;":"","djcy;":"","dlcorn;":"","dlcrop;":"","dollar;":"$","Dopf;":"","dopf;":"","Dot;":"","dot;":"","DotDot;":"","doteq;":"","doteqdot;":"","DotEqual;":"","dotminus;":"","dotplus;":"","dotsquare;":"","doublebarwedge;":"","DoubleContourIntegral;":"","DoubleDot;":"","DoubleDownArrow;":"","DoubleLeftArrow;":"","DoubleLeftRightArrow;":"","DoubleLeftTee;":"","DoubleLongLeftArrow;":"","DoubleLongLeftRightArrow;":"","DoubleLongRightArrow;":"","DoubleRightArrow;":"","DoubleRightTee;":"","DoubleUpArrow;":"","DoubleUpDownArrow;":"","DoubleVerticalBar;":"","DownArrow;":"","Downarrow;":"","downarrow;":"","DownArrowBar;":"","DownArrowUpArrow;":"","DownBreve;":"","downdownarrows;":"","downharpoonleft;":"","downharpoonright;":"","DownLeftRightVector;":"","DownLeftTeeVector;":"","DownLeftVector;":"","DownLeftVectorBar;":"","DownRightTeeVector;":"","DownRightVector;":"","DownRightVectorBar;":"","DownTee;":"","DownTeeArrow;":"","drbkarow;":"","drcorn;":"","drcrop;":"","Dscr;":"","dscr;":"","DScy;":"","dscy;":"","dsol;":"","Dstrok;":"","dstrok;":"","dtdot;":"","dtri;":"","dtrif;":"","duarr;":"","duhar;":"","dwangle;":"","DZcy;":"","dzcy;":"","dzigrarr;":"",Eacute:"",eacute:"","Eacute;":"","eacute;":"","easter;":"","Ecaron;":"","ecaron;":"","ecir;":"",Ecirc:"",ecirc:"","Ecirc;":"","ecirc;":"","ecolon;":"","Ecy;":"","ecy;":"","eDDot;":"","Edot;":"","eDot;":"","edot;":"","ee;":"","efDot;":"","Efr;":"","efr;":"","eg;":"",Egrave:"",egrave:"","Egrave;":"","egrave;":"","egs;":"","egsdot;":"","el;":"","Element;":"","elinters;":"","ell;":"","els;":"","elsdot;":"","Emacr;":"","emacr;":"","empty;":"","emptyset;":"","EmptySmallSquare;":"","emptyv;":"","EmptyVerySmallSquare;":"","emsp13;":"","emsp14;":"","emsp;":"","ENG;":"","eng;":"","ensp;":"","Eogon;":"","eogon;":"","Eopf;":"","eopf;":"","epar;":"","eparsl;":"","eplus;":"","epsi;":"","Epsilon;":"","epsilon;":"","epsiv;":"","eqcirc;":"","eqcolon;":"","eqsim;":"","eqslantgtr;":"","eqslantless;":"","Equal;":"","equals;":"=","EqualTilde;":"","equest;":"","Equilibrium;":"","equiv;":"","equivDD;":"","eqvparsl;":"","erarr;":"","erDot;":"","Escr;":"","escr;":"","esdot;":"","Esim;":"","esim;":"","Eta;":"","eta;":"",ETH:"",eth:"","ETH;":"","eth;":"",Euml:"",euml:"","Euml;":"","euml;":"","euro;":"","excl;":"!","exist;":"","Exists;":"","expectation;":"","ExponentialE;":"","exponentiale;":"","fallingdotseq;":"","Fcy;":"","fcy;":"","female;":"","ffilig;":"","fflig;":"","ffllig;":"","Ffr;":"","ffr;":"","filig;":"","FilledSmallSquare;":"","FilledVerySmallSquare;":"","fjlig;":"fj","flat;":"","fllig;":"","fltns;":"","fnof;":"","Fopf;":"","fopf;":"","ForAll;":"","forall;":"","fork;":"","forkv;":"","Fouriertrf;":"","fpartint;":"",frac12:"","frac12;":"","frac13;":"",frac14:"","frac14;":"","frac15;":"","frac16;":"","frac18;":"","frac23;":"","frac25;":"",frac34:"","frac34;":"","frac35;":"","frac38;":"","frac45;":"","frac56;":"","frac58;":"","frac78;":"","frasl;":"","frown;":"","Fscr;":"","fscr;":"","gacute;":"","Gamma;":"","gamma;":"","Gammad;":"","gammad;":"","gap;":"","Gbreve;":"","gbreve;":"","Gcedil;":"","Gcirc;":"","gcirc;":"","Gcy;":"","gcy;":"","Gdot;":"","gdot;":"","gE;":"","ge;":"","gEl;":"","gel;":"","geq;":"","geqq;":"","geqslant;":"","ges;":"","gescc;":"","gesdot;":"","gesdoto;":"","gesdotol;":"","gesl;":"","gesles;":"","Gfr;":"","gfr;":"","Gg;":"","gg;":"","ggg;":"","gimel;":"","GJcy;":"","gjcy;":"","gl;":"","gla;":"","glE;":"","glj;":"","gnap;":"","gnapprox;":"","gnE;":"","gne;":"","gneq;":"","gneqq;":"","gnsim;":"","Gopf;":"","gopf;":"","grave;":"`","GreaterEqual;":"","GreaterEqualLess;":"","GreaterFullEqual;":"","GreaterGreater;":"","GreaterLess;":"","GreaterSlantEqual;":"","GreaterTilde;":"","Gscr;":"","gscr;":"","gsim;":"","gsime;":"","gsiml;":"",GT:">",gt:">","GT;":">","Gt;":"","gt;":">","gtcc;":"","gtcir;":"","gtdot;":"","gtlPar;":"","gtquest;":"","gtrapprox;":"","gtrarr;":"","gtrdot;":"","gtreqless;":"","gtreqqless;":"","gtrless;":"","gtrsim;":"","gvertneqq;":"","gvnE;":"","Hacek;":"","hairsp;":"","half;":"","hamilt;":"","HARDcy;":"","hardcy;":"","hArr;":"","harr;":"","harrcir;":"","harrw;":"","Hat;":"^","hbar;":"","Hcirc;":"","hcirc;":"","hearts;":"","heartsuit;":"","hellip;":"","hercon;":"","Hfr;":"","hfr;":"","HilbertSpace;":"","hksearow;":"","hkswarow;":"","hoarr;":"","homtht;":"","hookleftarrow;":"","hookrightarrow;":"","Hopf;":"","hopf;":"","horbar;":"","HorizontalLine;":"","Hscr;":"","hscr;":"","hslash;":"","Hstrok;":"","hstrok;":"","HumpDownHump;":"","HumpEqual;":"","hybull;":"","hyphen;":"",Iacute:"",iacute:"","Iacute;":"","iacute;":"","ic;":"",Icirc:"",icirc:"","Icirc;":"","icirc;":"","Icy;":"","icy;":"","Idot;":"","IEcy;":"","iecy;":"",iexcl:"","iexcl;":"","iff;":"","Ifr;":"","ifr;":"",Igrave:"",igrave:"","Igrave;":"","igrave;":"","ii;":"","iiiint;":"","iiint;":"","iinfin;":"","iiota;":"","IJlig;":"","ijlig;":"","Im;":"","Imacr;":"","imacr;":"","image;":"","ImaginaryI;":"","imagline;":"","imagpart;":"","imath;":"","imof;":"","imped;":"","Implies;":"","in;":"","incare;":"","infin;":"","infintie;":"","inodot;":"","Int;":"","int;":"","intcal;":"","integers;":"","Integral;":"","intercal;":"","Intersection;":"","intlarhk;":"","intprod;":"","InvisibleComma;":"","InvisibleTimes;":"","IOcy;":"","iocy;":"","Iogon;":"","iogon;":"","Iopf;":"","iopf;":"","Iota;":"","iota;":"","iprod;":"",iquest:"","iquest;":"","Iscr;":"","iscr;":"","isin;":"","isindot;":"","isinE;":"","isins;":"","isinsv;":"","isinv;":"","it;":"","Itilde;":"","itilde;":"","Iukcy;":"","iukcy;":"",Iuml:"",iuml:"","Iuml;":"","iuml;":"","Jcirc;":"","jcirc;":"","Jcy;":"","jcy;":"","Jfr;":"","jfr;":"","jmath;":"","Jopf;":"","jopf;":"","Jscr;":"","jscr;":"","Jsercy;":"","jsercy;":"","Jukcy;":"","jukcy;":"","Kappa;":"","kappa;":"","kappav;":"","Kcedil;":"","kcedil;":"","Kcy;":"","kcy;":"","Kfr;":"","kfr;":"","kgreen;":"","KHcy;":"","khcy;":"","KJcy;":"","kjcy;":"","Kopf;":"","kopf;":"","Kscr;":"","kscr;":"","lAarr;":"","Lacute;":"","lacute;":"","laemptyv;":"","lagran;":"","Lambda;":"","lambda;":"","Lang;":"","lang;":"","langd;":"","langle;":"","lap;":"","Laplacetrf;":"",laquo:"","laquo;":"","Larr;":"","lArr;":"","larr;":"","larrb;":"","larrbfs;":"","larrfs;":"","larrhk;":"","larrlp;":"","larrpl;":"","larrsim;":"","larrtl;":"","lat;":"","lAtail;":"","latail;":"","late;":"","lates;":"","lBarr;":"","lbarr;":"","lbbrk;":"","lbrace;":"{","lbrack;":"[","lbrke;":"","lbrksld;":"","lbrkslu;":"","Lcaron;":"","lcaron;":"","Lcedil;":"","lcedil;":"","lceil;":"","lcub;":"{","Lcy;":"","lcy;":"","ldca;":"","ldquo;":"","ldquor;":"","ldrdhar;":"","ldrushar;":"","ldsh;":"","lE;":"","le;":"","LeftAngleBracket;":"","LeftArrow;":"","Leftarrow;":"","leftarrow;":"","LeftArrowBar;":"","LeftArrowRightArrow;":"","leftarrowtail;":"","LeftCeiling;":"","LeftDoubleBracket;":"","LeftDownTeeVector;":"","LeftDownVector;":"","LeftDownVectorBar;":"","LeftFloor;":"","leftharpoondown;":"","leftharpoonup;":"","leftleftarrows;":"","LeftRightArrow;":"","Leftrightarrow;":"","leftrightarrow;":"","leftrightarrows;":"","leftrightharpoons;":"","leftrightsquigarrow;":"","LeftRightVector;":"","LeftTee;":"","LeftTeeArrow;":"","LeftTeeVector;":"","leftthreetimes;":"","LeftTriangle;":"","LeftTriangleBar;":"","LeftTriangleEqual;":"","LeftUpDownVector;":"","LeftUpTeeVector;":"","LeftUpVector;":"","LeftUpVectorBar;":"","LeftVector;":"","LeftVectorBar;":"","lEg;":"","leg;":"","leq;":"","leqq;":"","leqslant;":"","les;":"","lescc;":"","lesdot;":"","lesdoto;":"","lesdotor;":"","lesg;":"","lesges;":"","lessapprox;":"","lessdot;":"","lesseqgtr;":"","lesseqqgtr;":"","LessEqualGreater;":"","LessFullEqual;":"","LessGreater;":"","lessgtr;":"","LessLess;":"","lesssim;":"","LessSlantEqual;":"","LessTilde;":"","lfisht;":"","lfloor;":"","Lfr;":"","lfr;":"","lg;":"","lgE;":"","lHar;":"","lhard;":"","lharu;":"","lharul;":"","lhblk;":"","LJcy;":"","ljcy;":"","Ll;":"","ll;":"","llarr;":"","llcorner;":"","Lleftarrow;":"","llhard;":"","lltri;":"","Lmidot;":"","lmidot;":"","lmoust;":"","lmoustache;":"","lnap;":"","lnapprox;":"","lnE;":"","lne;":"","lneq;":"","lneqq;":"","lnsim;":"","loang;":"","loarr;":"","lobrk;":"","LongLeftArrow;":"","Longleftarrow;":"","longleftarrow;":"","LongLeftRightArrow;":"","Longleftrightarrow;":"","longleftrightarrow;":"","longmapsto;":"","LongRightArrow;":"","Longrightarrow;":"","longrightarrow;":"","looparrowleft;":"","looparrowright;":"","lopar;":"","Lopf;":"","lopf;":"","loplus;":"","lotimes;":"","lowast;":"","lowbar;":"_","LowerLeftArrow;":"","LowerRightArrow;":"","loz;":"","lozenge;":"","lozf;":"","lpar;":"(","lparlt;":"","lrarr;":"","lrcorner;":"","lrhar;":"","lrhard;":"","lrm;":"","lrtri;":"","lsaquo;":"","Lscr;":"","lscr;":"","Lsh;":"","lsh;":"","lsim;":"","lsime;":"","lsimg;":"","lsqb;":"[","lsquo;":"","lsquor;":"","Lstrok;":"","lstrok;":"",LT:"<",lt:"<","LT;":"<","Lt;":"","lt;":"<","ltcc;":"","ltcir;":"","ltdot;":"","lthree;":"","ltimes;":"","ltlarr;":"","ltquest;":"","ltri;":"","ltrie;":"","ltrif;":"","ltrPar;":"","lurdshar;":"","luruhar;":"","lvertneqq;":"","lvnE;":"",macr:"","macr;":"","male;":"","malt;":"","maltese;":"","Map;":"","map;":"","mapsto;":"","mapstodown;":"","mapstoleft;":"","mapstoup;":"","marker;":"","mcomma;":"","Mcy;":"","mcy;":"","mdash;":"","mDDot;":"","measuredangle;":"","MediumSpace;":"","Mellintrf;":"","Mfr;":"","mfr;":"","mho;":"",micro:"","micro;":"","mid;":"","midast;":"*","midcir;":"",middot:"","middot;":"","minus;":"","minusb;":"","minusd;":"","minusdu;":"","MinusPlus;":"","mlcp;":"","mldr;":"","mnplus;":"","models;":"","Mopf;":"","mopf;":"","mp;":"","Mscr;":"","mscr;":"","mstpos;":"","Mu;":"","mu;":"","multimap;":"","mumap;":"","nabla;":"","Nacute;":"","nacute;":"","nang;":"","nap;":"","napE;":"","napid;":"","napos;":"","napprox;":"","natur;":"","natural;":"","naturals;":"",nbsp:"","nbsp;":"","nbump;":"","nbumpe;":"","ncap;":"","Ncaron;":"","ncaron;":"","Ncedil;":"","ncedil;":"","ncong;":"","ncongdot;":"","ncup;":"","Ncy;":"","ncy;":"","ndash;":"","ne;":"","nearhk;":"","neArr;":"","nearr;":"","nearrow;":"","nedot;":"","NegativeMediumSpace;":"","NegativeThickSpace;":"","NegativeThinSpace;":"","NegativeVeryThinSpace;":"","nequiv;":"","nesear;":"","nesim;":"","NestedGreaterGreater;":"","NestedLessLess;":"","NewLine;":"\n","nexist;":"","nexists;":"","Nfr;":"","nfr;":"","ngE;":"","nge;":"","ngeq;":"","ngeqq;":"","ngeqslant;":"","nges;":"","nGg;":"","ngsim;":"","nGt;":"","ngt;":"","ngtr;":"","nGtv;":"","nhArr;":"","nharr;":"","nhpar;":"","ni;":"","nis;":"","nisd;":"","niv;":"","NJcy;":"","njcy;":"","nlArr;":"","nlarr;":"","nldr;":"","nlE;":"","nle;":"","nLeftarrow;":"","nleftarrow;":"","nLeftrightarrow;":"","nleftrightarrow;":"","nleq;":"","nleqq;":"","nleqslant;":"","nles;":"","nless;":"","nLl;":"","nlsim;":"","nLt;":"","nlt;":"","nltri;":"","nltrie;":"","nLtv;":"","nmid;":"","NoBreak;":"","NonBreakingSpace;":"","Nopf;":"","nopf;":"",not:"","Not;":"","not;":"","NotCongruent;":"","NotCupCap;":"","NotDoubleVerticalBar;":"","NotElement;":"","NotEqual;":"","NotEqualTilde;":"","NotExists;":"","NotGreater;":"","NotGreaterEqual;":"","NotGreaterFullEqual;":"","NotGreaterGreater;":"","NotGreaterLess;":"","NotGreaterSlantEqual;":"","NotGreaterTilde;":"","NotHumpDownHump;":"","NotHumpEqual;":"","notin;":"","notindot;":"","notinE;":"","notinva;":"","notinvb;":"","notinvc;":"","NotLeftTriangle;":"","NotLeftTriangleBar;":"","NotLeftTriangleEqual;":"","NotLess;":"","NotLessEqual;":"","NotLessGreater;":"","NotLessLess;":"","NotLessSlantEqual;":"","NotLessTilde;":"","NotNestedGreaterGreater;":"","NotNestedLessLess;":"","notni;":"","notniva;":"","notnivb;":"","notnivc;":"","NotPrecedes;":"","NotPrecedesEqual;":"","NotPrecedesSlantEqual;":"","NotReverseElement;":"","NotRightTriangle;":"","NotRightTriangleBar;":"","NotRightTriangleEqual;":"","NotSquareSubset;":"","NotSquareSubsetEqual;":"","NotSquareSuperset;":"","NotSquareSupersetEqual;":"","NotSubset;":"","NotSubsetEqual;":"","NotSucceeds;":"","NotSucceedsEqual;":"","NotSucceedsSlantEqual;":"","NotSucceedsTilde;":"","NotSuperset;":"","NotSupersetEqual;":"","NotTilde;":"","NotTildeEqual;":"","NotTildeFullEqual;":"","NotTildeTilde;":"","NotVerticalBar;":"","npar;":"","nparallel;":"","nparsl;":"","npart;":"","npolint;":"","npr;":"","nprcue;":"","npre;":"","nprec;":"","npreceq;":"","nrArr;":"","nrarr;":"","nrarrc;":"","nrarrw;":"","nRightarrow;":"","nrightarrow;":"","nrtri;":"","nrtrie;":"","nsc;":"","nsccue;":"","nsce;":"","Nscr;":"","nscr;":"","nshortmid;":"","nshortparallel;":"","nsim;":"","nsime;":"","nsimeq;":"","nsmid;":"","nspar;":"","nsqsube;":"","nsqsupe;":"","nsub;":"","nsubE;":"","nsube;":"","nsubset;":"","nsubseteq;":"","nsubseteqq;":"","nsucc;":"","nsucceq;":"","nsup;":"","nsupE;":"","nsupe;":"","nsupset;":"","nsupseteq;":"","nsupseteqq;":"","ntgl;":"",Ntilde:"",ntilde:"","Ntilde;":"","ntilde;":"","ntlg;":"","ntriangleleft;":"","ntrianglelefteq;":"","ntriangleright;":"","ntrianglerighteq;":"","Nu;":"","nu;":"","num;":"#","numero;":"","numsp;":"","nvap;":"","nVDash;":"","nVdash;":"","nvDash;":"","nvdash;":"","nvge;":"","nvgt;":">","nvHarr;":"","nvinfin;":"","nvlArr;":"","nvle;":"","nvlt;":"<","nvltrie;":"","nvrArr;":"","nvrtrie;":"","nvsim;":"","nwarhk;":"","nwArr;":"","nwarr;":"","nwarrow;":"","nwnear;":"",Oacute:"",oacute:"","Oacute;":"","oacute;":"","oast;":"","ocir;":"",Ocirc:"",ocirc:"","Ocirc;":"","ocirc;":"","Ocy;":"","ocy;":"","odash;":"","Odblac;":"","odblac;":"","odiv;":"","odot;":"","odsold;":"","OElig;":"","oelig;":"","ofcir;":"","Ofr;":"","ofr;":"","ogon;":"",Ograve:"",ograve:"","Ograve;":"","ograve;":"","ogt;":"","ohbar;":"","ohm;":"","oint;":"","olarr;":"","olcir;":"","olcross;":"","oline;":"","olt;":"","Omacr;":"","omacr;":"","Omega;":"","omega;":"","Omicron;":"","omicron;":"","omid;":"","ominus;":"","Oopf;":"","oopf;":"","opar;":"","OpenCurlyDoubleQuote;":"","OpenCurlyQuote;":"","operp;":"","oplus;":"","Or;":"","or;":"","orarr;":"","ord;":"","order;":"","orderof;":"",ordf:"","ordf;":"",ordm:"","ordm;":"","origof;":"","oror;":"","orslope;":"","orv;":"","oS;":"","Oscr;":"","oscr;":"",Oslash:"",oslash:"","Oslash;":"","oslash;":"","osol;":"",Otilde:"",otilde:"","Otilde;":"","otilde;":"","Otimes;":"","otimes;":"","otimesas;":"",Ouml:"",ouml:"","Ouml;":"","ouml;":"","ovbar;":"","OverBar;":"","OverBrace;":"","OverBracket;":"","OverParenthesis;":"","par;":"",para:"","para;":"","parallel;":"","parsim;":"","parsl;":"","part;":"","PartialD;":"","Pcy;":"","pcy;":"","percnt;":"%","period;":".","permil;":"","perp;":"","pertenk;":"","Pfr;":"","pfr;":"","Phi;":"","phi;":"","phiv;":"","phmmat;":"","phone;":"","Pi;":"","pi;":"","pitchfork;":"","piv;":"","planck;":"","planckh;":"","plankv;":"","plus;":"+","plusacir;":"","plusb;":"","pluscir;":"","plusdo;":"","plusdu;":"","pluse;":"","PlusMinus;":"",plusmn:"","plusmn;":"","plussim;":"","plustwo;":"","pm;":"","Poincareplane;":"","pointint;":"","Popf;":"","popf;":"",pound:"","pound;":"","Pr;":"","pr;":"","prap;":"","prcue;":"","prE;":"","pre;":"","prec;":"","precapprox;":"","preccurlyeq;":"","Precedes;":"","PrecedesEqual;":"","PrecedesSlantEqual;":"","PrecedesTilde;":"","preceq;":"","precnapprox;":"","precneqq;":"","precnsim;":"","precsim;":"","Prime;":"","prime;":"","primes;":"","prnap;":"","prnE;":"","prnsim;":"","prod;":"","Product;":"","profalar;":"","profline;":"","profsurf;":"","prop;":"","Proportion;":"","Proportional;":"","propto;":"","prsim;":"","prurel;":"","Pscr;":"","pscr;":"","Psi;":"","psi;":"","puncsp;":"","Qfr;":"","qfr;":"","qint;":"","Qopf;":"","qopf;":"","qprime;":"","Qscr;":"","qscr;":"","quaternions;":"","quatint;":"","quest;":"?","questeq;":"",QUOT:'"',quot:'"',"QUOT;":'"',"quot;":'"',"rAarr;":"","race;":"","Racute;":"","racute;":"","radic;":"","raemptyv;":"","Rang;":"","rang;":"","rangd;":"","range;":"","rangle;":"",raquo:"","raquo;":"","Rarr;":"","rArr;":"","rarr;":"","rarrap;":"","rarrb;":"","rarrbfs;":"","rarrc;":"","rarrfs;":"","rarrhk;":"","rarrlp;":"","rarrpl;":"","rarrsim;":"","Rarrtl;":"","rarrtl;":"","rarrw;":"","rAtail;":"","ratail;":"","ratio;":"","rationals;":"","RBarr;":"","rBarr;":"","rbarr;":"","rbbrk;":"","rbrace;":"}","rbrack;":"]","rbrke;":"","rbrksld;":"","rbrkslu;":"","Rcaron;":"","rcaron;":"","Rcedil;":"","rcedil;":"","rceil;":"","rcub;":"}","Rcy;":"","rcy;":"","rdca;":"","rdldhar;":"","rdquo;":"","rdquor;":"","rdsh;":"","Re;":"","real;":"","realine;":"","realpart;":"","reals;":"","rect;":"",REG:"",reg:"","REG;":"","reg;":"","ReverseElement;":"","ReverseEquilibrium;":"","ReverseUpEquilibrium;":"","rfisht;":"","rfloor;":"","Rfr;":"","rfr;":"","rHar;":"","rhard;":"","rharu;":"","rharul;":"","Rho;":"","rho;":"","rhov;":"","RightAngleBracket;":"","RightArrow;":"","Rightarrow;":"","rightarrow;":"","RightArrowBar;":"","RightArrowLeftArrow;":"","rightarrowtail;":"","RightCeiling;":"","RightDoubleBracket;":"","RightDownTeeVector;":"","RightDownVector;":"","RightDownVectorBar;":"","RightFloor;":"","rightharpoondown;":"","rightharpoonup;":"","rightleftarrows;":"","rightleftharpoons;":"","rightrightarrows;":"","rightsquigarrow;":"","RightTee;":"","RightTeeArrow;":"","RightTeeVector;":"","rightthreetimes;":"","RightTriangle;":"","RightTriangleBar;":"","RightTriangleEqual;":"","RightUpDownVector;":"","RightUpTeeVector;":"","RightUpVector;":"","RightUpVectorBar;":"","RightVector;":"","RightVectorBar;":"","ring;":"","risingdotseq;":"","rlarr;":"","rlhar;":"","rlm;":"","rmoust;":"","rmoustache;":"","rnmid;":"","roang;":"","roarr;":"","robrk;":"","ropar;":"","Ropf;":"","ropf;":"","roplus;":"","rotimes;":"","RoundImplies;":"","rpar;":")","rpargt;":"","rppolint;":"","rrarr;":"","Rrightarrow;":"","rsaquo;":"","Rscr;":"","rscr;":"","Rsh;":"","rsh;":"","rsqb;":"]","rsquo;":"","rsquor;":"","rthree;":"","rtimes;":"","rtri;":"","rtrie;":"","rtrif;":"","rtriltri;":"","RuleDelayed;":"","ruluhar;":"","rx;":"","Sacute;":"","sacute;":"","sbquo;":"","Sc;":"","sc;":"","scap;":"","Scaron;":"","scaron;":"","sccue;":"","scE;":"","sce;":"","Scedil;":"","scedil;":"","Scirc;":"","scirc;":"","scnap;":"","scnE;":"","scnsim;":"","scpolint;":"","scsim;":"","Scy;":"","scy;":"","sdot;":"","sdotb;":"","sdote;":"","searhk;":"","seArr;":"","searr;":"","searrow;":"",sect:"","sect;":"","semi;":";","seswar;":"","setminus;":"","setmn;":"","sext;":"","Sfr;":"","sfr;":"","sfrown;":"","sharp;":"","SHCHcy;":"","shchcy;":"","SHcy;":"","shcy;":"","ShortDownArrow;":"","ShortLeftArrow;":"","shortmid;":"","shortparallel;":"","ShortRightArrow;":"","ShortUpArrow;":"",shy:"","shy;":"","Sigma;":"","sigma;":"","sigmaf;":"","sigmav;":"","sim;":"","simdot;":"","sime;":"","simeq;":"","simg;":"","simgE;":"","siml;":"","simlE;":"","simne;":"","simplus;":"","simrarr;":"","slarr;":"","SmallCircle;":"","smallsetminus;":"","smashp;":"","smeparsl;":"","smid;":"","smile;":"","smt;":"","smte;":"","smtes;":"","SOFTcy;":"","softcy;":"","sol;":"/","solb;":"","solbar;":"","Sopf;":"","sopf;":"","spades;":"","spadesuit;":"","spar;":"","sqcap;":"","sqcaps;":"","sqcup;":"","sqcups;":"","Sqrt;":"","sqsub;":"","sqsube;":"","sqsubset;":"","sqsubseteq;":"","sqsup;":"","sqsupe;":"","sqsupset;":"","sqsupseteq;":"","squ;":"","Square;":"","square;":"","SquareIntersection;":"","SquareSubset;":"","SquareSubsetEqual;":"","SquareSuperset;":"","SquareSupersetEqual;":"","SquareUnion;":"","squarf;":"","squf;":"","srarr;":"","Sscr;":"","sscr;":"","ssetmn;":"","ssmile;":"","sstarf;":"","Star;":"","star;":"","starf;":"","straightepsilon;":"","straightphi;":"","strns;":"","Sub;":"","sub;":"","subdot;":"","subE;":"","sube;":"","subedot;":"","submult;":"","subnE;":"","subne;":"","subplus;":"","subrarr;":"","Subset;":"","subset;":"","subseteq;":"","subseteqq;":"","SubsetEqual;":"","subsetneq;":"","subsetneqq;":"","subsim;":"","subsub;":"","subsup;":"","succ;":"","succapprox;":"","succcurlyeq;":"","Succeeds;":"","SucceedsEqual;":"","SucceedsSlantEqual;":"","SucceedsTilde;":"","succeq;":"","succnapprox;":"","succneqq;":"","succnsim;":"","succsim;":"","SuchThat;":"","Sum;":"","sum;":"","sung;":"",sup1:"","sup1;":"",sup2:"","sup2;":"",sup3:"","sup3;":"","Sup;":"","sup;":"","supdot;":"","supdsub;":"","supE;":"","supe;":"","supedot;":"","Superset;":"","SupersetEqual;":"","suphsol;":"","suphsub;":"","suplarr;":"","supmult;":"","supnE;":"","supne;":"","supplus;":"","Supset;":"","supset;":"","supseteq;":"","supseteqq;":"","supsetneq;":"","supsetneqq;":"","supsim;":"","supsub;":"","supsup;":"","swarhk;":"","swArr;":"","swarr;":"","swarrow;":"","swnwar;":"",szlig:"","szlig;":"","Tab;":"\t","target;":"","Tau;":"","tau;":"","tbrk;":"","Tcaron;":"","tcaron;":"","Tcedil;":"","tcedil;":"","Tcy;":"","tcy;":"","tdot;":"","telrec;":"","Tfr;":"","tfr;":"","there4;":"","Therefore;":"","therefore;":"","Theta;":"","theta;":"","thetasym;":"","thetav;":"","thickapprox;":"","thicksim;":"","ThickSpace;":"","thinsp;":"","ThinSpace;":"","thkap;":"","thksim;":"",THORN:"",thorn:"","THORN;":"","thorn;":"","Tilde;":"","tilde;":"","TildeEqual;":"","TildeFullEqual;":"","TildeTilde;":"",times:"","times;":"","timesb;":"","timesbar;":"","timesd;":"","tint;":"","toea;":"","top;":"","topbot;":"","topcir;":"","Topf;":"","topf;":"","topfork;":"","tosa;":"","tprime;":"","TRADE;":"","trade;":"","triangle;":"","triangledown;":"","triangleleft;":"","trianglelefteq;":"","triangleq;":"","triangleright;":"","trianglerighteq;":"","tridot;":"","trie;":"","triminus;":"","TripleDot;":"","triplus;":"","trisb;":"","tritime;":"","trpezium;":"","Tscr;":"","tscr;":"","TScy;":"","tscy;":"","TSHcy;":"","tshcy;":"","Tstrok;":"","tstrok;":"","twixt;":"","twoheadleftarrow;":"","twoheadrightarrow;":"",Uacute:"",uacute:"","Uacute;":"","uacute;":"","Uarr;":"","uArr;":"","uarr;":"","Uarrocir;":"","Ubrcy;":"","ubrcy;":"","Ubreve;":"","ubreve;":"",Ucirc:"",ucirc:"","Ucirc;":"","ucirc;":"","Ucy;":"","ucy;":"","udarr;":"","Udblac;":"","udblac;":"","udhar;":"","ufisht;":"","Ufr;":"","ufr;":"",Ugrave:"",ugrave:"","Ugrave;":"","ugrave;":"","uHar;":"","uharl;":"","uharr;":"","uhblk;":"","ulcorn;":"","ulcorner;":"","ulcrop;":"","ultri;":"","Umacr;":"","umacr;":"",uml:"","uml;":"","UnderBar;":"_","UnderBrace;":"","UnderBracket;":"","UnderParenthesis;":"","Union;":"","UnionPlus;":"","Uogon;":"","uogon;":"","Uopf;":"","uopf;":"","UpArrow;":"","Uparrow;":"","uparrow;":"","UpArrowBar;":"","UpArrowDownArrow;":"","UpDownArrow;":"","Updownarrow;":"","updownarrow;":"","UpEquilibrium;":"","upharpoonleft;":"","upharpoonright;":"","uplus;":"","UpperLeftArrow;":"","UpperRightArrow;":"","Upsi;":"","upsi;":"","upsih;":"","Upsilon;":"","upsilon;":"","UpTee;":"","UpTeeArrow;":"","upuparrows;":"","urcorn;":"","urcorner;":"","urcrop;":"","Uring;":"","uring;":"","urtri;":"","Uscr;":"","uscr;":"","utdot;":"","Utilde;":"","utilde;":"","utri;":"","utrif;":"","uuarr;":"",Uuml:"",uuml:"","Uuml;":"","uuml;":"","uwangle;":"","vangrt;":"","varepsilon;":"","varkappa;":"","varnothing;":"","varphi;":"","varpi;":"","varpropto;":"","vArr;":"","varr;":"","varrho;":"","varsigma;":"","varsubsetneq;":"","varsubsetneqq;":"","varsupsetneq;":"","varsupsetneqq;":"","vartheta;":"","vartriangleleft;":"","vartriangleright;":"","Vbar;":"","vBar;":"","vBarv;":"","Vcy;":"","vcy;":"","VDash;":"","Vdash;":"","vDash;":"","vdash;":"","Vdashl;":"","Vee;":"","vee;":"","veebar;":"","veeeq;":"","vellip;":"","Verbar;":"","verbar;":"|","Vert;":"","vert;":"|","VerticalBar;":"","VerticalLine;":"|","VerticalSeparator;":"","VerticalTilde;":"","VeryThinSpace;":"","Vfr;":"","vfr;":"","vltri;":"","vnsub;":"","vnsup;":"","Vopf;":"","vopf;":"","vprop;":"","vrtri;":"","Vscr;":"","vscr;":"","vsubnE;":"","vsubne;":"","vsupnE;":"","vsupne;":"","Vvdash;":"","vzigzag;":"","Wcirc;":"","wcirc;":"","wedbar;":"","Wedge;":"","wedge;":"","wedgeq;":"","weierp;":"","Wfr;":"","wfr;":"","Wopf;":"","wopf;":"","wp;":"","wr;":"","wreath;":"","Wscr;":"","wscr;":"","xcap;":"","xcirc;":"","xcup;":"","xdtri;":"","Xfr;":"","xfr;":"","xhArr;":"","xharr;":"","Xi;":"","xi;":"","xlArr;":"","xlarr;":"","xmap;":"","xnis;":"","xodot;":"","Xopf;":"","xopf;":"","xoplus;":"","xotime;":"","xrArr;":"","xrarr;":"","Xscr;":"","xscr;":"","xsqcup;":"","xuplus;":"","xutri;":"","xvee;":"","xwedge;":"",Yacute:"",yacute:"","Yacute;":"","yacute;":"","YAcy;":"","yacy;":"","Ycirc;":"","ycirc;":"","Ycy;":"","ycy;":"",yen:"","yen;":"","Yfr;":"","yfr;":"","YIcy;":"","yicy;":"","Yopf;":"","yopf;":"","Yscr;":"","yscr;":"","YUcy;":"","yucy;":"",yuml:"","Yuml;":"","yuml;":"","Zacute;":"","zacute;":"","Zcaron;":"","zcaron;":"","Zcy;":"","zcy;":"","Zdot;":"","zdot;":"","zeetrf;":"","ZeroWidthSpace;":"","Zeta;":"","zeta;":"","Zfr;":"","zfr;":"","ZHcy;":"","zhcy;":"","zigrarr;":"","Zopf;":"","zopf;":"","Zscr;":"","zscr;":"","zwj;":"","zwnj;":""}),hd=(0,tr.dict)({}),gd=(0,tr.dict)({}),vd=function(){var e=dd;return(0,tr.__call__)(e.py_items,e)}(),md=0;md<(0,tr.len)(vd);md++){var yd=(0,tr.__getitem__)(vd,md),wd=yd[0],bd=yd[1];(0,tr.__setitem__)(hd,bd,wd),(0,tr.__setitem__)(gd,wd,(0,tr.__call__)(tr.chr,null,bd))}var kd=["escape","unescape"],xd=function(e,t){if(void 0===t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=!0;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"s":e=_[n];break;case"quote":t=_[n]}}}e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"&","&amp;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"<","&lt;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,">","&gt;")}();if((0,tr.__t__)(t))e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,'"',"&quot;")}(),e=function(){var t=e;return(0,tr.__call__)(t.py_replace,t,"'","&#x27;")}();return e},Od=(0,tr.dict)({0:"",13:"\r",128:"",129:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",141:"",142:"",143:"",144:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",157:"",158:"",159:""}),Pd=new(0,tr.set)([1,2,3,4,5,6,7,8,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,11,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ed=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}e=function(){var t=e;return(0,tr.__call__)(t.group,t,1)}();if((0,tr.__t__)((0,tr.__eq__)((0,tr.__getitem__)(e,0),"#"))){if((0,tr.__t__)((0,tr.__in__)((0,tr.__getitem__)(e,1),"xX")))var n=(0,tr.__call__)(tr.int,null,function(){var t=(0,tr.__getslice__)(e,2,null,1);return(0,tr.__call__)(t.rstrip,t,";")}(),16);else n=(0,tr.__call__)(tr.int,null,function(){var t=(0,tr.__getslice__)(e,1,null,1);return(0,tr.__call__)(t.rstrip,t,";")}());return(0,tr.__t__)((0,tr.__in__)(n,Od))?(0,tr.__getitem__)(Od,n):(0,tr.__t__)((0,tr.__t__)((0,tr.__le__)(55296,n)&&(0,tr.__le__)(n,57343))||(0,tr.__gt__)(n,1114111))?"":(0,tr.__t__)((0,tr.__in__)(n,Pd))?"":(0,tr.__call__)(tr.chr,null,n)}if((0,tr.__t__)((0,tr.__in__)(e,pd)))return(0,tr.__getitem__)(pd,e);for(var a=(0,tr.__sub__)((0,tr.__call__)(tr.len,null,e),1);a>1;a--)if((0,tr.__t__)((0,tr.__in__)((0,tr.__getslice__)(e,0,a,1),pd)))return(0,tr.__add__)((0,tr.__getitem__)(pd,(0,tr.__getslice__)(e,0,a,1)),(0,tr.__getslice__)(e,a,null,1));return(0,tr.__add__)("&",e)},Cd=function(){var e=pr;return(0,tr.__call__)(e.compile,e,"&(#[0-9]+;?|#[xX][0-9a-fA-F]+;?|[^\\t\\n\\f <&#;]{1,32};?)")}(),Ad=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return(0,tr.__t__)(!(0,tr.__in__)("&",e))?e:function(){var t=Cd;return(0,tr.__call__)(t.sub,t,Ed,e)}()},Sd={},Nd={},Td={};(0,tr.__nest__)(Nd,"",m_),(0,tr.__nest__)(Td,"",pr),(0,tr.__nest__)(Sd,"",fd);var Ld="flm.fragmentrenderer.html",Md=function(){var e=Nd;return(0,tr.__call__)(e.getLogger,e,Ld)}(),jd=function(){var e=Td;return(0,tr.__call__)(e.compile,e,"[&]([a-zA-Z]+|[#][0-9]+|[#]x[0-9a-fA-F]+);")}(),Id=(0,tr.__class__)("HtmlFragmentRenderer",[ud],{__module__:Ld,supports_delayed_render_markers:!0,use_link_target_blank:!1,html_blocks_joiner:"\n",heading_tags_by_level:(0,tr.dict)({1:"h1",2:"h2",3:"h3",4:"span",5:"span",6:"span",theorem:"span"}),inline_heading_add_space:!0,aggressively_escape_html_attributes:!1,render_nothing_as_comment_with_annotations:!0,render_links_with_empty_href:!1,use_mathjax:!0,use_standard_math_delimiters:!0,get htmlescape(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"value":t=_[n]}}}var a=function(){var e=Sd;return(0,tr.__call__)(e.escape,e,t)}();a=function(){var e,t,r,_,n,i,o=(e=a,t=(0,tr.__call__)(e.py_replace,e,"","&nbsp;"),r=(0,tr.__call__)(t.py_replace,t,"","&hairsp;"),_=(0,tr.__call__)(r.py_replace,r,"","&thinsp;"),n=(0,tr.__call__)(_.py_replace,_,"","&puncsp;"),i=(0,tr.__call__)(n.py_replace,n,"","&ensp;"),(0,tr.__call__)(i.py_replace,i,"","&emsp;"));return(0,tr.__call__)(o.py_replace,o,"","&numsp;")}();return a}))},get htmlescape_double_quoted_attribute_value(){return(0,tr.__get__)(this,(function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"self":e=_[n];break;case"value":t=_[n]}}}if((0,tr.__t__)(e.aggressively_escape_html_attributes))return function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}();t=function(){var e=jd;return(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("m"===_)e=r[_]}}return(0,tr.__add__)((0,tr.__add__)("&amp;",(n=e,(0,tr.__call__)(n.group,n,1))),";");var n}),t)}(),t=function(){var e=t;return(0,tr.__call__)(e.py_replace,e,'"',"&quot;")}();return t}))},get generate_open_tag(){return(0,tr.__get__)(this,(function(e,t){var r=null,_=null,n=!1;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tagname":t=i[o];break;case"attrs":r=i[o];break;case"class_names":_=i[o];break;case"self_close_tag":n=i[o]}}}var l="<{}".format(t);if((0,tr.__t__)(!(0,tr.__t__)(r)))r=(0,tr.dict)({});r=(0,tr.__call__)(tr.dict,null,r);if((0,tr.__t__)((0,tr.__in__)("class",r))){var s=(0,tr.__call__)(tr.ValueError,null,"generate_open_tag(): set HTML 'class' attribute with class_names=, not with attrs=");throw s.__cause__=null,s}if((0,tr.__t__)(_)&&(0,tr.__setitem__)(r,"class",(0,tr.__call__)(" ".join," ",_)),(0,tr.__t__)(r))for(var c=function(){var e=r;return(0,tr.__call__)(e.py_items,e)}(),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],p=f[1];l=(0,tr.__call__)(tr.__iadd__,null,l,' {}="{}"'.format(d,function(){var t=e;return(0,tr.__call__)(t.htmlescape_double_quoted_attribute_value,t,p)}()))}if((0,tr.__t__)(n))l=(0,tr.__call__)(tr.__iadd__,null,l,"/>");else l=(0,tr.__call__)(tr.__iadd__,null,l,">");return l}))},get wrap_in_tag(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"tagname":t=i[o];break;case"content_html":r=i[o];break;case"attrs":_=i[o];break;case"class_names":n=i[o]}}}var l=function(){var r=e;return(0,tr.__call__)(r.generate_open_tag,r,t,(0,tr.__kwargtrans__)({attrs:_,class_names:n}))}();l=(0,tr.__call__)(tr.__iadd__,null,l,(0,tr.__call__)(tr.str,null,r));return l=(0,tr.__call__)(tr.__iadd__,null,l,"</{}>".format(t))}))},get wrap_in_link(){return(0,tr.__get__)(this,(function(e,t,r){var _=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"display_html":t=a[i];break;case"target_href":r=a[i];break;case"class_names":_=a[i]}}}if((0,tr.__t__)(!(0,tr.__t__)(r)))r="#";var o=(0,tr.dict)({href:r});return(0,tr.__t__)((0,tr.__call__)(tr.callable,null,e.use_link_target_blank))?(0,tr.__t__)(function(){var t=e;return(0,tr.__call__)(t.use_link_target_blank,t,r)}())&&(0,tr.__setitem__)(o,"target","_blank"):(0,tr.__t__)((0,tr.__t__)(e.use_link_target_blank)&&!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.startswith,e,"#")}()))&&(0,tr.__setitem__)(o,"target","_blank"),function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"a",t,(0,tr.__kwargtrans__)({attrs:o,class_names:_}))}()}))},get render_build_paragraph(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"render_context":r=n[a]}}}return(0,tr.__add__)((0,tr.__add__)("<p>",function(){var _=e;return(0,tr.__call__)(_.render_inline_content,_,t,r)}()),"</p>")}))},get render_inline_content(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"nodelist":t=n[a];break;case"render_context":r=n[a]}}}return function(){var _=e;return(0,tr.__call__)(_.render_join,_,function(){for(var _,n,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);_=void 0,n=void 0,n=a,(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_.render_node,_,l,r)))}return a}(),r)}()}))},get render_join(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content_list":t=n[a];break;case"render_context":r=n[a]}}}return(0,tr.__call__)("".join,"",function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);e=void 0,e=r,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.str,null,a))}return r}())}))},get render_join_blocks(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content_list":t=n[a];break;case"render_context":r=n[a]}}}return function(){var r=e.html_blocks_joiner;return(0,tr.__call__)(r.join,r,function(){for(var e,r=[],_=t,n=0;n<(0,tr.len)(_);n++){var a=(0,tr.__getitem__)(_,n);(0,tr.__t__)((0,tr.__t__)(null!==a)&&(0,tr.__call__)(tr.len,null,a))&&(e=void 0,e=r,(0,tr.__call__)(e.append,e,a))}return r}())}()}))},get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"render_context":r=n[a]}}}return function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}()}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"debug_str":t=n[a];break;case"render_context":r=n[a]}}}var i=function(){var e=t;return(0,tr.__call__)(e.py_replace,e,"--","- - ")}();return'<span class="empty-error-placeholder">\x3c!-- {} --\x3e(?)</span>'.format(i)}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_context":t=n[a];break;case"annotations":r=n[a]}}}if((0,tr.__t__)(!(0,tr.__t__)(e.render_nothing_as_comment_with_annotations)))return"";if((0,tr.__t__)(!(0,tr.__t__)(r)))r=[];r=function(){for(var e,t,_=[],n=r,a=0;a<(0,tr.len)(n);a++){var i=(0,tr.__getitem__)(n,a);e=void 0,t=void 0,t=_,(0,tr.__call__)(t.append,t,(e=i,(0,tr.__call__)(e.py_replace,e,"--","- - ")))}return _}();return function(){var e="\x3c!-- {} --\x3e";return(0,tr.__call__)(e.format,e,(0,tr.__call__)(" ".join," ",r))}()}))},verbatim_highlight_spaces:!1,verbatim_protect_backslashes:!0,get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null;if(arguments.length){var a=arguments.length-1;if(arguments[a]&&arguments[a].hasOwnProperty("__kwargtrans__")){var i=arguments[a--];for(var o in i)switch(o){case"self":e=i[o];break;case"value":t=i[o];break;case"render_context":r=i[o];break;case"is_block_level":i[o];break;case"annotations":_=i[o];break;case"target_id":n=i[o]}}}var l=(0,tr.dict)({});(0,tr.__t__)(null!==n)&&(0,tr.__setitem__)(l,"id",n);var s=function(){var r=e;return(0,tr.__call__)(r.htmlescape,r,t)}();if((0,tr.__t__)(e.verbatim_protect_backslashes))s=function(){var e=s;return(0,tr.__call__)(e.py_replace,e,"\\","<span>\\</span>")}();if((0,tr.__t__)(e.verbatim_highlight_spaces))s=function(){var e=s;return(0,tr.__call__)(e.py_replace,e," ",'<span class="verbatimspace">&nbsp;</span>')}();for(var c="span",u=_,f=0;f<(0,tr.len)(u);f++){var d=(0,tr.__getitem__)(u,f);if((0,tr.__t__)((0,tr.__in__)(d,(0,tr.tuple)(["verbatimcode-environment"]))))c="div"}return function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,c,s,(0,tr.__kwargtrans__)({class_names:(0,tr.__t__)(_)?_:["verbatimtext"],attrs:l}))}()}))},get render_math_content(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a,i){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(void 0===i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"delimiters":t=l[s];break;case"nodelist":r=l[s];break;case"render_context":_=l[s];break;case"displaytype":n=l[s];break;case"environmentname":a=l[s];break;case"target_id":i=l[s]}}}(0,tr.__t__)(!(0,tr.__t__)(e.use_mathjax))&&function(){var e=Md;(0,tr.__call__)(e.warning,e,"called HtmlFragmentRenderer.render_math_content() but self.use_mathjax is not set. Your math will probably not render correctly.")}();var c=(0,tr.tuple)([(0,tr.__getitem__)(t,0),(0,tr.__getitem__)(t,1)]);if((0,tr.__t__)(e.use_standard_math_delimiters))if((0,tr.__t__)((0,tr.__eq__)(n,"inline")))c=(0,tr.tuple)(["\\(","\\)"]);else{if(!(0,tr.__t__)((0,tr.__eq__)(n,"display"))){var u=(0,tr.__call__)(tr.ValueError,null,"Invalid displaytype: {}".format((0,tr.__call__)(tr.repr,null,n)));throw u.__cause__=null,u}if((0,tr.__t__)(a))c=(0,tr.tuple)(["\\begin{}{}{}".format("{",a,"}"),"\\end{}{}{}".format("{",a,"}")]);else c=(0,tr.tuple)(["\\[","\\]"])}var f=["{}-math".format(n)];(0,tr.__t__)(null!==a)&&function(){var e,t=f;(0,tr.__call__)(t.append,t,"env-{}".format((e=a,(0,tr.__call__)(e.py_replace,e,"*","-star"))))}();var d=function(){var t,_=e;return(0,tr.__call__)(_.htmlescape,_,(0,tr.__add__)((0,tr.__add__)((0,tr.__getitem__)(c,0),(t=e,(0,tr.__call__)(t.recompose_latex,t,r))),(0,tr.__getitem__)(c,1)))}(),p=(0,tr.dict)({});return(0,tr.__t__)(null!==i)&&(0,tr.__setitem__)(p,"id",i),(0,tr.__t__)((0,tr.__eq__)(n,"display"))?function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"span",d,(0,tr.__kwargtrans__)({class_names:f,attrs:p}))}():function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"span",d,(0,tr.__kwargtrans__)({class_names:f,attrs:p}))}()}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":_=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,r,_,(0,tr.__kwargtrans__)({is_block_level:!1}))}();return function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"span",o,(0,tr.__kwargtrans__)({class_names:t}))}()}))},get render_semantic_span(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"content":t=o[l];break;case"role":r=o[l];break;case"render_context":_=o[l];break;case"annotations":n=o[l];break;case"target_id":a=o[l]}}}var s=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(s,"id",a);n=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==n)?n:[]);return(0,tr.__t__)((0,tr.__in__)(r,n))&&function(){var e=n;(0,tr.__call__)(e.remove,e,r)}(),function(){var _=e;return(0,tr.__call__)(_.wrap_in_tag,_,"span",t,(0,tr.__kwargtrans__)({attrs:s,class_names:(0,tr.__add__)([r],n)}))}()}))},get render_semantic_block(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"content":t=o[l];break;case"role":r=o[l];break;case"render_context":_=o[l];break;case"annotations":n=o[l];break;case"target_id":a=o[l]}}}var s=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(s,"id",a);n=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==n)?n:[]);return(0,tr.__t__)((0,tr.__in__)(r,n))&&function(){var e=n;(0,tr.__call__)(e.remove,e,r)}(),(0,tr.__t__)((0,tr.__in__)(r,(0,tr.tuple)(["section","main","article"])))?function(){var _=e;return(0,tr.__call__)(_.wrap_in_tag,_,r,t,(0,tr.__kwargtrans__)({attrs:s,class_names:n}))}():function(){var _=e;return(0,tr.__call__)(_.wrap_in_tag,_,"div",t,(0,tr.__kwargtrans__)({attrs:s,class_names:(0,tr.__add__)([r],n)}))}()}))},lines_use_line_span:!0,lines_use_br:!0,lines_container_tag:(0,tr.dict)({}),get render_lines(){return(0,tr.__get__)(this,(function(e,t,r){var _=null,n=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"iter_lines_nodelists":t=o[l];break;case"render_context":r=o[l];break;case"role":_=o[l];break;case"annotations":n=o[l];break;case"target_id":a=o[l]}}}for(var s=[],c=t,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,f,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!1}))}();if((0,tr.__t__)(e.lines_use_line_span))d=function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"span",d)}();!function(){var e=s;(0,tr.__call__)(e.append,e,d)}()}if((0,tr.__t__)(e.lines_use_br))s=function(){for(var e,t=[],r=(0,tr.__call__)(tr.enumerate,null,s),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=n[0],i=n[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__t__)((0,tr.__lt__)(a,(0,tr.__sub__)((0,tr.__call__)(tr.len,null,s),1)))?(0,tr.__add__)(i,"<br>"):i)}return t}();var p=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(p,"id",a);n=(0,tr.__call__)(tr.list,null,(0,tr.__t__)(null!==n)?n:[]);(0,tr.__t__)((0,tr.__t__)(_)&&(0,tr.__in__)(_,n))&&function(){var e=n;(0,tr.__call__)(e.remove,e,_)}();var h=["lines"];(0,tr.__t__)(_)&&function(){var e=h;(0,tr.__call__)(e.append,e,_)}(),(0,tr.__t__)(n)&&function(){var e=h;(0,tr.__call__)(e.extend,e,n)}();if((0,tr.__t__)((0,tr.__t__)(_)&&(0,tr.__in__)(_,e.lines_container_tag)))(0,tr.__getitem__)(e.lines_container_tag,_);return function(){var t,_=e;return(0,tr.__call__)(_.wrap_in_tag,_,"p",(t=e,(0,tr.__call__)(t.render_join,t,s,r)),(0,tr.__kwargtrans__)({class_names:h,attrs:p}))}()}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=null,a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"iter_items_nodelists":t=o[l];break;case"counter_formatter":r=o[l];break;case"render_context":_=o[l];break;case"target_id_generator":n=o[l];break;case"annotations":a=o[l];break;case"nested_depth":o[l]}}}for(var s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],p=f[1],h=!0;if((0,tr.__t__)(!1===p.parsing_state.is_block_level))h=!1;var g=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,p,(0,tr.__kwargtrans__)({render_context:_,is_block_level:h}))}(),v=(0,tr.__add__)(1,d),m=(0,tr.__call__)(r,null,v);if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,m,tr.str)))var y=function(){var t=e;return(0,tr.__call__)(t.render_value,t,m,_)}();else y=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,m,(0,tr.__kwargtrans__)({render_context:_,is_block_level:!1}))}();var w=(0,tr.dict)({});if((0,tr.__t__)(null!==n)){var b=(0,tr.__call__)(n,null,v);(0,tr.__t__)(null!==b)&&(0,tr.__setitem__)(w,"id",b)}!function(){var t,r,n=s;(0,tr.__call__)(n.append,n,(r=e,(0,tr.__call__)(r.render_join,r,[(t=e,(0,tr.__call__)(t.wrap_in_tag,t,"dt",y,(0,tr.__kwargtrans__)({attrs:w}))),function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"dd",g)}()],_)))}()}return function(){var t,r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"dl",(t=e,(0,tr.__call__)(t.render_join,t,s,_)),(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["enumeration"],(0,tr.__t__)(a)?a:[])}))}()}))},get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){var _=1,n=!1,a=null,i=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var l=arguments[o--];for(var s in l)switch(s){case"self":e=l[s];break;case"heading_nodelist":t=l[s];break;case"render_context":r=l[s];break;case"heading_level":_=l[s];break;case"inline_heading":n=l[s];break;case"target_id":a=l[s];break;case"annotations":i=l[s]}}}if((0,tr.__t__)(!(0,tr.__in__)(_,e.heading_tags_by_level))){var c=(0,tr.__call__)(tr.ValueError,null,"HTML renderer: bad heading level {},  expected one of {} (or set HTML fragment renderer's heading_tags_by_level config".format(_,(0,tr.__call__)(tr.list,null,function(){var t=e.heading_tags_by_level;return(0,tr.__call__)(t.py_keys,t)}())));throw c.__cause__=null,c}var u=(0,tr.__t__)(i)?(0,tr.__call__)(tr.list,null,i):[];!function(){var e=u;(0,tr.__call__)(e.append,e,"heading-level-{}".format(_))}(),(0,tr.__t__)(n)&&function(){var e=u;(0,tr.__call__)(e.append,e,"heading-inline")}();var f=(0,tr.dict)({});(0,tr.__t__)(null!==a)&&(0,tr.__setitem__)(f,"id",a);var d=function(){var n,a=e;return(0,tr.__call__)(a.wrap_in_tag,a,(0,tr.__getitem__)(e.heading_tags_by_level,_),(n=e,(0,tr.__call__)(n.render_inline_content,n,t,r)),(0,tr.__kwargtrans__)({class_names:u,attrs:f}))}();if((0,tr.__t__)((0,tr.__t__)(n)&&e.inline_heading_add_space))d=(0,tr.__call__)(tr.__iadd__,null,d," ");return d}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":_=o[l];break;case"render_context":n=o[l];break;case"annotations":a=o[l]}}}var s=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,_,(0,tr.__kwargtrans__)({render_context:n,is_block_level:!1}))}();return(0,tr.__t__)((0,tr.__t__)(!(0,tr.__t__)(r))&&!(0,tr.__t__)(e.render_links_with_empty_href))?s:function(){var _=e;return(0,tr.__call__)(_.wrap_in_link,_,s,r,(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["href-{}".format(t)],(0,tr.__t__)(a)?a:[])}))}()}))},get render_annotation_comment(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"display_nodelist":t=o[l];break;case"render_context":r=o[l];break;case"is_block_level":_=o[l];break;case"color_index":n=o[l];break;case"initials":a=o[l]}}}var s=function(){var _=e;return(0,tr.__call__)(_.render_nodelist,_,t,r)}();if((0,tr.__t__)(a))s=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)('<span class="annotation-initials">',a),"</span>"),s);return function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,(0,tr.__t__)(_)?"div":"span",s,(0,tr.__kwargtrans__)({class_names:["annotation","annotation-comment","annotation-{}".format(n)]}))}()}))},get render_annotation_highlight(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=!1;if(void 0===n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"display_nodelist":t=o[l];break;case"render_context":r=o[l];break;case"is_block_level":_=o[l];break;case"color_index":n=o[l];break;case"initials":a=o[l]}}}var s=function(){var _=e;return(0,tr.__call__)(_.render_nodelist,_,t,r)}();if((0,tr.__t__)(a))s=(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)('<span class="annotation-initials">',a),"</span>"),s);return function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,(0,tr.__t__)(_)?"div":"span",s,(0,tr.__kwargtrans__)({class_names:["annotation","annotation-highlight","annotation-{}".format(n)]}))}()}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}return"<FLM:DLYD:{}/>".format(r)}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}return"\x3c!-- delayed:{} --\x3e".format(r)}))},get replace_delayed_markers_with_final_values(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"content":t=n[a];break;case"delayed_values":r=n[a]}}}return function(){var e=Dd;return(0,tr.__call__)(e.sub,e,(function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var _=arguments[t--];for(var n in _)if("m"===n)e=_[n]}}return(0,tr.__getitem__)(r,(0,tr.__call__)(tr.int,null,(a=e,(0,tr.__call__)(a.group,a,"key"))));var a}),t)}()}))},float_caption_title_separator:": ",get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_instance":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.dict)({});(0,tr.__t__)(null!==t.target_id)&&(0,tr.__setitem__)(i,"id",t.target_id);var o=[];(0,tr.__t__)(null!==t.counter_value)?function(){var _,n,a,i=o;(0,tr.__call__)(i.append,i,(a=e,(0,tr.__call__)(a.wrap_in_tag,a,"span",(n=e,(0,tr.__call__)(n.render_join,n,[(_=e,(0,tr.__call__)(_.render_value,_,t.float_type_info.float_caption_name,r)),"&nbsp;",function(){var _=e;return(0,tr.__call__)(_.render_nodelist,_,t.formatted_counter_value_flm.nodes,(0,tr.__kwargtrans__)({render_context:r}))}()],r)),(0,tr.__kwargtrans__)({class_names:["float-number"]}))))}():(0,tr.__t__)(t.caption_nodelist)&&function(){var _,n,a,i=o;(0,tr.__call__)(i.append,i,(a=e,(0,tr.__call__)(a.wrap_in_tag,a,"span",(n=e,(0,tr.__call__)(n.render_join,n,[(_=e,(0,tr.__call__)(_.render_value,_,t.float_type_info.float_caption_name,r))],r)),(0,tr.__kwargtrans__)({class_names:["float-no-number"]}))))}(),(0,tr.__t__)(t.caption_nodelist)&&(function(){var t=o;(0,tr.__call__)(t.append,t,e.float_caption_title_separator)}(),function(){var _,n=o;(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_.render_nodelist,_,t.caption_nodelist,(0,tr.__kwargtrans__)({render_context:r}))))}());var l=null;if((0,tr.__t__)(o))l=function(){var t,_,n=e;return(0,tr.__call__)(n.wrap_in_tag,n,"figcaption",(_=e,(0,tr.__call__)(_.wrap_in_tag,_,"span",(t=e,(0,tr.__call__)(t.render_join,t,o,r)))),(0,tr.__kwargtrans__)({class_names:["float-caption-content"]}))}();var s=function(){var _=e;return(0,tr.__call__)(_.render_nodelist,_,t.content_nodelist,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))}(),c=function(){var t=e;return(0,tr.__call__)(t.render_semantic_block,t,s,"float-contents",(0,tr.__kwargtrans__)({render_context:r}))}();if((0,tr.__t__)(null!==l))var u=function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,[c,l],r)}();else u=c;var f=function(){var r=e;return(0,tr.__call__)(r.wrap_in_tag,r,"figure",u,(0,tr.__kwargtrans__)({attrs:i,class_names:["float","float-{}".format(t.float_type)]}))}();return f}))},graphics_raster_magnification:1,graphics_vector_magnification:1,get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"graphics_resource":t=n[a];break;case"render_context":r=n[a]}}}var i=(0,tr.dict)({}),o=[];if((0,tr.__t__)(null!==t.physical_dimensions)){var l=t.physical_dimensions,s=l[0],c=l[1];if((0,tr.__t__)((0,tr.__eq__)(t.graphics_type,"raster"))){if((0,tr.__t__)(null!==s))s=(0,tr.__call__)(tr.__imul__,null,s,e.graphics_raster_magnification);if((0,tr.__t__)(null!==c))c=(0,tr.__call__)(tr.__imul__,null,c,e.graphics_raster_magnification)}else if((0,tr.__t__)((0,tr.__eq__)(t.graphics_type,"vector"))){if((0,tr.__t__)(null!==s))s=(0,tr.__call__)(tr.__imul__,null,s,e.graphics_vector_magnification);if((0,tr.__t__)(null!==c))c=(0,tr.__call__)(tr.__imul__,null,c,e.graphics_vector_magnification)}(0,tr.__t__)(null!==s)&&function(){var e=o;(0,tr.__call__)(e.append,e,"width:{}pt".format(s))}(),(0,tr.__t__)(null!==c)&&function(){var e=o;(0,tr.__call__)(e.append,e,"height:{}pt".format(c))}()}(0,tr.__t__)(o)&&(0,tr.__setitem__)(i,"style",(0,tr.__call__)(";".join,";",o));var u=t.src_url;if((0,tr.__setitem__)(i,"src",u),(0,tr.__t__)((0,tr.__t__)(null!==t.srcset)&&(0,tr.__t__)(t.srcset)&&(0,tr.__call__)(tr.len,null,t.srcset))){for(var f=[],d=t.srcset,p=0;p<(0,tr.len)(d);p++){var h=(0,tr.__getitem__)(d,p),g=(0,tr.__getitem__)(h,"source");if((0,tr.__t__)((0,tr.__in__)("pixel_density",h))){var v=(0,tr.__getitem__)(h,"pixel_density");g=(0,tr.__call__)(tr.__iadd__,null,g," {}x".format(v))}!function(){var e=f;(0,tr.__call__)(e.append,e,g)}()}(0,tr.__setitem__)(i,"srcset",(0,tr.__call__)(", ".join,", ",f))}return function(){var t=e;return(0,tr.__call__)(t.generate_open_tag,t,"img",(0,tr.__kwargtrans__)({attrs:i}))}()}))},get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":_=a[i]}}}for(var o=(0,tr.tuple)([(0,tr.__call__)(tr.len,null,t.grid_data),(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(t.grid_data,0))]),l=o[0],s=o[1],c=[],u=0;(0,tr.__t__)((0,tr.__lt__)(u,(0,tr.__call__)(tr.len,null,t.grid_data)));){for(var f=[],d=0;(0,tr.__t__)((0,tr.__lt__)(d,(0,tr.__call__)(tr.len,null,(0,tr.__getitem__)(t.grid_data,u))));){var p=(0,tr.__getitem__)((0,tr.__getitem__)(t.grid_data,u),d);if((0,tr.__t__)((0,tr.__t__)(null===p)||null===(0,tr.__getitem__)(p,"cell"))){var h=[];(0,tr.__t__)((0,tr.__eq__)(u,0))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-top")}(),(0,tr.__t__)((0,tr.__eq__)(d,0))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-left")}(),(0,tr.__t__)((0,tr.__eq__)(u,(0,tr.__sub__)(l,1)))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-bottom")}(),(0,tr.__t__)((0,tr.__eq__)(d,(0,tr.__sub__)(s,1)))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-right")}(),function(){var t,r=f;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.wrap_in_tag,t,"td","",(0,tr.__kwargtrans__)({class_names:(0,tr.__add__)(["cell-empty"],h)}))))}();d=(0,tr.__call__)(tr.__iadd__,null,d,1)}else if((0,tr.__t__)((0,tr.__getitem__)(p,"is_topleft"))){var g=(0,tr.__getitem__)(p,"cell"),v=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,g.content_nodes,(0,tr.__kwargtrans__)({render_context:r}))}();h=(0,tr.__add__)(["cell"],function(){for(var e,t=[],r=g.styles,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,"cellstyle-{}".format(n))}return t}());(0,tr.__t__)((0,tr.__eq__)(u,0))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-top")}(),(0,tr.__t__)((0,tr.__eq__)(d,0))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-left")}(),(0,tr.__t__)((0,tr.__eq__)(g.placement.row_range.end,l))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-bottom")}(),(0,tr.__t__)((0,tr.__eq__)(g.placement.col_range.end,s))&&function(){var e=h;(0,tr.__call__)(e.append,e,"celltbledge-right")}();var m="td";if((0,tr.__t__)((0,tr.__t__)((0,tr.__in__)("H",g.styles))||(0,tr.__in__)("rH",g.styles)))m="th";var y=(0,tr.dict)({}),w=g.placement;(0,tr.__t__)((0,tr.__ne__)(w.col_range.end,(0,tr.__add__)(w.col_range.start,1)))&&(0,tr.__setitem__)(y,"colspan",(0,tr.__call__)(tr.str,null,(0,tr.__sub__)(w.col_range.end,w.col_range.start))),(0,tr.__t__)((0,tr.__ne__)(w.row_range.end,(0,tr.__add__)(w.row_range.start,1)))&&(0,tr.__setitem__)(y,"rowspan",(0,tr.__call__)(tr.str,null,(0,tr.__sub__)(w.row_range.end,w.row_range.start))),function(){var t,r=f;(0,tr.__call__)(r.append,r,(t=e,(0,tr.__call__)(t.wrap_in_tag,t,m,v,(0,tr.__kwargtrans__)({attrs:y,class_names:h}))))}();d=w.col_range.end}else d=(0,tr.__call__)(tr.__iadd__,null,d,1)}!function(){var e=c;(0,tr.__call__)(e.append,e,f)}();u=(0,tr.__call__)(tr.__iadd__,null,u,1)}var b=(0,tr.dict)({});(0,tr.__t__)(null!==_)&&(0,tr.__setitem__)(b,"id",_);var k=function(){var t=e;return(0,tr.__call__)(t.wrap_in_tag,t,"table",(0,tr.__call__)("".join,"",function(){for(var e,t=[],r=c,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__add__)((0,tr.__add__)("<tr>",(0,tr.__call__)("".join,"",n)),"</tr>"))}return t}()),(0,tr.__kwargtrans__)({attrs:b,class_names:["cells"]}))}();return k}))}}),Dd=function(){var e=Td;return(0,tr.__call__)(e.compile,e,"<FLM:DLYD:(?P<key>\\d+)\\s*/>")}(),Rd=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("html_fragment_renderer"===_)e=r[_]}}return"\np, ul, ol, .p-block {\n  margin: 1em 0px;\n}\np:first-child, ul:first-child, ol:first-child, .p-block:first-child {\n  margin-top: 0px;\n}\np:last-child, ul:last-child, ol:last-child, .p-block:last-child {\n  margin-bottom: 0px;\n}\ndd > p, dd > p:first-child, dd > p:last-child {\n  margin: 0.33em 0px;\n}\n\na, a:link, a:hover, a:active, a:visited {\n  color: #3232c8;\n  text-decoration: none;\n}\na:hover {\n  color: #22228a;\n}\n"},Fd=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("html_fragment_renderer"===_)e=r[_]}}return"\n.emph, .textit {\n  font-style: italic;\n}\n.textbf {\n  font-weight: bold;\n}\n\nh1 {\n  font-size: 1.6rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh2 {\n  font-size: 1.3rem;\n  line-height: 1.3em;\n  font-weight: bold;\n  margin: 1em 0px;\n}\nh3 {\n  font-size: 1rem;\n  font-weight: bold;\n  margin: 1em 0px;\n}\n\n.heading-level-4 {\n  font-style: italic;\n  display: inline;\n}\n.heading-level-4::after {\n  display: inline-block;\n  margin: 0px .12em;\n  content: '';\n}\n\n.heading-level-5 {\n  font-style: italic;\n  font-size: .9em;\n  display: inline;\n}\n.heading-level-5::after {\n  display: inline-block;\n  margin-right: .12em;\n  content: '';\n}\n\n.heading-level-6 {\n  font-style: italic;\n  font-size: .8em;\n  display: inline;\n}\n.heading-level-6::after {\n  display: inline-block;\n  margin-right: .06em;\n  content: '';\n}\n\n\n.heading-level-theorem {\n  font-weight: bold;\n}\n.heading-level-theorem::after {\n  font-weight: bold;\n  display: inline-block;\n  margin: 0px .12em 0px 0px;\n  content: '.';\n}\n\ndiv.prooflike > p > .heading-level-theorem,\ndiv.prooflike > p > .heading-level-theorem::after {\n  font-weight: normal;\n  font-style: italic;\n}\n\n\ndl.enumeration {\n  display: block;\n  margin-left: 2.5em;\n}\ndl.enumeration > dt {\n  float: left;\n  clear: left;\n  display: inline-block;\n  /*margin: 0px; */\n  margin-left: -2.5em;\n  width: 2.0em;\n  min-width: 2.0em;\n  max-width: 2.0em;\n  margin-right: 0.5em;\n  text-align: right;\n}\ndl.enumeration > dd {\n  /*display: inline-block;\n  width: 100%;*/\n  border: 0px;\n  padding: 0px;\n  margin: 0px;\n}\n\nfigure.float {\n  width: 100%;\n  border-width: 1px 0px 1px 0px;\n  border-style: solid none solid none;\n  border-color: rgba(120, 120, 140, 0.15);\n  margin: 0.5rem 0px;\n  padding: 0.5rem 0px;\n}\n\nfigure.float .float-contents {\n  width: 100%;\n  max-width: 100%;\n  overflow-x: auto;\n}\n\nfigure.float .float-contents img {\n  display: block;\n  margin: 0pt auto;\n  padding: 0pt;\n  border: 0pt;\n  margin: 0px auto;\n}\n\nfigure.float figcaption {\n  display: block;\n  margin-top: 0.5em;\n  margin: 0.75em 2em 0px;\n  text-align: center;\n}\n\nfigure.float figcaption > span {\n  display: inline-block;\n  font-style: italic;\n  text-align: left;\n}\n\ntable {\n  margin: 1em 0px 1em 0px;\n  border-collapse: separate;\n  border-spacing: 0px;\n  /*border-top: solid 1pt;\n  border-bottom: solid 1pt;*/\n}\nfigure.float .float-contents table {\n  margin: 0px auto;\n}\ntd {\n  padding: 0.3em 0.5em;\n  border: none 0px;\n}\nth {\n  padding: 0.3em 0.5em;\n  border: none 0px;\n}\n.cellstyle-H {\n  border-bottom: solid .5pt;\n}\n.cellstyle-rH {\n}\n.cellstyle-l {\n  text-align: left;\n}\n.cellstyle-c {\n  text-align: center;\n}\n.cellstyle-r {\n  text-align: right;\n}\n.cellstyle-green {\n  background-color: rgba(69, 255, 69, 0.31); /*rgb(200,255,200);*/\n}\n.cellstyle-blue {\n  background-color: rgba(79, 142, 255, 0.27); /*rgb(200,220,255);*/\n}\n.cellstyle-yellow {\n  background-color: rgba(255, 255, 49, 0.33); /*rgb(255,255,200);*/\n}\n.cellstyle-red {\n  background-color: rgba(255,120,120,0.30);  /*rgb(255,200,200);*/\n}\n.cellstyle-lvert {\n  border-left: solid .5pt;\n}\n.cellstyle-rvert {\n  border-right: solid .5pt;\n}\n\n.celltbledge-top {\n  border-top: solid 1pt;\n}\n.celltbledge-bottom {\n  border-bottom: solid 1pt;\n}\n\n.verbatimcode {\n  font-family: monospace;\n  font-size: 0.9em;\n  background-color: rgba(127,127,127,0.25);\n  border-radius: 2px;\n  padding: 1px 2px;\n  display: inline-block;\n  white-space: pre-wrap;\n}\n.verbatima {\n  font-style: italic;\n}\n.verbatimcode-environment {\n  display: block;\n  margin: 0.75em 0px 1em;\n  white-space: pre;\n}\n\n.defterm {\n  font-style: italic;\n  margin: 1em 0px;\n}\n.defterm:first-child {\n  margin-top: 0px;\n}\n.defterm:last-child {\n  margin-bottom: 0px;\n}\n\n.defterm .defterm-term, .defterm .term-in-defining-defterm {\n  font-style: italic;\n  font-weight: bold;\n}\n\n.display-math {\n  width: 100%;\n  max-width: 100%;\n  display: block;\n  overflow-x: auto;\n}\n\n.endnote {\n}\n.citation {\n}\n.footnote {\n}\n.endnote-marks, .citation-marks {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\ndl.citation-list > dt, dl.footnote-list > dt {\n  font-size: 0.8em;\n  display: inline-block;\n  vertical-align: 0.3em;\n  margin-top: -0.3em;\n}\n\n.annotation {\n  color: var(--annotation-color);\n}\n.annotation-comment {\n  padding: 3pt 0px;\n  font-weight: 600;\n  font-family: sans-serif;\n}\n.annotation-comment::before {\n  content: '['\n}\n.annotation-comment::after {\n  content: ']'\n}\n.annotation-initials {\n  display: inline-block;\n  margin-right: 0.3em;\n  font-family: sans-serif;\n  font-size: .8em;\n  font-weight: normal;\n  font-style: normal;\n  line-height: .9;\n  padding: .5pt;\n  border: solid .4pt var(--annotation-color);\n  border-radius: 2pt;\n\n  float: right;\n  margin-right: -4em;\n}\n.annotation-0 {\n  --annotation-color: rgb(148,7,24); /* dark red / burgundy */\n}\n.annotation-1 {\n  --annotation-color: rgb(0,148,240); /* blue-y */\n}\n.annotation-2 {\n  --annotation-color: rgb(242,108,13); /* orange-brown-y */\n}\n.annotation-3 {\n  --annotation-color: rgb(65,149,42); /* green-y */\n}\n.annotation-4 {\n  --annotation-color: rgb(128,55,134); /* purple-y */\n}\n.annotation-5 {\n  --annotation-color: rgb(0,129,129); /* blue-green-y */\n}\n.annotation-6 {\n  --annotation-color: rgb(160,120,0); /* brownish */\n}\n.annotation-7 {\n  --annotation-color: rgb(35,195,155); /* aqua-ish */\n}\n\n\n.quote, .address, .blockquote {\n  margin: 1em 0;\n}\n.quote {\n  background: rgba(120, 140, 150, 0.15);\n  padding: 1em 3em;\n}\n.quote .quote-lines,\n.quote .quote-text {\n  font-style: italic;\n  margin: 0.5em 0;\n}\n.quote-attributed {\n  margin: 0.5em 0;\n  text-align: right;\n}\n.quote .quote-attributed::before {\n  content: '';\n}\n.quote-block {\n  padding-left: 1em;\n  border-left: solid 4pt rgba(120, 140, 150, 0.3)  ;\n}\n\n.address .quote-lines {\n  font-size: .933em;\n}\n\n.blockquote {\n  padding: 0 1em;\n}\n\n"},zd=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("html_fragment_renderer"===_)e=r[_]}}return(0,tr.__t__)(e.use_mathjax)?"\nMathJax = {\n    tex: {\n        inlineMath: [['\\\\(', '\\\\)']],\n        displayMath: [['\\\\[', '\\\\]']],\n        processEnvironments: true,\n        processRefs: true,\n\n        // equation numbering on\n        tags: 'ams'\n    },\n    options: {\n        // all MathJax content is marked with CSS classes\n        // skipHtmlTags: 'body',\n        // processHtmlClass: 'display-math|inline-math',\n    },\n    startup: {\n        pageReady: function() {\n            // override the default \"typeset everything on the page\" behavior to\n            // only typeset whatever we have explicitly marked as math\n            return typesetPageMathPromise();\n        }\n    }\n};\nfunction typesetPageMathPromise()\n{\n    var elements = document.querySelectorAll('.display-math, .inline-math');\n    return MathJax.typesetPromise(elements);\n}\n":""},Bd=function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("html_fragment_renderer"===_)e=r[_]}}return(0,tr.__t__)(e.use_mathjax)?'\n<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>\n<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>\n':""},qd=((0,tr.__class__)("FragmentRendererInformation",[tr.object],{__module__:Ld,FragmentRendererClass:Id,get get_style_information(){return function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("fragment_renderer"===_)e=r[_]}}return(0,tr.dict)({css_global:(0,tr.__call__)(Rd,null,e),css_content:(0,tr.__call__)(Fd,null,e),js:(0,tr.__call__)(zd,null,e),body_end_js_scripts:(0,tr.__call__)(Bd,null,e)})}},format_name:"html"}),"flm.fragmentrenderer.text"),Vd=(0,(tr=a("hoVWB")).__class__)("TextFragmentRenderer",[ud],{__module__:qd,display_href_urls:!0,float_separator_top:(0,tr.__mul__)("",80),float_separator_bottom:(0,tr.__mul__)("",80),get render_value(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"render_context":r=n[a]}}}return t}))},get render_delayed_marker(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}return""}))},get render_delayed_dummy_placeholder(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"node":t=a[i];break;case"delayed_key":r=a[i];break;case"render_context":_=a[i]}}}return"#DELAYED#"}))},get render_nothing(){return(0,tr.__get__)(this,(function(e,t,r){if(void 0===r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"render_context":t=n[a];break;case"annotations":r=n[a]}}}return""}))},get render_empty_error_placeholder(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"debug_str":t=n[a];break;case"render_context":r=n[a]}}}return""}))},get render_text_format(){return(0,tr.__get__)(this,(function(e,t,r,_){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"text_formats":t=a[i];break;case"nodelist":r=a[i];break;case"render_context":_=a[i]}}}var o=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,r,_,(0,tr.__kwargtrans__)({is_block_level:!1}))}();return o}))},get render_lines(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"iter_lines_nodelists":t=n[a];break;case"render_context":r=n[a];break;case"role":n[a];break;case"annotations":n[a];break;case"target_id":n[a]}}}var i=function(){for(var _,n,a=[],i=t,o=0;o<(0,tr.len)(i);o++){var l=(0,tr.__getitem__)(i,o);_=void 0,n=void 0,n=a,(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_.render_nodelist,_,l,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!1}))))}return a}();return(0,tr.__call__)("\n".join,"\n",i)}))},get render_enumeration(){return(0,tr.__get__)(this,(function(e,t,r,_){var n=null,a=0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"iter_items_nodelists":t=o[l];break;case"counter_formatter":r=o[l];break;case"render_context":_=o[l];break;case"target_id_generator":o[l];break;case"annotations":n=o[l];break;case"nested_depth":a=o[l]}}}for(var s=[],c=(0,tr.__call__)(tr.enumerate,null,t),u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],p=f[1],h=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,p,(0,tr.__kwargtrans__)({render_context:_,is_block_level:!0}))}(),g=(0,tr.__call__)(r,null,(0,tr.__add__)(1,d));if((0,tr.__t__)(null===g))var v="?";else if((0,tr.__t__)((0,tr.__call__)(tr.isinstance,null,g,tr.str)))v=function(){var t=e;return(0,tr.__call__)(t.render_value,t,g,_)}();else v=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,g,(0,tr.__kwargtrans__)({render_context:_,is_block_level:!1}))}();if((0,tr.__t__)((0,tr.__gt__)(a,0)))v=(0,tr.__add__)((0,tr.__mul__)(" ",(0,tr.__mul__)(4,a)),v);!function(){var e=s;(0,tr.__call__)(e.append,e,(0,tr.tuple)([v,h]))}()}if((0,tr.__t__)(!(0,tr.__t__)(s)))return function(){var t=e;return(0,tr.__call__)(t.render_semantic_block,t,"","enumeration",(0,tr.__kwargtrans__)({render_context:_,annotations:n}))}();var m=(0,tr.__call__)(tr.max,null,function(){for(var e,t=[],r=s,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_),a=n[0];n[1];e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.len,null,a))}return t}());return function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,function(){for(var t,r,a,i,o,l=[],c=s,u=0;u<(0,tr.len)(c);u++){var f=(0,tr.__getitem__)(c,u),d=f[0],p=f[1];t=void 0,r=void 0,a=void 0,i=void 0,o=void 0,o=l,(0,tr.__call__)(o.append,o,(i=e,(0,tr.__call__)(i.render_semantic_block,i,(a=e,(0,tr.__call__)(a.render_join,a,[(r=e,(0,tr.__call__)(r.render_value,r,(0,tr.__add__)((t=d,(0,tr.__call__)(t.rjust,t,(0,tr.__add__)(m,2)," "))," "),_)),p],_)),"enumeration",(0,tr.__kwargtrans__)({render_context:_,annotations:n}))))}return l}(),_)}()}))},heading_level_formatter:(0,tr.dict)({1:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"{}\n{}".format(e,(0,tr.__mul__)("=",(0,tr.__call__)(tr.len,null,e)))},2:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"{}\n{}".format(e,(0,tr.__mul__)("-",(0,tr.__call__)(tr.len,null,e)))},3:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"{}\n{}".format(e,(0,tr.__mul__)("~",(0,tr.__call__)(tr.len,null,e)))},4:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"{}  ".format((0,tr.__call__)(Gd,null,e,":"))},5:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"    {}  ".format((0,tr.__call__)(Gd,null,e,":"))},6:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"        {}  ".format((0,tr.__call__)(Gd,null,e,":"))},theorem:function(e){if(arguments.length){var t=arguments.length-1;if(arguments[t]&&arguments[t].hasOwnProperty("__kwargtrans__")){var r=arguments[t--];for(var _ in r)if("s"===_)e=r[_]}}return"{}.  ".format(e)}}),get render_heading(){return(0,tr.__get__)(this,(function(e,t,r){var _=1;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"heading_nodelist":t=a[i];break;case"render_context":r=a[i];break;case"heading_level":_=a[i];break;case"inline_heading":a[i];break;case"target_id":a[i];break;case"annotations":a[i]}}}var o=function(){var _=e;return(0,tr.__call__)(_.render_inline_content,_,t,r)}();if((0,tr.__t__)((0,tr.__in__)(_,e.heading_level_formatter))){var l=(0,tr.__getitem__)(e.heading_level_formatter,_);return(0,tr.__call__)(l,null,o)}var s=(0,tr.__call__)(tr.ValueError,null,"Bad heading_level={}, expected 1..6 (or key in fragment_renderer.heading_level_formatter)".format(_));throw s.__cause__=null,s}))},get render_verbatim(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"value":t=n[a];break;case"render_context":r=n[a];break;case"is_block_level":n[a];break;case"annotations":n[a];break;case"target_id":n[a]}}}return t}))},get render_link(){return(0,tr.__get__)(this,(function(e,t,r,_,n,a){if(void 0===a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var o=arguments[i--];for(var l in o)switch(l){case"self":e=o[l];break;case"ref_type":t=o[l];break;case"href":r=o[l];break;case"display_nodelist":_=o[l];break;case"render_context":n=o[l];break;case"annotations":a=o[l]}}}var s=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,_,(0,tr.__kwargtrans__)({render_context:n,is_block_level:!1}))}();return(0,tr.__t__)((0,tr.__t__)(e.display_href_urls)&&!(0,tr.__t__)(function(){var e=r;return(0,tr.__call__)(e.startswith,e,"#")}()))?"{} <{}>".format(s,r):s}))},float_caption_title_separator:": ",get render_float(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"float_instance":t=n[a];break;case"render_context":r=n[a]}}}var i=[];(0,tr.__t__)(null!==t.counter_value)?function(){var _,n,a=i;(0,tr.__call__)(a.append,a,(n=e,(0,tr.__call__)(n.render_join,n,[t.float_type_info.float_caption_name,"",(_=e,(0,tr.__call__)(_.render_nodelist,_,t.formatted_counter_value_flm.nodes,(0,tr.__kwargtrans__)({render_context:r})))],r)))}():(0,tr.__t__)(t.caption_nodelist)&&function(){var e=i;(0,tr.__call__)(e.append,e,t.float_type_info.float_caption_name)}(),(0,tr.__t__)(t.caption_nodelist)&&(function(){var t=i;(0,tr.__call__)(t.append,t,e.float_caption_title_separator)}(),function(){var _,n=i;(0,tr.__call__)(n.append,n,(_=e,(0,tr.__call__)(_.render_nodelist,_,t.caption_nodelist,(0,tr.__kwargtrans__)({render_context:r}))))}());var o=null;if((0,tr.__t__)(i))o=function(){var t=e;return(0,tr.__call__)(t.render_join,t,i,r)}();var l=function(){var _=e;return(0,tr.__call__)(_.render_nodelist,_,t.content_nodelist,(0,tr.__kwargtrans__)({render_context:r,is_block_level:!0}))}();if((0,tr.__t__)(null!==o))var s=function(){var t=e;return(0,tr.__call__)(t.render_join_blocks,t,[l,o],r)}();else s=l;return(0,tr.__add__)((0,tr.__add__)((0,tr.__add__)((0,tr.__add__)(e.float_separator_top,"\n"),s),"\n"),e.float_separator_bottom)}))},get render_graphics_block(){return(0,tr.__get__)(this,(function(e,t,r){if(arguments.length){var _=arguments.length-1;if(arguments[_]&&arguments[_].hasOwnProperty("__kwargtrans__")){var n=arguments[_--];for(var a in n)switch(a){case"self":e=n[a];break;case"graphics_resource":t=n[a];break;case"render_context":r=n[a]}}}return"{}".format((0,tr.__add__)((0,tr.__add__)("[",t.src_url),"]"))}))},cells_column_sep:"   ",get render_cells(){return(0,tr.__get__)(this,(function(e,t,r,_){if(void 0===_||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var a=arguments[n--];for(var i in a)switch(i){case"self":e=a[i];break;case"cells_model":t=a[i];break;case"render_context":r=a[i];break;case"target_id":_=a[i]}}}for(var o=[],l=t.cells_data,s=0;s<(0,tr.len)(l);s++){var c=(0,tr.__getitem__)(l,s),u=function(){var t=e;return(0,tr.__call__)(t.render_nodelist,t,c.content_nodes,(0,tr.__kwargtrans__)({render_context:r}))}(),f=function(){var e=u;return(0,tr.__call__)(e.py_split,e,"\n")}(),d=!1;if((0,tr.__t__)((0,tr.__in__)("H",c.styles)))d=!0;!function(){var e=o;(0,tr.__call__)(e.append,e,(0,tr.dict)({cell:c,rendered_contents_lines:f,width:(0,tr.__call__)(tr.max,null,function(){for(var e,t=[],r=f,_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,(0,tr.__call__)(tr.len,null,n))}return t}()),is_header:d}))}()}var p=[];for(l=o,s=0;s<(0,tr.len)(l);s++){var h=(0,tr.__getitem__)(l,s);!function(){var e=p;(0,tr.__call__)(e.append,e,(0,tr.__call__)("\n".join,"\n",function(){for(var e,t=[],r=(0,tr.__getitem__)(h,"rendered_contents_lines"),_=0;_<(0,tr.len)(r);_++){var n=(0,tr.__getitem__)(r,_);e=void 0,e=t,(0,tr.__call__)(e.append,e,"    {}".format(n))}return t}()))}()}return(0,tr.__call__)("\n".join,"\n",p)}))}}),Gd=function(e,t){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var _=arguments[r--];for(var n in _)switch(n){case"x":e=_[n];break;case"c":t=_[n]}}}e=(0,tr.__call__)(tr.str,null,e);return(0,tr.__t__)((0,tr.__in__)((0,tr.__getslice__)(function(){var t=e;return(0,tr.__call__)(t.rstrip,t)}(),(0,tr.__neg__)(1),null,1),".,:;?!"))?e:(0,tr.__add__)(e,t)};(0,tr.__class__)("FragmentRendererInformation",[tr.object],{__module__:qd,FragmentRendererClass:Vd,format_name:"text"});(0,tr.__class__)("ZooHtmlFragmentRenderer",[Id],{inline_heading_add_space:!1,html_blocks_joiner:"",get use_link_target_blank(){return(0,tr.__get__)(this,(function(e,t){return!function(e){return e.startsWith("#")||e.startsWith("/")&&!e.startsWith("//")||e.startsWith("javascript:")}(t)}))},get render_error_info_message(){return(0,tr.__get__)(this,(function(e,t){if(!t)return"[FLM Error; no information provided]";const r=new U_(t.error_object),_=Object.assign({},t,{error_object:null});return`<pre class="flm-error-message" data-flm-error-info="${JSON.stringify(_)}"><span class="flm-error-message-lead">Error: ${t.msg}</span>\n<span class="flm-error-message-traceback">${r.format_full_traceback()}</pre>`}))}});const Ud=(0,tr.__class__)("ZooTextFragmentRenderer",[Vd],{display_href_urls:!1,float_separator_top:"[figure]",float_separator_bottom:""});function $d(e){try{const t=new Ud;return e.render_standalone(t)}catch(e){throw Wd(e),e}}function Wd(e){const t=nr(e);console.error("\n FLM RENDERING ERROR \n\n"+t,e)}s=a("3krpC");var Hd=/["'&<>]/;tr=a("hoVWB");r(s)("zoodb.zooflm._renderutils");const Yd=r(s)("zoodb.std.use_flm_environment");function Xd(e){const t=e.config.flm_options??{},r=t.environment_options??{},_=new ad(r);return null!=_.ref_resolver&&(_.ref_resolver.target_href_resolver=(t,r)=>function(e,t,{zoo_object_permalink:r}){const{target_href:_,ref_type:n,ref_label:a}=e??{};if(null!=_){const e=new URL(_);if("zoodbobjectref:"==e.protocol){const t=e.pathname.replace(/^\/+/,""),[_,n]=function(e){const t=e.indexOf(":");return-1==t?[null,e]:[e.slice(0,t),e.slice(t+1)]}(t);return r(_,n)+e.hash}return _}throw new Error(`Cannot resolve link reference to ${n}:${a}`)}(t,0,{zoo_object_permalink:e.zoo_object_permalink})),t.allow_unresolved_references&&null!=_.feature_refs&&_.feature_refs.add_external_ref_resolver({get_ref:(e,t)=>(Yd(`Default ref_resolver called for invalid reference ${e}:${t}`),Jf(e,t,"<??>",null))}),t.allow_unresolved_citations&&null!=_.feature_citations&&_.feature_citations.add_external_citations_provider({get_citation_full_text_flm:(e,t)=>(Yd(`Note: unresolved citation ${e}:${t}`),`\\begin{verbatimtext}${e}:${t}\\end{verbatimtext}`)}),null!=_.graphics_collection&&(_.graphics_collection.src_url_resolver_fn=({graphics_resource:r})=>{const _=e.config.zoo_permalinks.graphics_resource(r);let n;if(t.resources?.graphics_use_srcset_parceljs&&t.resources.graphics_use_srcset_parceljs.enabled){let{pixel_density_list:e,image_max_zoom_factor:a}=t.resources.graphics_use_srcset_parceljs;if("raster"==r.graphics_type){const[t,i]=r.pixel_dimensions;if(!e){let t=Math.floor(a);e=Array(t).fill().map(((e,t)=>t+1))}let o=[];for(const _ of e){const e=96*_;if(e>=r.dpi)break;o.push({factor:_,width:Math.round(t*e/r.dpi),height:Math.round(i*e/r.dpi)})}n=o.map((({factor:e,width:t,height:r})=>({source:`${_}?`+new URLSearchParams({as:"webp",width:t,height:r}).toString(),pixel_density:e}))),Yd(`built parceljs-compatible srcset for ${_}  `+n.map((({source:e,pixel_density:t})=>`${e} ${t}x`)).join(", "))}}return{src_url:_,srcset:n}}),e.$$kw=er,_}s=a("3krpC");const Zd={object:function(e,t){if("code"===e)return`/c/${t}`;if("domain"===e)return`/domain/${t}`;if("kingdom"===e)return`/kingdom/${t}`;if("user"===e)return`/team#u-${t}`;if("codelist"===e)return"all"===t?"/all":`/list/${t}`;throw new Error(`Unknown object type ${e}`)},graphics_resource:function(e){return`/fig/${e.src_url}`}};s=a("3krpC");var Kd,Jd={},Qd={};Qd=function(e,t){for(var r=-1,_=null==e?0:e.length;++r<_&&!1!==t(e[r],r,e););return e};var ep={},tp={},rp={},_p={},np=Ve(Object.keys,Object);_p=np;var ap=Object.prototype.hasOwnProperty;rp=function(e){if(!Ue(e))return _p(e);var t=[];for(var r in Object(e))ap.call(e,r)&&"constructor"!=r&&t.push(r);return t},tp=function(e){return rt(e)?xt(e):rp(e)},ep=function(e,t){return e&&yt(t,tp(t),e)};var ip={};ip=function(e,t){return e&&yt(t,kt(t),e)};Te=a("4N7g8");var op={},lp={},sp={};sp=function(e,t){for(var r=-1,_=null==e?0:e.length,n=0,a=[];++r<_;){var i=e[r];t(i,r,e)&&(a[n++]=i)}return a};var cp;cp=function(){return[]};var up=Object.prototype.propertyIsEnumerable,fp=Object.getOwnPropertySymbols;lp=fp?function(e){return null==e?[]:(e=Object(e),sp(fp(e),(function(t){return up.call(e,t)})))}:cp,op=function(e,t){return yt(e,lp(e),t)};var dp={},pp={},hp={};hp=function(e,t){for(var r=-1,_=t.length,n=e.length;++r<_;)e[n+r]=t[r];return e};var gp=Object.getOwnPropertySymbols;pp=gp?function(e){for(var t=[];e;)hp(t,lp(e)),e=qe(e);return t}:cp,dp=function(e,t){return yt(e,pp(e),t)};var vp={},mp={};mp=function(e,t,r){var _=t(e);return Qe(e)?_:hp(_,r(e))},vp=function(e){return mp(e,tp,lp)};var yp;yp=function(e){return mp(e,kt,pp)};var wp={},bp={};te=a("kLIqa");bp=A(te,"DataView");var kp={};te=a("kLIqa");kp=A(te,"Promise");var xp={};te=a("kLIqa");xp=A(te,"Set");var Op={};te=a("kLIqa");Op=A(te,"WeakMap");var Pp="[object Map]",Ep="[object Promise]",Cp="[object Set]",Ap="[object WeakMap]",Sp="[object DataView]",Np=W(bp),Tp=W(C),Lp=W(kp),Mp=W(xp),jp=W(Op),Ip=T;(bp&&Ip(new bp(new ArrayBuffer(1)))!=Sp||C&&Ip(new C)!=Pp||kp&&Ip(kp.resolve())!=Ep||xp&&Ip(new xp)!=Cp||Op&&Ip(new Op)!=Ap)&&(Ip=function(e){var t=T(e),r="[object Object]"==t?e.constructor:void 0,_=r?W(r):"";if(_)switch(_){case Np:return Sp;case Tp:return Pp;case Lp:return Ep;case Mp:return Cp;case jp:return Ap}return t}),wp=Ip;var Dp={},Rp=Object.prototype.hasOwnProperty;Dp=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Rp.call(e,"index")&&(r.index=e.index,r.input=e.input),r};var Fp={},zp={};zp=function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)};var Bp={},qp=/\w*$/;Bp=function(e){var t=new e.constructor(e.source,qp.exec(e));return t.lastIndex=e.lastIndex,t};var Vp={},Gp=E?E.prototype:void 0,Up=Gp?Gp.valueOf:void 0;Vp=function(e){return Up?Object(Up.call(e)):{}};Fp=function(e,t,r){var _=e.constructor;switch(t){case"[object ArrayBuffer]":return Me(e);case"[object Boolean]":case"[object Date]":return new _(+e);case"[object DataView]":return zp(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Le(e,r);case"[object Map]":case"[object Set]":return new _;case"[object Number]":case"[object String]":return new _(e);case"[object RegExp]":return Bp(e);case"[object Symbol]":return Vp(e)}};nt=a("4a4bO");var $p,Wp={};$p=function(e){return Ye(e)&&"[object Map]"==wp(e)};var Hp=(Kp=a("3tQok"))&&Kp.isMap,Yp=Hp?pt(Hp):$p;Wp=Yp;var Xp,Zp={};Xp=function(e){return Ye(e)&&"[object Set]"==wp(e)};var Kp,Jp=(Kp=a("3tQok"))&&Kp.isSet,Qp=Jp?pt(Jp):Xp;Zp=Qp;var eh="[object Arguments]",th="[object Function]",rh="[object Object]",_h={};_h[eh]=_h["[object Array]"]=_h["[object ArrayBuffer]"]=_h["[object DataView]"]=_h["[object Boolean]"]=_h["[object Date]"]=_h["[object Float32Array]"]=_h["[object Float64Array]"]=_h["[object Int8Array]"]=_h["[object Int16Array]"]=_h["[object Int32Array]"]=_h["[object Map]"]=_h["[object Number]"]=_h[rh]=_h["[object RegExp]"]=_h["[object Set]"]=_h["[object String]"]=_h["[object Symbol]"]=_h["[object Uint8Array]"]=_h["[object Uint8ClampedArray]"]=_h["[object Uint16Array]"]=_h["[object Uint32Array]"]=!0,_h["[object Error]"]=_h[th]=_h["[object WeakMap]"]=!1,Jd=function e(t,r,_,n,a,i){var o,l=1&r,s=2&r,c=4&r;if(_&&(o=a?_(t,n,a,i):_(t)),void 0!==o)return o;if(!B(t))return t;var f=Qe(t);if(f){if(o=Dp(t),!l)return De(t,o)}else{var d=wp(t),p=d==th||"[object GeneratorFunction]"==d;if(nt(t))return Te(t,l);if(d==rh||d==eh||p&&!a){if(o=s||p?{}:Re(t),!l)return s?dp(t,ip(o,t)):op(t,ep(o,t))}else{if(!_h[d])return a?t:{};o=Fp(t,d,l)}}i||(i=new u);var h=i.get(t);if(h)return h;i.set(t,o),Zp(t)?t.forEach((function(n){o.add(e(n,r,_,n,t,i))})):Wp(t)&&t.forEach((function(n,a){o.set(a,e(n,r,_,a,t,i))}));var g=f?void 0:(c?s?yp:vp:s?kt:tp)(t);return Qd(g||t,(function(n,a){g&&(n=t[a=n]),wt(o,a,e(n,r,_,a,t,i))})),o};Kd=function(e){return Jd(e,5)};var nh;nh=function(e,t){return Jd(e,5,t="function"==typeof t?t:void 0)};var ah,ih=Lt((function(e,t,r,_){yt(t,tp(t),e,_)}));function oh(e,t,r={}){let{only_schema_properties:_,create_object:n,create_array:a}=r;if(_??=!1,n??=()=>({}),a??=()=>[],null==e)return e;if("object"==t.type){let a=n();const i=t.properties??{},o=_?Object.keys(i):Object.keys(e);for(const _ of o){const n=i[_]??t.additionalProperties??{},o=e[_];a[_]=oh(o,n,r)}return a}if("array"==t.type){let _=a();const n=t.items??{};for(let t=0;t<e.length;++t)_.push(oh(e[t],n,r));return _}return e}ah=ih;const lh=r(s)("zoodb._zoodb");function sh(e){return r(nh)(e,(e=>{if("object"==typeof e){if(null===e)return null;if(e instanceof Array)return;return r(ah)(Object.create(null),e,((e,t)=>sh(t)))}}))}class ch{constructor({processors:e,schema_validator:t,normalize_id_for_uniqueness_check:r,silent:_}){this.processors=e??[],this.processors_initialized=!1,this.silent=_??!1;for(const e of this.processors)e.install_zoo(this);if(this.raw_data_db={schemas:{},objects:{}},this.schema_validator=t??null,null==this.schema_validator)throw new Error("No schema validator set on this ZooDb to perform schema validation. To suppress this error and proceed without schema validation, use the value false for the schema_validator argument.");this.normalize_id_for_uniqueness_check=r??(e=>(""+e).toLowerCase()),this.zoo_loader_handler=null,this.db={},this.scratch={}}schema(e){if(!Object.hasOwn(this.db.schemas,e))throw new Error(`No zoo schema associated with object type ${e}`);return this.db.schemas[e]}get object_types(){return Object.keys(this.db.objects)}get schemas(){return this.db.schemas}get objects(){return this.db.objects}async load_schemas({schemas:e}){this.raw_data_db.schemas=r(Kd)(e),this.db.schemas=sh(e),lh(`Loaded db schemas (${Object.keys(this.db.schemas).join(", ")})`)}async load_data(e){if(lh("zoodb load_data"),!e||"object"!=typeof e||null!=e.schemas&&"object"!=typeof e.schemas||null!=e.objects&&"object"!=typeof e.objects||null==e.objects&&null==e.schemas)throw new Error(`Invalid zoo DB data, expected db.schemas and/or db.objects to be objects, got db=${e}`);if(null!=e.schemas&&Object.keys(e.schemas).length>0&&await this.load_schemas({schemas:e.schemas}),null!=e.objects&&0!=Object.keys(e.objects).length){if(null==this.db.schemas)throw new Error("No schemas loaded. It looks like you forgot to load  the schemas before loading the object data");for(const t in e.objects??{})if(null==this.db.schemas[t])throw new Error(`No schema loaded for objects of type ${t}. It looks like you forgot to load schemas for this object type.`);if(this.raw_data_db.objects=r(Kd)(e.objects),this.db.objects=sh(e.objects),this._object_types=Object.keys(this.db.objects),this._sanitize_raw_object_db(this.db.objects),!this.processors_initialized){this.processors_initialized=!0;for(const e of this.processors)await e.initialize_zoo()}for(const e of this.processors)await e.process_zoo();lh("zoodb load_data done.")}else lh("No objects to load at this time.")}async validate(){for(const[e,t]of Object.entries(this.db.objects)){let r={},_=this.normalize_id_for_uniqueness_check;for(const[n,a]of Object.entries(t)){const t=_(n),i=r[t];if(void 0!==i)throw new Error(`ID ${n} was assigned to multiple objects of type  ${e} (duplicate ID), ${this.display_object_source(i)} and ${this.display_object_source(a)} [normalized ID ${t}]`);r[t]=a}}}display_object_source(e){const t=e._zoodb;if(t){if(t.source_file_path)return`in file ${t.source_file_path}`;if(t.source_url)return`at ${t.source_url}`;if(t.id)return`with ID ${t.id}`}return"(unknown source)"}async install_zoo_loader_handler(e){if(null!=e){if(null!=this.zoo_loader_handler)throw new Error("There is already a loader handler installed.");this.zoo_loader_handler=e,await this.zoo_loader_handler.initialize(this)}else this.zoo_loader_handler=null}async load(e={}){if(null==this.zoo_loader_handler)throw new Error("No zoo loader installed, use ZooDb.install_zoo_loader_handler() to set one");await this.zoo_loader_handler.load(e)}_sanitize_raw_object({object_type:e,object_id:t,object:r}){const _=Object.assign({},r);delete _._zoodb;const n=this.schemas[e];if(this.schema_validator){const a=this.schema_validator.validate(_,n);if(!a.valid){const n="*** "+a.errors.map((t=>(""+t).replace(/^instance\b/,(()=>`[${e.toUpperCase()}]`)))).join("\n*** ");let i="";t&&(i=` with ID ${t}`),r._zoodb?.source_file_path&&(i=` in ${r._zoodb.source_file_path}`);let o=`Schema validation failed for <${e}> object data${i}:\n\n${n}\n`;this.silent||(console.log("Validation failed for data:",_),console.error(o));let l=new Error(o);throw l.error_info={error_type:"schema_validation_failure",validation_result:a},l}}if(r._zoodb??={},r._zoodb.id||(r._zoodb.id=t),r._zoodb.id!=t)throw new Error(`Detected inconsistency in object ID: database key is ${t} but internal ID field is ${r._zoodb.id}`)}_sanitize_raw_object_db(e){for(const[t,r]of Object.entries(e))for(const[e,_]of Object.entries(r))this._sanitize_raw_object({object_type:t,object_id:e,object:_})}async update_objects(e){for(const[t,_]of Object.entries(e))for(const[n]of Object.entries(_))this.raw_data_db.objects[t][n]=r(Kd)(e[t][n]);for(const t of this.processors)await t.prepare_zoo_update_objects(e);for(const[t,r]of Object.entries(e))for(const[e,_]of Object.entries(r))this.update_object({object_db:this.db.objects[t],object_type:t,object_id:e,new_object:_});for(const t of this.processors)await t.process_zoo_update_objects(e)}update_object({object_db:e,object_type:t,object_id:r,new_object:_}){this._sanitize_raw_object({object_id:r,object_type:t,object:_}),e[r]=_}async data_dump(e={}){let{use_raw_db_data:t,skip_db_processors:_,remove_zoodb_id:n,remove_zoodb_info:a}=e;t??=!1,_??=!1,n??=!1,a??=!1;let i={};if(t)return i.db=this.raw_data_db,i;i.db={objects:{},schemas:r(Kd)(this.db.schemas)};for(const[e,t]of Object.entries(this.db.objects)){i.db.objects[e]={};const _=this.db.schemas[e];for(const[n,a]of Object.entries(t)){let t=oh(a,_);t._zoodb=r(Kd)(a._zoodb),i.db.objects[e][n]=t}}if(!_)for(const t of Array.from(this.processors).reverse())i=await t.process_data_dump(i,e);if(n)for(const[,e]of Object.entries(i.db.objects))for(const[,t]of Object.entries(e)){delete t._zoodb.id}if(a)for(const[,e]of Object.entries(i.db.objects))for(const[,t]of Object.entries(e))delete t._zoodb;return i}}r(s=a("3krpC"))("zoodb._zoodbloaderhandler");s=a("3krpC");var uh,fh,dh,ph,hh,gh,vh,mh,yh={};t(yh,"Validator",(()=>uh),(e=>uh=e)),t(yh,"ValidatorResult",(()=>fh),(e=>fh=e)),t(yh,"ValidatorResultError",(()=>dh),(e=>dh=e)),t(yh,"ValidationError",(()=>ph),(e=>ph=e)),t(yh,"SchemaError",(()=>hh),(e=>hh=e)),t(yh,"SchemaScanResult",(()=>gh),(e=>gh=e)),t(yh,"scan",(()=>vh),(e=>vh=e)),t(yh,"validate",(()=>mh),(e=>mh=e));var wh=uh=a("lMHab");fh=a("bzZym").ValidatorResult,dh=a("bzZym").ValidatorResultError,ph=a("bzZym").ValidationError,hh=a("bzZym").SchemaError,gh=a("hcZ9I").SchemaScanResult,vh=a("hcZ9I").scan,mh=function(e,t,r){return(new wh).validate(e,t,r)};ar=a("2R1eR");var bh,kh={},xh=a("3M269").Buffer,Oh=kh&&kh.__createBinding||(Object.create?function(e,t,r,_){void 0===_&&(_=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,_,n)}:function(e,t,r,_){void 0===_&&(_=r),e[_]=t[r]}),Ph=kh&&kh.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Eh=kh&&kh.__importStar||(bh=function(e){return bh=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},bh(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=bh(e),_=0;_<r.length;_++)"default"!==r[_]&&Oh(t,e,r[_]);return Ph(t,e),t}),Ch=kh&&kh.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kh,"__esModule",{value:!0}),kh.getJsonSchemaRefParserDefaultOptions=kh.jsonSchemaParserNormalizeArgs=kh.dereferenceInternal=kh.JSONParserErrorGroup=kh.isHandledError=kh.UnmatchedParserError=kh.ParserError=kh.ResolverError=kh.MissingPointerError=kh.InvalidPointerError=kh.JSONParserError=kh.UnmatchedResolverError=kh.dereference=kh.bundle=kh.resolve=kh.parse=kh.$RefParser=void 0;const Ah=Ch(a("5NijP")),Sh=Ch(a("1FCt6")),Nh=Ch(a("dlWR1"));kh.jsonSchemaParserNormalizeArgs=Nh.default;const Th=Ch(a("hBMkZ")),Lh=Ch(a("7UBq0")),Mh=Ch(a("ftePO"));kh.dereferenceInternal=Mh.default;const jh=Eh(a("b9BWf"));var Ih=a("l8NiV");Object.defineProperty(kh,"JSONParserError",{enumerable:!0,get:function(){return Ih.JSONParserError}}),Object.defineProperty(kh,"InvalidPointerError",{enumerable:!0,get:function(){return Ih.InvalidPointerError}}),Object.defineProperty(kh,"MissingPointerError",{enumerable:!0,get:function(){return Ih.MissingPointerError}}),Object.defineProperty(kh,"ResolverError",{enumerable:!0,get:function(){return Ih.ResolverError}}),Object.defineProperty(kh,"ParserError",{enumerable:!0,get:function(){return Ih.ParserError}}),Object.defineProperty(kh,"UnmatchedParserError",{enumerable:!0,get:function(){return Ih.UnmatchedParserError}}),Object.defineProperty(kh,"UnmatchedResolverError",{enumerable:!0,get:function(){return Ih.UnmatchedResolverError}}),Object.defineProperty(kh,"isHandledError",{enumerable:!0,get:function(){return Ih.isHandledError}}),Object.defineProperty(kh,"JSONParserErrorGroup",{enumerable:!0,get:function(){return Ih.JSONParserErrorGroup}}),a("58l9B");var Dh=a("jU2th");const Rh=Ch(a("cfZ0q"));var Fh=a("h1anm");Object.defineProperty(kh,"getJsonSchemaRefParserDefaultOptions",{enumerable:!0,get:function(){return Fh.getJsonSchemaRefParserDefaultOptions}});class zh{constructor(){this.schema=null,this.$refs=new Ah.default}async parse(){const e=(0,Nh.default)(arguments);let t;if(!e.path&&!e.schema){const t=(0,Dh.ono)(`Expected a file path, URL, or object. Got ${e.path||e.schema}`);return(0,Rh.default)(e.callback,Promise.reject(t))}this.schema=null,this.$refs=new Ah.default;let r="http";if(jh.isFileSystemPath(e.path))e.path=jh.fromFileSystemPath(e.path),r="file";else if(!e.path&&e.schema&&"$id"in e.schema&&e.schema.$id){const t=jh.parse(e.schema.$id),r="https:"===t.protocol?443:80;e.path=`${t.protocol}//${t.hostname}:${r}`}if(e.path=jh.resolve(jh.cwd(),e.path),e.schema&&"object"==typeof e.schema){const _=this.$refs._add(e.path);_.value=e.schema,_.pathType=r,t=Promise.resolve(e.schema)}else t=(0,Sh.default)(e.path,this.$refs,e.options);try{const r=await t;if(null===r||"object"!=typeof r||xh.isBuffer(r)){if(e.options.continueOnError)return this.schema=null,(0,Rh.default)(e.callback,Promise.resolve(this.schema));throw Dh.ono.syntax(`"${this.$refs._root$Ref.path||r}" is not a valid JSON Schema`)}return this.schema=r,(0,Rh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return e.options.continueOnError&&(0,Ih.isHandledError)(t)?(this.$refs._$refs[jh.stripHash(e.path)]&&this.$refs._$refs[jh.stripHash(e.path)].addError(t),(0,Rh.default)(e.callback,Promise.resolve(null))):(0,Rh.default)(e.callback,Promise.reject(t))}}static parse(){const e=new zh;return e.parse.apply(e,arguments)}async resolve(){const e=(0,Nh.default)(arguments);try{return await this.parse(e.path,e.schema,e.options),await(0,Th.default)(this,e.options),Bh(this),(0,Rh.default)(e.callback,Promise.resolve(this.$refs))}catch(t){return(0,Rh.default)(e.callback,Promise.reject(t))}}static resolve(){const e=new zh;return e.resolve.apply(e,arguments)}static bundle(){const e=new zh;return e.bundle.apply(e,arguments)}async bundle(){const e=(0,Nh.default)(arguments);try{return await this.resolve(e.path,e.schema,e.options),(0,Lh.default)(this,e.options),Bh(this),(0,Rh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return(0,Rh.default)(e.callback,Promise.reject(t))}}static dereference(){const e=new zh;return e.dereference.apply(e,arguments)}async dereference(){const e=(0,Nh.default)(arguments);try{return await this.resolve(e.path,e.schema,e.options),(0,Mh.default)(this,e.options),Bh(this),(0,Rh.default)(e.callback,Promise.resolve(this.schema))}catch(t){return(0,Rh.default)(e.callback,Promise.reject(t))}}}function Bh(e){if(Ih.JSONParserErrorGroup.getParserErrors(e).length>0)throw new Ih.JSONParserErrorGroup(e)}kh.$RefParser=zh,kh.default=zh,kh.parse=zh.parse,kh.resolve=zh.resolve,kh.bundle=zh.bundle,kh.dereference=zh.dereference;var qh=a("94hgF");s=a("3krpC");const Vh=e=>function(...t){return new Promise(((r,_)=>{e(...t,((e,...t)=>{null!=e?_(e):r(...t)}))}))};function Gh(e,t=null){let r={};for(const _ of t??Object.keys(e))r[_]=e.promises?.[_]||(null!=e[_]?Vh(e[_]):null);return r}ar=a("2R1eR");function Uh(e,{fs_root_path:t}={}){var _;return function(e){return"xyzdummyproto:"!==new URL(e,"xyzdummyproto://example.com/").protocol}(e)||(t&&(e=r(ar).join(t,e)),e=`file:${_=e,_.split("/").map((e=>encodeURIComponent(e))).join("/")}`),new URL(e)}const $h=r(s)("zoodb.schemaloader");class Wh{constructor(e){if(this.config=Object.assign({},e??{}),this.config.schemas=Object.assign({},this.config.schemas),this.schema_names=e.schema_names,this.fs=this.config.fs,this.fsPromises=this.fs.promises??Gh(this.fs,["readFile","readdir"]),!this.config.schemas.schema_root)throw new Error("You did not specify a schema_root: in your config!");this.config.schemas.schema_root=Uh(this.config.schemas.schema_root),this.config.schemas.schema_root=new URL(this.config.schemas.schema_root).href,this.config.schemas.schema_root.endsWith("/")||(this.config.schemas.schema_root+="/"),$h(`Using schema_root = ${this.config.schemas.schema_root}`),this.schemas_by_name={},this.schema_ref_parser=r(kh);let t=this.config,_=this.fsPromises;this.schema_refparser_resolver={...r(qh),order:1,canRead:()=>!0,async read(e){$h(`schema_refparser_resolver.read(), url ${e.url}`);let n=e.url;try{n=n.replace(/^fspath:/,"file:"),n.startsWith("file://")&&!n.startsWith(t.schemas.schema_root)&&(n=new URL(n).pathname.substring(1));let e=new URL(n,t.schemas.schema_root).href;e.startsWith(t.schemas.schema_root)&&!e.endsWith(t.schemas.schema_add_extension)&&(e+=t.schemas.schema_add_extension);const a={url:e,extension:r(ar).extname(e)},i=new URL(a.url),o=i.protocol;if("file:"==o){const e=decodeURIComponent(i.pathname);$h(`Resolved schema URL ${n}  ${e} on filesystem`);return await _.readFile(e,{encoding:"utf-8"})}return $h(`Resolved schema URL ${n}  URL ${a.url} [extension=${a.extension} protocol=${o}]`),await r(qh).read(a)}catch(e){throw console.error(`Error reading ${n}: ${e}`),e}}}}async load_schemas(){$h(`Loading schemas in ${this.config.schemas.schema_root} ...`);let e={},t=this.schema_names;if(null==t){const e=new URL(this.config.schemas.schema_root);if("file:"!==e.protocol)throw new Error("schema_names is not set but schema_root is not a filesystem path");let _=decodeURIComponent(e.pathname);_=r(ar).join(_,this.config.schemas.schema_rel_path);const n=this.config.schemas.schema_add_extension;t=[],$h(`Listing contents of ${_} and looking for files ending in ${n}`);for(const e of await this.fs.promises.readdir(_))e.endsWith(n)&&t.push(e.slice(0,-n.length))}$h(`Loading schema names: ${t.join(", ")}`);for(const r of t)e[r]=await this.load_schema_by_name(r),$h(`Loaded schema ${r}`);return{schemas:e}}async load_schema_by_name(e){if(Object.hasOwn(this.schemas_by_name,e))return this.schemas_by_name[e];let t=r(ar).posix.join(this.config.schemas.schema_rel_path,e),_=new URL(t,this.config.schemas.schema_root).href;$h(`Requesting schema for ${e}  path=${_}`),_.startsWith("file://")&&(_=_.replace(/^file:/,"fspath:"));const n=await this.schema_ref_parser.dereference(_,{resolve:{file:!1,http:!1,myresolver:this.schema_refparser_resolver}});return this.schemas_by_name[e]=n,n}}const Hh=r(s)("zoodb.std.stdzoodb");async function Yh(e){let t={};if(t.config=r(o)({ZooDbClass:ch,SchemaLoaderClass:Wh,continue_with_errors:!1,fs:null,fs_data_dir:null,use_relations_populator:null,use_gitlastmodified_processor:null,use_flm_environment:null,use_flm_processor:null,flm_options:{environment_options:null,refs:{},citations:{csl_style:null,override_arxiv_dois_file:null,preset_bibliography_files:[],default_user_agent:null},allow_unresolved_references:!1,allow_unresolved_citations:!1,resources:{rename_figure_template:null,figure_filename_extensions:null,graphics_resources_fs_data_dir:null,resource_file_extensions:null,graphics_use_srcset_parceljs:{enabled:!1,pixel_density_list:null,image_max_zoom_factor:4}}},use_searchable_text_processor:null,extra_db_processors:{},custom_zoodb_properties:{},searchable_text_options:{object_types:[]},zoo_permalinks:null,schemas:{schema_root:null,schema_rel_path:null,schema_add_extension:null},schema_names:null},e),Hh("makeStandardZooDb: Using config =",t.config),Hh("StandardZooDb: config's flm_options are =",t.config.flm_options),null==t.config.zoo_permalinks)throw new Error("StandardZooDb: The zoo_permalinks: config property is not set");if(t.zoo_permalinks=Object.assign({},t.config.zoo_permalinks),t.zoo_object_permalink=t.zoo_permalinks.object,t.zoo_flm_environment=null,t.config.use_flm_environment&&(t.zoo_flm_environment=await t.config.use_flm_environment(t)),t.zoodb_processors=[],t.zoodb_named_processors={},t.config.use_relations_populator?(t.zoo_relations_populator=await t.config.use_relations_populator(t),t.zoodb_named_processors.zoo_relations_populator=t.zoo_relations_populator,t.zoodb_processors.push(t.zoo_relations_populator)):t.zoo_relations_populator=null,t.config.use_gitlastmodified_processor?(t.zoo_gitlastmodified_processor=await t.config.use_gitlastmodified_processor(t),t.zoodb_named_processors.zoo_gitlastmodified_processor=t.zoo_gitlastmodified_processor,t.zoodb_processors.push(t.zoo_gitlastmodified_processor)):t.zoo_gitlastmodified_processor=null,t.flm_error_policy=t.config.continue_with_errors?"continue":"abort",Hh(`flm_error_policy = ${t.flm_error_policy}`),t.zoo_flm_processor=null,t.config.use_flm_processor&&(t.zoo_flm_processor=await t.config.use_flm_processor(t),t.zoodb_named_processors.zoo_flm_processor=t.zoo_flm_processor,t.zoodb_processors.push(t.zoo_flm_processor)),t.searchable_text_processor=null,t.config.use_searchable_text_processor&&(t.searchable_text_processor=await t.config.use_searchable_text_processor(t),t.zoodb_named_processors.searchable_text_processor=t.searchable_text_processor,t.zoodb_processors.push(t.searchable_text_processor)),t.config.extra_db_processors&&Object.keys(t.config.extra_db_processors).length>0){let e=Object.entries(t.config.extra_db_processors).filter((([e,t])=>null!=t));e.sort((([e,t],[r,_])=>(t?.priority??50)-(_?.priority??50)));for(const[r,_]of e){const e=_.instance;null!=e&&(t.zoodb_named_processors[r]=e,t.zoodb_processors.push(e))}}let _=t.config.ZooDbClass,n=t.config.SchemaLoaderClass,a=new(r(yh).Validator);Hh("Instantiating ZooDb instance object.",{ZooDbClass:_,db_processors:t.zoodb_processors});let i=new _({processors:t.zoodb_processors,schema_validator:a});for(const[e,r]of Object.entries(t))i[e]=r;if(t.config.custom_zoodb_properties)for(const[e,r]of Object.entries(t.config.custom_zoodb_properties))i[e]=r;if(t.config.schemas&&n){const e=new n({fs:t.config.fs,schemas:t.config.schemas,schema_names:t.config.schema_names});i.schema_loader=e;const r=await e.load_schemas();await i.load_data({schemas:r.schemas}),Hh("Created schema loader and loaded the schemas")}return i}const Xh=r(s=a("3krpC"))("zoodb.dbprocessor.computeddata");class Zh extends Xt{constructor(e){super(),this.config=Object.assign({lazy:!1,create_zoo_methods:!0,object_types:null,keep_computed_data_in_data_dumps:!1,computed_data_fieldset_name:"computed_data_values",create_zoodb_special_method:({zoodb:e,object_type:t,computed_property_name:r,accessor_function:_})=>{e[`${t}_${r}`]=_}},e),this.computed_data_spec=this.config.computed_data,null==this.computed_data_spec&&console.warn("Warning: No computed_data set. This DB processor will do nothing."),this.config.lazy&&!this.config.create_zoo_methods&&console.warn("WARNING: ComputedDataProcessor: config.lazy is set to true but create_zoo_methods is set to false.  You'll need to compute the lazy computed properties' values yourself as you won't be able to trigger automatic computation by accessing them through the zoodb special methods!")}async initialize_zoo(){this.config.object_types??=this.zoodb.object_types;const{computed_data_fieldset_name:e}=this.config;if(this.config.create_zoo_methods)for(const[t,r]of Object.entries(this.computed_data_spec))for(const _ of Object.keys(r)){let r=null;if(this.config.lazy){const e=this;r=r=>e._access_lazy_property(t,r,_)}else r=r=>this.zoodb.scratch[e][t][r._zoodb.id][_];this.config.create_zoodb_special_method({zoodb:this.zoodb,object_type:t,computed_property_name:_,accessor_function:r})}}async process_zoo(){if(null==this.zoodb)throw new Error("No zoodb set!");for(const e of this.config.object_types){const t=this.zoodb.objects[e];if(null==t)continue;const r=this.computed_data_spec[e];null!=r&&await this._process_object_db(e,t,r)}}async prepare_zoo_update_objects(){}async process_zoo_update_objects(e){if(null==this.zoodb)throw new Error("No zoodb set!");for(const t of this.config.object_types){const r=e[t];if(null==r)continue;const _=this.computed_data_spec[t];null!=_&&await this._process_object_db(t,r,_)}}async process_data_dump(e,t){let{keep_computed_data:r}=t;if(r??=this.config.keep_computed_data_in_data_dumps,r){const{computed_data_fieldset_name:t}=this.config;for(const r of this.config.object_types){const _=this.computed_data_spec[r],n=e.db.objects[r];if(n&&0!=Object.keys(n).length)for(let[e,a]of Object.entries(n)){let n=this.zoodb.scratch[t][r][e];for(const e of Object.keys(_))a[e]=n[e];Object.assign(a,n)}}}return e}_access_lazy_property(e,t,r){let _=this.zoodb.scratch[this.config.computed_data_fieldset_name][e][t._zoodb.id];if(Object.hasOwn(_,r))return _[r];const n=this.computed_data_spec[e][r].fn.call(this.zoodb,t);return _[r]=n,n}async _process_object_computed_property(e,t,r,_){Xh(`Processing computed property ${e}.${r}`);const{computed_data_fieldset_name:n}=this.config;let a=this.zoodb.scratch[n][e];if(null==_.fn_bulk)if(this.config.lazy)Xh(`skipping computation of ${e.computed_property_name} (lazy)`);else for(const[e,n]of Object.entries(t)){const t=_.fn.call(this.zoodb,n);a[e][r]=t}else{Xh("Processing computed property ... is bulk!");const e=await _.fn_bulk.call(this.zoodb,t);for(const[_,n]of Object.entries(t)){const t=e[_];a[_][r]=t}}}async _process_object_db(e,t,r){const{computed_data_fieldset_name:_}=this.config;null==this.zoodb.scratch[_]&&(this.zoodb.scratch[_]={});let n=this.zoodb.scratch[_][e];null==n&&(n={},this.zoodb.scratch[_][e]=n);for(const[e,r]of Object.entries(t))n[e]=Object.create(null);for(const[_,n]of Object.entries(r))await this._process_object_computed_property(e,t,_,n)}}const Kh={code:{schema_name:"code",data_src_path:"codes/",load_objects:e=>[e]},space:{schema_name:"space",data_src_path:"code_extra/spaces.yml",load_objects:e=>e},domain:{schema_name:"domain",data_src_path:"codetree/domains.yml",load_objects:e=>e},kingdom:{schema_name:"kingdom",data_src_path:"codetree/kingdoms.yml",load_objects:e=>{let t=[];for(const[r,_]of Object.entries(e.kingdoms_by_domain_id))for(const e of _)t.push(Object.assign({parent_domain:{domain_id:r}},e));return t}},codelist:{schema_name:"codelist",data_src_path:"codelists/"},user:{schema_name:"user",data_src_path:"users/users_db.yml",load_objects:e=>e}},Jh=r(s)("eczoodb"),Qh={continue_with_errors:!1,use_relations_populator:null,use_gitlastmodified_processor:null,use_flm_environment:null,flm_allow_unresolved_references:!1,flm_allow_unresolved_citations:!1,use_flm_processor:null,flm_options:{environment_options:null,refs:{code:{formatted_ref_flm_text_fn:(e,t)=>t.name.flm_text},codelist:{formatted_ref_flm_text_fn:(e,t)=>t.title.flm_text},user:{formatted_ref_flm_text_fn:(e,t)=>t.name}},citations:{csl_style:null,override_arxiv_dois_file:"code_extra/override_arxiv_dois.yml",preset_bibliography_files:["code_extra/bib_preset.yml"],default_user_agent:null},resources:{rename_figure_template:null,figure_filename_extensions:null,graphics_resources_fs_data_dir:null}},use_searchable_text_processor:null,searchable_text_options:{object_types:["code"]},zoo_permalinks:Zd},eg={user:{earliest_contribution:{fn:function(e){if(!e.zoo_contributions||!e.zoo_contributions.code)return null;let t=null;for(const r of e.zoo_contributions.code){const e=new Date(r.date);(null===t||e-t<0)&&(t=e)}return t}}},code:{short_name:{fn:function(e){const t=this;if(null!=e.short_name&&""!==e.short_name)return e.short_name;let r=e.name,_=null;return t.config.use_flm_processor&&(r=r.flm_text),r.endsWith(" code")&&(_=r.slice(0,-5)),null!==_?t.config.use_flm_processor?t.zoo_flm_environment.make_fragment(_,t.$$kw({what:`${e.name.what} (short)`,resource_info:e._zoodb.resource_info,standalone_mode:!0})):_:e.name}}}};class tg extends ch{static EcZooDbComputedData=eg;constructor(e){super(e)}codelist_compiled_code_id_list(e){return this.codelist_compiled_codes_info(e).code_id_list}codelist_compiled_code_list(e){return this.codelist_compiled_codes_info(e).code_list}codelist_compiled_code_id_set(e){return this.codelist_compiled_codes_info(e).code_id_set}code_visit_relations(e,{relation_properties:t,callback:r,predicate_relation:_}){let n=[{code:e,reached_from_code:null,reached_from_code_info:null,relation_object:null}],a={};for(a[e.code_id]=!0;n.length;){const e=n.shift(),i=e.code;if(!0===r(i,{...e}))return;for(const r of t){if(!i.relations||!i.relations[r])continue;let t=i.relations[r];for(const o of t){if(null!=_&&!_(i,o,r))continue;const t=o.code_id;a[t]||(a[t]=!0,n.push({code:this.objects.code[t],reached_from_code:i,reached_from_code_info:e,relation_object:o}))}}}}code_is_descendant_of(e,t){let r=!1;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{if(e.code_id===t)return r=!0,!0}}),r}code_is_cousin_of(e,t){if(null==e.relations)return!1;for(const r of["cousins","cousin_of"])if(null!=e.relations[r])for(const _ of e.relations[r])if(_.code_id===t)return!0;return!1}code_parent_domains(e,{find_domain_id:t,only_primary_parent_relation:r}={}){let _=null;r&&(_=(e,t,r)=>this.code_is_primary_parent(t.code,e));let n=new Set;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{const r=e.relations?.root_for_domain,_=e.relations?.root_for_kingdom;if(r&&r.length)for(const{domain_id:e,domain:_}of r)if(n.add(_),null!=t&&e===t)return!0;if(_&&_.length)for(const{kingdom:e}of _){const{domain_id:r,domain:_}=e.parent_domain;if(null!=_&&(n.add(_),null!=t&&r===t))return!0}},predicate_relation:_}),Array.from(n)}code_parent_kingdoms(e,{find_kingdom_id:t,only_primary_parent_relation:r}={}){let _=null;r&&(_=(e,t,r)=>this.code_is_primary_parent(t.code,e));let n=new Set;return this.code_visit_relations(e,{relation_properties:["parents"],callback:e=>{const r=e.relations?.root_for_kingdom;if(r&&r.length)for(const{kingdom_id:e,kingdom:_}of r)if(n.add(_),null!=t&&e===t)return!0},predicate_relation:_}),Array.from(n)}code_is_property_code(e){let t=this.code_parent_kingdoms(e,{only_primary_parent_relation:!0});return!t||!t.length}code_is_primary_parent(e,t){const r=t.relations;return null!=r&&(!(null!=r.root_for_domain&&r.root_for_domain.length>=1)&&(!(null!=r.root_for_kingdom&&r.root_for_kingdom.length>=1)&&r.parents?.[0]?.code_id===e.code_id))}code_get_primary_parent(e){const t=e.relations;if(null==t)return null;let r=t.root_for_domain;if(null!=r&&r.length>0){if(r.length>1)throw new Error(`Code ${e.code_id} is root code for multiple domains: `+r.map((e=>e.domain_id)).join(", "));return{domain:r[0].domain,relation_object:r[0]}}let _=t.root_for_kingdom;if(null!=_&&_.length>0){if(_.length>1)throw new Error(`Code ${e.code_id} is root for multiple kingdoms: `+_.map((e=>e.kingdom_id)).join(", "));return{kingdom:_[0].kingdom,relation_object:_[0]}}const n=t.parents;return null!=n&&n.length>0?{code:n[0].code,relation_object:n[0]}:null}code_get_secondary_parents(e){const t=e.relations;if(null==t||null==t.parents||0==t.parents.length)return[];let r=t.root_for_domain;if(null!=r&&r.length>0)return t.parents;let _=t.root_for_kingdom;return null!=_&&_.length>0?t.parents:t.parents.slice(1)}code_get_primary_parent_root(e,{include_domain_kingdom_root_info:t}={}){let r=e,_=!0,n=[e.code_id];for(;(null==r.relations?.root_for_kingdom||0==r.relations?.root_for_kingdom?.length)&&(null==r.relations?.root_for_domain||0==r.relations?.root_for_domain?.length)&&r.relations?.parents?.length>0;){r=r.relations.parents[0].code,_=!1;const e=r.code_id;if(n.includes(e)){const t=[].concat(n,[e]).map((e=>{let t=this.objects.code[e];return`${t.name.flm_text??t.name} (${t.code_id})`}));throw new Error("Detected cycle in primary-parent relationships: "+t.join("  "))}n.push(e)}let a={primary_parent_root_code:r,primary_parent_chain_code_ids:n,is_root_code:_};if(t){let e=null,t=null,n=!1,i=!1,o=r.relations?.root_for_domain;if(null!=o&&o.length>0){if(o.length>1)throw new Error(`Code ${r.code_id} is root code for multiple domains: `+o.map((e=>e.domain_id)).join(", "));e=o[0].domain,t=null,n=_,i=!1}else{let a=r.relations?.root_for_kingdom;if(null!=a&&a.length>0){if(a.length>1)throw new Error(`Code ${r.code_id} is root for multiple kingdoms: `+a.map((e=>e.kingdom_id)).join(", "));t=a[0].kingdom,e=t?.parent_domain,n=!1,i=_}}a.parent_domain=e,a.parent_kingdom=t,a.is_domain_root_code=n,a.is_kingdom_root_code=i}return a}code_get_parent_domain(e,{primary_parent_root_code:t}={}){null==t&&({primary_parent_root_code:t}=this.code_get_primary_parent_root(e));let r=t.relations?.root_for_domain;if(null!=r&&r.length>0){if(r.length>1)throw new Error(`Code ${t.code_id} is root code for multiple domains: `+r.map((e=>e.domain_id)).join(", "));return r[0].domain}let _=t.relations?.root_for_kingdom;if(null!=_&&_.length>0){if(_.length>1)throw new Error(`Code ${t.code_id} is root for multiple kingdoms: `+_.map((e=>e.kingdom_id)).join(", "));return _[0].kingdom?.parent_domain}return null}code_get_parent_kingdom(e,{primary_parent_root_code:t}={}){null==t&&({primary_parent_root_code:t}=this.code_get_primary_parent_root(e));let r=t.relations?.root_for_kingdom;if(null==r||0===r.length)return null;if(r.length>1)throw new Error(`Code ${t.code_id} is a root code for multiple kingdoms: `+r.map((e=>e.kingdom_id)).join(", "));return r[0].kingdom}code_get_family_tree(e,{parent_child_sort:t,only_primary_parent_relation:r,return_relation_info:_,predicate_relation:n}={}){let a=[];r&&a.push(((e,t,r)=>this.code_is_primary_parent(e,t.code))),n&&a.push(n);let i=null;a.length&&(i=(e,t,r)=>{for(const _ of a)if(!_(e,t,r))return!1;return!0});let o=[];if(this.code_visit_relations(e,{relation_properties:["parent_of"],callback:(e,t)=>{_?o.push(t):o.push(e)},predicate_relation:i}),t??1){if(_){const e=o.map((e=>e.code)),t=Object.fromEntries(o.map((e=>[e.code.code_id,e])));return this.code_parent_child_sort(e).map((e=>t[e.code_id]))}return this.code_parent_child_sort(o)}return o}code_get_ancestors(e,{parent_child_sort:t,only_primary_parent_relation:r,skip_first_primary_parent_relation:_,return_relation_info:n,predicate_relation:a}={}){let i=[];r&&i.push(((e,t,r)=>this.code_is_primary_parent(t.code,e))),_&&i.push(((t,r,_)=>t!==e||!this.code_is_primary_parent(r.code,t))),a&&i.push(a);let o=null;i.length&&(o=(e,t,r)=>{for(const _ of i)if(!_(e,t,r))return!1;return!0});let l=[];if(this.code_visit_relations(e,{relation_properties:["parents"],callback:(e,t)=>{n?l.push(t):l.push(e)},predicate_relation:o}),t??1){if(n){const e=l.map((e=>e.code)),t=Object.fromEntries(l.map((e=>[e.code.code_id,e])));return this.code_parent_child_sort(e).map((e=>t[e.code_id]))}return this.code_parent_child_sort(l)}return l}code_parent_child_sort(e){let t=[];const r=e.map((e=>e.code_id));let _={},n=Object.fromEntries(e.map((e=>[e.code_id,0])));for(const t of e)if(null!=t.relations&&null!=t.relations.parent_of){let e=t.relations.parent_of.map((e=>[r.indexOf(e.code_id),e.code])).filter((([e,t])=>-1!==e));e.sort(((e,t)=>e[0]-t[0]));const a=e.map((([e,t])=>t));_[t.code_id]=a;for(const e of a)n[e.code_id]+=1}let a=e.filter((e=>0===n[e.code_id]));for(;a.length;){const e=a.shift();t.push(e);let r=[];for(;null!=_[e.code_id]&&_[e.code_id].length;){const t=_[e.code_id].shift();n[t.code_id]-=1,0===n[t.code_id]&&r.push(t)}a=r.concat(a),delete _[e.code_id]}if(-1!==Object.values(_).findIndex((e=>null!=e&&e.length>0))){const e=()=>{for(;;){let e=new Set;if(_=Object.fromEntries(Object.entries(_).map((([t,r])=>{let n=(r??[]).filter((e=>{const t=e.code_id;return!(!Object.hasOwn(_,t)||null==_[t]||0==_[t].length)}));return 0==n.length&&e.add(t),[t,n]}))),!e.size)break;for(const t of e)delete _[t]}};e();let t=[];for(;Object.keys(_).length;){const[r,n]=Object.entries(_)[0];let a=[],i=this.objects.code[r];for(;null!=i&&!a.includes(i.code_id);)a.push(i.code_id),i=_[i.code_id].shift();a.push(r),t.push(a),e()}throw new Error("ERROR: Cycles detected in parent-child relationships:\n"+t.map((e=>"    "+e.map((e=>{const t=this.objects.code[e];return`${t.name.flm_text??t.name} (${e})`})).join("  "))).join("\n"))}return t}async validate(){super.validate();this.code_parent_child_sort(Object.values(this.objects.code));let e=[];for(const[t,r]of Object.entries(this.objects.code)){const _=r.relations?.root_for_domain??[],n=r.relations?.root_for_kingdom??[];_.length+n.length>1&&e.push(`Code ${t} is root code for more than one domain/kingdom: `+[_.length?"Domain(s): "+_.map((e=>e.domain_id)).join(", "):"",n.length?"Kingdom(s): "+n.map((e=>e.kingdom_id)).join(", "):""].join(" and "));const a=e=>[t,e.code_id].sort().join(":");let i=new Set([].concat(r.relations?.parents??[],r.relations?.parent_of??[]).map((e=>a(e)))),o=new Set;const l=r=>{r.code_id===t&&(Jh(`Invalid cousin relationship to self: ${t}`),e.push(`Invalid cousin relationship to self: ${t}`));const _=a(r);i.has(_)&&(Jh(`Detected same relationship as parent and as cousin: ${t}${r.code_id}`),e.push(`Detected same relationship as parent and as cousin: ${t}${r.code_id}`)),o.has(_)&&(Jh(`Duplicate cousin relationship detected: ${t}${r.code_id}`),e.push(`Duplicate cousin relationship detected: ${t}${r.code_id}`)),o.add(_)};for(const e of r.relations?.cousins??[])l(e);for(const e of r.relations?.cousin_of??[])l(e)}if(e.length)throw console.error(" ZOO VALIDATION ERROR(S) \n"+e.join("\n")),new Error("Zoo validation error(s)!\n"+e.map((e=>"   "+e)).join("\n"))}}async function rg(e={},{use_schemas_loader:t,schema_root:_,schema_add_extension:n}={}){n=n??null,Jh("schema_root is ",{schema_root:_=_??null});let a={schema_root:_,schema_rel_path:"schemas/",schema_add_extension:n??".yml"};return(t??1)||(a=!1),e=r(o)({ZooDbClass:tg,extra_db_processors:{computed_data:{priority:10,instance:new Zh({computed_data:tg.EcZooDbComputedData})}},schemas:a,schema_names:Object.entries(Kh).map((([e,t])=>t.schema_name??e))},Qh,e),await Yh(e)}const _g=r(s)("eczoo_site.jscomponents.codegraph.setup_eczoodb");async function ng(e){let t=e.refs_data,r={use_relations_populator:Qt,use_flm_environment:Xd,use_flm_processor:!1,flm_options:{allow_unresolved_references:!0},use_searchable_text_processor:!1,fs:null,continue_with_errors:!0},_=await rg(r,{use_schemas_loader:!1});return _g("Created eczoodb, loading refs & citations ..."),null!=t&&(_.zoo_flm_environment.ref_resolver.load_database(t.refs),_.zoo_flm_environment.citations_provider.load_database(t.citations)),_g("Loaded refs & citations, loading data ..."),await _.load_data(e.db),_}s=a("3krpC");var ag,ig,og={},lg={},sg={},cg={};ig=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var ug;function fg(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ae;++t<r;)this.add(e[t])}ug=function(e){return this.__data__.has(e)},fg.prototype.add=fg.prototype.push=ig,fg.prototype.has=ug,cg=fg;var dg={};dg=function(e,t){for(var r=-1,_=null==e?0:e.length;++r<_;)if(t(e[r],r,e))return!0;return!1};var pg={};pg=function(e,t){return e.has(t)};sg=function(e,t,r,_,n,a){var i=1&r,o=e.length,l=t.length;if(o!=l&&!(i&&l>o))return!1;var s=a.get(e),c=a.get(t);if(s&&c)return s==t&&c==e;var u=-1,f=!0,d=2&r?new cg:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var p=e[u],h=t[u];if(_)var g=i?_(h,p,u,t,e,a):_(p,h,u,e,t,a);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!dg(t,(function(e,t){if(!pg(d,t)&&(p===e||n(p,e,r,_,a)))return d.push(t)}))){f=!1;break}}else if(p!==h&&!n(p,h,r,_,a)){f=!1;break}}return a.delete(e),a.delete(t),f};var hg,gg={};hg=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,_){r[++t]=[_,e]})),r};var vg;vg=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r};var mg=E?E.prototype:void 0,yg=mg?mg.valueOf:void 0;gg=function(e,t,r,_,n,a,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new je(e),new je(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=hg;case"[object Set]":var l=1&_;if(o||(o=vg),e.size!=t.size&&!l)return!1;var s=i.get(e);if(s)return s==t;_|=2,i.set(e,t);var c=sg(o(e),o(t),_,n,a,i);return i.delete(e),c;case"[object Symbol]":if(yg)return yg.call(e)==yg.call(t)}return!1};var wg={},bg=Object.prototype.hasOwnProperty;wg=function(e,t,r,_,n,a){var i=1&r,o=vp(e),l=o.length;if(l!=vp(t).length&&!i)return!1;for(var s=l;s--;){var c=o[s];if(!(i?c in t:bg.call(t,c)))return!1}var u=a.get(e),f=a.get(t);if(u&&f)return u==t&&f==e;var d=!0;a.set(e,t),a.set(t,e);for(var p=i;++s<l;){var h=e[c=o[s]],g=t[c];if(_)var v=i?_(g,h,c,t,e,a):_(h,g,c,e,t,a);if(!(void 0===v?h===g||n(h,g,r,_,a):v)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(d=!1)}return a.delete(e),a.delete(t),d};nt=a("4a4bO");var kg="[object Arguments]",xg="[object Array]",Og="[object Object]",Pg=Object.prototype.hasOwnProperty;lg=function(e,t,r,_,n,a){var i=Qe(e),o=Qe(t),l=i?xg:wp(e),s=o?xg:wp(t),c=(l=l==kg?Og:l)==Og,f=(s=s==kg?Og:s)==Og,d=l==s;if(d&&nt(e)){if(!nt(t))return!1;i=!0,c=!1}if(d&&!c)return a||(a=new u),i||ft(e)?sg(e,t,r,_,n,a):gg(e,t,l,r,_,n,a);if(!(1&r)){var p=c&&Pg.call(e,"__wrapped__"),h=f&&Pg.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,v=h?t.value():t;return a||(a=new u),n(g,v,r,_,a)}}return!!d&&(a||(a=new u),wg(e,t,r,_,n,a))},og=function e(t,r,_,n,a){return t===r||(null==t||null==r||!Ye(t)&&!Ye(r)?t!=t&&r!=r:lg(t,r,_,n,e,a))},ag=function(e,t){return og(e,t)};var Eg,Cg,Ag={};te=a("kLIqa");Ag=function(){return te.Date.now()};var Sg={},Ng={},Tg={},Lg=/\s/;Tg=function(e){for(var t=e.length;t--&&Lg.test(e.charAt(t)););return t};var Mg=/^\s+/;Ng=function(e){return e?e.slice(0,Tg(e)+1).replace(Mg,""):e};var jg={};jg=function(e){return"symbol"==typeof e||Ye(e)&&"[object Symbol]"==T(e)};var Ig=/^[-+]0x[0-9a-f]+$/i,Dg=/^0b[01]+$/i,Rg=/^0o[0-7]+$/i,Fg=parseInt;Sg=function(e){if("number"==typeof e)return e;if(jg(e))return NaN;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ng(e);var r=Dg.test(e);return r||Rg.test(e)?Fg(e.slice(2),r?2:8):Ig.test(e)?NaN:+e};var zg=Math.max,Bg=Math.min;Cg=function(e,t,r){var _,n,a,i,o,l,s=0,c=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var r=_,a=n;return _=n=void 0,s=t,i=e.apply(a,r)}function p(e){var r=e-l;return void 0===l||r>=t||r<0||u&&e-s>=a}function h(){var e=Ag();if(p(e))return g(e);o=setTimeout(h,function(e){var r=t-(e-l);return u?Bg(r,a-(e-s)):r}(e))}function g(e){return o=void 0,f&&_?d(e):(_=n=void 0,i)}function v(){var e=Ag(),r=p(e);if(_=arguments,n=this,l=e,r){if(void 0===o)return function(e){return s=e,o=setTimeout(h,t),c?d(e):i}(l);if(u)return clearTimeout(o),o=setTimeout(h,t),d(l)}return void 0===o&&(o=setTimeout(h,t)),i}return t=Sg(t)||0,B(r)&&(c=!!r.leading,a=(u="maxWait"in r)?zg(Sg(r.maxWait)||0,t):a,f="trailing"in r?!!r.trailing:f),v.cancel=function(){void 0!==o&&clearTimeout(o),s=0,_=l=n=o=void 0},v.flush=function(){return void 0===o?i:g(Ag())},v};var qg;qg=a("5VzDB");var Vg,Gg={},Ug={},$g={},Wg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hg=/^\w*$/;$g=function(e,t){if(Qe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!jg(e))||(Hg.test(e)||!Wg.test(e)||null!=t&&e in Object(t))};var Yg={},Xg={};function Zg(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var _=arguments,n=t?t.apply(this,_):_[0],a=r.cache;if(a.has(n))return a.get(n);var i=e.apply(this,_);return r.cache=a.set(n,i)||a,i};return r.cache=new(Zg.Cache||ae),r}Zg.Cache=ae,Xg=Zg;var Kg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jg=/\\(\\)?/g,Qg=function(e){var t=Xg(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Kg,(function(e,r,_,n){t.push(_?n.replace(Jg,"$1"):r||e)})),t}));Yg=Qg;var ev={},tv={},rv={};rv=function(e,t){for(var r=-1,_=null==e?0:e.length,n=Array(_);++r<_;)n[r]=t(e[r],r,e);return n};var _v=E?E.prototype:void 0,nv=_v?_v.toString:void 0;tv=function e(t){if("string"==typeof t)return t;if(Qe(t))return rv(t,e)+"";if(jg(t))return nv?nv.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},ev=function(e){return null==e?"":tv(e)},Ug=function(e,t){return Qe(e)?e:$g(e,t)?[e]:Yg(ev(e))};var av={};av=function(e){if("string"==typeof e||jg(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Gg=function(e,t){for(var r=0,_=(t=Ug(t,e)).length;null!=e&&r<_;)e=e[av(t[r++])];return r&&r==_?e:void 0},Vg=function(e,t,r){var _=null==e?void 0:Gg(e,t);return void 0===_?r:_};var iv,ov={};ov=function(e,t,r,_){if(!B(e))return e;for(var n=-1,a=(t=Ug(t,e)).length,i=a-1,o=e;null!=o&&++n<a;){var l=av(t[n]),s=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=i){var c=o[l];void 0===(s=_?_(c,l,o):void 0)&&(s=B(c)?c:Pt(t[n+1])?[]:{})}wt(o,l,s),o=o[l]}return e},iv=function(e,t,r){return null==e?e:ov(e,t,r)};var lv;function sv(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}lv=function(e){return Qe(e)?rv(e,av):jg(e)?[e]:De(Yg(ev(e)))};var cv=sv(Cg),uv=sv(qg),fv=sv(Vg),dv=sv(iv),pv=sv(lv);function hv(e){return hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(e)}function gv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vv(e,t){for(var r=0;r<t.length;r++){var _=t[r];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}function mv(e,t,r){return t&&vv(e.prototype,t),r&&vv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var _,n,a=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(_=r.next()).done)&&(a.push(_.value),!t||a.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(o)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,_=new Array(t);r<t;r++)_[r]=e[r];return _}var kv="undefined"==typeof window?null:window,xv=kv?kv.navigator:null;kv&&kv.document;var Ov=hv(""),Pv=hv({}),Ev=hv((function(){})),Cv="undefined"==typeof HTMLElement?"undefined":hv(HTMLElement),Av=function(e){return e&&e.instanceString&&Nv(e.instanceString)?e.instanceString():null},Sv=function(e){return null!=e&&hv(e)==Ov},Nv=function(e){return null!=e&&hv(e)===Ev},Tv=function(e){return!Iv(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},Lv=function(e){return null!=e&&hv(e)===Pv&&!Tv(e)&&e.constructor===Object},Mv=function(e){return null!=e&&hv(e)===hv(1)&&!isNaN(e)},jv=function(e){return"undefined"===Cv?void 0:null!=e&&e instanceof HTMLElement},Iv=function(e){return Dv(e)||Rv(e)},Dv=function(e){return"collection"===Av(e)&&e._private.single},Rv=function(e){return"collection"===Av(e)&&!e._private.single},Fv=function(e){return"core"===Av(e)},zv=function(e){return"stylesheet"===Av(e)},Bv=function(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},qv=function(e){return function(e){return null!=e&&hv(e)===Pv}(e)&&Nv(e.then)},Vv=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var r=function r(){var _,n=arguments,a=t.apply(this,n),i=r.cache;return(_=i[a])||(_=i[a]=e.apply(this,n)),_};return r.cache={},r},Gv=Vv((function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),Uv=Vv((function(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),$v=Vv((function(e,t){return e+t[0].toUpperCase()+t.substring(1)}),(function(e,t){return e+"$"+t})),Wv=function(e){return Bv(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Hv="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Yv="rgb[a]?\\(("+Hv+"[%]?)\\s*,\\s*("+Hv+"[%]?)\\s*,\\s*("+Hv+"[%]?)(?:\\s*,\\s*("+Hv+"))?\\)",Xv="rgb[a]?\\((?:"+Hv+"[%]?)\\s*,\\s*(?:"+Hv+"[%]?)\\s*,\\s*(?:"+Hv+"[%]?)(?:\\s*,\\s*(?:"+Hv+"))?\\)",Zv="hsl[a]?\\(("+Hv+")\\s*,\\s*("+Hv+"[%])\\s*,\\s*("+Hv+"[%])(?:\\s*,\\s*("+Hv+"))?\\)",Kv="hsl[a]?\\((?:"+Hv+")\\s*,\\s*(?:"+Hv+"[%])\\s*,\\s*(?:"+Hv+"[%])(?:\\s*,\\s*(?:"+Hv+"))?\\)",Jv=function(e,t){return e<t?-1:e>t?1:0},Qv=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var _=t[r];if(null!=_)for(var n=Object.keys(_),a=0;a<n.length;a++){var i=n[a];e[i]=_[i]}}return e},em=function(e){return(Tv(e)?e:null)||function(e){return tm[e.toLowerCase()]}(e)||function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,_,n=16;return 4===e.length?(t=parseInt(e[1]+e[1],n),r=parseInt(e[2]+e[2],n),_=parseInt(e[3]+e[3],n)):(t=parseInt(e[1]+e[2],n),r=parseInt(e[3]+e[4],n),_=parseInt(e[5]+e[6],n)),[t,r,_]}}(e)||function(e){var t,r=new RegExp("^"+Yv+"$").exec(e);if(r){t=[];for(var _=[],n=1;n<=3;n++){var a=r[n];if("%"===a[a.length-1]&&(_[n]=!0),a=parseFloat(a),_[n]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var i=_[1]||_[2]||_[3],o=_[1]&&_[2]&&_[3];if(i&&!o)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t}(e)||function(e){var t,r,_,n,a,i,o,l;function s(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var c=new RegExp("^"+Zv+"$").exec(e);if(c){if((r=parseInt(c[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(_=parseFloat(c[2]))<0||_>100)return;if(_/=100,(n=parseFloat(c[3]))<0||n>100)return;if(n/=100,void 0!==(a=c[4])&&((a=parseFloat(a))<0||a>1))return;if(0===_)i=o=l=Math.round(255*n);else{var u=n<.5?n*(1+_):n+_-n*_,f=2*n-u;i=Math.round(255*s(f,u,r+1/3)),o=Math.round(255*s(f,u,r)),l=Math.round(255*s(f,u,r-1/3))}t=[i,o,l,a]}return t}(e)},tm={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},rm=function(e){for(var t=e.map,r=e.keys,_=r.length,n=0;n<_;n++){var a=r[n];if(Lv(a))throw Error("Tried to set map with object key");n<r.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},_m=function(e){for(var t=e.map,r=e.keys,_=r.length,n=0;n<_;n++){var a=r[n];if(Lv(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))return t}return t},nm=kv?kv.performance:null,am=nm&&nm.now?function(){return nm.now()}:function(){return Date.now()},im=function(){if(kv){if(kv.requestAnimationFrame)return function(e){kv.requestAnimationFrame(e)};if(kv.mozRequestAnimationFrame)return function(e){kv.mozRequestAnimationFrame(e)};if(kv.webkitRequestAnimationFrame)return function(e){kv.webkitRequestAnimationFrame(e)};if(kv.msRequestAnimationFrame)return function(e){kv.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout((function(){e(am())}),1e3/60)}}(),om=function(e){return im(e)},lm=am,sm=9261,cm=5381,um=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sm;!(t=e.next()).done;)r=65599*r+t.value|0;return r},fm=function(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:sm)+e|0},dm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cm;return(t<<5)+t+e|0},pm=function(e){return 2097152*e[0]+e[1]},hm=function(e,t){return[fm(e[0],t[0]),dm(e[1],t[1])]},gm=function(e,t){var r={value:0,done:!1},_=0,n=e.length;return um({next:function(){return _<n?r.value=e.charCodeAt(_++):r.done=!0,r}},t)},vm=function(){return mm(arguments)},mm=function(e){for(var t,r=0;r<e.length;r++){var _=e[r];t=0===r?gm(_):gm(_,t)}return t},ym=!0,wm=null!=console.warn,bm=null!=console.trace,km=Number.MAX_SAFE_INTEGER||9007199254740991,xm=function(){return!0},Om=function(){return!1},Pm=function(){return 0},Em=function(){},Cm=function(e){throw new Error(e)},Am=function(e){if(void 0===e)return ym;ym=!!e},Sm=function(e){Am()&&(wm?console.warn(e):(console.log(e),bm&&console.trace()))},Nm=function(e){return null==e?e:Tv(e)?e.slice():Lv(e)?function(e){return Qv({},e)}(e):e},Tm=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},Lm={},Mm=function(){return Lm},jm=function(e){var t=Object.keys(e);return function(r){for(var _={},n=0;n<t.length;n++){var a=t[n],i=null==r?void 0:r[a];_[a]=void 0===i?e[a]:i}return _}},Im=function(e,t,r){for(var _=e.length-1;_>=0&&(e[_]!==t||(e.splice(_,1),!r));_--);},Dm=function(e){e.splice(0,e.length)},Rm=function(e,t,r){return r&&(t=$v(r,t)),e[t]},Fm=function(e,t,r,_){r&&(t=$v(r,t)),e[t]=_},zm="undefined"!=typeof Map?Map:function(){function e(){gv(this,e),this._obj={}}return mv(e,[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),e}(),Bm=function(){function e(t){if(gv(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var _=0;_<r.length;_++)this.add(r[_])}}return mv(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter((function(t){return e.has(t)}))}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),e}(),qm="undefined"!==("undefined"==typeof Set?"undefined":hv(Set))?Set:Bm,Vm=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&Fv(e)){var _=t.group;if(null==_&&(_=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var n=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===_:!!t.pannable,active:!1,classes:new qm,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==n.position.x&&(n.position.x=0),null==n.position.y&&(n.position.y=0),t.renderedPosition){var a=t.renderedPosition,i=e.pan(),o=e.zoom();n.position={x:(a.x-i.x)/o,y:(a.y-i.y)/o}}var l=[];Tv(t.classes)?l=t.classes:Sv(t.classes)&&(l=t.classes.split(/\s+/));for(var s=0,c=l.length;s<c;s++){var u=l[s];u&&""!==u&&n.classes.add(u)}this.createEmitter();var f=t.style||t.css;f&&(Sm("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(f)),(void 0===r||r)&&this.restore()}else Cm("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else Cm("An element must have a core reference and parameters set")},Gm=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,_){var n;Lv(t)&&!Iv(t)&&(t=(n=t).roots||n.root,r=n.visit,_=n.directed),_=2!==arguments.length||Nv(r)?_:r,r=Nv(r)?r:function(){};for(var a,i=this._private.cy,o=t=Sv(t)?this.filter(t):t,l=[],s=[],c={},u={},f={},d=0,p=this.byGroup(),h=p.nodes,g=p.edges,v=0;v<o.length;v++){var m=o[v],y=m.id();m.isNode()&&(l.unshift(m),e.bfs&&(f[y]=!0,s.push(m)),u[y]=0)}for(var w=function(){var t=e.bfs?l.shift():l.pop(),n=t.id();if(e.dfs){if(f[n])return"continue";f[n]=!0,s.push(t)}var i,o=u[n],p=c[n],v=null!=p?p.source():null,m=null!=p?p.target():null,y=null==p?void 0:t.same(v)?m[0]:v[0];if(!0===(i=r(t,p,y,d++,o)))return a=t,"break";if(!1===i)return"break";for(var w=t.connectedEdges().filter((function(e){return(!_||e.source().same(t))&&g.has(e)})),b=0;b<w.length;b++){var k=w[b],x=k.connectedNodes().filter((function(e){return!e.same(t)&&h.has(e)})),O=x.id();0===x.length||f[O]||(x=x[0],l.push(x),e.bfs&&(f[O]=!0,s.push(x)),c[O]=k,u[O]=u[n]+1)}};0!==l.length;){var b=w();if("continue"!==b&&"break"===b)break}for(var k=i.collection(),x=0;x<s.length;x++){var O=s[x],P=c[O.id()];null!=P&&k.push(P),k.push(O)}return{path:i.collection(k),found:i.collection(a)}}},Um={breadthFirstSearch:Gm({bfs:!0}),depthFirstSearch:Gm({dfs:!0})};Um.bfs=Um.breadthFirstSearch,Um.dfs=Um.depthFirstSearch;var $m=jm({root:null,weight:function(e){return 1},directed:!1}),Wm={dijkstra:function(e){if(!Lv(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=$m(e),_=r.root,n=r.weight,a=r.directed,i=this,o=n,l=Sv(_)?this.filter(_)[0]:_[0],s={},c={},u={},f=this.byGroup(),d=f.nodes,p=f.edges;p.unmergeBy((function(e){return e.isLoop()}));for(var h=function(e){return s[e.id()]},g=function(e,t){s[e.id()]=t,v.updateItem(e)},v=new uv.default((function(e,t){return h(e)-h(t)})),m=0;m<d.length;m++){var y=d[m];s[y.id()]=y.same(l)?0:1/0,v.push(y)}for(var w=function(e,t){for(var r,_=(a?e.edgesTo(t):e.edgesWith(t)).intersect(p),n=1/0,i=0;i<_.length;i++){var l=_[i],s=o(l);(s<n||!r)&&(n=s,r=l)}return{edge:r,dist:n}};v.size()>0;){var b=v.pop(),k=h(b),x=b.id();if(u[x]=k,k!==1/0)for(var O=b.neighborhood().intersect(d),P=0;P<O.length;P++){var E=O[P],C=E.id(),A=w(b,E),S=k+A.dist;S<h(E)&&(g(E,S),c[C]={node:b,edge:A.edge})}}return{distanceTo:function(e){var t=Sv(e)?d.filter(e)[0]:e[0];return u[t.id()]},pathTo:function(e){var t=Sv(e)?d.filter(e)[0]:e[0],r=[],_=t,n=_.id();if(t.length>0)for(r.unshift(t);c[n];){var a=c[n];r.unshift(a.edge),r.unshift(a.node),n=(_=a.node).id()}return i.spawn(r)}}}},Hm={kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,_=t.edges,n=r.length,a=new Array(n),i=r,o=function(e){for(var t=0;t<a.length;t++){if(a[t].has(e))return t}},l=0;l<n;l++)a[l]=this.spawn(r[l]);for(var s=_.sort((function(t,r){return e(t)-e(r)})),c=0;c<s.length;c++){var u=s[c],f=u.source()[0],d=u.target()[0],p=o(f),h=o(d),g=a[p],v=a[h];p!==h&&(i.merge(u),g.merge(v),a.splice(h,1))}return i}},Ym=jm({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),Xm={aStar:function(e){var t=this.cy(),r=Ym(e),_=r.root,n=r.goal,a=r.heuristic,i=r.directed,o=r.weight;_=t.collection(_)[0],n=t.collection(n)[0];var l,s,c=_.id(),u=n.id(),f={},d={},p={},h=new uv.default((function(e,t){return d[e.id()]-d[t.id()]})),g=new qm,v={},m={},y=function(e,t){h.push(e),g.add(t)};y(_,c),f[c]=0,d[c]=a(_);for(var w,b=0;h.size()>0;){if(l=h.pop(),s=l.id(),g.delete(s),b++,s===u){for(var k=[],x=n,O=u,P=m[O];k.unshift(x),null!=P&&k.unshift(P),null!=(x=v[O]);)P=m[O=x.id()];return{found:!0,distance:f[s],path:this.spawn(k),steps:b}}p[s]=!0;for(var E=l._private.edges,C=0;C<E.length;C++){var A=E[C];if(this.hasElementWithId(A.id())&&(!i||A.data("source")===s)){var S=A.source(),N=A.target(),T=S.id()!==s?S:N,L=T.id();if(this.hasElementWithId(L)&&!p[L]){var M=f[s]+o(A);w=L,g.has(w)?M<f[L]&&(f[L]=M,d[L]=M+a(T),v[L]=l,m[L]=A):(f[L]=M,d[L]=M+a(T),y(T,L),v[L]=l,m[L]=A)}}}}return{found:!1,distance:void 0,path:void 0,steps:b}}},Zm=jm({weight:function(e){return 1},directed:!1}),Km={floydWarshall:function(e){for(var t=this.cy(),r=Zm(e),_=r.weight,n=r.directed,a=_,i=this.byGroup(),o=i.nodes,l=i.edges,s=o.length,c=s*s,u=function(e){return o.indexOf(e)},f=function(e){return o[e]},d=new Array(c),p=0;p<c;p++){var h=p%s,g=(p-h)/s;d[p]=g===h?0:1/0}for(var v=new Array(c),m=new Array(c),y=0;y<l.length;y++){var w=l[y],b=w.source()[0],k=w.target()[0];if(b!==k){var x=u(b),O=u(k),P=x*s+O,E=a(w);if(d[P]>E&&(d[P]=E,v[P]=O,m[P]=w),!n){var C=O*s+x;!n&&d[C]>E&&(d[C]=E,v[C]=x,m[C]=w)}}}for(var A=0;A<s;A++)for(var S=0;S<s;S++)for(var N=S*s+A,T=0;T<s;T++){var L=S*s+T,M=A*s+T;d[N]+d[M]<d[L]&&(d[L]=d[N]+d[M],v[L]=v[N])}var j=function(e){return u(function(e){return(Sv(e)?t.filter(e):e)[0]}(e))},I={distance:function(e,t){var r=j(e),_=j(t);return d[r*s+_]},path:function(e,r){var _=j(e),n=j(r),a=f(_);if(_===n)return a.collection();if(null==v[_*s+n])return t.collection();var i,o=t.collection(),l=_;for(o.merge(a);_!==n;)l=_,_=v[_*s+n],i=m[l*s+_],o.merge(i),o.merge(f(_));return o}};return I}},Jm=jm({weight:function(e){return 1},directed:!1,root:null}),Qm={bellmanFord:function(e){var t=this,r=Jm(e),_=r.weight,n=r.directed,a=r.root,i=_,o=this,l=this.cy(),s=this.byGroup(),c=s.edges,u=s.nodes,f=u.length,d=new zm,p=!1,h=[];a=l.collection(a)[0],c.unmergeBy((function(e){return e.isLoop()}));for(var g=c.length,v=function(e){var t=d.get(e.id());return t||(t={},d.set(e.id(),t)),t},m=function(e){return(Sv(e)?l.$(e):e)[0]},y=0;y<f;y++){var w=u[y],b=v(w);w.same(a)?b.dist=0:b.dist=1/0,b.pred=null,b.edge=null}for(var k=!1,x=function(e,t,r,_,n,a){var i=_.dist+a;i<n.dist&&!r.same(_.edge)&&(n.dist=i,n.pred=e,n.edge=r,k=!0)},O=1;O<f;O++){k=!1;for(var P=0;P<g;P++){var E=c[P],C=E.source(),A=E.target(),S=i(E),N=v(C),T=v(A);x(C,0,E,N,T,S),n||x(A,0,E,T,N,S)}if(!k)break}if(k)for(var L=[],M=0;M<g;M++){var j=c[M],I=j.source(),D=j.target(),R=i(j),F=v(I).dist,z=v(D).dist;if(F+R<z||!n&&z+R<F){if(p||(Sm("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),!1===e.findNegativeWeightCycles)break;var B=[];F+R<z&&B.push(I),!n&&z+R<F&&B.push(D);for(var q=B.length,V=0;V<q;V++){var G=B[V],U=[G];U.push(v(G).edge);for(var $=v(G).pred;-1===U.indexOf($);)U.push($),U.push(v($).edge),$=v($).pred;for(var W=(U=U.slice(U.indexOf($)))[0].id(),H=0,Y=2;Y<U.length;Y+=2)U[Y].id()<W&&(W=U[Y].id(),H=Y);(U=U.slice(H).concat(U.slice(0,H))).push(U[0]);var X=U.map((function(e){return e.id()})).join(",");-1===L.indexOf(X)&&(h.push(o.spawn(U)),L.push(X))}}}return{distanceTo:function(e){return v(m(e)).dist},pathTo:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,_=[],n=m(e);;){if(null==n)return t.spawn();var i=v(n),l=i.edge,s=i.pred;if(_.unshift(n[0]),n.same(r)&&_.length>0)break;null!=l&&_.unshift(l),n=s}return o.spawn(_)},hasNegativeWeightCycle:p,negativeWeightCycles:h}}},ey=Math.sqrt(2),ty=function(e,t,r){0===r.length&&Cm("Karger-Stein must be run on a connected (sub)graph");for(var _=r[e],n=_[1],a=_[2],i=t[n],o=t[a],l=r,s=l.length-1;s>=0;s--){var c=l[s],u=c[1],f=c[2];(t[u]===i&&t[f]===o||t[u]===o&&t[f]===i)&&l.splice(s,1)}for(var d=0;d<l.length;d++){var p=l[d];p[1]===o?(l[d]=p.slice(),l[d][1]=i):p[2]===o&&(l[d]=p.slice(),l[d][2]=i)}for(var h=0;h<t.length;h++)t[h]===o&&(t[h]=i);return l},ry=function(e,t,r,_){for(;r>_;){var n=Math.floor(Math.random()*t.length);t=ty(n,e,t),r--}return t},_y={kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,_=t.edges;_.unmergeBy((function(e){return e.isLoop()}));var n=r.length,a=_.length,i=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),o=Math.floor(n/ey);if(!(n<2)){for(var l=[],s=0;s<a;s++){var c=_[s];l.push([s,r.indexOf(c.source()),r.indexOf(c.target())])}for(var u=1/0,f=[],d=new Array(n),p=new Array(n),h=new Array(n),g=function(e,t){for(var r=0;r<n;r++)t[r]=e[r]},v=0;v<=i;v++){for(var m=0;m<n;m++)p[m]=m;var y=ry(p,l.slice(),n,o),w=y.slice();g(p,h);var b=ry(p,y,o,2),k=ry(h,w,o,2);b.length<=k.length&&b.length<u?(u=b.length,f=b,g(p,d)):k.length<=b.length&&k.length<u&&(u=k.length,f=k,g(h,d))}for(var x=this.spawn(f.map((function(e){return _[e[0]]}))),O=this.spawn(),P=this.spawn(),E=d[0],C=0;C<d.length;C++){var A=d[C],S=r[C];A===E?O.merge(S):P.merge(S)}var N=function(t){var r=e.spawn();return t.forEach((function(t){r.merge(t),t.connectedEdges().forEach((function(t){e.contains(t)&&!x.contains(t)&&r.merge(t)}))})),r},T=[N(O),N(P)];return{cut:x,components:T,partition1:O,partition2:P}}Cm("At least 2 nodes are required for Karger-Stein algorithm")}},ny=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},ay=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},iy=function(e){return{x:e[0],y:e[1]}},oy=function(e,t){return Math.atan2(t,e)-Math.PI/2},ly=Math.log2||function(e){return Math.log(e)/Math.log(2)},sy=function(e){return e>0?1:e<0?-1:0},uy=function(e,t){return Math.sqrt(fy(e,t))},fy=function(e,t){var r=t.x-e.x,_=t.y-e.y;return r*r+_*_},dy=function(e){for(var t=e.length,r=0,_=0;_<t;_++)r+=e[_];for(var n=0;n<t;n++)e[n]=e[n]/r;return e},py=function(e,t,r,_){return(1-_)*(1-_)*e+2*(1-_)*_*t+_*_*r},hy=function(e,t,r,_){return{x:py(e.x,t.x,r.x,_),y:py(e.y,t.y,r.y,_)}},gy=function(e,t,r){return Math.max(e,Math.min(r,t))},vy=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},my=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},yy=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},wy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},by=function(e){var t,r,_,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=r=_=n=a[0];else if(2===a.length)t=_=a[0],n=r=a[1];else if(4===a.length){var i=wv(a,4);t=i[0],r=i[1],_=i[2],n=i[3]}return e.x1-=n,e.x2+=r,e.y1-=t,e.y2+=_,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ky=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},xy=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},Oy=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},Py=function(e,t){return Oy(e,t.x1,t.y1)&&Oy(e,t.x2,t.y2)},Ey=function(e,t,r,_,n,a,i){var o,l=Uy(n,a),s=n/2,c=a/2,u=_-c-i;if((o=Fy(e,t,r,_,r-s+l-i,u,r+s-l+i,u,!1)).length>0)return o;var f=r+s+i;if((o=Fy(e,t,r,_,f,_-c+l-i,f,_+c-l+i,!1)).length>0)return o;var d=_+c+i;if((o=Fy(e,t,r,_,r-s+l-i,d,r+s-l+i,d,!1)).length>0)return o;var p,h=r-s-i;if((o=Fy(e,t,r,_,h,_-c+l-i,h,_+c-l+i,!1)).length>0)return o;var g=r-s+l,v=_-c+l;if((p=Dy(e,t,r,_,g,v,l+i)).length>0&&p[0]<=g&&p[1]<=v)return[p[0],p[1]];var m=r+s-l,y=_-c+l;if((p=Dy(e,t,r,_,m,y,l+i)).length>0&&p[0]>=m&&p[1]<=y)return[p[0],p[1]];var w=r+s-l,b=_+c-l;if((p=Dy(e,t,r,_,w,b,l+i)).length>0&&p[0]>=w&&p[1]>=b)return[p[0],p[1]];var k=r-s+l,x=_+c-l;return(p=Dy(e,t,r,_,k,x,l+i)).length>0&&p[0]<=k&&p[1]>=x?[p[0],p[1]]:[]},Cy=function(e,t,r,_,n,a,i){var o=i,l=Math.min(r,n),s=Math.max(r,n),c=Math.min(_,a),u=Math.max(_,a);return l-o<=e&&e<=s+o&&c-o<=t&&t<=u+o},Ay=function(e,t,r,_,n,a,i,o,l){var s=Math.min(r,i,n)-l,c=Math.max(r,i,n)+l,u=Math.min(_,o,a)-l,f=Math.max(_,o,a)+l;return!(e<s||e>c||t<u||t>f)},Sy=function(e,t,r,_,n,a,i,o){var l=[];!function(e,t,r,_,n){var a,i,o,l,s,c,u,f;0===e&&(e=1e-5),o=-27*(_/=e)+(t/=e)*(9*(r/=e)-t*t*2),a=(i=(3*r-t*t)/9)*i*i+(o/=54)*o,n[1]=0,u=t/3,a>0?(s=(s=o+Math.sqrt(a))<0?-Math.pow(-s,1/3):Math.pow(s,1/3),c=(c=o-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),n[0]=-u+s+c,u+=(s+c)/2,n[4]=n[2]=-u,u=Math.sqrt(3)*(-c+s)/2,n[3]=u,n[5]=-u):(n[5]=n[3]=0,0===a?(f=o<0?-Math.pow(-o,1/3):Math.pow(o,1/3),n[0]=2*f-u,n[4]=n[2]=-(f+u)):(l=(i=-i)*i*i,l=Math.acos(o/Math.sqrt(l)),f=2*Math.sqrt(i),n[0]=-u+f*Math.cos(l/3),n[2]=-u+f*Math.cos((l+2*Math.PI)/3),n[4]=-u+f*Math.cos((l+4*Math.PI)/3)))}(1*r*r-4*r*n+2*r*i+4*n*n-4*n*i+i*i+_*_-4*_*a+2*_*o+4*a*a-4*a*o+o*o,9*r*n-3*r*r-3*r*i-6*n*n+3*n*i+9*_*a-3*_*_-3*_*o-6*a*a+3*a*o,3*r*r-6*r*n+r*i-r*e+2*n*n+2*n*e-i*e+3*_*_-6*_*a+_*o-_*t+2*a*a+2*a*t-o*t,1*r*n-r*r+r*e-n*e+_*a-_*_+_*t-a*t,l);for(var s=[],c=0;c<6;c+=2)Math.abs(l[c+1])<1e-7&&l[c]>=0&&l[c]<=1&&s.push(l[c]);s.push(1),s.push(0);for(var u,f,d,p=-1,h=0;h<s.length;h++)u=Math.pow(1-s[h],2)*r+2*(1-s[h])*s[h]*n+s[h]*s[h]*i,f=Math.pow(1-s[h],2)*_+2*(1-s[h])*s[h]*a+s[h]*s[h]*o,d=Math.pow(u-e,2)+Math.pow(f-t,2),p>=0?d<p&&(p=d):p=d;return p},Ny=function(e,t,r,_,n,a){var i=[e-r,t-_],o=[n-r,a-_],l=o[0]*o[0]+o[1]*o[1],s=i[0]*i[0]+i[1]*i[1],c=i[0]*o[0]+i[1]*o[1],u=c*c/l;return c<0?s:u>l?(e-n)*(e-n)+(t-a)*(t-a):s-u},Ty=function(e,t,r){for(var _,n,a,i,o=0,l=0;l<r.length/2;l++)if(_=r[2*l],n=r[2*l+1],l+1<r.length/2?(a=r[2*(l+1)],i=r[2*(l+1)+1]):(a=r[2*(l+1-r.length/2)],i=r[2*(l+1-r.length/2)+1]),_==e&&a==e);else{if(!(_>=e&&e>=a||_<=e&&e<=a))continue;(e-_)/(a-_)*(i-n)+n>t&&o++}return o%2!=0},Ly=function(e,t,r,_,n,a,i,o,l){var s,c=new Array(r.length);null!=o[0]?(s=Math.atan(o[1]/o[0]),o[0]<0?s+=Math.PI/2:s=-s-Math.PI/2):s=o;for(var u,f=Math.cos(-s),d=Math.sin(-s),p=0;p<c.length/2;p++)c[2*p]=a/2*(r[2*p]*f-r[2*p+1]*d),c[2*p+1]=i/2*(r[2*p+1]*f+r[2*p]*d),c[2*p]+=_,c[2*p+1]+=n;if(l>0){var h=jy(c,-l);u=My(h)}else u=c;return Ty(e,t,u)},My=function(e){for(var t,r,_,n,a,i,o,l,s=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],_=e[4*c+2],n=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],i=e[4*(c+1)+1],o=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],i=e[1],o=e[2],l=e[3]);var u=Fy(t,r,_,n,a,i,o,l,!0);s[2*c]=u[0],s[2*c+1]=u[1]}return s},jy=function(e,t){for(var r,_,n,a,i=new Array(2*e.length),o=0;o<e.length/2;o++){r=e[2*o],_=e[2*o+1],o<e.length/2-1?(n=e[2*(o+1)],a=e[2*(o+1)+1]):(n=e[0],a=e[1]);var l=a-_,s=-(n-r),c=Math.sqrt(l*l+s*s),u=l/c,f=s/c;i[4*o]=r+u*t,i[4*o+1]=_+f*t,i[4*o+2]=n+u*t,i[4*o+3]=a+f*t}return i},Iy=function(e,t,r,_,n,a,i){return e-=n,t-=a,(e/=r/2+i)*e+(t/=_/2+i)*t<=1},Dy=function(e,t,r,_,n,a,i){var o=[r-e,_-t],l=[e-n,t-a],s=o[0]*o[0]+o[1]*o[1],c=2*(l[0]*o[0]+l[1]*o[1]),u=c*c-4*s*(l[0]*l[0]+l[1]*l[1]-i*i);if(u<0)return[];var f=(-c+Math.sqrt(u))/(2*s),d=(-c-Math.sqrt(u))/(2*s),p=Math.min(f,d),h=Math.max(f,d),g=[];if(p>=0&&p<=1&&g.push(p),h>=0&&h<=1&&g.push(h),0===g.length)return[];var v=g[0]*o[0]+e,m=g[0]*o[1]+t;return g.length>1?g[0]==g[1]?[v,m]:[v,m,g[1]*o[0]+e,g[1]*o[1]+t]:[v,m]},Ry=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},Fy=function(e,t,r,_,n,a,i,o,l){var s=e-n,c=r-e,u=i-n,f=t-a,d=_-t,p=o-a,h=u*f-p*s,g=c*f-d*s,v=p*c-u*d;if(0!==v){var m=h/v,y=g/v,w=-.001;return w<=m&&m<=1.001&&w<=y&&y<=1.001||l?[e+m*c,t+m*d]:[]}return 0===h||0===g?Ry(e,r,i)===i?[i,o]:Ry(e,r,n)===n?[n,a]:Ry(n,i,r)===r?[r,_]:[]:[]},zy=function(e,t,r,_,n,a,i,o){var l,s,c,u,f,d,p=[],h=new Array(r.length),g=!0;if(null==a&&(g=!1),g){for(var v=0;v<h.length/2;v++)h[2*v]=r[2*v]*a+_,h[2*v+1]=r[2*v+1]*i+n;if(o>0){var m=jy(h,-o);s=My(m)}else s=h}else s=r;for(var y=0;y<s.length/2;y++)c=s[2*y],u=s[2*y+1],y<s.length/2-1?(f=s[2*(y+1)],d=s[2*(y+1)+1]):(f=s[0],d=s[1]),0!==(l=Fy(e,t,_,n,c,u,f,d)).length&&p.push(l[0],l[1]);return p},By=function(e,t,r){var _=[e[0]-t[0],e[1]-t[1]],n=Math.sqrt(_[0]*_[0]+_[1]*_[1]),a=(n-r)/n;return a<0&&(a=1e-5),[t[0]+a*_[0],t[1]+a*_[1]]},qy=function(e,t){var r=Gy(e,t);return r=Vy(r)},Vy=function(e){for(var t,r,_=e.length/2,n=1/0,a=1/0,i=-1/0,o=-1/0,l=0;l<_;l++)t=e[2*l],r=e[2*l+1],n=Math.min(n,t),i=Math.max(i,t),a=Math.min(a,r),o=Math.max(o,r);for(var s=2/(i-n),c=2/(o-a),u=0;u<_;u++)t=e[2*u]=e[2*u]*s,r=e[2*u+1]=e[2*u+1]*c,n=Math.min(n,t),i=Math.max(i,t),a=Math.min(a,r),o=Math.max(o,r);if(a<-1)for(var f=0;f<_;f++)r=e[2*f+1]=e[2*f+1]+(-1-a);return e},Gy=function(e,t){var r=1/e*2*Math.PI,_=e%2==0?Math.PI/2+r/2:Math.PI/2;_+=t;for(var n,a=new Array(2*e),i=0;i<e;i++)n=i*r+_,a[2*i]=Math.cos(n),a[2*i+1]=Math.sin(-n);return a},Uy=function(e,t){return Math.min(e/4,t/4,8)},$y=function(e,t){return Math.min(e/10,t/10,8)},Wy=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},Hy=jm({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Yy={pageRank:function(e){for(var t=Hy(e),r=t.dampingFactor,_=t.precision,n=t.iterations,a=t.weight,i=this._private.cy,o=this.byGroup(),l=o.nodes,s=o.edges,c=l.length,u=c*c,f=s.length,d=new Array(u),p=new Array(c),h=(1-r)/c,g=0;g<c;g++){for(var v=0;v<c;v++){d[g*c+v]=0}p[g]=0}for(var m=0;m<f;m++){var y=s[m],w=y.data("source"),b=y.data("target");if(w!==b){var k=l.indexOfId(w),x=l.indexOfId(b),O=a(y);d[x*c+k]+=O,p[k]+=O}}for(var P=1/c+h,E=0;E<c;E++)if(0===p[E])for(var C=0;C<c;C++){d[C*c+E]=P}else for(var A=0;A<c;A++){var S=A*c+E;d[S]=d[S]/p[E]+h}for(var N,T=new Array(c),L=new Array(c),M=0;M<c;M++)T[M]=1;for(var j=0;j<n;j++){for(var I=0;I<c;I++)L[I]=0;for(var D=0;D<c;D++)for(var R=0;R<c;R++){var F=D*c+R;L[D]+=d[F]*T[R]}dy(L),N=T,T=L,L=N;for(var z=0,B=0;B<c;B++){var q=N[B]-T[B];z+=q*q}if(z<_)break}return{rank:function(e){return e=i.collection(e)[0],T[l.indexOf(e)]}}}},Xy=jm({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Zy={degreeCentralityNormalized:function(e){e=Xy(e);var t=this.cy(),r=this.nodes(),_=r.length;if(e.directed){for(var n={},a={},i=0,o=0,l=0;l<_;l++){var s=r[l],c=s.id();e.root=s;var u=this.degreeCentrality(e);i<u.indegree&&(i=u.indegree),o<u.outdegree&&(o=u.outdegree),n[c]=u.indegree,a[c]=u.outdegree}return{indegree:function(e){return 0==i?0:(Sv(e)&&(e=t.filter(e)),n[e.id()]/i)},outdegree:function(e){return 0===o?0:(Sv(e)&&(e=t.filter(e)),a[e.id()]/o)}}}for(var f={},d=0,p=0;p<_;p++){var h=r[p];e.root=h;var g=this.degreeCentrality(e);d<g.degree&&(d=g.degree),f[h.id()]=g.degree}return{degree:function(e){return 0===d?0:(Sv(e)&&(e=t.filter(e)),f[e.id()]/d)}}},degreeCentrality:function(e){e=Xy(e);var t=this.cy(),r=this,_=e,n=_.root,a=_.weight,i=_.directed,o=_.alpha;if(n=t.collection(n)[0],i){for(var l=n.connectedEdges(),s=l.filter((function(e){return e.target().same(n)&&r.has(e)})),c=l.filter((function(e){return e.source().same(n)&&r.has(e)})),u=s.length,f=c.length,d=0,p=0,h=0;h<s.length;h++)d+=a(s[h]);for(var g=0;g<c.length;g++)p+=a(c[g]);return{indegree:Math.pow(u,1-o)*Math.pow(d,o),outdegree:Math.pow(f,1-o)*Math.pow(p,o)}}for(var v=n.connectedEdges().intersection(r),m=v.length,y=0,w=0;w<v.length;w++)y+=a(v[w]);return{degree:Math.pow(m,1-o)*Math.pow(y,o)}}};Zy.dc=Zy.degreeCentrality,Zy.dcn=Zy.degreeCentralityNormalised=Zy.degreeCentralityNormalized;var Ky=jm({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Jy={closenessCentralityNormalized:function(e){for(var t=Ky(e),r=t.harmonic,_=t.weight,n=t.directed,a=this.cy(),i={},o=0,l=this.nodes(),s=this.floydWarshall({weight:_,directed:n}),c=0;c<l.length;c++){for(var u=0,f=l[c],d=0;d<l.length;d++)if(c!==d){var p=s.distance(f,l[d]);u+=r?1/p:p}r||(u=1/u),o<u&&(o=u),i[f.id()]=u}return{closeness:function(e){return 0==o?0:(e=Sv(e)?a.filter(e)[0].id():e.id(),i[e]/o)}}},closenessCentrality:function(e){var t=Ky(e),r=t.root,_=t.weight,n=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var i=this.dijkstra({root:r,weight:_,directed:n}),o=0,l=this.nodes(),s=0;s<l.length;s++){var c=l[s];if(!c.same(r)){var u=i.distanceTo(c);o+=a?1/u:u}}return a?o:1/o}};Jy.cc=Jy.closenessCentrality,Jy.ccn=Jy.closenessCentralityNormalised=Jy.closenessCentralityNormalized;var Qy=jm({weight:null,directed:!1}),ew={betweennessCentrality:function(e){for(var t=Qy(e),r=t.directed,_=t.weight,n=null!=_,a=this.cy(),i=this.nodes(),o={},l={},s=0,c=function(e,t){l[e]=t,t>s&&(s=t)},u=function(e){return l[e]},f=0;f<i.length;f++){var d=i[f],p=d.id();o[p]=r?d.outgoers().nodes():d.openNeighborhood().nodes(),c(p,0)}for(var h=function(e){for(var t=i[e].id(),r=[],l={},s={},f={},d=new uv.default((function(e,t){return f[e]-f[t]})),p=0;p<i.length;p++){var h=i[p].id();l[h]=[],s[h]=0,f[h]=1/0}for(s[t]=1,f[t]=0,d.push(t);!d.empty();){var g=d.pop();if(r.push(g),n)for(var v=0;v<o[g].length;v++){var m=o[g][v],y=a.getElementById(g),w=void 0;w=y.edgesTo(m).length>0?y.edgesTo(m)[0]:m.edgesTo(y)[0];var b=_(w);m=m.id(),f[m]>f[g]+b&&(f[m]=f[g]+b,d.nodes.indexOf(m)<0?d.push(m):d.updateItem(m),s[m]=0,l[m]=[]),f[m]==f[g]+b&&(s[m]=s[m]+s[g],l[m].push(g))}else for(var k=0;k<o[g].length;k++){var x=o[g][k].id();f[x]==1/0&&(d.push(x),f[x]=f[g]+1),f[x]==f[g]+1&&(s[x]=s[x]+s[g],l[x].push(g))}}for(var O={},P=0;P<i.length;P++)O[i[P].id()]=0;for(;r.length>0;){for(var E=r.pop(),C=0;C<l[E].length;C++){var A=l[E][C];O[A]=O[A]+s[A]/s[E]*(1+O[E])}E!=i[e].id()&&c(E,u(E)+O[E])}},g=0;g<i.length;g++)h(g);var v={betweenness:function(e){var t=a.collection(e).id();return u(t)},betweennessNormalized:function(e){if(0==s)return 0;var t=a.collection(e).id();return u(t)/s}};return v.betweennessNormalised=v.betweennessNormalized,v}};ew.bc=ew.betweennessCentrality;var tw=jm({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),rw=function(e,t){for(var r=0,_=0;_<t.length;_++)r+=t[_](e);return r},_w=function(e,t){for(var r,_=0;_<t;_++){r=0;for(var n=0;n<t;n++)r+=e[n*t+_];for(var a=0;a<t;a++)e[a*t+_]=e[a*t+_]/r}},nw=function(e,t,r){for(var _=new Array(r*r),n=0;n<r;n++){for(var a=0;a<r;a++)_[n*r+a]=0;for(var i=0;i<r;i++)for(var o=0;o<r;o++)_[n*r+o]+=e[n*r+i]*t[i*r+o]}return _},aw=function(e,t,r){for(var _=e.slice(0),n=1;n<r;n++)e=nw(e,_,t);return e},iw=function(e,t,r){for(var _=new Array(t*t),n=0;n<t*t;n++)_[n]=Math.pow(e[n],r);return _w(_,t),_},ow=function(e,t,r,_){for(var n=0;n<r;n++){if(Math.round(e[n]*Math.pow(10,_))/Math.pow(10,_)!==Math.round(t[n]*Math.pow(10,_))/Math.pow(10,_))return!1}return!0},lw=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},sw=function(e){for(var t=this.nodes(),r=this.edges(),_=this.cy(),n=function(e){return tw(e)}(e),a={},i=0;i<t.length;i++)a[t[i].id()]=i;for(var o,l=t.length,s=l*l,c=new Array(s),u=0;u<s;u++)c[u]=0;for(var f=0;f<r.length;f++){var d=r[f],p=a[d.source().id()],h=a[d.target().id()],g=rw(d,n.attributes);c[p*l+h]+=g,c[h*l+p]+=g}!function(e,t,r){for(var _=0;_<t;_++)e[_*t+_]=r}(c,l,n.multFactor),_w(c,l);for(var v=!0,m=0;v&&m<n.maxIterations;)v=!1,o=aw(c,l,n.expandFactor),c=iw(o,l,n.inflateFactor),ow(c,o,s,4)||(v=!0),m++;var y=function(e,t,r,_){for(var n=[],a=0;a<t;a++){for(var i=[],o=0;o<t;o++)Math.round(1e3*e[a*t+o])/1e3>0&&i.push(r[o]);0!==i.length&&n.push(_.collection(i))}return n}(c,l,t,_);return y=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&lw(e[t],e[r])&&e.splice(r,1);return e}(y),y},cw={markovClustering:sw,mcl:sw},uw=function(e){return e},fw=function(e,t){return Math.abs(t-e)},dw=function(e,t,r){return e+fw(t,r)},pw=function(e,t,r){return e+Math.pow(r-t,2)},hw=function(e){return Math.sqrt(e)},gw=function(e,t,r){return Math.max(e,fw(t,r))},vw=function(e,t,r,_,n){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:uw,i=_,o=0;o<e;o++)i=n(i,t(o),r(o));return a(i)},mw={euclidean:function(e,t,r){return e>=2?vw(e,t,r,0,pw,hw):vw(e,t,r,0,dw)},squaredEuclidean:function(e,t,r){return vw(e,t,r,0,pw)},manhattan:function(e,t,r){return vw(e,t,r,0,dw)},max:function(e,t,r){return vw(e,t,r,-1/0,gw)}};function yw(e,t,r,_,n,a){var i;return i=Nv(e)?e:mw[e]||mw.euclidean,0===t&&Nv(e)?i(n,a):i(t,r,_,n,a)}mw["squared-euclidean"]=mw.squaredEuclidean,mw.squaredeuclidean=mw.squaredEuclidean;var ww=jm({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),bw=function(e){return ww(e)},kw=function(e,t,r,_,n){var a="kMedoids"!==n?function(e){return r[e]}:function(e){return _[e](r)},i=r,o=t;return yw(e,_.length,a,(function(e){return _[e](t)}),i,o)},xw=function(e,t,r){for(var _=r.length,n=new Array(_),a=new Array(_),i=new Array(t),o=null,l=0;l<_;l++)n[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var s=0;s<t;s++){o=[];for(var c=0;c<_;c++)o[c]=Math.random()*(a[c]-n[c])+n[c];i[s]=o}return i},Ow=function(e,t,r,_,n){for(var a=1/0,i=0,o=0;o<t.length;o++){var l=kw(r,e,t[o],_,n);l<a&&(a=l,i=o)}return i},Pw=function(e,t,r){for(var _=[],n=null,a=0;a<t.length;a++)r[(n=t[a]).id()]===e&&_.push(n);return _},Ew=function(e,t,r){for(var _=0;_<e.length;_++)for(var n=0;n<e[_].length;n++){if(Math.abs(e[_][n]-t[_][n])>r)return!1}return!0},Cw=function(e,t,r){for(var _=0;_<r;_++)if(e===t[_])return!0;return!1},Aw=function(e,t){var r=new Array(t);if(e.length<50)for(var _=0;_<t;_++){for(var n=e[Math.floor(Math.random()*e.length)];Cw(n,r,_);)n=e[Math.floor(Math.random()*e.length)];r[_]=n}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},Sw=function(e,t,r){for(var _=0,n=0;n<t.length;n++)_+=kw("manhattan",t[n],e,r,"kMedoids");return _},Nw=function(e,t,r,_,n){for(var a,i,o=0;o<t.length;o++)for(var l=0;l<e.length;l++)_[o][l]=Math.pow(r[o][l],n.m);for(var s=0;s<e.length;s++)for(var c=0;c<n.attributes.length;c++){a=0,i=0;for(var u=0;u<t.length;u++)a+=_[u][s]*n.attributes[c](t[u]),i+=_[u][s];e[s][c]=a/i}},Tw=function(e,t,r,_,n){for(var a=0;a<e.length;a++)t[a]=e[a].slice();for(var i,o,l,s=2/(n.m-1),c=0;c<r.length;c++)for(var u=0;u<_.length;u++){i=0;for(var f=0;f<r.length;f++)o=kw(n.distance,_[u],r[c],n.attributes,"cmeans"),l=kw(n.distance,_[u],r[f],n.attributes,"cmeans"),i+=Math.pow(o/l,s);e[u][c]=1/i}},Lw=function(e){var t,r,_,n,a,i=this.cy(),o=this.nodes(),l=bw(e);n=new Array(o.length);for(var s=0;s<o.length;s++)n[s]=new Array(l.k);_=new Array(o.length);for(var c=0;c<o.length;c++)_[c]=new Array(l.k);for(var u=0;u<o.length;u++){for(var f=0,d=0;d<l.k;d++)_[u][d]=Math.random(),f+=_[u][d];for(var p=0;p<l.k;p++)_[u][p]=_[u][p]/f}r=new Array(l.k);for(var h=0;h<l.k;h++)r[h]=new Array(l.attributes.length);a=new Array(o.length);for(var g=0;g<o.length;g++)a[g]=new Array(l.k);for(var v=!0,m=0;v&&m<l.maxIterations;)v=!1,Nw(r,o,_,a,l),Tw(_,n,r,o,l),Ew(_,n,l.sensitivityThreshold)||(v=!0),m++;return t=function(e,t,r,_){for(var n,a,i=new Array(r.k),o=0;o<i.length;o++)i[o]=[];for(var l=0;l<t.length;l++){n=-1/0,a=-1;for(var s=0;s<t[0].length;s++)t[l][s]>n&&(n=t[l][s],a=s);i[a].push(e[l])}for(var c=0;c<i.length;c++)i[c]=_.collection(i[c]);return i}(o,_,l,i),{clusters:t,degreeOfMembership:_}},Mw={kMeans:function(e){var t,r=this.cy(),_=this.nodes(),n=null,a=bw(e),i=new Array(a.k),o={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=xw(_,a.k,a.attributes)):t="object"===hv(a.testCentroids)?a.testCentroids:xw(_,a.k,a.attributes):t=xw(_,a.k,a.attributes);for(var l,s,c,u=!0,f=0;u&&f<a.maxIterations;){for(var d=0;d<_.length;d++)o[(n=_[d]).id()]=Ow(n,t,a.distance,a.attributes,"kMeans");u=!1;for(var p=0;p<a.k;p++){var h=Pw(p,_,o);if(0!==h.length){for(var g=a.attributes.length,v=t[p],m=new Array(g),y=new Array(g),w=0;w<g;w++){y[w]=0;for(var b=0;b<h.length;b++)n=h[b],y[w]+=a.attributes[w](n);m[w]=y[w]/h.length,l=m[w],s=v[w],c=a.sensitivityThreshold,Math.abs(s-l)<=c||(u=!0)}t[p]=m,i[p]=r.collection(h)}}f++}return i},kMedoids:function(e){var t,r,_=this.cy(),n=this.nodes(),a=null,i=bw(e),o=new Array(i.k),l={},s=new Array(i.k);i.testMode?"number"==typeof i.testCentroids||(t="object"===hv(i.testCentroids)?i.testCentroids:Aw(n,i.k)):t=Aw(n,i.k);for(var c=!0,u=0;c&&u<i.maxIterations;){for(var f=0;f<n.length;f++)l[(a=n[f]).id()]=Ow(a,t,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<t.length;d++){var p=Pw(d,n,l);if(0!==p.length){s[d]=Sw(t[d],p,i.attributes);for(var h=0;h<p.length;h++)(r=Sw(p[h],p,i.attributes))<s[d]&&(s[d]=r,t[d]=p[h],c=!0);o[d]=_.collection(p)}}u++}return o},fuzzyCMeans:Lw,fcm:Lw},jw=jm({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Iw={single:"min",complete:"max"},Dw=function(e,t,r,_,n){for(var a,i=0,o=1/0,l=n.attributes,s=function(e,t){return yw(n.distance,l.length,(function(t){return l[t](e)}),(function(e){return l[e](t)}),e,t)},c=0;c<e.length;c++){var u=e[c].key,f=r[u][_[u]];f<o&&(i=u,o=f)}if("threshold"===n.mode&&o>=n.threshold||"dendrogram"===n.mode&&1===e.length)return!1;var d,p=t[i],h=t[_[i]];d="dendrogram"===n.mode?{left:p,right:h,key:p.key}:{value:p.value.concat(h.value),key:p.key},e[p.index]=d,e.splice(h.index,1),t[p.key]=d;for(var g=0;g<e.length;g++){var v=e[g];p.key===v.key?a=1/0:"min"===n.linkage?(a=r[p.key][v.key],r[p.key][v.key]>r[h.key][v.key]&&(a=r[h.key][v.key])):"max"===n.linkage?(a=r[p.key][v.key],r[p.key][v.key]<r[h.key][v.key]&&(a=r[h.key][v.key])):a="mean"===n.linkage?(r[p.key][v.key]*p.size+r[h.key][v.key]*h.size)/(p.size+h.size):"dendrogram"===n.mode?s(v.value,p.value):s(v.value[0],p.value[0]),r[p.key][v.key]=r[v.key][p.key]=a}for(var m=0;m<e.length;m++){var y=e[m].key;if(_[y]===p.key||_[y]===h.key){for(var w=y,b=0;b<e.length;b++){var k=e[b].key;r[y][k]<r[y][w]&&(w=k)}_[y]=w}e[m].index=m}return p.key=h.key=p.index=h.index=null,!0},Rw=function e(t,r,_){t&&(t.value?r.push(t.value):(t.left&&e(t.left,r),t.right&&e(t.right,r)))},Fw=function e(t,r){if(!t)return"";if(t.left&&t.right){var _=e(t.left,r),n=e(t.right,r),a=r.add({group:"nodes",data:{id:_+","+n}});return r.add({group:"edges",data:{source:_,target:a.id()}}),r.add({group:"edges",data:{source:n,target:a.id()}}),a.id()}return t.value?t.value.id():void 0},zw=function e(t,r,_){if(!t)return[];var n=[],a=[],i=[];return 0===r?(t.left&&Rw(t.left,n),t.right&&Rw(t.right,a),i=n.concat(a),[_.collection(i)]):1===r?t.value?[_.collection(t.value)]:(t.left&&Rw(t.left,n),t.right&&Rw(t.right,a),[_.collection(n),_.collection(a)]):t.value?[_.collection(t.value)]:(t.left&&(n=e(t.left,r-1,_)),t.right&&(a=e(t.right,r-1,_)),n.concat(a))},Bw=function(e){for(var t=this.cy(),r=this.nodes(),_=function(e){var t=jw(e),r=Iw[t.linkage];return null!=r&&(t.linkage=r),t}(e),n=_.attributes,a=function(e,t){return yw(_.distance,n.length,(function(t){return n[t](e)}),(function(e){return n[e](t)}),e,t)},i=[],o=[],l=[],s=[],c=0;c<r.length;c++){var u={value:"dendrogram"===_.mode?r[c]:[r[c]],key:c,index:c};i[c]=u,s[c]=u,o[c]=[],l[c]=0}for(var f=0;f<i.length;f++)for(var d=0;d<=f;d++){var p=void 0;p="dendrogram"===_.mode?f===d?1/0:a(i[f].value,i[d].value):f===d?1/0:a(i[f].value[0],i[d].value[0]),o[f][d]=p,o[d][f]=p,p<o[f][l[f]]&&(l[f]=d)}for(var h,g=Dw(i,s,o,l,_);g;)g=Dw(i,s,o,l,_);return"dendrogram"===_.mode?(h=zw(i[0],_.dendrogramDepth,t),_.addDendrogram&&Fw(i[0],t)):(h=new Array(i.length),i.forEach((function(e,r){e.key=e.index=null,h[r]=t.collection(e.value)}))),h},qw={hierarchicalClustering:Bw,hca:Bw},Vw=jm({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Gw=function(e,t,r,_){var n=function(e,t){return _[t](e)};return-yw(e,_.length,(function(e){return n(t,e)}),(function(e){return n(r,e)}),t,r)},Uw=function(e,t){var r=null;return r="median"===t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t)):e=e.slice(t,r);for(var a=0,i=e.length-1;i>=0;i--){var o=e[i];n?isFinite(o)||(e[i]=-1/0,a++):e.splice(i,1)}_&&e.sort((function(e,t){return e-t}));var l=e.length,s=Math.floor(l/2);return l%2!=0?e[s+1+a]:(e[s-1+a]+e[s+a])/2}(e):"mean"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,_=0,n=0,a=t;a<r;a++){var i=e[a];isFinite(i)&&(_+=i,n++)}return _/n}(e):"min"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,_=1/0,n=t;n<r;n++){var a=e[n];isFinite(a)&&(_=Math.min(a,_))}return _}(e):"max"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,_=-1/0,n=t;n<r;n++){var a=e[n];isFinite(a)&&(_=Math.max(a,_))}return _}(e):t,r},$w=function(e,t,r){for(var _=[],n=0;n<e;n++){for(var a=-1,i=-1/0,o=0;o<r.length;o++){var l=r[o];t[n*e+l]>i&&(a=l,i=t[n*e+l])}a>0&&_.push(a)}for(var s=0;s<r.length;s++)_[r[s]]=r[s];return _},Ww=function(e){for(var t,r,_,n,a,i,o=this.cy(),l=this.nodes(),s=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||Cm("Damping must range on [0.5, 1).  Got: ".concat(t));var _=["median","mean","min","max"];return _.some((function(e){return e===r}))||Mv(r)||Cm("Preference must be one of [".concat(_.map((function(e){return"'".concat(e,"'")})).join(", "),"] or a number.  Got: ").concat(r)),Vw(e)}(e),c={},u=0;u<l.length;u++)c[l[u].id()]=u;r=(t=l.length)*t,_=new Array(r);for(var f=0;f<r;f++)_[f]=-1/0;for(var d=0;d<t;d++)for(var p=0;p<t;p++)d!==p&&(_[d*t+p]=Gw(s.distance,l[d],l[p],s.attributes));n=Uw(_,s.preference);for(var h=0;h<t;h++)_[h*t+h]=n;a=new Array(r);for(var g=0;g<r;g++)a[g]=0;i=new Array(r);for(var v=0;v<r;v++)i[v]=0;for(var m=new Array(t),y=new Array(t),w=new Array(t),b=0;b<t;b++)m[b]=0,y[b]=0,w[b]=0;for(var k,x=new Array(t*s.minIterations),O=0;O<x.length;O++)x[O]=0;for(k=0;k<s.maxIterations;k++){for(var P=0;P<t;P++){for(var E=-1/0,C=-1/0,A=-1,S=0,N=0;N<t;N++)m[N]=a[P*t+N],(S=i[P*t+N]+_[P*t+N])>=E?(C=E,E=S,A=N):S>C&&(C=S);for(var T=0;T<t;T++)a[P*t+T]=(1-s.damping)*(_[P*t+T]-E)+s.damping*m[T];a[P*t+A]=(1-s.damping)*(_[P*t+A]-C)+s.damping*m[A]}for(var L=0;L<t;L++){for(var M=0,j=0;j<t;j++)m[j]=i[j*t+L],y[j]=Math.max(0,a[j*t+L]),M+=y[j];M-=y[L],y[L]=a[L*t+L],M+=y[L];for(var I=0;I<t;I++)i[I*t+L]=(1-s.damping)*Math.min(0,M-y[I])+s.damping*m[I];i[L*t+L]=(1-s.damping)*(M-y[L])+s.damping*m[L]}for(var D=0,R=0;R<t;R++){var F=i[R*t+R]+a[R*t+R]>0?1:0;x[k%s.minIterations*t+R]=F,D+=F}if(D>0&&(k>=s.minIterations-1||k==s.maxIterations-1)){for(var z=0,B=0;B<t;B++){w[B]=0;for(var q=0;q<s.minIterations;q++)w[B]+=x[q*t+B];0!==w[B]&&w[B]!==s.minIterations||z++}if(z===t)break}}for(var V=function(e,t,r){for(var _=[],n=0;n<e;n++)t[n*e+n]+r[n*e+n]>0&&_.push(n);return _}(t,a,i),G=function(e,t,r){for(var _=$w(e,t,r),n=0;n<r.length;n++){for(var a=[],i=0;i<_.length;i++)_[i]===r[n]&&a.push(i);for(var o=-1,l=-1/0,s=0;s<a.length;s++){for(var c=0,u=0;u<a.length;u++)c+=t[a[u]*e+a[s]];c>l&&(o=s,l=c)}r[n]=a[o]}return $w(e,t,r)}(t,_,V),U={},$=0;$<V.length;$++)U[V[$]]=[];for(var W=0;W<l.length;W++){var H=G[c[l[W].id()]];null!=H&&U[H].push(l[W])}for(var Y=new Array(V.length),X=0;X<V.length;X++)Y[X]=o.collection(U[V[X]]);return Y},Hw={affinityPropagation:Ww,ap:Ww},Yw=jm({root:void 0,directed:!1}),Xw=function(){var e=this,t={},r=0,_=0,n=[],a=[],i={},o=function o(l,s,c){l===c&&(_+=1),t[s]={id:r,low:r++,cutVertex:!1};var u,f,d,p,h=e.getElementById(s).connectedEdges().intersection(e);0===h.size()?n.push(e.spawn(e.getElementById(s))):h.forEach((function(r){u=r.source().id(),f=r.target().id(),(d=u===s?f:u)!==c&&(p=r.id(),i[p]||(i[p]=!0,a.push({x:s,y:d,edge:r})),d in t?t[s].low=Math.min(t[s].low,t[d].id):(o(l,d,s),t[s].low=Math.min(t[s].low,t[d].low),t[s].id<=t[d].low&&(t[s].cutVertex=!0,function(r,_){for(var i=a.length-1,o=[],l=e.spawn();a[i].x!=r||a[i].y!=_;)o.push(a.pop().edge),i--;o.push(a.pop().edge),o.forEach((function(r){var _=r.connectedNodes().intersection(e);l.merge(r),_.forEach((function(r){var _=r.id(),n=r.connectedEdges().intersection(e);l.merge(r),t[_].cutVertex?l.merge(n.filter((function(e){return e.isLoop()}))):l.merge(n)}))})),n.push(l)}(s,d))))}))};e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||(_=0,o(r,r),t[r].cutVertex=_>1)}}));var l=Object.keys(t).filter((function(e){return t[e].cutVertex})).map((function(t){return e.getElementById(t)}));return{cut:e.spawn(l),components:n}},Zw=function(){var e=this,t={},r=0,_=[],n=[],a=e.spawn(e),i=function i(o){if(n.push(o),t[o]={index:r,low:r++,explored:!1},e.getElementById(o).connectedEdges().intersection(e).forEach((function(e){var r=e.target().id();r!==o&&(r in t||i(r),t[r].explored||(t[o].low=Math.min(t[o].low,t[r].low)))})),t[o].index===t[o].low){for(var l=e.spawn();;){var s=n.pop();if(l.merge(e.getElementById(s)),t[s].low=t[o].index,t[s].explored=!0,s===o)break}var c=l.edgesWith(l),u=l.merge(c);_.push(u),a=a.difference(u)}};return e.forEach((function(e){if(e.isNode()){var r=e.id();r in t||i(r)}})),{cut:a,components:_}},Kw={};[Um,Wm,Hm,Xm,Km,Qm,_y,Yy,Zy,Jy,ew,cw,Mw,qw,Hw,{hierholzer:function(e){if(!Lv(e)){var t=arguments;e={root:t[0],directed:t[1]}}var r,_,n,a=Yw(e),i=a.root,o=a.directed,l=this,s=!1;i&&(n=Sv(i)?this.filter(i)[0].id():i[0].id());var c={},u={};o?l.forEach((function(e){var t=e.id();if(e.isNode()){var n=e.indegree(!0),a=e.outdegree(!0),i=n-a,o=a-n;1==i?r?s=!0:r=t:1==o?_?s=!0:_=t:(o>1||i>1)&&(s=!0),c[t]=[],e.outgoers().forEach((function(e){e.isEdge()&&c[t].push(e.id())}))}else u[t]=[void 0,e.target().id()]})):l.forEach((function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(r?_?s=!0:_=t:r=t),c[t]=[],e.connectedEdges().forEach((function(e){return c[t].push(e.id())}))):u[t]=[e.source().id(),e.target().id()]}));var f={found:!1,trail:void 0};if(s)return f;if(_&&r)if(o){if(n&&_!=n)return f;n=_}else{if(n&&_!=n&&r!=n)return f;n||(n=_)}else n||(n=l[0].id());var d=function(e){for(var t,r,_,n=e,a=[e];c[n].length;)t=c[n].shift(),r=u[t][0],n!=(_=u[t][1])?(c[_]=c[_].filter((function(e){return e!=t})),n=_):o||n==r||(c[r]=c[r].filter((function(e){return e!=t})),n=r),a.unshift(t),a.unshift(n);return a},p=[],h=[];for(h=d(n);1!=h.length;)0==c[h[0]].length?(p.unshift(l.getElementById(h.shift())),p.unshift(l.getElementById(h.shift()))):h=d(h.shift()).concat(h);for(var g in p.unshift(l.getElementById(h.shift())),c)if(c[g].length)return f;return f.found=!0,f.trail=this.spawn(p,!0),f}},{hopcroftTarjanBiconnected:Xw,htbc:Xw,htb:Xw,hopcroftTarjanBiconnectedComponents:Xw},{tarjanStronglyConnected:Zw,tsc:Zw,tscc:Zw,tarjanStronglyConnectedComponents:Zw}].forEach((function(e){Qv(Kw,e)}));
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Jw=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Jw.prototype={fulfill:function(e){return Qw(this,1,"fulfillValue",e)},reject:function(e){return Qw(this,2,"rejectReason",e)},then:function(e,t){var r=this,_=new Jw;return r.onFulfilled.push(rb(e,_,"fulfill")),r.onRejected.push(rb(t,_,"reject")),eb(r),_.proxy}};var Qw=function(e,t,r,_){return 0===e.state&&(e.state=t,e[r]=_,eb(e)),e},eb=function(e){1===e.state?tb(e,"onFulfilled",e.fulfillValue):2===e.state&&tb(e,"onRejected",e.rejectReason)},tb=function(e,t,r){if(0!==e[t].length){var _=e[t];e[t]=[];var n=function(){for(var e=0;e<_.length;e++)_[e](r)};"function"==typeof setImmediate?setImmediate(n):setTimeout(n,0)}},rb=function(e,t,r){return function(_){if("function"!=typeof e)t[r].call(t,_);else{var n;try{n=e(_)}catch(e){return void t.reject(e)}_b(t,n)}}},_b=function e(t,r){if(t!==r&&t.proxy!==r){var _;if("object"===hv(r)&&null!==r||"function"==typeof r)try{_=r.then}catch(e){return void t.reject(e)}if("function"!=typeof _)t.fulfill(r);else{var n=!1;try{_.call(r,(function(_){n||(n=!0,_===r?t.reject(new TypeError("circular thenable chain")):e(t,_))}),(function(e){n||(n=!0,t.reject(e))}))}catch(e){n||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};Jw.all=function(e){return new Jw((function(t,r){for(var _=new Array(e.length),n=0,a=function(r,a){_[r]=a,++n===e.length&&t(_)},i=0;i<e.length;i++)!function(t){var _=e[t];null!=_&&null!=_.then?_.then((function(e){a(t,e)}),(function(e){r(e)})):a(t,_)}(i)}))},Jw.resolve=function(e){return new Jw((function(t,r){t(e)}))},Jw.reject=function(e){return new Jw((function(t,r){r(e)}))};var nb="undefined"!=typeof Promise?Promise:Jw,ab=function(e,t,r){var _=Fv(e),n=!_,a=this._private=Qv({duration:1e3},t,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&Nv(a.complete)&&a.completes.push(a.complete),n){var i=e.position();a.startPosition=a.startPosition||{x:i.x,y:i.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(_){var o=e.pan();a.startPan={x:o.x,y:o.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},ib=ab.prototype;Qv(ib,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),Iv(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(t,r){var _=e[t];null!=_&&(e[t]=e[r],e[r]=_)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var _=0;_<e.style.length;_++){var n=e.style[_],a=n.name,i=e.startStyle[a];e.startStyle[a]=n,e.style[_]=i}return t&&this.play(),this},promise:function(e){var t,r=this._private;if("frame"===e)t=r.frames;else t=r.completes;return new nb((function(e,r){t.push((function(){e()}))}))}}),ib.complete=ib.completed,ib.run=ib.play,ib.running=ib.playing;var ob={};[{animated:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var r=t[0];return r?r._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<t.length;r++){t[r]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=this,_=void 0!==r.length,n=_?r:[r],a=this._private.cy||this,i=!_,o=!i;if(!a.styleEnabled())return this;var l=a.style();if(e=Qv({},e,t),0===Object.keys(e).length)return new ab(n[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=l.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var s=e.renderedPosition,c=a.pan(),u=a.zoom();e.position=ay(s,u,c)}if(i&&null!=e.panBy){var f=e.panBy,d=a.pan();e.pan={x:d.x+f.x,y:d.y+f.y}}var p=e.center||e.centre;if(i&&null!=p){var h=a.getCenterPan(p.eles,e.zoom);null!=h&&(e.pan=h)}if(i&&null!=e.fit){var g=e.fit,v=a.getFitViewport(g.eles||g.boundingBox,g.padding);null!=v&&(e.pan=v.pan,e.zoom=v.zoom)}if(i&&Lv(e.zoom)){var m=a.getZoomedViewport(e.zoom);null!=m?(m.zoomed&&(e.zoom=m.zoom),m.panned&&(e.pan=m.pan)):e.zoom=null}return new ab(n[0],e)}},animate:function(){return function(e,t){var r=this,_=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=Qv({},e,t));for(var n=0;n<_.length;n++){var a=_[n],i=a.animated()&&(void 0===e.queue||e.queue);a.animation(e,i?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var r=this,_=void 0!==r.length?r:[r],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var a=0;a<_.length;a++){for(var i=_[a]._private,o=i.animation.current,l=0;l<o.length;l++){var s=o[l]._private;t&&(s.duration=0)}e&&(i.animation.queue=[]),t||(i.animation.current=[])}return n.notify("draw"),this}}},{data:function(e){return e=Qv({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,r){var _=e,n=this,a=void 0!==n.length,i=a?n:[n],o=a?n[0]:n;if(Sv(t)){var l,s=-1!==t.indexOf(".")&&pv.default(t);if(_.allowGetting&&void 0===r)return o&&(_.beforeGet(o),l=s&&void 0===o._private[_.field][t]?fv.default(o._private[_.field],s):o._private[_.field][t]),l;if(_.allowSetting&&void 0!==r&&!_.immutableKeys[t]){var c=yv({},t,r);_.beforeSet(n,c);for(var u=0,f=i.length;u<f;u++){var d=i[u];_.canSet(d)&&(s&&void 0===o._private[_.field][t]?dv.default(d._private[_.field],s,r):d._private[_.field][t]=r)}_.updateStyle&&n.updateStyle(),_.onSet(n),_.settingTriggersEvent&&n[_.triggerFnName](_.settingEvent)}}else if(_.allowSetting&&Lv(t)){var p,h,g=t,v=Object.keys(g);_.beforeSet(n,g);for(var m=0;m<v.length;m++){if(h=g[p=v[m]],!_.immutableKeys[p])for(var y=0;y<i.length;y++){var w=i[y];_.canSet(w)&&(w._private[_.field][p]=h)}}_.updateStyle&&n.updateStyle(),_.onSet(n),_.settingTriggersEvent&&n[_.triggerFnName](_.settingEvent)}else if(_.allowBinding&&Nv(t)){var b=t;n.on(_.bindingEvent,b)}else if(_.allowGetting&&void 0===t){var k;return o&&(_.beforeGet(o),k=o._private[_.field]),k}return n}},removeData:function(e){return e=Qv({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var r=e,_=this,n=void 0!==_.length?_:[_];if(Sv(t)){for(var a=t.split(/\s+/),i=a.length,o=0;o<i;o++){var l=a[o];if(!Bv(l))if(!r.immutableKeys[l])for(var s=0,c=n.length;s<c;s++)n[s]._private[r.field][l]=void 0}r.triggerEvent&&_[r.triggerFnName](r.event)}else if(void 0===t){for(var u=0,f=n.length;u<f;u++)for(var d=n[u]._private[r.field],p=Object.keys(d),h=0;h<p.length;h++){var g=p[h];!r.immutableKeys[g]&&(d[g]=void 0)}r.triggerEvent&&_[r.triggerFnName](r.event)}return _}}},{eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var r=this,_=Array.prototype.slice.call(arguments,0);return new nb((function(e,t){var n=_.concat([function(t){r.off.apply(r,a),e(t)}]),a=n.concat([]);r.on.apply(r,n)}))}}}].forEach((function(e){Qv(ob,e)}));var lb={animate:ob.animate(),animation:ob.animation(),animated:ob.animated(),clearQueue:ob.clearQueue(),delay:ob.delay(),delayAnimation:ob.delayAnimation(),stop:ob.stop()},sb={classes:function(e){var t=this;if(void 0===e){var r=[];return t[0]._private.classes.forEach((function(e){return r.push(e)})),r}Tv(e)||(e=(e||"").match(/\S+/g)||[]);for(var _=[],n=new qm(e),a=0;a<t.length;a++){for(var i=t[a],o=i._private,l=o.classes,s=!1,c=0;c<e.length;c++){var u=e[c];if(!l.has(u)){s=!0;break}}s||(s=l.size!==e.length),s&&(o.classes=n,_.push(i))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){Tv(e)||(e=e.match(/\S+/g)||[]);for(var r=this,_=void 0===t,n=[],a=0,i=r.length;a<i;a++)for(var o=r[a],l=o._private.classes,s=!1,c=0;c<e.length;c++){var u=e[c],f=l.has(u),d=!1;t||_&&!f?(l.add(u),d=!0):(!t||_&&f)&&(l.delete(u),d=!0),!s&&d&&(n.push(o),s=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout((function(){r.removeClass(e)}),t),r}};sb.className=sb.classNames=sb.classes;var cb={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Hv,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};cb.variable="(?:[\\w-.]|(?:\\\\"+cb.metaChar+"))+",cb.className="(?:[\\w-]|(?:\\\\"+cb.metaChar+"))+",cb.value=cb.string+"|"+cb.number,cb.id=cb.variable,function(){var e,t,r;for(e=cb.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],cb.comparatorOp+="|@"+t;for(e=cb.comparatorOp.split("|"),r=0;r<e.length;r++)(t=e[r]).indexOf("!")>=0||"="!==t&&(cb.comparatorOp+="|\\!"+t)}();var ub=0,fb=1,db=2,pb=3,hb=4,gb=5,vb=6,mb=7,yb=8,wb=9,bb=10,kb=11,xb=12,Ob=13,Pb=14,Eb=15,Cb=16,Ab=17,Sb=18,Nb=19,Tb=20,Lb=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort((function(e,t){return function(e,t){return-1*Jv(e,t)}(e.selector,t.selector)})),Mb=function(){for(var e,t={},r=0;r<Lb.length;r++)t[(e=Lb[r]).selector]=e.matches;return t}(),jb="("+Lb.map((function(e){return e.selector})).join("|")+")",Ib=function(e){return e.replace(new RegExp("\\\\("+cb.metaChar+")","g"),(function(e,t){return t}))},Db=function(e,t,r){e[e.length-1]=r},Rb=[{name:"group",query:!0,regex:"("+cb.group+")",populate:function(e,t,r){var _=wv(r,1)[0];t.checks.push({type:ub,value:"*"===_?_:_+"s"})}},{name:"state",query:!0,regex:jb,populate:function(e,t,r){var _=wv(r,1)[0];t.checks.push({type:mb,value:_})}},{name:"id",query:!0,regex:"\\#("+cb.id+")",populate:function(e,t,r){var _=wv(r,1)[0];t.checks.push({type:yb,value:Ib(_)})}},{name:"className",query:!0,regex:"\\.("+cb.className+")",populate:function(e,t,r){var _=wv(r,1)[0];t.checks.push({type:wb,value:Ib(_)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+cb.variable+")\\s*\\]",populate:function(e,t,r){var _=wv(r,1)[0];t.checks.push({type:hb,field:Ib(_)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+cb.variable+")\\s*("+cb.comparatorOp+")\\s*("+cb.value+")\\s*\\]",populate:function(e,t,r){var _=wv(r,3),n=_[0],a=_[1],i=_[2];i=null!=new RegExp("^"+cb.string+"$").exec(i)?i.substring(1,i.length-1):parseFloat(i),t.checks.push({type:pb,field:Ib(n),operator:a,value:i})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+cb.boolOp+")\\s*("+cb.variable+")\\s*\\]",populate:function(e,t,r){var _=wv(r,2),n=_[0],a=_[1];t.checks.push({type:gb,field:Ib(a),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+cb.meta+")\\s*("+cb.comparatorOp+")\\s*("+cb.number+")\\s*\\]\\]",populate:function(e,t,r){var _=wv(r,3),n=_[0],a=_[1],i=_[2];t.checks.push({type:vb,field:Ib(n),operator:a,value:parseFloat(i)})}},{name:"nextQuery",separator:!0,regex:cb.separator,populate:function(e,t){var r=e.currentSubject,_=e.edgeCount,n=e.compoundCount,a=e[e.length-1];return null!=r&&(a.subject=r,e.currentSubject=null),a.edgeCount=_,a.compoundCount=n,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:cb.directedEdge,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},_=t,n={checks:[]};return r.checks.push({type:kb,source:_,target:n}),Db(e,0,r),e.edgeCount++,n}var a={checks:[]},i=t,o={checks:[]};return a.checks.push({type:xb,source:i,target:o}),Db(e,0,a),e.edgeCount++,o}},{name:"undirectedEdge",separator:!0,regex:cb.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},_=t,n={checks:[]};return r.checks.push({type:bb,nodes:[_,n]}),Db(e,0,r),e.edgeCount++,n}var a={checks:[]},i=t,o={checks:[]};return a.checks.push({type:Pb,node:i,neighbor:o}),Db(e,0,a),o}},{name:"child",separator:!0,regex:cb.child,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},_={checks:[]},n=e[e.length-1];return r.checks.push({type:Eb,parent:n,child:_}),Db(e,0,r),e.compoundCount++,_}if(e.currentSubject===t){var a={checks:[]},i=e[e.length-1],o={checks:[]},l={checks:[]},s={checks:[]},c={checks:[]};return a.checks.push({type:Nb,left:i,right:o,subject:l}),l.checks=t.checks,t.checks=[{type:Tb}],c.checks.push({type:Tb}),o.checks.push({type:Ab,parent:c,child:s}),Db(e,0,a),e.currentSubject=l,e.compoundCount++,s}var u={checks:[]},f={checks:[]},d=[{type:Ab,parent:u,child:f}];return u.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"descendant",separator:!0,regex:cb.descendant,populate:function(e,t){if(null==e.currentSubject){var r={checks:[]},_={checks:[]},n=e[e.length-1];return r.checks.push({type:Cb,ancestor:n,descendant:_}),Db(e,0,r),e.compoundCount++,_}if(e.currentSubject===t){var a={checks:[]},i=e[e.length-1],o={checks:[]},l={checks:[]},s={checks:[]},c={checks:[]};return a.checks.push({type:Nb,left:i,right:o,subject:l}),l.checks=t.checks,t.checks=[{type:Tb}],c.checks.push({type:Tb}),o.checks.push({type:Sb,ancestor:c,descendant:s}),Db(e,0,a),e.currentSubject=l,e.compoundCount++,s}var u={checks:[]},f={checks:[]},d=[{type:Sb,ancestor:u,descendant:f}];return u.checks=t.checks,t.checks=d,e.compoundCount++,f}},{name:"subject",modifier:!0,regex:cb.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Sm("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],_=null==r?null:r.type;_===kb?r.type=Ob:_===bb&&(r.type=Pb,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];Rb.forEach((function(e){return e.regexObj=new RegExp("^"+e.regex)}));var Fb=function(e){for(var t,r,_,n=0;n<Rb.length;n++){var a=Rb[n],i=a.name,o=e.match(a.regexObj);if(null!=o){r=o,t=a,_=i;var l=o[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:_,remaining:e}},zb={parse:function(e){var t=this,r=t.inputText=e,_=t[0]={checks:[]};for(t.length=1,r=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e}(r);;){var n=Fb(r);if(null==n.expr)return Sm("The selector `"+e+"`is invalid"),!1;var a=n.match.slice(1),i=n.expr.populate(t,_,a);if(!1===i)return!1;if(null!=i&&(_=i),(r=n.remaining).match(/^\s*$/))break}var o=t[t.length-1];null!=t.currentSubject&&(o.subject=t.currentSubject),o.edgeCount=t.edgeCount,o.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var s=t[l];if(s.compoundCount>0&&s.edgeCount>0)return Sm("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return Sm("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===s.edgeCount&&Sm("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return Sv(t)?'"'+t+'"':e(t)},r=function(e){return" "+e+" "},_=function(_,a){var i=_.type,o=_.value;switch(i){case ub:var l=e(o);return l.substring(0,l.length-1);case pb:var s=_.field,c=_.operator;return"["+s+r(e(c))+t(o)+"]";case gb:var u=_.operator,f=_.field;return"["+e(u)+f+"]";case hb:return"["+_.field+"]";case vb:var d=_.operator;return"[["+_.field+r(e(d))+t(o)+"]]";case mb:return o;case yb:return"#"+o;case wb:return"."+o;case Ab:case Eb:return n(_.parent,a)+r(">")+n(_.child,a);case Sb:case Cb:return n(_.ancestor,a)+" "+n(_.descendant,a);case Nb:var p=n(_.left,a),h=n(_.subject,a),g=n(_.right,a);return p+(p.length>0?" ":"")+h+g;case Tb:return""}},n=function(e,t){return e.checks.reduce((function(r,n,a){return r+(t===e&&0===a?"$":"")+_(n,t)}),"")},a="",i=0;i<this.length;i++){var o=this[i];a+=n(o,o.subject),this.length>1&&i<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},Bb=function(e,t,r){var _,n,a,i=Sv(e),o=Mv(e),l=Sv(r),s=!1,c=!1,u=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),s=!0),(i||l||s)&&(n=i||o?""+e:"",a=""+r),s&&(e=n=n.toLowerCase(),r=a=a.toLowerCase()),t){case"*=":_=n.indexOf(a)>=0;break;case"$=":_=n.indexOf(a,n.length-a.length)>=0;break;case"^=":_=0===n.indexOf(a);break;case"=":_=e===r;break;case">":u=!0,_=e>r;break;case">=":u=!0,_=e>=r;break;case"<":u=!0,_=e<r;break;case"<=":u=!0,_=e<=r;break;default:_=!1}return!c||null==e&&u||(_=!_),_},qb=function(e,t){return e.data(t)},Vb=[],Gb=function(e,t){return e.checks.every((function(e){return Vb[e.type](e,t)}))};Vb[ub]=function(e,t){var r=e.value;return"*"===r||r===t.group()},Vb[mb]=function(e,t){return function(e,t){return Mb[e](t)}(e.value,t)},Vb[yb]=function(e,t){var r=e.value;return t.id()===r},Vb[wb]=function(e,t){var r=e.value;return t.hasClass(r)},Vb[vb]=function(e,t){var r=e.field,_=e.operator,n=e.value;return Bb(function(e,t){return e[t]()}(t,r),_,n)},Vb[pb]=function(e,t){var r=e.field,_=e.operator,n=e.value;return Bb(qb(t,r),_,n)},Vb[gb]=function(e,t){var r=e.field,_=e.operator;return function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(qb(t,r),_)},Vb[hb]=function(e,t){var r=e.field;return e.operator,void 0!==qb(t,r)},Vb[bb]=function(e,t){var r=e.nodes[0],_=e.nodes[1],n=t.source(),a=t.target();return Gb(r,n)&&Gb(_,a)||Gb(_,n)&&Gb(r,a)},Vb[Pb]=function(e,t){return Gb(e.node,t)&&t.neighborhood().some((function(t){return t.isNode()&&Gb(e.neighbor,t)}))},Vb[kb]=function(e,t){return Gb(e.source,t.source())&&Gb(e.target,t.target())},Vb[xb]=function(e,t){return Gb(e.source,t)&&t.outgoers().some((function(t){return t.isNode()&&Gb(e.target,t)}))},Vb[Ob]=function(e,t){return Gb(e.target,t)&&t.incomers().some((function(t){return t.isNode()&&Gb(e.source,t)}))},Vb[Eb]=function(e,t){return Gb(e.child,t)&&Gb(e.parent,t.parent())},Vb[Ab]=function(e,t){return Gb(e.parent,t)&&t.children().some((function(t){return Gb(e.child,t)}))},Vb[Cb]=function(e,t){return Gb(e.descendant,t)&&t.ancestors().some((function(t){return Gb(e.ancestor,t)}))},Vb[Sb]=function(e,t){return Gb(e.ancestor,t)&&t.descendants().some((function(t){return Gb(e.descendant,t)}))},Vb[Nb]=function(e,t){return Gb(e.subject,t)&&Gb(e.left,t)&&Gb(e.right,t)},Vb[Tb]=function(){return!0},Vb[fb]=function(e,t){return e.value.has(t)},Vb[db]=function(e,t){return(0,e.value)(t)};var Ub=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||Sv(e)&&e.match(/^\s*$/)||(Iv(e)?this.addQuery({checks:[{type:fb,value:e.collection()}]}):Nv(e)?this.addQuery({checks:[{type:db,value:e}]}):Sv(e)?this.parse(e)||(this.invalid=!0):Cm("A selector must be created from a string; found "))},$b=Ub.prototype;[zb,{matches:function(e){for(var t=0;t<this.length;t++){var r=this[t];if(Gb(r,e))return!0}return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===yb)return e.getElementById(t[0].checks[0].value).collection();var r=function(e){for(var r=0;r<t.length;r++){var _=t[r];if(Gb(_,e))return!0}return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)}}].forEach((function(e){return Qv($b,e)})),$b.text=function(){return this.inputText},$b.size=function(){return this.length},$b.eq=function(e){return this[e]},$b.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},$b.addQuery=function(e){this[this.length++]=e},$b.selector=$b.toString;var Wb={allAre:function(e){var t=new Ub(e);return this.every((function(e){return t.matches(e)}))},is:function(e){var t=new Ub(e);return this.some((function(e){return t.matches(e)}))},some:function(e,t){for(var r=0;r<this.length;r++){if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0}return!1},every:function(e,t){for(var r=0;r<this.length;r++){if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every((function(t){return e.hasElementWithId(t.id())})))},anySame:function(e){return e=this.cy().collection(e),this.some((function(t){return e.hasElementWithId(t.id())}))},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every((function(e){return t.hasElementWithId(e.id())}))},contains:function(e){e=this.cy().collection(e);var t=this;return e.every((function(e){return t.hasElementWithId(e.id())}))}};Wb.allAreNeighbours=Wb.allAreNeighbors,Wb.has=Wb.contains,Wb.equal=Wb.equals=Wb.same;var Hb,Yb,Xb=function(e,t){return function(r,_,n,a){var i,o=r,l=this;if(null==o?i="":Iv(o)&&1===o.length&&(i=o.id()),1===l.length&&i){var s=l[0]._private,c=s.traversalCache=s.traversalCache||{},u=c[t]=c[t]||[],f=gm(i),d=u[f];return d||(u[f]=e.call(l,r,_,n,a))}return e.call(l,r,_,n,a)}},Zb={parent:function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var _=0;_<this.length;_++){var n=this[_]._private.parent;n&&t.push(n)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var _=0;_<r.length;_++){var n=r[_];t.push(n)}r=r.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var _=this[r].parents();t=(t=t||_).intersect(_)}return t.filter(e)},orphans:function(e){return this.stdFilter((function(e){return e.isOrphan()})).filter(e)},nonorphans:function(e){return this.stdFilter((function(e){return e.isChild()})).filter(e)},children:Xb((function(e){for(var t=[],r=0;r<this.length;r++)for(var _=this[r]._private.children,n=0;n<_.length;n++)t.push(_[n]);return this.spawn(t,!0).filter(e)}),"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(r){for(var _=0;_<r.length;_++){var n=r[_];t.push(n),n.children().nonempty()&&e(n.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function Kb(e,t,r,_){for(var n=[],a=new qm,i=e.cy().hasCompoundNodes(),o=0;o<e.length;o++){var l=e[o];r?n.push(l):i&&_(n,a,l)}for(;n.length>0;){var s=n.shift();t(s),a.add(s.id()),i&&_(n,a,s)}return e}function Jb(e,t,r){if(r.isParent())for(var _=r._private.children,n=0;n<_.length;n++){var a=_[n];t.has(a.id())||e.push(a)}}function Qb(e,t,r){if(r.isChild()){var _=r._private.parent;t.has(_.id())||e.push(_)}}function ek(e,t,r){Qb(e,t,r),Jb(e,t,r)}Zb.forEachDown=function(e){return Kb(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Jb)},Zb.forEachUp=function(e){return Kb(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Qb)},Zb.forEachUpAndDown=function(e){return Kb(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ek)},Zb.ancestors=Zb.parents,(Hb=Yb={data:ob.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ob.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ob.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ob.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ob.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ob.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=Hb.data,Hb.removeAttr=Hb.removeData;var tk,rk,_k=Yb,nk={};function ak(e){return function(t){var r=this;if(void 0===t&&(t=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var _=0,n=r[0],a=n._private.edges,i=0;i<a.length;i++){var o=a[i];!t&&o.isLoop()||(_+=e(n,o))}return _}}}function ik(e,t){return function(r){for(var _,n=this.nodes(),a=0;a<n.length;a++){var i=n[a][e](r);void 0===i||void 0!==_&&!t(i,_)||(_=i)}return _}}Qv(nk,{degree:ak((function(e,t){return t.source().same(t.target())?2:1})),indegree:ak((function(e,t){return t.target().same(e)?1:0})),outdegree:ak((function(e,t){return t.source().same(e)?1:0}))}),Qv(nk,{minDegree:ik("degree",(function(e,t){return e<t})),maxDegree:ik("degree",(function(e,t){return e>t})),minIndegree:ik("indegree",(function(e,t){return e<t})),maxIndegree:ik("indegree",(function(e,t){return e>t})),minOutdegree:ik("outdegree",(function(e,t){return e<t})),maxOutdegree:ik("outdegree",(function(e,t){return e>t}))}),Qv(nk,{totalDegree:function(e){for(var t=0,r=this.nodes(),_=0;_<r.length;_++)t+=r[_].degree(e);return t}});var ok=function(e,t,r){for(var _=0;_<e.length;_++){var n=e[_];if(!n.locked()){var a=n._private.position,i={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};!n.isParent()||0===i.x&&0===i.y||n.children().shift(i,r),n.dirtyBoundingBoxCache()}}},lk={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){ok(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(tk=rk={position:ob.data(lk),silentPosition:ob.data(Qv({},lk,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){ok(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Lv(e))t?this.silentPosition(e):this.position(e);else if(Nv(e)){var r=e,_=this.cy();_.startBatch();for(var n=0;n<this.length;n++){var a,i=this[n];(a=r(i,n))&&(t?i.silentPosition(a):i.position(a))}_.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var _;if(Lv(e)?(_={x:Mv(e.x)?e.x:0,y:Mv(e.y)?e.y:0},r=t):Sv(e)&&Mv(t)&&((_={x:0,y:0})[e]=t),null!=_){var n=this.cy();n.startBatch();for(var a=0;a<this.length;a++){var i=this[a];if(!(n.hasCompoundNodes()&&i.isChild()&&i.ancestors().anySame(this))){var o=i.position(),l={x:o.x+_.x,y:o.y+_.y};r?i.silentPosition(l):i.position(l)}}n.endBatch()}return this},silentShift:function(e,t){return Lv(e)?this.shift(e,!0):Sv(e)&&Mv(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],_=this.cy(),n=_.zoom(),a=_.pan(),i=Lv(e)?e:void 0,o=void 0!==i||void 0!==t&&Sv(e);if(r&&r.isNode()){if(!o){var l=r.position();return i=ny(l,n,a),void 0===e?i:i[e]}for(var s=0;s<this.length;s++){var c=this[s];void 0!==t?c.position(e,(t-a[e])/n):void 0!==i&&c.position(ay(i,n,a))}}else if(!o)return;return this},relativePosition:function(e,t){var r=this[0],_=this.cy(),n=Lv(e)?e:void 0,a=void 0!==n||void 0!==t&&Sv(e),i=_.hasCompoundNodes();if(r&&r.isNode()){if(!a){var o=r.position(),l=i?r.parent():null,s=l&&l.length>0,c=s;s&&(l=l[0]);var u=c?l.position():{x:0,y:0};return n={x:o.x-u.x,y:o.y-u.y},void 0===e?n:n[e]}for(var f=0;f<this.length;f++){var d=this[f],p=i?d.parent():null,h=p&&p.length>0,g=h;h&&(p=p[0]);var v=g?p.position():{x:0,y:0};void 0!==t?d.position(e,t+v[e]):void 0!==n&&d.position({x:n.x+v.x,y:n.y+v.y})}}else if(!a)return;return this}}).modelPosition=tk.point=tk.position,tk.modelPositions=tk.points=tk.positions,tk.renderedPoint=tk.renderedPosition,tk.relativePoint=tk.relativePosition;var sk,ck,uk=rk;sk=ck={},ck.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),_=r.zoom(),n=r.pan(),a=t.x1*_+n.x,i=t.x2*_+n.x,o=t.y1*_+n.y,l=t.y2*_+n.y;return{x1:a,x2:i,y1:o,y2:l,w:i-a,h:l-o}},ck.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}})),this):this},ck.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(e){if(e.isParent()){var t=e._private,r=e.children(),_="include"===e.pstyle("compound-sizing-wrt-labels").value,n={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:_,includeOverlays:!1,useCache:!1}),i=t.position;0!==a.w&&0!==a.h||((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=i.x-a.w/2,a.x2=i.x+a.w/2,a.y1=i.y-a.h/2,a.y2=i.y+a.h/2);var o=n.width.left.value;"px"===n.width.left.units&&n.width.val>0&&(o=100*o/n.width.val);var l=n.width.right.value;"px"===n.width.right.units&&n.width.val>0&&(l=100*l/n.width.val);var s=n.height.top.value;"px"===n.height.top.units&&n.height.val>0&&(s=100*s/n.height.val);var c=n.height.bottom.value;"px"===n.height.bottom.units&&n.height.val>0&&(c=100*c/n.height.val);var u=v(n.width.val-a.w,o,l),f=u.biasDiff,d=u.biasComplementDiff,p=v(n.height.val-a.h,s,c),h=p.biasDiff,g=p.biasComplementDiff;t.autoPadding=function(e,t,r,_){if("%"!==r.units)return"px"===r.units?r.pfValue:0;switch(_){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,n.width.val),i.x=(-f+a.x1+a.x2+d)/2,t.autoHeight=Math.max(a.h,n.height.val),i.y=(-h+a.y1+a.y2+g)/2}function v(e,t,r){var _=0,n=0,a=t+r;return e>0&&a>0&&(_=t/a*e,n=r/a*e),{biasDiff:_,biasComplementDiff:n}}}for(var _=0;_<this.length;_++){var n=this[_],a=n._private;a.compoundBoundsClean&&!e||(r(n),t.batching()||(a.compoundBoundsClean=!0))}return this};var fk=function(e){return e===1/0||e===-1/0?0:e},dk=function(e,t,r,_,n){_-t!=0&&n-r!=0&&null!=t&&null!=r&&null!=_&&null!=n&&(e.x1=t<e.x1?t:e.x1,e.x2=_>e.x2?_:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=n>e.y2?n:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},pk=function(e,t){return null==t?e:dk(e,t.x1,t.y1,t.x2,t.y2)},hk=function(e,t,r){return Rm(e,t,r)},gk=function(e,t,r){if(!t.cy().headless()){var _,n,a=t._private,i=a.rstyle,o=i.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(_=i.srcX,n=i.srcY):"target"===r?(_=i.tgtX,n=i.tgtY):(_=i.midX,n=i.midY);var l=a.arrowBounds=a.arrowBounds||{},s=l[r]=l[r]||{};s.x1=_-o,s.y1=n-o,s.x2=_+o,s.y2=n+o,s.w=s.x2-s.x1,s.h=s.y2-s.y1,wy(s,1),dk(e,s.x1,s.y1,s.x2,s.y2)}}},vk=function(e,t,r){if(!t.cy().headless()){var _;_=r?r+"-":"";var n=t._private,a=n.rstyle;if(t.pstyle(_+"label").strValue){var i,o,l,s,c=t.pstyle("text-halign"),u=t.pstyle("text-valign"),f=hk(a,"labelWidth",r),d=hk(a,"labelHeight",r),p=hk(a,"labelX",r),h=hk(a,"labelY",r),g=t.pstyle(_+"text-margin-x").pfValue,v=t.pstyle(_+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle(_+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,b=t.pstyle("text-border-width").pfValue/2,k=t.pstyle("text-background-padding").pfValue,x=d,O=f,P=O/2,E=x/2;if(m)i=p-P,o=p+P,l=h-E,s=h+E;else{switch(c.value){case"left":i=p-O,o=p;break;case"center":i=p-P,o=p+P;break;case"right":i=p,o=p+O}switch(u.value){case"top":l=h-x,s=h;break;case"center":l=h-E,s=h+E;break;case"bottom":l=h,s=h+x}}i+=g-Math.max(w,b)-k-2,o+=g+Math.max(w,b)+k+2,l+=v-Math.max(w,b)-k-2,s+=v+Math.max(w,b)+k+2;var C=r||"main",A=n.labelBounds,S=A[C]=A[C]||{};S.x1=i,S.y1=l,S.x2=o,S.y2=s,S.w=o-i,S.h=s-l;var N=m&&"autorotate"===y.strValue,T=null!=y.pfValue&&0!==y.pfValue;if(N||T){var L=N?hk(n.rstyle,"labelAngle",r):y.pfValue,M=Math.cos(L),j=Math.sin(L),I=(i+o)/2,D=(l+s)/2;if(!m){switch(c.value){case"left":I=o;break;case"right":I=i}switch(u.value){case"top":D=s;break;case"bottom":D=l}}var R=function(e,t){return{x:(e-=I)*M-(t-=D)*j+I,y:e*j+t*M+D}},F=R(i,l),z=R(i,s),B=R(o,l),q=R(o,s);i=Math.min(F.x,z.x,B.x,q.x),o=Math.max(F.x,z.x,B.x,q.x),l=Math.min(F.y,z.y,B.y,q.y),s=Math.max(F.y,z.y,B.y,q.y)}var V=C+"Rot",G=A[V]=A[V]||{};G.x1=i,G.y1=l,G.x2=o,G.y2=s,G.w=o-i,G.h=s-l,dk(e,i,l,o,s),dk(n.labelBounds.all,i,l,o,s)}return e}},mk=function(e,t){var r,_,n,a,i,o,l,s=e._private.cy,c=s.styleEnabled(),u=s.headless(),f=vy(),d=e._private,p=e.isNode(),h=e.isEdge(),g=d.rstyle,v=p&&c?e.pstyle("bounds-expansion").pfValue:[0],m=function(e){return"none"!==e.pstyle("display").value},y=!c||m(e)&&(!h||m(e.source())&&m(e.target()));if(y){var w=0;c&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(w=e.pstyle("overlay-padding").value);var b=0;c&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(b=e.pstyle("underlay-padding").value);var k=Math.max(w,b),x=0;if(c&&(x=e.pstyle("width").pfValue/2),p&&t.includeNodes){var O=e.position();i=O.x,o=O.y;var P=e.outerWidth()/2,E=e.outerHeight()/2;dk(f,r=i-P,n=o-E,_=i+P,a=o+E),c&&t.includeOutlines&&function(e,t){if(!t.cy().headless()){var r,_,n,a=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value;if(a>0&&i>0){var o=t.pstyle("outline-offset").value,l=t.pstyle("shape").value,s=i+o,c=(e.w+2*s)/e.w,u=(e.h+2*s)/e.h,f=0;["diamond","pentagon","round-triangle"].includes(l)?(c=(e.w+2.4*s)/e.w,f=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(l)?c=(e.w+2.4*s)/e.w:"star"===l?(c=(e.w+2.8*s)/e.w,u=(e.h+2.6*s)/e.h,f=-s/3.8):"triangle"===l?(c=(e.w+2.8*s)/e.w,u=(e.h+2.4*s)/e.h,f=-s/1.4):"vee"===l&&(c=(e.w+4.4*s)/e.w,u=(e.h+3.8*s)/e.h,f=.5*-s);var d=e.h*u-e.h,p=e.w*c-e.w;if(by(e,[Math.ceil(d/2),Math.ceil(p/2)]),0!==f){var h=(_=0,n=f,{x1:(r=e).x1+_,x2:r.x2+_,y1:r.y1+n,y2:r.y2+n,w:r.w,h:r.h});my(e,h)}}}}(f,e)}else if(h&&t.includeEdges)if(c&&!u){var C=e.pstyle("curve-style").strValue;if(r=Math.min(g.srcX,g.midX,g.tgtX),_=Math.max(g.srcX,g.midX,g.tgtX),n=Math.min(g.srcY,g.midY,g.tgtY),a=Math.max(g.srcY,g.midY,g.tgtY),dk(f,r-=x,n-=x,_+=x,a+=x),"haystack"===C){var A=g.haystackPts;if(A&&2===A.length){if(r=A[0].x,n=A[0].y,r>(_=A[1].x)){var S=r;r=_,_=S}if(n>(a=A[1].y)){var N=n;n=a,a=N}dk(f,r-x,n-x,_+x,a+x)}}else if("bezier"===C||"unbundled-bezier"===C||"segments"===C||"taxi"===C){var T;switch(C){case"bezier":case"unbundled-bezier":T=g.bezierPts;break;case"segments":case"taxi":T=g.linePts}if(null!=T)for(var L=0;L<T.length;L++){var M=T[L];r=M.x-x,_=M.x+x,n=M.y-x,a=M.y+x,dk(f,r,n,_,a)}}}else{var j=e.source().position(),I=e.target().position();if((r=j.x)>(_=I.x)){var D=r;r=_,_=D}if((n=j.y)>(a=I.y)){var R=n;n=a,a=R}dk(f,r-=x,n-=x,_+=x,a+=x)}if(c&&t.includeEdges&&h&&(gk(f,e,"mid-source"),gk(f,e,"mid-target"),gk(f,e,"source"),gk(f,e,"target")),c)if("yes"===e.pstyle("ghost").value){var F=e.pstyle("ghost-offset-x").pfValue,z=e.pstyle("ghost-offset-y").pfValue;dk(f,f.x1+F,f.y1+z,f.x2+F,f.y2+z)}var B=d.bodyBounds=d.bodyBounds||{};ky(B,f),by(B,v),wy(B,1),c&&(r=f.x1,_=f.x2,n=f.y1,a=f.y2,dk(f,r-k,n-k,_+k,a+k));var q=d.overlayBounds=d.overlayBounds||{};ky(q,f),by(q,v),wy(q,1);var V=d.labelBounds=d.labelBounds||{};null!=V.all?((l=V.all).x1=1/0,l.y1=1/0,l.x2=-1/0,l.y2=-1/0,l.w=0,l.h=0):V.all=vy(),c&&t.includeLabels&&(t.includeMainLabels&&vk(f,e,null),h&&(t.includeSourceLabels&&vk(f,e,"source"),t.includeTargetLabels&&vk(f,e,"target")))}return f.x1=fk(f.x1),f.y1=fk(f.y1),f.x2=fk(f.x2),f.y2=fk(f.y2),f.w=fk(f.x2-f.x1),f.h=fk(f.y2-f.y1),f.w>0&&f.h>0&&y&&(by(f,v),wy(f,1)),f},yk=function(e){var t=0,r=function(e){return(e?1:0)<<t++},_=0;return _+=r(e.incudeNodes),_+=r(e.includeEdges),_+=r(e.includeLabels),_+=r(e.includeMainLabels),_+=r(e.includeSourceLabels),_+=r(e.includeTargetLabels),_+=r(e.includeOverlays),_+=r(e.includeOutlines)},wk=function(e){if(e.isEdge()){var t=e.source().position(),r=e.target().position(),_=function(e){return Math.round(e)};return n=[_(t.x),_(t.y),_(r.x),_(r.y)],i={value:0,done:!1},o=0,l=n.length,um({next:function(){return o<l?i.value=n[o++]:i.done=!0,i}},a)}return 0;var n,a,i,o,l},bk=function(e,t){var r,_=e._private,n=e.isEdge(),a=(null==t?xk:yk(t))===xk,i=wk(e),o=_.bbCachePosKey===i,l=t.useCache&&o,s=function(e){return null==e._private.bbCache||e._private.styleDirty};if(!l||s(e)||n&&s(e.source())||s(e.target())?(o||e.recalculateRenderedStyle(l),r=mk(e,kk),_.bbCache=r,_.bbCachePosKey=i):r=_.bbCache,!a){var c=e.isNode();r=vy(),(t.includeNodes&&c||t.includeEdges&&!c)&&(t.includeOverlays?pk(r,_.overlayBounds):pk(r,_.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!n||t.includeSourceLabels&&t.includeTargetLabels)?pk(r,_.labelBounds.all):(t.includeMainLabels&&pk(r,_.labelBounds.mainRot),t.includeSourceLabels&&pk(r,_.labelBounds.sourceRot),t.includeTargetLabels&&pk(r,_.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},kk={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},xk=yk(kk),Ok=jm(kk);ck.boundingBox=function(e){var t;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==e&&void 0!==e.useCache&&!0!==e.useCache){t=vy();var r=Ok(e=e||kk),_=this;if(_.cy().styleEnabled())for(var n=0;n<_.length;n++){var a=_[n],i=a._private,o=wk(a),l=i.bbCachePosKey===o,s=r.useCache&&l&&!i.styleDirty;a.recalculateRenderedStyle(s)}this.updateCompoundBounds(!e.useCache);for(var c=0;c<_.length;c++){var u=_[c];pk(t,bk(u,r))}}else e=void 0===e?kk:Ok(e),t=bk(this[0],e);return t.x1=fk(t.x1),t.y1=fk(t.y1),t.x2=fk(t.x2),t.y2=fk(t.y2),t.w=fk(t.x2-t.x1),t.h=fk(t.y2-t.y1),t},ck.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ck.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),_=r.hasCompoundNodes(),n=r.collection();if(_&&(n=t.filter((function(e){return e.isParent()})),t=t.not(n)),Lv(e)){var a=e;e=function(){return a}}r.startBatch(),t.forEach((function(t,r){return t._private.bbAtOldPos=e(t,r)})).silentPositions(e),_&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0));var i=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return t.silentPositions((function(e){return e._private.bbAtOldPos})),_&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0)),r.endBatch(),i},sk.boundingbox=sk.bb=sk.boundingBox,sk.renderedBoundingbox=sk.renderedBoundingBox;var Pk,Ek,Ck=ck;Pk=Ek={};var Ak=function(e){e.uppercaseName=Wv(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Wv(e.outerName),Pk[e.name]=function(){var t=this[0],r=t._private,_=r.cy._private.styleEnabled;if(t){if(_){if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var n=t.pstyle(e.name);return"label"===n.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):n.pfValue}return 1}},Pk["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)return r?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},Pk["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},Pk["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};Ak({name:"width"}),Ak({name:"height"}),Ek.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},Ek.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},Ek.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var Sk=Ek,Nk={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},Tk=Object.keys(Nk).reduce((function(e,t){var r=Nk[t],_=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(t);return e[t]=function(){return function(e,t){if(e.isEdge())return t(e)}(this,r.get)},r.mult?e[_]=function(){return function(e,t){if(e.isEdge()){var r=e.cy(),_=r.pan(),n=r.zoom();return t(e).map((function(e){return ny(e,n,_)}))}}(this,r.get)}:e[_]=function(){return function(e,t){if(e.isEdge()){var r=e.cy();return ny(t(e),r.zoom(),r.pan())}}(this,r.get)},e}),{}),Lk=Qv({},uk,Ck,Sk,Tk),Mk=function(e,t){this.recycle(e,t)};function jk(){return!1}function Ik(){return!0}Mk.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=jk,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ik:jk):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,_=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:r.x*_+n.x,y:r.y*_+n.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ik;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ik;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ik,this.stopPropagation()},isDefaultPrevented:jk,isPropagationStopped:jk,isImmediatePropagationStopped:jk};var Dk=/^([^.]+)(\.(?:[^.]+))?$/,Rk={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Fk=Object.keys(Rk),zk={};function Bk(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zk,t=arguments.length>1?arguments[1]:void 0,r=0;r<Fk.length;r++){var _=Fk[r];this[_]=e[_]||Rk[_]}this.context=t||this.context,this.listeners=[],this.emitting=0}var qk=Bk.prototype,Vk=function(e,t,r,_,n,a,i){Nv(_)&&(n=_,_=null),i&&(a=null==a?i:Qv({},a,i));for(var o=Tv(r)?r:r.split(/\s+/),l=0;l<o.length;l++){var s=o[l];if(!Bv(s)){var c=s.match(Dk);if(c)if(!1===t(e,s,c[1],c[2]?c[2]:null,_,n,a))break}}},Gk=function(e,t){return e.addEventFields(e.context,t),new Mk(t.type,t)},Uk=function(e,t,r){if("event"!==Av(r))if(Lv(r))t(e,Gk(e,r));else for(var _=Tv(r)?r:r.split(/\s+/),n=0;n<_.length;n++){var a=_[n];if(!Bv(a)){var i=a.match(Dk);if(i){var o=i[1],l=i[2]?i[2]:null;t(e,Gk(e,{type:o,namespace:l,target:e.context}))}}}else t(e,r)};qk.on=qk.addListener=function(e,t,r,_,n){return Vk(this,(function(e,t,r,_,n,a,i){Nv(a)&&e.listeners.push({event:t,callback:a,type:r,namespace:_,qualifier:n,conf:i})}),e,t,r,_,n),this},qk.one=function(e,t,r,_){return this.on(e,t,r,_,{one:!0})},qk.removeListener=qk.off=function(e,t,r,_){var n=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,i=function(i){var o=a[i];Vk(n,(function(t,r,_,n,l,s){if((o.type===_||"*"===e)&&(!n&&".*"!==o.namespace||o.namespace===n)&&(!l||t.qualifierCompare(o.qualifier,l))&&(!s||o.callback===s))return a.splice(i,1),!1}),e,t,r,_)},o=a.length-1;o>=0;o--)i(o);return this},qk.removeAllListeners=function(){return this.removeListener("*")},qk.emit=qk.trigger=function(e,t,r){var _=this.listeners,n=_.length;return this.emitting++,Tv(t)||(t=[t]),Uk(this,(function(e,a){null!=r&&(_=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],n=_.length);for(var i=function(r){var n=_[r];if(n.type===a.type&&(!n.namespace||n.namespace===a.namespace||".*"===n.namespace)&&e.eventMatches(e.context,n,a)){var i=[a];null!=t&&function(e,t){for(var r=0;r<t.length;r++){var _=t[r];e.push(_)}}(i,t),e.beforeEmit(e.context,n,a),n.conf&&n.conf.one&&(e.listeners=e.listeners.filter((function(e){return e!==n})));var o=e.callbackContext(e.context,n,a),l=n.callback.apply(o,i);e.afterEmit(e.context,n,a),!1===l&&(a.stopPropagation(),a.preventDefault())}},o=0;o<n;o++)i(o);e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)}),e),this.emitting--,this};var $k={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var _=t.qualifier;return null==_||e!==r.target&&Dv(r.target)&&_.matches(r.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Wk=function(e){return Sv(e)?new Ub(e):e},Hk={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new Bk($k,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var _=Wk(t),n=0;n<this.length;n++){this[n].emitter().on(e,_,r)}return this},removeListener:function(e,t,r){for(var _=Wk(t),n=0;n<this.length;n++){this[n].emitter().removeListener(e,_,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function(e,t,r){for(var _=Wk(t),n=0;n<this.length;n++){this[n].emitter().one(e,_,r)}return this},once:function(e,t,r){for(var _=Wk(t),n=0;n<this.length;n++){this[n].emitter().on(e,_,r,{once:!0,onceCollection:this})}},emit:function(e,t){for(var r=0;r<this.length;r++){this[r].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};ob.eventAliasesOn(Hk);var Yk={nodes:function(e){return this.filter((function(e){return e.isNode()})).filter(e)},edges:function(e){return this.filter((function(e){return e.isEdge()})).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var _=this[r];_.isNode()?e.push(_):t.push(_)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(Sv(e)||Iv(e))return new Ub(e).filter(this);if(Nv(e)){for(var r=this.spawn(),_=this,n=0;n<_.length;n++){var a=_[n];(t?e.apply(t,[a,n,_]):e(a,n,_))&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){Sv(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var _=this[r];e.has(_)||t.push(_)}return t}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(Sv(e)){var t=e;return this.filter(t)}for(var r=this.spawn(),_=e,n=this.length<e.length,a=n?this:_,i=n?_:this,o=0;o<a.length;o++){var l=a[o];i.has(l)&&r.push(l)}return r},xor:function(e){var t=this._private.cy;Sv(e)&&(e=t.$(e));var r=this.spawn(),_=e,n=function(e,t){for(var _=0;_<e.length;_++){var n=e[_],a=n._private.data.id;t.hasElementWithId(a)||r.push(n)}};return n(this,_),n(_,this),r},diff:function(e){var t=this._private.cy;Sv(e)&&(e=t.$(e));var r=this.spawn(),_=this.spawn(),n=this.spawn(),a=e,i=function(e,t,r){for(var _=0;_<e.length;_++){var a=e[_],i=a._private.data.id;t.hasElementWithId(i)?n.merge(a):r.push(a)}};return i(this,a,r),i(a,this,_),{left:r,right:_,both:n}},add:function(e){var t=this._private.cy;if(!e)return this;if(Sv(e)){var r=e;e=t.mutableElements().filter(r)}for(var _=this.spawnSelf(),n=0;n<e.length;n++){var a=e[n],i=!this.has(a);i&&_.push(a)}return _},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&Sv(e)){var _=e;e=r.mutableElements().filter(_)}for(var n=t.map,a=0;a<e.length;a++){var i=e[a],o=i._private.data.id;if(!n.has(o)){var l=this.length++;this[l]=i,n.set(o,{ele:i,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var _=e===this.length-1;if(this.length>1&&!_){var n=this.length-1,a=this[n],i=a._private.data.id;this[n]=void 0,this[e]=a,r.set(i,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,_=t.map.get(r);if(!_)return this;var n=_.index;return this.unmergeAt(n),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Sv(e)){var r=e;e=t.mutableElements().filter(r)}for(var _=0;_<e.length;_++)this.unmergeOne(e[_]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function(e,t){for(var r=[],_=this,n=0;n<_.length;n++){var a=_[n],i=t?e.apply(t,[a,n,_]):e(a,n,_);r.push(i)}return r},reduce:function(e,t){for(var r=t,_=this,n=0;n<_.length;n++)r=e(r,_[n],n,_);return r},max:function(e,t){for(var r,_=-1/0,n=this,a=0;a<n.length;a++){var i=n[a],o=t?e.apply(t,[i,a,n]):e(i,a,n);o>_&&(_=o,r=i)}return{value:_,ele:r}},min:function(e,t){for(var r,_=1/0,n=this,a=0;a<n.length;a++){var i=n[a],o=t?e.apply(t,[i,a,n]):e(i,a,n);o<_&&(_=o,r=i)}return{value:_,ele:r}}},Xk=Yk;Xk.u=Xk["|"]=Xk["+"]=Xk.union=Xk.or=Xk.add,Xk["\\"]=Xk["!"]=Xk["-"]=Xk.difference=Xk.relativeComplement=Xk.subtract=Xk.not,Xk.n=Xk["&"]=Xk["."]=Xk.and=Xk.intersection=Xk.intersect,Xk["^"]=Xk["(+)"]=Xk["(-)"]=Xk.symmetricDifference=Xk.symdiff=Xk.xor,Xk.fnFilter=Xk.filterFn=Xk.stdFilter=Xk.filter,Xk.complement=Xk.abscomp=Xk.absoluteComplement;var Zk=function(e,t){var r=e.cy().hasCompoundNodes();function _(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?km:0}var n=_(e)-_(t);if(0!==n)return n;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var i=a(e)-a(t);if(0!==i)return i;var o=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==o?o:e.poolIndex()-t.poolIndex()},Kk={forEach:function(e,t){if(Nv(e))for(var r=this.length,_=0;_<r;_++){var n=this[_];if(!1===(t?e.apply(t,[n,_,this]):e(n,_,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],_=this.length;null==t&&(t=_),null==e&&(e=0),e<0&&(e=_+e),t<0&&(t=_+t);for(var n=e;n>=0&&n<t&&n<_;n++)r.push(this[n]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!Nv(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Zk)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:km-1}var _=t.source,n=t.target,a=_.zDepth(),i=n.zDepth();return Math.max(a,i,0)}}};Kk.each=Kk.forEach;var Jk;Jk="undefined",("undefined"==typeof Symbol?"undefined":hv(Symbol))!=Jk&&hv(Symbol.iterator)!=Jk&&(Kk[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,_=this.length;return yv({next:function(){return r<_?t.value=e[r++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,(function(){return this}))});var Qk=jm({nodeDimensionsIncludeLabels:!1}),ex={layoutDimensions:function(e){var t;if(e=Qk(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function(e,t,r){var _=this.nodes().filter((function(e){return!e.isParent()})),n=this.cy(),a=t.eles,i=function(e){return e.id()},o=Vv(r,i);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=t.spacingFactor&&1!==t.spacingFactor,s=function(){if(!l)return null;for(var e=vy(),t=0;t<_.length;t++){var r=_[t],n=o(r,t);yy(e,n.x,n.y)}return e}(),c=Vv((function(e,r){var _=o(e,r);l&&(_=function(e,t,r){var _=t.x1+t.w/2,n=t.y1+t.h/2;return{x:_+(r.x-_)*e,y:n+(r.y-n)*e}}(Math.abs(t.spacingFactor),s,_));return null!=t.transform&&(_=t.transform(e,_)),_}),i);if(t.animate){for(var u=0;u<_.length;u++){var f=_[u],d=c(f,u);if(null==t.animateFilter||t.animateFilter(f,u)){var p=f.animation({position:d,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(p)}else f.position(d)}if(t.fit){var h=n.animation({fit:{boundingBox:a.boundingBoxAt(c),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(h)}else if(void 0!==t.zoom&&void 0!==t.pan){var g=n.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}e.animations.forEach((function(e){return e.play()})),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),nb.all(e.animations.map((function(e){return e.promise()}))).then((function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})}))}else _.positions(c),t.fit&&n.fit(t.eles,t.padding),null!=t.zoom&&n.zoom(t.zoom),t.pan&&n.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(Qv({},e,{eles:this}))}};function tx(e,t,r){var _,n=r._private,a=n.styleCache=n.styleCache||[];return null!=(_=a[e])?_:_=a[e]=t(r)}function rx(e,t){return e=gm(e),function(r){return tx(e,t,r)}}function _x(e,t){e=gm(e);var r=function(e){return t.call(e)};return function(){var t=this[0];if(t)return tx(e,r,t)}}ex.createLayout=ex.makeLayout=ex.layout;var nx={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),_=t.styleEnabled();return r&&_&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),r=function(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach((function(e){r(e),e.connectedEdges().forEach(r)}));return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var _=r;return e?_.emitAndNotify("style"):_.emit("style"),r.forEach((function(e){return e._private.styleDirty=!0})),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this[0],_=r.cy();if(_.styleEnabled()&&r){this.cleanStyle();var n=r._private.style[e];return null!=n?n:t?_.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];return r?t.style().getRenderedStyle(r,e):void 0},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var _=!1,n=r.style();if(Lv(e)){var a=e;n.applyBypass(this,a,_),this.emitAndNotify("style")}else if(Sv(e)){if(void 0===t){var i=this[0];return i?n.getStylePropertyValue(i,e):void 0}n.applyBypass(this,e,t,_),this.emitAndNotify("style")}else if(void 0===e){var o=this[0];return o?n.getRawStyle(o):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=!1,_=t.style(),n=this;if(void 0===e)for(var a=0;a<n.length;a++){var i=n[a];_.removeAllBypasses(i,r)}else{e=e.split(/\s+/);for(var o=0;o<n.length;o++){var l=n[o];_.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var _=r._private,n=r.pstyle("opacity").value;if(!t)return n;var a=_.data.parent?r.parents():null;if(a)for(var i=0;i<a.length;i++){n*=a[i].pstyle("opacity").value}return n}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function ax(e,t){var r=e._private.data.parent?e.parents():null;if(r)for(var _=0;_<r.length;_++){if(!t(r[_]))return!1}return!0}function ix(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,_=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var n=this[0],a=e.hasCompoundNodes();if(n){var i=n._private;if(!t(n))return!1;if(n.isNode())return!a||ax(n,_);var o=i.source,l=i.target;return r(o)&&(!a||ax(o,r))&&(o===l||r(l)&&(!a||ax(l,r)))}}}var ox=rx("eleTakesUpSpace",(function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())}));nx.takesUpSpace=_x("takesUpSpace",ix({ok:ox}));var lx=rx("eleInteractive",(function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&ox(e)})),sx=rx("parentInteractive",(function(e){return"visible"===e.pstyle("visibility").value&&ox(e)}));nx.interactive=_x("interactive",ix({ok:lx,parentOk:sx,edgeOkViaNode:ox})),nx.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var cx=rx("eleVisible",(function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&ox(e)})),ux=ox;nx.visible=_x("visible",ix({ok:cx,edgeOkViaNode:ux})),nx.hidden=function(){var e=this[0];if(e)return!e.visible()},nx.isBundledBezier=_x("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())})),nx.bypass=nx.css=nx.style,nx.renderedCss=nx.renderedStyle,nx.removeBypass=nx.removeCss=nx.removeStyle,nx.pstyle=nx.parsedStyle;var fx={};function dx(e){return function(){var t=arguments,r=[];if(2===t.length){var _=t[0],n=t[1];this.on(e.event,_,n)}else if(1===t.length&&Nv(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&Tv(t[0])){for(var i=1===t.length?t[0]:null,o=0;o<this.length;o++){var l=this[o],s=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var u=e.overrideAble(l);if(void 0!==u&&(s=u,!u))return this}s&&(l._private[e.field]=e.value,c&&r.push(l))}var f=this.spawn(r);f.updateStyle(),f.emit(e.event),i&&f.emit(i)}return this}}function px(e){fx[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},fx[e.on]=dx({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),fx[e.off]=dx({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}px({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),px({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),px({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),px({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),fx.deselect=fx.unselect,fx.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},px({field:"active",on:"activate",off:"unactivate"}),px({field:"pannable",on:"panify",off:"unpanify"}),fx.inactive=function(){var e=this[0];if(e)return!e._private.active};var hx={},gx=function(e){return function(t){for(var r=[],_=0;_<this.length;_++){var n=this[_];if(n.isNode()){for(var a=!1,i=n.connectedEdges(),o=0;o<i.length;o++){var l=i[o],s=l.source(),c=l.target();if(e.noIncomingEdges&&c===n&&s!==n||e.noOutgoingEdges&&s===n&&c!==n){a=!0;break}}a||r.push(n)}}return this.spawn(r,!0).filter(t)}},vx=function(e){return function(t){for(var r=[],_=0;_<this.length;_++){var n=this[_];if(n.isNode())for(var a=n.connectedEdges(),i=0;i<a.length;i++){var o=a[i],l=o.source(),s=o.target();e.outgoing&&l===n?(r.push(o),r.push(s)):e.incoming&&s===n&&(r.push(o),r.push(l))}}return this.spawn(r,!0).filter(t)}},mx=function(e){return function(t){for(var r=this,_=[],n={};;){var a=e.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var i=!1,o=0;o<a.length;o++){var l=a[o],s=l.id();n[s]||(n[s]=!0,_.push(l),i=!0)}if(!i)break;r=a}return this.spawn(_,!0).filter(t)}};function yx(e){return function(t){for(var r=[],_=0;_<this.length;_++){var n=this[_]._private[e.attr];n&&r.push(n)}return this.spawn(r,!0).filter(t)}}function wx(e){return function(t){var r=[],_=this._private.cy,n=e||{};Sv(t)&&(t=_.$(t));for(var a=0;a<t.length;a++)for(var i=t[a]._private.edges,o=0;o<i.length;o++){var l=i[o],s=l._private.data,c=this.hasElementWithId(s.source)&&t.hasElementWithId(s.target),u=t.hasElementWithId(s.source)&&this.hasElementWithId(s.target);if(c||u){if(n.thisIsSrc||n.thisIsTgt){if(n.thisIsSrc&&!c)continue;if(n.thisIsTgt&&!u)continue}r.push(l)}}return this.spawn(r,!0)}}function bx(e){return e=Qv({},{codirected:!1},e),function(t){for(var r=[],_=this.edges(),n=e,a=0;a<_.length;a++)for(var i=_[a]._private,o=i.source,l=o._private.data.id,s=i.data.target,c=o._private.edges,u=0;u<c.length;u++){var f=c[u],d=f._private.data,p=d.target,h=d.source,g=p===s&&h===l,v=l===p&&s===h;(n.codirected&&g||!n.codirected&&(g||v))&&r.push(f)}return this.spawn(r,!0).filter(t)}}hx.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},Qv(hx,{roots:gx({noIncomingEdges:!0}),leaves:gx({noOutgoingEdges:!0}),outgoers:Xb(vx({outgoing:!0}),"outgoers"),successors:mx({outgoing:!0}),incomers:Xb(vx({incoming:!0}),"incomers"),predecessors:mx({incoming:!0})}),Qv(hx,{neighborhood:Xb((function(e){for(var t=[],r=this.nodes(),_=0;_<r.length;_++)for(var n=r[_],a=n.connectedEdges(),i=0;i<a.length;i++){var o=a[i],l=o.source(),s=o.target(),c=n===l?s:l;c.length>0&&t.push(c[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)}),"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),hx.neighbourhood=hx.neighborhood,hx.closedNeighbourhood=hx.closedNeighborhood,hx.openNeighbourhood=hx.openNeighborhood,Qv(hx,{source:Xb((function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t}),"source"),target:Xb((function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t}),"target"),sources:yx({attr:"source"}),targets:yx({attr:"target"})}),Qv(hx,{edgesWith:Xb(wx(),"edgesWith"),edgesTo:Xb(wx({thisIsSrc:!0}),"edgesTo")}),Qv(hx,{connectedEdges:Xb((function(e){for(var t=[],r=0;r<this.length;r++){var _=this[r];if(_.isNode())for(var n=_._private.edges,a=0;a<n.length;a++){var i=n[a];t.push(i)}}return this.spawn(t,!0).filter(e)}),"connectedEdges"),connectedNodes:Xb((function(e){for(var t=[],r=0;r<this.length;r++){var _=this[r];_.isEdge()&&(t.push(_.source()[0]),t.push(_.target()[0]))}return this.spawn(t,!0).filter(e)}),"connectedNodes"),parallelEdges:Xb(bx(),"parallelEdges"),codirectedEdges:Xb(bx({codirected:!0}),"codirectedEdges")}),Qv(hx,{components:function(e){var t=this,r=t.cy(),_=r.collection(),n=null==e?t.nodes():e.nodes(),a=[];null!=e&&n.empty()&&(n=e.sources());var i=function(e,t){_.merge(e),n.unmerge(e),t.merge(e)};if(n.empty())return t.spawn();var o=function(){var e=r.collection();a.push(e);var _=n[0];i(_,e),t.bfs({directed:!1,roots:_,visit:function(t){return i(t,e)}}),e.forEach((function(r){r.connectedEdges().forEach((function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)}))}))};do{o()}while(n.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),hx.componentsOf=hx.components;var kx=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],_=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var n=new zm,a=!1;if(t){if(t.length>0&&Lv(t[0])&&!Dv(t[0])){a=!0;for(var i=[],o=new qm,l=0,s=t.length;l<s;l++){var c=t[l];null==c.data&&(c.data={});var u=c.data;if(null==u.id)u.id=Tm();else if(e.hasElementWithId(u.id)||o.has(u.id))continue;var f=new Vm(e,c,!1);i.push(f),o.add(u.id)}t=i}}else t=[];this.length=0;for(var d=0,p=t.length;d<p;d++){var h=t[d][0];if(null!=h){var g=h._private.data.id;r&&n.has(g)||(r&&n.set(g,{index:this.length,ele:h}),this[this.length]=h,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function(){for(var e=this.lazyMap=new zm,t=this.eles,r=0;r<t.length;r++){var _=t[r];e.set(_.id(),{index:r,ele:_})}}},r&&(this._private.map=n),a&&!_&&this.restore()}else Cm("A collection must have a reference to the core")},xx=Vm.prototype=kx.prototype=Object.create(Array.prototype);xx.instanceString=function(){return"collection"},xx.spawn=function(e,t){return new kx(this.cy(),e,t)},xx.spawnSelf=function(){return this.spawn(this)},xx.cy=function(){return this._private.cy},xx.renderer=function(){return this._private.cy.renderer()},xx.element=function(){return this[0]},xx.collection=function(){return Rv(this)?this:new kx(this._private.cy,[this])},xx.unique=function(){return new kx(this._private.cy,this,!0)},xx.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},xx.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new kx(t)},xx.$id=xx.getElementById,xx.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},xx.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},xx.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},xx.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var _=t._private;if(Lv(e)){if(r.startBatch(),e.data){t.data(e.data);var n=_.data;if(t.isEdge()){var a=!1,i={},o=e.data.source,l=e.data.target;null!=o&&o!=n.source&&(i.source=""+o,a=!0),null!=l&&l!=n.target&&(i.target=""+l,a=!0),a&&(t=t.move(i))}else{var s="parent"in e.data,c=e.data.parent;!s||null==c&&null==n.parent||c==n.parent||(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var u=function(r,n,a){var i=e[r];null!=i&&i!==_[r]&&(i?t[n]():t[a]())};return u("removed","remove","restore"),u("selected","select","unselect"),u("selectable","selectify","unselectify"),u("locked","lock","unlock"),u("grabbable","grabify","ungrabify"),u("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var f={data:Nm(_.data),position:Nm(_.position),group:_.group,removed:_.removed,selected:_.selected,selectable:_.selectable,locked:_.locked,grabbable:_.grabbable,pannable:_.pannable,classes:null};f.classes="";var d=0;return _.classes.forEach((function(e){return f.classes+=0==d++?e:" "+e})),f}}},xx.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},xx.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var _=this[r].json(),n=new Vm(e,_,!1);t.push(n)}return new kx(e,t)},xx.copy=xx.clone,xx.restore=function(){for(var e,t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,a=n.cy(),i=a._private,o=[],l=[],s=0,c=n.length;s<c;s++){var u=n[s];_&&!u.removed()||(u.isNode()?o.push(u):l.push(u))}e=o.concat(l);var f=function(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var d=e[t],p=d._private,h=p.data;if(d.clearTraversalCache(),_||p.removed)if(void 0===h.id)h.id=Tm();else if(Mv(h.id))h.id=""+h.id;else{if(Bv(h.id)||!Sv(h.id)){Cm("Can not create element with invalid string ID `"+h.id+"`"),f();continue}if(a.hasElementWithId(h.id)){Cm("Can not create second element with ID `"+h.id+"`"),f();continue}}else;var g=h.id;if(d.isNode()){var v=p.position;null==v.x&&(v.x=0),null==v.y&&(v.y=0)}if(d.isEdge()){for(var m=d,y=["source","target"],w=y.length,b=!1,k=0;k<w;k++){var x=y[k],O=h[x];Mv(O)&&(O=h[x]=""+h[x]),null==O||""===O?(Cm("Can not create edge `"+g+"` with unspecified "+x),b=!0):a.hasElementWithId(O)||(Cm("Can not create edge `"+g+"` with nonexistant "+x+" `"+O+"`"),b=!0)}if(b){f();continue}var P=a.getElementById(h.source),E=a.getElementById(h.target);P.same(E)?P._private.edges.push(m):(P._private.edges.push(m),E._private.edges.push(m)),m._private.source=P,m._private.target=E}p.map=new zm,p.map.set(g,{ele:d,index:0}),p.removed=!1,_&&a.addToPool(d)}for(var C=0;C<o.length;C++){var A=o[C],S=A._private.data;Mv(S.parent)&&(S.parent=""+S.parent);var N=S.parent;if(null!=N||A._private.parent){var T=A._private.parent?a.collection().merge(A._private.parent):a.getElementById(N);if(T.empty())S.parent=void 0;else if(T[0].removed())Sm("Node added with missing parent, reference to parent removed"),S.parent=void 0,A._private.parent=null;else{for(var L=!1,M=T;!M.empty();){if(A.same(M)){L=!0,S.parent=void 0;break}M=M.parent()}L||(T[0]._private.children.push(A),A._private.parent=T[0],i.hasCompoundNodes=!0)}}}if(e.length>0){for(var j=e.length===n.length?n:new kx(a,e),I=0;I<j.length;I++){var D=j[I];D.isNode()||(D.parallelEdges().clearTraversalCache(),D.source().clearTraversalCache(),D.target().clearTraversalCache())}(i.hasCompoundNodes?a.collection().merge(j).merge(j.connectedNodes()).merge(j.parent()):j).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?j.emitAndNotify("add"):_&&j.emit("add")}return n},xx.removed=function(){var e=this[0];return e&&e._private.removed},xx.inside=function(){var e=this[0];return e&&!e._private.removed},xx.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,_=[],n={},a=r._private.cy;function i(e){var r=n[e.id()];t&&e.removed()||r||(n[e.id()]=!0,e.isNode()?(_.push(e),function(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}(e),function(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}(e)):_.unshift(e))}for(var o=0,l=r.length;o<l;o++){i(r[o])}function s(e,t){var r=e._private.edges;Im(r,t),e.clearTraversalCache()}function c(e){e.clearTraversalCache()}var u=[];function f(e,t){t=t[0];var r=(e=e[0])._private.children,_=e.id();Im(r,t),t._private.parent=null,u.ids[_]||(u.ids[_]=!0,u.push(e))}u.ids={},r.dirtyCompoundBoundsCache(),t&&a.removeFromPool(_);for(var d=0;d<_.length;d++){var p=_[d];if(p.isEdge()){var h=p.source()[0],g=p.target()[0];s(h,p),s(g,p);for(var v=p.parallelEdges(),m=0;m<v.length;m++){var y=v[m];c(y),y.isBundledBezier()&&y.dirtyBoundingBoxCache()}}else{var w=p.parent();0!==w.length&&f(w,p)}t&&(p._private.removed=!0)}var b=a._private.elements;a._private.hasCompoundNodes=!1;for(var k=0;k<b.length;k++){if(b[k].isParent()){a._private.hasCompoundNodes=!0;break}}var x=new kx(this.cy(),_);x.size()>0&&(e?x.emitAndNotify("remove"):t&&x.emit("remove"));for(var O=0;O<u.length;O++){var P=u[O];t&&P.removed()||P.updateStyle()}return x},xx.move=function(e){var t=this._private.cy,r=this,_=!1,n=!1,a=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=a(e.source),o=a(e.target),l=null!=i&&t.hasElementWithId(i),s=null!=o&&t.hasElementWithId(o);(l||s)&&(t.batch((function(){r.remove(_,n),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],a=t._private.data;t.isEdge()&&(l&&(a.source=i),s&&(a.target=o))}r.restore(_,n)})),r.emitAndNotify("move"))}else if(void 0!==e.parent){var c=a(e.parent);if(null===c||t.hasElementWithId(c)){var u=null===c?void 0:c;t.batch((function(){var e=r.remove(_,n);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var a=r[t],i=a._private.data;a.isNode()&&(i.parent=u)}e.restore(_,n)})),r.emitAndNotify("move")}}return this},[Kw,lb,sb,Wb,Zb,_k,nk,Lk,Hk,Yk,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Kk,ex,nx,fx,hx].forEach((function(e){Qv(xx,e)}));var Ox={add:function(e){var t,r=this;if(Iv(e)){var _=e;if(_._private.cy===r)t=_.restore();else{for(var n=[],a=0;a<_.length;a++){var i=_[a];n.push(i.json())}t=new kx(r,n)}}else if(Tv(e)){t=new kx(r,e)}else if(Lv(e)&&(Tv(e.nodes)||Tv(e.edges))){for(var o=e,l=[],s=["nodes","edges"],c=0,u=s.length;c<u;c++){var f=s[c],d=o[f];if(Tv(d))for(var p=0,h=d.length;p<h;p++){var g=Qv({group:f},d[p]);l.push(g)}}t=new kx(r,l)}else{t=new Vm(r,e).collection()}return t},remove:function(e){if(Iv(e));else if(Sv(e)){var t=e;e=this.$(t)}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Px(e,t,r,_){var n=.1,a="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var i=0;i<4;++i)if("number"!=typeof arguments[i]||isNaN(arguments[i])||!isFinite(arguments[i]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var o=a?new Float32Array(11):new Array(11);function l(e,t){return 1-3*t+3*e}function s(e,t){return 3*t-6*e}function c(e){return 3*e}function u(e,t,r){return((l(t,r)*e+s(t,r))*e+c(t))*e}function f(e,t,r){return 3*l(t,r)*e*e+2*s(t,r)*e+c(t)}function d(t){for(var _=0,a=1;10!==a&&o[a]<=t;++a)_+=n;--a;var i=_+(t-o[a])/(o[a+1]-o[a])*n,l=f(i,e,r);return l>=.001?function(t,_){for(var n=0;n<4;++n){var a=f(_,e,r);if(0===a)return _;_-=(u(_,e,r)-t)/a}return _}(t,i):0===l?i:function(t,_,n){var a,i,o=0;do{(a=u(i=_+(n-_)/2,e,r)-t)>0?n=i:_=i}while(Math.abs(a)>1e-7&&++o<10);return i}(t,_,_+n)}var p=!1;function h(){p=!0,e===t&&r===_||function(){for(var t=0;t<11;++t)o[t]=u(t*n,e,r)}()}var g=function(n){return p||h(),e===t&&r===_?n:0===n?0:1===n?1:u(d(n),t,_)};g.getControlPoints=function(){return[{x:e,y:t},{x:r,y:_}]};var v="generateBezier("+[e,t,r,_]+")";return g.toString=function(){return v},g}
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Ex=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,_){var n={x:t.x+_.dx*r,v:t.v+_.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,_){var n={dx:r.v,dv:e(r)},a=t(r,.5*_,n),i=t(r,.5*_,a),o=t(r,_,i),l=1/6*(n.dx+2*(a.dx+i.dx)+o.dx),s=1/6*(n.dv+2*(a.dv+i.dv)+o.dv);return r.x=r.x+l*_,r.v=r.v+s*_,r}return function e(t,_,n){var a,i,o,l={x:-1,v:0,tension:null,friction:null},s=[0],c=0,u=1e-4;for(t=parseFloat(t)||500,_=parseFloat(_)||20,n=n||null,l.tension=t,l.friction=_,i=(a=null!==n)?(c=e(t,_))/n*.016:.016;o=r(o||l,i),s.push(1+o.x),c+=16,Math.abs(o.x)>u&&Math.abs(o.v)>u;);return a?function(e){return s[e*(s.length-1)|0]}:c}}(),Cx=function(e,t,r,_){var n=Px(e,t,r,_);return function(e,t,r){return e+(t-e)*n(r)}},Ax={linear:function(e,t,r){return e+(t-e)*r},ease:Cx(.25,.1,.25,1),"ease-in":Cx(.42,0,1,1),"ease-out":Cx(0,0,.58,1),"ease-in-out":Cx(.42,0,.58,1),"ease-in-sine":Cx(.47,0,.745,.715),"ease-out-sine":Cx(.39,.575,.565,1),"ease-in-out-sine":Cx(.445,.05,.55,.95),"ease-in-quad":Cx(.55,.085,.68,.53),"ease-out-quad":Cx(.25,.46,.45,.94),"ease-in-out-quad":Cx(.455,.03,.515,.955),"ease-in-cubic":Cx(.55,.055,.675,.19),"ease-out-cubic":Cx(.215,.61,.355,1),"ease-in-out-cubic":Cx(.645,.045,.355,1),"ease-in-quart":Cx(.895,.03,.685,.22),"ease-out-quart":Cx(.165,.84,.44,1),"ease-in-out-quart":Cx(.77,0,.175,1),"ease-in-quint":Cx(.755,.05,.855,.06),"ease-out-quint":Cx(.23,1,.32,1),"ease-in-out-quint":Cx(.86,0,.07,1),"ease-in-expo":Cx(.95,.05,.795,.035),"ease-out-expo":Cx(.19,1,.22,1),"ease-in-out-expo":Cx(1,0,0,1),"ease-in-circ":Cx(.6,.04,.98,.335),"ease-out-circ":Cx(.075,.82,.165,1),"ease-in-out-circ":Cx(.785,.135,.15,.86),spring:function(e,t,r){if(0===r)return Ax.linear;var _=Ex(e,t,r);return function(e,t,r){return e+(t-e)*_(r)}},"cubic-bezier":Cx};function Sx(e,t,r,_,n){if(1===_)return r;if(t===r)return r;var a=n(t,r,_);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function Nx(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function Tx(e,t,r,_,n){var a=null!=n?n.type:null;r<0?r=0:r>1&&(r=1);var i=Nx(e,n),o=Nx(t,n);if(Mv(i)&&Mv(o))return Sx(a,i,o,r,_);if(Tv(i)&&Tv(o)){for(var l=[],s=0;s<o.length;s++){var c=i[s],u=o[s];if(null!=c&&null!=u){var f=Sx(a,c,u,r,_);l.push(f)}else l.push(u)}return l}}function Lx(e,t,r,_){var n=!_,a=e._private,i=t._private,o=i.easing,l=i.startTime,s=(_?e:e.cy()).style();if(!i.easingImpl)if(null==o)i.easingImpl=Ax.linear;else{var c,u,f;if(Sv(o))c=s.parse("transition-timing-function",o).value;else c=o;Sv(c)?(u=c,f=[]):(u=c[1],f=c.slice(2).map((function(e){return+e}))),f.length>0?("spring"===u&&f.push(i.duration),i.easingImpl=Ax[u].apply(null,f)):i.easingImpl=Ax[u]}var d,p=i.easingImpl;if(d=0===i.duration?1:(r-l)/i.duration,i.applying&&(d=i.progress),d<0?d=0:d>1&&(d=1),null==i.delay){var h=i.startPosition,g=i.position;if(g&&n&&!e.locked()){var v={};Mx(h.x,g.x)&&(v.x=Tx(h.x,g.x,d,p)),Mx(h.y,g.y)&&(v.y=Tx(h.y,g.y,d,p)),e.position(v)}var m=i.startPan,y=i.pan,w=a.pan,b=null!=y&&_;b&&(Mx(m.x,y.x)&&(w.x=Tx(m.x,y.x,d,p)),Mx(m.y,y.y)&&(w.y=Tx(m.y,y.y,d,p)),e.emit("pan"));var k=i.startZoom,x=i.zoom,O=null!=x&&_;O&&(Mx(k,x)&&(a.zoom=gy(a.minZoom,Tx(k,x,d,p),a.maxZoom)),e.emit("zoom")),(b||O)&&e.emit("viewport");var P=i.style;if(P&&P.length>0&&n){for(var E=0;E<P.length;E++){var C=P[E],A=C.name,S=C,N=i.startStyle[A],T=Tx(N,S,d,p,s.properties[N.name]);s.overrideBypass(e,A,T)}e.emit("style")}}return i.progress=d,d}function Mx(e,t){return null!=e&&null!=t&&(!(!Mv(e)||!Mv(t))||!(!e||!t))}function jx(e,t,r,_){var n=t._private;n.started=!0,n.startTime=r-n.progress*n.duration}function Ix(e,t){var r=t._private.aniEles,_=[];function n(t,r){var n=t._private,a=n.animation.current,i=n.animation.queue,o=!1;if(0===a.length){var l=i.shift();l&&a.push(l)}for(var s=function(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},c=a.length-1;c>=0;c--){var u=a[c],f=u._private;f.stopped?(a.splice(c,1),f.hooked=!1,f.playing=!1,f.started=!1,s(f.frames)):(f.playing||f.applying)&&(f.playing&&f.applying&&(f.applying=!1),f.started||jx(0,u,e),Lx(t,u,e,r),f.applying&&(f.applying=!1),s(f.frames),null!=f.step&&f.step(e),u.completed()&&(a.splice(c,1),f.hooked=!1,f.playing=!1,f.started=!1,s(f.completes)),o=!0)}return r||0!==a.length||0!==i.length||_.push(t),o}for(var a=!1,i=0;i<r.length;i++){var o=n(r[i]);a=a||o}var l=n(t,!0);(a||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(_),t.emit("step")}var Dx={animate:ob.animate(),animation:ob.animation(),animated:ob.animated(),clearQueue:ob.clearQueue(),delay:ob.delay(),delayAnimation:ob.delayAnimation(),stop:ob.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender((function(t,r){Ix(r,e)}),t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&om((function(r){Ix(r,e),t()}))}()}}},Rx={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var _=t.qualifier;return null==_||e!==r.target&&Dv(r.target)&&_.matches(r.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e}},Fx=function(e){return Sv(e)?new Ub(e):e},zx={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Bk(Rx,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,Fx(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,Fx(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,Fx(t),r),this},once:function(e,t,r){return this.emitter().one(e,Fx(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};ob.eventAliasesOn(zx);var Bx={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};Bx.jpeg=Bx.jpg;var qx={layout:function(e){var t=this;if(null!=e)if(null!=e.name){var r=e.name,_=t.extension("layout",r);if(null!=_){var n;n=Sv(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var a=new _(Qv({},e,{cy:t,eles:n}));return a}Cm("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Cm("A `name` must be specified to make a layout");else Cm("Layout options must be specified to make a layout")}};qx.createLayout=qx.makeLayout=qx.layout;var Vx={notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var _=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&_.merge(t)}else if(r.notificationsEnabled){var n=this.renderer();!this.destroyed()&&n&&n.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach((function(r){var _=e.batchNotifications[r];_.empty()?t.notify(r):t.notify(r,_)}))}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch((function(){for(var r=Object.keys(e),_=0;_<r.length;_++){var n=r[_],a=e[n];t.getElementById(n).data(a)}}))}},Gx=jm({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Ux={renderTo:function(e,t,r,_){return this._private.renderer.renderTo(e,t,r,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,r=t.extension("renderer",e.name);if(null!=r){void 0!==e.wheelSensitivity&&Sm("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=Gx(e);_.cy=t,t._private.renderer=new r(_),this.notify("init")}else Cm("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach((function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]}))},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Ux.invalidateDimensions=Ux.resize;var $x={collection:function(e,t){return Sv(e)?this.$(e):Iv(e)?e.collection():Tv(e)?(t||(t={}),new kx(this,e,t.unique,t.removed)):new kx(this)},nodes:function(e){var t=this.$((function(e){return e.isNode()}));return e?t.filter(e):t},edges:function(e){var t=this.$((function(e){return e.isEdge()}));return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};$x.elements=$x.filter=$x.$;var Wx={},Hx="t";Wx.apply=function(e){for(var t=this,r=t._private.cy.collection(),_=0;_<e.length;_++){var n=e[_],a=t.getContextMeta(n);if(!a.empty){var i=t.getContextStyle(a),o=t.applyContextStyle(a,i,n);n._private.appliedInitStyle?t.updateTransitions(n,o.diffProps):n._private.appliedInitStyle=!0,t.updateStyleHints(n)&&r.push(n)}}return r},Wx.getPropertiesDiff=function(e,t){var r=this,_=r._private.propDiffs=r._private.propDiffs||{},n=e+"-"+t,a=_[n];if(a)return a;for(var i=[],o={},l=0;l<r.length;l++){var s=r[l],c=e[l]===Hx,u=t[l]===Hx,f=c!==u,d=s.mappedProperties.length>0;if(f||u&&d){var p=void 0;f&&d||f?p=s.properties:d&&(p=s.mappedProperties);for(var h=0;h<p.length;h++){for(var g=p[h],v=g.name,m=!1,y=l+1;y<r.length;y++){var w=r[y];if(t[y]===Hx&&(m=null!=w.properties[g.name]))break}o[v]||m||(o[v]=!0,i.push(v))}}}return _[n]=i,i},Wx.getContextMeta=function(e){for(var t,r=this,_="",n=e._private.styleCxtKey||"",a=0;a<r.length;a++){var i=r[a];_+=i.selector&&i.selector.matches(e)?Hx:"f"}return t=r.getPropertiesDiff(n,_),e._private.styleCxtKey=_,{key:_,diffPropNames:t,empty:0===t.length}},Wx.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var _={_private:{key:t}},n=0;n<this.length;n++){var a=this[n];if(t[n]===Hx)for(var i=0;i<a.properties.length;i++){var o=a.properties[i];_[o.name]=o}}return r[t]=_,_},Wx.applyContextStyle=function(e,t,r){for(var _=e.diffPropNames,n={},a=this.types,i=0;i<_.length;i++){var o=_[i],l=t[o],s=r.pstyle(o);if(!l){if(!s)continue;l=s.bypass?{name:o,deleteBypassed:!0}:{name:o,delete:!0}}if(s!==l){if(l.mapped===a.fn&&null!=s&&null!=s.mapping&&s.mapping.value===l.value){var c=s.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var u=n[o]={prev:s};this.applyParsedProperty(r,l),u.next=r.pstyle(o),u.next&&u.next.bypass&&(u.next=u.next.bypassed)}}return{diffProps:n}},Wx.updateStyleHints=function(e){var t=e._private,r=this,_=r.propertyGroupNames,n=r.propertyGroupKeys,a=function(e,t,_){return r.getPropertiesHash(e,t,_)},i=t.styleKey;if(e.removed())return!1;var o="nodes"===t.group,l=e._private.style;_=Object.keys(l);for(var s=0;s<n.length;s++){var c=n[s];t.styleKeys[c]=[sm,cm]}for(var u,f=function(e,r){return t.styleKeys[r][0]=fm(e,t.styleKeys[r][0])},d=function(e,r){return t.styleKeys[r][1]=dm(e,t.styleKeys[r][1])},p=function(e,t){f(e,t),d(e,t)},h=function(e,t){for(var r=0;r<e.length;r++){var _=e.charCodeAt(r);f(_,t),d(_,t)}},g=0;g<_.length;g++){var v=_[g],m=l[v];if(null!=m){var y=this.properties[v],w=y.type,b=y.groupKey,k=void 0;null!=y.hashOverride?k=y.hashOverride(e,m):null!=m.pfValue&&(k=m.pfValue);var x=null==y.enums?m.value:null,O=null!=k,P=O||null!=x,E=m.units;if(w.number&&P&&!w.multiple)p(-128<(u=O?k:x)&&u<128&&Math.floor(u)!==u?2e9-(1024*u|0):u,b),O||null==E||h(E,b);else h(m.strValue,b)}}for(var C,A,S=[sm,cm],N=0;N<n.length;N++){var T=n[N],L=t.styleKeys[T];S[0]=fm(L[0],S[0]),S[1]=dm(L[1],S[1])}t.styleKey=(C=S[0],A=S[1],2097152*C+A);var M=t.styleKeys;t.labelDimsKey=pm(M.labelDimensions);var j=a(e,["label"],M.labelDimensions);if(t.labelKey=pm(j),t.labelStyleKey=pm(hm(M.commonLabel,j)),!o){var I=a(e,["source-label"],M.labelDimensions);t.sourceLabelKey=pm(I),t.sourceLabelStyleKey=pm(hm(M.commonLabel,I));var D=a(e,["target-label"],M.labelDimensions);t.targetLabelKey=pm(D),t.targetLabelStyleKey=pm(hm(M.commonLabel,D))}if(o){var R=t.styleKeys,F=R.nodeBody,z=R.nodeBorder,B=R.nodeOutline,q=R.backgroundImage,V=R.compound,G=R.pie,U=[F,z,B,q,V,G].filter((function(e){return null!=e})).reduce(hm,[sm,cm]);t.nodeKey=pm(U),t.hasPie=null!=G&&G[0]!==sm&&G[1]!==cm}return i!==t.styleKey},Wx.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null},Wx.applyParsedProperty=function(e,t){var r,_=this,n=t,a=e._private.style,i=_.types,o=_.properties[n.name].type,l=n.bypass,s=a[n.name],c=s&&s.bypass,u=e._private,f="mapping",d=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},p=function(){var t=d(s),r=d(n);_.checkTriggers(e,n.name,t,r)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(n=t=this.parse(t.name,"bezier",l)),n.delete)return a[n.name]=void 0,p(),!0;if(n.deleteBypassed)return s?!!s.bypass&&(s.bypassed=void 0,p(),!0):(p(),!0);if(n.deleteBypass)return s?!!s.bypass&&(a[n.name]=s.bypassed,p(),!0):(p(),!0);var h=function(){Sm("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case i.mapData:for(var g,v=n.field.split("."),m=u.data,y=0;y<v.length&&m;y++){m=m[v[y]]}if(null==m)return h(),!1;if(!Mv(m))return Sm("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+m+"` for `"+e.id()+"` is non-numeric)"),!1;var w=n.fieldMax-n.fieldMin;if((g=0===w?0:(m-n.fieldMin)/w)<0?g=0:g>1&&(g=1),o.color){var b=n.valueMin[0],k=n.valueMax[0],x=n.valueMin[1],O=n.valueMax[1],P=n.valueMin[2],E=n.valueMax[2],C=null==n.valueMin[3]?1:n.valueMin[3],A=null==n.valueMax[3]?1:n.valueMax[3],S=[Math.round(b+(k-b)*g),Math.round(x+(O-x)*g),Math.round(P+(E-P)*g),Math.round(C+(A-C)*g)];r={bypass:n.bypass,name:n.name,value:S,strValue:"rgb("+S[0]+", "+S[1]+", "+S[2]+")"}}else{if(!o.number)return!1;var N=n.valueMin+(n.valueMax-n.valueMin)*g;r=this.parse(n.name,N,n.bypass,f)}if(!r)return h(),!1;r.mapping=n,n=r;break;case i.data:for(var T=n.field.split("."),L=u.data,M=0;M<T.length&&L;M++){L=L[T[M]]}if(null!=L&&(r=this.parse(n.name,L,n.bypass,f)),!r)return h(),!1;r.mapping=n,n=r;break;case i.fn:var j=n.value,I=null!=n.fnValue?n.fnValue:j(e);if(n.prevFnValue=I,null==I)return Sm("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(r=this.parse(n.name,I,n.bypass,f)))return Sm("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+e.id()+"` is invalid)"),!1;r.mapping=Nm(n),n=r;break;case void 0:break;default:return!1}return l?(n.bypassed=c?s.bypassed:s,a[n.name]=n):c?s.bypassed=n:a[n.name]=n,p(),!0},Wx.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var _=e[r];if(this.clearStyleHints(_),_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),t)for(var n=_._private.style,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],l=n[o];null!=l&&(l.bypass?l.bypassed=null:n[o]=null)}else _._private.style={}}},Wx.update=function(){this._private.cy.mutableElements().updateStyle()},Wx.updateTransitions=function(e,t){var r=this,_=e._private,n=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,i=e.pstyle("transition-delay").pfValue;if(n.length>0&&a>0){for(var o={},l=!1,s=0;s<n.length;s++){var c=n[s],u=e.pstyle(c),f=t[c];if(f){var d=f.prev,p=null!=f.next?f.next:u,h=!1,g=void 0,v=1e-6;d&&(Mv(d.pfValue)&&Mv(p.pfValue)?(h=p.pfValue-d.pfValue,g=d.pfValue+v*h):Mv(d.value)&&Mv(p.value)?(h=p.value-d.value,g=d.value+v*h):Tv(d.value)&&Tv(p.value)&&(h=d.value[0]!==p.value[0]||d.value[1]!==p.value[1]||d.value[2]!==p.value[2],g=d.strValue),h&&(o[c]=p.strValue,this.applyBypass(e,c,g),l=!0))}}if(!l)return;_.transitioning=!0,new nb((function(t){i>0?e.delayAnimation(i).play().promise().then(t):t()})).then((function(){return e.animation({style:o,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(e,n),e.emitAndNotify("style"),_.transitioning=!1}))}else _.transitioning&&(this.removeBypasses(e,n),e.emitAndNotify("style"),_.transitioning=!1)},Wx.checkTrigger=function(e,t,r,_,n,a){var i=this.properties[t],o=n(i);null!=o&&o(r,_)&&a(i)},Wx.checkZOrderTrigger=function(e,t,r,_){var n=this;this.checkTrigger(e,t,r,_,(function(e){return e.triggersZOrder}),(function(){n._private.cy.notify("zorder",e)}))},Wx.checkBoundsTrigger=function(e,t,r,_){this.checkTrigger(e,t,r,_,(function(e){return e.triggersBounds}),(function(n){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache(),!n.triggersBoundsOfParallelBeziers||"curve-style"!==t||"bezier"!==r&&"bezier"!==_||e.parallelEdges().forEach((function(e){e.isBundledBezier()&&e.dirtyBoundingBoxCache()})),!n.triggersBoundsOfConnectedEdges||"display"!==t||"none"!==r&&"none"!==_||e.connectedEdges().forEach((function(e){e.dirtyBoundingBoxCache()}))}))},Wx.checkTriggers=function(e,t,r,_){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,_),this.checkBoundsTrigger(e,t,r,_)};var Yx={applyBypass:function(e,t,r,_){var n=[];if("*"===t||"**"===t){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var i=this.properties[a].name,o=this.parse(i,r,!0);o&&n.push(o)}}else if(Sv(t)){var l=this.parse(t,r,!0);l&&n.push(l)}else{if(!Lv(t))return!1;var s=t;_=r;for(var c=Object.keys(s),u=0;u<c.length;u++){var f=c[u],d=s[f];if(void 0===d&&(d=s[Uv(f)]),void 0!==d){var p=this.parse(f,d,!0);p&&n.push(p)}}}if(0===n.length)return!1;for(var h=!1,g=0;g<e.length;g++){for(var v=e[g],m={},y=void 0,w=0;w<n.length;w++){var b=n[w];if(_){var k=v.pstyle(b.name);y=m[b.name]={prev:k}}h=this.applyParsedProperty(v,Nm(b))||h,_&&(y.next=v.pstyle(b.name))}h&&this.updateStyleHints(v),_&&this.updateTransitions(v,m,true)}return h},overrideBypass:function(e,t,r){t=Gv(t);for(var _=0;_<e.length;_++){var n=e[_],a=n._private.style[t],i=this.properties[t].type,o=i.color,l=i.mutiple,s=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),a.strValue=o?"rgb("+r.join(",")+")":l?r.join(" "):""+r,this.updateStyleHints(n)):this.applyBypass(n,t,r),this.checkTriggers(n,t,s,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var _=0;_<e.length;_++){for(var n=e[_],a={},i=0;i<t.length;i++){var o=t[i],l=this.properties[o],s=n.pstyle(l.name);if(s&&s.bypass){var c=this.parse(o,"",!0),u=a[l.name]={prev:s};this.applyParsedProperty(n,c),u.next=n.pstyle(l.name)}}this.updateStyleHints(n),r&&this.updateTransitions(n,a,true)}}},Xx={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),_=t.window();if(_&&r&&_.getComputedStyle)return _.getComputedStyle(r).getPropertyValue(e)}},Zx={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var _={},n=0;n<r.properties.length;n++){var a=r.properties[n],i=r.getStylePropertyValue(e,a.name,t);null!=i&&(_[a.name]=i,_[Uv(a.name)]=i)}return _}},getIndexedStyle:function(e,t,r,_){var n=e.pstyle(t)[r][_];return null!=n?n:e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var _=this.properties[t];_.alias&&(_=_.pointsTo);var n=_.type,a=e.pstyle(_.name);if(a){var i=a.value,o=a.units,l=a.strValue;if(r&&n.number&&null!=i&&Mv(i)){var s=e.cy().zoom(),c=function(e){return e*s},u=function(e,t){return c(e)+t},f=Tv(i);return(f?o.every((function(e){return null!=e})):null!=o)?f?i.map((function(e,t){return u(e,o[t])})).join(" "):u(i,o):f?i.map((function(e){return Sv(e)?e:""+c(e)})).join(" "):""+c(i)}if(null!=l)return l}return null}},getAnimationStartStyle:function(e,t){for(var r={},_=0;_<t.length;_++){var n=t[_].name,a=e.pstyle(n);void 0!==a&&(a=Lv(a)?this.parse(n,a.strValue):this.parse(n,a)),a&&(r[n]=a)}return r},getPropsList:function(e){var t=[],r=e,_=this.properties;if(r)for(var n=Object.keys(r),a=0;a<n.length;a++){var i=n[a],o=r[i],l=_[i]||_[Gv(i)],s=this.parse(l.name,o);s&&t.push(s)}return t},getNonDefaultPropertiesHash:function(e,t,r){var _,n,a,i,o,l,s=r.slice();for(o=0;o<t.length;o++)if(_=t[o],null!=(n=e.pstyle(_,!1)))if(null!=n.pfValue)s[0]=fm(i,s[0]),s[1]=dm(i,s[1]);else for(a=n.strValue,l=0;l<a.length;l++)i=a.charCodeAt(l),s[0]=fm(i,s[0]),s[1]=dm(i,s[1]);return s}};Zx.getPropertiesHash=Zx.getNonDefaultPropertiesHash;var Kx={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var _=e[r],n=_.selector,a=_.style||_.css,i=Object.keys(a);t.selector(n);for(var o=0;o<i.length;o++){var l=i[o],s=a[l];t.css(l,s)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],_=r.selector,n=r.properties,a={},i=0;i<n.length;i++){var o=n[i];a[o.name]=o.strValue}e.push({selector:_?_.toString():"core",style:a})}return e}},Jx={appendFromString:function(e){var t,r,_,n=this,a=""+e;function i(){a=a.length>t.length?a.substr(t.length):""}function o(){r=r.length>_.length?r.substr(_.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(a.match(/^\s*$/))break;var l=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){Sm("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}t=l[0];var s=l[1];if("core"!==s)if(new Ub(s).invalid){Sm("Skipping parsing of block: Invalid selector found in string stylesheet: "+s),i();continue}var c=l[2],u=!1;r=c;for(var f=[];;){if(r.match(/^\s*$/))break;var d=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!d){Sm("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),u=!0;break}_=d[0];var p=d[1],h=d[2];if(this.properties[p])n.parse(p,h)?(f.push({name:p,val:h}),o()):(Sm("Skipping property: Invalid property definition in: "+_),o());else Sm("Skipping property: Invalid property name in: "+_),o()}if(u){i();break}n.selector(s);for(var g=0;g<f.length;g++){var v=f[g];n.css(v.name,v.val)}i()}return n},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},Qx={};!function(){var e=Hv,t=Xv,r=Kv,_=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(_){var n=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+_+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+n+")\\s*\\,\\s*("+n+")\\)$"},a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Qx.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:_("data")},layoutData:{mapping:!0,regex:_("layoutData")},scratch:{mapping:!0,regex:_("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return Sv(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var i={zeroNonZero:function(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function(e,t){return e!=t},emptyNonEmpty:function(e,t){var r=Bv(e),_=Bv(t);return r&&!_||!r&&_}},o=Qx.types,l=[{name:"label",type:o.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any}],s=[{name:"source-label",type:o.text,triggersBounds:i.any},{name:"source-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:o.size,triggersBounds:i.any}],c=[{name:"target-label",type:o.text,triggersBounds:i.any},{name:"target-text-rotation",type:o.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:o.size,triggersBounds:i.any}],u=[{name:"font-family",type:o.fontFamily,triggersBounds:i.any},{name:"font-style",type:o.fontStyle,triggersBounds:i.any},{name:"font-weight",type:o.fontWeight,triggersBounds:i.any},{name:"font-size",type:o.size,triggersBounds:i.any},{name:"text-transform",type:o.textTransform,triggersBounds:i.any},{name:"text-wrap",type:o.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:o.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:o.size,triggersBounds:i.any},{name:"text-outline-width",type:o.size,triggersBounds:i.any},{name:"line-height",type:o.positiveNumber,triggersBounds:i.any}],f=[{name:"text-valign",type:o.valign,triggersBounds:i.any},{name:"text-halign",type:o.halign,triggersBounds:i.any},{name:"color",type:o.color},{name:"text-outline-color",type:o.color},{name:"text-outline-opacity",type:o.zeroOneNumber},{name:"text-background-color",type:o.color},{name:"text-background-opacity",type:o.zeroOneNumber},{name:"text-background-padding",type:o.size,triggersBounds:i.any},{name:"text-border-opacity",type:o.zeroOneNumber},{name:"text-border-color",type:o.color},{name:"text-border-width",type:o.size,triggersBounds:i.any},{name:"text-border-style",type:o.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:o.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:o.justification}],d=[{name:"events",type:o.bool,triggersZOrder:i.any},{name:"text-events",type:o.bool,triggersZOrder:i.any}],p=[{name:"display",type:o.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:o.visibility,triggersZOrder:i.any},{name:"opacity",type:o.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:o.zeroOneNumber},{name:"min-zoomed-font-size",type:o.size},{name:"z-compound-depth",type:o.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:o.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:o.number,triggersZOrder:i.any}],h=[{name:"overlay-padding",type:o.size,triggersBounds:i.any},{name:"overlay-color",type:o.color},{name:"overlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"overlay-shape",type:o.overlayShape,triggersBounds:i.any}],g=[{name:"underlay-padding",type:o.size,triggersBounds:i.any},{name:"underlay-color",type:o.color},{name:"underlay-opacity",type:o.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"underlay-shape",type:o.overlayShape,triggersBounds:i.any}],v=[{name:"transition-property",type:o.propList},{name:"transition-duration",type:o.time},{name:"transition-delay",type:o.time},{name:"transition-timing-function",type:o.easing}],m=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},y=[{name:"height",type:o.nodeSize,triggersBounds:i.any,hashOverride:m},{name:"width",type:o.nodeSize,triggersBounds:i.any,hashOverride:m},{name:"shape",type:o.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:o.polygonPointList,triggersBounds:i.any},{name:"background-color",type:o.color},{name:"background-fill",type:o.fill},{name:"background-opacity",type:o.zeroOneNumber},{name:"background-blacken",type:o.nOneOneNumber},{name:"background-gradient-stop-colors",type:o.colors},{name:"background-gradient-stop-positions",type:o.percentages},{name:"background-gradient-direction",type:o.gradientDirection},{name:"padding",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:o.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:o.boundsExpansion,triggersBounds:i.any}],w=[{name:"border-color",type:o.color},{name:"border-opacity",type:o.zeroOneNumber},{name:"border-width",type:o.size,triggersBounds:i.any},{name:"border-style",type:o.borderStyle}],b=[{name:"outline-color",type:o.color},{name:"outline-opacity",type:o.zeroOneNumber},{name:"outline-width",type:o.size,triggersBounds:i.any},{name:"outline-style",type:o.borderStyle},{name:"outline-offset",type:o.size,triggersBounds:i.any}],k=[{name:"background-image",type:o.urls},{name:"background-image-crossorigin",type:o.bgCrossOrigin},{name:"background-image-opacity",type:o.zeroOneNumbers},{name:"background-image-containment",type:o.bgContainment},{name:"background-image-smoothing",type:o.bools},{name:"background-position-x",type:o.bgPos},{name:"background-position-y",type:o.bgPos},{name:"background-width-relative-to",type:o.bgRelativeTo},{name:"background-height-relative-to",type:o.bgRelativeTo},{name:"background-repeat",type:o.bgRepeat},{name:"background-fit",type:o.bgFit},{name:"background-clip",type:o.bgClip},{name:"background-width",type:o.bgWH},{name:"background-height",type:o.bgWH},{name:"background-offset-x",type:o.bgPos},{name:"background-offset-y",type:o.bgPos}],x=[{name:"position",type:o.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:o.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:o.size,triggersBounds:i.any},{name:"min-width-bias-left",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:o.size,triggersBounds:i.any},{name:"min-height-bias-top",type:o.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:o.sizeMaybePercent,triggersBounds:i.any}],O=[{name:"line-style",type:o.lineStyle},{name:"line-color",type:o.color},{name:"line-fill",type:o.fill},{name:"line-cap",type:o.lineCap},{name:"line-opacity",type:o.zeroOneNumber},{name:"line-dash-pattern",type:o.numbers},{name:"line-dash-offset",type:o.number},{name:"line-gradient-stop-colors",type:o.colors},{name:"line-gradient-stop-positions",type:o.percentages},{name:"curve-style",type:o.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:o.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:o.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:o.size,triggersBounds:i.any},{name:"control-point-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:o.numbers,triggersBounds:i.any},{name:"segment-distances",type:o.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:o.numbers,triggersBounds:i.any},{name:"taxi-turn",type:o.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:o.size,triggersBounds:i.any},{name:"taxi-direction",type:o.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:o.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:o.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:o.angle,triggersBounds:i.any},{name:"loop-sweep",type:o.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:o.size,triggersBounds:i.any},{name:"target-distance-from-node",type:o.size,triggersBounds:i.any}],P=[{name:"ghost",type:o.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:o.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:o.zeroOneNumber}],E=[{name:"selection-box-color",type:o.color},{name:"selection-box-opacity",type:o.zeroOneNumber},{name:"selection-box-border-color",type:o.color},{name:"selection-box-border-width",type:o.size},{name:"active-bg-color",type:o.color},{name:"active-bg-opacity",type:o.zeroOneNumber},{name:"active-bg-size",type:o.size},{name:"outside-texture-bg-color",type:o.color},{name:"outside-texture-bg-opacity",type:o.zeroOneNumber}],C=[];Qx.pieBackgroundN=16,C.push({name:"pie-size",type:o.sizeMaybePercent});for(var A=1;A<=Qx.pieBackgroundN;A++)C.push({name:"pie-"+A+"-background-color",type:o.color}),C.push({name:"pie-"+A+"-background-size",type:o.percent}),C.push({name:"pie-"+A+"-background-opacity",type:o.zeroOneNumber});var S=[],N=Qx.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:o.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:o.color},{name:"arrow-fill",type:o.arrowFill},{name:"arrow-width",type:o.arrowWidth}].forEach((function(e){N.forEach((function(t){var r=t+"-"+e.name,_=e.type,n=e.triggersBounds;S.push({name:r,type:_,triggersBounds:n})}))}),{});var T=Qx.properties=[].concat(d,v,p,h,g,P,f,u,l,s,c,y,w,b,k,C,x,O,S,E),L=Qx.propertyGroups={behavior:d,transition:v,visibility:p,overlay:h,underlay:g,ghost:P,commonLabel:f,labelDimensions:u,mainLabel:l,sourceLabel:s,targetLabel:c,nodeBody:y,nodeBorder:w,nodeOutline:b,backgroundImage:k,pie:C,compound:x,edgeLine:O,edgeArrow:S,core:E},M=Qx.propertyGroupNames={};(Qx.propertyGroupKeys=Object.keys(L)).forEach((function(e){M[e]=L[e].map((function(e){return e.name})),L[e].forEach((function(t){return t.groupKey=e}))}));var j=Qx.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Qx.propertyNames=T.map((function(e){return e.name}));for(var I=0;I<T.length;I++){var D=T[I];T[D.name]=D}for(var R=0;R<j.length;R++){var F=j[R],z=T[F.pointsTo],B={name:F.name,alias:!0,pointsTo:z};T.push(B),T[F.name]=B}}(),Qx.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},Qx.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=Qv({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(e,t){for(var r=1;r<=Qx.pieBackgroundN;r++){var _=t.name.replace("{{i}}",r),n=t.value;e[_]=n}return e}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(e,t){return Qx.arrowPrefixes.forEach((function(r){var _=r+"-"+t.name,n=t.value;e[_]=n})),e}),{})),r={},_=0;_<this.properties.length;_++){var n=this.properties[_];if(!n.pointsTo){var a=n.name,i=t[a],o=this.parse(a,i);r[a]=o}}return e.defaultProperties=r,e.defaultProperties},Qx.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var eO={parse:function(e,t,r,_){var n=this;if(Nv(t))return n.parseImplWarn(e,t,r,_);var a,i=vm(e,""+t,r?"t":"f","mapping"===_||!0===_||!1===_||null==_?"dontcare":_),o=n.propCache=n.propCache||[];return(a=o[i])||(a=o[i]=n.parseImplWarn(e,t,r,_)),(r||"mapping"===_)&&(a=Nm(a))&&(a.value=Nm(a.value)),a},parseImplWarn:function(e,t,r,_){var n=this.parseImpl(e,t,r,_);return n||null==t||Sm("The style property `".concat(e,": ").concat(t,"` is invalid")),!n||"width"!==n.name&&"height"!==n.name||"label"!==t||Sm("The style value of `label` is deprecated for `"+n.name+"`"),n}};eO.parseImpl=function(e,t,r,_){var n=this;e=Gv(e);var a=n.properties[e],i=t,o=n.types;if(!a)return null;if(void 0===t)return null;a.alias&&(a=a.pointsTo,e=a.name);var l=Sv(t);l&&(t=t.trim());var s,c,u=a.type;if(!u)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(Nv(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!l||_||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(s=new RegExp(o.data.regex).exec(t))){if(r)return!1;var f=o.data;return{name:e,value:s,strValue:""+t,mapped:f,field:s[1],bypass:r}}if(t.length>=10&&"m"===t[0]&&(c=new RegExp(o.mapData.regex).exec(t))){if(r)return!1;if(u.multiple)return!1;var d=o.mapData;if(!u.color&&!u.number)return!1;var p=this.parse(e,c[4]);if(!p||p.mapped)return!1;var h=this.parse(e,c[5]);if(!h||h.mapped)return!1;if(p.pfValue===h.pfValue||p.strValue===h.strValue)return Sm("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+p.strValue+"`"),this.parse(e,p.strValue);if(u.color){var g=p.value,v=h.value;if(!(g[0]!==v[0]||g[1]!==v[1]||g[2]!==v[2]||g[3]!==v[3]&&(null!=g[3]&&1!==g[3]||null!=v[3]&&1!==v[3])))return!1}return{name:e,value:c,strValue:""+t,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:p.value,valueMax:h.value,bypass:r}}}if(u.multiple&&"multiple"!==_){var m;if(m=l?t.split(/\s+/):Tv(t)?t:[t],u.evenMultiple&&m.length%2!=0)return null;for(var y=[],w=[],b=[],k="",x=!1,O=0;O<m.length;O++){var P=n.parse(e,m[O],r,"multiple");x=x||Sv(P.value),y.push(P.value),b.push(null!=P.pfValue?P.pfValue:P.value),w.push(P.units),k+=(O>0?" ":"")+P.strValue}return u.validate&&!u.validate(y,w)?null:u.singleEnum&&x?1===y.length&&Sv(y[0])?{name:e,value:y[0],strValue:y[0],bypass:r}:null:{name:e,value:y,pfValue:b,strValue:k,bypass:r,units:w}}var E,C,A=function(){for(var _=0;_<u.enums.length;_++){if(u.enums[_]===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(u.number){var S,N="px";if(u.units&&(S=u.units),u.implicitUnits&&(N=u.implicitUnits),!u.unitless)if(l){var T="px|em"+(u.allowPercent?"|\\%":"");S&&(T=S);var L=t.match("^("+Hv+")("+T+")?$");L&&(t=L[1],S=L[2]||N)}else S&&!u.implicitUnits||(S=N);if(t=parseFloat(t),isNaN(t)&&void 0===u.enums)return null;if(isNaN(t)&&void 0!==u.enums)return t=i,A();if(u.integer&&(!Mv(C=t)||Math.floor(C)!==C))return null;if(void 0!==u.min&&(t<u.min||u.strictMin&&t===u.min)||void 0!==u.max&&(t>u.max||u.strictMax&&t===u.max))return null;var M={name:e,value:t,strValue:""+t+(S||""),units:S,bypass:r};return u.unitless||"px"!==S&&"em"!==S?M.pfValue=t:M.pfValue="px"!==S&&S?this.getEmSizeInPixels()*t:t,"ms"!==S&&"s"!==S||(M.pfValue="ms"===S?t:1e3*t),"deg"!==S&&"rad"!==S||(M.pfValue="rad"===S?t:(E=t,Math.PI*E/180)),"%"===S&&(M.pfValue=t/100),M}if(u.propList){var j=[],I=""+t;if("none"===I);else{for(var D=I.split(/\s*,\s*|\s+/),R=0;R<D.length;R++){var F=D[R].trim();n.properties[F]?j.push(F):Sm("`"+F+"` is not a valid property name")}if(0===j.length)return null}return{name:e,value:j,strValue:0===j.length?"none":j.join(" "),bypass:r}}if(u.color){var z=em(t);return z?{name:e,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}if(u.regex||u.regexes){if(u.enums){var B=A();if(B)return B}for(var q=u.regexes?u.regexes:[u.regex],V=0;V<q.length;V++){var G=new RegExp(q[V]).exec(t);if(G)return{name:e,value:u.singleRegexMatchValue?G[1]:G,strValue:""+t,bypass:r}}return null}return u.string?{name:e,value:""+t,strValue:""+t,bypass:r}:u.enums?A():null};var tO=function e(t){if(!(this instanceof e))return new e(t);Fv(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):Cm("A style must have a core reference")},rO=tO.prototype;rO.instanceString=function(){return"style"},rO.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach((function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1})),this},rO.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},rO.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},rO.selector=function(e){var t="core"===e?null:new Ub(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},rO.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var _=this.properties[r],n=t[_.name];void 0===n&&(n=t[Uv(_.name)]),void 0!==n&&this.cssRule(_.name,n)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},rO.style=rO.css,rO.cssRule=function(e,t){var r=this.parse(e,t);if(r){var _=this.length-1;this[_].properties.push(r),this[_].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[_].mappedProperties.push(r),!this[_].selector&&(this._private.coreStyle[r.name]=r)}return this},rO.append=function(e){return zv(e)?e.appendToStyle(this):Tv(e)?this.appendFromJson(e):Sv(e)&&this.appendFromString(e),this},tO.fromJson=function(e,t){var r=new tO(e);return r.fromJson(t),r},tO.fromString=function(e,t){return new tO(e).fromString(t)},[Wx,Yx,Xx,Zx,Kx,Jx,Qx,eO].forEach((function(e){Qv(rO,e)})),tO.types=rO.types,tO.properties=rO.properties,tO.propertyGroups=rO.propertyGroups,tO.propertyGroupNames=rO.propertyGroupNames,tO.propertyGroupKeys=rO.propertyGroupKeys;var _O={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return zv(e)?t.style=e.generateStyle(this):Tv(e)?t.style=tO.fromJson(this,e):Sv(e)?t.style=tO.fromString(this,e):t.style=tO(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},nO={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,r,_,n,a=arguments,i=this._private.pan;switch(a.length){case 0:return i;case 1:if(Sv(a[0]))return i[e=a[0]];if(Lv(a[0])){if(!this._private.panningEnabled)return this;_=(r=a[0]).x,n=r.y,Mv(_)&&(i.x=_),Mv(n)&&(i.y=n),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[1],"x"!==(e=a[0])&&"y"!==e||!Mv(t)||(i[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var r,_,n,a,i,o=arguments,l=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:Lv(e)&&(a=(n=o[0]).x,i=n.y,Mv(a)&&(l.x+=a),Mv(i)&&(l.y+=i),this.emit("pan viewport"));break;case 2:_=t,"x"!==(r=e)&&"y"!==r||!Mv(_)||(l[r]+=_),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var _=this._private;_.zoom=r.zoom,_.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Mv(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r,_;if(Sv(e)){var n=e;e=this.$(n)}else if(Lv(_=e)&&Mv(_.x1)&&Mv(_.x2)&&Mv(_.y1)&&Mv(_.y2)){var a=e;(r={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else Iv(e)||(e=this.mutableElements());if(!Iv(e)||!e.empty()){r=r||e.boundingBox();var i,o=this.width(),l=this.height();if(t=Mv(t)?t:0,!isNaN(o)&&!isNaN(l)&&o>0&&l>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:i=(i=(i=Math.min((o-2*t)/r.w,(l-2*t)/r.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i,pan:{x:(o-i*(r.x1+r.x2))/2,y:(l-i*(r.y1+r.y2))/2}}}}},zoomRange:function(e,t){var r=this._private;if(null==t){var _=e;e=_.min,t=_.max}return Mv(e)&&Mv(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):Mv(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:Mv(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,r,_=this._private,n=_.pan,a=_.zoom,i=!1;if(_.zoomingEnabled||(i=!0),Mv(e)?r=e:Lv(e)&&(r=e.level,null!=e.position?t=ny(e.position,a,n):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||_.panningEnabled||(i=!0)),r=(r=r>_.maxZoom?_.maxZoom:r)<_.minZoom?_.minZoom:r,i||!Mv(r)||r===a||null!=t&&(!Mv(t.x)||!Mv(t.y)))return null;if(null!=t){var o=n,l=a,s=r;return{zoomed:!0,panned:!0,zoom:s,pan:{x:-s/l*(t.x-o.x)+t.x,y:-s/l*(t.y-o.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:n}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed?(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(e){var t=this._private,r=!0,_=!0,n=[],a=!1,i=!1;if(!e)return this;if(Mv(e.zoom)||(r=!1),Lv(e.pan)||(_=!1),!r&&!_)return this;if(r){var o=e.zoom;o<t.minZoom||o>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=o,n.push("zoom"))}if(_&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;Mv(l.x)&&(t.pan.x=l.x,i=!1),Mv(l.y)&&(t.pan.y=l.y,i=!1),i||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Sv(e)){var r=e;e=this.mutableElements().filter(r)}else Iv(e)||(e=this.mutableElements());if(0!==e.length){var _=e.boundingBox(),n=this.width(),a=this.height();return{x:(n-(t=void 0===t?this._private.zoom:t)*(_.x1+_.x2))/2,y:(a-t*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,r=this._private,_=r.container,n=this;return r.sizeCache=r.sizeCache||(_?(e=n.window().getComputedStyle(_),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:_.clientWidth-t("padding-left")-t("padding-right"),height:_.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),_={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};nO.centre=nO.center,nO.autolockNodes=nO.autolock,nO.autoungrabifyNodes=nO.autoungrabify;var aO={data:ob.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ob.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ob.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ob.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};aO.attr=aO.data,aO.removeAttr=aO.removeData;var iO=function(e){var t=this,r=(e=Qv({},e)).container;r&&!jv(r)&&jv(r[0])&&(r=r[0]);var _=r?r._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var n=_.readies=_.readies||[];r&&(r._cyreg=_),_.cy=t;var a=void 0!==kv&&void 0!==r&&!e.headless,i=e;i.layout=Qv({name:a?"grid":"null"},i.layout),i.renderer=Qv({name:a?"canvas":"null"},i.renderer);var o=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},l=this._private={container:r,ready:!1,options:i,elements:new kx(this),listeners:[],aniEles:new kx(this),data:i.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:o(!0,i.zoomingEnabled),userZoomingEnabled:o(!0,i.userZoomingEnabled),panningEnabled:o(!0,i.panningEnabled),userPanningEnabled:o(!0,i.userPanningEnabled),boxSelectionEnabled:o(!0,i.boxSelectionEnabled),autolock:o(!1,i.autolock,i.autolockNodes),autoungrabify:o(!1,i.autoungrabify,i.autoungrabifyNodes),autounselectify:o(!1,i.autounselectify),styleEnabled:void 0===i.styleEnabled?a:i.styleEnabled,zoom:Mv(i.zoom)?i.zoom:1,pan:{x:Lv(i.pan)&&Mv(i.pan.x)?i.pan.x:0,y:Lv(i.pan)&&Mv(i.pan.y)?i.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:o(250,i.multiClickDebounceTime)};this.createEmitter(),this.selectionType(i.selectionType),this.zoomRange({min:i.minZoom,max:i.maxZoom});l.styleEnabled&&t.setStyle([]);var s=Qv({},i,i.renderer);t.initRenderer(s);!function(e,t){if(e.some(qv))return nb.all(e).then(t);t(e)}([i.style,i.elements],(function(e){var r=e[0],a=e[1];l.styleEnabled&&t.style().append(r),function(e,r,_){t.notifications(!1);var n=t.mutableElements();n.length>0&&n.remove(),null!=e&&(Lv(e)||Tv(e))&&t.add(e),t.one("layoutready",(function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")})).one("layoutstop",(function(){t.one("done",_),t.emit("done")}));var a=Qv({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()}(a,(function(){t.startAnimationLoop(),l.ready=!0,Nv(i.ready)&&t.on("ready",i.ready);for(var e=0;e<n.length;e++){var r=n[e];t.on("ready",r)}_&&(_.readies=[]),t.emit("ready")}),i.done)}))},oO=iO.prototype;Qv(oO,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return kv;var e=this._private.container.ownerDocument;return void 0===e||null==e?kv:e.defaultView||kv},mount:function(e){if(null!=e){var t=this,r=t._private,_=r.options;return!jv(e)&&jv(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),r.container=e,r.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Qv({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),t.startAnimationLoop(),t.style(_.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Nm(this._private.options)},json:function(e){var t=this,r=t._private,_=t.mutableElements();if(Lv(e)){if(t.startBatch(),e.elements){var n={},a=function(e,r){for(var _=[],a=[],i=0;i<e.length;i++){var o=e[i];if(o.data.id){var l=""+o.data.id,s=t.getElementById(l);n[l]=!0,0!==s.length?a.push({ele:s,json:o}):r?(o.group=r,_.push(o)):_.push(o)}else Sm("cy.json() cannot handle elements without an ID attribute")}t.add(_);for(var c=0;c<a.length;c++){var u=a[c],f=u.ele,d=u.json;f.json(d)}};if(Tv(e.elements))a(e.elements);else for(var i=["nodes","edges"],o=0;o<i.length;o++){var l=i[o],s=e.elements[l];Tv(s)&&a(s,l)}var c=t.collection();_.filter((function(e){return!n[e.id()]})).forEach((function(e){e.isParent()?c.merge(e):e.remove()})),c.forEach((function(e){return e.children().move({parent:null})})),c.forEach((function(e){return function(e){return t.getElementById(e.id())}(e).remove()}))}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===r.pan.x&&e.pan.y===r.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var u=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],f=0;f<u.length;f++){var d=u[f];null!=e[d]&&t[d](e[d])}return t.endBatch(),this}var p={};!!e?p.elements=this.elements().map((function(e){return e.json()})):(p.elements={},_.forEach((function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())}))),this._private.styleEnabled&&(p.style=t.style().json()),p.data=Nm(t.data());var h=r.options;return p.zoomingEnabled=r.zoomingEnabled,p.userZoomingEnabled=r.userZoomingEnabled,p.zoom=r.zoom,p.minZoom=r.minZoom,p.maxZoom=r.maxZoom,p.panningEnabled=r.panningEnabled,p.userPanningEnabled=r.userPanningEnabled,p.pan=Nm(r.pan),p.boxSelectionEnabled=r.boxSelectionEnabled,p.renderer=Nm(h.renderer),p.hideEdgesOnViewport=h.hideEdgesOnViewport,p.textureOnViewport=h.textureOnViewport,p.wheelSensitivity=h.wheelSensitivity,p.motionBlur=h.motionBlur,p.multiClickDebounceTime=h.multiClickDebounceTime,p}}),oO.$id=oO.getElementById,[Ox,Dx,zx,Bx,qx,Vx,Ux,$x,_O,nO,aO].forEach((function(e){Qv(oO,e)}));var lO={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},sO={maximal:!1,acyclic:!1},cO=function(e){return e.scratch("breadthfirst")},uO=function(e,t){return e.scratch("breadthfirst",t)};function fO(e){this.options=Qv({},lO,sO,e)}fO.prototype.run=function(){var e,t=this.options,r=t,_=t.cy,n=r.eles,a=n.nodes().filter((function(e){return!e.isParent()})),i=n,o=r.directed,l=r.acyclic||r.maximal||r.maximalAdjustments>0,s=vy(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:_.width(),h:_.height()});if(Iv(r.roots))e=r.roots;else if(Tv(r.roots)){for(var c=[],u=0;u<r.roots.length;u++){var f=r.roots[u],d=_.getElementById(f);c.push(d)}e=_.collection(c)}else if(Sv(r.roots))e=_.$(r.roots);else if(o)e=a.roots();else{var p=n.components();e=_.collection();for(var h=function(t){var r=p[t],_=r.maxDegree(!1),n=r.filter((function(e){return e.degree(!1)===_}));e=e.add(n)},g=0;g<p.length;g++)h(g)}var v=[],m={},y=function(e,t){null==v[t]&&(v[t]=[]);var r=v[t].length;v[t].push(e),uO(e,{index:r,depth:t})};i.bfs({roots:e,directed:r.directed,visit:function(e,t,r,_,n){var a=e[0],i=a.id();y(a,n),m[i]=!0}});for(var w=[],b=0;b<a.length;b++){var k=a[b];m[k.id()]||w.push(k)}var x=function(e){for(var t=v[e],r=0;r<t.length;r++){var _=t[r];null!=_?uO(_,{depth:e,index:r}):(t.splice(r,1),r--)}},O=function(){for(var e=0;e<v.length;e++)x(e)},P=function(e,t){for(var _=cO(e),a=e.incomers().filter((function(e){return e.isNode()&&n.has(e)})),i=-1,o=e.id(),l=0;l<a.length;l++){var s=a[l],c=cO(s);i=Math.max(i,c.depth)}if(_.depth<=i){if(!r.acyclic&&t[o])return null;var u=i+1;return function(e,t){var r=cO(e),_=r.depth,n=r.index;v[_][n]=null,y(e,t)}(e,u),t[o]=u,!0}return!1};if(o&&l){var E=[],C={},A=function(e){return E.push(e)};for(a.forEach((function(e){return E.push(e)}));E.length>0;){var S=E.shift(),N=P(S,C);if(N)S.outgoers().filter((function(e){return e.isNode()&&n.has(e)})).forEach(A);else if(null===N){Sm("Detected double maximal shift for node `"+S.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}O();var T=0;if(r.avoidOverlap)for(var L=0;L<a.length;L++){var M=a[L].layoutDimensions(r),j=M.w,I=M.h;T=Math.max(T,j,I)}var D={},R=function(e){if(D[e.id()])return D[e.id()];for(var t=cO(e).depth,r=e.neighborhood(),_=0,n=0,i=0;i<r.length;i++){var o=r[i];if(!o.isEdge()&&!o.isParent()&&a.has(o)){var l=cO(o);if(null!=l){var s=l.index,c=l.depth;if(null!=s&&null!=c){var u=v[c].length;c<t&&(_+=s/u,n++)}}}}return _/=n=Math.max(1,n),0===n&&(_=0),D[e.id()]=_,_},F=function(e,t){var r=R(e)-R(t);return 0===r?Jv(e.id(),t.id()):r};void 0!==r.depthSort&&(F=r.depthSort);for(var z=0;z<v.length;z++)v[z].sort(F),x(z);for(var B=[],q=0;q<w.length;q++)B.push(w[q]);v.unshift(B),O();for(var V=0,G=0;G<v.length;G++)V=Math.max(v[G].length,V);var U=s.x1+s.w/2,$=s.x1+s.h/2,W=v.reduce((function(e,t){return Math.max(e,t.length)}),0);return n.nodes().layoutPositions(this,r,(function(e){var t=cO(e),_=t.depth,n=t.index,a=v[_].length,i=Math.max(s.w/((r.grid?W:a)+1),T),o=Math.max(s.h/(v.length+1),T),l=Math.min(s.w/2/v.length,s.h/2/v.length);if(l=Math.max(l,T),r.circle){var c=l*_+l-(v.length>0&&v[0].length<=3?l/2:0),u=2*Math.PI/v[_].length*n;return 0===_&&1===v[0].length&&(c=1),{x:U+c*Math.cos(u),y:$+c*Math.sin(u)}}return{x:U+(n+1-(a+1)/2)*i,y:(_+1)*o}})),this};var dO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function pO(e){this.options=Qv({},dO,e)}pO.prototype.run=function(){var e=this.options,t=e,r=e.cy,_=t.eles,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=_.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var i,o=vy(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=o.x1+o.w/2,s=o.y1+o.h/2,c=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),u=0,f=0;f<a.length;f++){var d=a[f].layoutDimensions(t),p=d.w,h=d.h;u=Math.max(u,p,h)}if(i=Mv(t.radius)?t.radius:a.length<=1?0:Math.min(o.h,o.w)/2-u,a.length>1&&t.avoidOverlap){u*=1.75;var g=Math.cos(c)-Math.cos(0),v=Math.sin(c)-Math.sin(0),m=Math.sqrt(u*u/(g*g+v*v));i=Math.max(m,i)}return _.nodes().layoutPositions(this,t,(function(e,r){var _=t.startAngle+r*c*(n?1:-1),a=i*Math.cos(_),o=i*Math.sin(_);return{x:l+a,y:s+o}})),this};var hO,gO={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function vO(e){this.options=Qv({},gO,e)}vO.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,_=e.cy,n=t.eles,a=n.nodes().not(":parent"),i=vy(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:_.width(),h:_.height()}),o=i.x1+i.w/2,l=i.y1+i.h/2,s=[],c=0,u=0;u<a.length;u++){var f,d=a[u];f=t.concentric(d),s.push({value:f,node:d}),d._private.scratch.concentric=f}a.updateStyle();for(var p=0;p<a.length;p++){var h=a[p].layoutDimensions(t);c=Math.max(c,h.w,h.h)}s.sort((function(e,t){return t.value-e.value}));for(var g=t.levelWidth(a),v=[[]],m=v[0],y=0;y<s.length;y++){var w=s[y];if(m.length>0)Math.abs(m[0].value-w.value)>=g&&(m=[],v.push(m));m.push(w)}var b=c+t.minNodeSpacing;if(!t.avoidOverlap){var k=v.length>0&&v[0].length>1,x=(Math.min(i.w,i.h)/2-b)/(v.length+k?1:0);b=Math.min(b,x)}for(var O=0,P=0;P<v.length;P++){var E=v[P],C=void 0===t.sweep?2*Math.PI-2*Math.PI/E.length:t.sweep,A=E.dTheta=C/Math.max(1,E.length-1);if(E.length>1&&t.avoidOverlap){var S=Math.cos(A)-Math.cos(0),N=Math.sin(A)-Math.sin(0),T=Math.sqrt(b*b/(S*S+N*N));O=Math.max(T,O)}E.r=O,O+=b}if(t.equidistant){for(var L=0,M=0,j=0;j<v.length;j++){var I=v[j].r-M;L=Math.max(L,I)}M=0;for(var D=0;D<v.length;D++){var R=v[D];0===D&&(M=R.r),R.r=M,M+=L}}for(var F={},z=0;z<v.length;z++)for(var B=v[z],q=B.dTheta,V=B.r,G=0;G<B.length;G++){var U=B[G],$=t.startAngle+(r?1:-1)*q*G,W={x:o+V*Math.cos($),y:l+V*Math.sin($)};F[U.node.id()]=W}return n.nodes().layoutPositions(this,t,(function(e){var t=e.id();return F[t]})),this};var mO={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function yO(e){this.options=Qv({},mO,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(e){var r=e.source().data("id"),_=e.target().data("id"),n=t.some((function(e){return e.data("id")===r})),a=t.some((function(e){return e.data("id")===_}));return!n||!a}));this.options.eles=this.options.eles.not(r)}yO.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,!0!==e.animate&&!1!==e.animate||r.emit({type:"layoutstart",layout:r}),hO=!0===e.debug;var _=wO(t,r,e);hO&&undefined(_),e.randomize&&xO(_);var n=lm(),a=function(){PO(_,t,e),!0===e.fit&&t.fit(e.padding)},i=function(t){return!(r.stopped||t>=e.numIter)&&(EO(_,e),_.temperature=_.temperature*e.coolingFactor,!(_.temperature<e.minTemp))},o=function(){if(!0===e.animate||!1===e.animate)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),n=OO(_,e,t);t.layoutPositions(r,e,n)}},l=0,s=!0;if(!0===e.animate){!function t(){for(var r=0;s&&r<e.refresh;)s=i(l),l++,r++;s?(lm()-n>=e.animationThreshold&&a(),om(t)):(FO(_,e),o())}()}else{for(;s;)s=i(l),l++;FO(_,e),o()}return this},yO.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},yO.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var wO=function(e,t,r){for(var _=r.eles.edges(),n=r.eles.nodes(),a=vy(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},o=r.eles.components(),l={},s=0;s<o.length;s++)for(var c=o[s],u=0;u<c.length;u++){l[c[u].id()]=s}for(s=0;s<i.nodeSize;s++){var f=(v=n[s]).layoutDimensions(r);(M={}).isLocked=v.locked(),M.id=v.data("id"),M.parentId=v.data("parent"),M.cmptId=l[v.id()],M.children=[],M.positionX=v.position("x"),M.positionY=v.position("y"),M.offsetX=0,M.offsetY=0,M.height=f.w,M.width=f.h,M.maxX=M.positionX+M.width/2,M.minX=M.positionX-M.width/2,M.maxY=M.positionY+M.height/2,M.minY=M.positionY-M.height/2,M.padLeft=parseFloat(v.style("padding")),M.padRight=parseFloat(v.style("padding")),M.padTop=parseFloat(v.style("padding")),M.padBottom=parseFloat(v.style("padding")),M.nodeRepulsion=Nv(r.nodeRepulsion)?r.nodeRepulsion(v):r.nodeRepulsion,i.layoutNodes.push(M),i.idToIndex[M.id]=s}var d=[],p=0,h=-1,g=[];for(s=0;s<i.nodeSize;s++){var v,m=(v=i.layoutNodes[s]).parentId;null!=m?i.layoutNodes[i.idToIndex[m]].children.push(v.id):(d[++h]=v.id,g.push(v.id))}for(i.graphSet.push(g);p<=h;){var y=d[p++],w=i.idToIndex[y],b=i.layoutNodes[w].children;if(b.length>0){i.graphSet.push(b);for(s=0;s<b.length;s++)d[++h]=b[s]}}for(s=0;s<i.graphSet.length;s++){var k=i.graphSet[s];for(u=0;u<k.length;u++){var x=i.idToIndex[k[u]];i.indexToGraph[x]=s}}for(s=0;s<i.edgeSize;s++){var O=_[s],P={};P.id=O.data("id"),P.sourceId=O.data("source"),P.targetId=O.data("target");var E=Nv(r.idealEdgeLength)?r.idealEdgeLength(O):r.idealEdgeLength,C=Nv(r.edgeElasticity)?r.edgeElasticity(O):r.edgeElasticity,A=i.idToIndex[P.sourceId],S=i.idToIndex[P.targetId];if(i.indexToGraph[A]!=i.indexToGraph[S]){for(var N=bO(P.sourceId,P.targetId,i),T=i.graphSet[N],L=0,M=i.layoutNodes[A];-1===T.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],L++;for(M=i.layoutNodes[S];-1===T.indexOf(M.id);)M=i.layoutNodes[i.idToIndex[M.parentId]],L++;E*=L*r.nestingFactor}P.idealLength=E,P.elasticity=C,i.layoutEdges.push(P)}return i},bO=function(e,t,r){var _=kO(e,t,0,r);return 2>_.count?0:_.graph},kO=function e(t,r,_,n){var a=n.graphSet[_];if(-1<a.indexOf(t)&&-1<a.indexOf(r))return{count:2,graph:_};for(var i=0,o=0;o<a.length;o++){var l=a[o],s=n.idToIndex[l],c=n.layoutNodes[s].children;if(0!==c.length){var u=e(t,r,n.indexToGraph[n.idToIndex[c[0]]],n);if(0!==u.count){if(1!==u.count)return u;if(2===++i)break}}}return{count:i,graph:_}},xO=function(e,t){for(var r=e.clientWidth,_=e.clientHeight,n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*r,a.positionY=Math.random()*_)}},OO=function(e,t,r){var _=e.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach((function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];n.x1=Math.min(n.x1,r.positionX),n.x2=Math.max(n.x2,r.positionX),n.y1=Math.min(n.y1,r.positionY),n.y2=Math.max(n.y2,r.positionY)})),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(r,a){var i=e.layoutNodes[e.idToIndex[r.data("id")]];if(t.boundingBox){var o=(i.positionX-n.x1)/n.w,l=(i.positionY-n.y1)/n.h;return{x:_.x1+o*_.w,y:_.y1+l*_.h}}return{x:i.positionX,y:i.positionY}}},PO=function(e,t,r){var _=r.layout,n=r.eles.nodes(),a=OO(e,r,n);n.positions(a),!0!==e.ready&&(e.ready=!0,_.one("layoutready",r.ready),_.emit({type:"layoutready",layout:this}))},EO=function(e,t,r){CO(e,t),LO(e),MO(e,t),jO(e),IO(e)},CO=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var _=e.graphSet[r],n=_.length,a=0;a<n;a++)for(var i=e.layoutNodes[e.idToIndex[_[a]]],o=a+1;o<n;o++){var l=e.layoutNodes[e.idToIndex[_[o]]];SO(i,l,e,t)}},AO=function(e){return-e+2*e*Math.random()},SO=function(e,t,r,_){if(e.cmptId===t.cmptId||r.isCompound){var n=t.positionX-e.positionX,a=t.positionY-e.positionY;0===n&&0===a&&(n=AO(1),a=AO(1));var i=NO(e,t,n,a);if(i>0)var o=(s=_.nodeOverlap*i)*n/(h=Math.sqrt(n*n+a*a)),l=s*a/h;else{var s,c=TO(e,n,a),u=TO(t,-1*n,-1*a),f=u.x-c.x,d=u.y-c.y,p=f*f+d*d,h=Math.sqrt(p);o=(s=(e.nodeRepulsion+t.nodeRepulsion)/p)*f/h,l=s*d/h}e.isLocked||(e.offsetX-=o,e.offsetY-=l),t.isLocked||(t.offsetX+=o,t.offsetY+=l)}},NO=function(e,t,r,_){if(r>0)var n=e.maxX-t.minX;else n=t.maxX-e.minX;if(_>0)var a=e.maxY-t.minY;else a=t.maxY-e.minY;return n>=0&&a>=0?Math.sqrt(n*n+a*a):0},TO=function(e,t,r){var _=e.positionX,n=e.positionY,a=e.height||1,i=e.width||1,o=r/t,l=a/i,s={};return 0===t&&0<r||0===t&&0>r?(s.x=_,s.y=n+a/2,s):0<t&&-1*l<=o&&o<=l?(s.x=_+i/2,s.y=n+i*r/2/t,s):0>t&&-1*l<=o&&o<=l?(s.x=_-i/2,s.y=n-i*r/2/t,s):0<r&&(o<=-1*l||o>=l)?(s.x=_+a*t/2/r,s.y=n+a/2,s):0>r&&(o<=-1*l||o>=l)?(s.x=_-a*t/2/r,s.y=n-a/2,s):s},LO=function(e,t){for(var r=0;r<e.edgeSize;r++){var _=e.layoutEdges[r],n=e.idToIndex[_.sourceId],a=e.layoutNodes[n],i=e.idToIndex[_.targetId],o=e.layoutNodes[i],l=o.positionX-a.positionX,s=o.positionY-a.positionY;if(0!==l||0!==s){var c=TO(a,l,s),u=TO(o,-1*l,-1*s),f=u.x-c.x,d=u.y-c.y,p=Math.sqrt(f*f+d*d),h=Math.pow(_.idealLength-p,2)/_.elasticity;if(0!==p)var g=h*f/p,v=h*d/p;else g=0,v=0;a.isLocked||(a.offsetX+=g,a.offsetY+=v),o.isLocked||(o.offsetX-=g,o.offsetY-=v)}}},MO=function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var _=e.graphSet[r],n=_.length;if(0===r)var a=e.clientHeight/2,i=e.clientWidth/2;else{var o=e.layoutNodes[e.idToIndex[_[0]]],l=e.layoutNodes[e.idToIndex[o.parentId]];a=l.positionX,i=l.positionY}for(var s=0;s<n;s++){var c=e.layoutNodes[e.idToIndex[_[s]]];if(!c.isLocked){var u=a-c.positionX,f=i-c.positionY,d=Math.sqrt(u*u+f*f);if(d>1){var p=t.gravity*u/d,h=t.gravity*f/d;c.offsetX+=p,c.offsetY+=h}}}}},jO=function(e,t){var r=[],_=0,n=-1;for(r.push.apply(r,e.graphSet[0]),n+=e.graphSet[0].length;_<=n;){var a=r[_++],i=e.idToIndex[a],o=e.layoutNodes[i],l=o.children;if(0<l.length&&!o.isLocked){for(var s=o.offsetX,c=o.offsetY,u=0;u<l.length;u++){var f=e.layoutNodes[e.idToIndex[l[u]]];f.offsetX+=s,f.offsetY+=c,r[++n]=l[u]}o.offsetX=0,o.offsetY=0}}},IO=function(e,t){for(var r=0;r<e.nodeSize;r++){0<(n=e.layoutNodes[r]).children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(r=0;r<e.nodeSize;r++){if(!(0<(n=e.layoutNodes[r]).children.length||n.isLocked)){var _=DO(n.offsetX,n.offsetY,e.temperature);n.positionX+=_.x,n.positionY+=_.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,RO(n,e)}}for(r=0;r<e.nodeSize;r++){var n;0<(n=e.layoutNodes[r]).children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},DO=function(e,t,r){var _=Math.sqrt(e*e+t*t);if(_>r)var n={x:r*e/_,y:r*t/_};else n={x:e,y:t};return n},RO=function e(t,r){var _=t.parentId;if(null!=_){var n=r.layoutNodes[r.idToIndex[_]],a=!1;return(null==n.maxX||t.maxX+n.padRight>n.maxX)&&(n.maxX=t.maxX+n.padRight,a=!0),(null==n.minX||t.minX-n.padLeft<n.minX)&&(n.minX=t.minX-n.padLeft,a=!0),(null==n.maxY||t.maxY+n.padBottom>n.maxY)&&(n.maxY=t.maxY+n.padBottom,a=!0),(null==n.minY||t.minY-n.padTop<n.minY)&&(n.minY=t.minY-n.padTop,a=!0),a?e(n,r):void 0}},FO=function(e,t){for(var r=e.layoutNodes,_=[],n=0;n<r.length;n++){var a=r[n],i=a.cmptId;(_[i]=_[i]||[]).push(a)}var o=0;for(n=0;n<_.length;n++){if(h=_[n]){h.x1=1/0,h.x2=-1/0,h.y1=1/0,h.y2=-1/0;for(var l=0;l<h.length;l++){var s=h[l];h.x1=Math.min(h.x1,s.positionX-s.width/2),h.x2=Math.max(h.x2,s.positionX+s.width/2),h.y1=Math.min(h.y1,s.positionY-s.height/2),h.y2=Math.max(h.y2,s.positionY+s.height/2)}h.w=h.x2-h.x1,h.h=h.y2-h.y1,o+=h.w*h.h}}_.sort((function(e,t){return t.w*t.h-e.w*e.h}));var c=0,u=0,f=0,d=0,p=Math.sqrt(o)*e.clientWidth/e.clientHeight;for(n=0;n<_.length;n++){var h;if(h=_[n]){for(l=0;l<h.length;l++){(s=h[l]).isLocked||(s.positionX+=c-h.x1,s.positionY+=u-h.y1)}c+=h.w+t.componentSpacing,f+=h.w+t.componentSpacing,d=Math.max(d,h.h),f>p&&(u+=d+t.componentSpacing,c=0,f=0,d=0)}}},zO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function BO(e){this.options=Qv({},zO,e)}BO.prototype.run=function(){var e=this.options,t=e,r=e.cy,_=t.eles,n=_.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));var a=vy(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===a.h||0===a.w)_.nodes().layoutPositions(this,t,(function(e){return{x:a.x1,y:a.y1}}));else{var i=n.size(),o=Math.sqrt(i*a.h/a.w),l=Math.round(o),s=Math.round(a.w/a.h*o),c=function(e){if(null==e)return Math.min(l,s);Math.min(l,s)==l?l=e:s=e},u=function(e){if(null==e)return Math.max(l,s);Math.max(l,s)==l?l=e:s=e},f=t.rows,d=null!=t.cols?t.cols:t.columns;if(null!=f&&null!=d)l=f,s=d;else if(null!=f&&null==d)l=f,s=Math.ceil(i/l);else if(null==f&&null!=d)s=d,l=Math.ceil(i/s);else if(s*l>i){var p=c(),h=u();(p-1)*h>=i?c(p-1):(h-1)*p>=i&&u(h-1)}else for(;s*l<i;){var g=c(),v=u();(v+1)*g>=i?u(v+1):c(g+1)}var m=a.w/s,y=a.h/l;if(t.condense&&(m=0,y=0),t.avoidOverlap)for(var w=0;w<n.length;w++){var b=n[w],k=b._private.position;null!=k.x&&null!=k.y||(k.x=0,k.y=0);var x=b.layoutDimensions(t),O=t.avoidOverlapPadding,P=x.w+O,E=x.h+O;m=Math.max(m,P),y=Math.max(y,E)}for(var C={},A=function(e,t){return!!C["c-"+e+"-"+t]},S=function(e,t){C["c-"+e+"-"+t]=!0},N=0,T=0,L=function(){++T>=s&&(T=0,N++)},M={},j=0;j<n.length;j++){var I=n[j],D=t.position(I);if(D&&(void 0!==D.row||void 0!==D.col)){var R={row:D.row,col:D.col};if(void 0===R.col)for(R.col=0;A(R.row,R.col);)R.col++;else if(void 0===R.row)for(R.row=0;A(R.row,R.col);)R.row++;M[I.id()]=R,S(R.row,R.col)}}n.layoutPositions(this,t,(function(e,t){var r,_;if(e.locked()||e.isParent())return!1;var n=M[e.id()];if(n)r=n.col*m+m/2+a.x1,_=n.row*y+y/2+a.y1;else{for(;A(N,T);)L();r=T*m+m/2+a.x1,_=N*y+y/2+a.y1,S(N,T),L()}return{x:r,y:_}}))}return this};var qO={ready:function(){},stop:function(){}};function VO(e){this.options=Qv({},qO,e)}VO.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},VO.prototype.stop=function(){return this};var GO={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function UO(e){this.options=Qv({},GO,e)}UO.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=Nv(e.positions);return t.layoutPositions(this,e,(function(t,_){var n=function(t){if(null==e.positions)return{x:(_=t.position()).x,y:_.y};var _;if(r)return e.positions(t);var n=e.positions[t._private.data.id];return null==n?null:n}(t);return!t.locked()&&null!=n&&n})),this};var $O={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function WO(e){this.options=Qv({},$O,e)}WO.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,_=vy(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,(function(e,t){return{x:_.x1+Math.round(Math.random()*_.w),y:_.y1+Math.round(Math.random()*_.h)}})),this};var HO=[{name:"breadthfirst",impl:fO},{name:"circle",impl:pO},{name:"concentric",impl:vO},{name:"cose",impl:yO},{name:"grid",impl:BO},{name:"null",impl:VO},{name:"preset",impl:UO},{name:"random",impl:WO}];function YO(e){this.options=e,this.notifications=0}var XO=function(){},ZO=function(){throw new Error("A headless instance can not render images")};YO.prototype={recalculateRenderedStyle:XO,notify:function(){this.notifications++},init:XO,isHeadless:function(){return!0},png:ZO,jpg:ZO};var KO={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(e,t,r,_,n,a,i){var o=n.x-r/2-i,l=n.x+r/2+i,s=n.y-r/2-i,c=n.y+r/2+i;return o<=e&&e<=l&&s<=t&&t<=c},_=function(e,t,r,_,n){var a=e*Math.cos(_)-t*Math.sin(_),i=(e*Math.sin(_)+t*Math.cos(_))*r;return{x:a*r+n.x,y:i+n.y}},n=function(e,t,r,n){for(var a=[],i=0;i<e.length;i+=2){var o=e[i],l=e[i+1];a.push(_(o,l,t,r,n))}return a},a=function(e){for(var t=[],r=0;r<e.length;r++){var _=e[r];t.push(_.x,_.y)}return t},i=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},o=function(_,o){Sv(o)&&(o=e[o]),e[_]=Qv({name:_,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,r,_,i,o){var l=a(n(this.points,r+2*o,_,i));return Ty(e,t,l)},roughCollide:r,draw:function(e,r,_,a){var i=n(this.points,r,_,a);t.arrowShapeImpl("polygon")(e,i)},spacing:function(e){return 0},gap:i},o)};o("none",{collide:Om,roughCollide:Om,draw:Em,spacing:Pm,gap:Pm}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(e,r,a,i,o){var l=n(this.points,r,a,i),s=this.controlPoint,c=_(s[0],s[1],r,a,i);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*i(e)}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,r,_,i,o,l){var s=a(n(this.points,r+2*l,_,i)),c=a(n(this.pointsTee,r+2*l,_,i));return Ty(e,t,s)||Ty(e,t,c)},draw:function(e,r,_,a,i){var o=n(this.points,r,_,a),l=n(this.pointsTee,r,_,a);t.arrowShapeImpl(this.name)(e,o,l)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,r,_,i,o,l){var s=i,c=Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((r+2*l)*this.radius,2),u=a(n(this.points,r+2*l,_,i));return Ty(e,t,u)||c},draw:function(e,r,_,a,i){var o=n(this.pointsTr,r,_,a);t.arrowShapeImpl(this.name)(e,o,a.x,a.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var r=this.baseCrossLinePts.slice(),_=t/e;return r[3]=r[3]-_,r[5]=r[5]-_,r},collide:function(e,t,r,_,i,o,l){var s=a(n(this.points,r+2*l,_,i)),c=a(n(this.crossLinePts(r,o),r+2*l,_,i));return Ty(e,t,s)||Ty(e,t,c)},draw:function(e,r,_,a,i){var o=n(this.points,r,_,a),l=n(this.crossLinePts(r,i),r,_,a);t.arrowShapeImpl(this.name)(e,o,l)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*i(e)}}),o("circle",{radius:.15,collide:function(e,t,r,_,n,a,i){var o=n;return Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((r+2*i)*this.radius,2)},draw:function(e,r,_,n,a){t.arrowShapeImpl(this.name)(e,n.x,n.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},JO={projectIntoViewport:function(e,t){var r=this.cy,_=this.findContainerClientCoords(),n=_[0],a=_[1],i=_[4],o=r.pan(),l=r.zoom();return[((e-n)/i-o.x)/l,((t-a)/i-o.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),_=function(e){return parseFloat(r.getPropertyValue(e))},n=_("padding-left"),a=_("padding-right"),i=_("padding-top"),o=_("padding-bottom"),l=_("border-left-width"),s=_("border-right-width"),c=_("border-top-width"),u=(_("border-bottom-width"),e.clientWidth),f=e.clientHeight,d=n+a,p=i+o,h=l+s,g=t.width/(u+h),v=u-d,m=f-p,y=t.left+n+l,w=t.top+i+c;return this.containerBB=[y,w,v,m,g]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,_){return this.findNearestElements(e,t,r,_)[0]},findNearestElements:function(e,t,r,_){var n,a,i=this,o=this,l=o.getCachedZSortedEles(),s=[],c=o.cy.zoom(),u=o.cy.hasCompoundNodes(),f=(_?24:8)/c,d=(_?8:2)/c,p=(_?8:2)/c,h=1/0;function g(e,t){if(e.isNode()){if(a)return;a=e,s.push(e)}if(e.isEdge()&&(null==t||t<h))if(n){if(n.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&n.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var r=0;r<s.length;r++)if(s[r].isEdge()){s[r]=e,n=e,h=null!=t?t:h;break}}else s.push(e),n=e,h=null!=t?t:h}function v(r){var _=r.outerWidth()+2*d,n=r.outerHeight()+2*d,a=_/2,l=n/2,s=r.position();if(s.x-a<=e&&e<=s.x+a&&s.y-l<=t&&t<=s.y+l&&o.nodeShapes[i.getNodeShape(r)].checkPoint(e,t,0,_,n,s.x,s.y))return g(r,0),!0}function m(r){var _,n=r._private,a=n.rscratch,l=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,d=l/2+f,p=d*d,h=2*d,m=n.source,y=n.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,b=0;b+3<w.length;b+=2)if(Cy(e,t,w[b],w[b+1],w[b+2],w[b+3],h)&&p>(_=Ny(e,t,w[b],w[b+1],w[b+2],w[b+3])))return g(r,_),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(w=a.allpts,b=0;b+5<a.allpts.length;b+=4)if(Ay(e,t,w[b],w[b+1],w[b+2],w[b+3],w[b+4],w[b+5],h)&&p>(_=Sy(e,t,w[b],w[b+1],w[b+2],w[b+3],w[b+4],w[b+5])))return g(r,_),!0;m=m||n.source,y=y||n.target;var k=i.getArrowWidth(l,c),x=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(b=0;b<x.length;b++){var O=x[b],P=o.arrowShapes[r.pstyle(O.name+"-arrow-shape").value],E=r.pstyle("width").pfValue;if(P.roughCollide(e,t,k,O.angle,{x:O.x,y:O.y},E,f)&&P.collide(e,t,k,O.angle,{x:O.x,y:O.y},E,f))return g(r),!0}u&&s.length>0&&(v(m),v(y))}function y(e,t,r){return Rm(e,t,r)}function w(r,_){var n,a=r._private,i=p;n=_?_+"-":"",r.boundingBox();var o=a.labelBounds[_||"main"],l=r.pstyle(n+"label").value;if("yes"===r.pstyle("text-events").strValue&&l){var s=y(a.rscratch,"labelX",_),c=y(a.rscratch,"labelY",_),u=y(a.rscratch,"labelAngle",_),f=r.pstyle(n+"text-margin-x").pfValue,d=r.pstyle(n+"text-margin-y").pfValue,h=o.x1-i-f,v=o.x2+i-f,m=o.y1-i-d,w=o.y2+i-d;if(u){var b=Math.cos(u),k=Math.sin(u),x=function(e,t){return{x:(e-=s)*b-(t-=c)*k+s,y:e*k+t*b+c}},O=x(h,m),P=x(h,w),E=x(v,m),C=x(v,w),A=[O.x+f,O.y+d,E.x+f,E.y+d,C.x+f,C.y+d,P.x+f,P.y+d];if(Ty(e,t,A))return g(r),!0}else if(Oy(o,e,t))return g(r),!0}}r&&(l=l.interactive);for(var b=l.length-1;b>=0;b--){var k=l[b];k.isNode()?v(k)||w(k):m(k)||w(k)||w(k,"source")||w(k,"target")}return s},getAllInBox:function(e,t,r,_){for(var n,a,i=this.getCachedZSortedEles().interactive,o=[],l=Math.min(e,r),s=Math.max(e,r),c=Math.min(t,_),u=Math.max(t,_),f=vy({x1:e=l,y1:t=c,x2:r=s,y2:_=u}),d=0;d<i.length;d++){var p=i[d];if(p.isNode()){var h=p,g=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});xy(f,g)&&!Py(g,f)&&o.push(h)}else{var v=p,m=v._private,y=m.rscratch;if(null!=y.startX&&null!=y.startY&&!Oy(f,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!Oy(f,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var w=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,b=!0,k=0;k<w.length;k++)if(n=f,a=w[k],!Oy(n,a.x,a.y)){b=!1;break}b&&o.push(v)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||o.push(v)}}return o}},QO={calculateArrowAngles:function(e){var t,r,_,n,a,i,o=e._private.rscratch,l="haystack"===o.edgeType,s="bezier"===o.edgeType,c="multibezier"===o.edgeType,u="segments"===o.edgeType,f="compound"===o.edgeType,d="self"===o.edgeType;if(l?(_=o.haystackPts[0],n=o.haystackPts[1],a=o.haystackPts[2],i=o.haystackPts[3]):(_=o.arrowStartX,n=o.arrowStartY,a=o.arrowEndX,i=o.arrowEndY),h=o.midX,g=o.midY,u)t=_-o.segpts[0],r=n-o.segpts[1];else if(c||f||d||s){var p=o.allpts;t=_-py(p[0],p[2],p[4],.1),r=n-py(p[1],p[3],p[5],.1)}else t=_-h,r=n-g;o.srcArrowAngle=oy(t,r);var h=o.midX,g=o.midY;if(l&&(h=(_+a)/2,g=(n+i)/2),t=a-_,r=i-n,u)if((p=o.allpts).length/2%2==0){var v=(m=p.length/2)-2;t=p[m]-p[v],r=p[m+1]-p[v+1]}else{v=(m=p.length/2-1)-2;var m,y=m+2;t=p[m]-p[v],r=p[m+1]-p[v+1]}else if(c||f||d){var w,b,k,x,p=o.allpts;if(o.ctrlpts.length/2%2==0){var O=(P=(E=p.length/2-1)+2)+2;w=py(p[E],p[P],p[O],0),b=py(p[E+1],p[P+1],p[O+1],0),k=py(p[E],p[P],p[O],1e-4),x=py(p[E+1],p[P+1],p[O+1],1e-4)}else{var P,E;O=(P=p.length/2-1)+2;w=py(p[E=P-2],p[P],p[O],.4999),b=py(p[E+1],p[P+1],p[O+1],.4999),k=py(p[E],p[P],p[O],.5),x=py(p[E+1],p[P+1],p[O+1],.5)}t=k-w,r=x-b}(o.midtgtArrowAngle=oy(t,r),o.midDispX=t,o.midDispY=r,t*=-1,r*=-1,u)&&((p=o.allpts).length/2%2==0||(t=-(p[y=(m=p.length/2-1)+2]-p[m]),r=-(p[y+1]-p[m+1])));if(o.midsrcArrowAngle=oy(t,r),u)t=a-o.segpts[o.segpts.length-2],r=i-o.segpts[o.segpts.length-1];else if(c||f||d||s){var C=(p=o.allpts).length;t=a-py(p[C-6],p[C-4],p[C-2],.9),r=i-py(p[C-5],p[C-3],p[C-1],.9)}else t=a-h,r=i-g;o.tgtArrowAngle=oy(t,r)}};QO.getArrowWidth=QO.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},_=r[e+", "+t];return _||(_=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=_,_)};var eP={};function tP(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var _=e[r],n=e[r+1];t.push({x:_,y:n})}return t}}eP.findMidptPtsEtc=function(e,t){var r,_=t.posPts,n=t.intersectionPts,a=t.vectorNormInverse,i=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),l=null!=i.units&&null!=o.units;switch(e.pstyle("edge-distances").value){case"node-position":r=_;break;case"intersection":r=n;break;case"endpoints":if(l){var s=wv(this.manualEndptToPx(e.source()[0],i),2),c=s[0],u=s[1],f=wv(this.manualEndptToPx(e.target()[0],o),2),d=f[0],p=f[1],h={x1:c,y1:u,x2:d,y2:p};a=function(e,t,r,_){var n=_-t,a=r-e,i=Math.sqrt(a*a+n*n);return{x:-n/i,y:a/i}}(c,u,d,p),r=h}else Sm("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=n}return{midptPts:r,vectorNormInverse:a}},eP.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],_=r._private,n=_.rscratch;if(!n.haystack){var a=2*Math.random()*Math.PI;n.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,n.target={x:Math.cos(a),y:Math.sin(a)}}var i=_.source,o=_.target,l=i.position(),s=o.position(),c=i.width(),u=o.width(),f=i.height(),d=o.height(),p=r.pstyle("haystack-radius").value/2;n.haystackPts=n.allpts=[n.source.x*c*p+l.x,n.source.y*f*p+l.y,n.target.x*u*p+s.x,n.target.y*d*p+s.y],n.midX=(n.allpts[0]+n.allpts[2])/2,n.midY=(n.allpts[1]+n.allpts[3])/2,n.edgeType="haystack",n.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},eP.findSegmentsPoints=function(e,t){var r=e._private.rscratch,_=e.pstyle("segment-weights"),n=e.pstyle("segment-distances"),a=Math.min(_.pfValue.length,n.pfValue.length);r.edgeType="segments",r.segpts=[];for(var i=0;i<a;i++){var o=_.pfValue[i],l=n.pfValue[i],s=1-o,c=o,u=this.findMidptPtsEtc(e,t),f=u.midptPts,d=u.vectorNormInverse,p={x:f.x1*s+f.x2*c,y:f.y1*s+f.y2*c};r.segpts.push(p.x+d.x*l,p.y+d.y*l)}},eP.findLoopPoints=function(e,t,r,_){var n=e._private.rscratch,a=t.dirCounts,i=t.srcPos,o=e.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,s=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,u=e.pstyle("control-point-step-size").pfValue;n.edgeType="self";var f=r,d=u;_&&(f=0,d=l);var p=s-Math.PI/2,h=p-c/2,g=p+c/2,v=String(s+"_"+c);f=void 0===a[v]?a[v]=0:++a[v],n.ctrlpts=[i.x+1.4*Math.cos(h)*d*(f/3+1),i.y+1.4*Math.sin(h)*d*(f/3+1),i.x+1.4*Math.cos(g)*d*(f/3+1),i.y+1.4*Math.sin(g)*d*(f/3+1)]},eP.findCompoundLoopPoints=function(e,t,r,_){var n=e._private.rscratch;n.edgeType="compound";var a=t.srcPos,i=t.tgtPos,o=t.srcW,l=t.srcH,s=t.tgtW,c=t.tgtH,u=e.pstyle("control-point-step-size").pfValue,f=e.pstyle("control-point-distances"),d=f?f.pfValue[0]:void 0,p=r,h=u;_&&(p=0,h=d);var g={x:a.x-o/2,y:a.y-l/2},v={x:i.x-s/2,y:i.y-c/2},m={x:Math.min(g.x,v.x),y:Math.min(g.y,v.y)},y=Math.max(.5,Math.log(.01*o)),w=Math.max(.5,Math.log(.01*s));n.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*h*(p/3+1)*y,m.x-(1+Math.pow(50,1.12)/100)*h*(p/3+1)*w,m.y]},eP.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},eP.findBezierPoints=function(e,t,r,_,n){var a=e._private.rscratch,i=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),s=o&&l?Math.min(o.value.length,l.value.length):1,c=o?o.pfValue[0]:void 0,u=l.value[0],f=_;a.edgeType=f?"multibezier":"bezier",a.ctrlpts=[];for(var d=0;d<s;d++){var p=(.5-t.eles.length/2+r)*i*(n?-1:1),h=void 0,g=sy(p);f&&(c=o?o.pfValue[d]:i,u=l.value[d]);var v=void 0!==(h=_?c:void 0!==c?g*c:void 0)?h:p,m=1-u,y=u,w=this.findMidptPtsEtc(e,t),b=w.midptPts,k=w.vectorNormInverse,x={x:b.x1*m+b.x2*y,y:b.y1*m+b.y2*y};a.ctrlpts.push(x.x+k.x*v,x.y+k.y*v)}},eP.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var _="vertical",n="horizontal",a="leftward",i="rightward",o="downward",l="upward",s=t.posPts,c=t.srcW,u=t.srcH,f=t.tgtW,d=t.tgtH,p="node-position"!==e.pstyle("edge-distances").value,h=e.pstyle("taxi-direction").value,g=h,v=e.pstyle("taxi-turn"),m="%"===v.units,y=v.pfValue,w=y<0,b=e.pstyle("taxi-turn-min-distance").pfValue,k=p?(c+f)/2:0,x=p?(u+d)/2:0,O=s.x2-s.x1,P=s.y2-s.y1,E=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},C=E(O,k),A=E(P,x),S=!1;"auto"===g?h=Math.abs(C)>Math.abs(A)?n:_:g===l||g===o?(h=_,S=!0):g!==a&&g!==i||(h=n,S=!0);var N,T=h===_,L=T?A:C,M=T?P:O,j=sy(M),I=!1;(S&&(m||w)||!(g===o&&M<0||g===l&&M>0||g===a&&M>0||g===i&&M<0)||(L=(j*=-1)*Math.abs(L),I=!0),m)?N=(y<0?1+y:y)*L:N=(y<0?L:0)+y*j;var D=function(e){return Math.abs(e)<b||Math.abs(e)>=Math.abs(L)},R=D(N),F=D(Math.abs(L)-Math.abs(N));if((R||F)&&!I)if(T){var z=Math.abs(M)<=u/2,B=Math.abs(O)<=f/2;if(z){var q=(s.x1+s.x2)/2,V=s.y1,G=s.y2;r.segpts=[q,V,q,G]}else if(B){var U=(s.y1+s.y2)/2,$=s.x1,W=s.x2;r.segpts=[$,U,W,U]}else r.segpts=[s.x1,s.y2]}else{var H=Math.abs(M)<=c/2,Y=Math.abs(P)<=d/2;if(H){var X=(s.y1+s.y2)/2,Z=s.x1,K=s.x2;r.segpts=[Z,X,K,X]}else if(Y){var J=(s.x1+s.x2)/2,Q=s.y1,ee=s.y2;r.segpts=[J,Q,J,ee]}else r.segpts=[s.x2,s.y1]}else if(T){var te=s.y1+N+(p?u/2*j:0),re=s.x1,_e=s.x2;r.segpts=[re,te,_e,te]}else{var ne=s.x1+N+(p?c/2*j:0),ae=s.y1,ie=s.y2;r.segpts=[ne,ae,ne,ie]}},eP.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var _=t.srcPos,n=t.tgtPos,a=t.srcW,i=t.srcH,o=t.tgtW,l=t.tgtH,s=t.srcShape,c=t.tgtShape,u=!Mv(r.startX)||!Mv(r.startY),f=!Mv(r.arrowStartX)||!Mv(r.arrowStartY),d=!Mv(r.endX)||!Mv(r.endY),p=!Mv(r.arrowEndX)||!Mv(r.arrowEndY),h=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),g=uy({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),v=g<h,m=uy({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),y=m<h,w=!1;if(u||f||v){w=!0;var b={x:r.ctrlpts[0]-_.x,y:r.ctrlpts[1]-_.y},k=Math.sqrt(b.x*b.x+b.y*b.y),x={x:b.x/k,y:b.y/k},O=Math.max(a,i),P={x:r.ctrlpts[0]+2*x.x*O,y:r.ctrlpts[1]+2*x.y*O},E=s.intersectLine(_.x,_.y,a,i,P.x,P.y,0);v?(r.ctrlpts[0]=r.ctrlpts[0]+x.x*(h-g),r.ctrlpts[1]=r.ctrlpts[1]+x.y*(h-g)):(r.ctrlpts[0]=E[0]+x.x*h,r.ctrlpts[1]=E[1]+x.y*h)}if(d||p||y){w=!0;var C={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},A=Math.sqrt(C.x*C.x+C.y*C.y),S={x:C.x/A,y:C.y/A},N=Math.max(a,i),T={x:r.ctrlpts[0]+2*S.x*N,y:r.ctrlpts[1]+2*S.y*N},L=c.intersectLine(n.x,n.y,o,l,T.x,T.y,0);y?(r.ctrlpts[0]=r.ctrlpts[0]+S.x*(h-m),r.ctrlpts[1]=r.ctrlpts[1]+S.y*(h-m)):(r.ctrlpts[0]=L[0]+S.x*h,r.ctrlpts[1]=L[1]+S.y*h)}w&&this.findEndpoints(e)}},eP.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var _;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(_=t.allpts.length/2-1,t.midX=t.allpts[_],t.midY=t.allpts[_+1]):(_=t.allpts.length/2-3,t.midX=py(t.allpts[_],t.allpts[_+2],t.allpts[_+4],.5),t.midY=py(t.allpts[_+1],t.allpts[_+3],t.allpts[_+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType)if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.segpts.length%4==0){var n=t.segpts.length/2,a=n-2;t.midX=(t.segpts[a]+t.segpts[n])/2,t.midY=(t.segpts[a+1]+t.segpts[n+1])/2}else{var i=t.segpts.length/2-1;t.midX=t.segpts[i],t.midY=t.segpts[i+1]}},eP.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Mv(t.startX)&&Mv(t.startY)&&Mv(t.endX)&&Mv(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Sm("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},eP.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,_=r.cy.hasCompoundNodes(),n={map:new zm,get:function(e){var t=this.map.get(e[0]);return null!=t?t.get(e[1]):null},set:function(e,t){var r=this.map.get(e[0]);null==r&&(r=new zm,this.map.set(e[0],r)),r.set(e[1],t)}},a=[],i=[],o=0;o<e.length;o++){var l=e[o],s=l._private,c=l.pstyle("curve-style").value;if(!l.removed()&&l.takesUpSpace())if("haystack"!==c){var u="unbundled-bezier"===c||"segments"===c||"straight"===c||"straight-triangle"===c||"taxi"===c,f="unbundled-bezier"===c||"bezier"===c,d=s.source,p=s.target,h=[d.poolIndex(),p.poolIndex()].sort(),g=n.get(h);null==g&&(g={eles:[]},n.set(h,g),a.push(h)),g.eles.push(l),u&&(g.hasUnbundled=!0),f&&(g.hasBezier=!0)}else i.push(l)}for(var v=function(e){var i=a[e],o=n.get(i),l=void 0;if(!o.hasUnbundled){var s=o.eles[0].parallelEdges().filter((function(e){return e.isBundledBezier()}));Dm(o.eles),s.forEach((function(e){return o.eles.push(e)})),o.eles.sort((function(e,t){return e.poolIndex()-t.poolIndex()}))}var c=o.eles[0],u=c.source(),f=c.target();if(u.poolIndex()>f.poolIndex()){var d=u;u=f,f=d}var p=o.srcPos=u.position(),h=o.tgtPos=f.position(),g=o.srcW=u.outerWidth(),v=o.srcH=u.outerHeight(),m=o.tgtW=f.outerWidth(),y=o.tgtH=f.outerHeight(),w=o.srcShape=r.nodeShapes[t.getNodeShape(u)],b=o.tgtShape=r.nodeShapes[t.getNodeShape(f)];o.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var k=0;k<o.eles.length;k++){var x=o.eles[k],O=x[0]._private.rscratch,P=x.pstyle("curve-style").value,E="unbundled-bezier"===P||"segments"===P||"taxi"===P,C=!u.same(x.source());if(!o.calculatedIntersection&&u!==f&&(o.hasBezier||o.hasUnbundled)){o.calculatedIntersection=!0;var A=w.intersectLine(p.x,p.y,g,v,h.x,h.y,0),S=o.srcIntn=A,N=b.intersectLine(h.x,h.y,m,y,p.x,p.y,0),T=o.tgtIntn=N,L=o.intersectionPts={x1:A[0],x2:N[0],y1:A[1],y2:N[1]},M=o.posPts={x1:p.x,x2:h.x,y1:p.y,y2:h.y},j=N[1]-A[1],I=N[0]-A[0],D=Math.sqrt(I*I+j*j),R=o.vector={x:I,y:j},F=o.vectorNorm={x:R.x/D,y:R.y/D},z={x:-F.y,y:F.x};o.nodesOverlap=!Mv(D)||b.checkPoint(A[0],A[1],0,m,y,h.x,h.y)||w.checkPoint(N[0],N[1],0,g,v,p.x,p.y),o.vectorNormInverse=z,l={nodesOverlap:o.nodesOverlap,dirCounts:o.dirCounts,calculatedIntersection:!0,hasBezier:o.hasBezier,hasUnbundled:o.hasUnbundled,eles:o.eles,srcPos:h,tgtPos:p,srcW:m,srcH:y,tgtW:g,tgtH:v,srcIntn:T,tgtIntn:S,srcShape:b,tgtShape:w,posPts:{x1:M.x2,y1:M.y2,x2:M.x1,y2:M.y1},intersectionPts:{x1:L.x2,y1:L.y2,x2:L.x1,y2:L.y1},vector:{x:-R.x,y:-R.y},vectorNorm:{x:-F.x,y:-F.y},vectorNormInverse:{x:-z.x,y:-z.y}}}var B=C?l:o;O.nodesOverlap=B.nodesOverlap,O.srcIntn=B.srcIntn,O.tgtIntn=B.tgtIntn,_&&(u.isParent()||u.isChild()||f.isParent()||f.isChild())&&(u.parents().anySame(f)||f.parents().anySame(u)||u.same(f)&&u.isParent())?t.findCompoundLoopPoints(x,B,k,E):u===f?t.findLoopPoints(x,B,k,E):"segments"===P?t.findSegmentsPoints(x,B):"taxi"===P?t.findTaxiPoints(x,B):"straight"===P||!E&&o.eles.length%2==1&&k===Math.floor(o.eles.length/2)?t.findStraightEdgePoints(x):t.findBezierPoints(x,B,k,E,C),t.findEndpoints(x),t.tryToCorrectInvalidPoints(x,B),t.checkForInvalidEdgeWarning(x),t.storeAllpts(x),t.storeEdgeProjections(x),t.calculateArrowAngles(x),t.recalculateEdgeLabelProjections(x),t.calculateLabelAngles(x)}},m=0;m<a.length;m++)v(m);this.findHaystackPoints(i)}},eP.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return this.recalculateRenderedStyle(e),tP(t.segpts)},eP.getControlPoints=function(e){var t=e[0]._private.rscratch,r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return this.recalculateRenderedStyle(e),tP(t.ctrlpts)},eP.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var rP={manualEndptToPx:function(e,t){var r=e.position(),_=e.outerWidth(),n=e.outerHeight();if(2===t.value.length){var a=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(a[0]=a[0]*_),"%"===t.units[1]&&(a[1]=a[1]*n),a[0]+=r.x,a[1]+=r.y,a}var i=t.pfValue[0];i=-Math.PI/2+i;var o=2*Math.max(_,n),l=[r.x+Math.cos(i)*o,r.y+Math.sin(i)*o];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,_,n,l[0],l[1],0)},findEndpoints:function(e){var t,r,_,n,a,i=this,o=e.source()[0],l=e.target()[0],s=o.position(),c=l.position(),u=e.pstyle("target-arrow-shape").value,f=e.pstyle("source-arrow-shape").value,d=e.pstyle("target-distance-from-node").pfValue,p=e.pstyle("source-distance-from-node").pfValue,h=e.pstyle("curve-style").value,g=e._private.rscratch,v=g.edgeType,m="self"===v||"compound"===v,y="bezier"===v||"multibezier"===v||m,w="bezier"!==v,b="straight"===v||"segments"===v,k="segments"===v,x=y||w||b,O=m||"taxi"===h,P=e.pstyle("source-endpoint"),E=O?"outside-to-node":P.value,C=e.pstyle("target-endpoint"),A=O?"outside-to-node":C.value;if(g.srcManEndpt=P,g.tgtManEndpt=C,y){var S=[g.ctrlpts[0],g.ctrlpts[1]];r=w?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:S,_=S}else if(b){var N=k?g.segpts.slice(0,2):[c.x,c.y];r=k?g.segpts.slice(g.segpts.length-2):[s.x,s.y],_=N}if("inside-to-node"===A)t=[c.x,c.y];else if(C.units)t=this.manualEndptToPx(l,C);else if("outside-to-line"===A)t=g.tgtIntn;else if("outside-to-node"===A||"outside-to-node-or-label"===A?n=r:"outside-to-line"!==A&&"outside-to-line-or-label"!==A||(n=[s.x,s.y]),t=i.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),n[0],n[1],0),"outside-to-node-or-label"===A||"outside-to-line-or-label"===A){var T=l._private.rscratch,L=T.labelWidth,M=T.labelHeight,j=T.labelX,I=T.labelY,D=L/2,R=M/2,F=l.pstyle("text-valign").value;"top"===F?I-=R:"bottom"===F&&(I+=R);var z=l.pstyle("text-halign").value;"left"===z?j-=D:"right"===z&&(j+=D);var B=zy(n[0],n[1],[j-D,I-R,j+D,I-R,j+D,I+R,j-D,I+R],c.x,c.y);if(B.length>0){var q=s,V=fy(q,iy(t)),G=fy(q,iy(B)),U=V;if(G<V&&(t=B,U=G),B.length>2)fy(q,{x:B[2],y:B[3]})<U&&(t=[B[2],B[3]])}}var $=By(t,r,i.arrowShapes[u].spacing(e)+d),W=By(t,r,i.arrowShapes[u].gap(e)+d);if(g.endX=W[0],g.endY=W[1],g.arrowEndX=$[0],g.arrowEndY=$[1],"inside-to-node"===E)t=[s.x,s.y];else if(P.units)t=this.manualEndptToPx(o,P);else if("outside-to-line"===E)t=g.srcIntn;else if("outside-to-node"===E||"outside-to-node-or-label"===E?a=_:"outside-to-line"!==E&&"outside-to-line-or-label"!==E||(a=[c.x,c.y]),t=i.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===E||"outside-to-line-or-label"===E){var H=o._private.rscratch,Y=H.labelWidth,X=H.labelHeight,Z=H.labelX,K=H.labelY,J=Y/2,Q=X/2,ee=o.pstyle("text-valign").value;"top"===ee?K-=Q:"bottom"===ee&&(K+=Q);var te=o.pstyle("text-halign").value;"left"===te?Z-=J:"right"===te&&(Z+=J);var re=zy(a[0],a[1],[Z-J,K-Q,Z+J,K-Q,Z+J,K+Q,Z-J,K+Q],s.x,s.y);if(re.length>0){var _e=c,ne=fy(_e,iy(t)),ae=fy(_e,iy(re)),ie=ne;if(ae<ne&&(t=[re[0],re[1]],ie=ae),re.length>2)fy(_e,{x:re[2],y:re[3]})<ie&&(t=[re[2],re[3]])}}var oe=By(t,_,i.arrowShapes[f].spacing(e)+p),le=By(t,_,i.arrowShapes[f].gap(e)+p);g.startX=le[0],g.startY=le[1],g.arrowStartX=oe[0],g.arrowStartY=oe[1],x&&(Mv(g.startX)&&Mv(g.startY)&&Mv(g.endX)&&Mv(g.endY)?g.badLine=!1:g.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},_P={};function nP(e,t,r){for(var _=function(e,t,r,_){return py(e,t,r,_)},n=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var i=e.bezierProjPcts[a];n.push({x:_(r[0],r[2],r[4],i),y:_(r[1],r[3],r[5],i)})}}_P.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,_=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===_||"bezier"===_||"self"===_||"compound"===_){t.rstyle.bezierPts=[];for(var n=0;n+5<r.allpts.length;n+=4)nP(this,e,r.allpts.slice(n,n+6))}else if("segments"===_){var a=t.rstyle.linePts=[];for(n=0;n+1<r.allpts.length;n+=2)a.push({x:r.allpts[n],y:r.allpts[n+1]})}else if("haystack"===_){var i=r.haystackPts;t.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},_P.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var aP={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Bv(t)){var r,_,n=e._private,a=e.width(),i=e.height(),o=e.padding(),l=e.position(),s=e.pstyle("text-halign").strValue,c=e.pstyle("text-valign").strValue,u=n.rscratch,f=n.rstyle;switch(s){case"left":r=l.x-a/2-o;break;case"right":r=l.x+a/2+o;break;default:r=l.x}switch(c){case"top":_=l.y-i/2-o;break;case"bottom":_=l.y+i/2+o;break;default:_=l.y}u.labelX=r,u.labelY=_,f.labelX=r,f.labelY=_,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},iP=function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r},oP=function(e,t){var r=t.x-e.x,_=t.y-e.y;return iP(r,_)};aP.recalculateEdgeLabelProjections=function(e){var t,r=e._private,_=r.rscratch,n=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:_.midX,y:_.midY};var i=function(e,t,_){Fm(r.rscratch,e,t,_),Fm(r.rstyle,e,t,_)};i("labelX",null,t.x),i("labelY",null,t.y);var o=iP(_.midDispX,_.midDispY);i("labelAutoAngle",null,o);var l=function e(){if(e.cache)return e.cache;for(var t=[],a=0;a+5<_.allpts.length;a+=4){var i={x:_.allpts[a],y:_.allpts[a+1]},o={x:_.allpts[a+2],y:_.allpts[a+3]},l={x:_.allpts[a+4],y:_.allpts[a+5]};t.push({p0:i,p1:o,p2:l,startDist:0,length:0,segments:[]})}var s=r.rstyle.bezierPts,c=n.bezierProjPcts.length;function u(e,t,r,_,n){var a=uy(t,r),i=e.segments[e.segments.length-1],o={p0:t,p1:r,t0:_,t1:n,startDist:i?i.startDist+i.length:0,length:a};e.segments.push(o),e.length+=a}for(var f=0;f<t.length;f++){var d=t[f],p=t[f-1];p&&(d.startDist=p.startDist+p.length),u(d,d.p0,s[f*c],0,n.bezierProjPcts[0]);for(var h=0;h<c-1;h++)u(d,s[f*c+h],s[f*c+h+1],n.bezierProjPcts[h],n.bezierProjPcts[h+1]);u(d,s[f*c+c-1],d.p2,n.bezierProjPcts[c-1],1)}return e.cache=t},s=function(r){var n,o="source"===r;if(a[r]){var s=e.pstyle(r+"-text-offset").pfValue;switch(_.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var c,u=l(),f=0,d=0,p=0;p<u.length;p++){for(var h=u[o?p:u.length-1-p],g=0;g<h.segments.length;g++){var v=h.segments[o?g:h.segments.length-1-g],m=p===u.length-1&&g===h.segments.length-1;if(f=d,(d+=v.length)>=s||m){c={cp:h,segment:v};break}}if(c)break}var y=c.cp,w=c.segment,b=(s-f)/w.length,k=w.t1-w.t0,x=o?w.t0+k*b:w.t1-k*b;x=gy(0,x,1),t=hy(y.p0,y.p1,y.p2,x),n=function(e,t,r,_){var n=gy(0,_-.001,1),a=gy(0,_+.001,1),i=hy(e,t,r,n),o=hy(e,t,r,a);return oP(i,o)}(y.p0,y.p1,y.p2,x);break;case"straight":case"segments":case"haystack":for(var O,P,E,C,A=0,S=_.allpts.length,N=0;N+3<S&&(o?(E={x:_.allpts[N],y:_.allpts[N+1]},C={x:_.allpts[N+2],y:_.allpts[N+3]}):(E={x:_.allpts[S-2-N],y:_.allpts[S-1-N]},C={x:_.allpts[S-4-N],y:_.allpts[S-3-N]}),P=A,!((A+=O=uy(E,C))>=s));N+=2);var T=(s-P)/O;T=gy(0,T,1),t=function(e,t,r,_){var n=t.x-e.x,a=t.y-e.y,i=uy(e,t),o=n/i,l=a/i;return r=null==r?0:r,_=null!=_?_:r*i,{x:e.x+o*_,y:e.y+l*_}}(E,C,T),n=oP(E,C)}i("labelX",r,t.x),i("labelY",r,t.y),i("labelAutoAngle",r,n)}};s("source"),s("target"),this.applyLabelDimensions(e)}},aP.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},aP.applyPrefixedLabelDimensions=function(e,t){var r=e._private,_=this.getLabelText(e,t),n=this.calculateLabelDimensions(e,_),a=e.pstyle("line-height").pfValue,i=e.pstyle("text-wrap").strValue,o=Rm(r.rscratch,"labelWrapCachedLines",t)||[],l="wrap"!==i?1:Math.max(o.length,1),s=n.height/l,c=s*a,u=n.width,f=n.height+(l-1)*(a-1)*s;Fm(r.rstyle,"labelWidth",t,u),Fm(r.rscratch,"labelWidth",t,u),Fm(r.rstyle,"labelHeight",t,f),Fm(r.rscratch,"labelHeight",t,f),Fm(r.rscratch,"labelLineHeight",t,c)},aP.getLabelText=function(e,t){var r=e._private,_=t?t+"-":"",n=e.pstyle(_+"label").strValue,a=e.pstyle("text-transform").value,i=function(e,_){return _?(Fm(r.rscratch,e,t,_),_):Rm(r.rscratch,e,t)};if(!n)return"";"none"==a||("uppercase"==a?n=n.toUpperCase():"lowercase"==a&&(n=n.toLowerCase()));var o=e.pstyle("text-wrap").value;if("wrap"===o){var l=i("labelKey");if(null!=l&&i("labelWrapKey")===l)return i("labelWrapCachedText");for(var s=n.split("\n"),c=e.pstyle("text-max-width").pfValue,u="anywhere"===e.pstyle("text-overflow-wrap").value,f=[],d=/[\s\u200b]+/,p=u?"":" ",h=0;h<s.length;h++){var g=s[h],v=this.calculateLabelDimensions(e,g).width;if(u){var m=g.split("").join("");g=m}if(v>c){for(var y=g.split(d),w="",b=0;b<y.length;b++){var k=y[b],x=0===w.length?k:w+p+k;this.calculateLabelDimensions(e,x).width<=c?w+=k+p:(w&&f.push(w),w=k+p)}w.match(/^[\s\u200b]+$/)||f.push(w)}else f.push(g)}i("labelWrapCachedLines",f),n=i("labelWrapCachedText",f.join("\n")),i("labelWrapKey",l)}else if("ellipsis"===o){var O=e.pstyle("text-max-width").pfValue,P="",E=!1;if(this.calculateLabelDimensions(e,n).width<O)return n;for(var C=0;C<n.length;C++){if(this.calculateLabelDimensions(e,P+n[C]+"").width>O)break;P+=n[C],C===n.length-1&&(E=!0)}return E||(P+=""),P}return n},aP.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},aP.calculateLabelDimensions=function(e,t){var r=gm(t,e._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),n=_[r];if(null!=n)return n;var a=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue,o=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,s=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!s){s=this.labelCalcCanvas=document.createElement("canvas"),c=this.labelCalcCanvasContext=s.getContext("2d");var u=s.style;u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none"}c.font="".concat(a," ").concat(l," ").concat(i,"px ").concat(o);for(var f=0,d=0,p=t.split("\n"),h=0;h<p.length;h++){var g=p[h],v=c.measureText(g),m=Math.ceil(v.width),y=i;f=Math.max(m,f),d+=y}return f+=0,d+=0,_[r]={width:f,height:d}},aP.calculateLabelAngle=function(e,t){var r=e._private.rscratch,_=e.isEdge(),n=t?t+"-":"",a=e.pstyle(n+"text-rotation"),i=a.strValue;return"none"===i?0:_&&"autorotate"===i?r.labelAutoAngle:"autorotate"===i?0:a.pfValue},aP.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),_=e._private.rscratch;_.labelAngle=t.calculateLabelAngle(e),r&&(_.sourceLabelAngle=t.calculateLabelAngle(e,"source"),_.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var lP={},sP=!1;lP.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return sP||(Sm("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),sP=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var cP={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,_=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),r)for(var _=0;_<e.length;_++){var n=e[_]._private.rstyle;n.clean=!1,n.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",(function(e){var t=e.target;_(t)})).on("style.* background.*",(function(e){var t=e.target;_(t,!1)}));var n=function(n){if(n){var a=r.onUpdateEleCalcsFns;t.cleanStyle();for(var i=0;i<t.length;i++){var o=t[i],l=o._private.rstyle;o.isNode()&&!l.cleanConnected&&(_(o.connectedEdges()),l.cleanConnected=!0)}if(a)for(var s=0;s<a.length;s++){(0,a[s])(n,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){n(!0)},r.beforeRender(n,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(e){return e._private.rstyle.cleanConnected},_=[],n=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var i=e[a],o=i._private,l=o.rstyle;!i.isEdge()||r(i.source())&&r(i.target())||(l.clean=!1),t&&l.clean||i.removed()||"none"!==i.pstyle("display").value&&("nodes"===o.group?n.push(i):_.push(i),l.clean=!0)}for(var s=0;s<n.length;s++){var c=n[s],u=c._private.rstyle,f=c.position();this.recalculateNodeLabelProjection(c),u.nodeX=f.x,u.nodeY=f.y,u.nodeW=c.pstyle("width").pfValue,u.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(_);for(var d=0;d<_.length;d++){var p=_[d]._private,h=p.rstyle,g=p.rscratch;h.srcX=g.arrowStartX,h.srcY=g.arrowStartY,h.tgtX=g.arrowEndX,h.tgtY=g.arrowEndY,h.midX=g.midX,h.midY=g.midY,h.labelAngle=g.labelAngle,h.sourceLabelAngle=g.sourceLabelAngle,h.targetLabelAngle=g.targetLabelAngle}}}},uP={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var _=(n=e[r])._private.rscratch;n.grabbed()&&!n.isParent()?t.push(n):_.inDragLayer?e.drag.push(n):e.nondrag.push(n)}for(r=0;r<t.length;r++){var n=t[r];e.drag.push(n)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Zk),t.interactive=t.filter((function(e){return e.interactive()})),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},fP={};[JO,QO,eP,rP,_P,aP,lP,cP,uP].forEach((function(e){Qv(fP,e)}));var dP={getCachedImage:function(e,t,r){var _=this.imageCache=this.imageCache||{},n=_[e];if(n)return n.image.complete||n.image.addEventListener("load",r),n.image;var a=(n=_[e]=_[e]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var i="data:";return e.substring(0,5).toLowerCase()===i||(t="null"===t?null:t,a.crossOrigin=t),a.src=e,a}},pP={registerBinding:function(e,t,r,_){var n=Array.prototype.slice.apply(arguments,[1]),a=this.binder(e);return a.on.apply(a,n)}};pP.binder=function(e){var t,r=this,_=r.cy.window(),n=e===_||e===_.document||e===_.document.body||(t=e,"undefined"!=typeof HTMLElement&&t instanceof HTMLElement);if(null==r.supportsPassiveEvents){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});_.addEventListener("test",null,i)}catch(e){}r.supportsPassiveEvents=a}var o=function(t,_,a){var i=Array.prototype.slice.call(arguments);return n&&r.supportsPassiveEvents&&(i[2]={capture:null!=a&&a,passive:!1,once:!1}),r.bindings.push({target:e,args:i}),(e.addEventListener||e.on).apply(e,i),this};return{on:o,addEventListener:o,addListener:o,bind:o}},pP.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},pP.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},pP.load=function(){var e=this,t=e.cy.window(),r=function(e){return e.selected()},_=function(t,r,_,n){null==t&&(t=e.cy);for(var a=0;a<r.length;a++){var i=r[a];t.emit({originalEvent:_,type:i,position:n})}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},a=function(t,r){var _=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var n=0;r&&n<r.length;n++){if((t=r[n]).isNode()&&t.isParent()&&!t.pannable()){_=!1;break}}else _=!0;return _},i=function(e){e[0]._private.rscratch.inDragLayer=!0},o=function(e){e[0]._private.rscratch.isGrabTarget=!0},l=function(e,t){var r=t.addToList;r.has(e)||!e.grabbable()||e.locked()||(r.merge(e),function(e){e[0]._private.grabbed=!0}(e))},s=function(t,r){r=r||{};var _=t.cy().hasCompoundNodes();r.inDragLayer&&(t.forEach(i),t.neighborhood().stdFilter((function(e){return!_||e.isEdge()})).forEach(i)),r.addToList&&t.forEach((function(e){l(e,r)})),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(i),r.connectedEdges().forEach(i)),t.addToList&&l(r,t)}}(t,r),f(t,{inDragLayer:r.inDragLayer}),e.updateCachedGrabbedEles()},c=s,u=function(t){t&&(e.getCachedZSortedEles().forEach((function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)})),e.updateCachedGrabbedEles())},f=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var _=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),n=_.connectedEdges();t.inDragLayer&&(n.forEach(i),_.forEach(i)),t.addToList&&_.forEach((function(e){l(e,t)}))}}},d=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,h="undefined"!=typeof ResizeObserver;p?(e.removeObserver=new MutationObserver((function(t){for(var r=0;r<t.length;r++){var _=t[r].removedNodes;if(_)for(var n=0;n<_.length;n++){if(_[n]===e.container){e.destroy();break}}}})),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",(function(t){e.destroy()}));var g=cv.default((function(){e.cy.resize()}),100);p&&(e.styleObserver=new MutationObserver(g),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",g),h&&(e.resizeObserver=new ResizeObserver(g),e.resizeObserver.observe(e.container));var v=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,(function(t){e.registerBinding(t,"transitionend",v),e.registerBinding(t,"animationend",v),e.registerBinding(t,"scroll",v)})),e.registerBinding(e.container,"contextmenu",(function(e){e.preventDefault()}));var m,y,w,b=function(t){for(var r=e.findContainerClientCoords(),_=r[0],n=r[1],a=r[2],i=r[3],o=t.touches?t.touches:[t],l=!1,s=0;s<o.length;s++){var c=o[s];if(_<=c.clientX&&c.clientX<=_+a&&n<=c.clientY&&c.clientY<=n+i){l=!0;break}}if(!l)return!1;for(var u=e.container,f=t.target.parentNode,d=!1;f;){if(f===u){d=!0;break}f=f.parentNode}return!!d};e.registerBinding(e.container,"mousedown",(function(t){if(b(t)){t.preventDefault(),d(),e.hoverData.capture=!0,e.hoverData.which=t.which;var r=e.cy,n=[t.clientX,t.clientY],a=e.projectIntoViewport(n[0],n[1]),i=e.selection,l=e.findNearestElements(a[0],a[1],!0,!1),u=l[0],f=e.dragData.possibleDragElements;e.hoverData.mdownPos=a,e.hoverData.mdownGPos=n;if(3==t.which){e.hoverData.cxtStarted=!0;var p={originalEvent:t,type:"cxttapstart",position:{x:a[0],y:a[1]}};u?(u.activate(),u.emit(p),e.hoverData.down=u):r.emit(p),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var h=function(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}};if(o(u),u.selected()){f=e.dragData.possibleDragElements=r.collection();var g=r.$((function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)}));s(g,{addToList:f}),u.emit(h("grabon")),g.forEach((function(e){e.emit(h("grab"))}))}else f=e.dragData.possibleDragElements=r.collection(),c(u,{addToList:f}),u.emit(h("grabon")).emit(h("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=l,e.hoverData.downTime=(new Date).getTime(),_(u,["mousedown","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==u?(i[4]=1,e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()):u.pannable()&&(i[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout((function(){if(!e.hoverData.tapholdCancelled){var _=e.hoverData.down;_?_.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:t,type:"taphold",position:{x:a[0],y:a[1]}})}}),e.tapholdDuration)}i[0]=i[2]=a[0],i[1]=i[3]=a[1]}}),!1),e.registerBinding(t,"mousemove",(function(t){if(e.hoverData.capture||b(t)){var r=!1,i=e.cy,o=i.zoom(),l=[t.clientX,t.clientY],c=e.projectIntoViewport(l[0],l[1]),f=e.hoverData.mdownPos,d=e.hoverData.mdownGPos,p=e.selection,h=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(h=e.findNearestElement(c[0],c[1],!0,!1));var g,v=e.hoverData.last,m=e.hoverData.down,y=[c[0]-p[2],c[1]-p[3]],w=e.dragData.possibleDragElements;if(d){var k=l[0]-d[0],x=k*k,O=l[1]-d[1],P=x+O*O;e.hoverData.isOverThresholdDrag=g=P>=e.desktopTapThreshold2}var E=n(t);g&&(e.hoverData.tapholdCancelled=!0);r=!0,_(h,["mousemove","vmousemove","tapdrag"],t,{x:c[0],y:c[1]});var C=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||i.emit({originalEvent:t,type:"boxstart",position:{x:c[0],y:c[1]}}),p[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(g){var A={originalEvent:t,type:"cxtdrag",position:{x:c[0],y:c[1]}};m?m.emit(A):i.emit(A),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&h===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:c[0],y:c[1]}}),e.hoverData.cxtOver=h,h&&h.emit({originalEvent:t,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}}else if(e.hoverData.dragging){if(r=!0,i.panningEnabled()&&i.userPanningEnabled()){var S;if(e.hoverData.justStartedPan){var N=e.hoverData.mdownPos;S={x:(c[0]-N[0])*o,y:(c[1]-N[1])*o},e.hoverData.justStartedPan=!1}else S={x:y[0]*o,y:y[1]*o};i.panBy(S),i.emit("dragpan"),e.hoverData.dragged=!0}c=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=p[4]||null!=m&&!m.pannable()){if(m&&m.pannable()&&m.active()&&m.unactivate(),m&&m.grabbed()||h==v||(v&&_(v,["mouseout","tapdragout"],t,{x:c[0],y:c[1]}),h&&_(h,["mouseover","tapdragover"],t,{x:c[0],y:c[1]}),e.hoverData.last=h),m)if(g){if(i.boxSelectionEnabled()&&E)m&&m.grabbed()&&(u(w),m.emit("freeon"),w.emit("free"),e.dragData.didDrag&&(m.emit("dragfreeon"),w.emit("dragfree"))),C();else if(m&&m.grabbed()&&e.nodeIsDraggable(m)){var T=!e.dragData.didDrag;T&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||s(w,{inDragLayer:!0});var L={x:0,y:0};if(Mv(y[0])&&Mv(y[1])&&(L.x+=y[0],L.y+=y[1],T)){var M=e.hoverData.dragDelta;M&&Mv(M[0])&&Mv(M[1])&&(L.x+=M[0],L.y+=M[1])}e.hoverData.draggingEles=!0,w.silentShift(L).emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(y[0]),t.push(y[1])):(t[0]+=y[0],t[1]+=y[1])}();r=!0}else if(g){if(e.hoverData.dragging||!i.boxSelectionEnabled()||!E&&i.panningEnabled()&&i.userPanningEnabled()){if(!e.hoverData.selecting&&i.panningEnabled()&&i.userPanningEnabled()){a(m,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,p[4]=0,e.data.bgActivePosistion=iy(f),e.redrawHint("select",!0),e.redraw())}}else C();m&&m.pannable()&&m.active()&&m.unactivate()}return p[2]=c[0],p[3]=c[1],r?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}}),!1),e.registerBinding(t,"mouseup",(function(t){if(e.hoverData.capture){e.hoverData.capture=!1;var a=e.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=e.selection,l=e.findNearestElement(i[0],i[1],!0,!1),s=e.dragData.possibleDragElements,c=e.hoverData.down,f=n(t);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,c&&c.unactivate(),3===e.hoverData.which){var d={originalEvent:t,type:"cxttapend",position:{x:i[0],y:i[1]}};if(c?c.emit(d):a.emit(d),!e.hoverData.cxtDragged){var p={originalEvent:t,type:"cxttap",position:{x:i[0],y:i[1]}};c?c.emit(p):a.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(_(l,["mouseup","tapend","vmouseup"],t,{x:i[0],y:i[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(_(c,["click","tap","vclick"],t,{x:i[0],y:i[1]}),y=!1,t.timeStamp-w<=a.multiClickDebounceTime()?(m&&clearTimeout(m),y=!0,w=null,_(c,["dblclick","dbltap","vdblclick"],t,{x:i[0],y:i[1]})):(m=setTimeout((function(){y||_(c,["oneclick","onetap","voneclick"],t,{x:i[0],y:i[1]})}),a.multiClickDebounceTime()),w=t.timeStamp)),null!=c||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(t)||(a.$(r).unselect(["tapunselect"]),s.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=s=a.collection()),l!=c||e.dragData.didDrag||e.hoverData.selecting||null!=l&&l._private.selectable&&(e.hoverData.dragging||("additive"===a.selectionType()||f?l.selected()?l.unselect(["tapunselect"]):l.select(["tapselect"]):f||(a.$(r).unmerge(l).unselect(["tapunselect"]),l.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var h=a.collection(e.getAllInBox(o[0],o[1],o[2],o[3]));e.redrawHint("select",!0),h.length>0&&e.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:t,position:{x:i[0],y:i[1]}});var g=function(e){return e.selectable()&&!e.selected()};"additive"===a.selectionType()||f||a.$(r).unmerge(h).unselect(),h.emit("box").stdFilter(g).select().emit("boxselect"),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!o[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var v=c&&c.grabbed();u(s),v&&(c.emit("freeon"),s.emit("free"),e.dragData.didDrag&&(c.emit("dragfreeon"),s.emit("dragfree")))}}o[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}}),!1);var k,x,O,P,E,C,A,S,N,T,L,M,j,I=function(t){if(!e.scrollingPage){var r=e.cy,_=r.zoom(),n=r.pan(),a=e.projectIntoViewport(t.clientX,t.clientY),i=[a[0]*_+n.x,a[1]*_+n.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])t.preventDefault();else if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){var o;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout((function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()}),150),o=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,o*=e.wheelSensitivity,1===t.deltaMode&&(o*=33);var l=r.zoom()*Math.pow(10,o);"gesturechange"===t.type&&(l=e.gestureStartZoom*t.scale),r.zoom({level:l,renderedPosition:{x:i[0],y:i[1]}}),r.emit("gesturechange"===t.type?"pinchzoom":"scrollzoom")}}};e.registerBinding(e.container,"wheel",I,!0),e.registerBinding(t,"scroll",(function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout((function(){e.scrollingPage=!1}),250)}),!0),e.registerBinding(e.container,"gesturestart",(function(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()}),!0),e.registerBinding(e.container,"gesturechange",(function(t){e.hasTouchStarted||I(t)}),!0),e.registerBinding(e.container,"mouseout",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:r[0],y:r[1]}})}),!1),e.registerBinding(e.container,"mouseover",(function(t){var r=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:r[0],y:r[1]}})}),!1);var D,R,F,z,B,q,V,G=function(e,t,r,_){return Math.sqrt((r-e)*(r-e)+(_-t)*(_-t))},U=function(e,t,r,_){return(r-e)*(r-e)+(_-t)*(_-t)};if(e.registerBinding(e.container,"touchstart",D=function(t){if(e.hasTouchStarted=!0,b(t)){d(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,n=e.touchData.now,a=e.touchData.earlier;if(t.touches[0]){var i=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);n[0]=i[0],n[1]=i[1]}if(t.touches[1]){i=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);n[2]=i[0],n[3]=i[1]}if(t.touches[2]){i=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);n[4]=i[0],n[5]=i[1]}if(t.touches[1]){e.touchData.singleTouchMoved=!0,u(e.dragData.touchDragEles);var l=e.findContainerClientCoords();N=l[0],T=l[1],L=l[2],M=l[3],k=t.touches[0].clientX-N,x=t.touches[0].clientY-T,O=t.touches[1].clientX-N,P=t.touches[1].clientY-T,j=0<=k&&k<=L&&0<=O&&O<=L&&0<=x&&x<=M&&0<=P&&P<=M;var f=r.pan(),p=r.zoom();E=G(k,x,O,P),C=U(k,x,O,P),S=[((A=[(k+O)/2,(x+P)/2])[0]-f.x)/p,(A[1]-f.y)/p];if(C<4e4&&!t.touches[2]){var h=e.findNearestElement(n[0],n[1],!0,!0),g=e.findNearestElement(n[2],n[3],!0,!0);return h&&h.isNode()?(h.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start=h):g&&g.isNode()?(g.activate().emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start=g):r.emit({originalEvent:t,type:"cxttapstart",position:{x:n[0],y:n[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])r.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var v=e.findNearestElements(n[0],n[1],!0,!0),m=v[0];if(null!=m&&(m.activate(),e.touchData.start=m,e.touchData.starts=v,e.nodeIsGrabbable(m))){var y=e.dragData.touchDragEles=r.collection(),w=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),m.selected()?(w=r.$((function(t){return t.selected()&&e.nodeIsGrabbable(t)})),s(w,{addToList:y})):c(m,{addToList:y}),o(m);var I=function(e){return{originalEvent:t,type:e,position:{x:n[0],y:n[1]}}};m.emit(I("grabon")),w?w.forEach((function(e){e.emit(I("grab"))})):m.emit(I("grab"))}_(m,["touchstart","tapstart","vmousedown"],t,{x:n[0],y:n[1]}),null==m&&(e.data.bgActivePosistion={x:i[0],y:i[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout((function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||_(e.touchData.start,["taphold"],t,{x:n[0],y:n[1]})}),e.tapholdDuration)}if(t.touches.length>=1){for(var D=e.touchData.startPosition=[null,null,null,null,null,null],R=0;R<n.length;R++)D[R]=a[R]=n[R];var F=t.touches[0];e.touchData.startGPosition=[F.clientX,F.clientY]}}},!1),e.registerBinding(window,"touchmove",R=function(t){var r=e.touchData.capture;if(r||b(t)){var n=e.selection,i=e.cy,o=e.touchData.now,l=e.touchData.earlier,c=i.zoom();if(t.touches[0]){var f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=f[0],o[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=f[0],o[5]=f[1]}var d,p=e.touchData.startGPosition;if(r&&t.touches[0]&&p){for(var h=[],g=0;g<o.length;g++)h[g]=o[g]-l[g];var v=t.touches[0].clientX-p[0],m=v*v,y=t.touches[0].clientY-p[1];d=m+y*y>=e.touchTapThreshold2}if(r&&e.touchData.cxt){t.preventDefault();var w=t.touches[0].clientX-N,A=t.touches[0].clientY-T,L=t.touches[1].clientX-N,M=t.touches[1].clientY-T,I=U(w,A,L,M);if(I/C>=2.25||I>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var D={originalEvent:t,type:"cxttapend",position:{x:o[0],y:o[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(D),e.touchData.start=null):i.emit(D)}}if(r&&e.touchData.cxt){D={originalEvent:t,type:"cxtdrag",position:{x:o[0],y:o[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(D):i.emit(D),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var R=e.findNearestElement(o[0],o[1],!0,!0);e.touchData.cxtOver&&R===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:t,type:"cxtdragout",position:{x:o[0],y:o[1]}}),e.touchData.cxtOver=R,R&&R.emit({originalEvent:t,type:"cxtdragover",position:{x:o[0],y:o[1]}}))}else if(r&&t.touches[2]&&i.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||i.emit({originalEvent:t,type:"boxstart",position:{x:o[0],y:o[1]}}),e.touchData.selecting=!0,e.touchData.didSelect=!0,n[4]=1,n&&0!==n.length&&void 0!==n[0]?(n[2]=(o[0]+o[2]+o[4])/3,n[3]=(o[1]+o[3]+o[5])/3):(n[0]=(o[0]+o[2]+o[4])/3,n[1]=(o[1]+o[3]+o[5])/3,n[2]=(o[0]+o[2]+o[4])/3+1,n[3]=(o[1]+o[3]+o[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(r&&t.touches[1]&&!e.touchData.didSelect&&i.zoomingEnabled()&&i.panningEnabled()&&i.userZoomingEnabled()&&i.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),Q=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var F=0;F<Q.length;F++){var z=Q[F]._private;z.grabbed=!1,z.rscratch.inDragLayer=!1}}var B=e.touchData.start,q=(w=t.touches[0].clientX-N,A=t.touches[0].clientY-T,L=t.touches[1].clientX-N,M=t.touches[1].clientY-T,G(w,A,L,M)),V=q/E;if(j){var $=(w-k+(L-O))/2,W=(A-x+(M-P))/2,H=i.zoom(),Y=H*V,X=i.pan(),Z=S[0]*H+X.x,K=S[1]*H+X.y,J={x:-Y/H*(Z-X.x-$)+Z,y:-Y/H*(K-X.y-W)+K};if(B&&B.active()){var Q=e.dragData.touchDragEles;u(Q),e.redrawHint("drag",!0),e.redrawHint("eles",!0),B.unactivate().emit("freeon"),Q.emit("free"),e.dragData.didDrag&&(B.emit("dragfreeon"),Q.emit("dragfree"))}i.viewport({zoom:Y,pan:J,cancelOnFailedZoom:!0}),i.emit("pinchzoom"),E=q,k=w,x=A,O=L,P=M,e.pinching=!0}if(t.touches[0]){f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);o[2]=f[0],o[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);o[4]=f[0],o[5]=f[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ee=e.touchData.start,te=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(R=e.findNearestElement(o[0],o[1],!0,!0)),r&&null!=ee&&t.preventDefault(),r&&null!=ee&&e.nodeIsDraggable(ee))if(d){Q=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&s(Q,{inDragLayer:!0}),e.dragData.didDrag=!0;var _e={x:0,y:0};if(Mv(h[0])&&Mv(h[1]))if(_e.x+=h[0],_e.y+=h[1],re)e.redrawHint("eles",!0),(ne=e.touchData.dragDelta)&&Mv(ne[0])&&Mv(ne[1])&&(_e.x+=ne[0],_e.y+=ne[1]);e.hoverData.draggingEles=!0,Q.silentShift(_e).emit("position drag"),e.redrawHint("drag",!0),e.touchData.startPosition[0]==l[0]&&e.touchData.startPosition[1]==l[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ne;0===(ne=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ne.push(h[0]),ne.push(h[1])):(ne[0]+=h[0],ne[1]+=h[1])}if(_(ee||R,["touchmove","tapdrag","vmousemove"],t,{x:o[0],y:o[1]}),ee&&ee.grabbed()||R==te||(te&&te.emit({originalEvent:t,type:"tapdragout",position:{x:o[0],y:o[1]}}),R&&R.emit({originalEvent:t,type:"tapdragover",position:{x:o[0],y:o[1]}})),e.touchData.last=R,r)for(F=0;F<o.length;F++)o[F]&&e.touchData.startPosition[F]&&d&&(e.touchData.singleTouchMoved=!0);if(r&&(null==ee||ee.pannable())&&i.panningEnabled()&&i.userPanningEnabled()){a(ee,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=iy(e.touchData.startPosition)),e.swipePanning?(i.panBy({x:h[0]*c,y:h[1]*c}),i.emit("dragpan")):d&&(e.swipePanning=!0,i.panBy({x:v*c,y:y*c}),i.emit("dragpan"),ee&&(ee.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);o[0]=f[0],o[1]=f[1]}}for(g=0;g<o.length;g++)l[g]=o[g];r&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",F=function(t){var r=e.touchData.start;e.touchData.capture=!1,r&&r.unactivate()}),e.registerBinding(t,"touchend",z=function(t){var n=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var a=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var i,o=e.cy,l=o.zoom(),s=e.touchData.now,c=e.touchData.earlier;if(t.touches[0]){var f=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);s[0]=f[0],s[1]=f[1]}if(t.touches[1]){f=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);s[2]=f[0],s[3]=f[1]}if(t.touches[2]){f=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);s[4]=f[0],s[5]=f[1]}if(n&&n.unactivate(),e.touchData.cxt){if(i={originalEvent:t,type:"cxttapend",position:{x:s[0],y:s[1]}},n?n.emit(i):o.emit(i),!e.touchData.cxtDragged){var d={originalEvent:t,type:"cxttap",position:{x:s[0],y:s[1]}};n?n.emit(d):o.emit(d)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&o.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=o.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,e.redrawHint("select",!0),o.emit({type:"boxend",originalEvent:t,position:{x:s[0],y:s[1]}});p.emit("box").stdFilter((function(e){return e.selectable()&&!e.selected()})).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=n&&n.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var h=e.dragData.touchDragEles;if(null!=n){var g=n._private.grabbed;u(h),e.redrawHint("drag",!0),e.redrawHint("eles",!0),g&&(n.emit("freeon"),h.emit("free"),e.dragData.didDrag&&(n.emit("dragfreeon"),h.emit("dragfree"))),_(n,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]}),n.unactivate(),e.touchData.start=null}else{var v=e.findNearestElement(s[0],s[1],!0,!0);_(v,["touchend","tapend","vmouseup","tapdragout"],t,{x:s[0],y:s[1]})}var m=e.touchData.startPosition[0]-s[0],y=m*m,w=e.touchData.startPosition[1]-s[1],b=(y+w*w)*l*l;e.touchData.singleTouchMoved||(n||o.$(":selected").unselect(["tapunselect"]),_(n,["tap","vclick"],t,{x:s[0],y:s[1]}),B=!1,t.timeStamp-V<=o.multiClickDebounceTime()?(q&&clearTimeout(q),B=!0,V=null,_(n,["dbltap","vdblclick"],t,{x:s[0],y:s[1]})):(q=setTimeout((function(){B||_(n,["onetap","voneclick"],t,{x:s[0],y:s[1]})}),o.multiClickDebounceTime()),V=t.timeStamp)),null!=n&&!e.dragData.didDrag&&n._private.selectable&&b<e.touchTapThreshold2&&!e.pinching&&("single"===o.selectionType()?(o.$(r).unmerge(n).unselect(["tapunselect"]),n.select(["tapselect"])):n.selected()?n.unselect(["tapunselect"]):n.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var k=0;k<s.length;k++)c[k]=s[k];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var $=[],W=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},H=function(e){$.push(function(e){return{event:e,touch:W(e)}}(e))},Y=function(e){for(var t=0;t<$.length;t++){if($[t].event.pointerId===e.pointerId)return void $.splice(t,1)}},X=function(e){e.touches=$.map((function(e){return e.touch}))},Z=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",(function(e){Z(e)||(e.preventDefault(),H(e),X(e),D(e))})),e.registerBinding(e.container,"pointerup",(function(e){Z(e)||(Y(e),X(e),z(e))})),e.registerBinding(e.container,"pointercancel",(function(e){Z(e)||(Y(e),X(e),F())})),e.registerBinding(e.container,"pointermove",(function(e){Z(e)||(e.preventDefault(),function(e){var t=$.filter((function(t){return t.event.pointerId===e.pointerId}))[0];t.event=e,t.touch=W(e)}(e),X(e),R(e))}))}};var hP={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl("polygon",e,t,r,_,n,this.points)},intersectLine:function(e,t,r,_,n,a,i){return zy(n,a,this.points,e,t,r/2,_/2,i)},checkPoint:function(e,t,r,_,n,a,i){return Ly(e,t,this.points,a,i,_,n,[0,-1],r)}}}};hP.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl(this.name,e,t,r,_,n)},intersectLine:function(e,t,r,_,n,a,i){return function(e,t,r,_,n,a){var i=r-e,o=_-t;i/=n,o/=a;var l=Math.sqrt(i*i+o*o),s=l-1;if(s<0)return[];var c=s/l;return[(r-e)*c+e,(_-t)*c+t]}(n,a,e,t,r/2+i,_/2+i)},checkPoint:function(e,t,r,_,n,a,i){return Iy(e,t,_,n,a,i,r)}}},hP.generateRoundPolygon=function(e,t){for(var r=new Array(2*t.length),_=0;_<t.length/2;_++){var n=2*_,a=void 0;a=_<t.length/2-1?2*(_+1):0,r[4*_]=t[n],r[4*_+1]=t[n+1];var i=t[a]-t[n],o=t[a+1]-t[n+1],l=Math.sqrt(i*i+o*o);r[4*_+2]=i/l,r[4*_+3]=o/l}return this.nodeShapes[e]={renderer:this,name:e,points:r,draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl("round-polygon",e,t,r,_,n,this.points)},intersectLine:function(e,t,r,_,n,a,i){return function(e,t,r,_,n,a,i){for(var o,l=[],s=new Array(r.length),c=a/2,u=i/2,f=$y(a,i),d=0;d<r.length/4;d++){var p,h=void 0;h=0===d?r.length-2:4*d-2,p=4*d+2;var g=_+c*r[4*d],v=n+u*r[4*d+1],m=-r[h]*r[p]-r[h+1]*r[p+1],y=f/Math.tan(Math.acos(m)/2),w=g-y*r[h],b=v-y*r[h+1],k=g+y*r[p],x=v+y*r[p+1];0===d?(s[r.length-2]=w,s[r.length-1]=b):(s[4*d-2]=w,s[4*d-1]=b),s[4*d]=k,s[4*d+1]=x;var O=r[h+1],P=-r[h];O*r[p]+P*r[p+1]<0&&(O*=-1,P*=-1),0!==(o=Dy(e,t,_,n,w+O*f,b+P*f,f)).length&&l.push(o[0],o[1])}for(var E=0;E<s.length/4;E++)0!==(o=Fy(e,t,_,n,s[4*E],s[4*E+1],s[4*E+2],s[4*E+3],!1)).length&&l.push(o[0],o[1]);if(l.length>2){for(var C=[l[0],l[1]],A=Math.pow(C[0]-e,2)+Math.pow(C[1]-t,2),S=1;S<l.length/2;S++){var N=Math.pow(l[2*S]-e,2)+Math.pow(l[2*S+1]-t,2);N<=A&&(C[0]=l[2*S],C[1]=l[2*S+1],A=N)}return C}return l}(n,a,this.points,e,t,r,_)},checkPoint:function(e,t,r,_,n,a,i){return function(e,t,r,_,n,a,i){for(var o=new Array(r.length),l=a/2,s=i/2,c=$y(a,i),u=c*c,f=0;f<r.length/4;f++){var d,p=void 0;p=0===f?r.length-2:4*f-2,d=4*f+2;var h=_+l*r[4*f],g=n+s*r[4*f+1],v=-r[p]*r[d]-r[p+1]*r[d+1],m=c/Math.tan(Math.acos(v)/2),y=h-m*r[p],w=g-m*r[p+1],b=h+m*r[d],k=g+m*r[d+1];o[4*f]=y,o[4*f+1]=w,o[4*f+2]=b,o[4*f+3]=k;var x=r[p+1],O=-r[p];x*r[d]+O*r[d+1]<0&&(x*=-1,O*=-1);var P=y+x*c,E=w+O*c;if(Math.pow(P-e,2)+Math.pow(E-t,2)<=u)return!0}return Ty(e,t,o)}(e,t,this.points,a,i,_,n)}}},hP.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:qy(4,0),draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl(this.name,e,t,r,_,n)},intersectLine:function(e,t,r,_,n,a,i){return Ey(n,a,e,t,r,_,i)},checkPoint:function(e,t,r,_,n,a,i){var o=Uy(_,n),l=2*o;return!!Ly(e,t,this.points,a,i,_,n-l,[0,-1],r)||(!!Ly(e,t,this.points,a,i,_-l,n,[0,-1],r)||(!!Iy(e,t,l,l,a-_/2+o,i-n/2+o,r)||(!!Iy(e,t,l,l,a+_/2-o,i-n/2+o,r)||(!!Iy(e,t,l,l,a+_/2-o,i+n/2-o,r)||!!Iy(e,t,l,l,a-_/2+o,i+n/2-o,r)))))}}},hP.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:qy(4,0),draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl(this.name,e,t,r,_,n)},generateCutTrianglePts:function(e,t,r,_){var n=this.cornerLength,a=t/2,i=e/2,o=r-i,l=r+i,s=_-a,c=_+a;return{topLeft:[o,s+n,o+n,s,o+n,s+n],topRight:[l-n,s,l,s+n,l-n,s+n],bottomRight:[l,c-n,l-n,c,l-n,c-n],bottomLeft:[o+n,c,o,c-n,o+n,c-n]}},intersectLine:function(e,t,r,_,n,a,i){var o=this.generateCutTrianglePts(r+2*i,_+2*i,e,t),l=[].concat.apply([],[o.topLeft.splice(0,4),o.topRight.splice(0,4),o.bottomRight.splice(0,4),o.bottomLeft.splice(0,4)]);return zy(n,a,l,e,t)},checkPoint:function(e,t,r,_,n,a,i){if(Ly(e,t,this.points,a,i,_,n-2*this.cornerLength,[0,-1],r))return!0;if(Ly(e,t,this.points,a,i,_-2*this.cornerLength,n,[0,-1],r))return!0;var o=this.generateCutTrianglePts(_,n,a,i);return Ty(e,t,o.topLeft)||Ty(e,t,o.topRight)||Ty(e,t,o.bottomRight)||Ty(e,t,o.bottomLeft)}}},hP.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:qy(4,0),draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl(this.name,e,t,r,_,n)},intersectLine:function(e,t,r,_,n,a,i){var o=this.generateBarrelBezierPts(r+2*i,_+2*i,e,t),l=function(e){var t=hy({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=hy({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),_=hy({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,_.x,_.y,e[4],e[5]]},s=[].concat(l(o.topLeft),l(o.topRight),l(o.bottomRight),l(o.bottomLeft));return zy(n,a,s,e,t)},generateBarrelBezierPts:function(e,t,r,_){var n=t/2,a=e/2,i=r-a,o=r+a,l=_-n,s=_+n,c=Wy(e,t),u=c.heightOffset,f=c.widthOffset,d=c.ctrlPtOffsetPct*e,p={topLeft:[i,l+u,i+d,l,i+f,l],topRight:[o-f,l,o-d,l,o,l+u],bottomRight:[o,s-u,o-d,s,o-f,s],bottomLeft:[i+f,s,i+d,s,i,s-u]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,r,_,n,a,i){var o=Wy(_,n),l=o.heightOffset,s=o.widthOffset;if(Ly(e,t,this.points,a,i,_,n-2*l,[0,-1],r))return!0;if(Ly(e,t,this.points,a,i,_-2*s,n,[0,-1],r))return!0;for(var c=this.generateBarrelBezierPts(_,n,a,i),u=function(e,t,r){var _,n,a=r[4],i=r[2],o=r[0],l=r[5],s=r[1],c=Math.min(a,o),u=Math.max(a,o),f=Math.min(l,s),d=Math.max(l,s);if(c<=e&&e<=u&&f<=t&&t<=d){var p=[(_=a)-2*(n=i)+o,2*(n-_),_],h=function(e,t,r,_){var n=t*t-4*e*(r-=_);if(n<0)return[];var a=Math.sqrt(n),i=2*e;return[(-t+a)/i,(-t-a)/i]}(p[0],p[1],p[2],e).filter((function(e){return 0<=e&&e<=1}));if(h.length>0)return h[0]}return null},f=Object.keys(c),d=0;d<f.length;d++){var p=c[f[d]],h=u(e,t,p);if(null!=h){var g=p[5],v=p[3],m=p[1],y=py(g,v,m,h);if(p.isTop&&y<=t)return!0;if(p.isBottom&&t<=y)return!0}}return!1}}},hP.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:qy(4,0),draw:function(e,t,r,_,n){this.renderer.nodeShapeImpl(this.name,e,t,r,_,n)},intersectLine:function(e,t,r,_,n,a,i){var o=t-(_/2+i),l=Fy(n,a,e,t,e-(r/2+i),o,e+(r/2+i),o,!1);return l.length>0?l:Ey(n,a,e,t,r,_,i)},checkPoint:function(e,t,r,_,n,a,i){var o=Uy(_,n),l=2*o;if(Ly(e,t,this.points,a,i,_,n-l,[0,-1],r))return!0;if(Ly(e,t,this.points,a,i,_-l,n,[0,-1],r))return!0;var s=_/2+2*r,c=n/2+2*r;return!!Ty(e,t,[a-s,i-c,a-s,i,a+s,i,a+s,i-c])||(!!Iy(e,t,l,l,a+_/2-o,i+n/2-o,r)||!!Iy(e,t,l,l,a-_/2+o,i+n/2-o,r))}}},hP.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",qy(3,0)),this.generateRoundPolygon("round-triangle",qy(3,0)),this.generatePolygon("rectangle",qy(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",qy(5,0)),this.generateRoundPolygon("round-pentagon",qy(5,0)),this.generatePolygon("hexagon",qy(6,0)),this.generateRoundPolygon("round-hexagon",qy(6,0)),this.generatePolygon("heptagon",qy(7,0)),this.generateRoundPolygon("round-heptagon",qy(7,0)),this.generatePolygon("octagon",qy(8,0)),this.generateRoundPolygon("round-octagon",qy(8,0));var _=new Array(20),n=Gy(5,0),a=Gy(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var o=0;o<a.length/2;o++)a[2*o]*=i,a[2*o+1]*=i;for(o=0;o<5;o++)_[4*o]=n[2*o],_[4*o+1]=n[2*o+1],_[4*o+2]=a[2*o],_[4*o+3]=a[2*o+1];_=Vy(_),this.generatePolygon("star",_),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,_="polygon-"+e.join("$");return(r=this[_])?r:t.generatePolygon(_,e)}};var gP={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Mm();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Cm("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort((function(e,t){return t.priority-e.priority}))}}},vP=function(e,t,r){for(var _=e.beforeRenderCallbacks,n=0;n<_.length;n++)_[n].fn(t,r)};gP.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;om((function r(_){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){vP(e,!0,_);var n=lm();e.render(e.renderOptions);var a=e.lastDrawTime=lm();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var i=a-n;e.redrawTotalTime+=i,e.lastRedrawTime=i,e.averageRedrawTime=e.averageRedrawTime/2+i/2,e.requestedFrame=!1}else vP(e,!1,_);e.skipFrame=!1,om(r)}}))}};var mP=function(e){this.init(e)},yP=mP.prototype;yP.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],yP.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),_=t.cy.window();if(_){var n=_.document,a=n.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",l=null!=n.getElementById(i);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var s=n.createElement("style");s.id=i,s.textContent="."+o+" { position: relative; }",a.insertBefore(s,a.children[0])}"static"===_.getComputedStyle(r).getPropertyValue("position")&&Sm("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Mv(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},yP.notify=function(e,t){var r=this,_=r.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&_.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},yP.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],_=r.target;(_.off||_.removeEventListener).apply(_,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},yP.isHeadless=function(){return!1},[KO,fP,dP,pP,hP,gP].forEach((function(e){Qv(yP,e)}));var wP=1e3/60,bP=function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var _=cv.default((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),e.deqRedrawThreshold),n=e.priority||Em;r.beforeRender((function(n,a){var i=lm(),o=r.averageRedrawTime,l=r.lastRedrawTime,s=[],c=r.cy.extent(),u=r.getPixelRatio();for(n||r.flushRenderedStyleQueue();;){var f=lm(),d=f-i,p=f-a;if(l<wP){var h=wP-(n?o:0);if(p>=e.deqFastCost*h)break}else if(n){if(d>=e.deqCost*l||d>=e.deqAvgCost*o)break}else if(p>=e.deqNoDrawCost*wP)break;var g=e.deq(t,u,c);if(!(g.length>0))break;for(var v=0;v<g.length;v++)s.push(g[v])}s.length>0&&(e.onDeqd(t,s),!n&&e.shouldRedraw(t,s,u,c)&&_())}),n(t))}}},kP=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Om;gv(this,e),this.idsByKey=new zm,this.keyForId=new zm,this.cachesByLvl=new zm,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return mv(e,[{key:"getIdsFor",value:function(e){null==e&&Cm("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new qm,t.set(e,r)),r}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t),_=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(_,t),this.keyForId.set(t,_)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,r=this.lvls,_=t.get(e);return _||(_=new zm,t.set(e,_),r.push(e)),_}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var r=this.getKey(e),_=this.getCache(r,t);return null!=_&&this.updateKeyMappingFor(e),_}},{key:"getForCachedKey",value:function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}},{key:"setCache",value:function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}},{key:"set",value:function(e,t,r){var _=this.getKey(e);this.setCache(_,t,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach((function(r){return t.deleteCache(e,r)}))}},{key:"invalidate",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var _=this.doesEleInvalidateKey(e);return _&&this.invalidateKey(r),_||0===this.getNumberOfIdsForKey(r)}}]),e}(),xP={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},OP=jm({getKey:null,doesEleInvalidateKey:Om,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:xm,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),PP=function(e,t){var r=this;r.renderer=e,r.onDequeues=[];var _=OP(t);Qv(r,_),r.lookup=new kP(_.getKey,_.doesEleInvalidateKey),r.setupDequeueing()},EP=PP.prototype;EP.reasons=xP,EP.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},EP.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},EP.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new uv.default((function(e,t){return t.reqs-e.reqs}))},EP.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},EP.getElement=function(e,t,r,_,n){var a=this,i=this.renderer,o=i.cy.zoom(),l=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!a.allowEdgeTxrCaching&&e.isEdge()||!a.allowParentTxrCaching&&e.isParent())return null;if(null==_&&(_=Math.ceil(ly(o*r))),_<-4)_=-4;else if(o>=7.99||_>3)return null;var s=Math.pow(2,_),c=t.h*s,u=t.w*s,f=i.eleTextBiggerThanMin(e,s);if(!this.isVisible(e,f))return null;var d,p=l.get(e,_);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(d=c<=25?25:c<=50?50:50*Math.ceil(c/50),c>1024||u>1024)return null;var h=a.getTextureQueue(d),g=h[h.length-2],v=function(){return a.recycleTexture(d,u)||a.addTexture(d,u)};g||(g=h[h.length-1]),g||(g=v()),g.width-g.usedWidth<u&&(g=v());for(var m,y=function(e){return e&&e.scaledLabelShown===f},w=n&&n===xP.dequeue,b=n&&n===xP.highQuality,k=n&&n===xP.downscale,x=_+1;x<=3;x++){var O=l.get(e,x);if(O){m=O;break}}var P=m&&m.level===_+1?m:null,E=function(){g.context.drawImage(P.texture.canvas,P.x,0,P.width,P.height,g.usedWidth,0,u,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,u,d),y(P))E();else if(y(m)){if(!b)return a.queueElement(e,m.level-1),m;for(var C=m.level;C>_;C--)P=a.getElement(e,t,r,C,xP.downscale);E()}else{var A;if(!w&&!b&&!k)for(var S=_-1;S>=-4;S--){var N=l.get(e,S);if(N){A=N;break}}if(y(A))return a.queueElement(e,_),A;g.context.translate(g.usedWidth,0),g.context.scale(s,s),this.drawElement(g.context,e,t,f,!1),g.context.scale(1/s,1/s),g.context.translate(-g.usedWidth,0)}return p={x:g.usedWidth,texture:g,level:_,scale:s,width:u,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(u+8),g.eleCaches.push(p),l.set(e,_,p),a.checkTextureFullness(g),p},EP.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},EP.invalidateElement=function(e){var t=this,r=t.lookup,_=[];if(r.isInvalid(e)){for(var n=-4;n<=3;n++){var a=r.getForCachedKey(e,n);a&&_.push(a)}if(r.invalidate(e))for(var i=0;i<_.length;i++){var o=_[i],l=o.texture;l.invalidatedWidth+=o.width,o.invalidated=!0,t.checkTextureUtility(l)}t.removeFromQueue(e)}},EP.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},EP.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?Im(t,e):e.fullnessChecks++},EP.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),_=this.lookup;Im(r,e),e.retired=!0;for(var n=e.eleCaches,a=0;a<n.length;a++){var i=n[a];_.deleteCache(i.key,i.level)}Dm(n),this.getRetiredTextureQueue(t).push(e)},EP.addTexture=function(e,t){var r={};return this.getTextureQueue(e).push(r),r.eleCaches=[],r.height=e,r.width=Math.max(1024,t),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},EP.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),_=this.getRetiredTextureQueue(e),n=0;n<_.length;n++){var a=_[n];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Dm(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Im(_,a),r.push(a),a}},EP.queueElement=function(e,t){var r=this.getElementQueue(),_=this.getElementKeyToQueue(),n=this.getKey(e),a=_[n];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var i={eles:e.spawn().merge(e),level:t,reqs:1,key:n};r.push(i),_[n]=i}},EP.dequeue=function(e){for(var t=this,r=t.getElementQueue(),_=t.getElementKeyToQueue(),n=[],a=t.lookup,i=0;i<1&&r.size()>0;i++){var o=r.pop(),l=o.key,s=o.eles[0],c=a.hasCache(s,o.level);if(_[l]=null,!c){n.push(o);var u=t.getBoundingBox(s);t.getElement(s,u,e,o.level,xP.dequeue)}}return n},EP.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),_=this.getKey(e),n=r[_];null!=n&&(1===n.eles.length?(n.reqs=km,t.updateItem(n),t.pop(),r[_]=null):n.eles.unmerge(e))},EP.onDequeue=function(e){this.onDequeues.push(e)},EP.offDequeue=function(e){Im(this.onDequeues,e)},EP.setupDequeueing=bP({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++){(0,e.onDequeues[r])(t)}},shouldRedraw:function(e,t,r,_){for(var n=0;n<t.length;n++)for(var a=t[n].eles,i=0;i<a.length;i++){var o=a[i].boundingBox();if(xy(o,_))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var CP=function(e){var t=this,r=t.renderer=e,_=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=lm()-500,t.skipping=!1,t.eleTxrDeqs=_.collection(),t.scheduleElementRefinement=cv.default((function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)}),50),r.beforeRender((function(e,r){r-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new uv.default((function(e,t){return t.reqs-e.reqs})),t.setupDequeueing()},AP=CP.prototype,SP=0,NP=Math.pow(2,53)-1;AP.makeLayer=function(e,t){var r=Math.pow(2,t),_=Math.ceil(e.w*r),n=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(_,n),i={id:SP=++SP%NP,bb:e,level:t,width:_,height:n,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=i.context,l=-i.bb.x1,s=-i.bb.y1;return o.scale(r,r),o.translate(l,s),i},AP.getLayers=function(e,t,r){var _=this,n=_.renderer.cy.zoom(),a=_.firstGet;if(_.firstGet=!1,null==r)if((r=Math.ceil(ly(n*t)))<-4)r=-4;else if(n>=3.99||r>2)return null;_.validateLayersElesOrdering(r,e);var i,o,l=_.layersByLevel,s=Math.pow(2,r),c=l[r]=l[r]||[];if(_.levelIsComplete(r,e))return c;!function(){var t=function(t){if(_.validateLayersElesOrdering(t,e),_.levelIsComplete(t,e))return o=l[t],!0},n=function(e){if(!o)for(var _=r+e;-4<=_&&_<=2&&!t(_);_+=e);};n(1),n(-1);for(var a=c.length-1;a>=0;a--){var i=c[a];i.invalid&&Im(c,i)}}();var u=function(t){var n=(t=t||{}).after;if(function(){if(!i){i=vy();for(var t=0;t<e.length;t++)my(i,e[t].boundingBox())}}(),i.w*s*(i.h*s)>16e6)return null;var a=_.makeLayer(i,r);if(null!=n){var o=c.indexOf(n)+1;c.splice(o,0,a)}else(void 0===t.insert||t.insert)&&c.unshift(a);return a};if(_.skipping&&!a)return null;for(var f=null,d=e.length/1,p=!a,h=0;h<e.length;h++){var g=e[h],v=g._private.rscratch,m=v.imgLayerCaches=v.imgLayerCaches||{},y=m[r];if(y)f=y;else{if((!f||f.eles.length>=d||!Py(f.bb,g.boundingBox()))&&!(f=u({insert:!0,after:f})))return null;o||p?_.queueLayer(f,g):_.drawEleInLayer(f,g,r,t),f.eles.push(g),m[r]=f}}return o||(p?null:c)},AP.getEleLevelForLayerLevel=function(e,t){return e},AP.drawEleInLayer=function(e,t,r,_){var n=this.renderer,a=e.context,i=t.boundingBox();0!==i.w&&0!==i.h&&t.visible()&&(r=this.getEleLevelForLayerLevel(r,_),n.setImgSmoothing(a,!1),n.drawCachedElement(a,t,null,null,r,true),n.setImgSmoothing(a,!0))},AP.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var _=0,n=0;n<r.length;n++){var a=r[n];if(a.reqs>0)return!1;if(a.invalid)return!1;_+=a.eles.length}return _===t.length},AP.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var _=0;_<r.length;_++){for(var n=r[_],a=-1,i=0;i<t.length;i++)if(n.eles[0]===t[i]){a=i;break}if(a<0)this.invalidateLayer(n);else{var o=a;for(i=0;i<n.eles.length;i++)if(n.eles[i]!==t[o+i]){this.invalidateLayer(n);break}}}},AP.updateElementsInLayers=function(e,t){for(var r=Dv(e[0]),_=0;_<e.length;_++)for(var n=r?null:e[_],a=r?e[_]:e[_].ele,i=a._private.rscratch,o=i.imgLayerCaches=i.imgLayerCaches||{},l=-4;l<=2;l++){var s=o[l];s&&(n&&this.getEleLevelForLayerLevel(s.level)!==n.level||t(s,a,n))}},AP.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},AP.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=lm(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,(function(e,r,_){t.invalidateLayer(e)})))},AP.invalidateLayer=function(e){if(this.lastInvalidationTime=lm(),!e.invalid){var t=e.level,r=e.eles,_=this.layersByLevel[t];Im(_,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var n=0;n<r.length;n++){var a=r[n]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},AP.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,(function(e,r,_){var n=e.replacement;if(n||((n=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,n.eles=e.eles),!n.reqs)for(var a=0;a<n.eles.length;a++)t.queueLayer(n,n.eles[a])}))},AP.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},AP.queueLayer=function(e,t){var r=this.layersQueue,_=e.elesQueue,n=_.hasId=_.hasId||{};if(!e.replacement){if(t){if(n[t.id()])return;_.push(t),n[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},AP.dequeue=function(e){for(var t=this,r=t.layersQueue,_=[],n=0;n<1&&0!==r.size();){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var i=a.elesQueue.shift();i&&(t.drawEleInLayer(a,i,a.level,e),n++),0===_.length&&_.push(!0),0===a.elesQueue.length&&(r.pop(),a.reqs=0,a.replaces&&t.applyLayerReplacement(a),t.requestRedraw())}}return _},AP.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,_=t.indexOf(r);if(!(_<0||r.invalid)){t[_]=e;for(var n=0;n<e.eles.length;n++){var a=e.eles[n]._private,i=a.imgLayerCaches=a.imgLayerCaches||{};i&&(i[e.level]=e)}this.requestRedraw()}},AP.requestRedraw=cv.default((function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()}),100),AP.setupDequeueing=bP({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:Em,shouldRedraw:xm,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var TP,LP={};function MP(e,t){for(var r=0;r<t.length;r++){var _=t[r];e.lineTo(_.x,_.y)}}function jP(e,t,r){for(var _,n=0;n<t.length;n++){var a=t[n];0===n&&(_=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,_.x,_.y)}function IP(e,t,r){e.beginPath&&e.beginPath();for(var _=t,n=0;n<_.length;n++){var a=_[n];e.lineTo(a.x,a.y)}var i=r,o=r[0];e.moveTo(o.x,o.y);for(n=1;n<i.length;n++){a=i[n];e.lineTo(a.x,a.y)}e.closePath&&e.closePath()}function DP(e,t,r,_,n){e.beginPath&&e.beginPath(),e.arc(r,_,n,0,2*Math.PI,!1);var a=t,i=a[0];e.moveTo(i.x,i.y);for(var o=0;o<a.length;o++){var l=a[o];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function RP(e,t,r,_){e.arc(t,r,_,0,2*Math.PI,!1)}LP.arrowShapeImpl=function(e){return(TP||(TP={polygon:MP,"triangle-backcurve":jP,"triangle-tee":IP,"circle-triangle":DP,"triangle-cross":IP,circle:RP}))[e]};var FP={drawElement:function(e,t,r,_,n,a){t.isNode()?this.drawNode(e,t,r,_,n,a):this.drawEdge(e,t,r,_,n,a)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,_,n,a,i,o){var l=this,s=r.getBoundingBox(t);if(0!==s.w&&0!==s.h){var c=r.getElement(t,s,_,n,a);if(null!=c){var u=o(l,t);if(0===u)return;var f,d,p,h,g,v,m=i(l,t),y=s.x1,w=s.y1,b=s.w,k=s.h;if(0!==m){var x=r.getRotationPoint(t);p=x.x,h=x.y,e.translate(p,h),e.rotate(m),(g=l.getImgSmoothing(e))||l.setImgSmoothing(e,!0);var O=r.getRotationOffset(t);f=O.x,d=O.y}else f=y,d=w;1!==u&&(v=e.globalAlpha,e.globalAlpha=v*u),e.drawImage(c.texture.canvas,c.x,0,c.width,c.height,f,d,b,k),1!==u&&(e.globalAlpha=v),0!==m&&(e.rotate(-m),e.translate(-p,-h),g||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},zP=function(){return 0},BP=function(e,t){return e.getTextAngle(t,null)},qP=function(e,t){return e.getTextAngle(t,"source")},VP=function(e,t){return e.getTextAngle(t,"target")},GP=function(e,t){return t.effectiveOpacity()},UP=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};FP.drawCachedElement=function(e,t,r,_,n,a){var i=this,o=i.data,l=o.eleTxrCache,s=o.lblTxrCache,c=o.slbTxrCache,u=o.tlbTxrCache,f=t.boundingBox(),d=!0===a?l.reasons.highQuality:null;if(0!==f.w&&0!==f.h&&t.visible()&&(!_||xy(f,_))){var p=t.isEdge(),h=t.element()._private.rscratch.badLine;i.drawElementUnderlay(e,t),i.drawCachedElementPortion(e,t,l,r,n,d,zP,GP),p&&h||i.drawCachedElementPortion(e,t,s,r,n,d,BP,UP),p&&!h&&(i.drawCachedElementPortion(e,t,c,r,n,d,qP,UP),i.drawCachedElementPortion(e,t,u,r,n,d,VP,UP)),i.drawElementOverlay(e,t)}},FP.drawElements=function(e,t){for(var r=0;r<t.length;r++){var _=t[r];this.drawElement(e,_)}},FP.drawCachedElements=function(e,t,r,_){for(var n=0;n<t.length;n++){var a=t[n];this.drawCachedElement(e,a,r,_)}},FP.drawCachedNodes=function(e,t,r,_){for(var n=0;n<t.length;n++){var a=t[n];a.isNode()&&this.drawCachedElement(e,a,r,_)}},FP.drawLayeredElements=function(e,t,r,_){var n=this.data.lyrTxrCache.getLayers(t,r);if(n)for(var a=0;a<n.length;a++){var i=n[a],o=i.bb;0!==o.w&&0!==o.h&&e.drawImage(i.canvas,o.x1,o.y1,o.w,o.h)}else this.drawCachedElements(e,t,r,_)};var $P={drawEdge:function(e,t,r){var _=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=this,o=t._private.rscratch;if((!a||t.visible())&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var s=a?t.pstyle("opacity").value:1,c=a?t.pstyle("line-opacity").value:1,u=t.pstyle("curve-style").value,f=t.pstyle("line-style").value,d=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,h=s*c,g=s*c,v=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;"straight-triangle"===u?(i.eleStrokeStyle(e,t,r),i.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=d,e.lineCap=p,i.eleStrokeStyle(e,t,r),i.drawEdgePath(t,e,o.allpts,f),e.lineCap="butt")},m=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;i.drawArrowheads(e,t,r)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var y=t.pstyle("ghost-offset-x").pfValue,w=t.pstyle("ghost-offset-y").pfValue,b=t.pstyle("ghost-opacity").value,k=h*b;e.translate(y,w),v(k),m(k),e.translate(-y,-w)}n&&i.drawEdgeUnderlay(e,t),v(),m(),n&&i.drawEdgeOverlay(e,t),i.drawElementText(e,t,null,_),r&&e.translate(l.x1,l.y1)}}},WP=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r){if(r.visible()){var _=r.pstyle("".concat(e,"-opacity")).value;if(0!==_){var n=this,a=n.usePaths(),i=r._private.rscratch,o=2*r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-color")).value;t.lineWidth=o,"self"!==i.edgeType||a?t.lineCap="round":t.lineCap="butt",n.colorStrokeStyle(t,l[0],l[1],l[2],_),n.drawEdgePath(r,t,i.allpts,"solid")}}}};$P.drawEdgeOverlay=WP("overlay"),$P.drawEdgeUnderlay=WP("underlay"),$P.drawEdgePath=function(e,t,r,_){var n,a=e._private.rscratch,i=t,o=!1,l=this.usePaths(),s=e.pstyle("line-dash-pattern").pfValue,c=e.pstyle("line-dash-offset").pfValue;if(l){var u=r.join("$");a.pathCacheKey&&a.pathCacheKey===u?(n=t=a.pathCache,o=!0):(n=t=new Path2D,a.pathCacheKey=u,a.pathCache=n)}if(i.setLineDash)switch(_){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(s),i.lineDashOffset=c;break;case"solid":i.setLineDash([])}if(!o&&!a.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<r.length;f+=4)t.quadraticCurveTo(r[f],r[f+1],r[f+2],r[f+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<r.length;d+=2)t.lineTo(r[d],r[d+1])}t=i,l?t.stroke(n):t.stroke(),t.setLineDash&&t.setLineDash([])},$P.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var _=e.pstyle("width").pfValue,n=0;n+1<r.length;n+=2){var a=[r[n+2]-r[n],r[n+3]-r[n+1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=[a[1]/i,-a[0]/i],l=[o[0]*_/2,o[1]*_/2];t.beginPath(),t.moveTo(r[n]-l[0],r[n+1]-l[1]),t.lineTo(r[n]+l[0],r[n+1]+l[1]),t.lineTo(r[n+2],r[n+3]),t.closePath(),t.fill()}},$P.drawArrowheads=function(e,t,r){var _=t._private.rscratch,n="haystack"===_.edgeType;n||this.drawArrowhead(e,t,"source",_.arrowStartX,_.arrowStartY,_.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",_.midX,_.midY,_.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",_.midX,_.midY,_.midsrcArrowAngle,r),n||this.drawArrowhead(e,t,"target",_.arrowEndX,_.arrowEndY,_.tgtArrowAngle,r)},$P.drawArrowhead=function(e,t,r,_,n,a,i){if(!(isNaN(_)||null==_||isNaN(n)||null==n||isNaN(a)||null==a)){var o=this,l=t.pstyle(r+"-arrow-shape").value;if("none"!==l){var s="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",c=t.pstyle(r+"-arrow-fill").value,u=t.pstyle("width").pfValue,f=t.pstyle(r+"-arrow-width"),d="match-line"===f.value?u:f.pfValue;"%"===f.units&&(d*=u);var p=t.pstyle("opacity").value;void 0===i&&(i=p);var h=e.globalCompositeOperation;1===i&&"hollow"!==c||(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,s,u,l,d,_,n,a),e.globalCompositeOperation=h);var g=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,g[0],g[1],g[2],i),o.colorStrokeStyle(e,g[0],g[1],g[2],i),o.drawArrowShape(t,e,c,u,l,d,_,n,a)}}},$P.drawArrowShape=function(e,t,r,_,n,a,i,o,l){var s,c=this,u=this.usePaths()&&"triangle-cross"!==n,f=!1,d=t,p={x:i,y:o},h=e.pstyle("arrow-scale").value,g=this.getArrowWidth(_,h),v=c.arrowShapes[n];if(u){var m=c.arrowPathCache=c.arrowPathCache||[],y=gm(n),w=m[y];null!=w?(s=t=w,f=!0):(s=t=new Path2D,m[y]=s)}f||(t.beginPath&&t.beginPath(),u?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,g,l,p,_),t.closePath&&t.closePath()),t=d,u&&(t.translate(i,o),t.rotate(l),t.scale(g,g)),"filled"!==r&&"both"!==r||(u?t.fill(s):t.fill()),"hollow"!==r&&"both"!==r||(t.lineWidth=a/(u?g:1),t.lineJoin="miter",u?t.stroke(s):t.stroke()),u&&(t.scale(1/g,1/g),t.rotate(-l),t.translate(-i,-o))};var HP={safeDrawImage:function(e,t,r,_,n,a,i,o,l,s){if(!(n<=0||a<=0||l<=0||s<=0))try{e.drawImage(t,r,_,n,a,i,o,l,s)}catch(e){Sm(e)}},drawInscribedImage:function(e,t,r,_,n){var a=this,i=r.position(),o=i.x,l=i.y,s=r.cy().style(),c=s.getIndexedStyle.bind(s),u=c(r,"background-fit","value",_),f=c(r,"background-repeat","value",_),d=r.width(),p=r.height(),h=2*r.padding(),g=d+("inner"===c(r,"background-width-relative-to","value",_)?0:h),v=p+("inner"===c(r,"background-height-relative-to","value",_)?0:h),m=r._private.rscratch,y="node"===c(r,"background-clip","value",_),w=c(r,"background-image-opacity","value",_)*n,b=c(r,"background-image-smoothing","value",_),k=t.width||t.cachedW,x=t.height||t.cachedH;null!=k&&null!=x||(document.body.appendChild(t),k=t.cachedW=t.width||t.offsetWidth,x=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var O=k,P=x;if("auto"!==c(r,"background-width","value",_)&&(O="%"===c(r,"background-width","units",_)?c(r,"background-width","pfValue",_)*g:c(r,"background-width","pfValue",_)),"auto"!==c(r,"background-height","value",_)&&(P="%"===c(r,"background-height","units",_)?c(r,"background-height","pfValue",_)*v:c(r,"background-height","pfValue",_)),0!==O&&0!==P){if("contain"===u)O*=E=Math.min(g/O,v/P),P*=E;else if("cover"===u){var E;O*=E=Math.max(g/O,v/P),P*=E}var C=o-g/2,A=c(r,"background-position-x","units",_),S=c(r,"background-position-x","pfValue",_);C+="%"===A?(g-O)*S:S;var N=c(r,"background-offset-x","units",_),T=c(r,"background-offset-x","pfValue",_);C+="%"===N?(g-O)*T:T;var L=l-v/2,M=c(r,"background-position-y","units",_),j=c(r,"background-position-y","pfValue",_);L+="%"===M?(v-P)*j:j;var I=c(r,"background-offset-y","units",_),D=c(r,"background-offset-y","pfValue",_);L+="%"===I?(v-P)*D:D,m.pathCache&&(C-=o,L-=l,o=0,l=0);var R=e.globalAlpha;e.globalAlpha=w;var F=a.getImgSmoothing(e),z=!1;if("no"===b&&F?(a.setImgSmoothing(e,!1),z=!0):"yes"!==b||F||(a.setImgSmoothing(e,!0),z=!0),"no-repeat"===f)y&&(e.save(),m.pathCache?e.clip(m.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,g,v),e.clip())),a.safeDrawImage(e,t,0,0,k,x,C,L,O,P),y&&e.restore();else{var B=e.createPattern(t,f);e.fillStyle=B,a.nodeShapes[a.getNodeShape(r)].draw(e,o,l,g,v),e.translate(C,L),e.fill(),e.translate(-C,-L)}e.globalAlpha=R,z&&a.setImgSmoothing(e,F)}}},YP={};function XP(e,t,r,_,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,i=arguments.length>6?arguments[6]:void 0;e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+_-a,r),e.quadraticCurveTo(t+_,r,t+_,r+a),e.lineTo(t+_,r+n-a),e.quadraticCurveTo(t+_,r+n,t+_-a,r+n),e.lineTo(t+a,r+n),e.quadraticCurveTo(t,r+n,t,r+n-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),i?e.stroke():e.fill()}YP.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),_=this.getPixelRatio(),n=Math.ceil(ly(r*_));t=Math.pow(2,n)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},YP.drawElementText=function(e,t,r,_,n){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=this;if(null==_){if(a&&!i.eleTextBiggerThanMin(t))return}else if(!1===_)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var l=i.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var s=t.element()._private.rscratch.badLine,c=t.pstyle("label"),u=t.pstyle("source-label"),f=t.pstyle("target-label");if(s||(!c||!c.value)&&(!u||!u.value)&&(!f||!f.value))return;e.textAlign="center",e.textBaseline="bottom"}var d,p=!r;r&&(d=r,e.translate(-d.x1,-d.y1)),null==n?(i.drawText(e,t,null,p,a),t.isEdge()&&(i.drawText(e,t,"source",p,a),i.drawText(e,t,"target",p,a))):i.drawText(e,t,n,p,a),r&&e.translate(d.x1,d.y1)},YP.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},YP.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],_=t.pstyle("font-style").strValue,n=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,i=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*o,s=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=_+" "+i+" "+n+" "+a,e.lineJoin="round",this.colorFillStyle(e,s[0],s[1],s[2],o),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},YP.getTextAngle=function(e,t){var r=e._private.rscratch,_=t?t+"-":"",n=e.pstyle(_+"text-rotation"),a=Rm(r,"labelAngle",t);return"autorotate"===n.strValue?e.isEdge()?a:0:"none"===n.strValue?0:n.pfValue},YP.drawText=function(e,t,r){var _=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t._private.rscratch,i=n?t.effectiveOpacity():1;if(!n||0!==i&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var o,l,s=Rm(a,"labelX",r),c=Rm(a,"labelY",r),u=this.getLabelText(t,r);if(null!=u&&""!==u&&!isNaN(s)&&!isNaN(c)){this.setupTextStyle(e,t,n);var f,d=r?r+"-":"",p=Rm(a,"labelWidth",r),h=Rm(a,"labelHeight",r),g=t.pstyle(d+"text-margin-x").pfValue,v=t.pstyle(d+"text-margin-y").pfValue,m=t.isEdge(),y=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;switch(m&&(y="center",w="center"),s+=g,c+=v,0!==(f=_?this.getTextAngle(t,r):0)&&(o=s,l=c,e.translate(o,l),e.rotate(f),s=0,c=0),w){case"top":break;case"center":c+=h/2;break;case"bottom":c+=h}var b=t.pstyle("text-background-opacity").value,k=t.pstyle("text-border-opacity").value,x=t.pstyle("text-border-width").pfValue,O=t.pstyle("text-background-padding").pfValue,P=0===t.pstyle("text-background-shape").strValue.indexOf("round");if(b>0||x>0&&k>0){var E=s-O;switch(y){case"left":E-=p;break;case"center":E-=p/2}var C=c-h-O,A=p+2*O,S=h+2*O;if(b>0){var N=e.fillStyle,T=t.pstyle("text-background-color").value;e.fillStyle="rgba("+T[0]+","+T[1]+","+T[2]+","+b*i+")",P?XP(e,E,C,A,S,2):e.fillRect(E,C,A,S),e.fillStyle=N}if(x>0&&k>0){var L=e.strokeStyle,M=e.lineWidth,j=t.pstyle("text-border-color").value,I=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+j[0]+","+j[1]+","+j[2]+","+k*i+")",e.lineWidth=x,e.setLineDash)switch(I){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=x/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(P?XP(e,E,C,A,S,2,"stroke"):e.strokeRect(E,C,A,S),"double"===I){var D=x/2;P?XP(e,E+D,C+D,A-2*D,S-2*D,2,"stroke"):e.strokeRect(E+D,C+D,A-2*D,S-2*D)}e.setLineDash&&e.setLineDash([]),e.lineWidth=M,e.strokeStyle=L}}var R=2*t.pstyle("text-outline-width").pfValue;if(R>0&&(e.lineWidth=R),"wrap"===t.pstyle("text-wrap").value){var F=Rm(a,"labelWrapCachedLines",r),z=Rm(a,"labelLineHeight",r),B=p/2,q=this.getLabelJustification(t);switch("auto"===q||("left"===y?"left"===q?s+=-p:"center"===q&&(s+=-B):"center"===y?"left"===q?s+=-B:"right"===q&&(s+=B):"right"===y&&("center"===q?s+=B:"right"===q&&(s+=p))),w){case"top":case"center":case"bottom":c-=(F.length-1)*z}for(var V=0;V<F.length;V++)R>0&&e.strokeText(F[V],s,c),e.fillText(F[V],s,c),c+=z}else R>0&&e.strokeText(u,s,c),e.fillText(u,s,c);0!==f&&(e.rotate(-f),e.translate(-o,-l))}}};var ZP={drawNode:function(e,t,r){var _,n,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,s=t._private,c=s.rscratch,u=t.position();if(Mv(u.x)&&Mv(u.y)&&(!o||t.visible())){var f,d,p=o?t.effectiveOpacity():1,h=l.usePaths(),g=!1,v=t.padding();_=t.width()+2*v,n=t.height()+2*v,r&&(d=r,e.translate(-d.x1,-d.y1));for(var m=t.pstyle("background-image").value,y=new Array(m.length),w=new Array(m.length),b=0,k=0;k<m.length;k++){var x=m[k];if(y[k]=null!=x&&"none"!==x){var O=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);b++,w[k]=l.getCachedImage(x,O,(function(){s.backgroundTimestamp=Date.now(),t.emitAndNotify("background")}))}}var P=t.pstyle("background-blacken").value,E=t.pstyle("border-width").pfValue,C=t.pstyle("background-opacity").value*p,A=t.pstyle("border-color").value,S=t.pstyle("border-style").value,N=t.pstyle("border-opacity").value*p,T=t.pstyle("outline-width").pfValue,L=t.pstyle("outline-color").value,M=t.pstyle("outline-style").value,j=t.pstyle("outline-opacity").value*p,I=t.pstyle("outline-offset").value;e.lineJoin="miter";var D=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;l.eleFillStyle(e,t,r)},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;l.colorStrokeStyle(e,A[0],A[1],A[2],t)},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;l.colorStrokeStyle(e,L[0],L[1],L[2],t)},z=function(e,t,r,_){var n,a=l.nodePathCache=l.nodePathCache||[],i=vm("polygon"===r?r+","+_.join(","):r,""+t,""+e),o=a[i],s=!1;return null!=o?(n=o,s=!0,c.pathCache=n):(n=new Path2D,a[i]=c.pathCache=n),{path:n,cacheHit:s}},B=t.pstyle("shape").strValue,q=t.pstyle("shape-polygon-points").pfValue;if(h){e.translate(u.x,u.y);var V=z(_,n,B,q);f=V.path,g=V.cacheHit}var G=function(){if(!g){var r=u;h&&(r={x:0,y:0}),l.nodeShapes[l.getNodeShape(t)].draw(f||e,r.x,r.y,_,n)}h?e.fill(f):e.fill()},U=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,_=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=s.backgrounding,a=0,i=0;i<w.length;i++){var o=t.cy().style().getIndexedStyle(t,"background-image-containment","value",i);_&&"over"===o||!_&&"inside"===o?a++:y[i]&&w[i].complete&&!w[i].error&&(a++,l.drawInscribedImage(e,w[i],t,i,r))}s.backgrounding=!(a===b),n!==s.backgrounding&&t.updateStyle(!1)},$=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;l.hasPie(t)&&(l.drawPie(e,t,a),r&&(h||l.nodeShapes[l.getNodeShape(t)].draw(e,u.x,u.y,_,n)))},W=function(){var t=(P>0?P:-P)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p),r=P>0?0:255;0!==P&&(l.colorFillStyle(e,r,r,r,t),h?e.fill(f):e.fill())},H=function(){if(E>0){if(e.lineWidth=E,e.lineCap="butt",e.setLineDash)switch(S){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(h?e.stroke(f):e.stroke(),"double"===S){e.lineWidth=E/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",h?e.stroke(f):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}},Y=function(){if(T>0){if(e.lineWidth=T,e.lineCap="butt",e.setLineDash)switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var r=u;h&&(r={x:0,y:0});var a,i=l.getNodeShape(t),o=(_+E+(T+I))/_,s=(n+E+(T+I))/n,c=_*o,f=n*s,d=l.nodeShapes[i].points;if(h)a=z(c,f,i,d).path;if("ellipse"===i)l.drawEllipsePath(a||e,r.x,r.y,c,f);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(i)){var p=0,g=0,v=0;"round-diamond"===i?p=1.4*(E+I+T):"round-heptagon"===i?(p=1.075*(E+I+T),v=-(E/2+I+T)/35):"round-hexagon"===i?p=1.12*(E+I+T):"round-pentagon"===i?(p=1.13*(E+I+T),v=-(E/2+I+T)/15):"round-tag"===i?(p=1.12*(E+I+T),g=.07*(E/2+T+I)):"round-triangle"===i&&(p=(E+I+T)*(Math.PI/2),v=-(E+I/2+T)/Math.PI),0!==p&&(o=(_+p)/_,s=(n+p)/n),l.drawRoundPolygonPath(a||e,r.x+g,r.y+v,_*o,n*s,d)}else if(["roundrectangle","round-rectangle"].includes(i))l.drawRoundRectanglePath(a||e,r.x,r.y,c,f);else if(["cutrectangle","cut-rectangle"].includes(i))l.drawCutRectanglePath(a||e,r.x,r.y,c,f);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(i))l.drawBottomRoundRectanglePath(a||e,r.x,r.y,c,f);else if("barrel"===i)l.drawBarrelPath(a||e,r.x,r.y,c,f);else if(i.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(i)){d=My(jy(d,(E+T+I)/_)),l.drawPolygonPath(a||e,r.x,r.y,_,n,d)}else{d=My(jy(d,-((E+T+I)/_))),l.drawPolygonPath(a||e,r.x,r.y,_,n,d)}if(h?e.stroke(a):e.stroke(),"double"===M){e.lineWidth=E/3;var m=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",h?e.stroke(a):e.stroke(),e.globalCompositeOperation=m}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var X=t.pstyle("ghost-offset-x").pfValue,Z=t.pstyle("ghost-offset-y").pfValue,K=t.pstyle("ghost-opacity").value,J=K*p;e.translate(X,Z),F(),Y(),D(K*C),G(),U(J,!0),R(K*N),H(),$(0!==P||0!==E),U(J,!1),W(J),e.translate(-X,-Z)}h&&e.translate(-u.x,-u.y),i&&l.drawNodeUnderlay(e,t,u,_,n),h&&e.translate(u.x,u.y),F(),Y(),D(),G(),U(p,!0),R(),H(),$(0!==P||0!==E),U(p,!1),W(),h&&e.translate(-u.x,-u.y),l.drawElementText(e,t,null,a),i&&l.drawNodeOverlay(e,t,u,_,n),r&&e.translate(d.x1,d.y1)}}},KP=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,r,_,n,a){if(r.visible()){var i=r.pstyle("".concat(e,"-padding")).pfValue,o=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,s=r.pstyle("".concat(e,"-shape")).value;if(o>0){if(_=_||r.position(),null==n||null==a){var c=r.padding();n=r.width()+2*c,a=r.height()+2*c}this.colorFillStyle(t,l[0],l[1],l[2],o),this.nodeShapes[s].draw(t,_.x,_.y,n+2*i,a+2*i),t.fill()}}}};ZP.drawNodeOverlay=KP("overlay"),ZP.drawNodeUnderlay=KP("underlay"),ZP.hasPie=function(e){return(e=e[0])._private.hasPie},ZP.drawPie=function(e,t,r,_){t=t[0],_=_||t.position();var n=t.cy().style(),a=t.pstyle("pie-size"),i=_.x,o=_.y,l=t.width(),s=t.height(),c=Math.min(l,s)/2,u=0;this.usePaths()&&(i=0,o=0),"%"===a.units?c*=a.pfValue:void 0!==a.pfValue&&(c=a.pfValue/2);for(var f=1;f<=n.pieBackgroundN;f++){var d=t.pstyle("pie-"+f+"-background-size").value,p=t.pstyle("pie-"+f+"-background-color").value,h=t.pstyle("pie-"+f+"-background-opacity").value*r,g=d/100;g+u>1&&(g=1-u);var v=1.5*Math.PI+2*Math.PI*u,m=v+2*Math.PI*g;0===d||u>=1||u+g>1||(e.beginPath(),e.moveTo(i,o),e.arc(i,o,c,v,m),e.closePath(),this.colorFillStyle(e,p[0],p[1],p[2],h),e.fill(),u+=g)}};var JP={};JP.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},JP.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],_=!0,n=0;n<r.length;n++)if((t=r[n]).context===e){_=!1;break}return _&&(t={context:e},r.push(t)),t},JP.createGradientStyleFor=function(e,t,r,_,n){var a,i=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===_)if(r.isEdge()){var s=r.sourceEndpoint(),c=r.targetEndpoint(),u=r.midpoint(),f=uy(s,u),d=uy(c,u);a=e.createRadialGradient(u.x,u.y,0,u.x,u.y,Math.max(f,d))}else{var p=i?{x:0,y:0}:r.position(),h=r.paddedWidth(),g=r.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(h,g))}else if(r.isEdge()){var v=r.sourceEndpoint(),m=r.targetEndpoint();a=e.createLinearGradient(v.x,v.y,m.x,m.y)}else{var y=i?{x:0,y:0}:r.position(),w=r.paddedWidth()/2,b=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(y.x,y.y-b,y.x,y.y+b);break;case"to-top":a=e.createLinearGradient(y.x,y.y+b,y.x,y.y-b);break;case"to-left":a=e.createLinearGradient(y.x+w,y.y,y.x-w,y.y);break;case"to-right":a=e.createLinearGradient(y.x-w,y.y,y.x+w,y.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(y.x-w,y.y-b,y.x+w,y.y+b);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(y.x-w,y.y+b,y.x+w,y.y-b);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(y.x+w,y.y-b,y.x-w,y.y+b);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(y.x+w,y.y+b,y.x-w,y.y-b)}}if(!a)return null;for(var k=l.length===o.length,x=o.length,O=0;O<x;O++)a.addColorStop(k?l[O]:O/(x-1),"rgba("+o[O][0]+","+o[O][1]+","+o[O][2]+","+n+")");return a},JP.gradientFillStyle=function(e,t,r,_){var n=this.createGradientStyleFor(e,"background",t,r,_);if(!n)return null;e.fillStyle=n},JP.colorFillStyle=function(e,t,r,_,n){e.fillStyle="rgba("+t+","+r+","+_+","+n+")"},JP.eleFillStyle=function(e,t,r){var _=t.pstyle("background-fill").value;if("linear-gradient"===_||"radial-gradient"===_)this.gradientFillStyle(e,t,_,r);else{var n=t.pstyle("background-color").value;this.colorFillStyle(e,n[0],n[1],n[2],r)}},JP.gradientStrokeStyle=function(e,t,r,_){var n=this.createGradientStyleFor(e,"line",t,r,_);if(!n)return null;e.strokeStyle=n},JP.colorStrokeStyle=function(e,t,r,_,n){e.strokeStyle="rgba("+t+","+r+","+_+","+n+")"},JP.eleStrokeStyle=function(e,t,r){var _=t.pstyle("line-fill").value;if("linear-gradient"===_||"radial-gradient"===_)this.gradientStrokeStyle(e,t,_,r);else{var n=t.pstyle("line-color").value;this.colorStrokeStyle(e,n[0],n[1],n[2],r)}},JP.matchCanvasSize=function(e){var t=this,r=t.data,_=t.findContainerClientCoords(),n=_[2],a=_[3],i=t.getPixelRatio(),o=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(i=o);var l,s=n*i,c=a*i;if(s!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var u=r.canvasContainer;u.style.width=n+"px",u.style.height=a+"px";for(var f=0;f<t.CANVAS_LAYERS;f++)(l=r.canvases[f]).width=s,l.height=c,l.style.width=n+"px",l.style.height=a+"px";for(f=0;f<t.BUFFER_COUNT;f++)(l=r.bufferCanvases[f]).width=s,l.height=c,l.style.width=n+"px",l.style.height=a+"px";t.textureMult=1,i<=1&&(l=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=s*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=s,t.canvasHeight=c}},JP.renderTo=function(e,t,r,_){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:_})},JP.render=function(e){var t=(e=e||Mm()).forcedContext,r=e.drawAllLayers,_=e.drawOnlyNodeLayer,n=e.forcedZoom,a=e.forcedPan,i=this,o=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,l=i.cy,s=i.data,c=s.canvasNeedsRedraw,u=i.textureOnViewport&&!t&&(i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming),f=void 0!==e.motionBlur?e.motionBlur:i.motionBlur,d=i.motionBlurPxRatio,p=l.hasCompoundNodes(),h=i.hoverData.draggingEles,g=!(!i.hoverData.selecting&&!i.touchData.selecting),v=f=f&&!t&&i.motionBlurEnabled&&!g;t||(i.prevPxRatio!==o&&(i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.container),i.redrawHint("eles",!0),i.redrawHint("drag",!0)),i.prevPxRatio=o),!t&&i.motionBlurTimeout&&clearTimeout(i.motionBlurTimeout),f&&(null==i.mbFrames&&(i.mbFrames=0),i.mbFrames++,i.mbFrames<3&&(v=!1),i.mbFrames>i.minMbLowQualFrames&&(i.motionBlurPxRatio=i.mbPxRBlurry)),i.clearingMotionBlur&&(i.motionBlurPxRatio=1),i.textureDrawLastFrame&&!u&&(c[i.NODE]=!0,c[i.SELECT_BOX]=!0);var m=l.style(),y=l.zoom(),w=void 0!==n?n:y,b=l.pan(),k={x:b.x,y:b.y},x={zoom:y,pan:{x:b.x,y:b.y}},O=i.prevViewport;void 0===O||x.zoom!==O.zoom||x.pan.x!==O.pan.x||x.pan.y!==O.pan.y||h&&!p||(i.motionBlurPxRatio=1),a&&(k=a),w*=o,k.x*=o,k.y*=o;var P=i.getCachedZSortedEles();function E(e,t,r,_,n){var a=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",i.colorFillStyle(e,255,255,255,i.motionBlurTransparency),e.fillRect(t,r,_,n),e.globalCompositeOperation=a}function C(e,_){var o,l,c,u;i.clearingMotionBlur||e!==s.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]&&e!==s.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]?(o=k,l=w,c=i.canvasWidth,u=i.canvasHeight):(o={x:b.x*d,y:b.y*d},l=y*d,c=i.canvasWidth*d,u=i.canvasHeight*d),e.setTransform(1,0,0,1,0,0),"motionBlur"===_?E(e,0,0,c,u):t||void 0!==_&&!_||e.clearRect(0,0,c,u),r||(e.translate(o.x,o.y),e.scale(l,l)),a&&e.translate(a.x,a.y),n&&e.scale(n,n)}if(u||(i.textureDrawLastFrame=!1),u){if(i.textureDrawLastFrame=!0,!i.textureCache){i.textureCache={},i.textureCache.bb=l.mutableElements().boundingBox(),i.textureCache.texture=i.data.bufferCanvases[i.TEXTURE_BUFFER];var A=i.data.bufferContexts[i.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,i.canvasWidth*i.textureMult,i.canvasHeight*i.textureMult),i.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:o*i.textureMult}),(x=i.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:i.canvasWidth,height:i.canvasHeight}).mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[i.DRAG]=!1,c[i.NODE]=!1;var S=s.contexts[i.NODE],N=i.textureCache.texture;x=i.textureCache.viewport;S.setTransform(1,0,0,1,0,0),f?E(S,0,0,x.width,x.height):S.clearRect(0,0,x.width,x.height);var T=m.core("outside-texture-bg-color").value,L=m.core("outside-texture-bg-opacity").value;i.colorFillStyle(S,T[0],T[1],T[2],L),S.fillRect(0,0,x.width,x.height);y=l.zoom();C(S,!1),S.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/o,x.height/x.zoom/o),S.drawImage(N,x.mpan.x,x.mpan.y,x.width/x.zoom/o,x.height/x.zoom/o)}else i.textureOnViewport&&!t&&(i.textureCache=null);var M=l.extent(),j=i.pinching||i.hoverData.dragging||i.swipePanning||i.data.wheelZooming||i.hoverData.draggingEles||i.cy.animated(),I=i.hideEdgesOnViewport&&j,D=[];if(D[i.NODE]=!c[i.NODE]&&f&&!i.clearedForMotionBlur[i.NODE]||i.clearingMotionBlur,D[i.NODE]&&(i.clearedForMotionBlur[i.NODE]=!0),D[i.DRAG]=!c[i.DRAG]&&f&&!i.clearedForMotionBlur[i.DRAG]||i.clearingMotionBlur,D[i.DRAG]&&(i.clearedForMotionBlur[i.DRAG]=!0),c[i.NODE]||r||_||D[i.NODE]){var R=f&&!D[i.NODE]&&1!==d;C(S=t||(R?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_NODE]:s.contexts[i.NODE]),f&&!R?"motionBlur":void 0),I?i.drawCachedNodes(S,P.nondrag,o,M):i.drawLayeredElements(S,P.nondrag,o,M),i.debug&&i.drawDebugPoints(S,P.nondrag),r||f||(c[i.NODE]=!1)}if(!_&&(c[i.DRAG]||r||D[i.DRAG])){R=f&&!D[i.DRAG]&&1!==d;C(S=t||(R?i.data.bufferContexts[i.MOTIONBLUR_BUFFER_DRAG]:s.contexts[i.DRAG]),f&&!R?"motionBlur":void 0),I?i.drawCachedNodes(S,P.drag,o,M):i.drawCachedElements(S,P.drag,o,M),i.debug&&i.drawDebugPoints(S,P.drag),r||f||(c[i.DRAG]=!1)}if(i.showFps||!_&&c[i.SELECT_BOX]&&!r){if(C(S=t||s.contexts[i.SELECT_BOX]),1==i.selection[4]&&(i.hoverData.selecting||i.touchData.selecting)){y=i.cy.zoom();var F=m.core("selection-box-border-width").value/y;S.lineWidth=F,S.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",S.fillRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]),F>0&&(S.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",S.strokeRect(i.selection[0],i.selection[1],i.selection[2]-i.selection[0],i.selection[3]-i.selection[1]))}if(s.bgActivePosistion&&!i.hoverData.selecting){y=i.cy.zoom();var z=s.bgActivePosistion;S.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",S.beginPath(),S.arc(z.x,z.y,m.core("active-bg-size").pfValue/y,0,2*Math.PI),S.fill()}var B=i.lastRedrawTime;if(i.showFps&&B){B=Math.round(B);var q=Math.round(1e3/B);S.setTransform(1,0,0,1,0,0),S.fillStyle="rgba(255, 0, 0, 0.75)",S.strokeStyle="rgba(255, 0, 0, 0.75)",S.lineWidth=1,S.fillText("1 frame = "+B+" ms = "+q+" fps",0,20);S.strokeRect(0,30,250,20),S.fillRect(0,30,250*Math.min(q/60,1),20)}r||(c[i.SELECT_BOX]=!1)}if(f&&1!==d){var V=s.contexts[i.NODE],G=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_NODE],U=s.contexts[i.DRAG],$=i.data.bufferCanvases[i.MOTIONBLUR_BUFFER_DRAG],W=function(e,t,r){e.setTransform(1,0,0,1,0,0),r||!v?e.clearRect(0,0,i.canvasWidth,i.canvasHeight):E(e,0,0,i.canvasWidth,i.canvasHeight);var _=d;e.drawImage(t,0,0,i.canvasWidth*_,i.canvasHeight*_,0,0,i.canvasWidth,i.canvasHeight)};(c[i.NODE]||D[i.NODE])&&(W(V,G,D[i.NODE]),c[i.NODE]=!1),(c[i.DRAG]||D[i.DRAG])&&(W(U,$,D[i.DRAG]),c[i.DRAG]=!1)}i.prevViewport=x,i.clearingMotionBlur&&(i.clearingMotionBlur=!1,i.motionBlurCleared=!0,i.motionBlur=!0),f&&(i.motionBlurTimeout=setTimeout((function(){i.motionBlurTimeout=null,i.clearedForMotionBlur[i.NODE]=!1,i.clearedForMotionBlur[i.DRAG]=!1,i.motionBlur=!1,i.clearingMotionBlur=!u,i.mbFrames=0,c[i.NODE]=!0,c[i.DRAG]=!0,i.redraw()}),100)),t||l.emit("render")};for(var QP={drawPolygonPath:function(e,t,r,_,n,a){var i=_/2,o=n/2;e.beginPath&&e.beginPath(),e.moveTo(t+i*a[0],r+o*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+i*a[2*l],r+o*a[2*l+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,_,n,a){var i=_/2,o=n/2,l=$y(_,n);e.beginPath&&e.beginPath();for(var s=0;s<a.length/4;s++){var c,u=void 0;u=0===s?a.length-2:4*s-2,c=4*s+2;var f=t+i*a[4*s],d=r+o*a[4*s+1],p=-a[u]*a[c]-a[u+1]*a[c+1],h=l/Math.tan(Math.acos(p)/2),g=f-h*a[u],v=d-h*a[u+1],m=f+h*a[c],y=d+h*a[c+1];0===s?e.moveTo(g,v):e.lineTo(g,v),e.arcTo(f,d,m,y,l)}e.closePath()},drawRoundRectanglePath:function(e,t,r,_,n){var a=_/2,i=n/2,o=Uy(_,n);e.beginPath&&e.beginPath(),e.moveTo(t,r-i),e.arcTo(t+a,r-i,t+a,r,o),e.arcTo(t+a,r+i,t,r+i,o),e.arcTo(t-a,r+i,t-a,r,o),e.arcTo(t-a,r-i,t,r-i,o),e.lineTo(t,r-i),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,_,n){var a=_/2,i=n/2,o=Uy(_,n);e.beginPath&&e.beginPath(),e.moveTo(t,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r),e.arcTo(t+a,r+i,t,r+i,o),e.arcTo(t-a,r+i,t-a,r,o),e.lineTo(t-a,r-i),e.lineTo(t,r-i),e.closePath()},drawCutRectanglePath:function(e,t,r,_,n){var a=_/2,i=n/2;e.beginPath&&e.beginPath(),e.moveTo(t-a+8,r-i),e.lineTo(t+a-8,r-i),e.lineTo(t+a,r-i+8),e.lineTo(t+a,r+i-8),e.lineTo(t+a-8,r+i),e.lineTo(t-a+8,r+i),e.lineTo(t-a,r+i-8),e.lineTo(t-a,r-i+8),e.closePath()},drawBarrelPath:function(e,t,r,_,n){var a=_/2,i=n/2,o=t-a,l=t+a,s=r-i,c=r+i,u=Wy(_,n),f=u.widthOffset,d=u.heightOffset,p=u.ctrlPtOffsetPct*f;e.beginPath&&e.beginPath(),e.moveTo(o,s+d),e.lineTo(o,c-d),e.quadraticCurveTo(o+p,c,o+f,c),e.lineTo(l-f,c),e.quadraticCurveTo(l-p,c,l,c-d),e.lineTo(l,s+d),e.quadraticCurveTo(l-p,s,l-f,s),e.lineTo(o+f,s),e.quadraticCurveTo(o+p,s,o,s+d),e.closePath()}},eE=Math.sin(0),tE=Math.cos(0),rE={},_E={},nE=Math.PI/40,aE=0*Math.PI;aE<2*Math.PI;aE+=nE)rE[aE]=Math.sin(aE),_E[aE]=Math.cos(aE);QP.drawEllipsePath=function(e,t,r,_,n){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,_/2,n/2,0,0,2*Math.PI);else for(var a,i,o=_/2,l=n/2,s=0*Math.PI;s<2*Math.PI;s+=nE)a=t-o*rE[s]*eE+o*_E[s]*tE,i=r+l*_E[s]*eE+l*rE[s]*tE,0===s?e.moveTo(a,i):e.lineTo(a,i);e.closePath()};var iE={};function oE(e){var t=e.indexOf(",");return e.substr(t+1)}function lE(e,t,r){var _=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new nb((function(_,n){try{t.toBlob((function(e){null!=e?_(e):n(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,e.quality)}catch(e){n(e)}}));case"blob":return function(e,t){for(var r=atob(e),_=new ArrayBuffer(r.length),n=new Uint8Array(_),a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return new Blob([_],{type:t})}(oE(_()),r);case"base64":return oE(_());default:return _()}}iE.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},iE.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),_=this.findContainerClientCoords(),n=e.full?Math.ceil(r.w):_[2],a=e.full?Math.ceil(r.h):_[3],i=Mv(e.maxWidth)||Mv(e.maxHeight),o=this.getPixelRatio(),l=1;if(void 0!==e.scale)n*=e.scale,a*=e.scale,l=e.scale;else if(i){var s=1/0,c=1/0;Mv(e.maxWidth)&&(s=l*e.maxWidth/n),Mv(e.maxHeight)&&(c=l*e.maxHeight/a),n*=l=Math.min(s,c),a*=l}i||(n*=o,a*=o,l*=o);var u=document.createElement("canvas");u.width=n,u.height=a,u.style.width=n+"px",u.style.height=a+"px";var f=u.getContext("2d");if(n>0&&a>0){f.clearRect(0,0,n,a),f.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(e.full)f.translate(-r.x1*l,-r.y1*l),f.scale(l,l),this.drawElements(f,d),f.scale(1/l,1/l),f.translate(r.x1*l,r.y1*l);else{var p=t.pan(),h={x:p.x*l,y:p.y*l};l*=t.zoom(),f.translate(h.x,h.y),f.scale(l,l),this.drawElements(f,d),f.scale(1/l,1/l),f.translate(-h.x,-h.y)}e.bg&&(f.globalCompositeOperation="destination-over",f.fillStyle=e.bg,f.rect(0,0,n,a),f.fill())}return u},iE.png=function(e){return lE(e,this.bufferCanvasImage(e),"image/png")},iE.jpg=function(e){return lE(e,this.bufferCanvasImage(e),"image/jpeg")};var sE={nodeShapeImpl:function(e,t,r,_,n,a,i){switch(e){case"ellipse":return this.drawEllipsePath(t,r,_,n,a);case"polygon":return this.drawPolygonPath(t,r,_,n,a,i);case"round-polygon":return this.drawRoundPolygonPath(t,r,_,n,a,i);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,_,n,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,_,n,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,_,n,a);case"barrel":return this.drawBarrelPath(t,r,_,n,a)}}},cE=fE,uE=fE.prototype;function fE(e){var t=this;t.data={canvases:new Array(uE.CANVAS_LAYERS),contexts:new Array(uE.CANVAS_LAYERS),canvasNeedsRedraw:new Array(uE.CANVAS_LAYERS),bufferCanvases:new Array(uE.BUFFER_COUNT),bufferContexts:new Array(uE.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",_="rgba(0,0,0,0)";t.data.canvasContainer=document.createElement("div");var n=t.data.canvasContainer.style;t.data.canvasContainer.style[r]=_,n.position="relative",n.zIndex="0",n.overflow="hidden";var a=e.cy.container();a.appendChild(t.data.canvasContainer),a.style[r]=_;var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};xv&&xv.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var o=0;o<uE.CANVAS_LAYERS;o++){var l=t.data.canvases[o]=document.createElement("canvas");t.data.contexts[o]=l.getContext("2d"),Object.keys(i).forEach((function(e){l.style[e]=i[e]})),l.style.position="absolute",l.setAttribute("data-id","layer"+o),l.style.zIndex=String(uE.CANVAS_LAYERS-o),t.data.canvasContainer.appendChild(l),t.data.canvasNeedsRedraw[o]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[uE.NODE].setAttribute("data-id","layer"+uE.NODE+"-node"),t.data.canvases[uE.SELECT_BOX].setAttribute("data-id","layer"+uE.SELECT_BOX+"-selectbox"),t.data.canvases[uE.DRAG].setAttribute("data-id","layer"+uE.DRAG+"-drag");for(o=0;o<uE.BUFFER_COUNT;o++)t.data.bufferCanvases[o]=document.createElement("canvas"),t.data.bufferContexts[o]=t.data.bufferCanvases[o].getContext("2d"),t.data.bufferCanvases[o].style.position="absolute",t.data.bufferCanvases[o].setAttribute("data-id","buffer"+o),t.data.bufferCanvases[o].style.zIndex=String(-o-1),t.data.bufferCanvases[o].style.visibility="hidden";t.pathsEnabled=!0;var s=vy(),c=function(e){return{x:-e.w/2,y:-e.h/2}},u=function(e){return e.boundingBox(),e[0]._private.bodyBounds},f=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||s},d=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||s},p=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||s},h=function(e,t){return t},g=function(e,t,r){var _=e?e+"-":"";return{x:t.x+r.pstyle(_+"text-margin-x").pfValue,y:t.y+r.pstyle(_+"text-margin-y").pfValue}},v=function(e,t,r){var _=e[0]._private.rscratch;return{x:_[t],y:_[r]}},m=t.data.eleTxrCache=new PP(t,{getKey:function(e){return e[0]._private.nodeKey},doesEleInvalidateKey:function(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:function(e,r,_,n,a){return t.drawElement(e,r,_,!1,!1,a)},getBoundingBox:u,getRotationPoint:function(e){return{x:((t=u(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2};var t},getRotationOffset:function(e){return c(u(e))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),y=t.data.lblTxrCache=new PP(t,{getKey:function(e){return e[0]._private.labelStyleKey},drawElement:function(e,r,_,n,a){return t.drawElementText(e,r,_,n,"main",a)},getBoundingBox:f,getRotationPoint:function(e){return g("",v(e,"labelX","labelY"),e)},getRotationOffset:function(e){var t=f(e),r=c(f(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w;break;case"right":r.x=0}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h;break;case"bottom":r.y=0}}return r},isVisible:h}),w=t.data.slbTxrCache=new PP(t,{getKey:function(e){return e[0]._private.sourceLabelStyleKey},drawElement:function(e,r,_,n,a){return t.drawElementText(e,r,_,n,"source",a)},getBoundingBox:d,getRotationPoint:function(e){return g("source",v(e,"sourceLabelX","sourceLabelY"),e)},getRotationOffset:function(e){return c(d(e))},isVisible:h}),b=t.data.tlbTxrCache=new PP(t,{getKey:function(e){return e[0]._private.targetLabelStyleKey},drawElement:function(e,r,_,n,a){return t.drawElementText(e,r,_,n,"target",a)},getBoundingBox:p,getRotationPoint:function(e){return g("target",v(e,"targetLabelX","targetLabelY"),e)},getRotationOffset:function(e){return c(p(e))},isVisible:h}),k=t.data.lyrTxrCache=new CP(t);t.onUpdateEleCalcs((function(e,t){m.invalidateElements(t),y.invalidateElements(t),w.invalidateElements(t),b.invalidateElements(t),k.invalidateElements(t);for(var r=0;r<t.length;r++){var _=t[r]._private;_.oldBackgroundTimestamp=_.backgroundTimestamp}}));var x=function(e){for(var t=0;t<e.length;t++)k.enqueueElementRefinement(e[t].ele)};m.onDequeue(x),y.onDequeue(x),w.onDequeue(x),b.onDequeue(x)}uE.CANVAS_LAYERS=3,uE.SELECT_BOX=0,uE.DRAG=1,uE.NODE=2,uE.BUFFER_COUNT=3,uE.TEXTURE_BUFFER=0,uE.MOTIONBLUR_BUFFER_NODE=1,uE.MOTIONBLUR_BUFFER_DRAG=2,uE.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[uE.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[uE.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[uE.SELECT_BOX]=t}};var dE="undefined"!=typeof Path2D;uE.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},uE.usePaths=function(){return dE&&this.pathsEnabled},uE.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},uE.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},uE.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":hv(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=document.createElement("canvas")).width=e,r.height=t),r},[LP,FP,$P,HP,YP,ZP,JP,QP,iE,sE].forEach((function(e){Qv(uE,e)}));var pE=[{type:"layout",extensions:HO},{type:"renderer",extensions:[{name:"null",impl:YO},{name:"base",impl:mP},{name:"canvas",impl:cE}]}],hE={},gE={};function vE(e,t,r){var _=r,n=function(r){Sm("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===e){if(iO.prototype[t])return n(t);iO.prototype[t]=r}else if("collection"===e){if(kx.prototype[t])return n(t);kx.prototype[t]=r}else if("layout"===e){for(var a=function(e){this.options=e,r.call(this,e),Lv(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},i=a.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var s=o[l];i[s]=i[s]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var c=r.prototype.stop;i.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var u=function(e){return e._private.cy},f={addEventFields:function(e,t){t.layout=e,t.cy=u(e),t.target=e},bubble:function(){return!0},parent:function(e){return u(e)}};Qv(i,{createEmitter:function(){return this._private.emitter=new Bk(f,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),ob.eventAliasesOn(i),_=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var d=mE("renderer","base"),p=d.prototype,h=r,g=r.prototype,v=function(){d.apply(this,arguments),h.apply(this,arguments)},m=v.prototype;for(var y in p){var w=p[y];if(null!=g[y])return n(y);m[y]=w}for(var b in g)m[b]=g[b];p.clientFunctions.forEach((function(e){m[e]=m[e]||function(){Cm("Renderer does not implement `renderer."+e+"()` on its prototype")}})),_=v}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Cm(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return rm({map:hE,keys:[e,t],value:_})}function mE(e,t){return _m({map:hE,keys:[e,t]})}function yE(e,t,r,_,n){return rm({map:gE,keys:[e,t,r,_],value:n})}function wE(e,t,r,_){return _m({map:gE,keys:[e,t,r,_]})}var bE=function(){return 2===arguments.length?mE.apply(null,arguments):3===arguments.length?vE.apply(null,arguments):4===arguments.length?wE.apply(null,arguments):5===arguments.length?yE.apply(null,arguments):void Cm("Invalid extension access syntax")};iO.prototype.extension=bE,pE.forEach((function(e){e.extensions.forEach((function(t){vE(e.type,t.name,t.impl)}))}));var kE=function e(){if(!(this instanceof e))return new e;this.length=0},xE=kE.prototype;xE.instanceString=function(){return"stylesheet"},xE.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},xE.css=function(e,t){var r=this.length-1;if(Sv(e))this[r].properties.push({name:e,value:t});else if(Lv(e))for(var _=e,n=Object.keys(_),a=0;a<n.length;a++){var i=n[a],o=_[i];if(null!=o){var l=tO.properties[i]||tO.properties[Uv(i)];if(null!=l){var s=l.name,c=o;this[r].properties.push({name:s,value:c})}}}return this},xE.style=xE.css,xE.generateStyle=function(e){var t=new tO(e);return this.appendToStyle(t)},xE.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],_=r.selector,n=r.properties;e.selector(_);for(var a=0;a<n.length;a++){var i=n[a];e.css(i.name,i.value)}}return e};var OE=function(e){return void 0===e&&(e={}),Lv(e)?new iO(e):Sv(e)?bE.apply(bE,arguments):void 0};OE.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(OE),e.apply(null,t),this},OE.warnings=function(e){return Am(e)},OE.version="3.28.1",OE.stylesheet=OE.Stylesheet=kE,Eg=OE;var PE={};PE=(e=>{return t={432:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),_=1;_<t;_++)r[_-1]=arguments[_];return r.forEach((function(t){Object.keys(t).forEach((function(r){return e[r]=t[r]}))})),e}},602:(e,t,r)=>{var _=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_=!0,n=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(_=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);_=!0);}catch(e){n=!0,a=e}finally{try{!_&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=r(625).layoutBase.LinkedList,a={getTopMostNodes:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].id()]=!0;var _=e.filter((function(e,r){"number"==typeof e&&(e=r);for(var _=e.parent()[0];null!=_;){if(t[_.id()])return!1;_=_.parent()[0]}return!0}));return _},connectComponents:function(e,t,r,_){var a=new n,i=new Set,o=[],l=void 0,s=void 0,c=void 0,u=!1,f=1,d=[],p=[],h=function(){var _=e.collection();p.push(_);var n=r[0],h=e.collection();h.merge(n).merge(n.descendants().intersection(t)),o.push(n),h.forEach((function(e){a.push(e),i.add(e),_.merge(e)}));for(var g=function(){n=a.shift();var s=e.collection();n.neighborhood().nodes().forEach((function(e){t.intersection(n.edgesWith(e)).length>0&&s.merge(e)}));for(var c=0;c<s.length;c++){var u=s[c];null==(l=r.intersection(u.union(u.ancestors())))||i.has(l[0])||l.union(l.descendants()).forEach((function(e){a.push(e),i.add(e),_.merge(e),r.has(e)&&o.push(e)}))}};0!=a.length;)g();if(_.forEach((function(e){t.intersection(e.connectedEdges()).forEach((function(e){_.has(e.source())&&_.has(e.target())&&_.merge(e)}))})),o.length==r.length&&(u=!0),!u||u&&f>1){s=o[0],c=s.connectedEdges().length,o.forEach((function(e){e.connectedEdges().length<c&&(c=e.connectedEdges().length,s=e)})),d.push(s.id());var v=e.collection();v.merge(o[0]),o.forEach((function(e){v.merge(e)})),o=[],r=r.difference(v),f++}};do{h()}while(!u);return _&&d.length>0&&_.set("dummy"+(_.size+1),d),p},relocateComponent:function(e,t,r){if(!r.fixedNodeConstraint){var n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if("draft"==r.quality){var l=!0,s=!1,c=void 0;try{for(var u,f=t.nodeIndexes[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var d=u.value,p=_(d,2),h=p[0],g=p[1],v=r.cy.getElementById(h);if(v){var m=v.boundingBox(),y=t.xCoords[g]-m.w/2,w=t.xCoords[g]+m.w/2,b=t.yCoords[g]-m.h/2,k=t.yCoords[g]+m.h/2;y<n&&(n=y),w>a&&(a=w),b<i&&(i=b),k>o&&(o=k)}}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}var x=e.x-(a+n)/2,O=e.y-(o+i)/2;t.xCoords=t.xCoords.map((function(e){return e+x})),t.yCoords=t.yCoords.map((function(e){return e+O}))}else{Object.keys(t).forEach((function(e){var r=t[e],_=r.getRect().x,l=r.getRect().x+r.getRect().width,s=r.getRect().y,c=r.getRect().y+r.getRect().height;_<n&&(n=_),l>a&&(a=l),s<i&&(i=s),c>o&&(o=c)}));var P=e.x-(a+n)/2,E=e.y-(o+i)/2;Object.keys(t).forEach((function(e){var r=t[e];r.setCenter(r.getCenterX()+P,r.getCenterY()+E)}))}}},calcBoundingBox:function(e,t,r,_){for(var n=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,l=void 0,s=void 0,c=void 0,u=void 0,f=e.descendants().not(":parent"),d=f.length,p=0;p<d;p++){var h=f[p];n>(l=t[_.get(h.id())]-h.width()/2)&&(n=l),a<(s=t[_.get(h.id())]+h.width()/2)&&(a=s),i>(c=r[_.get(h.id())]-h.height()/2)&&(i=c),o<(u=r[_.get(h.id())]+h.height()/2)&&(o=u)}var g={};return g.topLeftX=n,g.topLeftY=i,g.width=a-n,g.height=o-i,g},calcParentsWithoutChildren:function(e,t){var r=e.collection();return t.nodes(":parent").forEach((function(e){var t=!1;e.children().forEach((function(e){"none"!=e.css("display")&&(t=!0)})),t||r.merge(e)})),r}};e.exports=a},455:e=>{function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var r=function(e){for(var r=[],_=!0,n=e.nodes(),a=!0,i=0;i<n.length;i++)n[i].parent().length>0&&(a=!1);if(!a)return r;if(e.nodes().filter((function(e){return e.incomers().edges().length>1})).length>1)return r;var o=new Set,l=[],s=new Map,c=cy.collection(),u=[];c=(c=c.merge(n)).toArray();for(var f=e.nodes().filter((function(e){return 0==e.incomers().length})).toArray();c.length>0&&f.length>0&&_;){l.push([f[0],0]),f.splice(0,1);for(var d=new Map;l.length>0&&_;){var p=l[0][0],h=l[0][1];l.splice(0,1),o.add(p),d.has(h)||d.set(h,[]),d.get(h).push(p.id());var g=p.neighborhood().nodes();for(i=0;i<g.length;i++){var v=g[i];if(s.get(p)!=v){if(o.has(v)){_=!1;break}l.push([v,h+1]),s.set(v,p)}}}if(_){var m=[].concat(t(o));for(r.push(m),u.push(d),i=0;i<m.length;i++){var y=m[i],w=c.indexOf(y);w>-1&&c.splice(w,1)}o=new Set,s=new Map,d=new Map}else r=[]}return{flatForest:r,levelOrders:u}};e.exports={handleTreeConstraint:function(e){e.cy;var t=e.eles,_=e.treeConstraint,n=r(t).levelOrders;if(0!=n.length){var a={};"L-R"==_.direction||"R-L"==_.direction?(a.vertical=[],n.forEach((function(e){e.forEach((function(e,t,r){e.length>1&&a.vertical.push(e)}))}))):(a.horizontal=[],n.forEach((function(e){e.forEach((function(e,t,r){e.length>1&&a.horizontal.push(e)}))})));var i=[];return t.edges().forEach((function(e){"L-R"==_.direction?i.push({left:e.source().id(),right:e.target().id(),gap:_.gap}):"R-L"==_.direction?i.push({left:e.target().id(),right:e.source().id(),gap:_.gap}):"T-B"==_.direction?i.push({top:e.source().id(),bottom:e.target().id(),gap:_.gap}):"B-T"==_.direction?i.push({top:e.target().id(),bottom:e.source().id(),gap:_.gap}):console.log("Invalid direction")})),n.forEach((function(e){e.forEach((function(e,t,r){if(e.length>1)for(var n=0;n<e.length-1;n++)"L-R"==_.direction?i.push({bottom:e[n],top:e[n+1],gap:_.gap}):"R-L"==_.direction?i.push({top:e[n],bottom:e[n+1],gap:_.gap}):"T-B"==_.direction?i.push({left:e[n],right:e[n+1],gap:_.gap}):"B-T"==_.direction?i.push({right:e[n],left:e[n+1],gap:_.gap}):console.log("Invalid direction")}))})),{alignmentConstarint:a,relativePlacementConstraint:i}}console.log("Given graph/component is not a tree/forest!")}}},126:(e,t,r)=>{var _=r(602),n=r(625).CoSELayout,a=r(625).CoSENode,i=r(625).layoutBase.PointD,o=r(625).layoutBase.DimensionD,l=r(625).layoutBase.LayoutConstants,s=r(625).layoutBase.FDLayoutConstants,c=r(625).CoSEConstants;e.exports={coseLayout:function(e,t){var r=e.cy,u=e.eles,f=u.nodes(),d=u.edges(),p=void 0,h=void 0,g=void 0,v={};e.randomize&&(p=t.nodeIndexes,h=t.xCoords,g=t.yCoords);var m=function(e){return"function"==typeof e},y=function(e,t){return m(e)?e(t):e},w=_.calcParentsWithoutChildren(r,u);null!=e.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(c.MAX_ITERATIONS=s.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),null!=e.tilingCompareBy&&(c.TILING_COMPARE_BY=e.tilingCompareBy),"proof"==e.quality?l.QUALITY=2:l.QUALITY=0,c.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=l.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!e.randomize,c.ANIMATE=s.ANIMATE=l.ANIMATE=e.animate,c.TILE=e.tile,c.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=l.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!e.randomize,l.DEFAULT_UNIFORM_LEAF_NODE_SIZES=e.uniformNodeDimensions,"transformed"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),"enforced"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),"cose"==e.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),"all"==e.step&&(e.randomize?c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint?c.TREE_REDUCTION_ON_INCREMENTAL=!1:c.TREE_REDUCTION_ON_INCREMENTAL=!0;var b=new n,k=b.newGraphManager();return function e(t,r,n,l){for(var s=r.length,c=0;c<s;c++){var u=r[c],f=null;0==u.intersection(w).length&&(f=u.children());var d=void 0,m=u.layoutDimensions({nodeDimensionsIncludeLabels:l.nodeDimensionsIncludeLabels});if(null!=u.outerWidth()&&null!=u.outerHeight())if(l.randomize)if(u.isParent()){var b=_.calcBoundingBox(u,h,g,p);d=0==u.intersection(w).length?t.add(new a(n.graphManager,new i(b.topLeftX,b.topLeftY),new o(b.width,b.height))):t.add(new a(n.graphManager,new i(b.topLeftX,b.topLeftY),new o(parseFloat(m.w),parseFloat(m.h))))}else d=t.add(new a(n.graphManager,new i(h[p.get(u.id())]-m.w/2,g[p.get(u.id())]-m.h/2),new o(parseFloat(m.w),parseFloat(m.h))));else d=t.add(new a(n.graphManager,new i(u.position("x")-m.w/2,u.position("y")-m.h/2),new o(parseFloat(m.w),parseFloat(m.h))));else d=t.add(new a(this.graphManager));d.id=u.data("id"),d.nodeRepulsion=y(l.nodeRepulsion,u),d.paddingLeft=parseInt(u.css("padding")),d.paddingTop=parseInt(u.css("padding")),d.paddingRight=parseInt(u.css("padding")),d.paddingBottom=parseInt(u.css("padding")),l.nodeDimensionsIncludeLabels&&(d.labelWidth=u.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,d.labelHeight=u.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,d.labelPosVertical=u.css("text-valign"),d.labelPosHorizontal=u.css("text-halign")),v[u.data("id")]=d,isNaN(d.rect.x)&&(d.rect.x=0),isNaN(d.rect.y)&&(d.rect.y=0),null!=f&&f.length>0&&e(n.getGraphManager().add(n.newGraph(),d),f,n,l)}}(k.addRoot(),_.getTopMostNodes(f),b,e),function(t,r,_){for(var n=0,a=0,i=0;i<_.length;i++){var o=_[i],l=v[o.data("source")],u=v[o.data("target")];if(l&&u&&l!==u&&0==l.getEdgesBetween(u).length){var f=r.add(t.newEdge(),l,u);f.id=o.id(),f.idealLength=y(e.idealEdgeLength,o),f.edgeElasticity=y(e.edgeElasticity,o),n+=f.idealLength,a++}}null!=e.idealEdgeLength&&(a>0?c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=n/a:m(e.idealEdgeLength)?c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=50:c.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=e.idealEdgeLength,c.MIN_REPULSION_DIST=s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH)}(b,k,d),function(e,t){t.fixedNodeConstraint&&(e.constraints.fixedNodeConstraint=t.fixedNodeConstraint),t.alignmentConstraint&&(e.constraints.alignmentConstraint=t.alignmentConstraint),t.relativePlacementConstraint&&(e.constraints.relativePlacementConstraint=t.relativePlacementConstraint)}(b,e),b.runLayout(),v}}},770:(e,t,r)=>{var _=function(){function e(e,t){for(var r=0;r<t.length;r++){var _=t[r];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}return function(t,r,_){return r&&e(t.prototype,r),_&&e(t,_),t}}(),n=r(432),a=r(602),i=r(455).handleTreeConstraint,o=r(208).spectralLayout,l=r(126).coseLayout,s=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(e){return 4500},idealEdgeLength:function(e){return 50},edgeElasticity:function(e){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,treeConstraint:void 0,ready:function(){},stop:function(){}}),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n({},s,t)}return _(e,[{key:"run",value:function(){var e=this.options,t=e.cy,r=e.eles,_=[],n=[],s=void 0,c=[];!e.fixedNodeConstraint||Array.isArray(e.fixedNodeConstraint)&&0!=e.fixedNodeConstraint.length||(e.fixedNodeConstraint=void 0),e.alignmentConstraint&&(!e.alignmentConstraint.vertical||Array.isArray(e.alignmentConstraint.vertical)&&0!=e.alignmentConstraint.vertical.length||(e.alignmentConstraint.vertical=void 0),!e.alignmentConstraint.horizontal||Array.isArray(e.alignmentConstraint.horizontal)&&0!=e.alignmentConstraint.horizontal.length||(e.alignmentConstraint.horizontal=void 0)),!e.relativePlacementConstraint||Array.isArray(e.relativePlacementConstraint)&&0!=e.relativePlacementConstraint.length||(e.relativePlacementConstraint=void 0),(e.fixedNodeConstraint||e.alignmentConstraint||e.relativePlacementConstraint||e.treeConstraint)&&(e.tile=!1,e.packComponents=!1,e.treeConstraint&&(e.fixedNodeConstraint=void 0,e.alignmentConstraint=void 0,e.relativePlacementConstraint=void 0,e.packComponents=!0));var u=void 0,f=!1;if(t.layoutUtilities&&e.packComponents&&((u=t.layoutUtilities("get"))||(u=t.layoutUtilities()),f=!0),r.nodes().length>0)if(f){var d=a.getTopMostNodes(e.eles.nodes());if((s=a.connectComponents(t,e.eles,d)).forEach((function(e){var t=e.boundingBox();c.push({x:t.x1+t.w/2,y:t.y1+t.h/2})})),e.randomize&&s.forEach((function(t){e.eles=t,_.push(o(e))})),"default"==e.quality||"proof"==e.quality){var p=t.collection();if(e.tile){var h=new Map,g=0,v={nodeIndexes:h,xCoords:[],yCoords:[]},m=[];if(s.forEach((function(e,t){0==e.edges().length&&(e.nodes().forEach((function(t,r){p.merge(e.nodes()[r]),t.isParent()||(v.nodeIndexes.set(e.nodes()[r].id(),g++),v.xCoords.push(e.nodes()[0].position().x),v.yCoords.push(e.nodes()[0].position().y))})),m.push(t))})),p.length>1){var y=p.boundingBox();c.push({x:y.x1+y.w/2,y:y.y1+y.h/2}),s.push(p),_.push(v);for(var w=m.length-1;w>=0;w--)s.splice(m[w],1),_.splice(m[w],1),c.splice(m[w],1)}}s.forEach((function(t,r){if(e.eles=t,e.treeConstraint){var o=i(e);o&&(e.alignmentConstraint=o.alignmentConstarint,e.relativePlacementConstraint=o.relativePlacementConstraint)}n.push(l(e,_[r])),a.relocateComponent(c[r],n[r],e)}))}else s.forEach((function(t,r){a.relocateComponent(c[r],_[r],e)}));var b=new Set;if(s.length>1){var k=[],x=r.filter((function(e){return"none"==e.css("display")}));s.forEach((function(t,r){var i=void 0;if("draft"==e.quality&&(i=_[r].nodeIndexes),t.nodes().not(x).length>0){var o={edges:[],nodes:[]},l=void 0;t.nodes().not(x).forEach((function(t){if("draft"==e.quality)if(t.isParent()){var s=a.calcBoundingBox(t,_[r].xCoords,_[r].yCoords,i);o.nodes.push({x:s.topLeftX,y:s.topLeftY,width:s.width,height:s.height})}else l=i.get(t.id()),o.nodes.push({x:_[r].xCoords[l]-t.boundingbox().w/2,y:_[r].yCoords[l]-t.boundingbox().h/2,width:t.boundingbox().w,height:t.boundingbox().h});else n[r][t.id()]&&o.nodes.push({x:n[r][t.id()].getLeft(),y:n[r][t.id()].getTop(),width:n[r][t.id()].getWidth(),height:n[r][t.id()].getHeight()})})),t.edges().forEach((function(t){var l=t.source(),s=t.target();if("none"!=l.css("display")&&"none"!=s.css("display"))if("draft"==e.quality){var c=i.get(l.id()),u=i.get(s.id()),f=[],d=[];if(l.isParent()){var p=a.calcBoundingBox(l,_[r].xCoords,_[r].yCoords,i);f.push(p.topLeftX+p.width/2),f.push(p.topLeftY+p.height/2)}else f.push(_[r].xCoords[c]),f.push(_[r].yCoords[c]);if(s.isParent()){var h=a.calcBoundingBox(s,_[r].xCoords,_[r].yCoords,i);d.push(h.topLeftX+h.width/2),d.push(h.topLeftY+h.height/2)}else d.push(_[r].xCoords[u]),d.push(_[r].yCoords[u]);o.edges.push({startX:f[0],startY:f[1],endX:d[0],endY:d[1]})}else n[r][l.id()]&&n[r][s.id()]&&o.edges.push({startX:n[r][l.id()].getCenterX(),startY:n[r][l.id()].getCenterY(),endX:n[r][s.id()].getCenterX(),endY:n[r][s.id()].getCenterY()})})),o.nodes.length>0&&(k.push(o),b.add(r))}}));var O=u.packComponents(k,e.randomize).shifts;if("draft"==e.quality)_.forEach((function(e,t){var r=e.xCoords.map((function(e){return e+O[t].dx})),_=e.yCoords.map((function(e){return e+O[t].dy}));e.xCoords=r,e.yCoords=_}));else{var P=0;b.forEach((function(e){Object.keys(n[e]).forEach((function(t){var r=n[e][t];r.setCenter(r.getCenterX()+O[P].dx,r.getCenterY()+O[P].dy)})),P++}))}}}else{var E=e.eles.boundingBox();if(c.push({x:E.x1+E.w/2,y:E.y1+E.h/2}),e.randomize){var C=o(e);_.push(C)}"default"==e.quality||"proof"==e.quality?(n.push(l(e,_[0])),a.relocateComponent(c[0],n[0],e)):a.relocateComponent(c[0],_[0],e)}var A=function(t,r){if("default"==e.quality||"proof"==e.quality){"number"==typeof t&&(t=r);var a=void 0,i=void 0,o=t.data("id");return n.forEach((function(e){o in e&&(a={x:e[o].getRect().getCenterX(),y:e[o].getRect().getCenterY()},i=e[o])})),e.nodeDimensionsIncludeLabels&&(i.labelWidth&&("left"==i.labelPosHorizontal?a.x+=i.labelWidth/2:"right"==i.labelPosHorizontal&&(a.x-=i.labelWidth/2)),i.labelHeight&&("top"==i.labelPosVertical?a.y+=i.labelHeight/2:"bottom"==i.labelPosVertical&&(a.y-=i.labelHeight/2))),null==a&&(a={x:t.position("x"),y:t.position("y")}),{x:a.x,y:a.y}}var l=void 0;return _.forEach((function(e){var r=e.nodeIndexes.get(t.id());null!=r&&(l={x:e.xCoords[r],y:e.yCoords[r]})})),null==l&&(l={x:t.position("x"),y:t.position("y")}),{x:l.x,y:l.y}};if("default"==e.quality||"proof"==e.quality||e.randomize){var S=a.calcParentsWithoutChildren(t,r),N=r.filter((function(e){return"none"==e.css("display")}));e.eles=r.not(N),r.nodes().not(":parent").not(N).layoutPositions(this,e,A),S.length>0&&S.forEach((function(e){e.position(A(e))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),e}();e.exports=c},208:(e,t,r)=>{var _=r(602),n=r(625).layoutBase.Matrix,a=r(625).layoutBase.SVD;e.exports={spectralLayout:function(e){var t=e.cy,r=e.eles,i=r.nodes(),o=r.nodes(":parent"),l=new Map,s=new Map,c=new Map,u=[],f=[],d=[],p=[],h=[],g=[],v=[],m=[],y=void 0,w=1e8,b=1e-9,k=e.piTol,x=e.samplingType,O=e.nodeSeparation,P=void 0,E=function(e,t,r){for(var _=[],n=0,a=0,i=0,o=void 0,l=[],c=0,f=1,d=0;d<y;d++)l[d]=w;for(_[a]=e,l[e]=0;a>=n;){i=_[n++];for(var p=u[i],v=0;v<p.length;v++)l[o=s.get(p[v])]==w&&(l[o]=l[i]+1,_[++a]=o);g[i][t]=l[i]*O}if(r){for(var m=0;m<y;m++)g[m][t]<h[m]&&(h[m]=g[m][t]);for(var b=0;b<y;b++)h[b]>c&&(c=h[b],f=b)}return f};_.connectComponents(t,r,_.getTopMostNodes(i),l),o.forEach((function(e){_.connectComponents(t,r,_.getTopMostNodes(e.descendants().intersection(r)),l)}));for(var C=0,A=0;A<i.length;A++)i[A].isParent()||s.set(i[A].id(),C++);var S=!0,N=!1,T=void 0;try{for(var L,M=l.keys()[Symbol.iterator]();!(S=(L=M.next()).done);S=!0){var j=L.value;s.set(j,C++)}}catch(e){N=!0,T=e}finally{try{!S&&M.return&&M.return()}finally{if(N)throw T}}for(var I=0;I<s.size;I++)u[I]=[];o.forEach((function(e){for(var t=e.children().intersection(r);0==t.nodes(":childless").length;)t=t.nodes()[0].children().intersection(r);var _=0,n=t.nodes(":childless")[0].connectedEdges().length;t.nodes(":childless").forEach((function(e,t){e.connectedEdges().length<n&&(n=e.connectedEdges().length,_=t)})),c.set(e.id(),t.nodes(":childless")[_].id())})),i.forEach((function(e){var t=void 0;t=e.isParent()?s.get(c.get(e.id())):s.get(e.id()),e.neighborhood().nodes().forEach((function(_){r.intersection(e.edgesWith(_)).length>0&&(_.isParent()?u[t].push(c.get(_.id())):u[t].push(_.id()))}))}));var D=function(e){var r=s.get(e),_=void 0;l.get(e).forEach((function(n){_=t.getElementById(n).isParent()?c.get(n):n,u[r].push(_),u[s.get(_)].push(e)}))},R=!0,F=!1,z=void 0;try{for(var B,q=l.keys()[Symbol.iterator]();!(R=(B=q.next()).done);R=!0)D(B.value)}catch(e){F=!0,z=e}finally{try{!R&&q.return&&q.return()}finally{if(F)throw z}}var V=void 0;if((y=s.size)>2){P=y<e.sampleSize?y:e.sampleSize;for(var G=0;G<y;G++)g[G]=[];for(var U=0;U<P;U++)m[U]=[];return"draft"==e.quality||"all"==e.step?(function(e){var t=void 0;if(e){t=Math.floor(Math.random()*y);for(var r=0;r<y;r++)h[r]=w;for(var _=0;_<P;_++)p[_]=t,t=E(t,_,e)}else{!function(){for(var e=0,t=0,r=!1;t<P;){e=Math.floor(Math.random()*y),r=!1;for(var _=0;_<t;_++)if(p[_]==e){r=!0;break}r||(p[t]=e,t++)}}();for(var n=0;n<P;n++)E(p[n],n,e)}for(var a=0;a<y;a++)for(var i=0;i<P;i++)g[a][i]*=g[a][i];for(var o=0;o<P;o++)v[o]=[];for(var l=0;l<P;l++)for(var s=0;s<P;s++)v[l][s]=g[p[s]][l]}(x),function(){for(var e=a.svd(v),t=e.S,r=e.U,_=e.V,i=t[0]*t[0]*t[0],o=[],l=0;l<P;l++){o[l]=[];for(var s=0;s<P;s++)o[l][s]=0,l==s&&(o[l][s]=t[l]/(t[l]*t[l]+i/(t[l]*t[l])))}m=n.multMat(n.multMat(_,o),n.transpose(r))}(),function(){for(var e=void 0,t=void 0,r=[],_=[],a=[],i=[],o=0;o<y;o++)r[o]=Math.random(),_[o]=Math.random();r=n.normalize(r),_=n.normalize(_);for(var l=b,s=b,c=void 0;;){for(var u=0;u<y;u++)a[u]=r[u];if(r=n.multGamma(n.multL(n.multGamma(a),g,m)),e=n.dotProduct(a,r),r=n.normalize(r),l=n.dotProduct(a,r),(c=Math.abs(l/s))<=1+k&&c>=1)break;s=l}for(var p=0;p<y;p++)a[p]=r[p];for(s=b;;){for(var h=0;h<y;h++)i[h]=_[h];if(i=n.minusOp(i,n.multCons(a,n.dotProduct(a,i))),_=n.multGamma(n.multL(n.multGamma(i),g,m)),t=n.dotProduct(i,_),_=n.normalize(_),l=n.dotProduct(i,_),(c=Math.abs(l/s))<=1+k&&c>=1)break;s=l}for(var v=0;v<y;v++)i[v]=_[v];f=n.multCons(a,Math.sqrt(Math.abs(e))),d=n.multCons(i,Math.sqrt(Math.abs(t)))}(),V={nodeIndexes:s,xCoords:f,yCoords:d}):(s.forEach((function(e,r){f.push(t.getElementById(r).position("x")),d.push(t.getElementById(r).position("y"))})),V={nodeIndexes:s,xCoords:f,yCoords:d}),V}var $=s.keys(),W=t.getElementById($.next().value),H=W.position(),Y=W.outerWidth();if(f.push(H.x),d.push(H.y),2==y){var X=t.getElementById($.next().value).outerWidth();f.push(H.x+Y/2+X/2+e.idealEdgeLength),d.push(H.y)}return V={nodeIndexes:s,xCoords:f,yCoords:d}}}},497:(e,t,r)=>{var _=r(770),n=function(e){e&&e("layout","fcose",_)};"undefined"!=typeof cytoscape&&n(cytoscape),e.exports=n},625:t=>{t.exports=e}},r={},function e(_){var n=r[_];if(void 0!==n)return n.exports;var a=r[_]={exports:{}};return t[_](a,a.exports,e),a.exports}(497);var t,r})(a("cwOQi"));s=a("3krpC"),nt=a("4a4bO");var EE,CE=Object.prototype.hasOwnProperty;EE=function(e){if(null==e)return!0;if(rt(e)&&(Qe(e)||"string"==typeof e||"function"==typeof e.splice||nt(e)||ft(e)||We(e)))return!e.length;var t=wp(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ue(e))return!rp(e).length;for(var r in e)if(CE.call(e,r))return!1;return!0};const AE=r(s)("eczoo_jscomponents.codegraph.style"),SE=[{selector:"node",style:{color:"rgb(127, 48, 0)","background-color":"rgb(127, 48, 0)",label:"data(label)",width:15,height:15,"text-outline-color":"#fff","text-outline-width":1,"text-outline-opacity":.5,"min-zoomed-font-size":14}},{selector:"node[_isDomain=1]",style:{shape:"round-rectangle",width:25,height:25}},{selector:"node[_isKingdom=1]",style:{shape:"diamond",width:25,height:25}},{selector:"node[_isKingdomRootCode=1]",style:{shape:"diamond"}},{selector:"node[_hasParentKingdom=0]",style:{shape:"star",color:"rgb(136, 91, 7)","background-color":"rgb(136, 91, 7)",width:20,height:20}},{selector:"node[_isPropertyCode=1]",style:{"font-style":"italic"}},{selector:"node.useDomainColors[_domainColorIndex=0]",style:{color:"rgb(95,69,130)","background-color":"rgb(95,69,130)"}},{selector:"node.useDomainColors[_domainColorIndex=1]",style:{color:"rgb(50,108,110)","background-color":"rgb(50,108,110)"}},{selector:"node.useDomainColors[_domainColorIndex=2]",style:{color:"rgb(111,50,72)","background-color":"rgb(111,50,72)"}},{selector:"edge",style:{width:2,opacity:.667,"target-arrow-shape":"triangle","curve-style":"bezier","font-size":"12px"}},{selector:'edge[_relType="parent"]',style:{width:2,"line-color":"#00307f","target-arrow-color":"#00307f",color:"#00307f"}},{selector:"edge[_primaryParent=0]",style:{width:2}},{selector:'edge[_relType="cousin"]',style:{width:1,"target-arrow-shape":"none","line-style":"dashed","line-color":"#00883f","target-arrow-color":"#00883f",color:"#00883f"}},{selector:".isolationRoot",style:{color:"rgb(230,50,50)","font-weight":"bold","background-color":"rgb(230,50,50)","text-opacity":1,"text-outline-color":"#fff","text-outline-width":1,"text-outline-opacity":1}},{selector:".layoutFadeExtra",style:{opacity:.3}},{selector:"node.layoutFadeExtra",style:{width:10,height:10}},{selector:".hidden, .isolationHidden, .hiddenSecondaryEdge",style:{display:"none"}},{selector:".importantNode",style:{"font-size":32,"font-weight":"bold"}},{selector:".enableHighlightPrimaryParents[_primaryParent=0]",style:{"line-style":"dotted"}},{selector:".isolationRootConnectingEdge.highlightRootConnectingEdge",style:{width:4,opacity:1,"font-size":8,"text-justification":"auto","source-text-offset":150,"target-text-offset":150,"text-opacity":1,"text-background-color":"#ffffff","text-background-opacity":.9,"text-background-shape":"round-rectangle","text-background-padding":"1px","text-max-width":80,"text-wrap":"wrap","source-text-rotation":"autorotate","target-text-rotation":"autorotate"}},{selector:".isolationRootConnectingEdge.highlightRootIncomingEdge",style:{"target-label":"data(source_label)"}},{selector:".isolationRootConnectingEdge.highlightRootOutgoingEdge",style:{"source-label":"data(target_label)"}},{selector:".isolationRootConnectingEdge.highlightRootOutgoingEdge[_primaryParent=1]",style:{width:6}},{selector:".highlight, .searchMatchHighlight",style:{opacity:1,color:"rgb(220,80,0)","background-color":"rgb(220,80,0)",width:40,height:40,"font-size":32}},{selector:".dimmed, .searchNoMatchDimmed",style:{opacity:.3}},{selector:'edge.DEBUG.layoutParent[_relType="parent"], edge.DEBUG.layoutParent[_relType="cousin"]',style:{width:3,"line-color":"rgb(120,0,50)",color:"rgb(120,0,50)"}},{selector:".DEBUG.prelayoutOutOfLayoutTree",style:{color:"rgb(230, 6, 204)","background-color":"rgb(230, 6, 204)"}}];function NE(e){let t={};if(e??={},AE("getCyStyleJson: options are ",JSON.stringify(Object.fromEntries(Object.entries(e).map((([e,t])=>{try{return[e,JSON.parse(JSON.stringify(t))]}catch(t){return AE("[Cannot stringify value for debug message!] - ",t),[e,"<cannot stringify value>"]}}))))),e.matchWebPageFonts){let r=e.window??window,_=r.getComputedStyle(r.document.body);t["font-family"]=_.getPropertyValue("font-family"),t["font-size"]=_.getPropertyValue("font-size"),t["font-weight"]=_.getPropertyValue("font-weight"),t["font-style"]=_.getPropertyValue("font-style")}return null!=e.fontFamily&&(t["font-family"]=e.fontFamily),null!=e.fontSize&&(t["font-size"]=e.fontSize),null!=e.fontWeight&&(t["font-weight"]=e.fontWeight),null!=e.fontStyle&&(t["font-style"]=e.fontStyle),AE("getCyStyleJson: customFontStyle is ",JSON.stringify(t)),r(EE)(t)?SE:[].concat([{selector:"*",style:t}],SE)}s=a("3krpC"),s=a("3krpC");const TE=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.graphtools");function LE(e){return null===e?"null":void 0===e?"undef":e.isNode()?e.id():e.isEdge()?`[${e.source().id()}  ${e.target().id()}]`:`UNKNOWN{${JSON.stringify(e)}}`}function ME(e){return null===e?"null":void 0===e?"undef":e.map(LE).join(" ; ")}function jE({cy:e,visibleElements:t,allElements:r,connectingNodesMaxPathLength:_,connectingNodesMaxNumPaths:n,connectingNodesOnlyKeepPathsWithAdditionalLength:a,edgeLengthFn:i}){_??=3.5,n??=5,a??=0,i??=e=>1,TE(`connectingPathsComponents: visible elements = ${ME(t)}`);let o=t.nodes(),l=[];for(;o.length;){let s=o[0];TE(`New round of identifying a graph component.  Using representative node ${LE(s)}`);let c=DE({allElements:r,rootNode:s,recordShortestPathsTo:t.nodes(),edgeLengthFn:i,maxPathLength:_,maxNumPaths:n,maxAdditionalLength:a}),u=[];for(const[e,r]of Object.entries(c))if(0===r.shortestPathLength){const r=t.getElementById(e);if(null==r){console.error("Internal inconsistency: got a node at distance zero by it I couldn't find it in visibleElements!");continue}u.push(r)}if(0===u.length){console.error("Internal inconsistency: I was not able to identify a new component, even though there are remaining visible nodes to process.");break}const f=e.collection().union(u);o=o.difference(f);const d=f.union(t.edges().filter((e=>f.has(e.source())&&f.has(e.target()))));let p={representativeNode:s,nodes:f,elements:d,shortestPathsTo:c,shortestPathsToComponents:null};l.push(p)}for(let[e,t]of l.entries())t.shortestPathsToComponents=new Array(l.length),t.shortestPathsToComponents[e]={paths:[[]],shortestPath:[],shortestPathLength:0};for(let e=0;e<l.length;++e){let t=l[e];for(let r=e+1;r<l.length;++r){const _=l[r],n=t.shortestPathsTo[_.representativeNode.id()];TE(`Distance between component #${e} and #${r} is ${n.shortestPathLength}. connectingShortestPaths =`,n),t.shortestPathsToComponents[r]=n,_.shortestPathsToComponents[e]={paths:n.paths.map(IE),shortestPath:[...n.shortestPath].reverse(),shortestPathLength:n.shortestPathLength}}}return{componentInfos:l}}const IE=e=>({pathLength:e.pathLength,path:[...e.path].reverse(),stepPath:[...e.stepPath].reverse(),to:e.path.length?e.path[0]:null});function DE({allElements:e,rootNode:t,recordShortestPathsTo:r,edgeLengthFn:_,maxPathLength:n,maxNumPaths:a,maxAdditionalLength:i}){TE("dijkstraMultiShortestPaths()!",{allElements:e,rootNode:t,recordShortestPathsTo:r,edgeLengthFn:_,maxPathLength:n,maxNumPaths:a,maxAdditionalLength:i});const o=e.nodes();let l=[],s={},c={};for(const e of r.nodes())s[e.id()]={paths:[]};for(const e of o)c[e.id()]=0;l=[{pathLength:0,stepPath:[],path:[],to:t}];const u=(e,t)=>{const r=t.connectedNodes().filter((t=>t.id()!==e.to.id()))[0];if(null==r||-1!==e.path.indexOf(r))return;const i=_(t),o=e.pathLength+i;if(null!=a&&o>n)return;const s=[...e.path,e.to,t];let c=[...e.stepPath];if(0!==i)c.push(t);else for(const e of l)if(e.to===r&&e.stepPath.length===c.length&&c.every(((t,r)=>t===e.stepPath[r])))return;const u={pathLength:o,path:s,stepPath:c,to:r};let f=0;for(f=0;f<l.length;++f){if(l[f].pathLength>o)break}l.splice(f,0,u)},f=e=>{const t=e.to.id();if(!r.has(e.to))return;let _=s[t].paths;if(_.length>0&&e.pathLength>_[0].pathLength+i)return;let n=0;for(n=0;n<_.length&&!(_[n].pathLength>e.pathLength);++n);_.splice(n,0,e)};for(;l.length;){const t=l.shift(),r=t.to.id();if(c[r]+=1,f(t),c[r]<=a){const r=t.to.connectedEdges().filter((t=>e.has(t)&&e.has(t.source())&&e.has(t.target())));for(const e of r)u(t,e)}}for(const[e,t]of Object.entries(s))t.paths.length?(t.shortestPath=t.paths[0].path,t.shortestPathLength=t.paths[0].pathLength):(t.shortestPath=[],t.shortestPathLength=1/0);return s}var RE,FE={};FE=function(e,t){for(var r,_=-1,n=e.length;++_<n;){var a=t(e[_]);void 0!==a&&(r=void 0===r?a:r+a)}return r},RE=function(e){return e&&e.length?FE(e,Tt):0};const zE=r(s)("eczoo_jscomponents.codegraph.prelayout"),BE={layoutParentEdgeSelector:".layoutParent",ignoreParentRootEdgeDirection:!1,origin:{position:{x:0,y:0},rootPositioning:"linear",rootPositionXOffset:500,rootPositionYOffset:0,rootPositionCircleRootSpacing:200,rootPositionCircleDirection:Math.PI/2,rootPositionCircleAngularSpread:.8*Math.PI,angularSpread:2*Math.PI,radius:200,direction:Math.PI/2,useWeights:!1},radiusSegmentLevels:[400,400],radiusSegmentLevelFactor:1.1,weightCalcLevels:6,weightCalcSecondaryFactor:.1},qE={linear:({numRootNodes:e,origin:t})=>r=>({position:{x:t.position.x+(r-e/2)*t.rootPositionXOffset,y:t.position.y+(r-e/2)*t.rootPositionYOffset}}),circle:({numRootNodes:e,origin:t})=>{const r=e-1,_=r*t.rootPositionCircleRootSpacing/t.rootPositionCircleAngularSpread,n=0===r?0:t.rootPositionCircleAngularSpread/r;return zE(`Preparing to position ${e} root nodes...`),a=>{const i=a+.5-r/2,o=t.rootPositionCircleDirection+i*n;return zE(`Position #${a}/${e} at phi=${o}; circleRadius=${_}, origin.position=${JSON.stringify(t.position)}`),{position:{x:t.position.x+_*Math.cos(o),y:t.position.y+_*Math.sin(o)},direction:o,angularSpread:t.rootPositionCircleAngularSpread/e}}}};class VE{constructor({cy:e,rootNodeIds:t,rootNodesPrelayoutInfo:_,prelayoutOptions:n}){this.cy=e,this.rootNodeIds=t,this.rootNodesPrelayoutInfo=_,this.prelayoutOptions=r(o)({},BE,n)}run(){let e=[],t={},r={},_=[],n=0;for(const e of this.rootNodeIds){let t=this.rootNodesPrelayoutInfo[e];null!=t?(r[e]=t,++n):_.push(e)}const a=_.length,i=this.prelayoutOptions.origin;if(n>0&&_.length>0)throw new Error("PrelayoutRadialTree.run(): If you position some of the root nodes, you should position all of them (in rootNodesPrelayoutInfo)");let o=i.rootPositioning,l=qE[o];null!=o&&null!=l||(console.warn("Invalid root node positioning strategy!  Picking linear."),o="linear");const s=l({numRootNodes:a,origin:i});for(const[e,t]of _.entries()){const _=s(e);zE(`Root node ${e} is placed at ${JSON.stringify(_)}`),r[t]={radiusOffset:i.radius,direction:i.direction,angularSpread:i.angularSpread,..._}}for(const[_,n]of Object.entries(r)){zE(`Prelayout - Prepping root node ${_}`,{prelayoutInfo:n}),t[_]={position:n.position,isRoot:!0,relatedAs:"root"};const r=this.cy.getElementById(_);let a=null,o=null;a=r.incomers(this.prelayoutOptions.layoutParentEdgeSelector).edges(".layoutVisible"),o=r.outgoers(this.prelayoutOptions.layoutParentEdgeSelector).edges(".layoutVisible"),this.prelayoutOptions.ignoreParentEdgeDirection&&(a=a.union(o),o=[]),a.length&&e.push(new GE({cy:this.cy,root:{nodeId:_,radius:n.radiusOffset,position:n.position,direction:n.direction,angularSpread:n.angularSpread,propertyCodesSortOrder:n.propertyCodesSortOrder,useWeights:i.useWeights},prelayoutOptions:this.prelayoutOptions,branchOptions:{initialEdges:a},positionedNodesData:t})),o.length&&e.push(new GE({cy:this.cy,root:{nodeId:_,radius:n.radiusOffset,position:n.position,direction:n.direction+Math.PI,angularSpread:n.angularSpread,propertyCodesSortOrder:n.propertyCodesSortOrder,useWeights:i.useWeights},prelayoutOptions:this.prelayoutOptions,branchOptions:{initialEdges:o},positionedNodesData:t}))}for(const t of e)t.positionAndMarkNodesInData();for(const[e,r]of Object.entries(t)){let t=this.cy.getElementById(e);const{position:_,isRoot:n,relatedAs:a}=r;n?t.addClass(["prelayoutPositioned",`prelayoutRelatedAs_${a}`,"prelayoutRoot"]):t.addClass(["prelayoutPositioned",`prelayoutRelatedAs_${a}`]),t.position(_)}}}class GE{constructor({cy:e,root:t,prelayoutOptions:_,branchOptions:n,positionedNodesData:a}){this.cy=e,this.root=t,this.rootNode=this.cy.getElementById(this.root.nodeId),this.prelayoutOptions=_,this.branchOptions=r(o)({initialEdges:null,propertyCodesSortOrder:1},n),this.positionedNodesData=a,this.propertyCodesSortOrder=t.propertyCodesSortOrder,this.nodeOrderingInfoByLevel=null,this.nodeOrderingInfoByParent=null,this.nodePositioningInfo=null}_computeNodeInfos(){let e=[],t={};const r=this.prelayoutOptions.layoutParentEdgeSelector;let _=new Set,n=[{nodeId:this.root.nodeId,nodeConnectingEdge:null,level:0,parentNodeId:null,parentNodeOrderingInfo:null,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],relatedAs:"root"}],a=(e,t)=>{let r=e.source(),_=e.target();return r.id()===t?_:r};e.push({level:0,nodeInfos:n,levelTotalDescendantWeight:null}),t[""]={level:0,nodeInfos:n};let i=0;for(;n.length;){let o=[];i+=1;for(const e of n){const{nodeId:n,nodeConnectingEdge:l,parentNodeOrderingInfo:s}=e;let c=s,u=0;for(;null!=c;){for(c.totalNumDescendants+=1;c.numDescendants.length<=u;)c.numDescendants.push(0);c.numDescendants[u]+=1,c=c.parentNodeOrderingInfo,u+=1}let f=this.cy.getElementById(n),d=null;1===i&&(d=this.branchOptions.initialEdges),null==d&&(d=f.connectedEdges(r).edges(".layoutVisible"));let p=[];for(const t of d){if(t===l)continue;const r=a(t,n),o=r.id();if(Object.hasOwn(this.positionedNodesData,o)||_.has(o))continue;_.add(o);let s={nodeId:o,nodeConnectingEdge:t,level:i,parentNodeId:e.nodeId,parentNodeOrderingInfo:e,connectedNodesInfos:[],totalNumDescendants:0,numDescendants:[],isPropertyCode:r.data("_isPropertyCode")?1:0};p.push(s)}e.connectedNodesInfos.push(...p),o.push(...p),t[n]={level:i,nodeInfos:p}}e.push({level:i,nodeInfos:o,levelTotalDescendantWeight:null}),n=o}this.nodeOrderingInfoByLevel=e,this.nodeOrderingInfoByParent=t}_computeNodeDescendantWeightsAndSortNodes(){const e=this.propertyCodesSortOrder;for(let e of this.nodeOrderingInfoByLevel){let t=0;for(let _ of e.nodeInfos){let e=Math.max(1,r(RE)(_.numDescendants.slice(0,this.prelayoutOptions.weightCalcLevels))??0);"secondary"===_.relatedAs&&(e*=this.prelayoutOptions.weightCalcSecondaryFactor),_._descendantWeight=e,t+=e}e.levelTotalDescendantWeight=t}let t=[""];for(let _ of this.nodeOrderingInfoByLevel){let n=[],a=[];for(let _ of t){let t=this.nodeOrderingInfoByParent[_];const i=r(RE)(t.nodeInfos.map((e=>e._descendantWeight)));let o=0,l=[...t.nodeInfos],s=[];const c=l.length;for(;l.length;){let t=s.length*i/c,r=null,_=null,n=null;for(let a=0;a<l.length;++a){let i=l[a],s=o+i._descendantWeight-t,c=s*s,u=i.isPropertyCode?e:0;(null==_||u<n||u===n&&c<_)&&(n=u,_=c,r=a)}s.push(l[r]),l.splice(r,1)}t.nodeInfos=s,n.push(...s),a.push(...s.map((e=>e.nodeId)))}t=a,_.nodeInfos=n}}_distributeAngles({items:e,R:t,parentR:_,direction:n,angularSpread:a,isFirstLevel:i}){const o=.8*Math.PI/2,l=n-a/2,s=l+a;if(!(Number.isFinite(n)&&Number.isFinite(a)&&Number.isFinite(t)&&Number.isFinite(_)))throw new Error("Invalid inputs to _distributeAngles()! "+JSON.stringify({direction:n,angularSpread:a,R:t,parentR:_}));let c=2*Math.PI;if(!i){const e=Math.cos(o),r=_/t,n=-r*e+Math.sqrt(1+r*r*(e*e-1));c=Math.acos(r+n*e)}let u=r(RE)(e.map((({weight:e})=>e))),f=1,d=!0,p=[];for(;d;){d=!1,p=[];let t=n-a/2;for(const{weight:r,parentNodeAngleDirection:_}of e){let e=f*r/u*a;const n=Math.max(_-c,l),i=Math.min(_+c,s);if(t>=i){if(f<1e-4)throw new Error("Something's wrong, cannot distribute angles!");f*=.75,zE(`Failure to distribute angles! curAngle=${180*t/Math.PI}deg >= maxAngle=${180*i/Math.PI}deg, trying again with angleSpreadCompressionFactor=${f}`),d=!0;break}const o=Math.max(t,n),h=Math.min(Math.max(o+.3*e,t+e),i);if(t=h,h<=o)throw new Error("Internal error, endAngle <= beginAngle !?!?");p.push({beginAngle:o,endAngle:h,midAngle:(h+o)/2,useAngle:e,minAngle:n,maxAngle:i,angleSpreadCompressionFactor:f})}}return p}positionAndMarkNodesInData(){this._computeNodeInfos(),this._computeNodeDescendantWeightsAndSortNodes();const e=this.branchOptions.flipDirection?-this.root.direction:this.root.direction,t=this.root.angularSpread;this.nodePositioningInfo={},this.nodePositioningInfo[this.root.nodeId]={posRelative:{x:0,y:0},beginAngle:e-t/2,midAngle:e,endAngle:e+t/2,R:0};const{radiusSegmentLevels:r,radiusSegmentLevelFactor:_}=this.prelayoutOptions,n=r.length;let a=this.root.radius;for(const i of this.nodeOrderingInfoByLevel){const{level:o,nodeInfos:l}=i;if(0===o)continue;const s=1===o?0:a,c=o-1;a+=c<n?r[c]:r[n-1]*Math.pow(_,c-n);const u=1===o,f=this.root.useWeights&&!u,d=l.map((e=>{const{_descendantWeight:t,parentNodeId:r}=e;return{weight:f?t:1,parentNodeAngleDirection:this.nodePositioningInfo[r].midAngle,nodeInfo:e}})),p=this._distributeAngles({items:d,R:a,parentR:s,direction:e,angularSpread:t,isFirstLevel:u});for(const[e,t]of l.entries()){const{beginAngle:r,midAngle:_,endAngle:n}=p[e];let i={x:a*Math.cos(_),y:a*Math.sin(_)},o={x:this.root.position.x+i.x,y:this.root.position.y+i.y};const{nodeId:l,relatedAs:s}=t;this._markNodePosition({nodeId:l,isRoot:!1,relatedAs:s,position:o}),this.nodePositioningInfo[l]={posRelative:i,beginAngle:r,midAngle:_,endAngle:n,R:a}}}zE("_PrelayoutRadialTreeBranchSet: branch nodes positioned.")}_debugPrintPrelayoutTreeBranchPositioning(){for(const[e,t]of this.nodeOrderingInfoByLevel.entries()){const{nodeInfos:r}=t;zE(` * LEVEL ${e}:`);for(const e of r){const{nodeId:t,nodeConnectingEdge:r,totalNumDescendants:_,numDescendants:n,isPropertyCode:a}=e;if(zE(`     ${t} from ${LE(r)} totalNumDescendants=${_} # of descendants by level=[${n.join(", ")}] isPropertyCode=${a}`),t===this.root.nodeId){const{radius:e,position:t,direction:r,angularSpread:_,useWeights:n}=this.root;zE(`      [ROOT] (${t.x},${t.y}) ${180*r/Math.PI}deg  ${180*_/Math.PI} radius=${e} useWeights=${n}`)}const i=this.nodePositioningInfo[t];if(null!=i){const{beginAngle:e,endAngle:t,posRelative:r,R:_}=i;zE(`      @ root+(${r.x},${r.y})  ${180*e/Math.PI}--${180*t/Math.PI}deg at R=${_})`)}}}}_markNodePosition({nodeId:e,isRoot:t,relatedAs:r,position:_,nodePositioningDebugInfo:n}){if(Object.hasOwn(this.positionedNodesData,e))throw new Error(`Node ${e} is being positioned in two different subtrees!`);this.positionedNodesData[e]={position:_,isRoot:t,relatedAs:r,nodePositioningDebugInfo:n}}}const UE=r(s)("eczoo_jscomponents.codegraph.subgraphselector");class $E{constructor(e,t={}){this.eczCodeGraph=e,this.eczoodb=e.eczoodb,this.cy=e.cy,this.options=t,this.isCurrentlyInstalled=!1,this.radialPrelayoutRootNodesPrelayoutInfo={},this.radialPrelayoutOptions={}}_markSubgraphInstalled(e){this.isCurrentlyInstalled=e}installSubgraph(){this._markSubgraphInstalled(!0);const e=this.cy.elements();e.addClass("layoutVisible"),e.removeClass("layoutParent layoutFadeExtra")}setOptions(e){return r(ag)(e,this.options)?{pendingUpdateLayout:!1}:(UE("EczCodeGraphSubgraphSelector.setOptions(): setting new options",{options:e,thisOptions:this.options}),this.options=Object.assign({},this.options,e),this.isCurrentlyInstalled?this.installSubgraph():null)}uninstallSubgraph(){this._markSubgraphInstalled(!1)}getSubgraphLayoutOptions(){return{reusePreviousLayoutPositions:this.options?.reusePreviousLayoutPositions??!0}}createPrelayoutInstance({rootNodeIds:e}){const t=this.radialPrelayoutRootNodesPrelayoutInfo;let r=this.radialPrelayoutOptions;return new VE({cy:this.cy,rootNodeIds:e,rootNodesPrelayoutInfo:t,prelayoutOptions:r})}static clear(e){e.cy.elements().removeClass("layoutRoot layoutVisible layoutParent layoutFadeExtra")}}class WE extends $E{installSubgraph(){UE("EczCodeGraphSubgraphSelectorAll: installSubgraph()");const e=this.cy.elements();e.addClass("layoutVisible"),e.removeClass("layoutParent layoutFadeExtra"),e.edges("[_primaryParent=1]").addClass("layoutParent");const t=this.eczCodeGraph.globalGraphRootNodesInfo;t.radialPrelayoutRootNodesPrelayoutInfo&&(this.radialPrelayoutRootNodesPrelayoutInfo=t.radialPrelayoutRootNodesPrelayoutInfo);for(const e of t.rootNodeIds){this.cy.getElementById(e).addClass("layoutRoot")}UE("EczCodeGraphSubgraphSelectorAll: installSubgraph() done.")}}const HE=r(s)("eczoo_jscomponents.codegraph.eczcodegraph");function YE(e){return td(e)?$d(e):e}function XE(e){let t=YE(e);return t=t.trim(),t=t.replace(/\\\(|\\\)/g,""),t}r(Eg).use(r(PE));const ZE={rootPositioning:{rootNodesCircleXRadius:500,rootNodesCircleYRadius:300},customDomainIdsOrder:{classical_domain:-100,quantum_domain:100},useCodeShortNamesForLabels:!1,alwaysSkipCoseLayout:!1,overrideCoseLayoutOptions:null};class KE{constructor({eczoodb:e,graphGlobalOptions:t}){HE("EczCodeGraph constructor"),this.getNodeIdCode=KE.getNodeIdCode,this.getNodeIdDomain=KE.getNodeIdDomain,this.getNodeIdKingdom=KE.getNodeIdKingdom,this.eczoodb=e,this.mountedDomNode=null,this.eventTapCallbackFn=null,this.bgColor="rgb(255, 236, 217)",this.subgraphSelector=null,this.graphFilters=[],this.graphGlobalOptions=r(o)({},ZE,t),HE(`EczCodeGraph(): using graphGlobalOptions = ${JSON.stringify(this.graphGlobalOptions,void 0,4)}`),this._pendingUpdateLayout=!1,this.globalGraphRootNodesInfo=null}async initialize(){HE("EczCodeGraph initialize()"),await this.initGraph(),HE("EczCodeGraph initialize() done.  Don't forget to install a subgraph selector, for instance, via a EczCodeGraphViewController instance.")}static getNodeIdCode(e){return`c_${e}`}static getNodeIdKingdom(e){return`k_${e}`}static getNodeIdDomain(e){return`d_${e}`}installGraphFilter({graphFilterName:e,graphFilter:t}){this.graphFilters.push({graphFilterName:e,graphFilter:t});const r=this.cy.elements(".layoutVisible");t.applyFilter({eles:r})}setGraphFilterOptions(e,{skipGraphFilterApplyUpdates:t}={}){const _=this.cy.elements(".layoutVisible");for(const{graphFilterName:n,graphFilter:a}of this.graphFilters){if(Object.hasOwn(e,n)){let t=r(o)({},a.filterOptions,e[n]);a.setFilterOptions(t)}t||a.applyFilter({eles:_})}}_unapplyGraphFilters({eles:e}={}){e??=this.cy.elements(".layoutVisible");for(const{graphFilterName_:t,graphFilter:r}of this.graphFilters)HE("removeFilter for",r),r.removeFilter({eles:e})}_applyGraphFilters({eles:e}={}){e??=this.cy.elements(".layoutVisible");for(const{graphFilterName_:t,graphFilter:r}of this.graphFilters)r.applyFilter({eles:e})}installSubgraphSelector(e,{skipGraphFilterUpdates:t}={}){HE("installSubgraphSelector()",{subgraphSelector:e}),t||this._unapplyGraphFilters(),$E.clear(this),null!=this.subgraphSelector&&this.subgraphSelector.uninstallSubgraph(),this.subgraphSelector=e;const r=this.subgraphSelector.installSubgraph(),{pendingUpdateLayout:_}=r??{};HE("installSubgraphSelector(): applied subgraph selection. # of visible nodes = ",this.cy.nodes(".layoutVisible").length),t||this._applyGraphFilters(),(_??1)&&this._setPendingUpdateLayout()}setSubgraphSelectorOptions(e){if(null==this.subgraphSelector)throw new Error("Can't set subgraph selector options, none set");this._unapplyGraphFilters();const t=this.subgraphSelector.setOptions(e),{pendingUpdateLayout:r}=t??{};(r??1)&&this._setPendingUpdateLayout(),this._applyGraphFilters()}updateSubgraphSelectorAndSetGraphFilterOptions(e,t,_){if(HE("updateSubgraphSelectorAndSetGraphFilterOptions()"),e===this.subgraphSelector&&r(ag)(t,this.subgraphSelector.options)&&r(ag)(_,Object.fromEntries(this.graphFilters.map((({graphFilterName:e,graphFilter:t})=>[e,t.filterOptions])))))return void HE("... unchanged options, return early");this._unapplyGraphFilters();let n={pendingUpdateLayout:!1};this.subgraphSelector!==e?(e.setOptions(t),n=this.installSubgraphSelector(e,{skipGraphFilterUpdates:!0})):n=this.subgraphSelector.setOptions(t),n??={},this.setGraphFilterOptions(_,{skipGraphFilterApplyUpdates:!0}),this._applyGraphFilters(),(n.pendingUpdateLayout??1)&&this._setPendingUpdateLayout(),HE("updateSubgraphSelectorAndSetGraphFilterOptions() done.")}isPendingUpdateLayout(){return this._pendingUpdateLayout}_setPendingUpdateLayout(e){e??=!0,this._pendingUpdateLayout=e}mountInDom(e,{bgColor:t,styleOptions:_}={}){this.bgColor=t??this.bgColor,e.style.backgroundColor=this.bgColor,null!=this.mountedDomNode&&(this.cy.unmount(),null!=this.eventTapCallbackFn&&this.cy.removeListener("tap",this.eventTapCallbackFn)),this.cy.mount(e),this.mountedDomNode=e,_=r(o)({},_),_.matchWebPageFonts??=!0;const n=NE(_);HE("Setting style: ",n),this.cy.style().resetToDefault().fromJson(n).update(),null!=this.eventTapCallbackFn&&this.cy.addListener("tap",this.eventTapCallbackFn)}setUserTapCallback(e){null!=this.mountedDomNode&&null!=this.eventTapCallbackFn&&this.cy.removeListener("tap",this.eventTapCallbackFn),this.eventTapCallbackFn=t=>{const r=t.target;try{if(!r||!r.isNode)return HE("Unknown or non-node tap target."),void e({background:!0,event:t,eventTarget:r});if(r.isEdge()){const _=r;return HE(`Tapped edge ${_.id()}`),void e({edgeId:_.id(),event:t,eventTarget:r})}if(r.isNode()){const _=r;return HE(`Tapped node ${_.id()}`),void e({nodeId:_.id(),event:t,eventTarget:r})}return void HE("Unknown tap/click target ??!")}catch(e){return void console.error("Ignoring error while handling cytoscape canvas tap/click: ",e)}},null!=this.mountedDomNode&&this.cy.addListener("tap",this.eventTapCallbackFn)}getOverallRootNodeIds({includeDomains:e}={}){e??=!0;let t=[];e&&(t=Object.keys(this.eczoodb.objects.domain).map((e=>this.getNodeIdDomain(e))));let r=Object.entries(this.eczoodb.objects.code).filter((([,e])=>!(e.relations?.parents?.length||e.relations?.root_for_kingdom||e.relations?.root_for_kingdom?.length||e.relations?.root_for_domain||e.relations?.root_for_domain?.length))).map((([e])=>this.getNodeIdCode(e)));return[].concat(t,r)}async updateLayout({animate:e,forceRelayout:t,skipCoseLayout:r}={}){if(e??=!0,t??=!1,r??=!1,this.graphGlobalOptions.alwaysSkipCoseLayout&&(r=!0),null==this.subgraphSelector)throw new Error('You didn\'t install a subgraph selector, which is needed to lay out the code graph. To install a simple "display all" subgraph selector, use  eczCodeGraph.installSubgraphSelector(new EczCodeGraphSubgraphSelectorAll(eczCodeGraph))  after initialization.');let{reusePreviousLayoutPositions:_}=this.subgraphSelector.getSubgraphLayoutOptions();this.cy.nodes(".layoutVisible").not("._layoutPositioned").length&&(t=!0),t&&(_=!1),HE("in updateLayout()",{animate:e,forceRelayout:t,skipCoseLayout:r,reusePreviousLayoutPositions:_}),this._pendingUpdateLayout=!1,this.cy.elements().forEach((e=>{e.toggleClass("hidden",!e.hasClass("layoutVisible"))}));const n=this.cy.nodes(".layoutVisible").map((e=>e.id())),a=this.cy.nodes(".layoutRoot.layoutVisible").map((e=>e.id()));HE(`updateLayout(): ${n.length} nodes participate in the layout (.layoutVisible):`,n,`; and ${a.length} nodes are listed as 'root' nodes (.layoutRoot.layoutVisible):`,a);let i=!0,o=!0;_&&(i=!1,o=!1),r&&(o=!1),(i||o)&&this.cy.elements().removeClass("_layoutPositioned"),i&&(HE("Running prelayout ..."),await this._runPrelayout({rootNodeIds:a})),o&&(HE("Running fcose layout ..."),await this._runCoseLayout({rootNodeIds:a,animate:e})),this.cy.nodes(".layoutVisible").addClass("_layoutPositioned"),HE("updateLayout() done!")}async _runPrelayout({rootNodeIds:e}){HE("_runPrelayout(): Using rootNodeIds =",e);let t=this.subgraphSelector.createPrelayoutInstance({rootNodeIds:e}),r=this.cy.elements(".layoutVisible");this.cy.batch((()=>{this.cy.elements().removeClass(["prelayoutPositioned","prelayoutOutOfLayoutTree","prelayoutRoot"]);try{t.run()}catch(e){return void console.error(e)}r.edges((e=>e.target().is(".prelayoutPositioned")&&e.source().is(".prelayoutPositioned"))).addClass("prelayoutPositioned"),r.not(".prelayoutPositioned").addClass("prelayoutOutOfLayoutTree")}))}async _runCoseLayout({rootNodeIds:e,animate:t}){let _={name:"fcose",quality:"proof",randomize:!1,animate:t,fit:!0,sampleSize:500,nodeDimensionsIncludeLabels:!0,nodeRepulsion:()=>2e5,idealEdgeLength:e=>100,edgeElasticity:e=>.3,numIter:5e4,gravity:0,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:[].concat(e.map((e=>({nodeId:e,position:this.cy.getElementById(e).position()}))))};null!=this.graphGlobalOptions.overrideCoseLayoutOptions&&(_=r(o)(_,this.graphGlobalOptions.overrideCoseLayoutOptions));let n=new Promise((e=>{HE("in promise - creating and running layout");let t=this.cy.elements((e=>e.visible()&&(e.isNode()||e.is(".layoutParent")))).layout(_);t.on("layoutstop",(()=>{HE("in promise - layoutstop event received, resolving promise."),e()})),HE("in promise - running layout"),t.run(),HE("in promise - ran layout")}));HE("laying out (fcose) - waiting for promise."),await n,HE("_runCoseLayout() done!")}async initGraph(){HE("EczCodeGraph: initGraph() ...");let e=[],t=[];const _={};for(const[r,n]of Object.entries(this.eczoodb.objects.domain)){const a=this.getNodeIdDomain(r),i=YE(n.name),o=XE(i);e.push({data:{id:a,label:o,_isDomain:1,_domainId:r,_objectName:i}}),_[a]=o;for(const i of n.kingdoms){const n=i.kingdom_id,o=YE(i.kingdom.name),l=XE(o),s=this.getNodeIdKingdom(n);e.push({data:{id:s,label:l,_isKingdom:1,_kingdomId:n,_kingdomName:o,_objectName:o,_parentDomainId:r}}),_[s]=l,t.push({data:{_relType:"parent",_primaryParent:1,source:s,target:a}})}}for(const[r,n]of Object.entries(this.eczoodb.objects.code)){const a=YE(n.name),i=YE(this.eczoodb.code_short_name(n)),o=XE(this.graphGlobalOptions.useCodeShortNamesForLabels?i:a),l=this.getNodeIdCode(r);_[l]=o;let s={id:l,label:o,_codeId:r,_isCode:1,_objectName:a,_codeShortName:i};const c=this.eczoodb.code_get_primary_parent_root(n,{include_domain_kingdom_root_info:!0}),u=c.primary_parent_root_code,f=c.parent_domain,d=c.parent_kingdom,p=c.is_domain_root_code,h=c.is_kingdom_root_code,g=null==d;if(null!=f){const e=f.domain_id;p&&Object.assign(s,{_isDomainRootCode:1}),Object.assign(s,{_parentDomainId:e})}if(null!=d){const e=u.code_id,t=d.kingdom_id;h&&Object.assign(s,{_isKingdomRootCode:1}),Object.assign(s,{_hasParentKingdom:1,_parentKingdomRootCodeId:e,_parentKingdomId:t})}null==d&&Object.assign(s,{_hasParentKingdom:0}),g&&Object.assign(s,{_isPropertyCode:1}),e.push({data:s}),p&&t.push({data:{_relType:"parent",_primaryParent:1,source:l,target:this.getNodeIdDomain(f.domain_id)}}),h&&t.push({data:{_relType:"parent",_primaryParent:1,source:l,target:this.getNodeIdKingdom(d.kingdom_id)}});for(const e of["parent","cousin"]){let r=n.relations?.[e+"s"];if(null!=r)for(let _=0;_<r.length;++_){const n=r[_];let a={_relType:e,source:l,target:this.getNodeIdCode(n.code.code_id)};"parent"===e&&(a._primaryParent=0!==_||p||h?0:1),t.push({data:a})}}}for(const e of t)e.data.source_label=_[e.data.source],e.data.target_label=_[e.data.target];HE("EczCodeGraph: initGraph() setting up cytoscape object");let n={};n.elements={nodes:e,edges:t},n.style=SE,HE(`About to initialize cytoscape graph w/ ${e.length} nodes & ${t.length} edges`),this.cy=r(Eg)(n),this._initGlobalGraphRootNodesInfo(),HE("EczCodeGraph: initGraph() done")}_initGlobalGraphRootNodesInfo(){const{rootPositioning:e,customDomainIdsOrder:t}=this.graphGlobalOptions;let r={},_=[...Object.keys(this.eczoodb.objects.domain)];HE(`Domains before custom ordering: ${_}`),_.sort(((e,r)=>(t[e]??0)-(t[r]??0))),HE(`Domains after custom ordering: ${_}`);let n=this.getOverallRootNodeIds({includeDomains:!1});this._positionRootNodes_allAround(r,_,n,e),this.globalGraphRootNodesInfo={radialPrelayoutRootNodesPrelayoutInfo:r,rootNodeIds:Object.keys(r)},HE("globalGraphRootNodesInfo = ",this.globalGraphRootNodesInfo)}_positionRootNodes_allAround(e,t,r,_){const{rootNodesCircleXRadius:n,rootNodesCircleYRadius:a}=_;let i=t.length,o=r.length,l=i+o,s=-Math.PI/2+1*(o-1)/(l-1),c=t.map((e=>this.getNodeIdDomain(e)));c.reverse();let u=[...r,...c];for(const[t,r]of u.entries()){const _=s+2*Math.PI*t/l;e[r]={position:{x:n*Math.cos(_),y:a*Math.sin(_)},radiusOffset:200,direction:_,angularSpread:2*Math.PI/l,propertyCodesSortOrder:Math.cos(_)>0?1:-1}}}}s=a("3krpC");const JE=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.subgraphselectorisolatemode");class QE extends $E{constructor(e,t={}){super(e,t=r(o)({reusePreviousLayoutPositions:!0,nodeIds:[],range:{parents:{primary:5,secondary:5,extra:0},children:{primary:2,secondary:2,extra:0}},extraRelationSelector:"edge"},t))}installSubgraph(){this._markSubgraphInstalled(!0);const{nodeIds:e,range:t,extraRelationSelector:r}=this.options;JE("installSubgraph(). options =",this.options),this.cy.batch((()=>{this.cy.elements().removeClass(["layoutVisible","layoutRoot","layoutParent","layoutFadeExtra","isolationRoot","isolationRootConnectingEdge"]);for(const t of e)this.cy.getElementById(t).addClass(["layoutRoot","layoutVisible","isolationRoot"]);let _=this.cy.nodes(".layoutVisible"),n=_;for(let e=0;e<t.parents.primary;++e){let e=n.outgoers("[_primaryParent=1]");e.addClass("layoutParent"),n=n.union(e).union(e.connectedNodes())}let a=_;for(let e=0;e<t.children.primary;++e){let e=a.incomers("[_primaryParent=1]");e.addClass("layoutParent"),a=a.union(e).union(e.connectedNodes())}let i=new Set;n.forEach((e=>i.add(e.id()))),a.forEach((e=>i.add(e.id())));let o=_;for(let e=0;e<t.parents.secondary;++e){let e=o.outgoers('[_relType="parent"]');e.forEach((e=>{const t=e.target().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),o=o.union(e).union(e.connectedNodes())}let l=_;for(let e=0;e<t.parents.secondary;++e){let e=l.incomers('[_relType="parent"]');e.forEach((e=>{const t=e.source().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),l=l.union(e).union(e.connectedNodes())}let s=n.union(a).union(o).union(l);JE("mainNodes are ",s,"extra relation selector = ",r);let c=s,u=Math.max(t.parents.extra??0,t.children.extra??0);JE("range = ",t,"maxExtra = ",u);for(let e=0;e<u;++e){JE(`Processing extra/neighbor nodes step ${e}. allElements = `,c);let _=[],n=[];if(e<t.parents.extra){let e=c.outgoers(r);e.forEach((e=>{if(!e.isEdge())return;const t=e.target().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),_=e.union(e.connectedNodes()),JE({outEdges:e,outElements:_})}if(e<t.children.extra){let e=c.incomers(r);e.forEach((e=>{if(!e.isEdge())return;const t=e.source().id();i.has(t)||(e.addClass("layoutParent"),i.add(t))})),n=e.union(e.connectedNodes()),JE({inEdges:e,inElements:n})}c=c.union(n).union(_)}c.addClass("layoutVisible");const f=c.not(s);f.addClass("layoutFadeExtra"),_.connectedEdges("edge.layoutVisible").addClass("isolationRootConnectingEdge"),JE("extraElements are ",f)})),this.radialPrelayoutOptions={origin:{direction:Math.PI/2,angularSpread:.8*Math.PI,useWeights:!0}};const _=this.eczCodeGraph.globalGraphRootNodesInfo;_?.radialPrelayoutRootNodesPrelayoutInfo&&(this.radialPrelayoutRootNodesPrelayoutInfo=_.radialPrelayoutRootNodesPrelayoutInfo)}setOptions(e){if(e??={},r(ag)(e,{})||r(ag)(e,this.options))return{pendingUpdateLayout:!1};let t={};return null!=e.nodeIds&&(t.nodeIds=null),this.options=r(o)({},this.options,t,e),this.installSubgraph()}uninstallSubgraph(){this._markSubgraphInstalled(!1),this.cy.elements().removeClass(["layoutFadeExtra","isolationRoot","isolationRootConnectingEdge"])}}const eC=r(s=a("3krpC"))("eczoo_jscomponents.codegraph.subgraphselectorsubset");class tC extends $E{constructor(e,t={}){super(e,t=r(o)({reusePreviousLayoutPositions:!1,codeIds:[],connectingNodesToDomainsAndKingdoms:!0,connectingNodesToDomainsAndKingdomsMaxLength:2,showIntermediateConnectingNodes:!0,connectingNodesMaxPathLength:null,connectingNodesMaxNumPaths:null,connectingNodesOnlyKeepPathsWithAdditionalLength:null,connectingNodesEdgeLengthsByType:{primaryParent:null,secondaryParent:null,cousin:null},nodeIds:[]},t))}getSelectedElementsWithInternalEdges({codeIds:e,nodeIds:t}){const r=[...e.map((e=>this.eczCodeGraph.getNodeIdCode(e))),...t].map((e=>{const t=this.cy.getElementById(e);return null==t||0==t?.length?(console.warn(`No such node ID: ${e}`),null):t})).filter((e=>null!=e)),_=this.cy.collection().union(r);return _.union(_.connectedEdges().filter((e=>_.has(e.source())&&_.has(e.target()))))}findParentDomainAndKingdomNodes({primaryElements:e,secondaryElements:t,connectingNodesToDomainsAndKingdomsMaxLength:r}){const _=e.union(t);let n=this.cy.collection(),a=e,i=this.cy.collection(),o={},l=0;for(;a.length;){++l,i=i.union(a);let e=a.connectedEdges().filter((e=>{const t=e.data();return"parent"===t._relType&&t._primaryParent&&a.has(e.source())&&!i.has(e.target())})),t=new Set,s=new Set;for(const n of e){const e=n.source();let a=n.target();l<r&&t.add(a);const i=a.id(),c=e.id();null!=o[c]&&0!==o[c].length||(o[c]=[[]]),null==o[i]&&(o[i]=[]);let u=[n,a].filter((e=>!_.has(e)));for(let t of o[e.id()]){const e=[...t,...u];e.length&&o[i].push(e)}const f=a.data();(f._isDomain||f._isKingdom)&&(s.add(a),t.add(a))}a=this.cy.collection().union([...t]),n=n.union([...s]),eC(`Found ${s.size} kingdoms/domains at this level - ${ME([...s])}; next node set is`,ME([...t]))}eC(`Finally, domains & kingdom nodes are ${ME(n)} and node chains are:`,o);let s=[];for(const e of n)for(const t of o[e.id()])s.push(...t);let c=this.cy.collection().union(s);return c=c.union(n.connectedEdges().filter((e=>n.has(e.source())&&n.has(e.target())&&!_.has(e)))),{domainsAndKingdomNodes:n,additionalConnectingElements:c,additionalNodesWithEdges:n.union(c)}}findIntermediateNodesConnectingComponents({primaryElements:e,secondaryElements:t,connectingNodesMaxPathLength:r,connectingNodesMaxNumPaths:_,connectingNodesOnlyKeepPathsWithAdditionalLength:n,connectingNodesEdgeLengthsByType:a}){const i=e.union(t),o=i.edges(),{componentInfos:l}=jE({cy:this.cy,visibleElements:i,allElements:this.cy.elements(),connectingNodesMaxPathLength:r,connectingNodesMaxNumPaths:_,connectingNodesOnlyKeepPathsWithAdditionalLength:n,edgeLengthFn:e=>{if(o.has(e))return 0;const t=e.data();if(t._primaryParent)return a.primaryParent??1;if("parent"===t._relType)return a.secondaryParent??1.3;if("cousin"===t._relType)return a.cousin??2.1;throw new Error(`Unknown edge relationship in graph: ${LE(e)}`)}});let s=this.cy.collection();for(const[e,t]of l.entries())for(let r=e+1;r<l.length;++r){const _=t.shortestPathsToComponents[r];for(const t of _.paths)eC(`Collecting intermediate collecting nodes between components #${e} and #${r}: ${ME(t.path)}`),s=s.union(t.path)}return s=s.filter((r=>!e.has(r)&&!t.has(r))),{intermediateConnectingElements:s}}buildLayoutTree({visibleElements:e}){let t=this.cy.collection(),r=this.cy.collection(),_=this.cy.collection(),n=this.cy.collection();const a=e.nodes();for(const t of a){let r=t.connectedEdges().filter((r=>r.data()._primaryParent&&"parent"===r.data()._relType&&r.source().id()===t.id()&&e.has(r)&&e.has(r.target())));if(0===r.length&&(r=t.connectedEdges().filter((r=>"parent"===r.data()._relType&&r.source().id()===t.id()&&e.has(r)&&e.has(r.target())))),0===r.length){_=_.union(t);continue}const a=r[0];n=n.union(a)}r=_;let i=a.difference(_),o={},l=r;for(;i.length;){eC("Will perform a round of including child nodes in layout tree...",ME(i),"using last-level nodes",ME(l));let e=this.cy.collection();for(const _ of l){const a=_.connectedEdges().filter((e=>n.has(e)&&e.target().id()===_.id()&&i.has(e.source())));t=t.union(a);let l=this.cy.collection(a.map((e=>e.source())));r.has(_)&&l.length&&(o[_.id()]=!0),i=i.difference(l),e=e.union(l)}if(l=e,eC(`Positioned nodes ${ME(e)}`),eC(`Still need to position nodes [${ME(i)}]`),0===e.length&&i.length)throw new Error("Was not able to position all nodes in layout!")}eC(`Identified root nodes & edges (but before integrating orphan roots): layoutPrimaryParentEdges=${ME(t)}; layoutRootElements=${ME(r)}`);for(const _ of r)if(!o[_.id()]){eC(`Node ${LE(_)} is layout root and alone!`,o);const n=_.connectedEdges().filter((t=>e.has(t)));let a=null;const i=n.filter("[_primaryParent]");if(i.length)a=i[0];else{const e=n.filter('[_relType="parent"]');e.length?a=e[0]:n.length&&(a=n[0])}if(null!=a){const e=a.connectedNodes().filter((e=>e.id()!==_.id()));eC(`Node ${LE(_)} is alone, attaching it via edge ${LE(a)} to ${LE(e)}; before: layoutPrimaryParentEdges=${ME(t)}; layoutRootElements=${ME(r)}`),t=t.union(a),r=r.difference(_),eC(`After attaching: layoutPrimaryParentEdges=${ME(t)}; layoutRootElements=${ME(r)}`),r.has(e)&&(eC(`The attaching node, ${e.id()}, is a layout root node. We must mark it as has having "children" to avoid moving it around on its turn!`),o[e.id()]=!0)}}return{layoutRootElements:r,layoutPrimaryParentEdges:t}}installSubgraph(){this._markSubgraphInstalled(!0);let{codeIds:e,nodeIds:t,connectingNodesToDomainsAndKingdoms:r,connectingNodesToDomainsAndKingdomsMaxLength:_,showIntermediateConnectingNodes:n,connectingNodesMaxPathLength:a,connectingNodesMaxNumPaths:i,connectingNodesOnlyKeepPathsWithAdditionalLength:o,connectingNodesEdgeLengthsByType:l}=this.options;eC(`EczCodeGraphSubgraphSelectorSubset: installSubgraph(), codeIds=${e}`);const s=this.getSelectedElementsWithInternalEdges({codeIds:e,nodeIds:t});let c=this.cy.collection();if(r){const{additionalNodesWithEdges:e}=this.findParentDomainAndKingdomNodes({primaryElements:s,secondaryElements:c,connectingNodesToDomainsAndKingdomsMaxLength:_});c=c.union(e)}if(n){const{intermediateConnectingElements:e}=this.findIntermediateNodesConnectingComponents({primaryElements:s,secondaryElements:c,connectingNodesMaxPathLength:a,connectingNodesMaxNumPaths:i,connectingNodesOnlyKeepPathsWithAdditionalLength:o,connectingNodesEdgeLengthsByType:l});c=c.union(e)}const{layoutPrimaryParentEdges:u,layoutRootElements:f}=this.buildLayoutTree({visibleElements:s.union(c)});eC(`codeIds=${e.join(",")}`),eC(`nodeIds=${e.join(",")}`),eC(`primaryElements=${ME(s)}`),eC(`secondaryElements=${ME(c)}`),eC(`layoutRootElements=${ME(f)}`),eC(`layoutPrimaryParentEdges=${ME(u)}`),this.cy.batch((()=>{this.cy.elements().removeClass(["layoutRoot","layoutVisible","layoutParent"]),s.addClass("layoutVisible"),c.addClass(["layoutVisible","layoutFadeExtra"]),f.addClass("layoutRoot"),u.addClass("layoutParent")})),this.radialPrelayoutOptions={origin:{direction:Math.PI/2,angularSpread:.8*Math.PI,useWeights:!0,rootPositioning:"circle",rootPositionCircleAngularSpread:.8*Math.PI,rootPositionCircleDirection:Math.PI/2},ignoreParentEdgeDirection:!0},eC("EczCodeGraphSubgraphSelectorSubset: installSubgraph() done.")}}s=a("3krpC");class rC{constructor(e,t=null){this.eczCodeGraph=e,this.eczoodb=e.eczoodb,this.cy=e.cy,this.filterOptions=Object.assign({},t)}setFilterOptions(e){this.filterOptions=Object.assign({},this.filterOptions,e)}applyFilter(){}removeFilter(){}}const _C=r(s)("eczoo_jscomponents.codegraph.stdgraphfilters");class nC extends rC{constructor(e,t){super(e,Object.assign({enabled:!0},t??{})),this.domainColorIndexByDomainId={};let r=0;for(const e of Object.keys(this.eczoodb.objects.domain)){const t=r;this.domainColorIndexByDomainId[e]=t,r=parseInt((r+1)%3)}_C("Got domain color indexes for domain id's:",this.domainColorIndexByDomainId)}applyFilter({eles:e}){this.filterOptions.enabled?this.cy.batch((()=>{e.nodes().forEach((e=>{const t=e.data("_domainId"),r=e.data("_parentDomainId");t?(e.data("_domainColorIndex",this.domainColorIndexByDomainId[t]),e.addClass("useDomainColors")):r?(e.data("_domainColorIndex",this.domainColorIndexByDomainId[r]),e.addClass("useDomainColors")):e.removeData("_domainColorIndex")}))})):this.removeFilter({eles:e})}removeFilter({eles:e}){e.removeClass("useDomainColors"),e.removeData("_domainColorId")}}class aC extends rC{constructor(e,t){super(e,Object.assign({cousinEdgesShown:!1,secondaryParentEdgesShown:!1},t??{}))}applyFilter({eles:e}){this.cy.batch((()=>{e.edges().forEach((e=>{const{_primaryParent:t,_relType:r}=e.data(),_=!e.hasClass("layoutParent")&&(0===t&&!this.filterOptions.secondaryParentEdgesShown||"cousin"===r&&!this.filterOptions.cousinEdgesShown);e.toggleClass("hiddenSecondaryEdge",_)}))}))}removeFilter({eles:e}){e.edges().removeClass("hiddenSecondaryEdge")}}class iC extends rC{constructor(e,t){super(e,Object.assign({highlightImportantNodes:!0,degreeThreshold:8,highlightPrimaryParents:!0,highlightRootConnectingEdges:!0},t??{}))}applyFilter({eles:e}){const{highlightImportantNodes:t,degreeThreshold:r,highlightPrimaryParents:_,highlightRootConnectingEdges:n}=this.filterOptions;this.cy.batch((()=>{t&&e.nodes().forEach((e=>{const t=1===e.data("_isKingdom")||1===e.data("_isDomain")||e.degree()>r;e.toggleClass("importantNode",t),e.toggleClass("notImportantNode",!t)})),e.edges().toggleClass("enableHighlightPrimaryParents",_),e.edges().removeClass(["highlightRootConnectingEdge","highlightRootIncomingEdge","highlightRootOutgoingEdge"]);const a=e.nodes(".layoutRoot"),i=a.incomers("edge.layoutVisible"),o=a.outgoers("edge.layoutVisible");n&&(i.addClass(["highlightRootConnectingEdge","highlightRootIncomingEdge"]),o.addClass(["highlightRootConnectingEdge","highlightRootOutgoingEdge"]))}))}removeFilter({eles:e}){e.removeClass(["importantNode","enableHighlightPrimaryParents","highlightRootConnectingEdge","highlightRootIncomingEdge","highlightRootOutgoingEdge"])}}class oC extends rC{applyFilter({eles:e}){const t=this.filterOptions.searchText||"";if(e.removeClass(["searchMatchHighlight","searchNoMatchDimmed"]),""===t)return;const r=JSON.stringify(t),_=e.nodes(`[label @*= ${r}], [_objectName @*= ${r}], [id @*= ${r}]`);_C(`Applying search graph filter for ${JSON.stringify(t)}; matched ${_.length} node elements`),_.addClass("searchMatchHighlight");const n=this.cy;n.stop(),n.animate({fit:{eles:_},duration:80}),e.not(".searchMatchHighlight").addClass("searchNoMatchDimmed")}removeFilter({eles:e}){e.removeClass(["searchMatchHighlight","searchNoMatchDimmed"])}}const lC=r(s)("eczoo_jscomponents.codegraph.eczcodegraphviewcontroller"),sC={displayMode:"all",modeIsolateNodesOptions:{nodeIds:null,range:{parents:{primary:2,secondary:2,extra:1},children:{primary:1,secondary:1,extra:1}},reusePreviousLayoutPositions:!0,extraRelationSelector:"edge"},modeSubsetOptions:{codeIds:[],reusePreviousLayoutPositions:!1,connectingNodesToDomainsAndKingdoms:!0,connectingNodesToDomainsAndKingdomsMaxLength:2,showIntermediateConnectingNodes:!0,connectingNodesMaxPathLength:3.5,connectingNodesMaxNumPaths:5,connectingNodesOnlyKeepPathsWithAdditionalLength:0,connectingNodesEdgeLengthsByType:{primaryParent:1,secondaryParent:1.3,cousin:2.1}},domainColoring:!0,cousinEdgesShown:!1,secondaryParentEdgesShown:!1,highlightImportantNodes:{highlightImportantNodes:!0,degreeThreshold:8,highlightPrimaryParents:!0,highlightRootConnectingEdges:!0},searchHighlightText:null};class cC{constructor(e,t){this.getMergedDisplayOptions=cC.getMergedDisplayOptions,this.eczCodeGraph=e,this.displayOptions=cC.getMergedDisplayOptions(sC,t??{}),this.subgraphSelectorInstances={}}async initialize(){lC("EczCodeGraphViewController.initialize()"),this.subgraphSelectorInstances={all:new WE(this.eczCodeGraph),"isolate-nodes":new QE(this.eczCodeGraph),subset:new tC(this.eczCodeGraph)};const e={domainColors:new nC(this.eczCodeGraph),hideSecondaryEdges:new aC(this.eczCodeGraph),search:new oC(this.eczCodeGraph),highlightImportantNodes:new iC(this.eczCodeGraph)};for(const[t,r]of Object.entries(e))this.eczCodeGraph.installGraphFilter({graphFilterName:t,graphFilter:r});this._setGraph(),lC("EczCodeGraphViewController.initialize() finished!")}_setGraph(){lC("EczCodeGraphViewController._setGraph(); displayOptions =",this.displayOptions);let e=null,t={};if("all"===this.displayOptions.displayMode)e=this.subgraphSelectorInstances.all,t={};else if("isolate-nodes"===this.displayOptions.displayMode)e=this.subgraphSelectorInstances["isolate-nodes"],t=this.displayOptions.modeIsolateNodesOptions;else{if("subset"!==this.displayOptions.displayMode)throw new Error(`Invalid display mode: ${this.displayOptions.displayMode}`);e=this.subgraphSelectorInstances.subset,t=this.displayOptions.modeSubsetOptions}this.eczCodeGraph.updateSubgraphSelectorAndSetGraphFilterOptions(e,t,{domainColors:{enabled:this.displayOptions.domainColoring},hideSecondaryEdges:{cousinEdgesShown:this.displayOptions.cousinEdgesShown,secondaryParentEdgesShown:this.displayOptions.secondaryParentEdgesShown},search:{searchText:this.displayOptions.searchHighlightText},highlightImportantNodes:this.displayOptions.highlightImportantNodes}),lC("EczCodeGraphViewController._setGraph() done.")}static getMergedDisplayOptions(e,t){if(null==t||!t)return e;let _={};return null!=t.modeIsolateNodesOptions?.nodeIds&&(_.modeIsolateNodesOptions={nodeIds:null}),null!=t.modeSubsetOptions?.codeIds&&(_.modeSubsetOptions={codeIds:null}),r(o)({},e,_,t)}setDisplayOptions(e){lC("EczCodeGraphViewController.setDisplayOptions()",e),this.displayOptions=this.getMergedDisplayOptions(this.displayOptions,e),this._setGraph()}}var uC={};if(window,uC=function(e){var t={};function r(_){if(t[_])return t[_].exports;var n=t[_]={i:_,l:!1,exports:{}};return e[_].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,_){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:_})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var _=Object.create(null);if(r.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(_,n,function(t){return e[t]}.bind(null,n));return _},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){var _=r(1),n=function(e){e&&e("core","svg",_.svg)};"undefined"!=typeof cytoscape&&n(cytoscape),e.exports=n},function(e,t,r){var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(2),a={},i={number:function(e){return null!=e&&(void 0===e?"undefined":_(e))===_(1)&&!isNaN(e)}};a.bufferCanvasImage=function(e,t){var r=t.renderer().usePaths;t.renderer().usePaths=function(){return!1},t.elements().forEach((function(e){e._private.rscratch.pathCacheKey=null,e._private.rscratch.pathCache=null}));var _=t.renderer(),a=t.mutableElements().boundingBox(),o=_.findContainerClientCoords(),l=e.full?Math.ceil(a.w):o[2],s=e.full?Math.ceil(a.h):o[3],c=i.number(e.maxWidth)||i.number(e.maxHeight),u=_.getPixelRatio(),f=1;if(void 0!==e.scale)l*=e.scale,s*=e.scale,f=e.scale;else if(c){var d=1/0,p=1/0;i.number(e.maxWidth)&&(d=f*e.maxWidth/l),i.number(e.maxHeight)&&(p=f*e.maxHeight/s),l*=f=Math.min(d,p),s*=f}c||(l*=u,s*=u,f*=u);var h=null,g=h=new n(l,s);if(l>0&&s>0){h.clearRect(0,0,l,s),e.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=e.bg,h.fillRect(0,0,l,s)),h.globalCompositeOperation="source-over";var v=_.getCachedZSortedEles();if(e.full)h.translate(-a.x1*f,-a.y1*f),h.scale(f,f),_.drawElements(h,v),h.scale(1/f,1/f),h.translate(a.x1*f,a.y1*f);else{var m=t.pan(),y={x:m.x*f,y:m.y*f};f*=t.zoom(),h.translate(y.x,y.y),h.scale(f,f),_.drawElements(h,v),h.scale(1/f,1/f),h.translate(-y.x,-y.y)}}return t.renderer().usePaths=r,g},a.svg=function(e){return a.bufferCanvasImage(e||{},this).getSerializedSvg()},e.exports=a},function(e,t,r){!function(){var t,r,_,n,a;function i(e,t){var r,_=Object.keys(t);for(r=0;r<_.length;r++)e=e.replace(new RegExp("\\{"+_[r]+"\\}","gi"),t[_[r]]);return e}function o(e){var t,r,_;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",_=0;_<12;_++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function l(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}a=function(e,t){var r,_,n,a={};for(e=e.split(","),t=t||10,r=0;r<e.length;r+=2)_="&"+e[r+1]+";",n=parseInt(e[r],t),a[_]="&#"+n+";";return a["\\xa0"]="&#160;",a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(_=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var r,_=this.__ctx.__createElement("stop");_.setAttribute("offset",e),-1!==t.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),_.setAttribute("stop-color",i("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),_.setAttribute("stop-opacity",r[4])):_.setAttribute("stop-color",t),this.__root.appendChild(_)},n=function(e,t){this.__root=e,this.__ctx=t},(r=function(e){var t,_={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((t=_).width=arguments[0],t.height=arguments[1]):t=e||_,!(this instanceof r))return new r(t);this.width=t.width||_.width,this.height=t.height||_.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:_.enableMirroring,this.canvas=this,this.__document=t.document||document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,t,r){void 0===t&&(t={});var _,n,a=this.__document.createElementNS("http://www.w3.org/2000/svg",e),i=Object.keys(t);for(r&&(a.setAttribute("fill","none"),a.setAttribute("stroke","none")),_=0;_<i.length;_++)n=i[_],a.setAttribute(n,t[n]);return a},r.prototype.__setDefaultStyles=function(){var e,r,_=Object.keys(t);for(e=0;e<_.length;e++)this[r=_[e]]=t[r].canvas},r.prototype.__applyStyleState=function(e){if(e){var t,r,_=Object.keys(e);for(t=0;t<_.length;t++)this[r=_[t]]=e[r]}},r.prototype.__getStyleState=function(){var e,r,_={},n=Object.keys(t);for(e=0;e<n.length;e++)_[r=n[e]]=this[r];return _},r.prototype.__applyStyleToCurrentElement=function(e){var r=this.__currentElement;this.__currentElementsToStyle;var a,o,l,s,c,u=Object.keys(t);for(a=0;a<u.length;a++)if(o=t[u[a]],l=this[u[a]],o.apply)if(l instanceof n){if(l.__ctx)for(;l.__ctx.__defs.childNodes.length;)s=l.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[s]=s,this.__defs.appendChild(l.__ctx.__defs.childNodes[0]);r.setAttribute(o.apply,i("url(#{id})",{id:l.__root.getAttribute("id")}))}else if(l instanceof _)r.setAttribute(o.apply,i("url(#{id})",{id:l.__root.getAttribute("id")}));else if(-1!==o.apply.indexOf(e)&&o.svg!==l)if("stroke"!==o.svgAttr&&"fill"!==o.svgAttr||-1===l.indexOf("rgba")){var f=o.svgAttr;if("globalAlpha"===u[a]&&(f=e+"-"+o.svgAttr,r.getAttribute(f)))continue;r.setAttribute(f,l)}else{c=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(l),r.setAttribute(o.svgAttr,i("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]}));var d=c[4],p=this.globalAlpha;null!=p&&(d*=p),r.setAttribute(o.svgAttr+"-opacity",d)}},r.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},r.prototype.getSerializedSvg=function(e){var t,r,_,n,i,o=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(o)&&(o=o.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(a),r=0;r<t.length;r++)_=t[r],n=a[_],(i=new RegExp(_,"gi")).test(o)&&(o=o.replace(i,n));return o},r.prototype.getSvg=function(){return this.__root},r.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},r.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},r.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var r=this.__createElement("g");t.appendChild(r),this.__currentElement=r}var _=this.__currentElement.getAttribute("transform");_?_+=" ":_="",_+=e,this.__currentElement.setAttribute("transform",_)},r.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(i("scale({x},{y})",{x:e,y:t}))},r.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(i("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},r.prototype.translate=function(e,t){this.__addTransform(i("translate({x},{y})",{x:e,y:t}))},r.prototype.transform=function(e,t,r,_,n,a){this.__addTransform(i("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:r,d:_,e:n,f:a}))},r.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},r.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},r.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},r.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},r.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},r.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(i("L {x} {y}",{x:e,y:t})):this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},r.prototype.bezierCurveTo=function(e,t,r,_,n,a){this.__currentPosition={x:n,y:a},this.__addPathCommand(i("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:r,cp2y:_,x:n,y:a}))},r.prototype.quadraticCurveTo=function(e,t,r,_){this.__currentPosition={x:r,y:_},this.__addPathCommand(i("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:r,y:_}))};var s=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};r.prototype.arcTo=function(e,t,r,_,n){var a=this.__currentPosition&&this.__currentPosition.x,i=this.__currentPosition&&this.__currentPosition.y;if(void 0!==a&&void 0!==i){if(n<0)throw new Error("IndexSizeError: The radius provided ("+n+") is negative.");if(a===e&&i===t||e===r&&t===_||0===n)this.lineTo(e,t);else{var o=s([a-e,i-t]),l=s([r-e,_-t]);if(o[0]*l[1]!=o[1]*l[0]){var c=o[0]*l[0]+o[1]*l[1],u=Math.acos(Math.abs(c)),f=s([o[0]+l[0],o[1]+l[1]]),d=n/Math.sin(u/2),p=e+d*f[0],h=t+d*f[1],g=[-o[1],o[0]],v=[l[1],-l[0]],m=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},y=m(g),w=m(v);this.lineTo(p+g[0]*n,h+g[1]*n),this.arc(p,h,n,y,w)}else this.lineTo(e,t)}}},r.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},r.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},r.prototype.rect=function(e,t,r,_){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+_),this.lineTo(e,t+_),this.lineTo(e,t),this.closePath()},r.prototype.fillRect=function(e,t,r,_){var n;n=this.__createElement("rect",{x:e,y:t,width:r,height:_},!0),this.__closestGroupOrSvg().appendChild(n),this.__currentElement=n,this.__applyStyleToCurrentElement("fill")},r.prototype.strokeRect=function(e,t,r,_){var n;n=this.__createElement("rect",{x:e,y:t,width:r,height:_},!0),this.__closestGroupOrSvg().appendChild(n),this.__currentElement=n,this.__applyStyleToCurrentElement("stroke")},r.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg().getAttribute("transform"),t=this.__root.childNodes[1],r=t.childNodes,_=r.length-1;_>=0;_--)r[_]&&t.removeChild(r[_]);this.__currentElement=t,this.__groupStack=[],e&&this.__addTransform(e)},r.prototype.clearRect=function(e,t,r,_){if(0!==e||0!==t||r!==this.width||_!==this.height){var n,a=this.__closestGroupOrSvg();n=this.__createElement("rect",{x:e,y:t,width:r,height:_,fill:"#FFFFFF"},!0),a.appendChild(n)}else this.__clearCanvas()},r.prototype.createLinearGradient=function(e,t,r,n){var a=this.__createElement("linearGradient",{id:o(this.__ids),x1:e+"px",x2:r+"px",y1:t+"px",y2:n+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new _(a,this)},r.prototype.createRadialGradient=function(e,t,r,n,a,i){var l=this.__createElement("radialGradient",{id:o(this.__ids),cx:n+"px",cy:a+"px",r:i+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new _(l,this)},r.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},r.prototype.__wrapTextLink=function(e,t){if(e.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),r.appendChild(t),r}return t},r.prototype.__applyText=function(e,t,r,_){var n,a,i=this.__parseFont(),o=this.__closestGroupOrSvg(),s=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:t,y:r,"text-anchor":(n=this.textAlign,a={left:"start",right:"end",center:"middle",start:"start",end:"end"},a[n]||a.start),"dominant-baseline":l(this.textBaseline)},!0);s.appendChild(this.__document.createTextNode(e)),this.__currentElement=s,this.__applyStyleToCurrentElement(_),o.appendChild(this.__wrapTextLink(i,s))},r.prototype.fillText=function(e,t,r){this.__applyText(e,t,r,"fill")},r.prototype.strokeText=function(e,t,r){this.__applyText(e,t,r,"stroke")},r.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},r.prototype.arc=function(e,t,r,_,n,a){if(_!==n){(_%=2*Math.PI)==(n%=2*Math.PI)&&(n=(n+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=e+r*Math.cos(n),l=t+r*Math.sin(n),s=e+r*Math.cos(_),c=t+r*Math.sin(_),u=a?0:1,f=0,d=n-_;d<0&&(d+=2*Math.PI),f=a?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(s,c),this.__addPathCommand(i("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:f,sweepFlag:u,endX:o,endY:l})),this.__currentPosition={x:o,y:l}}},r.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),r=o(this.__ids),_=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",r),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",i("url(#{id})",{id:r})),e.appendChild(_),this.__currentElement=_},r.prototype.drawImage=function(){var e,t,_,n,a,i,o,l,s,c,u,f,d,p=Array.prototype.slice.call(arguments),h=p[0],g=0,v=0;if(3===p.length)e=p[1],t=p[2],_=a=h.width,n=i=h.height;else if(5===p.length)e=p[1],t=p[2],_=p[3],n=p[4],a=h.width,i=h.height;else{if(9!==p.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);g=p[1],v=p[2],a=p[3],i=p[4],e=p[5],t=p[6],_=p[7],n=p[8]}o=this.__closestGroupOrSvg(),this.__currentElement;var m="translate("+e+", "+t+")";if(h instanceof r){if((l=h.getSvg().cloneNode(!0)).childNodes&&l.childNodes.length>1){for(s=l.childNodes[0];s.childNodes.length;)d=s.childNodes[0].getAttribute("id"),this.__ids[d]=d,this.__defs.appendChild(s.childNodes[0]);if(c=l.childNodes[1]){var y,w=c.getAttribute("transform");y=w?w+" "+m:m,c.setAttribute("transform",y),o.appendChild(c)}}}else"CANVAS"!==h.nodeName&&"IMG"!==h.nodeName||((u=this.__createElement("image")).setAttribute("width",_),u.setAttribute("height",n),u.setAttribute("opacity",this.globalAlpha),u.setAttribute("preserveAspectRatio","none"),(f=this.__document.createElement("canvas")).width=_,f.height=n,f.getContext("2d").drawImage(h,g,v,a,i,0,0,_,n),h=f,u.setAttribute("transform",m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===h.nodeName?h.toDataURL():h.getAttribute("src")),o.appendChild(u))},r.prototype.createPattern=function(e,t){var _,a=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=o(this.__ids);return a.setAttribute("id",i),a.setAttribute("width",e.width),a.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((_=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),_.setAttribute("height",e.height),_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),a.appendChild(_),this.__defs.appendChild(a)):e instanceof r&&(a.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(a)),new n(a,this)},r.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},r.prototype.drawFocusRing=function(){},r.prototype.createImageData=function(){},r.prototype.getImageData=function(){},r.prototype.putImageData=function(){},r.prototype.globalCompositeOperation=function(){},r.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=r),"object"==typeof e.exports&&(e.exports=r)}()}]),console.log("Executing in-browser code now"),!function(){return!this}())throw console.error("Not strict mode!"),new Error("Not strict mode!");const fC=r(s)("_headless_exporter_browser_code");async function dC(e,t,r){const _=await ng(e);let n=new KE({eczoodb:_,graphGlobalOptions:r});await n.initialize();let a=new cC(n,t);return await a.initialize(),{eczoodb:_,eczCodeGraph:n,eczCodeGraphViewController:a}}async function pC(e,{graphGlobalOptions:t,displayOptions:_,updateLayoutOptions:n,cyStyleOptions:a}){const{eczoodb:i,eczCodeGraph:l,eczCodeGraphViewController:s}=await dC(e,_,t);fC("Code graph loaded.");const c=window.document.createElement("div");window.document.body.appendChild(c),c.style.width=800,c.style.height=600,await l.mountInDom(c,{styleOptions:Object.assign({matchWebPageFonts:!1,window:window},a)}),fC("Mounted in DOM!"),s.setDisplayOptions(_),fC("set display options!"),await l.updateLayout(r(o)({animate:!1},n)),fC("ran updateLayout()!");const u=l.cy;return await u.fit(),fC("fit cy canvas view to graph. Done!"),fC(`There are ${u.nodes().length} nodes in the graph.`),{eczoodb:i,eczCodeGraph:l,eczCodeGraphViewController:s}}r(Eg).use(r(uC)),window.loadCodeGraph=dC,window.prepareCodeGraphAndLayout=pC,window.loadAndCompileCodeGraphToSvgPromise=async function(e,t,r){return fC("prepareOptions = ",JSON.stringify(t)),{svgData:(await pC(e,t)).eczCodeGraph.cy.svg(Object.assign({full:!0},r))}},window.localStorage.debug="*",console.log("Loaded (msg via console.log())"),fC("Loaded (msg via debug())."),console.debug("Loaded (msg via console.debug())"),window.finished_loading=!0;
//# sourceMappingURL=_headless_exporter_browser_page.c2207117.js.map
